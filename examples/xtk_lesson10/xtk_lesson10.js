!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=78)}([function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(13),r=n(43);class o{constructor(t=0,e=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(s.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(s.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*i-a*n,c=s*n+a*e-r*i,u=s*i+r*n-o*e,h=-r*e-o*n-a*i;return this.x=l*s+h*-r+c*-a-u*-o,this.y=c*s+h*-o+u*-r-l*-a,this.z=u*s+h*-a+l*-o-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return a.copy(this).projectOnVector(t),this.sub(a)}reflect(t){return this.sub(a.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(i.a.clamp(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const a=new o,s=new r.a},function(t,e,n){"use strict";var i=n(6),r=n(58),o=n(59),a=n(62),s=n(3),l=n(0),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.bbox=function(t,e){return i.a.vector3(t)&&i.a.vector3(e)?e.x>=0&&e.y>=0&&e.z>=0?{min:t.clone().sub(e),max:t.clone().add(e)}:(window.console.log("halfDimensions must be >= 0."),window.console.log(e),!1):(console.log("Invalid center or plane halfDimensions."),!1)},t.minMax=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[65535,-32768],n=t.length,i=0;i<n;i++){var r=t[i];e[0]=Math.min(e[0],r),e[1]=Math.max(e[1],r)}return e},t.isElement=function(t){try{return t instanceof HTMLElement}catch(e){return"object"===(void 0===t?"undefined":c(t))&&1===t.nodeType&&"object"===c(t.style)&&"object"===c(t.ownerDocument)}},t.isString=function(t){return"string"==typeof t||t instanceof String},t.parseUrl=function(t){var e=new URL(t,"http://fix.me"),n={filename:e.searchParams.get("filename"),extension:"",pathname:e.pathname,query:e.search};n.filename||(n.filename=n.pathname.split("/").pop());var i=n.filename.split(".");n.extension=i.length>1?i.pop():"dicom";return(!isNaN(n.extension)||-1!==["asp","aspx","go","gs","hs","jsp","js","php","pl","py","rb","htm","html"].indexOf(n.extension)||n.query&&n.query.includes("contentType=application%2Fdicom"))&&(n.extension="dicom"),n},t.ijk2LPS=function(t,e,n,i,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new s.a,a=new s.a;return a.set(t.x*i.y,e.x*i.x,n.x*i.z,r.x,t.y*i.y,e.y*i.x,n.y*i.z,r.y,t.z*i.y,e.z*i.x,n.z*i.z,r.z,0,0,0,1),a.premultiply(o),a},t.aabb2LPS=function(t,e,n,i){var r=new s.a;return r.set(t.x,e.x,n.x,i.x,t.y,e.y,n.y,i.y,t.z,e.z,n.z,i.z,0,0,0,1),r},t.worldToData=function(t,e){var n=(new l.a).copy(e).applyMatrix4(t);return n.addScalar(.5).floor(),n},t.value=function(t,e){window.console.warn("value is deprecated, please use getPixelData instead"),this.getPixelData(t,e)},t.getPixelData=function(t,e){return e.z>=0&&e.z<t._frame.length?t._frame[e.z].getPixelData(e.x,e.y):null},t.setPixelData=function(t,e,n){if(!(e.z>=0&&e.z<t._frame.length))return null;t._frame[e.z].setPixelData(e.x,e.y,n)},t.rescaleSlopeIntercept=function(t,e,n){return t*e+n},t.centerOfMass=function(t){for(var e=new l.a(0,0,0),n=0;n<t.length;n++)e.x+=t[n].x,e.y+=t[n].y,e.z+=t[n].z;return e.divideScalar(t.length),e},t.orderIntersections=function(t,e){for(var n=this.centerOfMass(t),i=new l.a(t[0].x-n.x,t[0].y-n.y,t[0].z-n.z).normalize(),r=new l.a(0,0,0).crossVectors(i,e).normalize(),o=[],a=0;a<t.length;a++){var s=new l.a(t[a].x,t[a].y,t[a].z);s.direction=new l.a(t[a].x-n.x,t[a].y-n.y,t[a].z-n.z).normalize();var c=i.dot(s.direction),u=r.dot(s.direction);s.xy={x:c,y:u};var h=Math.atan2(u,c)*(180/Math.PI);s.angle=h,o.push(s)}o.sort(function(t,e){return t.angle-e.angle});for(var f=[o[0]],d=1;d<o.length;d++)Math.abs(o[d-1].angle-o[d].angle)>1e-4&&f.push(o[d]);return f},t.getRoI=function(e,n,i){e.geometry.computeBoundingBox();var a=(new r.a).setFromObject(e),s=a.min.clone().project(n),l=a.max.clone().project(n),c=n.controls.domElement.offsetWidth,u=n.controls.domElement.offsetHeight,h=new o.a,f=[];s.x=Math.round((s.x+1)*c/2),s.y=Math.round((1-s.y)*u/2),l.x=Math.round((l.x+1)*c/2),l.y=Math.round((1-l.y)*u/2);var d=[Math.min(s.x,l.x),Math.max(s.x,l.x)];s.x=d[0],l.x=d[1];var p=[Math.min(s.y,l.y),Math.max(s.y,l.y)];s.y=p[0],l.y=p[1];for(var m=[],g=null,y=s.x;y<=l.x;y++)for(var v=s.y;v<=l.y;v++)h.setFromCamera({x:y/c*2-1,y:-v/u*2+1},n),0!==(m=h.intersectObject(e)).length&&null!==(g=t.getPixelData(i,t.worldToData(i.lps2IJK,m[0].point)))&&1===i.numberOfChannels&&f.push(t.rescaleSlopeIntercept(g,i.rescaleSlope,i.rescaleIntercept));if(0===f.length)return null;var b=f.reduce(function(t,e){return t+e})/f.length;return{min:f.reduce(function(t,e){return t<e?t:e}),max:f.reduce(function(t,e){return t>e?t:e}),mean:b,sd:Math.sqrt(f.reduce(function(t,e){return t+Math.pow(e-b,2)},0)/f.length)}},t.getGeometryArea=function(t){if(t.faces.length<1)return 0;var e=0,n=t.vertices;return t.faces.forEach(function(t){e+=new a.a(n[t.a],n[t.b],n[t.c]).getArea()}),e},t.stringToNumber=function(t){var e=Number(t);if(e!=e){var n=(t.match(/\./g)||[]).length;if(1===(t.match(/\,/g)||[]).length&&n<2){var i=0===n?".":"",r=t.replace(/,/g,i);e=Number(r)}e!=e&&(console.error("String could not be converted to number ("+t+'). Setting value to "1.0".'),e=1)}return e},t}();e.a=u},function(t,e,n){"use strict";n.r(e),n.d(e,"ACESFilmicToneMapping",function(){return nt}),n.d(e,"AddEquation",function(){return M}),n.d(e,"AddOperation",function(){return q}),n.d(e,"AdditiveAnimationBlendMode",function(){return je}),n.d(e,"AdditiveBlending",function(){return w}),n.d(e,"AlphaFormat",function(){return Nt}),n.d(e,"AlwaysDepth",function(){return H}),n.d(e,"AlwaysStencilFunc",function(){return Sn}),n.d(e,"AmbientLight",function(){return hh}),n.d(e,"AmbientLightProbe",function(){return Lh}),n.d(e,"AnimationClip",function(){return vu}),n.d(e,"AnimationLoader",function(){return Eu}),n.d(e,"AnimationMixer",function(){return uf}),n.d(e,"AnimationObjectGroup",function(){return cf}),n.d(e,"AnimationUtils",function(){return ou}),n.d(e,"ArcCurve",function(){return Lu}),n.d(e,"ArrayCamera",function(){return ds}),n.d(e,"ArrowHelper",function(){return $f}),n.d(e,"Audio",function(){return Wh}),n.d(e,"AudioAnalyser",function(){return Qh}),n.d(e,"AudioContext",function(){return Bh}),n.d(e,"AudioListener",function(){return Vh}),n.d(e,"AudioLoader",function(){return Rh}),n.d(e,"AxesHelper",function(){return td}),n.d(e,"AxisHelper",function(){return qd}),n.d(e,"BackSide",function(){return m}),n.d(e,"BasicDepthPacking",function(){return on}),n.d(e,"BasicShadowMap",function(){return u}),n.d(e,"BinaryTextureLoader",function(){return np}),n.d(e,"Bone",function(){return Js}),n.d(e,"BooleanKeyframeTrack",function(){return hu}),n.d(e,"BoundingBoxHelper",function(){return Kd}),n.d(e,"Box2",function(){return _f}),n.d(e,"Box3",function(){return $n}),n.d(e,"Box3Helper",function(){return Xf}),n.d(e,"BoxBufferGeometry",function(){return co}),n.d(e,"BoxGeometry",function(){return Il}),n.d(e,"BoxHelper",function(){return Yf}),n.d(e,"BufferAttribute",function(){return Sr}),n.d(e,"BufferGeometry",function(){return Hr}),n.d(e,"BufferGeometryLoader",function(){return bh}),n.d(e,"ByteType",function(){return Mt}),n.d(e,"Cache",function(){return _u}),n.d(e,"Camera",function(){return yo}),n.d(e,"CameraHelper",function(){return Wf}),n.d(e,"CanvasRenderer",function(){return op}),n.d(e,"CanvasTexture",function(){return wl}),n.d(e,"CatmullRomCurve3",function(){return zu}),n.d(e,"CineonToneMapping",function(){return et}),n.d(e,"CircleBufferGeometry",function(){return kl}),n.d(e,"CircleGeometry",function(){return Cl}),n.d(e,"ClampToEdgeWrapping",function(){return ft}),n.d(e,"Clock",function(){return Fh}),n.d(e,"ClosedSplineCurve3",function(){return Xd}),n.d(e,"Color",function(){return yr}),n.d(e,"ColorKeyframeTrack",function(){return fu}),n.d(e,"CompressedTexture",function(){return _l}),n.d(e,"CompressedTextureLoader",function(){return Tu}),n.d(e,"ConeBufferGeometry",function(){return Ll}),n.d(e,"ConeGeometry",function(){return Pl}),n.d(e,"CubeCamera",function(){return wo}),n.d(e,"CubeGeometry",function(){return Il}),n.d(e,"CubeReflectionMapping",function(){return ot}),n.d(e,"CubeRefractionMapping",function(){return at}),n.d(e,"CubeTexture",function(){return Ao}),n.d(e,"CubeTextureLoader",function(){return ku}),n.d(e,"CubeUVReflectionMapping",function(){return ct}),n.d(e,"CubeUVRefractionMapping",function(){return ut}),n.d(e,"CubicBezierCurve",function(){return Wu}),n.d(e,"CubicBezierCurve3",function(){return Zu}),n.d(e,"CubicInterpolant",function(){return su}),n.d(e,"CullFaceBack",function(){return s}),n.d(e,"CullFaceFront",function(){return l}),n.d(e,"CullFaceFrontBack",function(){return c}),n.d(e,"CullFaceNone",function(){return a}),n.d(e,"Curve",function(){return Ru}),n.d(e,"CurvePath",function(){return Ku}),n.d(e,"CustomBlending",function(){return S}),n.d(e,"CustomToneMapping",function(){return it}),n.d(e,"CylinderBufferGeometry",function(){return Bl}),n.d(e,"CylinderGeometry",function(){return Rl}),n.d(e,"Cylindrical",function(){return vf}),n.d(e,"DataTexture",function(){return So}),n.d(e,"DataTexture2DArray",function(){return Oo}),n.d(e,"DataTexture3D",function(){return Fo}),n.d(e,"DataTextureLoader",function(){return Cu}),n.d(e,"DecrementStencilOp",function(){return dn}),n.d(e,"DecrementWrapStencilOp",function(){return mn}),n.d(e,"DefaultLoadingManager",function(){return Au}),n.d(e,"DepthFormat",function(){return Ht}),n.d(e,"DepthStencilFormat",function(){return Vt}),n.d(e,"DepthTexture",function(){return Al}),n.d(e,"DirectionalLight",function(){return uh}),n.d(e,"DirectionalLightHelper",function(){return Uf}),n.d(e,"DiscreteInterpolant",function(){return cu}),n.d(e,"DodecahedronBufferGeometry",function(){return Nl}),n.d(e,"DodecahedronGeometry",function(){return Ol}),n.d(e,"DoubleSide",function(){return g}),n.d(e,"DstAlphaFactor",function(){return N}),n.d(e,"DstColorFactor",function(){return F}),n.d(e,"DynamicBufferAttribute",function(){return Fd}),n.d(e,"DynamicCopyUsage",function(){return Rn}),n.d(e,"DynamicDrawUsage",function(){return En}),n.d(e,"DynamicReadUsage",function(){return kn}),n.d(e,"EdgesGeometry",function(){return Hl}),n.d(e,"EdgesHelper",function(){return $d}),n.d(e,"EllipseCurve",function(){return Pu}),n.d(e,"EqualDepth",function(){return Z}),n.d(e,"EqualStencilFunc",function(){return bn}),n.d(e,"EquirectangularReflectionMapping",function(){return st}),n.d(e,"EquirectangularRefractionMapping",function(){return lt}),n.d(e,"Euler",function(){return Ri}),n.d(e,"EventDispatcher",function(){return Nn}),n.d(e,"ExtrudeBufferGeometry",function(){return yc}),n.d(e,"ExtrudeGeometry",function(){return bc}),n.d(e,"Face3",function(){return vr}),n.d(e,"Face4",function(){return xd}),n.d(e,"FaceColors",function(){return Td}),n.d(e,"FileLoader",function(){return Mu}),n.d(e,"FlatShading",function(){return y}),n.d(e,"Float32Attribute",function(){return jd}),n.d(e,"Float32BufferAttribute",function(){return Rr}),n.d(e,"Float64Attribute",function(){return Yd}),n.d(e,"Float64BufferAttribute",function(){return Pr}),n.d(e,"FloatType",function(){return Ct}),n.d(e,"Fog",function(){return ws}),n.d(e,"FogExp2",function(){return _s}),n.d(e,"Font",function(){return Th}),n.d(e,"FontLoader",function(){return kh}),n.d(e,"FrontSide",function(){return p}),n.d(e,"Frustum",function(){return To}),n.d(e,"GLBufferAttribute",function(){return df}),n.d(e,"GLSL1",function(){return Ln}),n.d(e,"GLSL3",function(){return Dn}),n.d(e,"GammaEncoding",function(){return Ke}),n.d(e,"Geometry",function(){return Tl}),n.d(e,"GeometryUtils",function(){return rp}),n.d(e,"GreaterDepth",function(){return Y}),n.d(e,"GreaterEqualDepth",function(){return j}),n.d(e,"GreaterEqualStencilFunc",function(){return xn}),n.d(e,"GreaterStencilFunc",function(){return wn}),n.d(e,"GridHelper",function(){return Nf}),n.d(e,"Group",function(){return ps}),n.d(e,"HalfFloatType",function(){return Bt}),n.d(e,"HemisphereLight",function(){return nh}),n.d(e,"HemisphereLightHelper",function(){return Df}),n.d(e,"HemisphereLightProbe",function(){return Ph}),n.d(e,"IcosahedronBufferGeometry",function(){return _c}),n.d(e,"IcosahedronGeometry",function(){return wc}),n.d(e,"ImageBitmapLoader",function(){return Mh}),n.d(e,"ImageLoader",function(){return Iu}),n.d(e,"ImageUtils",function(){return Vn}),n.d(e,"ImmediateRenderObject",function(){return Sf}),n.d(e,"IncrementStencilOp",function(){return fn}),n.d(e,"IncrementWrapStencilOp",function(){return pn}),n.d(e,"InstancedBufferAttribute",function(){return vh}),n.d(e,"InstancedBufferGeometry",function(){return yh}),n.d(e,"InstancedInterleavedBuffer",function(){return ff}),n.d(e,"InstancedMesh",function(){return tl}),n.d(e,"Int16Attribute",function(){return Hd}),n.d(e,"Int16BufferAttribute",function(){return Ir}),n.d(e,"Int32Attribute",function(){return Wd}),n.d(e,"Int32BufferAttribute",function(){return Cr}),n.d(e,"Int8Attribute",function(){return Gd}),n.d(e,"Int8BufferAttribute",function(){return Mr}),n.d(e,"IntType",function(){return It}),n.d(e,"InterleavedBuffer",function(){return xs}),n.d(e,"InterleavedBufferAttribute",function(){return Ms}),n.d(e,"Interpolant",function(){return au}),n.d(e,"InterpolateDiscrete",function(){return Ge}),n.d(e,"InterpolateLinear",function(){return ze}),n.d(e,"InterpolateSmooth",function(){return Ue}),n.d(e,"InvertStencilOp",function(){return gn}),n.d(e,"JSONLoader",function(){return ap}),n.d(e,"KeepStencilOp",function(){return un}),n.d(e,"KeyframeTrack",function(){return uu}),n.d(e,"LOD",function(){return Ws}),n.d(e,"LatheBufferGeometry",function(){return Ac}),n.d(e,"LatheGeometry",function(){return xc}),n.d(e,"Layers",function(){return Di}),n.d(e,"LensFlare",function(){return lp}),n.d(e,"LessDepth",function(){return V}),n.d(e,"LessEqualDepth",function(){return W}),n.d(e,"LessEqualStencilFunc",function(){return _n}),n.d(e,"LessStencilFunc",function(){return vn}),n.d(e,"Light",function(){return eh}),n.d(e,"LightProbe",function(){return ph}),n.d(e,"Line",function(){return sl}),n.d(e,"Line3",function(){return xf}),n.d(e,"LineBasicMaterial",function(){return el}),n.d(e,"LineCurve",function(){return ju}),n.d(e,"LineCurve3",function(){return Yu}),n.d(e,"LineDashedMaterial",function(){return iu}),n.d(e,"LineLoop",function(){return hl}),n.d(e,"LinePieces",function(){return Md}),n.d(e,"LineSegments",function(){return ul}),n.d(e,"LineStrip",function(){return Sd}),n.d(e,"LinearEncoding",function(){return Qe}),n.d(e,"LinearFilter",function(){return bt}),n.d(e,"LinearInterpolant",function(){return lu}),n.d(e,"LinearMipMapLinearFilter",function(){return xt}),n.d(e,"LinearMipMapNearestFilter",function(){return wt}),n.d(e,"LinearMipmapLinearFilter",function(){return At}),n.d(e,"LinearMipmapNearestFilter",function(){return _t}),n.d(e,"LinearToneMapping",function(){return $}),n.d(e,"Loader",function(){return xu}),n.d(e,"LoaderUtils",function(){return gh}),n.d(e,"LoadingManager",function(){return wu}),n.d(e,"LogLuvEncoding",function(){return tn}),n.d(e,"LoopOnce",function(){return Ne}),n.d(e,"LoopPingPong",function(){return Fe}),n.d(e,"LoopRepeat",function(){return Oe}),n.d(e,"LuminanceAlphaFormat",function(){return zt}),n.d(e,"LuminanceFormat",function(){return Gt}),n.d(e,"MOUSE",function(){return r}),n.d(e,"Material",function(){return _r}),n.d(e,"MaterialLoader",function(){return mh}),n.d(e,"Math",function(){return Gn}),n.d(e,"MathUtils",function(){return Gn}),n.d(e,"Matrix3",function(){return Un}),n.d(e,"Matrix4",function(){return Si}),n.d(e,"MaxEquation",function(){return k}),n.d(e,"Mesh",function(){return ao}),n.d(e,"MeshBasicMaterial",function(){return wr}),n.d(e,"MeshDepthMaterial",function(){return as}),n.d(e,"MeshDistanceMaterial",function(){return ss}),n.d(e,"MeshFaceMaterial",function(){return kd}),n.d(e,"MeshLambertMaterial",function(){return eu}),n.d(e,"MeshMatcapMaterial",function(){return nu}),n.d(e,"MeshNormalMaterial",function(){return tu}),n.d(e,"MeshPhongMaterial",function(){return Kc}),n.d(e,"MeshPhysicalMaterial",function(){return qc}),n.d(e,"MeshStandardMaterial",function(){return Qc}),n.d(e,"MeshToonMaterial",function(){return $c}),n.d(e,"MinEquation",function(){return I}),n.d(e,"MirroredRepeatWrapping",function(){return dt}),n.d(e,"MixOperation",function(){return Q}),n.d(e,"MultiMaterial",function(){return Cd}),n.d(e,"MultiplyBlending",function(){return x}),n.d(e,"MultiplyOperation",function(){return J}),n.d(e,"NearestFilter",function(){return pt}),n.d(e,"NearestMipMapLinearFilter",function(){return vt}),n.d(e,"NearestMipMapNearestFilter",function(){return gt}),n.d(e,"NearestMipmapLinearFilter",function(){return yt}),n.d(e,"NearestMipmapNearestFilter",function(){return mt}),n.d(e,"NeverDepth",function(){return U}),n.d(e,"NeverStencilFunc",function(){return yn}),n.d(e,"NoBlending",function(){return b}),n.d(e,"NoColors",function(){return Ed}),n.d(e,"NoToneMapping",function(){return K}),n.d(e,"NormalAnimationBlendMode",function(){return Ze}),n.d(e,"NormalBlending",function(){return _}),n.d(e,"NotEqualDepth",function(){return X}),n.d(e,"NotEqualStencilFunc",function(){return An}),n.d(e,"NumberKeyframeTrack",function(){return du}),n.d(e,"Object3D",function(){return Ji}),n.d(e,"ObjectLoader",function(){return wh}),n.d(e,"ObjectSpaceNormalMap",function(){return ln}),n.d(e,"OctahedronBufferGeometry",function(){return Sc}),n.d(e,"OctahedronGeometry",function(){return Mc}),n.d(e,"OneFactor",function(){return B}),n.d(e,"OneMinusDstAlphaFactor",function(){return O}),n.d(e,"OneMinusDstColorFactor",function(){return G}),n.d(e,"OneMinusSrcAlphaFactor",function(){return D}),n.d(e,"OneMinusSrcColorFactor",function(){return P}),n.d(e,"OrthographicCamera",function(){return lh}),n.d(e,"PCFShadowMap",function(){return h}),n.d(e,"PCFSoftShadowMap",function(){return f}),n.d(e,"PMREMGenerator",function(){return gd}),n.d(e,"ParametricBufferGeometry",function(){return Ec}),n.d(e,"ParametricGeometry",function(){return Tc}),n.d(e,"Particle",function(){return Rd}),n.d(e,"ParticleBasicMaterial",function(){return Dd}),n.d(e,"ParticleSystem",function(){return Pd}),n.d(e,"ParticleSystemMaterial",function(){return Nd}),n.d(e,"Path",function(){return $u}),n.d(e,"PerspectiveCamera",function(){return vo}),n.d(e,"Plane",function(){return $i}),n.d(e,"PlaneBufferGeometry",function(){return Co}),n.d(e,"PlaneGeometry",function(){return Ic}),n.d(e,"PlaneHelper",function(){return Jf}),n.d(e,"PointCloud",function(){return Bd}),n.d(e,"PointCloudMaterial",function(){return Ld}),n.d(e,"PointLight",function(){return sh}),n.d(e,"PointLightHelper",function(){return Bf}),n.d(e,"Points",function(){return yl}),n.d(e,"PointsMaterial",function(){return fl}),n.d(e,"PolarGridHelper",function(){return Of}),n.d(e,"PolyhedronBufferGeometry",function(){return Dl}),n.d(e,"PolyhedronGeometry",function(){return kc}),n.d(e,"PositionalAudio",function(){return Jh}),n.d(e,"PropertyBinding",function(){return lf}),n.d(e,"PropertyMixer",function(){return qh}),n.d(e,"QuadraticBezierCurve",function(){return Xu}),n.d(e,"QuadraticBezierCurve3",function(){return Ju}),n.d(e,"Quaternion",function(){return Jn}),n.d(e,"QuaternionKeyframeTrack",function(){return mu}),n.d(e,"QuaternionLinearInterpolant",function(){return pu}),n.d(e,"REVISION",function(){return i}),n.d(e,"RGBADepthPacking",function(){return an}),n.d(e,"RGBAFormat",function(){return Ft}),n.d(e,"RGBAIntegerFormat",function(){return Jt}),n.d(e,"RGBA_ASTC_10x10_Format",function(){return ve}),n.d(e,"RGBA_ASTC_10x5_Format",function(){return me}),n.d(e,"RGBA_ASTC_10x6_Format",function(){return ge}),n.d(e,"RGBA_ASTC_10x8_Format",function(){return ye}),n.d(e,"RGBA_ASTC_12x10_Format",function(){return be}),n.d(e,"RGBA_ASTC_12x12_Format",function(){return _e}),n.d(e,"RGBA_ASTC_4x4_Format",function(){return se}),n.d(e,"RGBA_ASTC_5x4_Format",function(){return le}),n.d(e,"RGBA_ASTC_5x5_Format",function(){return ce}),n.d(e,"RGBA_ASTC_6x5_Format",function(){return ue}),n.d(e,"RGBA_ASTC_6x6_Format",function(){return he}),n.d(e,"RGBA_ASTC_8x5_Format",function(){return fe}),n.d(e,"RGBA_ASTC_8x6_Format",function(){return de}),n.d(e,"RGBA_ASTC_8x8_Format",function(){return pe}),n.d(e,"RGBA_BPTC_Format",function(){return we}),n.d(e,"RGBA_ETC2_EAC_Format",function(){return ae}),n.d(e,"RGBA_PVRTC_2BPPV1_Format",function(){return ie}),n.d(e,"RGBA_PVRTC_4BPPV1_Format",function(){return ne}),n.d(e,"RGBA_S3TC_DXT1_Format",function(){return qt}),n.d(e,"RGBA_S3TC_DXT3_Format",function(){return Kt}),n.d(e,"RGBA_S3TC_DXT5_Format",function(){return $t}),n.d(e,"RGBDEncoding",function(){return rn}),n.d(e,"RGBEEncoding",function(){return $e}),n.d(e,"RGBEFormat",function(){return Ut}),n.d(e,"RGBFormat",function(){return Ot}),n.d(e,"RGBIntegerFormat",function(){return Xt}),n.d(e,"RGBM16Encoding",function(){return nn}),n.d(e,"RGBM7Encoding",function(){return en}),n.d(e,"RGB_ETC1_Format",function(){return re}),n.d(e,"RGB_ETC2_Format",function(){return oe}),n.d(e,"RGB_PVRTC_2BPPV1_Format",function(){return ee}),n.d(e,"RGB_PVRTC_4BPPV1_Format",function(){return te}),n.d(e,"RGB_S3TC_DXT1_Format",function(){return Qt}),n.d(e,"RGFormat",function(){return jt}),n.d(e,"RGIntegerFormat",function(){return Yt}),n.d(e,"RawShaderMaterial",function(){return Jc}),n.d(e,"Ray",function(){return xi}),n.d(e,"Raycaster",function(){return pf}),n.d(e,"RectAreaLight",function(){return fh}),n.d(e,"RedFormat",function(){return Wt}),n.d(e,"RedIntegerFormat",function(){return Zt}),n.d(e,"ReinhardToneMapping",function(){return tt}),n.d(e,"RepeatWrapping",function(){return ht}),n.d(e,"ReplaceStencilOp",function(){return hn}),n.d(e,"ReverseSubtractEquation",function(){return T}),n.d(e,"RingBufferGeometry",function(){return Cc}),n.d(e,"RingGeometry",function(){return Bc}),n.d(e,"SRGB8_ALPHA8_ASTC_10x10_Format",function(){return Pe}),n.d(e,"SRGB8_ALPHA8_ASTC_10x5_Format",function(){return Ce}),n.d(e,"SRGB8_ALPHA8_ASTC_10x6_Format",function(){return Be}),n.d(e,"SRGB8_ALPHA8_ASTC_10x8_Format",function(){return Re}),n.d(e,"SRGB8_ALPHA8_ASTC_12x10_Format",function(){return Le}),n.d(e,"SRGB8_ALPHA8_ASTC_12x12_Format",function(){return De}),n.d(e,"SRGB8_ALPHA8_ASTC_4x4_Format",function(){return Ae}),n.d(e,"SRGB8_ALPHA8_ASTC_5x4_Format",function(){return xe}),n.d(e,"SRGB8_ALPHA8_ASTC_5x5_Format",function(){return Se}),n.d(e,"SRGB8_ALPHA8_ASTC_6x5_Format",function(){return Me}),n.d(e,"SRGB8_ALPHA8_ASTC_6x6_Format",function(){return Ee}),n.d(e,"SRGB8_ALPHA8_ASTC_8x5_Format",function(){return Te}),n.d(e,"SRGB8_ALPHA8_ASTC_8x6_Format",function(){return Ie}),n.d(e,"SRGB8_ALPHA8_ASTC_8x8_Format",function(){return ke}),n.d(e,"Scene",function(){return As}),n.d(e,"SceneUtils",function(){return sp}),n.d(e,"ShaderChunk",function(){return Bo}),n.d(e,"ShaderLib",function(){return Po}),n.d(e,"ShaderMaterial",function(){return go}),n.d(e,"ShadowMaterial",function(){return Xc}),n.d(e,"Shape",function(){return th}),n.d(e,"ShapeBufferGeometry",function(){return Rc}),n.d(e,"ShapeGeometry",function(){return Pc}),n.d(e,"ShapePath",function(){return Eh}),n.d(e,"ShapeUtils",function(){return pc}),n.d(e,"ShortType",function(){return Et}),n.d(e,"Skeleton",function(){return Xs}),n.d(e,"SkeletonHelper",function(){return Cf}),n.d(e,"SkinnedMesh",function(){return Zs}),n.d(e,"SmoothShading",function(){return v}),n.d(e,"Sphere",function(){return mi}),n.d(e,"SphereBufferGeometry",function(){return Lc}),n.d(e,"SphereGeometry",function(){return Dc}),n.d(e,"Spherical",function(){return yf}),n.d(e,"SphericalHarmonics3",function(){return dh}),n.d(e,"Spline",function(){return Qd}),n.d(e,"SplineCurve",function(){return Qu}),n.d(e,"SplineCurve3",function(){return Jd}),n.d(e,"SpotLight",function(){return oh}),n.d(e,"SpotLightHelper",function(){return Ef}),n.d(e,"Sprite",function(){return zs}),n.d(e,"SpriteMaterial",function(){return Es}),n.d(e,"SrcAlphaFactor",function(){return L}),n.d(e,"SrcAlphaSaturateFactor",function(){return z}),n.d(e,"SrcColorFactor",function(){return R}),n.d(e,"StaticCopyUsage",function(){return Bn}),n.d(e,"StaticDrawUsage",function(){return Mn}),n.d(e,"StaticReadUsage",function(){return In}),n.d(e,"StereoCamera",function(){return Oh}),n.d(e,"StreamCopyUsage",function(){return Pn}),n.d(e,"StreamDrawUsage",function(){return Tn}),n.d(e,"StreamReadUsage",function(){return Cn}),n.d(e,"StringKeyframeTrack",function(){return gu}),n.d(e,"SubtractEquation",function(){return E}),n.d(e,"SubtractiveBlending",function(){return A}),n.d(e,"TOUCH",function(){return o}),n.d(e,"TangentSpaceNormalMap",function(){return sn}),n.d(e,"TetrahedronBufferGeometry",function(){return Nc}),n.d(e,"TetrahedronGeometry",function(){return Oc}),n.d(e,"TextBufferGeometry",function(){return Fc}),n.d(e,"TextGeometry",function(){return Gc}),n.d(e,"Texture",function(){return Zn}),n.d(e,"TextureLoader",function(){return Bu}),n.d(e,"TorusBufferGeometry",function(){return zc}),n.d(e,"TorusGeometry",function(){return Uc}),n.d(e,"TorusKnotBufferGeometry",function(){return Hc}),n.d(e,"TorusKnotGeometry",function(){return Vc}),n.d(e,"Triangle",function(){return ur}),n.d(e,"TriangleFanDrawMode",function(){return Je}),n.d(e,"TriangleStripDrawMode",function(){return Xe}),n.d(e,"TrianglesDrawMode",function(){return Ye}),n.d(e,"TubeBufferGeometry",function(){return Wc}),n.d(e,"TubeGeometry",function(){return Zc}),n.d(e,"UVMapping",function(){return rt}),n.d(e,"Uint16Attribute",function(){return Vd}),n.d(e,"Uint16BufferAttribute",function(){return kr}),n.d(e,"Uint32Attribute",function(){return Zd}),n.d(e,"Uint32BufferAttribute",function(){return Br}),n.d(e,"Uint8Attribute",function(){return zd}),n.d(e,"Uint8BufferAttribute",function(){return Er}),n.d(e,"Uint8ClampedAttribute",function(){return Ud}),n.d(e,"Uint8ClampedBufferAttribute",function(){return Tr}),n.d(e,"Uniform",function(){return hf}),n.d(e,"UniformsLib",function(){return Ro}),n.d(e,"UniformsUtils",function(){return fo}),n.d(e,"UnsignedByteType",function(){return St}),n.d(e,"UnsignedInt248Type",function(){return Dt}),n.d(e,"UnsignedIntType",function(){return kt}),n.d(e,"UnsignedShort4444Type",function(){return Rt}),n.d(e,"UnsignedShort5551Type",function(){return Pt}),n.d(e,"UnsignedShort565Type",function(){return Lt}),n.d(e,"UnsignedShortType",function(){return Tt}),n.d(e,"VSMShadowMap",function(){return d}),n.d(e,"Vector2",function(){return zn}),n.d(e,"Vector3",function(){return Qn}),n.d(e,"Vector4",function(){return jn}),n.d(e,"VectorKeyframeTrack",function(){return yu}),n.d(e,"Vertex",function(){return Od}),n.d(e,"VertexColors",function(){return Id}),n.d(e,"VideoTexture",function(){return bl}),n.d(e,"WebGL1Renderer",function(){return bs}),n.d(e,"WebGLCubeRenderTarget",function(){return xo}),n.d(e,"WebGLMultisampleRenderTarget",function(){return Xn}),n.d(e,"WebGLRenderTarget",function(){return Yn}),n.d(e,"WebGLRenderTargetCube",function(){return ip}),n.d(e,"WebGLRenderer",function(){return vs}),n.d(e,"WebGLUtils",function(){return fs}),n.d(e,"WireframeGeometry",function(){return jc}),n.d(e,"WireframeHelper",function(){return tp}),n.d(e,"WrapAroundEnding",function(){return We}),n.d(e,"XHRLoader",function(){return ep}),n.d(e,"ZeroCurvatureEnding",function(){return He}),n.d(e,"ZeroFactor",function(){return C}),n.d(e,"ZeroSlopeEnding",function(){return Ve}),n.d(e,"ZeroStencilOp",function(){return cn}),n.d(e,"sRGBEncoding",function(){return qe});const i="122",r={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,l=2,c=3,u=0,h=1,f=2,d=3,p=0,m=1,g=2,y=1,v=2,b=0,_=1,w=2,A=3,x=4,S=5,M=100,E=101,T=102,I=103,k=104,C=200,B=201,R=202,P=203,L=204,D=205,N=206,O=207,F=208,G=209,z=210,U=0,H=1,V=2,W=3,Z=4,j=5,Y=6,X=7,J=0,Q=1,q=2,K=0,$=1,tt=2,et=3,nt=4,it=5,rt=300,ot=301,at=302,st=303,lt=304,ct=306,ut=307,ht=1e3,ft=1001,dt=1002,pt=1003,mt=1004,gt=1004,yt=1005,vt=1005,bt=1006,_t=1007,wt=1007,At=1008,xt=1008,St=1009,Mt=1010,Et=1011,Tt=1012,It=1013,kt=1014,Ct=1015,Bt=1016,Rt=1017,Pt=1018,Lt=1019,Dt=1020,Nt=1021,Ot=1022,Ft=1023,Gt=1024,zt=1025,Ut=Ft,Ht=1026,Vt=1027,Wt=1028,Zt=1029,jt=1030,Yt=1031,Xt=1032,Jt=1033,Qt=33776,qt=33777,Kt=33778,$t=33779,te=35840,ee=35841,ne=35842,ie=35843,re=36196,oe=37492,ae=37496,se=37808,le=37809,ce=37810,ue=37811,he=37812,fe=37813,de=37814,pe=37815,me=37816,ge=37817,ye=37818,ve=37819,be=37820,_e=37821,we=36492,Ae=37840,xe=37841,Se=37842,Me=37843,Ee=37844,Te=37845,Ie=37846,ke=37847,Ce=37848,Be=37849,Re=37850,Pe=37851,Le=37852,De=37853,Ne=2200,Oe=2201,Fe=2202,Ge=2300,ze=2301,Ue=2302,He=2400,Ve=2401,We=2402,Ze=2500,je=2501,Ye=0,Xe=1,Je=2,Qe=3e3,qe=3001,Ke=3007,$e=3002,tn=3003,en=3004,nn=3005,rn=3006,on=3200,an=3201,sn=0,ln=1,cn=0,un=7680,hn=7681,fn=7682,dn=7683,pn=34055,mn=34056,gn=5386,yn=512,vn=513,bn=514,_n=515,wn=516,An=517,xn=518,Sn=519,Mn=35044,En=35048,Tn=35040,In=35045,kn=35049,Cn=35041,Bn=35046,Rn=35050,Pn=35042,Ln="100",Dn="300 es";function Nn(){}Object.assign(Nn.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t)}}});const On=[];for(let t=0;t<256;t++)On[t]=(t<16?"0":"")+t.toString(16);let Fn=1234567;const Gn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(On[255&t]+On[t>>8&255]+On[t>>16&255]+On[t>>24&255]+"-"+On[255&e]+On[e>>8&255]+"-"+On[e>>16&15|64]+On[e>>24&255]+"-"+On[63&n|128]+On[n>>8&255]+"-"+On[n>>16&255]+On[n>>24&255]+On[255&i]+On[i>>8&255]+On[i>>16&255]+On[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(Fn=t%2147483647),((Fn=16807*Fn%2147483647)-1)/2147483646},degToRad:function(t){return t*Gn.DEG2RAD},radToDeg:function(t){return t*Gn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+i)/2),u=a((e+i)/2),h=o((e-i)/2),f=a((e-i)/2),d=o((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":t.set(s*u,l*h,l*f,s*c);break;case"YZY":t.set(l*f,s*u,l*h,s*c);break;case"ZXZ":t.set(l*h,l*f,s*u,s*c);break;case"XZX":t.set(s*u,l*p,l*d,s*c);break;case"YXY":t.set(l*d,s*u,l*p,s*c);break;case"ZYZ":t.set(l*p,l*d,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class zn{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class Un{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,o,a,s,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],f=n[5],d=n[8],p=i[0],m=i[3],g=i[6],y=i[1],v=i[4],b=i[7],_=i[2],w=i[5],A=i[8];return r[0]=o*p+a*y+s*_,r[3]=o*m+a*v+s*w,r[6]=o*g+a*b+s*A,r[1]=l*p+c*y+u*_,r[4]=l*m+c*v+u*w,r[7]=l*g+c*b+u*A,r[2]=h*p+f*y+d*_,r[5]=h*m+f*v+d*w,r[8]=h*g+f*b+d*A,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-n*r*c+n*a*s+i*r*l-i*o*s}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const n=t.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],h=n[7],f=n[8],d=f*l-c*h,p=c*u-f*s,m=h*s-l*u,g=r*d+o*p+a*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return i[0]=d*y,i[1]=(a*h-f*o)*y,i[2]=(c*o-a*l)*y,i[3]=p*y,i[4]=(f*r-a*u)*y,i[5]=(a*s-c*r)*y,i[6]=m*y,i[7]=(o*u-h*r)*y,i[8]=(l*r-o*s)*y,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,o,a){const s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-i*l,i*s,-i*(-l*o+s*a)+a+e,0,0,1)}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*o+n*l,i[6]=e*a+n*c,i[1]=-n*r+e*s,i[4]=-n*o+e*l,i[7]=-n*a+e*c,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}let Hn;const Vn={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Hn&&(Hn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Hn.width=t.width,Hn.height=t.height;const n=Hn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Hn}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let Wn=0;function Zn(t,e,n,i,r,o,a,s,l,c){Object.defineProperty(this,"id",{value:Wn++}),this.uuid=Gn.generateUUID(),this.name="",this.image=void 0!==t?t:Zn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:Zn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ft,this.wrapT=void 0!==i?i:ft,this.magFilter=void 0!==r?r:bt,this.minFilter=void 0!==o?o:At,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:Ft,this.internalFormat=null,this.type=void 0!==s?s:St,this.offset=new zn(0,0),this.repeat=new zn(1,1),this.center=new zn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Un,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:Qe,this.version=0,this.onUpdate=null}Zn.DEFAULT_IMAGE=void 0,Zn.DEFAULT_MAPPING=rt,Zn.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Zn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=Gn.generateUUID()),!e&&void 0===t.images[i.uuid]){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)e.push(Vn.getDataURL(i[t]))}else e=Vn.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:e}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==rt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ht:t.x=t.x-Math.floor(t.x);break;case ft:t.x=t.x<0?0:1;break;case dt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ht:t.y=t.y-Math.floor(t.y);break;case ft:t.y=t.y<0?0:1;break;case dt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Zn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});class jn{constructor(t=0,e=0,n=0,i=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const o=t.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+u+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(a+1)/2,o=(u+1)/2,m=(p+1)/2,g=(s+c)/4,y=(l+f)/4,v=(h+d)/4;return t>o&&t>m?t<.01?(n=0,i=.707106781,r=.707106781):(i=g/(n=Math.sqrt(t)),r=y/n):o>m?o<.01?(n=.707106781,i=0,r=.707106781):(n=g/(i=Math.sqrt(o)),r=v/i):m<.01?(n=.707106781,i=.707106781,r=0):(n=y/(r=Math.sqrt(m)),i=v/r),this.set(n,i,r,e),this}let m=Math.sqrt((d-h)*(d-h)+(l-f)*(l-f)+(c-s)*(c-s));return Math.abs(m)<.001&&(m=1),this.x=(d-h)/m,this.y=(l-f)/m,this.z=(c-s)/m,this.w=Math.acos((a+u+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function Yn(t,e,n){this.width=t,this.height=e,this.scissor=new jn(0,0,t,e),this.scissorTest=!1,this.viewport=new jn(0,0,t,e),n=n||{},this.texture=new Zn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:bt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Xn(t,e,n){Yn.call(this,t,e,n),this.samples=4}Yn.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Yn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Xn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Xn,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.samples=t.samples,this}});class Jn{constructor(t=0,e=0,n=0,i=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return n.copy(t).slerp(e,i)}static slerpFlat(t,e,n,i,r,o,a){let s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[o+0],f=r[o+1],d=r[o+2],p=r[o+3];if(u!==p||s!==h||l!==f||c!==d){let t=1-a;const e=s*h+l*f+c*d+u*p,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,e*n);t=Math.sin(t*o)/r,a=Math.sin(a*o)/r}const r=a*n;if(s=s*t+h*r,l=l*t+f*r,c=c*t+d*r,u=u*t+p*r,t===1-a){const t=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=t,l*=t,c*=t,u*=t}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,r,o){const a=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[o],h=r[o+1],f=r[o+2],d=r[o+3];return t[e]=a*d+c*u+s*f-l*h,t[e+1]=s*d+c*h+l*u-a*f,t[e+2]=l*d+c*f+a*h-s*u,t[e+3]=c*d-a*u-s*h-l*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=s(n/2),f=s(i/2),d=s(r/2);switch(o){case"XYZ":this._x=h*c*u+l*f*d,this._y=l*f*u-h*c*d,this._z=l*c*d+h*f*u,this._w=l*c*u-h*f*d;break;case"YXZ":this._x=h*c*u+l*f*d,this._y=l*f*u-h*c*d,this._z=l*c*d-h*f*u,this._w=l*c*u+h*f*d;break;case"ZXY":this._x=h*c*u-l*f*d,this._y=l*f*u+h*c*d,this._z=l*c*d+h*f*u,this._w=l*c*u-h*f*d;break;case"ZYX":this._x=h*c*u-l*f*d,this._y=l*f*u+h*c*d,this._z=l*c*d-h*f*u,this._w=l*c*u+h*f*d;break;case"YZX":this._x=h*c*u+l*f*d,this._y=l*f*u+h*c*d,this._z=l*c*d-h*f*u,this._w=l*c*u-h*f*d;break;case"XZY":this._x=h*c*u-l*f*d,this._y=l*f*u-h*c*d,this._z=l*c*d+h*f*u,this._w=l*c*u+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],o=e[1],a=e[5],s=e[9],l=e[2],c=e[6],u=e[10],h=n+a+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-s)*t,this._y=(r-l)*t,this._z=(o-i)*t}else if(n>a&&n>u){const t=2*Math.sqrt(1+n-a-u);this._w=(c-s)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(r+l)/t}else if(a>u){const t=2*Math.sqrt(1+a-n-u);this._w=(r-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(s+c)/t}else{const t=2*Math.sqrt(1+u-n-a);this._w=(o-i)/t,this._x=(r+l)/t,this._y=(s+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Gn.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,o=this._w;let a=o*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class Qn{constructor(t=0,e=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Kn.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Kn.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*i-a*n,c=s*n+a*e-r*i,u=s*i+r*n-o*e,h=-r*e-o*n-a*i;return this.x=l*s+h*-r+c*-a-u*-o,this.y=c*s+h*-o+u*-r-l*-a,this.z=u*s+h*-a+l*-o-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return qn.copy(this).projectOnVector(t),this.sub(qn)}reflect(t){return this.sub(qn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Gn.clamp(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const qn=new Qn,Kn=new Jn;class $n{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new Qn(1/0,1/0,1/0),this.max=void 0!==e?e:new Qn(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.length;s<l;s+=3){const l=t[s],c=t[s+1],u=t[s+2];l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.count;s<l;s++){const l=t.getX(s),c=t.getY(s),u=t.getZ(s);l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=ni.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Qn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Qn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),ii.copy(e.boundingBox),ii.applyMatrix4(t.matrixWorld),this.union(ii));const n=t.children;for(let t=0,e=n.length;t<e;t++)this.expandByObject(n[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Qn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,ni),ni.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ui),hi.subVectors(this.max,ui),ri.subVectors(t.a,ui),oi.subVectors(t.b,ui),ai.subVectors(t.c,ui),si.subVectors(oi,ri),li.subVectors(ai,oi),ci.subVectors(ri,ai);let e=[0,-si.z,si.y,0,-li.z,li.y,0,-ci.z,ci.y,si.z,0,-si.x,li.z,0,-li.x,ci.z,0,-ci.x,-si.y,si.x,0,-li.y,li.x,0,-ci.y,ci.x,0];return!!ti(e,ri,oi,ai,hi)&&(!!ti(e=[1,0,0,0,1,0,0,0,1],ri,oi,ai,hi)&&(fi.crossVectors(si,li),ti(e=[fi.x,fi.y,fi.z],ri,oi,ai,hi)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Qn),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return ni.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(ni).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(ei[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ei[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ei[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ei[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ei[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ei[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ei[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ei[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ei),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function ti(t,e,n,i,r){for(let o=0,a=t.length-3;o<=a;o+=3){di.fromArray(t,o);const a=r.x*Math.abs(di.x)+r.y*Math.abs(di.y)+r.z*Math.abs(di.z),s=e.dot(di),l=n.dot(di),c=i.dot(di);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const ei=[new Qn,new Qn,new Qn,new Qn,new Qn,new Qn,new Qn,new Qn],ni=new Qn,ii=new $n,ri=new Qn,oi=new Qn,ai=new Qn,si=new Qn,li=new Qn,ci=new Qn,ui=new Qn,hi=new Qn,fi=new Qn,di=new Qn,pi=new $n;class mi{constructor(t,e){this.center=void 0!==t?t:new Qn,this.radius=void 0!==e?e:-1}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):pi.setFromPoints(t).getCenter(n);let i=0;for(let e=0,r=t.length;e<r;e++)i=Math.max(i,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Qn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new $n),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const gi=new Qn,yi=new Qn,vi=new Qn,bi=new Qn,_i=new Qn,wi=new Qn,Ai=new Qn;class xi{constructor(t,e){this.origin=void 0!==t?t:new Qn,this.direction=void 0!==e?e:new Qn(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Qn),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,gi)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Qn),e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=gi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(gi.copy(this.direction).multiplyScalar(e).add(this.origin),gi.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){yi.copy(t).add(e).multiplyScalar(.5),vi.copy(e).sub(t).normalize(),bi.copy(this.origin).sub(yi);const r=.5*t.distanceTo(e),o=-this.direction.dot(vi),a=bi.dot(this.direction),s=-bi.dot(vi),l=bi.lengthSq(),c=Math.abs(1-o*o);let u,h,f,d;if(c>0)if(h=o*a-s,d=r*c,(u=o*s-a)>=0)if(h>=-d)if(h<=d){const t=1/c;f=(u*=t)*(u+o*(h*=t)+2*a)+h*(o*u+h+2*s)+l}else h=r,f=-(u=Math.max(0,-(o*h+a)))*u+h*(h+2*s)+l;else h=-r,f=-(u=Math.max(0,-(o*h+a)))*u+h*(h+2*s)+l;else h<=-d?f=-(u=Math.max(0,-(-o*r+a)))*u+(h=u>0?-r:Math.min(Math.max(-r,-s),r))*(h+2*s)+l:h<=d?(u=0,f=(h=Math.min(Math.max(-r,-s),r))*(h+2*s)+l):f=-(u=Math.max(0,-(o*r+a)))*u+(h=u>0?r:Math.min(Math.max(-r,-s),r))*(h+2*s)+l;else h=o>0?-r:r,f=-(u=Math.max(0,-(o*h+a)))*u+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(vi).multiplyScalar(h).add(yi),f}intersectSphere(t,e){gi.subVectors(t.center,this.origin);const n=gi.dot(this.direction),i=gi.dot(gi)-n*n,r=t.radius*t.radius;if(i>r)return null;const o=Math.sqrt(r-i),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,gi)}intersectTriangle(t,e,n,i,r){_i.subVectors(e,t),wi.subVectors(n,t),Ai.crossVectors(_i,wi);let o,a=this.direction.dot(Ai);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}bi.subVectors(this.origin,t);const s=o*this.direction.dot(wi.crossVectors(bi,wi));if(s<0)return null;const l=o*this.direction.dot(_i.cross(bi));if(l<0)return null;if(s+l>a)return null;const c=-o*bi.dot(Ai);return c<0?null:this.at(c/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class Si{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,o,a,s,l,c,u,h,f,d,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Si).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/Mi.setFromMatrixColumn(t,0).length(),r=1/Mi.setFromMatrixColumn(t,1).length(),o=1/Mi.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const t=o*c,n=o*u,i=a*c,r=a*u;e[0]=s*c,e[4]=-s*u,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-a*s,e[2]=r-t*l,e[6]=i+n*l,e[10]=o*s}else if("YXZ"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t+r*a,e[4]=i*a-n,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-a,e[2]=n*a-i,e[6]=r+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t-r*a,e[4]=-o*u,e[8]=i+n*a,e[1]=n+i*a,e[5]=o*c,e[9]=r-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*c,n=o*u,i=a*c,r=a*u;e[0]=s*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=s*u,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*l,i=a*s,r=a*l;e[0]=s*c,e[4]=r-t*u,e[8]=i*u+n,e[1]=u,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=n*u+i,e[10]=t-r*u}else if("XZY"===t.order){const t=o*s,n=o*l,i=a*s,r=a*l;e[0]=s*c,e[4]=-u,e[8]=l*c,e[1]=t*u+r,e[5]=o*c,e[9]=n*u-i,e[2]=i*u-n,e[6]=a*c,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Ti,t,Ii)}lookAt(t,e,n){const i=this.elements;return Bi.subVectors(t,e),0===Bi.lengthSq()&&(Bi.z=1),Bi.normalize(),ki.crossVectors(n,Bi),0===ki.lengthSq()&&(1===Math.abs(n.z)?Bi.x+=1e-4:Bi.z+=1e-4,Bi.normalize(),ki.crossVectors(n,Bi)),ki.normalize(),Ci.crossVectors(Bi,ki),i[0]=ki.x,i[4]=Ci.x,i[8]=Bi.x,i[1]=ki.y,i[5]=Ci.y,i[9]=Bi.y,i[2]=ki.z,i[6]=Ci.z,i[10]=Bi.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],_=n[15],w=i[0],A=i[4],x=i[8],S=i[12],M=i[1],E=i[5],T=i[9],I=i[13],k=i[2],C=i[6],B=i[10],R=i[14],P=i[3],L=i[7],D=i[11],N=i[15];return r[0]=o*w+a*M+s*k+l*P,r[4]=o*A+a*E+s*C+l*L,r[8]=o*x+a*T+s*B+l*D,r[12]=o*S+a*I+s*R+l*N,r[1]=c*w+u*M+h*k+f*P,r[5]=c*A+u*E+h*C+f*L,r[9]=c*x+u*T+h*B+f*D,r[13]=c*S+u*I+h*R+f*N,r[2]=d*w+p*M+m*k+g*P,r[6]=d*A+p*E+m*C+g*L,r[10]=d*x+p*T+m*B+g*D,r[14]=d*S+p*I+m*R+g*N,r[3]=y*w+v*M+b*k+_*P,r[7]=y*A+v*E+b*C+_*L,r[11]=y*x+v*T+b*B+_*D,r[15]=y*S+v*I+b*R+_*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],u=t[6],h=t[10],f=t[14];return t[3]*(+r*s*u-i*l*u-r*a*h+n*l*h+i*a*f-n*s*f)+t[7]*(+e*s*f-e*l*h+r*o*h-i*o*f+i*l*c-r*s*c)+t[11]*(+e*l*u-e*a*f-r*o*u+n*o*f+r*a*c-n*l*c)+t[15]*(-i*a*c-e*s*u+e*a*h+i*o*u-n*o*h+n*s*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const n=this.elements,i=t.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],f=i[8],d=i[9],p=i[10],m=i[11],g=i[12],y=i[13],v=i[14],b=i[15],_=d*v*h-y*p*h+y*u*m-c*v*m-d*u*b+c*p*b,w=g*p*h-f*v*h-g*u*m+l*v*m+f*u*b-l*p*b,A=f*y*h-g*d*h+g*c*m-l*y*m-f*c*b+l*d*b,x=g*d*u-f*y*u-g*c*p+l*y*p+f*c*v-l*d*v,S=r*_+o*w+a*A+s*x;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/S;return n[0]=_*M,n[1]=(y*p*s-d*v*s-y*a*m+o*v*m+d*a*b-o*p*b)*M,n[2]=(c*v*s-y*u*s+y*a*h-o*v*h-c*a*b+o*u*b)*M,n[3]=(d*u*s-c*p*s-d*a*h+o*p*h+c*a*m-o*u*m)*M,n[4]=w*M,n[5]=(f*v*s-g*p*s+g*a*m-r*v*m-f*a*b+r*p*b)*M,n[6]=(g*u*s-l*v*s-g*a*h+r*v*h+l*a*b-r*u*b)*M,n[7]=(l*p*s-f*u*s+f*a*h-r*p*h-l*a*m+r*u*m)*M,n[8]=A*M,n[9]=(g*d*s-f*y*s-g*o*m+r*y*m+f*o*b-r*d*b)*M,n[10]=(l*y*s-g*c*s+g*o*h-r*y*h-l*o*b+r*c*b)*M,n[11]=(f*c*s-l*d*s-f*o*h+r*d*h+l*o*m-r*c*m)*M,n[12]=x*M,n[13]=(f*y*a-g*d*a+g*o*p-r*y*p-f*o*v+r*d*v)*M,n[14]=(g*c*a-l*y*a-g*o*u+r*y*u+l*o*v-r*c*v)*M,n[15]=(l*d*a-f*c*a+f*o*u-r*d*u-l*o*p+r*c*p)*M,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,l=r+r,c=o+o,u=a+a,h=r*l,f=r*c,d=r*u,p=o*c,m=o*u,g=a*u,y=s*l,v=s*c,b=s*u,_=n.x,w=n.y,A=n.z;return i[0]=(1-(p+g))*_,i[1]=(f+b)*_,i[2]=(d-v)*_,i[3]=0,i[4]=(f-b)*w,i[5]=(1-(h+g))*w,i[6]=(m+y)*w,i[7]=0,i[8]=(d+v)*A,i[9]=(m-y)*A,i[10]=(1-(h+p))*A,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=Mi.set(i[0],i[1],i[2]).length();const o=Mi.set(i[4],i[5],i[6]).length(),a=Mi.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Ei.copy(this);const s=1/r,l=1/o,c=1/a;return Ei.elements[0]*=s,Ei.elements[1]*=s,Ei.elements[2]*=s,Ei.elements[4]*=l,Ei.elements[5]*=l,Ei.elements[6]*=l,Ei.elements[8]*=c,Ei.elements[9]*=c,Ei.elements[10]*=c,e.setFromRotationMatrix(Ei),n.x=r,n.y=o,n.z=a,this}makePerspective(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),h=-(o+r)/(o-r),f=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,i,r,o){const a=this.elements,s=1/(e-t),l=1/(n-i),c=1/(o-r),u=(e+t)*s,h=(n+i)*l,f=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Mi=new Qn,Ei=new Si,Ti=new Qn(0,0,0),Ii=new Qn(1,1,1),ki=new Qn,Ci=new Qn,Bi=new Qn;class Ri{constructor(t=0,e=0,n=0,i=Ri.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,n){const i=Gn.clamp,r=t.elements,o=r[0],a=r[4],s=r[8],l=r[1],c=r[5],u=r[9],h=r[2],f=r[6],d=r[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Pi.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Pi,e,n)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return Li.setFromEuler(this),this.setFromQuaternion(Li,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Qn(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Ri.DefaultOrder="XYZ",Ri.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Pi=new Si,Li=new Jn;class Di{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}let Ni=0;const Oi=new Qn,Fi=new Jn,Gi=new Si,zi=new Qn,Ui=new Qn,Hi=new Qn,Vi=new Jn,Wi=new Qn(1,0,0),Zi=new Qn(0,1,0),ji=new Qn(0,0,1),Yi={type:"added"},Xi={type:"removed"};function Ji(){Object.defineProperty(this,"id",{value:Ni++}),this.uuid=Gn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ji.DefaultUp.clone();const t=new Qn,e=new Ri,n=new Jn,i=new Qn(1,1,1);e._onChange(function(){n.setFromEuler(e,!1)}),n._onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Si},normalMatrix:{value:new Un}}),this.matrix=new Si,this.matrixWorld=new Si,this.matrixAutoUpdate=Ji.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Di,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Ji.DefaultUp=new Qn(0,1,0),Ji.DefaultMatrixAutoUpdate=!0,Ji.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Ji,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Fi.setFromAxisAngle(t,e),this.quaternion.multiply(Fi),this},rotateOnWorldAxis:function(t,e){return Fi.setFromAxisAngle(t,e),this.quaternion.premultiply(Fi),this},rotateX:function(t){return this.rotateOnAxis(Wi,t)},rotateY:function(t){return this.rotateOnAxis(Zi,t)},rotateZ:function(t){return this.rotateOnAxis(ji,t)},translateOnAxis:function(t,e){return Oi.copy(t).applyQuaternion(this.quaternion),this.position.add(Oi.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Wi,t)},translateY:function(t){return this.translateOnAxis(Zi,t)},translateZ:function(t){return this.translateOnAxis(ji,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Gi.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?zi.copy(t):zi.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ui.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gi.lookAt(Ui,zi,this.up):Gi.lookAt(zi,Ui,this.up),this.quaternion.setFromRotationMatrix(Gi),i&&(Gi.extractRotation(i.matrixWorld),Fi.setFromRotationMatrix(Gi),this.quaternion.premultiply(Fi.inverse()))},add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yi)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Xi)),this},clear:function(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Xi)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),Gi.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Gi.multiply(t.parent.matrixWorld)),t.applyMatrix4(Gi),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Qn),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Jn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ui,t,Hi),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Qn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ui,Vi,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Qn),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(e){const e=o(t.geometries),i=o(t.materials),r=o(t.textures),a=o(t.images),s=o(t.shapes);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s)}return n.object=i,n;function o(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}});const Qi=new Qn,qi=new Qn,Ki=new Un;class $i{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new Qn(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=Qi.subVectors(n,e).cross(qi.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Qn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Qn);const n=t.delta(Qi),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Qn),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Ki.getNormalMatrix(t),i=this.coplanarPoint(Qi).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const tr=new Qn,er=new Qn,nr=new Qn,ir=new Qn,rr=new Qn,or=new Qn,ar=new Qn,sr=new Qn,lr=new Qn,cr=new Qn;class ur{constructor(t,e,n){this.a=void 0!==t?t:new Qn,this.b=void 0!==e?e:new Qn,this.c=void 0!==n?n:new Qn}static getNormal(t,e,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Qn),i.subVectors(n,e),tr.subVectors(t,e),i.cross(tr);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){tr.subVectors(i,e),er.subVectors(n,e),nr.subVectors(t,e);const o=tr.dot(tr),a=tr.dot(er),s=tr.dot(nr),l=er.dot(er),c=er.dot(nr),u=o*l-a*a;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Qn),0===u)return r.set(-2,-1,-1);const h=1/u,f=(l*s-a*c)*h,d=(o*c-a*s)*h;return r.set(1-f-d,d,f)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,ir),ir.x>=0&&ir.y>=0&&ir.x+ir.y<=1}static getUV(t,e,n,i,r,o,a,s){return this.getBarycoord(t,e,n,i,ir),s.set(0,0),s.addScaledVector(r,ir.x),s.addScaledVector(o,ir.y),s.addScaledVector(a,ir.z),s}static isFrontFacing(t,e,n,i){return tr.subVectors(n,e),er.subVectors(t,e),tr.cross(er).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return tr.subVectors(this.c,this.b),er.subVectors(this.a,this.b),.5*tr.cross(er).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Qn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ur.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new $i),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ur.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return ur.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return ur.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ur.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Qn);const n=this.a,i=this.b,r=this.c;let o,a;rr.subVectors(i,n),or.subVectors(r,n),sr.subVectors(t,n);const s=rr.dot(sr),l=or.dot(sr);if(s<=0&&l<=0)return e.copy(n);lr.subVectors(t,i);const c=rr.dot(lr),u=or.dot(lr);if(c>=0&&u<=c)return e.copy(i);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),e.copy(n).addScaledVector(rr,o);cr.subVectors(t,r);const f=rr.dot(cr),d=or.dot(cr);if(d>=0&&f<=d)return e.copy(r);const p=f*l-s*d;if(p<=0&&l>=0&&d<=0)return a=l/(l-d),e.copy(n).addScaledVector(or,a);const m=c*d-f*u;if(m<=0&&u-c>=0&&f-d>=0)return ar.subVectors(r,i),a=(u-c)/(u-c+(f-d)),e.copy(i).addScaledVector(ar,a);const g=1/(m+p+h);return o=p*g,a=h*g,e.copy(n).addScaledVector(rr,o).addScaledVector(or,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const hr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fr={h:0,s:0,l:0},dr={h:0,s:0,l:0};function pr(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function mr(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function gr(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class yr{constructor(t,e,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=Gn.euclideanModulo(t,1),e=Gn.clamp(e,0,1),n=Gn.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=pr(r,i,t+1/3),this.g=pr(r,i,t),this.b=pr(r,i,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){let t;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(t=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[5]),this;if(t=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[5]),this;break;case"hsl":case"hsla":if(t=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[5]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=hr[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e){void 0===e&&(e=2);const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=mr(t.r),this.g=mr(t.g),this.b=mr(t.b),this}copyLinearToSRGB(t){return this.r=gr(t.r),this.g=gr(t.g),this.b=gr(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,n=this.g,i=this.b,r=Math.max(e,n,i),o=Math.min(e,n,i);let a,s;const l=(o+r)/2;if(o===r)a=0,s=0;else{const t=r-o;switch(s=l<=.5?t/(r+o):t/(2-r-o),r){case e:a=(n-i)/t+(n<i?6:0);break;case n:a=(i-e)/t+2;break;case i:a=(e-n)/t+4}a/=6}return t.h=a,t.s=s,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(fr),fr.h+=t,fr.s+=e,fr.l+=n,this.setHSL(fr.h,fr.s,fr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpHSL(t,e){this.getHSL(fr),t.getHSL(dr);const n=Gn.lerp(fr.h,dr.h,e),i=Gn.lerp(fr.s,dr.s,e),r=Gn.lerp(fr.l,dr.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}yr.NAMES=hr,yr.prototype.r=1,yr.prototype.g=1,yr.prototype.b=1;class vr{constructor(t,e,n,i,r,o){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new Qn,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new yr,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}clone(){return(new this.constructor).copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}let br=0;function _r(){Object.defineProperty(this,"id",{value:br++}),this.uuid=Gn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=_,this.side=p,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=L,this.blendDst=D,this.blendEquation=M,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=W,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Sn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=un,this.stencilZFail=un,this.stencilZPass=un,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function wr(t){_r.call(this),this.type="MeshBasicMaterial",this.color=new yr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}_r.prototype=Object.assign(Object.create(Nn.prototype),{constructor:_r,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===y;continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}},toJSON:function(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==p&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(_r.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),wr.prototype=Object.create(_r.prototype),wr.prototype.constructor=wr,wr.prototype.isMeshBasicMaterial=!0,wr.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};const Ar=new Qn,xr=new zn;function Sr(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Mn,this.updateRange={offset:0,count:-1},this.version=0}function Mr(t,e,n){Sr.call(this,new Int8Array(t),e,n)}function Er(t,e,n){Sr.call(this,new Uint8Array(t),e,n)}function Tr(t,e,n){Sr.call(this,new Uint8ClampedArray(t),e,n)}function Ir(t,e,n){Sr.call(this,new Int16Array(t),e,n)}function kr(t,e,n){Sr.call(this,new Uint16Array(t),e,n)}function Cr(t,e,n){Sr.call(this,new Int32Array(t),e,n)}function Br(t,e,n){Sr.call(this,new Uint32Array(t),e,n)}function Rr(t,e,n){Sr.call(this,new Float32Array(t),e,n)}function Pr(t,e,n){Sr.call(this,new Float64Array(t),e,n)}Object.defineProperty(Sr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Sr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new yr),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this},copyVector2sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new zn),e[n++]=r.x,e[n++]=r.y}return this},copyVector3sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Qn),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this},copyVector4sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new jn),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)xr.fromBufferAttribute(this,e),xr.applyMatrix3(t),this.setXY(e,xr.x,xr.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Ar.fromBufferAttribute(this,e),Ar.applyMatrix3(t),this.setXYZ(e,Ar.x,Ar.y,Ar.z);return this},applyMatrix4:function(t){for(let e=0,n=this.count;e<n;e++)Ar.x=this.getX(e),Ar.y=this.getY(e),Ar.z=this.getZ(e),Ar.applyMatrix4(t),this.setXYZ(e,Ar.x,Ar.y,Ar.z);return this},applyNormalMatrix:function(t){for(let e=0,n=this.count;e<n;e++)Ar.x=this.getX(e),Ar.y=this.getY(e),Ar.z=this.getZ(e),Ar.applyNormalMatrix(t),this.setXYZ(e,Ar.x,Ar.y,Ar.z);return this},transformDirection:function(t){for(let e=0,n=this.count;e<n;e++)Ar.x=this.getX(e),Ar.y=this.getY(e),Ar.z=this.getZ(e),Ar.transformDirection(t),this.setXYZ(e,Ar.x,Ar.y,Ar.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Mr.prototype=Object.create(Sr.prototype),Mr.prototype.constructor=Mr,Er.prototype=Object.create(Sr.prototype),Er.prototype.constructor=Er,Tr.prototype=Object.create(Sr.prototype),Tr.prototype.constructor=Tr,Ir.prototype=Object.create(Sr.prototype),Ir.prototype.constructor=Ir,kr.prototype=Object.create(Sr.prototype),kr.prototype.constructor=kr,Cr.prototype=Object.create(Sr.prototype),Cr.prototype.constructor=Cr,Br.prototype=Object.create(Sr.prototype),Br.prototype.constructor=Br,Rr.prototype=Object.create(Sr.prototype),Rr.prototype.constructor=Rr,Pr.prototype=Object.create(Sr.prototype),Pr.prototype.constructor=Pr;function Lr(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}let Dr=1;const Nr=new Si,Or=new Ji,Fr=new Qn,Gr=new $n,zr=new $n,Ur=new Qn;function Hr(){Object.defineProperty(this,"id",{value:Dr+=2}),this.uuid=Gn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Hr.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Hr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(Lr(t)>65535?Br:kr)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Un).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Nr.makeRotationX(t),this.applyMatrix4(Nr),this},rotateY:function(t){return Nr.makeRotationY(t),this.applyMatrix4(Nr),this},rotateZ:function(t){return Nr.makeRotationZ(t),this.applyMatrix4(Nr),this},translate:function(t,e,n){return Nr.makeTranslation(t,e,n),this.applyMatrix4(Nr),this},scale:function(t,e,n){return Nr.makeScale(t,e,n),this.applyMatrix4(Nr),this},lookAt:function(t){return Or.lookAt(t),Or.updateMatrix(),this.applyMatrix4(Or.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fr).negate(),this.translate(Fr.x,Fr.y,Fr.z),this},setFromObject:function(t){const e=t.geometry;if(t.isPoints||t.isLine){const t=new Rr(3*e.vertices.length,3),n=new Rr(3*e.colors.length,3);if(this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){const t=new Rr(e.lineDistances.length,1);this.setAttribute("lineDistance",t.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Rr(e,3)),this},updateFromObject:function(t){let e=t.geometry;if(t.isMesh){let t=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(t=void 0,e.elementsNeedUpdate=!1),void 0===t)return this.fromGeometry(e);t.verticesNeedUpdate=e.verticesNeedUpdate,t.normalsNeedUpdate=e.normalsNeedUpdate,t.colorsNeedUpdate=e.colorsNeedUpdate,t.uvsNeedUpdate=e.uvsNeedUpdate,t.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=t}if(!0===e.verticesNeedUpdate){const t=this.attributes.position;void 0!==t&&(t.copyVector3sArray(e.vertices),t.needsUpdate=!0),e.verticesNeedUpdate=!1}if(!0===e.normalsNeedUpdate){const t=this.attributes.normal;void 0!==t&&(t.copyVector3sArray(e.normals),t.needsUpdate=!0),e.normalsNeedUpdate=!1}if(!0===e.colorsNeedUpdate){const t=this.attributes.color;void 0!==t&&(t.copyColorsArray(e.colors),t.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){const t=this.attributes.uv;void 0!==t&&(t.copyVector2sArray(e.uvs),t.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){const t=this.attributes.lineDistance;void 0!==t&&(t.copyArray(e.lineDistances),t.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){const e=[];let n,i,r=void 0;const o=t.faces;for(i=0;i<o.length;i++){const t=o[i];t.materialIndex!==r&&(r=t.materialIndex,void 0!==n&&(n.count=3*i-n.start,e.push(n)),n={start:3*i,materialIndex:r})}void 0!==n&&(n.count=3*i-n.start,e.push(n)),this.groups=e}fromGeometry(t){const e=t.faces,n=t.vertices,i=t.faceVertexUvs,r=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,a=t.morphTargets,s=a.length;let l;if(s>0){l=[];for(let t=0;t<s;t++)l[t]={name:a[t].name,data:[]};this.morphTargets.position=l}const c=t.morphNormals,u=c.length;let h;if(u>0){h=[];for(let t=0;t<u;t++)h[t]={name:c[t].name,data:[]};this.morphTargets.normal=h}const f=t.skinIndices,d=t.skinWeights,p=f.length===n.length,m=d.length===n.length;n.length>0&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let t=0;t<e.length;t++){const g=e[t];this.vertices.push(n[g.a],n[g.b],n[g.c]);const y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{const t=g.normal;this.normals.push(t,t,t)}const v=g.vertexColors;if(3===v.length)this.colors.push(v[0],v[1],v[2]);else{const t=g.color;this.colors.push(t,t,t)}if(!0===r){const e=i[0][t];void 0!==e?this.uvs.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",t),this.uvs.push(new zn,new zn,new zn))}if(!0===o){const e=i[1][t];void 0!==e?this.uvs2.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",t),this.uvs2.push(new zn,new zn,new zn))}for(let t=0;t<s;t++){const e=a[t].vertices;l[t].data.push(e[g.a],e[g.b],e[g.c])}for(let e=0;e<u;e++){const n=c[e].vertexNormals[t];h[e].data.push(n.a,n.b,n.c)}p&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]),m&&this.skinWeights.push(d[g.a],d[g.b],d[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}}).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){const e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Sr(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){const e=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Sr(e,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const e=new Float32Array(3*t.colors.length);this.setAttribute("color",new Sr(e,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const e=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Sr(e,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const e=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Sr(e,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(const e in t.morphTargets){const n=[],i=t.morphTargets[e];for(let t=0,e=i.length;t<e;t++){const e=i[t],r=new Rr(3*e.data.length,3);r.name=e.name,n.push(r.copyVector3sArray(e.data))}this.morphAttributes[e]=n}if(t.skinIndices.length>0){const e=new Rr(4*t.skinIndices.length,4);this.setAttribute("skinIndex",e.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const e=new Rr(4*t.skinWeights.length,4);this.setAttribute("skinWeight",e.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $n);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Qn(-1/0,-1/0,-1/0),new Qn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Gr.setFromBufferAttribute(n),this.morphTargetsRelative?(Ur.addVectors(this.boundingBox.min,Gr.min),this.boundingBox.expandByPoint(Ur),Ur.addVectors(this.boundingBox.max,Gr.max),this.boundingBox.expandByPoint(Ur)):(this.boundingBox.expandByPoint(Gr.min),this.boundingBox.expandByPoint(Gr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Qn,1/0);if(t){const n=this.boundingSphere.center;if(Gr.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];zr.setFromBufferAttribute(n),this.morphTargetsRelative?(Ur.addVectors(Gr.min,zr.min),Gr.expandByPoint(Ur),Ur.addVectors(Gr.max,zr.max),Gr.expandByPoint(Ur)):(Gr.expandByPoint(zr.min),Gr.expandByPoint(zr.max))}Gr.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)Ur.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(Ur));if(e)for(let r=0,o=e.length;r<o;r++){const o=e[r],a=this.morphTargetsRelative;for(let e=0,r=o.count;e<r;e++)Ur.fromBufferAttribute(o,e),a&&(Fr.fromBufferAttribute(t,e),Ur.add(Fr)),i=Math.max(i,n.distanceToSquared(Ur))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Sr(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new Qn,r=new Qn,o=new Qn,a=new Qn,s=new Qn,l=new Qn,c=new Qn,u=new Qn;if(t)for(let h=0,f=t.count;h<f;h+=3){const f=t.getX(h+0),d=t.getX(h+1),p=t.getX(h+2);i.fromBufferAttribute(e,f),r.fromBufferAttribute(e,d),o.fromBufferAttribute(e,p),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,f),s.fromBufferAttribute(n,d),l.fromBufferAttribute(n,p),a.add(c),s.add(c),l.add(c),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,a=e.count;t<a;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===t.attributes[i])continue;const r=n[i].array,o=t.attributes[i],a=o.array,s=o.itemSize*e,l=Math.min(a.length,r.length-s);for(let t=0,e=s;t<l;t++,e++)r[e]=a[t]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Ur.fromBufferAttribute(t,e),Ur.normalize(),t.setXYZ(e,Ur.x,Ur.y,Ur.z)},toNonIndexed:function(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,o=new n.constructor(e.length*i);let a=0,s=0;for(let t=0,r=e.length;t<r;t++){a=e[t]*i;for(let t=0;t<i;t++)o[s++]=n[a++]}return new Sr(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const e=new Hr,n=this.index.array,i=this.attributes;for(const r in i){const o=t(i[r],n);e.setAttribute(r,o)}const r=this.morphAttributes;for(const i in r){const o=[],a=r[i];for(let e=0,i=a.length;e<i;e++){const i=t(a[e],n);o.push(i)}e.morphAttributes[i]=o}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.addGroup(n.start,n.count,n.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const i=n[e],r=i.toJSON(t.data);""!==i.name&&(r.name=i.name),t.data.attributes[e]=r}const i={};let r=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],o=[];for(let e=0,i=n.length;e<i;e++){const i=n[e],r=i.toJSON(t.data);""!==i.name&&(r.name=i.name),o.push(r)}o.length>0&&(i[e]=o,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t},clone:function(){return(new Hr).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const t in i){const n=i[t];this.setAttribute(t,n.clone(e))}const r=t.morphAttributes;for(const t in r){const n=[],i=r[t];for(let t=0,r=i.length;t<r;t++)n.push(i[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,e=o.length;t<e;t++){const e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Vr=new Si,Wr=new xi,Zr=new mi,jr=new Qn,Yr=new Qn,Xr=new Qn,Jr=new Qn,Qr=new Qn,qr=new Qn,Kr=new Qn,$r=new Qn,to=new Qn,eo=new zn,no=new zn,io=new zn,ro=new Qn,oo=new Qn;function ao(t,e){Ji.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Hr,this.material=void 0!==e?e:new wr,this.updateMorphTargets()}function so(t,e,n,i,r,o,a,s){let l;if(null===(l=e.side===m?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,e.side!==g,s)))return null;oo.copy(s),oo.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(oo);return c<n.near||c>n.far?null:{distance:c,point:oo.clone(),object:t}}function lo(t,e,n,i,r,o,a,s,l,c,u,h){jr.fromBufferAttribute(r,c),Yr.fromBufferAttribute(r,u),Xr.fromBufferAttribute(r,h);const f=t.morphTargetInfluences;if(e.morphTargets&&o&&f){Kr.set(0,0,0),$r.set(0,0,0),to.set(0,0,0);for(let t=0,e=o.length;t<e;t++){const e=f[t],n=o[t];0!==e&&(Jr.fromBufferAttribute(n,c),Qr.fromBufferAttribute(n,u),qr.fromBufferAttribute(n,h),a?(Kr.addScaledVector(Jr,e),$r.addScaledVector(Qr,e),to.addScaledVector(qr,e)):(Kr.addScaledVector(Jr.sub(jr),e),$r.addScaledVector(Qr.sub(Yr),e),to.addScaledVector(qr.sub(Xr),e)))}jr.add(Kr),Yr.add($r),Xr.add(to)}t.isSkinnedMesh&&(t.boneTransform(c,jr),t.boneTransform(u,Yr),t.boneTransform(h,Xr));const d=so(t,e,n,i,jr,Yr,Xr,ro);if(d){s&&(eo.fromBufferAttribute(s,c),no.fromBufferAttribute(s,u),io.fromBufferAttribute(s,h),d.uv=ur.getUV(ro,jr,Yr,Xr,eo,no,io,new zn)),l&&(eo.fromBufferAttribute(l,c),no.fromBufferAttribute(l,u),io.fromBufferAttribute(l,h),d.uv2=ur.getUV(ro,jr,Yr,Xr,eo,no,io,new zn));const t=new vr(c,u,h);ur.getNormal(jr,Yr,Xr,t.normal),d.face=t}return d}ao.prototype=Object.assign(Object.create(Ji.prototype),{constructor:ao,isMesh:!0,copy:function(t){return Ji.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Zr.copy(n.boundingSphere),Zr.applyMatrix4(r),!1===t.ray.intersectsSphere(Zr))return;if(Vr.getInverse(r),Wr.copy(t.ray).applyMatrix4(Vr),null!==n.boundingBox&&!1===Wr.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,f=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,d=h.length;n<d;n++){const d=h[n],p=i[d.materialIndex];for(let n=Math.max(d.start,f.start),i=Math.min(d.start+d.count,f.start+f.count);n<i;n+=3){const i=r.getX(n),h=r.getX(n+1),f=r.getX(n+2);(o=lo(this,p,t,Wr,a,s,l,c,u,i,h,f))&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=d.materialIndex,e.push(o))}}else{for(let n=Math.max(0,f.start),h=Math.min(r.count,f.start+f.count);n<h;n+=3){const h=r.getX(n),f=r.getX(n+1),d=r.getX(n+2);(o=lo(this,i,t,Wr,a,s,l,c,u,h,f,d))&&(o.faceIndex=Math.floor(n/3),e.push(o))}}else if(void 0!==a)if(Array.isArray(i))for(let n=0,r=h.length;n<r;n++){const r=h[n],d=i[r.materialIndex];for(let n=Math.max(r.start,f.start),i=Math.min(r.start+r.count,f.start+f.count);n<i;n+=3){(o=lo(this,d,t,Wr,a,s,l,c,u,n,n+1,n+2))&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=r.materialIndex,e.push(o))}}else{for(let n=Math.max(0,f.start),r=Math.min(a.count,f.start+f.count);n<r;n+=3){(o=lo(this,i,t,Wr,a,s,l,c,u,n,n+1,n+2))&&(o.faceIndex=Math.floor(n/3),e.push(o))}}}else if(n.isGeometry){const r=Array.isArray(i),a=n.vertices,s=n.faces;let l;const c=n.faceVertexUvs[0];c.length>0&&(l=c);for(let n=0,c=s.length;n<c;n++){const c=s[n],u=r?i[c.materialIndex]:i;if(void 0===u)continue;const h=a[c.a],f=a[c.b],d=a[c.c];if(o=so(this,u,t,Wr,h,f,d,ro)){if(l&&l[n]){const t=l[n];eo.copy(t[0]),no.copy(t[1]),io.copy(t[2]),o.uv=ur.getUV(ro,h,f,d,eo,no,io,new zn)}o.face=c,o.faceIndex=n,e.push(o)}}}}});class co extends Hr{constructor(t=1,e=1,n=1,i=1,r=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const a=this;i=Math.floor(i),r=Math.floor(r);const s=[],l=[],c=[],u=[];let h=0,f=0;function d(t,e,n,i,r,o,d,p,m,g,y){const v=o/m,b=d/g,_=o/2,w=d/2,A=p/2,x=m+1,S=g+1;let M=0,E=0;const T=new Qn;for(let o=0;o<S;o++){const a=o*b-w;for(let s=0;s<x;s++){const h=s*v-_;T[t]=h*i,T[e]=a*r,T[n]=A,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[n]=p>0?1:-1,c.push(T.x,T.y,T.z),u.push(s/m),u.push(1-o/g),M+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const n=h+e+x*t,i=h+e+x*(t+1),r=h+(e+1)+x*(t+1),o=h+(e+1)+x*t;s.push(n,i,o),s.push(i,r,o),E+=6}a.addGroup(f,E,y),f+=E,h+=M}d("z","y","x",-1,-1,n,e,t,o=Math.floor(o),r,0),d("z","y","x",1,-1,n,e,-t,o,r,1),d("x","z","y",1,1,t,n,e,i,o,2),d("x","z","y",1,-1,t,n,-e,i,o,3),d("x","y","z",1,-1,t,e,n,i,r,4),d("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new Rr(l,3)),this.setAttribute("normal",new Rr(c,3)),this.setAttribute("uv",new Rr(u,2))}}function uo(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function ho(t){const e={};for(let n=0;n<t.length;n++){const i=uo(t[n]);for(const t in i)e[t]=i[t]}return e}const fo={clone:uo,merge:ho};var po="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",mo="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function go(t){_r.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=po,this.fragmentShader=mo,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function yo(){Ji.call(this),this.type="Camera",this.matrixWorldInverse=new Si,this.projectionMatrix=new Si,this.projectionMatrixInverse=new Si}function vo(t,e,n,i){yo.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}go.prototype=Object.create(_r.prototype),go.prototype.constructor=go,go.prototype.isShaderMaterial=!0,go.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=uo(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},go.prototype.toJSON=function(t){const e=_r.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e},yo.prototype=Object.assign(Object.create(Ji.prototype),{constructor:yo,isCamera:!0,copy:function(t,e){return Ji.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Qn),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Ji.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){Ji.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),vo.prototype=Object.assign(Object.create(yo.prototype),{constructor:vo,isPerspectiveCamera:!0,copy:function(t,e){return yo.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Gn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(.5*Gn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Gn.RAD2DEG*Math.atan(Math.tan(.5*Gn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(.5*Gn.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/t,e-=o.offsetY*n/a,i*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=Ji.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const bo=90,_o=1;function wo(t,e,n){if(Ji.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new vo(bo,_o,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Qn(1,0,0)),this.add(i);const r=new vo(bo,_o,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Qn(-1,0,0)),this.add(r);const o=new vo(bo,_o,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Qn(0,1,0)),this.add(o);const a=new vo(bo,_o,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Qn(0,-1,0)),this.add(a);const s=new vo(bo,_o,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Qn(0,0,1)),this.add(s);const l=new vo(bo,_o,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Qn(0,0,-1)),this.add(l),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();const c=t.xr.enabled,u=t.getRenderTarget();t.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.xr.enabled=c}}function Ao(t,e,n,i,r,o,a,s,l,c){t=void 0!==t?t:[],e=void 0!==e?e:ot,a=void 0!==a?a:Ot,Zn.call(this,t,e,n,i,r,o,a,s,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}function xo(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),Yn.call(this,t,t,e),e=e||{},this.texture=new Ao(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}function So(t,e,n,i,r,o,a,s,l,c,u,h){Zn.call(this,null,o,a,s,l,c,i,r,u,h),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==l?l:pt,this.minFilter=void 0!==c?c:pt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}wo.prototype=Object.create(Ji.prototype),wo.prototype.constructor=wo,Ao.prototype=Object.create(Zn.prototype),Ao.prototype.constructor=Ao,Ao.prototype.isCubeTexture=!0,Object.defineProperty(Ao.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),xo.prototype=Object.create(Yn.prototype),xo.prototype.constructor=xo,xo.prototype.isWebGLCubeRenderTarget=!0,xo.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Ft,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},i=new co(5,5,5),r=new go({name:"CubemapFromEquirect",uniforms:uo(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:m,blending:b});r.uniforms.tEquirect.value=e;const o=new ao(i,r),a=e.minFilter;return e.minFilter===At&&(e.minFilter=bt),new wo(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this},xo.prototype.clear=function(t,e,n,i){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,n,i);t.setRenderTarget(r)},So.prototype=Object.create(Zn.prototype),So.prototype.constructor=So,So.prototype.isDataTexture=!0;const Mo=new mi,Eo=new Qn;class To{constructor(t,e,n,i,r,o){this.planes=[void 0!==t?t:new $i,void 0!==e?e:new $i,void 0!==n?n:new $i,void 0!==i?i:new $i,void 0!==r?r:new $i,void 0!==o?o:new $i]}set(t,e,n,i,r,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this}clone(){return(new this.constructor).copy(this)}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return e[0].setComponents(a-i,u-s,p-h,v-m).normalize(),e[1].setComponents(a+i,u+s,p+h,v+m).normalize(),e[2].setComponents(a+r,u+l,p+f,v+g).normalize(),e[3].setComponents(a-r,u-l,p-f,v-g).normalize(),e[4].setComponents(a-o,u-c,p-d,v-y).normalize(),e[5].setComponents(a+o,u+c,p+d,v+y).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Mo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Mo)}intersectsSprite(t){return Mo.center.set(0,0,0),Mo.radius=.7071067811865476,Mo.applyMatrix4(t.matrixWorld),this.intersectsSphere(Mo)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(Eo.x=i.normal.x>0?t.max.x:t.min.x,Eo.y=i.normal.y>0?t.max.y:t.min.y,Eo.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Eo)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}}function Io(){let t=null,e=!1,n=null,i=null;function r(e,o){n(e,o),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function ko(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){var o=i.get(e);return void((!o||o.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const a=i.get(e);void 0===a?i.set(e,function(e,n){const i=e.array,r=e.usage,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,i,r),e.onUploadCallback();let a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:i instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,r)):a.version<e.version&&(function(e,i,r){const o=i.array,a=i.updateRange;t.bindBuffer(r,e),-1===a.count?t.bufferSubData(r,0,o):(n?t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(a.buffer,e,r),a.version=e.version)}}}class Co extends Hr{constructor(t,e,n,i){super(),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=(t=t||1)/2,o=(e=e||1)/2,a=Math.floor(n)||1,s=Math.floor(i)||1,l=a+1,c=s+1,u=t/a,h=e/s,f=[],d=[],p=[],m=[];for(let t=0;t<c;t++){const e=t*h-o;for(let n=0;n<l;n++){const i=n*u-r;d.push(i,-e,0),p.push(0,0,1),m.push(n/a),m.push(1-t/s)}}for(let t=0;t<s;t++)for(let e=0;e<a;e++){const n=e+l*t,i=e+l*(t+1),r=e+1+l*(t+1),o=e+1+l*t;f.push(n,i,o),f.push(i,r,o)}this.setIndex(f),this.setAttribute("position",new Rr(d,3)),this.setAttribute("normal",new Rr(p,3)),this.setAttribute("uv",new Rr(m,2))}}const Bo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Ro={common:{diffuse:{value:new yr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Un},uv2Transform:{value:new Un},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new zn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Un}},sprite:{diffuse:{value:new yr(15658734)},opacity:{value:1},center:{value:new zn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Un}}},Po={basic:{uniforms:ho([Ro.common,Ro.specularmap,Ro.envmap,Ro.aomap,Ro.lightmap,Ro.fog]),vertexShader:Bo.meshbasic_vert,fragmentShader:Bo.meshbasic_frag},lambert:{uniforms:ho([Ro.common,Ro.specularmap,Ro.envmap,Ro.aomap,Ro.lightmap,Ro.emissivemap,Ro.fog,Ro.lights,{emissive:{value:new yr(0)}}]),vertexShader:Bo.meshlambert_vert,fragmentShader:Bo.meshlambert_frag},phong:{uniforms:ho([Ro.common,Ro.specularmap,Ro.envmap,Ro.aomap,Ro.lightmap,Ro.emissivemap,Ro.bumpmap,Ro.normalmap,Ro.displacementmap,Ro.fog,Ro.lights,{emissive:{value:new yr(0)},specular:{value:new yr(1118481)},shininess:{value:30}}]),vertexShader:Bo.meshphong_vert,fragmentShader:Bo.meshphong_frag},standard:{uniforms:ho([Ro.common,Ro.envmap,Ro.aomap,Ro.lightmap,Ro.emissivemap,Ro.bumpmap,Ro.normalmap,Ro.displacementmap,Ro.roughnessmap,Ro.metalnessmap,Ro.fog,Ro.lights,{emissive:{value:new yr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bo.meshphysical_vert,fragmentShader:Bo.meshphysical_frag},toon:{uniforms:ho([Ro.common,Ro.aomap,Ro.lightmap,Ro.emissivemap,Ro.bumpmap,Ro.normalmap,Ro.displacementmap,Ro.gradientmap,Ro.fog,Ro.lights,{emissive:{value:new yr(0)}}]),vertexShader:Bo.meshtoon_vert,fragmentShader:Bo.meshtoon_frag},matcap:{uniforms:ho([Ro.common,Ro.bumpmap,Ro.normalmap,Ro.displacementmap,Ro.fog,{matcap:{value:null}}]),vertexShader:Bo.meshmatcap_vert,fragmentShader:Bo.meshmatcap_frag},points:{uniforms:ho([Ro.points,Ro.fog]),vertexShader:Bo.points_vert,fragmentShader:Bo.points_frag},dashed:{uniforms:ho([Ro.common,Ro.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bo.linedashed_vert,fragmentShader:Bo.linedashed_frag},depth:{uniforms:ho([Ro.common,Ro.displacementmap]),vertexShader:Bo.depth_vert,fragmentShader:Bo.depth_frag},normal:{uniforms:ho([Ro.common,Ro.bumpmap,Ro.normalmap,Ro.displacementmap,{opacity:{value:1}}]),vertexShader:Bo.normal_vert,fragmentShader:Bo.normal_frag},sprite:{uniforms:ho([Ro.sprite,Ro.fog]),vertexShader:Bo.sprite_vert,fragmentShader:Bo.sprite_frag},background:{uniforms:{uvTransform:{value:new Un},t2D:{value:null}},vertexShader:Bo.background_vert,fragmentShader:Bo.background_frag},cube:{uniforms:ho([Ro.envmap,{opacity:{value:1}}]),vertexShader:Bo.cube_vert,fragmentShader:Bo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bo.equirect_vert,fragmentShader:Bo.equirect_frag},distanceRGBA:{uniforms:ho([Ro.common,Ro.displacementmap,{referencePosition:{value:new Qn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bo.distanceRGBA_vert,fragmentShader:Bo.distanceRGBA_frag},shadow:{uniforms:ho([Ro.lights,Ro.fog,{color:{value:new yr(0)},opacity:{value:1}}]),vertexShader:Bo.shadow_vert,fragmentShader:Bo.shadow_frag}};function Lo(t,e,n,i){const r=t.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||null!==o,s={},l=f(null);let c=l;function u(e){return i.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function h(e){return i.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function f(t){const e=[],n=[],i=[];for(let t=0;t<r;t++)e[t]=0,n[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function d(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function p(t){m(t,0)}function m(n,r){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==r){(i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function g(){const e=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function y(e,n,r,o,a,s){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,o,a,s):t.vertexAttribIPointer(e,n,r,a,s)}function v(){b(),c!==l&&u((c=l).object)}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,h,v,b){let _=!1;if(a){const e=function(e,n,r){const a=!0===r.wireframe;let l=s[e.id];void 0===l&&(l={},s[e.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];return void 0===u&&(u=f(i.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),c[a]=u),u}(v,h,l);c!==e&&u((c=e).object),(_=function(t,e){const n=c.attributes,i=t.attributes;if(Object.keys(n).length!==Object.keys(i).length)return!0;for(const t in i){const e=n[t],r=i[t];if(void 0===e)return!0;if(e.attribute!==r)return!0;if(e.data!==r.data)return!0}return c.index!==e}(v,b))&&function(t,e){const n={},i=t.attributes;for(const t in i){const e=i[t],r={};r.attribute=e,e.data&&(r.data=e.data),n[t]=r}c.attributes=n,c.index=e}(v,b)}else{const t=!0===l.wireframe;c.geometry===v.id&&c.program===h.id&&c.wireframe===t||(c.geometry=v.id,c.program=h.id,c.wireframe=t,_=!0)}!0===r.isInstancedMesh&&(_=!0),null!==b&&n.update(b,34963),_&&(function(r,o,a,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;d();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const e in c){const i=c[e];if(i>=0){const o=l[e];if(void 0!==o){const e=o.normalized,r=o.itemSize,a=n.get(o);if(void 0===a)continue;const l=a.buffer,c=a.type,u=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(i,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):p(i),t.bindBuffer(34962,l),y(i,r,c,e,a*u,h*u)}else o.isInstancedBufferAttribute?(m(i,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):p(i),t.bindBuffer(34962,l),y(i,r,c,e,0,0)}else if("instanceMatrix"===e){const e=n.get(r.instanceMatrix);if(void 0===e)continue;const o=e.buffer,a=e.type;m(i+0,1),m(i+1,1),m(i+2,1),m(i+3,1),t.bindBuffer(34962,o),t.vertexAttribPointer(i+0,4,a,!1,64,0),t.vertexAttribPointer(i+1,4,a,!1,64,16),t.vertexAttribPointer(i+2,4,a,!1,64,32),t.vertexAttribPointer(i+3,4,a,!1,64,48)}else if("instanceColor"===e){const e=n.get(r.instanceColor);if(void 0===e)continue;const o=e.buffer,a=e.type;m(i,1),t.bindBuffer(34962,o),t.vertexAttribPointer(i,3,a,!1,12,0)}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(i,n);break;case 3:t.vertexAttrib3fv(i,n);break;case 4:t.vertexAttrib4fv(i,n);break;default:t.vertexAttrib1fv(i,n)}}}}g()}(r,l,h,v),null!==b&&t.bindBuffer(34963,n.get(b).buffer))},reset:v,resetDefaultState:b,dispose:function(){v();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;const e=s[t.id];for(const t in e){const n=e[t];for(const t in n)h(n[t].object),delete n[t];delete e[t]}delete s[t.id]},releaseStatesOfProgram:function(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)h(i[t].object),delete i[t];delete n[t.id]}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:g}}function Do(t,e){return t[0]-e[0]}function No(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Oo(t,e,n,i){Zn.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=pt,this.minFilter=pt,this.wrapR=ft,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Fo(t,e,n,i){Zn.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=pt,this.minFilter=pt,this.wrapR=ft,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Po.physical={uniforms:ho([Po.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new zn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new yr(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Bo.meshphysical_vert,fragmentShader:Bo.meshphysical_frag},Oo.prototype=Object.create(Zn.prototype),Oo.prototype.constructor=Oo,Oo.prototype.isDataTexture2DArray=!0,Fo.prototype=Object.create(Zn.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isDataTexture3D=!0;const Go=new Zn,zo=new Oo,Uo=new Fo,Ho=new Ao,Vo=[],Wo=[],Zo=new Float32Array(16),jo=new Float32Array(9),Yo=new Float32Array(4);function Xo(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let o=Vo[r];if(void 0===o&&(o=new Float32Array(r),Vo[r]=o),0!==e){i.toArray(o,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(o,r)}return o}function Jo(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Qo(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function qo(t,e){let n=Wo[e];void 0===n&&(n=new Int32Array(e),Wo[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Ko(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function $o(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Jo(n,e))return;t.uniform2fv(this.addr,e),Qo(n,e)}}function ta(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Jo(n,e))return;t.uniform3fv(this.addr,e),Qo(n,e)}}function ea(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Jo(n,e))return;t.uniform4fv(this.addr,e),Qo(n,e)}}function na(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Jo(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Qo(n,e)}else{if(Jo(n,i))return;Yo.set(i),t.uniformMatrix2fv(this.addr,!1,Yo),Qo(n,i)}}function ia(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Jo(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Qo(n,e)}else{if(Jo(n,i))return;jo.set(i),t.uniformMatrix3fv(this.addr,!1,jo),Qo(n,i)}}function ra(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Jo(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Qo(n,e)}else{if(Jo(n,i))return;Zo.set(i),t.uniformMatrix4fv(this.addr,!1,Zo),Qo(n,i)}}function oa(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||Go,r)}function aa(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||zo,r)}function sa(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Uo,r)}function la(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Ho,r)}function ca(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function ua(t,e){const n=this.cache;Jo(n,e)||(t.uniform2iv(this.addr,e),Qo(n,e))}function ha(t,e){const n=this.cache;Jo(n,e)||(t.uniform3iv(this.addr,e),Qo(n,e))}function fa(t,e){const n=this.cache;Jo(n,e)||(t.uniform4iv(this.addr,e),Qo(n,e))}function da(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function pa(t,e){t.uniform1fv(this.addr,e)}function ma(t,e){t.uniform1iv(this.addr,e)}function ga(t,e){t.uniform2iv(this.addr,e)}function ya(t,e){t.uniform3iv(this.addr,e)}function va(t,e){t.uniform4iv(this.addr,e)}function ba(t,e){const n=Xo(e,this.size,2);t.uniform2fv(this.addr,n)}function _a(t,e){const n=Xo(e,this.size,3);t.uniform3fv(this.addr,n)}function wa(t,e){const n=Xo(e,this.size,4);t.uniform4fv(this.addr,n)}function Aa(t,e){const n=Xo(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function xa(t,e){const n=Xo(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Sa(t,e){const n=Xo(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Ma(t,e,n){const i=e.length,r=qo(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.safeSetTexture2D(e[t]||Go,r[t])}function Ea(t,e,n){const i=e.length,r=qo(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.safeSetTextureCube(e[t]||Ho,r[t])}function Ta(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Ko;case 35664:return $o;case 35665:return ta;case 35666:return ea;case 35674:return na;case 35675:return ia;case 35676:return ra;case 5124:case 35670:return ca;case 35667:case 35671:return ua;case 35668:case 35672:return ha;case 35669:case 35673:return fa;case 5125:return da;case 35678:case 36198:case 36298:case 36306:case 35682:return oa;case 35679:case 36299:case 36307:return sa;case 35680:case 36300:case 36308:case 36293:return la;case 36289:case 36303:case 36311:case 36292:return aa}}(e.type)}function Ia(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return pa;case 35664:return ba;case 35665:return _a;case 35666:return wa;case 35674:return Aa;case 35675:return xa;case 35676:return Sa;case 5124:case 35670:return ma;case 35667:case 35671:return ga;case 35668:case 35672:return ya;case 35669:case 35673:return va;case 35678:case 36198:case 36298:case 36306:case 35682:return Ma;case 35680:case 36300:case 36308:case 36293:return Ea}}(e.type)}function ka(t){this.id=t,this.seq=[],this.map={}}Ia.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Qo(e,t)},ka.prototype.setValue=function(t,e,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(t,e[o.id],n)}};const Ca=/([\w\d_]+)(\])?(\[|\.)?/g;function Ba(t,e){t.seq.push(e),t.map[e.id]=e}function Ra(t,e,n){const i=t.name,r=i.length;for(Ca.lastIndex=0;;){const o=Ca.exec(i),a=Ca.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){Ba(n,void 0===c?new Ta(s,t,e):new Ia(s,t,e));break}{let t=n.map[s];void 0===t&&Ba(n,t=new ka(s)),n=t}}}function Pa(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);Ra(n,t.getUniformLocation(e,n.name),this)}}function La(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}Pa.prototype.setValue=function(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)},Pa.prototype.setOptional=function(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)},Pa.upload=function(t,e,n,i){for(let r=0,o=e.length;r!==o;++r){const o=e[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,i)}},Pa.seqWithValue=function(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n};let Da=0;function Na(t){switch(t){case Qe:return["Linear","( value )"];case qe:return["sRGB","( value )"];case $e:return["RGBE","( value )"];case en:return["RGBM","( value, 7.0 )"];case nn:return["RGBM","( value, 16.0 )"];case rn:return["RGBD","( value, 256.0 )"];case Ke:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case tn:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Oa(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(t){const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(t.getShaderSource(e))}function Fa(t,e){const n=Na(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ga(t){return""!==t}function za(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ua(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Ha=/^[ \t]*#include +<([\w\d./]+)>/gm;function Va(t){return t.replace(Ha,Wa)}function Wa(t,e){const n=Bo[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Va(n)}const Za=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ja=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ya(t){return t.replace(ja,Ja).replace(Za,Xa)}function Xa(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ja(t,e,n,i)}function Ja(t,e,n,i){let r="";for(let t=parseInt(e);t<parseInt(n);t++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function Qa(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function qa(t,e,n,i){const r=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===h?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===f?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===d&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ot:case at:e="ENVMAP_TYPE_CUBE";break;case ct:case ut:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case at:case ut:e="ENVMAP_MODE_REFRACTION"}return e}(n),p=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case J:e="ENVMAP_BLENDING_MULTIPLY";break;case Q:e="ENVMAP_BLENDING_MIX";break;case q:e="ENVMAP_BLENDING_ADD"}return e}(n),m=t.gammaFactor>0?t.gammaFactor:1,g=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ga).join("\n")}(n),y=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(o),v=r.createProgram();let b,_,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((b=[y].filter(Ga).join("\n")).length>0&&(b+="\n"),(_=[g,y].filter(Ga).join("\n")).length>0&&(_+="\n")):(b=[Qa(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ga).join("\n"),_=[g,Qa(n),"#define SHADER_NAME "+n.shaderName,y,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==K?"#define TONE_MAPPING":"",n.toneMapping!==K?Bo.tonemapping_pars_fragment:"",n.toneMapping!==K?function(t,e){let n;switch(e){case $:n="Linear";break;case tt:n="Reinhard";break;case et:n="OptimizedCineon";break;case nt:n="ACESFilmic";break;case it:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Bo.encodings_pars_fragment,n.map?Fa("mapTexelToLinear",n.mapEncoding):"",n.matcap?Fa("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Fa("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Fa("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Fa("lightMapTexelToLinear",n.lightMapEncoding):"",function(t,e){const n=Na(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ga).join("\n")),a=Ua(a=za(a=Va(a),n),n),s=Ua(s=za(s=Va(s),n),n),a=Ya(a),s=Ya(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",b=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,_=["#define varying in",n.glslVersion===Dn?"":"out highp vec4 pc_fragColor;",n.glslVersion===Dn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const A=w+_+s,x=La(r,35633,w+b+a),S=La(r,35632,A);if(r.attachShader(v,x),r.attachShader(v,S),void 0!==n.index0AttributeName?r.bindAttribLocation(v,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),t.debug.checkShaderErrors){const t=r.getProgramInfoLog(v).trim(),e=r.getShaderInfoLog(x).trim(),n=r.getShaderInfoLog(S).trim();let i=!0,o=!0;if(!1===r.getProgramParameter(v,35714)){i=!1;const e=Oa(r,x,"vertex"),n=Oa(r,S,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(v,35715),"gl.getProgramInfoLog",t,e,n)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:e,prefix:b},fragmentShader:{log:n,prefix:_}})}let M,E;return r.deleteShader(x),r.deleteShader(S),this.getUniforms=function(){return void 0===M&&(M=new Pa(r,v)),M},this.getAttributes=function(){return void 0===E&&(E=function(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r).name;n[i]=t.getAttribLocation(e,i)}return n}(r,v)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=Da++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=x,this.fragmentShader=S,this}function Ka(t,e,n,i,r,o){const a=[],s=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,u=i.maxVertexUniforms,h=i.vertexTextures;let f=i.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function y(t){let e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=Qe,e}return{getParameters:function(r,a,p,v,b){const _=v.fog,w=r.isMeshStandardMaterial?v.environment:null,A=e.get(r.envMap||w),x=d[r.type],S=b.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(c)return 1024;{const t=u,n=Math.floor((t-20)/4),i=Math.min(n,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}}(b):0;let M,E;if(null!==r.precision&&(f=i.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",f,"instead."),x){const t=Po[x];M=t.vertexShader,E=t.fragmentShader}else M=r.vertexShader,E=r.fragmentShader;const T=t.getRenderTarget();return{isWebGL2:s,shaderID:x,shaderName:r.type,vertexShader:M,fragmentShader:E,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:f,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:h,outputEncoding:null!==T?y(T.texture):t.outputEncoding,map:!!r.map,mapEncoding:y(r.map),matcap:!!r.matcap,matcapEncoding:y(r.matcap),envMap:!!A,envMapMode:A&&A.mapping,envMapEncoding:y(A),envMapCubeUV:!!A&&(A.mapping===ct||A.mapping===ut),lightMap:!!r.lightMap,lightMapEncoding:y(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:y(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===ln,tangentSpaceNormalMap:r.normalMapType===sn,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap||!r.displacementMap),fog:!!_,useFog:r.fog,fogExp2:_&&_.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:l,skinning:r.skinning&&S>0,maxBones:S,useVertexTexture:c,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&p.length>0,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:K,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===g,flipSided:r.side===m,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<p.length;t++)n.push(e[p[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=d[t.type];let n;if(e){const t=Po[e];n=fo.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,e=a.length;t<e;t++){const e=a[t];if(e.cacheKey===n){++(i=e).usedTimes;break}}return void 0===i&&(i=new qa(t,n,e,r),a.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){const e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},programs:a}}function $a(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ts(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function es(t){const e=[];let n=0;const i=[],r=[],o={id:-1};function a(i,r,a,s,l,c){let u=e[n];const h=t.get(a);return void 0===u?(u={id:i.id,object:i,geometry:r,material:a,program:h.program||o,groupOrder:s,renderOrder:i.renderOrder,z:l,group:c},e[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=a,u.program=h.program||o,u.groupOrder=s,u.renderOrder=i.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:i,transparent:r,init:function(){n=0,i.length=0,r.length=0},push:function(t,e,n,o,s,l){const c=a(t,e,n,o,s,l);(!0===n.transparent?r:i).push(c)},unshift:function(t,e,n,o,s,l){const c=a(t,e,n,o,s,l);(!0===n.transparent?r:i).unshift(c)},finish:function(){for(let t=n,i=e.length;t<i;t++){const n=e[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(t,e){i.length>1&&i.sort(t||$a),r.length>1&&r.sort(e||ts)}}}let ns=0;function is(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function rs(t,e){const n=new function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Qn,color:new yr};break;case"SpotLight":n={position:new Qn,direction:new Qn,color:new yr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Qn,color:new yr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Qn,skyColor:new yr,groundColor:new yr};break;case"RectAreaLight":n={color:new yr,position:new Qn,halfWidth:new Qn,halfHeight:new Qn}}return t[e.id]=n,n}}},i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zn,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)r.probe.push(new Qn);const o=new Qn,a=new Si,s=new Si;return{setup:function(l,c,u){let h=0,f=0,d=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let p=0,m=0,g=0,y=0,v=0,b=0,_=0,w=0;const A=u.matrixWorldInverse;l.sort(is);for(let t=0,e=l.length;t<e;t++){const e=l[t],c=e.color,u=e.intensity,x=e.distance,S=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)h+=c.r*u,f+=c.g*u,d+=c.b*u;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],u);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(A),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[p]=n,r.directionalShadowMap[p]=S,r.directionalShadowMatrix[p]=e.shadow.matrix,b++}r.directional[p]=t,p++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(A),t.color.copy(c).multiplyScalar(u),t.distance=x,t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(A),t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.spotShadow[g]=n,r.spotShadowMap[g]=S,r.spotShadowMatrix[g]=e.shadow.matrix,w++}r.spot[g]=t,g++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(c).multiplyScalar(u),t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(A),s.identity(),a.copy(e.matrixWorld),a.premultiply(A),s.extractRotation(a),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),r.rectArea[y]=t,y++}else if(e.isPointLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(A),t.color.copy(e.color).multiplyScalar(e.intensity),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[m]=n,r.pointShadowMap[m]=S,r.pointShadowMatrix[m]=e.shadow.matrix,_++}r.point[m]=t,m++}else if(e.isHemisphereLight){const t=n.get(e);t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(A),t.direction.normalize(),t.skyColor.copy(e.color).multiplyScalar(u),t.groundColor.copy(e.groundColor).multiplyScalar(u),r.hemi[v]=t,v++}}y>0&&(e.isWebGL2?(r.rectAreaLTC1=Ro.LTC_FLOAT_1,r.rectAreaLTC2=Ro.LTC_FLOAT_2):!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ro.LTC_FLOAT_1,r.rectAreaLTC2=Ro.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Ro.LTC_HALF_1,r.rectAreaLTC2=Ro.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=d;const x=r.hash;x.directionalLength===p&&x.pointLength===m&&x.spotLength===g&&x.rectAreaLength===y&&x.hemiLength===v&&x.numDirectionalShadows===b&&x.numPointShadows===_&&x.numSpotShadows===w||(r.directional.length=p,r.spot.length=g,r.rectArea.length=y,r.point.length=m,r.hemi.length=v,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=_,r.pointShadowMap.length=_,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=_,r.spotShadowMatrix.length=w,x.directionalLength=p,x.pointLength=m,x.spotLength=g,x.rectAreaLength=y,x.hemiLength=v,x.numDirectionalShadows=b,x.numPointShadows=_,x.numSpotShadows=w,r.version=ns++)},state:r}}function os(t,e){const n=new rs(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,r,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function as(t){_r.call(this),this.type="MeshDepthMaterial",this.depthPacking=on,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function ss(t){_r.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Qn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}as.prototype=Object.create(_r.prototype),as.prototype.constructor=as,as.prototype.isMeshDepthMaterial=!0,as.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},ss.prototype=Object.create(_r.prototype),ss.prototype.constructor=ss,ss.prototype.isMeshDistanceMaterial=!0,ss.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var ls="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",cs="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function us(t,e,n){let i=new To;const r=new zn,o=new zn,a=new jn,s=[],l=[],c={},u={0:m,1:p,2:g},f=new go({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new zn},radius:{value:4}},vertexShader:cs,fragmentShader:ls}),y=f.clone();y.defines.HORIZONAL_PASS=1;const v=new Hr;v.setAttribute("position",new Sr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new ao(v,f),w=this;function A(n,i){const r=e.update(_);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,f,_,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,y,_,null)}function x(t,e,n){const i=t<<0|e<<1|n<<2;let r=s[i];return void 0===r&&(r=new as({depthPacking:an,morphTargets:t,skinning:e}),s[i]=r),r}function S(t,e,n){const i=t<<0|e<<1|n<<2;let r=l[i];return void 0===r&&(r=new ss({morphTargets:t,skinning:e}),l[i]=r),r}function M(e,n,i,r,o,a,s){let l=null,h=x,f=e.customDepthMaterial;if(!0===r.isPointLight&&(h=S,f=e.customDistanceMaterial),void 0===f){let t=!1;!0===i.morphTargets&&(t=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let r=!1;!0===e.isSkinnedMesh&&(!0===i.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),l=h(t,r,!0===e.isInstancedMesh)}else l=f;if(t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){const t=l.uuid,e=i.uuid;let n=c[t];void 0===n&&(n={},c[t]=n);let r=n[e];void 0===r&&(r=l.clone(),n[e]=r),l=r}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=s===d?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=o,l.farDistance=a),l}function E(n,r,o,a,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===d)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],u=r[c.materialIndex];if(u&&u.visible){const e=M(n,i,u,a,o.near,o.far,s);t.renderBufferDirect(o,null,i,e,n,c)}}}else if(r.visible){const e=M(n,i,r,a,o.near,o.far,s);t.renderBufferDirect(o,null,i,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)E(l[t],r,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(e,s,l){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===e.length)return;const c=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),f=t.state;f.setBlending(b),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(let c=0,u=e.length;c<u;c++){const u=e[c],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;r.copy(h.mapSize);const p=h.getFrameExtents();if(r.multiply(p),o.copy(h.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(o.x=Math.floor(n/p.x),r.x=o.x*p.x,h.mapSize.x=o.x),r.y>n&&(o.y=Math.floor(n/p.y),r.y=o.y*p.y,h.mapSize.y=o.y)),null===h.map&&!h.isPointLightShadow&&this.type===d){const t={minFilter:bt,magFilter:bt,format:Ft};h.map=new Yn(r.x,r.y,t),h.map.texture.name=u.name+".shadowMap",h.mapPass=new Yn(r.x,r.y,t),h.camera.updateProjectionMatrix()}if(null===h.map){const t={minFilter:pt,magFilter:pt,format:Ft};h.map=new Yn(r.x,r.y,t),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();const m=h.getViewportCount();for(let t=0;t<m;t++){const e=h.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),f.viewport(a),h.updateMatrices(u,t),i=h.getFrustum(),E(s,l,h.camera,u,this.type)}h.isPointLightShadow||this.type!==d||A(h,l),h.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(c,u,h)}}function hs(t,e,n,i,r,o,a){const s=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,f=new WeakMap;let d,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function m(t,e){return p?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?Gn.floorPowerOfTwo:Math.floor,o=i(r*t.width),a=i(r*t.height);void 0===d&&(d=m(o,a));const s=n?m(o,a):d;return s.width=o,s.height=a,s.getContext("2d").drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function y(t){return Gn.isPowerOfTwo(t.width)&&Gn.isPowerOfTwo(t.height)}function v(t,e){return t.generateMipmaps&&e&&t.minFilter!==pt&&t.minFilter!==bt}function b(e,n,r,o){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function _(n,i,r){if(!1===s)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;return 6403===i&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),6407===i&&(5126===r&&(o=34837),5131===r&&(o=34843),5121===r&&(o=32849)),6408===i&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function w(t){return t===pt||t===mt||t===yt?9728:9729}function A(e){const n=e.target;n.removeEventListener("dispose",A),function(e){const n=i.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),i.remove(e)}(n),n.isVideoTexture&&f.delete(n),a.memory.textures--}function x(e){const n=e.target;n.removeEventListener("dispose",x),function(e){const n=i.get(e),r=i.get(e.texture);if(!e)return;void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(e.texture),i.remove(e)}(n),a.memory.textures--}let S=0;function M(t,e){const r=i.get(t);if(t.isVideoTexture&&function(t){const e=a.render.frame;f.get(t)!==e&&(f.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void B(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function E(e,r){const a=i.get(e);e.version>0&&a.__version!==e.version?function(e,i,r){if(6!==i.image.length)return;C(e,i),n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,i.flipY);const a=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),l=i.image[0]&&i.image[0].isDataTexture,u=[];for(let t=0;t<6;t++)u[t]=a||l?l?i.image[t].image:i.image[t]:g(i.image[t],!1,!0,c);const h=u[0],f=y(h)||s,d=o.convert(i.format),p=o.convert(i.type),m=_(i.internalFormat,d,p);let w;if(k(34067,i,f),a){for(let t=0;t<6;t++){w=u[t].mipmaps;for(let e=0;e<w.length;e++){const r=w[e];i.format!==Ft&&i.format!==Ot?null!==d?n.compressedTexImage2D(34069+t,e,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,e,m,r.width,r.height,0,d,p,r.data)}}e.__maxMipLevel=w.length-1}else{w=i.mipmaps;for(let t=0;t<6;t++)if(l){n.texImage2D(34069+t,0,m,u[t].width,u[t].height,0,d,p,u[t].data);for(let e=0;e<w.length;e++){const i=w[e],r=i.image[t].image;n.texImage2D(34069+t,e+1,m,r.width,r.height,0,d,p,r.data)}}else{n.texImage2D(34069+t,0,m,d,p,u[t]);for(let e=0;e<w.length;e++){const i=w[e];n.texImage2D(34069+t,e+1,m,d,p,i.image[t])}}e.__maxMipLevel=w.length}v(i,f)&&b(34067,i,h.width,h.height);e.__version=i.version,i.onUpdate&&i.onUpdate(i)}(a,e,r):(n.activeTexture(33984+r),n.bindTexture(34067,a.__webglTexture))}const T={[ht]:10497,[ft]:33071,[dt]:33648},I={[pt]:9728,[mt]:9984,[yt]:9986,[bt]:9729,[_t]:9985,[At]:9987};function k(n,o,a){a?(t.texParameteri(n,10242,T[o.wrapS]),t.texParameteri(n,10243,T[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,T[o.wrapR]),t.texParameteri(n,10240,I[o.magFilter]),t.texParameteri(n,10241,I[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===ft&&o.wrapT===ft||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,w(o.magFilter)),t.texParameteri(n,10241,w(o.minFilter)),o.minFilter!==pt&&o.minFilter!==bt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const l=e.get("EXT_texture_filter_anisotropic");if(l){if(o.type===Ct&&null===e.get("OES_texture_float_linear"))return;if(o.type===Bt&&null===(s||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function C(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",A),e.__webglTexture=t.createTexture(),a.memory.textures++)}function B(e,i,r){let a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),C(e,i),n.activeTexture(33984+r),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);const l=function(t){return!s&&(t.wrapS!==ft||t.wrapT!==ft||t.minFilter!==pt&&t.minFilter!==bt)}(i)&&!1===y(i.image),c=g(i.image,l,!1,u),h=y(c)||s,f=o.convert(i.format);let d,p=o.convert(i.type),m=_(i.internalFormat,f,p);k(a,i,h);const w=i.mipmaps;if(i.isDepthTexture)m=6402,s?m=i.type===Ct?36012:i.type===kt?33190:i.type===Dt?35056:33189:i.type===Ct&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Ht&&6402===m&&i.type!==Tt&&i.type!==kt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Tt,p=o.convert(i.type)),i.format===Vt&&6402===m&&(m=34041,i.type!==Dt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Dt,p=o.convert(i.type))),n.texImage2D(3553,0,m,c.width,c.height,0,f,p,null);else if(i.isDataTexture)if(w.length>0&&h){for(let t=0,e=w.length;t<e;t++)d=w[t],n.texImage2D(3553,t,m,d.width,d.height,0,f,p,d.data);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,f,p,c.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(let t=0,e=w.length;t<e;t++)d=w[t],i.format!==Ft&&i.format!==Ot?null!==f?n.compressedTexImage2D(3553,t,m,d.width,d.height,0,d.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,m,d.width,d.height,0,f,p,d.data);e.__maxMipLevel=w.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,f,p,c.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,f,p,c.data),e.__maxMipLevel=0;else if(w.length>0&&h){for(let t=0,e=w.length;t<e;t++)d=w[t],n.texImage2D(3553,t,m,f,p,d);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,m,f,p,c),e.__maxMipLevel=0;v(i,h)&&b(a,i,c.width,c.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function R(e,r,a,s){const l=o.convert(r.texture.format),c=o.convert(r.texture.type),u=_(r.texture.internalFormat,l,c);n.texImage2D(s,0,u,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function P(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Ct?r=36012:e.type===kt&&(r=33190));const i=D(n);t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const e=D(n);t.renderbufferStorageMultisample(36161,e,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=o.convert(n.texture.format),r=o.convert(n.texture.type),a=_(n.texture.internalFormat,e,r);if(i){const e=D(n);t.renderbufferStorageMultisample(36161,e,a,n.width,n.height)}else t.renderbufferStorage(36161,a,n.width,n.height)}t.bindRenderbuffer(36161,null)}function L(e){const n=i.get(e),r=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),M(n.depthTexture,0);const r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ht)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==Vt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)t.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=t.createRenderbuffer(),P(n.__webglDepthbuffer[i],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),P(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}function D(t){return s&&t.isWebGLMultisampleRenderTarget?Math.min(h,t.samples):0}let N=!1,O=!1;this.allocateTextureUnit=function(){const t=S;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),S+=1,t},this.resetTextureUnits=function(){S=0},this.setTexture2D=M,this.setTexture2DArray=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?B(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?B(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=E,this.setupRenderTarget=function(e){const r=i.get(e),l=i.get(e.texture);e.addEventListener("dispose",x),l.__webglTexture=t.createTexture(),a.memory.textures++;const c=!0===e.isWebGLCubeRenderTarget,u=!0===e.isWebGLMultisampleRenderTarget,h=y(e)||s;if(!s||e.texture.format!==Ot||e.texture.type!==Ct&&e.texture.type!==Bt||(e.texture.format=Ft,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){r.__webglFramebuffer=[];for(let e=0;e<6;e++)r.__webglFramebuffer[e]=t.createFramebuffer()}else if(r.__webglFramebuffer=t.createFramebuffer(),u)if(s){r.__webglMultisampledFramebuffer=t.createFramebuffer(),r.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,r.__webglColorRenderbuffer);const n=o.convert(e.texture.format),i=o.convert(e.texture.type),a=_(e.texture.internalFormat,n,i),s=D(e);t.renderbufferStorageMultisample(36161,s,a,e.width,e.height),t.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(r.__webglDepthRenderbuffer=t.createRenderbuffer(),P(r.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,l.__webglTexture),k(34067,e.texture,h);for(let t=0;t<6;t++)R(r.__webglFramebuffer[t],e,36064,34069+t);v(e.texture,h)&&b(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),k(3553,e.texture,h),R(r.__webglFramebuffer,e,36064,3553),v(e.texture,h)&&b(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&L(e)},this.updateRenderTargetMipmap=function(t){const e=t.texture;if(v(e,y(t)||s)){const r=t.isWebGLCubeRenderTarget?34067:3553,o=i.get(e).__webglTexture;n.bindTexture(r,o),b(r,e,t.width,t.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(s){const n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);const r=e.width,o=e.height;let a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===N&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),N=!0),t=t.texture),M(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),O=!0),t=t.texture),E(t,e)}}function fs(t,e,n){const i=n.isWebGL2;return{convert:function(t){let n;if(t===St)return 5121;if(t===Rt)return 32819;if(t===Pt)return 32820;if(t===Lt)return 33635;if(t===Mt)return 5120;if(t===Et)return 5122;if(t===Tt)return 5123;if(t===It)return 5124;if(t===kt)return 5125;if(t===Ct)return 5126;if(t===Bt)return i?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(t===Nt)return 6406;if(t===Ot)return 6407;if(t===Ft)return 6408;if(t===Gt)return 6409;if(t===zt)return 6410;if(t===Ht)return 6402;if(t===Vt)return 34041;if(t===Wt)return 6403;if(t===Zt)return 36244;if(t===jt)return 33319;if(t===Yt)return 33320;if(t===Xt)return 36248;if(t===Jt)return 36249;if(t===Qt||t===qt||t===Kt||t===$t){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(t===Qt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===qt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Kt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===$t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===te||t===ee||t===ne||t===ie){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(t===te)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ee)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ne)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ie)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===re)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===oe||t===ae)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(t===oe)return n.COMPRESSED_RGB8_ETC2;if(t===ae)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===se||t===le||t===ce||t===ue||t===he||t===fe||t===de||t===pe||t===me||t===ge||t===ye||t===ve||t===be||t===_e||t===Ae||t===xe||t===Se||t===Me||t===Ee||t===Te||t===Ie||t===ke||t===Ce||t===Be||t===Re||t===Pe||t===Le||t===De?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:t===we?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:t===Dt?i?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function ds(t){vo.call(this),this.cameras=t||[]}function ps(){Ji.call(this),this.type="Group"}function ms(){this._targetRay=null,this._grip=null,this._hand=null}function gs(t,e){const n=this;let i=null,r=1,o=null,a="local-floor",s=null;const l=[],c=new Map,u=new vo;u.layers.enable(1),u.viewport=new jn;const h=new vo;h.layers.enable(2),h.viewport=new jn;const f=[u,h],d=new ds;d.layers.enable(1),d.layers.enable(2);let p=null,m=null;function g(t){const e=c.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function y(){c.forEach(function(t,e){t.disconnect(e)}),c.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),S.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function v(t){o=t,S.setContext(i),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function b(t){const e=i.inputSources;for(let t=0;t<l.length;t++)c.set(e[t],l[t]);for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=c.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),c.delete(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e],i=c.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=l[t];return void 0===e&&(e=new ms,l[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=l[t];return void 0===e&&(e=new ms,l[t]=e),e.getGripSpace()},this.getHand=function(t){let e=l[t];return void 0===e&&(e=new ms,l[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return i},this.setSession=function(t){if(null!==(i=t)){i.addEventListener("select",g),i.addEventListener("selectstart",g),i.addEventListener("selectend",g),i.addEventListener("squeeze",g),i.addEventListener("squeezestart",g),i.addEventListener("squeezeend",g),i.addEventListener("end",y);const t=e.getContextAttributes();!0!==t.xrCompatible&&e.makeXRCompatible();const n={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:r},o=new XRWebGLLayer(i,e,n);i.updateRenderState({baseLayer:o}),i.requestReferenceSpace(a).then(v),i.addEventListener("inputsourceschange",b)}};const _=new Qn,w=new Qn;function A(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}this.getCamera=function(t){d.near=h.near=u.near=t.near,d.far=h.far=u.far=t.far,p===d.near&&m===d.far||(i.updateRenderState({depthNear:d.near,depthFar:d.far}),p=d.near,m=d.far);const e=t.parent,n=d.cameras;A(d,e);for(let t=0;t<n.length;t++)A(n[t],e);t.matrixWorld.copy(d.matrixWorld);const r=t.children;for(let t=0,e=r.length;t<e;t++)r[t].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){_.setFromMatrixPosition(e.matrixWorld),w.setFromMatrixPosition(n.matrixWorld);const i=_.distanceTo(w),r=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],f=a*u,d=a*h,p=i/(-u+h),m=p*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);const g=a+p,y=s+p,v=f-m,b=d+(i-m),A=l*s/y*g,x=c*s/y*g;t.projectionMatrix.makePerspective(v,b,A,x,g,y)}(d,u,h):d.projectionMatrix.copy(u.projectionMatrix),d};let x=null;const S=new Io;S.setAnimationLoop(function(e,n){if(null!==(s=n.getViewerPose(o))){const e=s.views,n=i.renderState.baseLayer;t.setFramebuffer(n.framebuffer);let r=!1;e.length!==d.cameras.length&&(d.cameras.length=0,r=!0);for(let t=0;t<e.length;t++){const i=e[t],o=n.getViewport(i),a=f[t];a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===t&&d.matrix.copy(a.matrix),!0===r&&d.cameras.push(a)}}const r=i.inputSources;for(let t=0;t<l.length;t++){const e=l[t],i=r[t];e.update(i,n,o)}x&&x(e,n)}),this.setAnimationLoop=function(t){x=t},this.dispose=function(){}}function ys(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);const i=t.get(n).envMap;if(i){e.envMap.value=i,e.flipEnvMap.value=i.isCubeTexture&&i._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;const r=t.get(i).__maxMipLevel;void 0!==r&&(e.maxMipLevel.value=r)}let r,o;n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),e.uv2Transform.value.copy(o.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===m&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===m&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,o){i.isMeshBasicMaterial?e(t,i):i.isMeshLambertMaterial?(e(t,i),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,i)):i.isMeshToonMaterial?(e(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshPhongMaterial?(e(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshStandardMaterial?(e(t,i),i.isMeshPhysicalMaterial?function(t,e){n(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===m&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,i):n(t,i)):i.isMeshMatcapMaterial?(e(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDepthMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDistanceMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?(e(t,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){let r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,o):i.isSpriteMaterial?function(t,e){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function vs(t){const e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,c=void 0!==t.antialias&&t.antialias,u=void 0===t.premultipliedAlpha||t.premultipliedAlpha,h=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,f=void 0!==t.powerPreference?t.powerPreference:"default",d=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let y=null,v=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Qe,this.physicallyCorrectLights=!1,this.toneMapping=K,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const J=this;let Q=!1,q=null,$=0,tt=0,et=null,nt=null,it=-1,rt=null,ut=null;const ht=new jn,ft=new jn;let dt=null,pt=e.width,mt=e.height,gt=1,yt=null,vt=null;const bt=new jn(0,0,pt,mt),_t=new jn(0,0,pt,mt);let wt=!1;const At=new To;let xt=!1,Mt=!1;const Et=new Si,Tt=new Qn,It={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function kt(){return null===et?gt:1}let Rt,Pt,Lt,Dt,Nt,Ot,Gt,zt,Ut,Ht,Vt,Wt,Zt,jt,Yt,Xt,Jt,Qt,qt,Kt,$t,te=n;function ee(t,n){for(let i=0;i<t.length;i++){const r=t[i],o=e.getContext(r,n);if(null!==o)return o}return null}try{const t={alpha:i,depth:r,stencil:o,antialias:c,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:d};if(e.addEventListener("webglcontextlost",oe,!1),e.addEventListener("webglcontextrestored",ae,!1),null===te){const e=["webgl2","webgl","experimental-webgl"];if(!0===J.isWebGL1Renderer&&e.shift(),null===(te=ee(e,t)))throw ee(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===te.getShaderPrecisionFormat&&(te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function ne(){Rt=new function(t){const e={};return{has:function(n){if(void 0!==e[n])return null!==e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,null!==i},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]}}}(te),!1===(Pt=new function(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),u=t.getParameter(35660),h=t.getParameter(3379),f=t.getParameter(34076),d=t.getParameter(34921),p=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),y=u>0,v=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==i)return i;const n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:v,floatVertexTextures:y&&v,maxSamples:o?t.getParameter(36183):0}}(te,Rt,t)).isWebGL2&&(Rt.get("WEBGL_depth_texture"),Rt.get("OES_texture_float"),Rt.get("OES_texture_half_float"),Rt.get("OES_texture_half_float_linear"),Rt.get("OES_standard_derivatives"),Rt.get("OES_element_index_uint"),Rt.get("OES_vertex_array_object"),Rt.get("ANGLE_instanced_arrays")),Rt.get("OES_texture_float_linear"),Kt=new fs(te,Rt,Pt),(Lt=new function(t,e,n){const i=n.isWebGL2,r=new function(){let e=!1;const n=new jn;let i=null;const r=new jn(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,a,s){!0===s&&(e*=a,i*=a,o*=a),n.set(e,i,o,a),!1===r.equals(n)&&(t.clearColor(e,i,o,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(t){t?pt(2929):mt(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case U:t.depthFunc(512);break;case H:t.depthFunc(519);break;case V:t.depthFunc(513);break;case W:t.depthFunc(515);break;case Z:t.depthFunc(514);break;case j:t.depthFunc(518);break;case Y:t.depthFunc(516);break;case X:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},c=new function(){let e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){e||(t?pt(2960):mt(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&o===a||(t.stencilFunc(e,n,a),i=e,r=n,o=a)},setOp:function(e,n,i){a===e&&s===n&&l===i||(t.stencilOp(e,n,i),a=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}};let u={},h=null,f=null,d=null,p=null,y=null,v=null,J=null,Q=null,q=null,K=!1,$=null,tt=null,et=null,nt=null,it=null;const rt=t.getParameter(35661);let ot=!1,at=0;const st=t.getParameter(7938);-1!==st.indexOf("WebGL")?(at=parseFloat(/^WebGL\ ([0-9])/.exec(st)[1]),ot=at>=1):-1!==st.indexOf("OpenGL ES")&&(at=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(st)[1]),ot=at>=2);let lt=null,ct={};const ut=new jn,ht=new jn;function ft(e,n,i){const r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<i;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,r);return o}const dt={};function pt(e){!0!==u[e]&&(t.enable(e),u[e]=!0)}function mt(e){!1!==u[e]&&(t.disable(e),u[e]=!1)}dt[3553]=ft(3553,3553,1),dt[34067]=ft(34067,34069,6),r.setClear(0,0,0,1),o.setClear(1),c.setClear(0),pt(2929),o.setFunc(W),bt(!1),_t(s),pt(2884),vt(b);const gt={[M]:32774,[E]:32778,[T]:32779};if(i)gt[I]=32775,gt[k]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(gt[I]=t.MIN_EXT,gt[k]=t.MAX_EXT)}const yt={[C]:0,[B]:1,[R]:768,[L]:770,[z]:776,[F]:774,[N]:772,[P]:769,[D]:771,[G]:775,[O]:773};function vt(e,n,i,r,o,a,s,l){if(e!==b){if(f||(pt(3042),f=!0),e===S)o=o||n,a=a||i,s=s||r,n===p&&o===J||(t.blendEquationSeparate(gt[n],gt[o]),p=n,J=o),i===y&&r===v&&a===Q&&s===q||(t.blendFuncSeparate(yt[i],yt[r],yt[a],yt[s]),y=i,v=r,Q=a,q=s),d=e,K=null;else if(e!==d||l!==K){if(p===M&&J===M||(t.blendEquation(32774),p=M,J=M),l)switch(e){case _:t.blendFuncSeparate(1,771,1,771);break;case w:t.blendFunc(1,1);break;case A:t.blendFuncSeparate(0,0,769,771);break;case x:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case _:t.blendFuncSeparate(770,771,1,771);break;case w:t.blendFunc(770,1);break;case A:t.blendFunc(0,769);break;case x:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}y=null,v=null,Q=null,q=null,d=e,K=l}}else f&&(mt(3042),f=!1)}function bt(e){$!==e&&(e?t.frontFace(2304):t.frontFace(2305),$=e)}function _t(e){e!==a?(pt(2884),e!==tt&&(e===s?t.cullFace(1029):e===l?t.cullFace(1028):t.cullFace(1032))):mt(2884),tt=e}function wt(e,n,i){e?(pt(32823),nt===n&&it===i||(t.polygonOffset(n,i),nt=n,it=i)):mt(32823)}function At(e){void 0===e&&(e=33984+rt-1),lt!==e&&(t.activeTexture(e),lt=e)}return{buffers:{color:r,depth:o,stencil:c},enable:pt,disable:mt,useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:vt,setMaterial:function(t,e){t.side===g?mt(2884):pt(2884);let n=t.side===m;e&&(n=!n),bt(n),t.blending===_&&!1===t.transparent?vt(b):vt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),r.setMask(t.colorWrite);const i=t.stencilWrite;c.setTest(i),i&&(c.setMask(t.stencilWriteMask),c.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),c.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),wt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:bt,setCullFace:_t,setLineWidth:function(e){e!==et&&(ot&&t.lineWidth(e),et=e)},setPolygonOffset:wt,setScissorTest:function(t){t?pt(3089):mt(3089)},activeTexture:At,bindTexture:function(e,n){null===lt&&At();let i=ct[lt];void 0===i&&(i={type:void 0,texture:void 0},ct[lt]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||dt[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=ct[lt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===ut.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ut.copy(e))},viewport:function(e){!1===ht.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),ht.copy(e))},reset:function(){u={},lt=null,ct={},h=null,d=null,$=null,tt=null,r.reset(),o.reset(),c.reset()}}}(te,Rt,Pt)).scissor(ft.copy(_t).multiplyScalar(gt).floor()),Lt.viewport(ht.copy(bt).multiplyScalar(gt).floor()),Dt=new function(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}(te),Nt=new function(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}},Ot=new hs(te,Rt,Lt,Nt,Pt,Kt,Dt),Gt=new function(t){let e=new WeakMap;function n(t,e){return e===st?t.mapping=ot:e===lt&&(t.mapping=at),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping;if(o===st||o===lt){if(e.has(r))return n(e.get(r).texture,r.mapping);{const o=r.image;if(o&&o.height>0){const a=t.getRenderList(),s=t.getRenderTarget(),l=t.getRenderState(),c=new xo(o.height/2);return c.fromEquirectangularTexture(t,r),e.set(r,c),t.setRenderTarget(s),t.setRenderList(a),t.setRenderState(l),r.addEventListener("dispose",i),n(c.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}(J),zt=new ko(te,Pt),$t=new Lo(te,Rt,zt,Pt),Ut=new function(t,e,n,i){const r=new WeakMap,o=new WeakMap;function a(t){const s=t.target,l=r.get(s);null!==l.index&&e.remove(l.index);for(const t in l.attributes)e.remove(l.attributes[t]);s.removeEventListener("dispose",a),r.delete(s);const c=o.get(l);c&&(e.remove(c),o.delete(l)),i.releaseStatesOfGeometry(l),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],i=t.index,r=t.attributes.position;let a=0;if(null!==i){const t=i.array;a=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],o=t[e+2];n.push(i,r,r,o,o,i)}}else{const t=r.array;a=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const s=new(Lr(n)>65535?Br:kr)(n,1);s.version=a;const l=o.get(t);l&&e.remove(l),o.set(t,s)}return{get:function(t,e){let i=r.get(e);return i||(e.addEventListener("dispose",a),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Hr).setFromObject(t)),i=e._bufferGeometry),r.set(e,i),n.memory.geometries++,i)},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const i=t.morphAttributes;for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}(te,zt,Dt,$t),Ht=new function(t,e,n,i){let r=new WeakMap;return{update:function(t){const o=i.render.frame,a=t.geometry,s=e.get(t,a);return r.get(s)!==o&&(a.isGeometry&&s.updateFromObject(t),e.update(s),r.set(s,o)),t.isInstancedMesh&&(n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),s},dispose:function(){r=new WeakMap}}}(te,Ut,zt,Dt),Jt=new function(t){const e={},n=new Float32Array(8),i=[];for(let t=0;t<8;t++)i[t]=[t,0];return{update:function(r,o,a,s){const l=r.morphTargetInfluences,c=void 0===l?0:l.length;let u=e[o.id];if(void 0===u){u=[];for(let t=0;t<c;t++)u[t]=[t,0];e[o.id]=u}for(let t=0;t<c;t++){const e=u[t];e[0]=t,e[1]=l[t]}u.sort(No);for(let t=0;t<8;t++)t<c&&u[t][1]?(i[t][0]=u[t][0],i[t][1]=u[t][1]):(i[t][0]=Number.MAX_SAFE_INTEGER,i[t][1]=0);i.sort(Do);const h=a.morphTargets&&o.morphAttributes.position,f=a.morphNormals&&o.morphAttributes.normal;let d=0;for(let t=0;t<8;t++){const e=i[t],r=e[0],a=e[1];r!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+t)!==h[r]&&o.setAttribute("morphTarget"+t,h[r]),f&&o.getAttribute("morphNormal"+t)!==f[r]&&o.setAttribute("morphNormal"+t,f[r]),n[t]=a,d+=a):(h&&void 0!==o.getAttribute("morphTarget"+t)&&o.deleteAttribute("morphTarget"+t),f&&void 0!==o.getAttribute("morphNormal"+t)&&o.deleteAttribute("morphNormal"+t),n[t]=0)}const p=o.morphTargetsRelative?1:1-d;s.getUniforms().setValue(t,"morphTargetBaseInfluence",p),s.getUniforms().setValue(t,"morphTargetInfluences",n)}}}(te),Yt=new function(t){const e=this;let n=null,i=0,r=!1,o=!1;const a=new $i,s=new Un,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(t,n,i,r){const o=null!==t?t.length:0;let c=null;if(0!==o){if(c=l.value,!0!==r||null===c){const e=i+4*o,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let e=0,n=i;e!==o;++e,n+=4)a.copy(t[e]).applyMatrix4(r,s),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){const a=0!==t.length||e||0!==i||r;return r=e,n=u(t,o,0),i=t.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(e,a,s){const h=e.clippingPlanes,f=e.clipIntersection,d=e.clipShadows,p=t.get(e);if(!r||null===h||0===h.length||o&&!d)o?u(null):c();else{const t=o?0:i,e=4*t;let r=p.clippingState||null;l.value=r,r=u(h,a,e,s);for(let t=0;t!==e;++t)r[t]=n[t];p.clippingState=r,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=t}}}(Nt),Vt=new Ka(J,Gt,Rt,Pt,$t,Yt),Wt=new ys(Nt),Zt=new function(t){let e=new WeakMap;return{get:function(n,i){const r=e.get(n);let o;return void 0===r?(o=new es(t),e.set(n,new WeakMap),e.get(n).set(i,o)):void 0===(o=r.get(i))&&(o=new es(t),r.set(i,o)),o},dispose:function(){e=new WeakMap}}}(Nt),jt=new function(t,e){let n=new WeakMap;return{get:function(i,r){let o;return!1===n.has(i)?(o=new os(t,e),n.set(i,new WeakMap),n.get(i).set(r,o)):!1===n.get(i).has(r)?(o=new os(t,e),n.get(i).set(r,o)):o=n.get(i).get(r),o},dispose:function(){n=new WeakMap}}}(Rt,Pt),Xt=new function(t,e,n,i,r){const o=new yr(0);let a,s,l=0,c=null,u=0,h=null;function f(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return o},setClearColor:function(t,e){o.set(t),f(o,l=void 0!==e?e:1)},getClearAlpha:function(){return l},setClearAlpha:function(t){f(o,l=t)},render:function(n,r,d,g){let y=!0===r.isScene?r.background:null;y&&y.isTexture&&(y=e.get(y));const v=t.xr,b=v.getSession&&v.getSession();b&&"additive"===b.environmentBlendMode&&(y=null),null===y?f(o,l):y&&y.isColor&&(f(y,1),g=!0),(t.autoClear||g)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),y&&(y.isCubeTexture||y.isWebGLCubeRenderTarget||y.mapping===ct)?(void 0===s&&((s=new ao(new co(1,1,1),new go({name:"BackgroundCubeMaterial",uniforms:uo(Po.cube.uniforms),vertexShader:Po.cube.vertexShader,fragmentShader:Po.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(s)),y.isWebGLCubeRenderTarget&&(y=y.texture),s.material.uniforms.envMap.value=y,s.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y._needsFlipEnvMap?-1:1,c===y&&u===y.version&&h===t.toneMapping||(s.material.needsUpdate=!0,c=y,u=y.version,h=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):y&&y.isTexture&&(void 0===a&&((a=new ao(new Co(2,2),new go({name:"BackgroundMaterial",uniforms:uo(Po.background.uniforms),vertexShader:Po.background.vertexShader,fragmentShader:Po.background.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=y,!0===y.matrixAutoUpdate&&y.updateMatrix(),a.material.uniforms.uvTransform.value.copy(y.matrix),c===y&&u===y.version&&h===t.toneMapping||(a.material.needsUpdate=!0,c=y,u=y.version,h=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}(J,Gt,Lt,Ht,u),Qt=new function(t,e,n,i){const r=i.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,i){t.drawArrays(o,e,i),n.update(i,o,1)},this.renderInstances=function(i,a,s){if(0===s)return;let l,c;if(r)l=t,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,i,a,s),n.update(a,o,s)}}(te,Rt,Dt,Pt),qt=new function(t,e,n,i){const r=i.isWebGL2;let o,a,s;this.setMode=function(t){o=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,i){t.drawElements(o,i,a,e*s),n.update(i,o,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,h;if(r)u=t,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,a,i*s,c),n.update(l,o,c)}}(te,Rt,Dt,Pt),Dt.programs=Vt.programs,J.capabilities=Pt,J.extensions=Rt,J.properties=Nt,J.renderLists=Zt,J.state=Lt,J.info=Dt}ne();const ie=new gs(J,te);this.xr=ie;const re=new us(J,Ht,Pt.maxTextureSize);function oe(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Q=!0}function ae(){console.log("THREE.WebGLRenderer: Context Restored."),Q=!1,ne()}function se(t){const e=t.target;e.removeEventListener("dispose",se),function(t){le(t),Nt.remove(t)}(e)}function le(t){const e=Nt.get(t).program;void 0!==e&&Vt.releaseProgram(e)}this.shadowMap=re,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const t=Rt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Rt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return gt},this.setPixelRatio=function(t){void 0!==t&&(gt=t,this.setSize(pt,mt,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new zn),t.set(pt,mt)},this.setSize=function(t,n,i){ie.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(pt=t,mt=n,e.width=Math.floor(t*gt),e.height=Math.floor(n*gt),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new zn),t.set(pt*gt,mt*gt).floor()},this.setDrawingBufferSize=function(t,n,i){pt=t,mt=n,gt=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new jn),t.copy(ht)},this.getViewport=function(t){return t.copy(bt)},this.setViewport=function(t,e,n,i){t.isVector4?bt.set(t.x,t.y,t.z,t.w):bt.set(t,e,n,i),Lt.viewport(ht.copy(bt).multiplyScalar(gt).floor())},this.getScissor=function(t){return t.copy(_t)},this.setScissor=function(t,e,n,i){t.isVector4?_t.set(t.x,t.y,t.z,t.w):_t.set(t,e,n,i),Lt.scissor(ft.copy(_t).multiplyScalar(gt).floor())},this.getScissorTest=function(){return wt},this.setScissorTest=function(t){Lt.setScissorTest(wt=t)},this.setOpaqueSort=function(t){yt=t},this.setTransparentSort=function(t){vt=t},this.getClearColor=function(){return Xt.getClearColor()},this.setClearColor=function(){Xt.setClearColor.apply(Xt,arguments)},this.getClearAlpha=function(){return Xt.getClearAlpha()},this.setClearAlpha=function(){Xt.setClearAlpha.apply(Xt,arguments)},this.clear=function(t,e,n){let i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),te.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",oe,!1),e.removeEventListener("webglcontextrestored",ae,!1),Zt.dispose(),jt.dispose(),Nt.dispose(),Gt.dispose(),Ht.dispose(),$t.dispose(),ie.dispose(),ue.stop()},this.renderBufferImmediate=function(t,e){$t.initAttributes();const n=Nt.get(t);t.hasPositions&&!n.position&&(n.position=te.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=te.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=te.createBuffer()),t.hasColors&&!n.color&&(n.color=te.createBuffer());const i=e.getAttributes();t.hasPositions&&(te.bindBuffer(34962,n.position),te.bufferData(34962,t.positionArray,35048),$t.enableAttribute(i.position),te.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(te.bindBuffer(34962,n.normal),te.bufferData(34962,t.normalArray,35048),$t.enableAttribute(i.normal),te.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(te.bindBuffer(34962,n.uv),te.bufferData(34962,t.uvArray,35048),$t.enableAttribute(i.uv),te.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(te.bindBuffer(34962,n.color),te.bufferData(34962,t.colorArray,35048),$t.enableAttribute(i.color),te.vertexAttribPointer(i.color,3,5126,!1,0,0)),$t.disableUnusedAttributes(),te.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,o){null===e&&(e=It);const a=r.isMesh&&r.matrixWorld.determinant()<0,s=pe(t,e,i,r);Lt.setMaterial(i,a);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===i.wireframe&&(l=Ut.getWireframeAttribute(n),h=2),(i.morphTargets||i.morphNormals)&&Jt.update(r,n,i,s),$t.setup(r,i,s,n,l);let f=Qt;null!==l&&(u=zt.get(l),(f=qt).setIndex(u));const d=null!==l?l.count:c.count,p=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,y=null!==o?o.count*h:1/0,v=Math.max(p,g),b=Math.min(d,p+m,g+y)-1,_=Math.max(0,b-v+1);if(0!==_){if(r.isMesh)!0===i.wireframe?(Lt.setLineWidth(i.wireframeLinewidth*kt()),f.setMode(1)):f.setMode(4);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),Lt.setLineWidth(t*kt()),r.isLineSegments?f.setMode(1):r.isLineLoop?f.setMode(2):f.setMode(3)}else r.isPoints?f.setMode(0):r.isSprite&&f.setMode(4);if(r.isInstancedMesh)f.renderInstances(v,_,r.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(v,_,t)}else f.render(v,_)}},this.compile=function(t,e){(v=jt.get(t,e)).init(),t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(v.pushLight(t),t.castShadow&&v.pushShadow(t))}),v.setupLights(e);const n=new WeakMap;t.traverse(function(e){const i=e.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];!1===n.has(o)&&(de(o,t,e),n.set(o))}else!1===n.has(i)&&(de(i,t,e),n.set(i))})};let ce=null;const ue=new Io;function he(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,o=t.length;r<o;r++){const o=t[r],a=o.object,s=o.geometry,l=null===i?o.material:i,c=o.group;if(n.isArrayCamera){ut=n;const t=n.cameras;for(let n=0,i=t.length;n<i;n++){const i=t[n];a.layers.test(i.layers)&&(Lt.viewport(ht.copy(i.viewport)),v.setupLights(i),fe(a,e,i,s,l,c))}}else ut=null,fe(a,e,n,s,l,c)}}function fe(t,e,n,i,r,o){if(t.onBeforeRender(J,e,n,i,r,o),v=jt.get(e,ut||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const i=pe(n,e,r,t);Lt.setMaterial(r),$t.reset(),function(t,e){t.render(function(t){J.renderBufferImmediate(t,e)})}(t,i)}else J.renderBufferDirect(n,e,i,r,t,o);t.onAfterRender(J,e,n,i,r,o),v=jt.get(e,ut||n)}function de(t,e,n){!0!==e.isScene&&(e=It);const i=Nt.get(t),r=v.state.lights,o=v.state.shadowsArray,a=r.state.version,s=Vt.getParameters(t,r.state,o,e,n),l=Vt.getProgramCacheKey(s);let c=i.program,u=!0;if(void 0===c)t.addEventListener("dispose",se);else if(c.cacheKey!==l)le(t);else if(i.lightsStateVersion!==a)u=!1;else{if(void 0!==s.shaderID){const n=t.isMeshStandardMaterial?e.environment:null;return void(i.envMap=Gt.get(t.envMap||n))}u=!1}u&&(s.uniforms=Vt.getUniforms(t),t.onBeforeCompile(s,J),c=Vt.acquireProgram(s,l),i.program=c,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);const h=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=Yt.numPlanes,i.numIntersection=Yt.numIntersection,h.clippingPlanes=Yt.uniform),i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=Gt.get(t.envMap||i.environment),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=a,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotShadowMatrix.value=r.state.spotShadowMatrix,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const f=i.program.getUniforms(),d=Pa.seqWithValue(f.seq,h);i.uniformsList=d}function pe(t,e,n,i){!0!==e.isScene&&(e=It),Ot.resetTextureUnits();const r=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===et?J.outputEncoding:et.texture.encoding,s=Gt.get(n.envMap||o),l=Nt.get(n),c=v.state.lights;if(!0===xt&&(!0===Mt||t!==rt)){const e=t===rt&&n.id===it;Yt.setState(n,t,e)}n.version===l.__version?n.fog&&l.fog!==r?de(n,e,i):l.environment!==o?de(n,e,i):l.needsLights&&l.lightsStateVersion!==c.state.version?de(n,e,i):void 0===l.numClippingPlanes||l.numClippingPlanes===Yt.numPlanes&&l.numIntersection===Yt.numIntersection?l.outputEncoding!==a?de(n,e,i):l.envMap!==s&&de(n,e,i):de(n,e,i):(de(n,e,i),l.__version=n.version);let u=!1,h=!1,f=!1;const d=l.program,p=d.getUniforms(),m=l.uniforms;if(Lt.useProgram(d.program)&&(u=!0,h=!0,f=!0),n.id!==it&&(it=n.id,h=!0),u||rt!==t){if(p.setValue(te,"projectionMatrix",t.projectionMatrix),Pt.logarithmicDepthBuffer&&p.setValue(te,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),rt!==t&&(rt=t,h=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=p.map.cameraPosition;void 0!==e&&e.setValue(te,Tt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&p.setValue(te,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&p.setValue(te,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){p.setOptional(te,i,"bindMatrix"),p.setOptional(te,i,"bindMatrixInverse");const t=i.skeleton;if(t){const e=t.bones;if(Pt.floatVertexTextures){if(void 0===t.boneTexture){let n=Math.sqrt(4*e.length);n=Gn.ceilPowerOfTwo(n),n=Math.max(n,4);const i=new Float32Array(n*n*4);i.set(t.boneMatrices);const r=new So(i,n,n,Ft,Ct);t.boneMatrices=i,t.boneTexture=r,t.boneTextureSize=n}p.setValue(te,"boneTexture",t.boneTexture,Ot),p.setValue(te,"boneTextureSize",t.boneTextureSize)}else p.setOptional(te,t,"boneMatrices")}}return(h||l.receiveShadow!==i.receiveShadow)&&(l.receiveShadow=i.receiveShadow,p.setValue(te,"receiveShadow",i.receiveShadow)),h&&(p.setValue(te,"toneMappingExposure",J.toneMappingExposure),l.needsLights&&function(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}(m,f),r&&n.fog&&Wt.refreshFogUniforms(m,r),Wt.refreshMaterialUniforms(m,n,gt,mt),Pa.upload(te,l.uniformsList,m,Ot)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Pa.upload(te,l.uniformsList,m,Ot),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&p.setValue(te,"center",i.center),p.setValue(te,"modelViewMatrix",i.modelViewMatrix),p.setValue(te,"normalMatrix",i.normalMatrix),p.setValue(te,"modelMatrix",i.matrixWorld),d}ue.setAnimationLoop(function(t){ie.isPresenting||ce&&ce(t)}),"undefined"!=typeof window&&ue.setContext(window),this.setAnimationLoop=function(t){ce=t,ie.setAnimationLoop(t),null===t?ue.stop():ue.start()},this.render=function(t,e){let n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===Q)return;$t.resetDefaultState(),it=-1,rt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===ie.enabled&&!0===ie.isPresenting&&(e=ie.getCamera(e)),!0===t.isScene&&t.onBeforeRender(J,t,e,n||et),(v=jt.get(t,e)).init(),Et.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),At.setFromProjectionMatrix(Et),Mt=this.localClippingEnabled,xt=Yt.init(this.clippingPlanes,Mt,e),(y=Zt.get(t,e)).init(),function t(e,n,i,r){if(!1===e.visible)return;const o=e.layers.test(n.layers);if(o)if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)v.pushLight(e),e.castShadow&&v.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||At.intersectsSprite(e)){r&&Tt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Et);const t=Ht.update(e),n=e.material;n.visible&&y.push(e,t,n,i,Tt.z,null)}}else if(e.isImmediateRenderObject)r&&Tt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Et),y.push(e,null,e.material,i,Tt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Dt.render.frame&&(e.skeleton.update(),e.skeleton.frame=Dt.render.frame),!e.frustumCulled||At.intersectsObject(e))){r&&Tt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Et);const t=Ht.update(e),n=e.material;if(Array.isArray(n)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=n[a.materialIndex];s&&s.visible&&y.push(e,t,s,i,Tt.z,a)}}else n.visible&&y.push(e,t,n,i,Tt.z,null)}const a=e.children;for(let e=0,o=a.length;e<o;e++)t(a[e],n,i,r)}(t,e,0,J.sortObjects),y.finish(),!0===J.sortObjects&&y.sort(yt,vt),!0===xt&&Yt.beginShadows();const r=v.state.shadowsArray;re.render(r,t,e),v.setupLights(e),!0===xt&&Yt.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),Xt.render(y,t,e,i);const o=y.opaque,a=y.transparent;o.length>0&&he(o,t,e),a.length>0&&he(a,t,e),!0===t.isScene&&t.onAfterRender(J,t,e),null!==et&&(Ot.updateRenderTargetMipmap(et),Ot.updateMultisampleRenderTarget(et)),Lt.buffers.depth.setTest(!0),Lt.buffers.depth.setMask(!0),Lt.buffers.color.setMask(!0),Lt.setPolygonOffset(!1),y=null,v=null},this.setFramebuffer=function(t){q!==t&&null===et&&te.bindFramebuffer(36160,t),q=t},this.getActiveCubeFace=function(){return $},this.getActiveMipmapLevel=function(){return tt},this.getRenderList=function(){return y},this.setRenderList=function(t){y=t},this.getRenderState=function(){return v},this.setRenderState=function(t){v=t},this.getRenderTarget=function(){return et},this.setRenderTarget=function(t,e=0,n=0){et=t,$=e,tt=n,t&&void 0===Nt.get(t).__webglFramebuffer&&Ot.setupRenderTarget(t);let i=q,r=!1;if(t){const n=Nt.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=n[e],r=!0):i=t.isWebGLMultisampleRenderTarget?Nt.get(t).__webglMultisampledFramebuffer:n,ht.copy(t.viewport),ft.copy(t.scissor),dt=t.scissorTest}else ht.copy(bt).multiplyScalar(gt).floor(),ft.copy(_t).multiplyScalar(gt).floor(),dt=wt;if(nt!==i&&(te.bindFramebuffer(36160,i),nt=i),Lt.viewport(ht),Lt.scissor(ft),Lt.setScissorTest(dt),r){const i=Nt.get(t.texture);te.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,n)}},this.readRenderTargetPixels=function(t,e,n,i,r,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Nt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){let a=!1;s!==nt&&(te.bindFramebuffer(36160,s),a=!0);try{const s=t.texture,l=s.format,c=s.type;if(l!==Ft&&Kt.convert(l)!==te.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===St||Kt.convert(c)===te.getParameter(35738)||c===Ct&&(Pt.isWebGL2||Rt.get("OES_texture_float")||Rt.get("WEBGL_color_buffer_float"))||c===Bt&&(Pt.isWebGL2?Rt.get("EXT_color_buffer_float"):Rt.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===te.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&te.readPixels(e,n,i,r,Kt.convert(l),Kt.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&te.bindFramebuffer(36160,nt)}}},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i),a=Kt.convert(e.format);Ot.setTexture2D(e,0),te.copyTexImage2D(3553,n,a,t.x,t.y,r,o,0),Lt.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i){void 0===i&&(i=0);const r=e.image.width,o=e.image.height,a=Kt.convert(n.format),s=Kt.convert(n.type);Ot.setTexture2D(n,0),te.pixelStorei(37440,n.flipY),te.pixelStorei(37441,n.premultiplyAlpha),te.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?te.texSubImage2D(3553,i,t.x,t.y,r,o,a,s,e.image.data):e.isCompressedTexture?te.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):te.texSubImage2D(3553,i,t.x,t.y,a,s,e.image),0===i&&n.generateMipmaps&&te.generateMipmap(3553),Lt.unbindTexture()},this.initTexture=function(t){Ot.setTexture2D(t,0),Lt.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function bs(t){vs.call(this,t)}ds.prototype=Object.assign(Object.create(vo.prototype),{constructor:ds,isArrayCamera:!0}),ps.prototype=Object.assign(Object.create(Ji.prototype),{constructor:ps,isGroup:!0}),Object.assign(ms.prototype,{constructor:ms,getHandSpace:function(){if(null===this._hand&&(this._hand=new ps,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){const t=new ps;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new ps,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new ps,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){let i=null,r=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(t)if(l&&t.hand){o=!0;for(let i=0;i<=window.XRHand.LITTLE_PHALANX_TIP;i++)if(t.hand[i]){const r=e.getJointPose(t.hand[i],n),o=l.joints[i];null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.jointRadius=r.radius),o.visible=null!==r;const a=l.joints[window.XRHand.INDEX_PHALANX_TIP],s=l.joints[window.XRHand.THUMB_PHALANX_TIP],c=a.position.distanceTo(s.position),u=.02,h=.005;l.inputState.pinching&&c>u+h?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&c<=u-h&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else null!==a&&null!==(i=e.getPose(t.targetRaySpace,n))&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)),null!==s&&t.gripSpace&&null!==(r=e.getPose(t.gripSpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale));return null!==a&&(a.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==o),this}}),Object.assign(gs.prototype,Nn.prototype),bs.prototype=Object.assign(Object.create(vs.prototype),{constructor:bs,isWebGL1Renderer:!0});class _s{constructor(t,e){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new yr(t),this.density=void 0!==e?e:25e-5}clone(){return new _s(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class ws{constructor(t,e,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new yr(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}clone(){return new ws(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class As extends Ji{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}function xs(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Mn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Gn.generateUUID()}Object.defineProperty(xs.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(xs.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Gn.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new xs(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);return e.setUsage(this.usage),e},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Gn.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Ss=new Qn;function Ms(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function Es(t){_r.call(this),this.type="SpriteMaterial",this.color=new yr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}let Ts;Object.defineProperties(Ms.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(Ms.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,n=this.data.count;e<n;e++)Ss.x=this.getX(e),Ss.y=this.getY(e),Ss.z=this.getZ(e),Ss.applyMatrix4(t),this.setXYZ(e,Ss.x,Ss.y,Ss.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this},clone:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Sr(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Ms(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Es.prototype=Object.create(_r.prototype),Es.prototype.constructor=Es,Es.prototype.isSpriteMaterial=!0,Es.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};const Is=new Qn,ks=new Qn,Cs=new Qn,Bs=new zn,Rs=new zn,Ps=new Si,Ls=new Qn,Ds=new Qn,Ns=new Qn,Os=new zn,Fs=new zn,Gs=new zn;function zs(t){if(Ji.call(this),this.type="Sprite",void 0===Ts){Ts=new Hr;const t=new xs(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ts.setIndex([0,1,2,0,2,3]),Ts.setAttribute("position",new Ms(t,3,0,!1)),Ts.setAttribute("uv",new Ms(t,2,3,!1))}this.geometry=Ts,this.material=void 0!==t?t:new Es,this.center=new zn(.5,.5)}function Us(t,e,n,i,r,o){Bs.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Rs.x=o*Bs.x-r*Bs.y,Rs.y=r*Bs.x+o*Bs.y):Rs.copy(Bs),t.copy(e),t.x+=Rs.x,t.y+=Rs.y,t.applyMatrix4(Ps)}zs.prototype=Object.assign(Object.create(Ji.prototype),{constructor:zs,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ks.setFromMatrixScale(this.matrixWorld),Ps.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Cs.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ks.multiplyScalar(-Cs.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;Us(Ls.set(-.5,-.5,0),Cs,o,ks,i,r),Us(Ds.set(.5,-.5,0),Cs,o,ks,i,r),Us(Ns.set(.5,.5,0),Cs,o,ks,i,r),Os.set(0,0),Fs.set(1,0),Gs.set(1,1);let a=t.ray.intersectTriangle(Ls,Ds,Ns,!1,Is);if(null===a&&(Us(Ds.set(-.5,.5,0),Cs,o,ks,i,r),Fs.set(0,1),null===(a=t.ray.intersectTriangle(Ls,Ns,Ds,!1,Is))))return;const s=t.ray.origin.distanceTo(Is);s<t.near||s>t.far||e.push({distance:s,point:Is.clone(),uv:ur.getUV(Is,Ls,Ds,Ns,Os,Fs,Gs,new zn),face:null,object:this})},copy:function(t){return Ji.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});const Hs=new Qn,Vs=new Qn;function Ws(){Ji.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Zs(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),ao.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Si,this.bindMatrixInverse=new Si}Ws.prototype=Object.assign(Object.create(Ji.prototype),{constructor:Ws,isLOD:!0,copy:function(t){Ji.prototype.copy.call(this,t,!1);const e=t.levels;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);const n=this.levels;let i;for(i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){Hs.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(Hs);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){Hs.setFromMatrixPosition(t.matrixWorld),Vs.setFromMatrixPosition(this.matrixWorld);const n=Hs.distanceTo(Vs)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}},toJSON:function(t){const e=Ji.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let t=0,i=n.length;t<i;t++){const i=n[t];e.object.levels.push({object:i.object.uuid,distance:i.distance})}return e}}),Zs.prototype=Object.assign(Object.create(ao.prototype),{constructor:Zs,isSkinnedMesh:!0,copy:function(t){return ao.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new jn,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){ao.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const t=new Qn,e=new jn,n=new jn,i=new Qn,r=new Si;return function(o,a){const s=this.skeleton,l=this.geometry;e.fromBufferAttribute(l.attributes.skinIndex,o),n.fromBufferAttribute(l.attributes.skinWeight,o),t.fromBufferAttribute(l.attributes.position,o).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let o=0;o<4;o++){const l=n.getComponent(o);if(0!==l){const n=e.getComponent(o);r.multiplyMatrices(s.bones[n].matrixWorld,s.boneInverses[n]),a.addScaledVector(i.copy(t).applyMatrix4(r),l)}}return a.applyMatrix4(this.bindMatrixInverse)}}()});const js=new Si,Ys=new Si;function Xs(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Si)}}function Js(){Ji.call(this),this.type="Bone"}Object.assign(Xs.prototype,{calculateInverses:function(){this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++){const e=new Si;this.bones[t]&&e.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(e)}},pose:function(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.getInverse(this.boneInverses[t])}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}},update:function(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=t.length;i<r;i++){const r=t[i]?t[i].matrixWorld:Ys;js.multiplyMatrices(r,e[i]),js.toArray(n,16*i)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new Xs(this.bones,this.boneInverses)},getBoneByName:function(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Js.prototype=Object.assign(Object.create(Ji.prototype),{constructor:Js,isBone:!0});const Qs=new Si,qs=new Si,Ks=[],$s=new ao;function tl(t,e,n){ao.call(this,t,e),this.instanceMatrix=new Sr(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function el(t){_r.call(this),this.type="LineBasicMaterial",this.color=new yr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}tl.prototype=Object.assign(Object.create(ao.prototype),{constructor:tl,isInstancedMesh:!0,copy:function(t){return ao.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Sr(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){const n=this.matrixWorld,i=this.count;if($s.geometry=this.geometry,$s.material=this.material,void 0!==$s.material)for(let r=0;r<i;r++){this.getMatrixAt(r,Qs),qs.multiplyMatrices(n,Qs),$s.matrixWorld=qs,$s.raycast(t,Ks);for(let t=0,n=Ks.length;t<n;t++){const n=Ks[t];n.instanceId=r,n.object=this,e.push(n)}Ks.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),el.prototype=Object.create(_r.prototype),el.prototype.constructor=el,el.prototype.isLineBasicMaterial=!0,el.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};const nl=new Qn,il=new Qn,rl=new Si,ol=new xi,al=new mi;function sl(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Ji.call(this),this.type="Line",this.geometry=void 0!==t?t:new Hr,this.material=void 0!==e?e:new el,this.updateMorphTargets()}sl.prototype=Object.assign(Object.create(Ji.prototype),{constructor:sl,isLine:!0,copy:function(t){return Ji.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)nl.fromBufferAttribute(e,t-1),il.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=nl.distanceTo(il);t.setAttribute("lineDistance",new Rr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;n[0]=0;for(let t=1,i=e.length;t<i;t++)n[t]=n[t-1],n[t]+=e[t-1].distanceTo(e[t])}return this},raycast:function(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),al.copy(n.boundingSphere),al.applyMatrix4(i),al.radius+=r,!1===t.ray.intersectsSphere(al))return;rl.getInverse(i),ol.copy(t.ray).applyMatrix4(rl);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Qn,l=new Qn,c=new Qn,u=new Qn,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,o=n.length-1;i<o;i+=h){const o=n[i],h=n[i+1];if(s.fromBufferAttribute(r,o),l.fromBufferAttribute(r,h),ol.distanceSqToSegment(s,l,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const f=t.ray.origin.distanceTo(u);f<t.near||f>t.far||e.push({distance:f,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else for(let n=0,i=r.count-1;n<i;n+=h){if(s.fromBufferAttribute(r,n),l.fromBufferAttribute(r,n+1),ol.distanceSqToSegment(s,l,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(u);i<t.near||i>t.far||e.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const i=n.vertices,r=i.length;for(let n=0;n<r-1;n+=h){if(ol.distanceSqToSegment(i[n],i[n+1],u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(u);r<t.near||r>t.far||e.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const ll=new Qn,cl=new Qn;function ul(t,e){sl.call(this,t,e),this.type="LineSegments"}function hl(t,e){sl.call(this,t,e),this.type="LineLoop"}function fl(t){_r.call(this),this.type="PointsMaterial",this.color=new yr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}ul.prototype=Object.assign(Object.create(sl.prototype),{constructor:ul,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)ll.fromBufferAttribute(e,t),cl.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+ll.distanceTo(cl);t.setAttribute("lineDistance",new Rr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;for(let t=0,i=e.length;t<i;t+=2)ll.copy(e[t]),cl.copy(e[t+1]),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+ll.distanceTo(cl)}return this}}),hl.prototype=Object.assign(Object.create(sl.prototype),{constructor:hl,isLineLoop:!0}),fl.prototype=Object.create(_r.prototype),fl.prototype.constructor=fl,fl.prototype.isPointsMaterial=!0,fl.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};const dl=new Si,pl=new xi,ml=new mi,gl=new Qn;function yl(t,e){Ji.call(this),this.type="Points",this.geometry=void 0!==t?t:new Hr,this.material=void 0!==e?e:new fl,this.updateMorphTargets()}function vl(t,e,n,i,r,o,a){const s=pl.distanceSqToPoint(t);if(s<n){const n=new Qn;pl.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}function bl(t,e,n,i,r,o,a,s,l){Zn.call(this,t,e,n,i,r,o,a,s,l),this.format=void 0!==a?a:Ot,this.minFilter=void 0!==o?o:bt,this.magFilter=void 0!==r?r:bt,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)})}function _l(t,e,n,i,r,o,a,s,l,c,u,h){Zn.call(this,null,o,a,s,l,c,i,r,u,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function wl(t,e,n,i,r,o,a,s,l){Zn.call(this,t,e,n,i,r,o,a,s,l),this.needsUpdate=!0}function Al(t,e,n,i,r,o,a,s,l,c){if((c=void 0!==c?c:Ht)!==Ht&&c!==Vt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ht&&(n=Tt),void 0===n&&c===Vt&&(n=Dt),Zn.call(this,null,i,r,o,a,s,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==a?a:pt,this.minFilter=void 0!==s?s:pt,this.flipY=!1,this.generateMipmaps=!1}yl.prototype=Object.assign(Object.create(Ji.prototype),{constructor:yl,isPoints:!0,copy:function(t){return Ji.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),ml.copy(n.boundingSphere),ml.applyMatrix4(i),ml.radius+=r,!1===t.ray.intersectsSphere(ml))return;dl.getInverse(i),pl.copy(t.ray).applyMatrix4(dl);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const r=n.index,o=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,s=n.length;r<s;r++){const s=n[r];gl.fromBufferAttribute(o,s),vl(gl,s,a,i,t,e,this)}}else for(let n=0,r=o.count;n<r;n++)gl.fromBufferAttribute(o,n),vl(gl,n,a,i,t,e,this)}else{const r=n.vertices;for(let n=0,o=r.length;n<o;n++)vl(r[n],n,a,i,t,e,this)}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),bl.prototype=Object.assign(Object.create(Zn.prototype),{constructor:bl,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),_l.prototype=Object.create(Zn.prototype),_l.prototype.constructor=_l,_l.prototype.isCompressedTexture=!0,wl.prototype=Object.create(Zn.prototype),wl.prototype.constructor=wl,wl.prototype.isCanvasTexture=!0,Al.prototype=Object.create(Zn.prototype),Al.prototype.constructor=Al,Al.prototype.isDepthTexture=!0;let xl=0;const Sl=new Si,Ml=new Ji,El=new Qn;function Tl(){Object.defineProperty(this,"id",{value:xl+=2}),this.uuid=Gn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Tl.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Tl,isGeometry:!0,applyMatrix4:function(t){const e=(new Un).getNormalMatrix(t);for(let e=0,n=this.vertices.length;e<n;e++){this.vertices[e].applyMatrix4(t)}for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t];n.normal.applyMatrix3(e).normalize();for(let t=0,i=n.vertexNormals.length;t<i;t++)n.vertexNormals[t].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Sl.makeRotationX(t),this.applyMatrix4(Sl),this},rotateY:function(t){return Sl.makeRotationY(t),this.applyMatrix4(Sl),this},rotateZ:function(t){return Sl.makeRotationZ(t),this.applyMatrix4(Sl),this},translate:function(t,e,n){return Sl.makeTranslation(t,e,n),this.applyMatrix4(Sl),this},scale:function(t,e,n){return Sl.makeScale(t,e,n),this.applyMatrix4(Sl),this},lookAt:function(t){return Ml.lookAt(t),Ml.updateMatrix(),this.applyMatrix4(Ml.matrix),this},fromBufferGeometry:function(t){const e=this,n=null!==t.index?t.index:void 0,i=t.attributes;if(void 0===i.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=i.position,o=i.normal,a=i.color,s=i.uv,l=i.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let t=0;t<r.count;t++)e.vertices.push((new Qn).fromBufferAttribute(r,t)),void 0!==a&&e.colors.push((new yr).fromBufferAttribute(a,t));function c(t,n,i,r){const c=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[i].clone()],u=void 0===o?[]:[(new Qn).fromBufferAttribute(o,t),(new Qn).fromBufferAttribute(o,n),(new Qn).fromBufferAttribute(o,i)],h=new vr(t,n,i,u,c,r);e.faces.push(h),void 0!==s&&e.faceVertexUvs[0].push([(new zn).fromBufferAttribute(s,t),(new zn).fromBufferAttribute(s,n),(new zn).fromBufferAttribute(s,i)]),void 0!==l&&e.faceVertexUvs[1].push([(new zn).fromBufferAttribute(l,t),(new zn).fromBufferAttribute(l,n),(new zn).fromBufferAttribute(l,i)])}const u=t.groups;if(u.length>0)for(let t=0;t<u.length;t++){const e=u[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)void 0!==n?c(n.getX(t),n.getX(t+1),n.getX(t+2),e.materialIndex):c(t,t+1,t+2,e.materialIndex)}else if(void 0!==n)for(let t=0;t<n.count;t+=3)c(n.getX(t),n.getX(t+1),n.getX(t+2));else for(let t=0;t<r.count;t+=3)c(t,t+1,t+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(El).negate(),this.translate(El.x,El.y,El.z),this},normalize:function(){this.computeBoundingSphere();const t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new Si;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const t=new Qn,e=new Qn;for(let n=0,i=this.faces.length;n<i;n++){const i=this.faces[n],r=this.vertices[i.a],o=this.vertices[i.b],a=this.vertices[i.c];t.subVectors(a,o),e.subVectors(r,o),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);const e=new Array(this.vertices.length);for(let t=0,n=this.vertices.length;t<n;t++)e[t]=new Qn;if(t){const t=new Qn,n=new Qn;for(let i=0,r=this.faces.length;i<r;i++){const r=this.faces[i],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,a),n.subVectors(o,a),t.cross(n),e[r.a].add(t),e[r.b].add(t),e[r.c].add(t)}}else{this.computeFaceNormals();for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t];e[n.a].add(n.normal),e[n.b].add(n.normal),e[n.c].add(n.normal)}}for(let t=0,n=this.vertices.length;t<n;t++)e[t].normalize();for(let t=0,n=this.faces.length;t<n;t++){const n=this.faces[t],i=n.vertexNormals;3===i.length?(i[0].copy(e[n.a]),i[1].copy(e[n.b]),i[2].copy(e[n.c])):(i[0]=e[n.a].clone(),i[1]=e[n.b].clone(),i[2]=e[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],n=e.vertexNormals;3===n.length?(n[0].copy(e.normal),n[1].copy(e.normal),n[2].copy(e.normal)):(n[0]=e.normal.clone(),n[1]=e.normal.clone(),n[2]=e.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let t=0,n=e.vertexNormals.length;t<n;t++)e.__originalVertexNormals[t]?e.__originalVertexNormals[t].copy(e.vertexNormals[t]):e.__originalVertexNormals[t]=e.vertexNormals[t].clone()}const t=new Tl;t.faces=this.faces;for(let e=0,n=this.morphTargets.length;e<n;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];const t=this.morphNormals[e].faceNormals,n=this.morphNormals[e].vertexNormals;for(let e=0,i=this.faces.length;e<i;e++){const e=new Qn,i={a:new Qn,b:new Qn,c:new Qn};t.push(e),n.push(i)}}const n=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],i=n.faceNormals[t],r=n.vertexNormals[t];i.copy(e.normal),r.a.copy(e.vertexNormals[0]),r.b.copy(e.vertexNormals[1]),r.c.copy(e.vertexNormals[2])}}for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $n),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mi),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);let i;const r=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,l=t.faces,c=this.colors,u=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new Un).getNormalMatrix(e));for(let t=0,n=a.length;t<n;t++){const n=a[t].clone();void 0!==e&&n.applyMatrix4(e),o.push(n)}for(let t=0,e=u.length;t<e;t++)c.push(u[t].clone());for(let t=0,e=l.length;t<e;t++){const e=l[t];let o,a;const c=e.vertexNormals,u=e.vertexColors,h=new vr(e.a+r,e.b+r,e.c+r);h.normal.copy(e.normal),void 0!==i&&h.normal.applyMatrix3(i).normalize();for(let t=0,e=c.length;t<e;t++)o=c[t].clone(),void 0!==i&&o.applyMatrix3(i).normalize(),h.vertexNormals.push(o);h.color.copy(e.color);for(let t=0,e=u.length;t<e;t++)a=u[t],h.vertexColors.push(a.clone());h.materialIndex=e.materialIndex+n,s.push(h)}for(let e=0,n=t.faceVertexUvs.length;e<n;e++){const n=t.faceVertexUvs[e];void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(let t=0,i=n.length;t<i;t++){const i=n[t],r=[];for(let t=0,e=i.length;t<e;t++)r.push(i[t].clone());this.faceVertexUvs[e].push(r)}}},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){const t={},e=[],n=[],i=Math.pow(10,4);for(let r=0,o=this.vertices.length;r<o;r++){const o=this.vertices[r],a=Math.round(o.x*i)+"_"+Math.round(o.y*i)+"_"+Math.round(o.z*i);void 0===t[a]?(t[a]=r,e.push(this.vertices[r]),n[r]=e.length-1):n[r]=n[t[a]]}const r=[];for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.a=n[e.a],e.b=n[e.b],e.c=n[e.c];const i=[e.a,e.b,e.c];for(let e=0;e<3;e++)if(i[e]===i[(e+1)%3]){r.push(t);break}}for(let t=r.length-1;t>=0;t--){const e=r[t];this.faces.splice(e,1);for(let t=0,n=this.faceVertexUvs.length;t<n;t++)this.faceVertexUvs[t].splice(e,1)}const o=this.vertices.length-e.length;return this.vertices=e,o},setFromPoints:function(t){this.vertices=[];for(let e=0,n=t.length;e<n;e++){const n=t[e];this.vertices.push(new Qn(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){const t=this.faces,e=t.length;for(let n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});const n=this.faceVertexUvs[0],i=this.faceVertexUvs[1];let r,o;n&&n.length===e&&(r=[]),i&&i.length===e&&(o=[]);for(let a=0;a<e;a++){const e=t[a]._id;r&&r.push(n[e]),o&&o.push(i[e])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}const e=[];for(let t=0;t<this.vertices.length;t++){const n=this.vertices[t];e.push(n.x,n.y,n.z)}const n=[],i=[],r={},o=[],a={},s=[],l={};for(let t=0;t<this.faces.length;t++){const e=this.faces[t],i=!0,r=!1,o=void 0!==this.faceVertexUvs[0][t],a=e.normal.length()>0,s=e.vertexNormals.length>0,l=1!==e.color.r||1!==e.color.g||1!==e.color.b,d=e.vertexColors.length>0;let p=0;if(p=c(p=c(p=c(p=c(p=c(p=c(p=c(p=c(p,0,0),1,i),2,r),3,o),4,a),5,s),6,l),7,d),n.push(p),n.push(e.a,e.b,e.c),n.push(e.materialIndex),o){const e=this.faceVertexUvs[0][t];n.push(f(e[0]),f(e[1]),f(e[2]))}if(a&&n.push(u(e.normal)),s){const t=e.vertexNormals;n.push(u(t[0]),u(t[1]),u(t[2]))}if(l&&n.push(h(e.color)),d){const t=e.vertexColors;n.push(h(t[0]),h(t[1]),h(t[2]))}}function c(t,e,n){return n?t|1<<e:t&~(1<<e)}function u(t){const e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==r[e]?r[e]:(r[e]=i.length/3,i.push(t.x,t.y,t.z),r[e])}function h(t){const e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==a[e]?a[e]:(a[e]=o.length,o.push(t.getHex()),a[e])}function f(t){const e=t.x.toString()+t.y.toString();return void 0!==l[e]?l[e]:(l[e]=s.length/2,s.push(t.x,t.y),l[e])}return t.data={},t.data.vertices=e,t.data.normals=i,o.length>0&&(t.data.colors=o),s.length>0&&(t.data.uvs=[s]),t.data.faces=n,t},clone:function(){return(new Tl).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;const e=t.vertices;for(let t=0,n=e.length;t<n;t++)this.vertices.push(e[t].clone());const n=t.colors;for(let t=0,e=n.length;t<e;t++)this.colors.push(n[t].clone());const i=t.faces;for(let t=0,e=i.length;t<e;t++)this.faces.push(i[t].clone());for(let e=0,n=t.faceVertexUvs.length;e<n;e++){const n=t.faceVertexUvs[e];void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(let t=0,i=n.length;t<i;t++){const i=n[t],r=[];for(let t=0,e=i.length;t<e;t++){const e=i[t];r.push(e.clone())}this.faceVertexUvs[e].push(r)}}const r=t.morphTargets;for(let t=0,e=r.length;t<e;t++){const e={};if(e.name=r[t].name,void 0!==r[t].vertices){e.vertices=[];for(let n=0,i=r[t].vertices.length;n<i;n++)e.vertices.push(r[t].vertices[n].clone())}if(void 0!==r[t].normals){e.normals=[];for(let n=0,i=r[t].normals.length;n<i;n++)e.normals.push(r[t].normals[n].clone())}this.morphTargets.push(e)}const o=t.morphNormals;for(let t=0,e=o.length;t<e;t++){const e={};if(void 0!==o[t].vertexNormals){e.vertexNormals=[];for(let n=0,i=o[t].vertexNormals.length;n<i;n++){const i=o[t].vertexNormals[n],r={};r.a=i.a.clone(),r.b=i.b.clone(),r.c=i.c.clone(),e.vertexNormals.push(r)}}if(void 0!==o[t].faceNormals){e.faceNormals=[];for(let n=0,i=o[t].faceNormals.length;n<i;n++)e.faceNormals.push(o[t].faceNormals[n].clone())}this.morphNormals.push(e)}const a=t.skinWeights;for(let t=0,e=a.length;t<e;t++)this.skinWeights.push(a[t].clone());const s=t.skinIndices;for(let t=0,e=s.length;t<e;t++)this.skinIndices.push(s[t].clone());const l=t.lineDistances;for(let t=0,e=l.length;t<e;t++)this.lineDistances.push(l[t]);const c=t.boundingBox;null!==c&&(this.boundingBox=c.clone());const u=t.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Il extends Tl{constructor(t,e,n,i,r,o){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new co(t,e,n,i,r,o)),this.mergeVertices()}}class kl extends Hr{constructor(t,e,n,i){super(),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;const r=[],o=[],a=[],s=[],l=new Qn,c=new zn;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let r=0,u=3;r<=e;r++,u+=3){const h=n+r/e*i;l.x=t*Math.cos(h),l.y=t*Math.sin(h),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[u]/t+1)/2,c.y=(o[u+1]/t+1)/2,s.push(c.x,c.y)}for(let t=1;t<=e;t++)r.push(t,t+1,0);this.setIndex(r),this.setAttribute("position",new Rr(o,3)),this.setAttribute("normal",new Rr(a,3)),this.setAttribute("uv",new Rr(s,2))}}class Cl extends Tl{constructor(t,e,n,i){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new kl(t,e,n,i)),this.mergeVertices()}}class Bl extends Hr{constructor(t,e,n,i,r,o,a,s){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};const l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;const c=[],u=[],h=[],f=[];let d=0;const p=[],m=n/2;let g=0;function y(n){const r=d,o=new zn,p=new Qn;let y=0;const v=!0===n?t:e,b=!0===n?1:-1;for(let t=1;t<=i;t++)u.push(0,m*b,0),h.push(0,b,0),f.push(.5,.5),d++;const _=d;for(let t=0;t<=i;t++){const e=t/i*s+a,n=Math.cos(e),r=Math.sin(e);p.x=v*r,p.y=m*b,p.z=v*n,u.push(p.x,p.y,p.z),h.push(0,b,0),o.x=.5*n+.5,o.y=.5*r*b+.5,f.push(o.x,o.y),d++}for(let t=0;t<i;t++){const e=r+t,i=_+t;!0===n?c.push(i,i+1,e):c.push(i+1,i,e),y+=3}l.addGroup(g,y,!0===n?1:2),g+=y}!function(){const o=new Qn,y=new Qn;let v=0;const b=(e-t)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,v=g*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*s+a,l=Math.sin(r),p=Math.cos(r);y.x=v*l,y.y=-g*n+m,y.z=v*p,u.push(y.x,y.y,y.z),o.set(l,b,p).normalize(),h.push(o.x,o.y,o.z),f.push(e,1-g),c.push(d++)}p.push(c)}for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=p[e][t],i=p[e+1][t],r=p[e+1][t+1],o=p[e][t+1];c.push(n,i,o),c.push(i,r,o),v+=6}l.addGroup(g,v,0),g+=v}(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Rr(u,3)),this.setAttribute("normal",new Rr(h,3)),this.setAttribute("uv",new Rr(f,2))}}class Rl extends Tl{constructor(t,e,n,i,r,o,a,s){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Bl(t,e,n,i,r,o,a,s)),this.mergeVertices()}}class Pl extends Rl{constructor(t,e,n,i,r,o,a){super(0,t,e,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}}class Ll extends Bl{constructor(t,e,n,i,r,o,a){super(0,t,e,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}}class Dl extends Hr{constructor(t,e,n,i){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1;const r=[],o=[];function a(t,e,n,i){const r=i+1,o=[];for(let i=0;i<=r;i++){o[i]=[];const a=t.clone().lerp(n,i/r),s=e.clone().lerp(n,i/r),l=r-i;for(let t=0;t<=l;t++)o[i][t]=0===t&&i===r?a:a.clone().lerp(s,t/l)}for(let t=0;t<r;t++)for(let e=0;e<2*(r-t)-1;e++){const n=Math.floor(e/2);e%2==0?(s(o[t][n+1]),s(o[t+1][n]),s(o[t][n])):(s(o[t][n+1]),s(o[t+1][n+1]),s(o[t+1][n]))}}function s(t){r.push(t.x,t.y,t.z)}function l(e,n){const i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function c(t,e,n,i){i<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=i/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}function h(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}!function(t){const n=new Qn,i=new Qn,r=new Qn;for(let o=0;o<e.length;o+=3)l(e[o+0],n),l(e[o+1],i),l(e[o+2],r),a(n,i,r,t)}(i=i||0),function(t){const e=new Qn;for(let n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){const t=new Qn;for(let e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];const n=u(t)/2/Math.PI+.5,i=h(t)/Math.PI+.5;o.push(n,1-i)}(function(){const t=new Qn,e=new Qn,n=new Qn,i=new Qn,a=new zn,s=new zn,l=new zn;for(let h=0,f=0;h<r.length;h+=9,f+=6){t.set(r[h+0],r[h+1],r[h+2]),e.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(o[f+0],o[f+1]),s.set(o[f+2],o[f+3]),l.set(o[f+4],o[f+5]),i.copy(t).add(e).add(n).divideScalar(3);const d=u(i);c(a,f+0,t,d),c(s,f+2,e,d),c(l,f+4,n,d)}})(),function(){for(let t=0;t<o.length;t+=6){const e=o[t+0],n=o[t+2],i=o[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),i<.2&&(o[t+4]+=1))}}()}(),this.setAttribute("position",new Rr(r,3)),this.setAttribute("normal",new Rr(r.slice(),3)),this.setAttribute("uv",new Rr(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}}class Nl extends Dl{constructor(t,e){const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class Ol extends Tl{constructor(t,e){super(),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Nl(t,e)),this.mergeVertices()}}const Fl=new Qn,Gl=new Qn,zl=new Qn,Ul=new ur;class Hl extends Hr{constructor(t,e){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1,t.isGeometry&&(t=(new Hr).fromGeometry(t));const n=Math.pow(10,4),i=Math.cos(Gn.DEG2RAD*e),r=t.getIndex(),o=t.getAttribute("position"),a=r?r.count:o.count,s=[0,0,0],l=["a","b","c"],c=new Array(3),u={},h=[];for(let t=0;t<a;t+=3){r?(s[0]=r.getX(t),s[1]=r.getX(t+1),s[2]=r.getX(t+2)):(s[0]=t,s[1]=t+1,s[2]=t+2);const{a:e,b:a,c:f}=Ul;if(e.fromBufferAttribute(o,s[0]),a.fromBufferAttribute(o,s[1]),f.fromBufferAttribute(o,s[2]),Ul.getNormal(zl),c[0]=`${Math.round(e.x*n)},${Math.round(e.y*n)},${Math.round(e.z*n)}`,c[1]=`${Math.round(a.x*n)},${Math.round(a.y*n)},${Math.round(a.z*n)}`,c[2]=`${Math.round(f.x*n)},${Math.round(f.y*n)},${Math.round(f.z*n)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=c[t],r=c[e],o=Ul[l[t]],a=Ul[l[e]],f=`${n}_${r}`,d=`${r}_${n}`;d in u&&u[d]?(zl.dot(u[d].normal)<=i&&(h.push(o.x,o.y,o.z),h.push(a.x,a.y,a.z)),u[d]=null):f in u||(u[f]={index0:s[t],index1:s[e],normal:zl.clone()})}}for(const t in u)if(u[t]){const{index0:e,index1:n}=u[t];Fl.fromBufferAttribute(o,e),Gl.fromBufferAttribute(o,n),h.push(Fl.x,Fl.y,Fl.z),h.push(Gl.x,Gl.y,Gl.z)}this.setAttribute("position",new Rr(h,3))}}const Vl=function(t,e,n){n=n||2;const i=e&&e.length,r=i?e[0]*n:t.length;let o=Wl(t,0,r,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,h,f,d;if(i&&(o=function(t,e,n,i){const r=[];let o,a,s,l,c;for(o=0,a=e.length;o<a;o++)s=e[o]*i,l=o<a-1?e[o+1]*i:t.length,(c=Wl(t,s,l,i,!1))===c.next&&(c.steiner=!0),r.push(ec(c));for(r.sort(ql),o=0;o<r.length;o++)Kl(r[o],n),n=Zl(n,n.next);return n}(t,e,o,n)),t.length>80*n){s=c=t[0],l=u=t[1];for(let e=n;e<r;e+=n)h=t[e],f=t[e+1],h<s&&(s=h),f<l&&(l=f),h>c&&(c=h),f>u&&(u=f);d=0!==(d=Math.max(c-s,u-l))?1/d:0}return jl(o,a,n,s,l,d),a};function Wl(t,e,n,i,r){let o,a;if(r===function(t,e,n,i){let r=0;for(let o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}(t,e,n,i)>0)for(o=e;o<n;o+=i)a=hc(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=hc(o,t[o],t[o+1],a);return a&&oc(a,a.next)&&(fc(a),a=a.next),a}function Zl(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!oc(i,i.next)&&0!==rc(i.prev,i,i.next))i=i.next;else{if(fc(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function jl(t,e,n,i,r,o,a){if(!t)return;!a&&o&&function(t,e,n,i){let r=t;do{null===r.z&&(r.z=tc(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ);e++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(t,i,r,o);let s,l,c=t;for(;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Xl(t,i,r,o):Yl(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),fc(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?jl(t=Jl(Zl(t),e,n),e,n,i,r,o,2):2===a&&Ql(t,e,n,i,r,o):jl(Zl(t),e,n,i,r,o,1);break}}function Yl(t){const e=t.prev,n=t,i=t.next;if(rc(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(nc(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&rc(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Xl(t,e,n,i){const r=t.prev,o=t,a=t.next;if(rc(r,o,a)>=0)return!1;const s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=tc(s,l,e,n,i),f=tc(c,u,e,n,i);let d=t.prevZ,p=t.nextZ;for(;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&nc(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&rc(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&nc(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&rc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&nc(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&rc(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&nc(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&rc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Jl(t,e,n){let i=t;do{const r=i.prev,o=i.next.next;!oc(r,o)&&ac(r,i,i.next,o)&&cc(r,o)&&cc(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),fc(i),fc(i.next),i=t=o),i=i.next}while(i!==t);return Zl(i)}function Ql(t,e,n,i,r,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&ic(a,t)){let s=uc(a,t);return a=Zl(a,a.next),s=Zl(s,s.next),jl(a,e,n,i,r,o),void jl(s,e,n,i,r,o)}t=t.next}a=a.next}while(a!==t)}function ql(t,e){return t.x-e.x}function Kl(t,e){if(e=function(t,e){let n=e;const i=t.x,r=t.y;let o,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>a){if(a=t,t===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===a)return o;const s=o,l=o.x,c=o.y;let u,h=1/0;n=o;do{i>=n.x&&n.x>=l&&i!==n.x&&nc(r<c?i:a,r,l,c,r<c?a:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),cc(n,t)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&$l(o,n)))&&(o=n,h=u)),n=n.next}while(n!==s);return o}(t,e)){const n=uc(e,t);Zl(e,e.next),Zl(n,n.next)}}function $l(t,e){return rc(t.prev,t,e.prev)<0&&rc(e.next,t,t.next)<0}function tc(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ec(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function nc(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function ic(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ac(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(cc(t,e)&&cc(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(rc(t.prev,t,e.prev)||rc(t,e.prev,e))||oc(t,e)&&rc(t.prev,t,t.next)>0&&rc(e.prev,e,e.next)>0)}function rc(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function oc(t,e){return t.x===e.x&&t.y===e.y}function ac(t,e,n,i){const r=lc(rc(t,e,n)),o=lc(rc(t,e,i)),a=lc(rc(n,i,t)),s=lc(rc(n,i,e));return r!==o&&a!==s||(!(0!==r||!sc(t,n,e))||(!(0!==o||!sc(t,i,e))||(!(0!==a||!sc(n,t,i))||!(0!==s||!sc(n,e,i)))))}function sc(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function lc(t){return t>0?1:t<0?-1:0}function cc(t,e){return rc(t.prev,t,t.next)<0?rc(t,e,t.next)>=0&&rc(t,t.prev,e)>=0:rc(t,e,t.prev)<0||rc(t,t.next,e)<0}function uc(t,e){const n=new dc(t.i,t.x,t.y),i=new dc(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function hc(t,e,n,i){const r=new dc(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function fc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function dc(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const pc={area:function(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return pc.area(t)<0},triangulateShape:function(t,e){const n=[],i=[],r=[];mc(t),gc(n,t);let o=t.length;e.forEach(mc);for(let t=0;t<e.length;t++)i.push(o),o+=e[t].length,gc(n,e[t]);const a=Vl(n,i);for(let t=0;t<a.length;t+=3)r.push(a.slice(t,t+3));return r}};function mc(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function gc(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class yc extends Hr{constructor(t,e){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e};const n=this,i=[],r=[];for(let e=0,n=(t=Array.isArray(t)?t:[t]).length;e<n;e++){o(t[e])}function o(t){const o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:u-2,f=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3;const p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:vc;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let g,y,v,b,_,w=!1;p&&(g=p.getSpacedPoints(s),w=!0,c=!1,y=p.computeFrenetFrames(s,!1),v=new Qn,b=new Qn,_=new Qn),c||(d=0,u=0,h=0,f=0);const A=t.extractPoints(a);let x=A.shape;const S=A.holes;if(!pc.isClockWise(x)){x=x.reverse();for(let t=0,e=S.length;t<e;t++){const e=S[t];pc.isClockWise(e)&&(S[t]=e.reverse())}}const M=pc.triangulateShape(x,S),E=x;for(let t=0,e=S.length;t<e;t++){const e=S[t];x=x.concat(e)}function T(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const I=x.length,k=M.length;function C(t,e,n){let i,r,o;const a=t.x-e.x,s=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),f=Math.sqrt(l*l+c*c),d=e.x-s/h,p=e.y+a/h,m=((n.x-c/f-d)*c-(n.y+l/f-p)*l)/(a*c-s*l),g=(i=d+a*m-t.x)*i+(r=p+s*m-t.y)*r;if(g<=2)return new zn(i,r);o=Math.sqrt(g/2)}else{let t=!1;a>Number.EPSILON?l>Number.EPSILON&&(t=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(c)&&(t=!0),t?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new zn(i/o,r/o)}const B=[];for(let t=0,e=E.length,n=e-1,i=t+1;t<e;t++,n++,i++)n===e&&(n=0),i===e&&(i=0),B[t]=C(E[t],E[n],E[i]);const R=[];let P,L=B.concat();for(let t=0,e=S.length;t<e;t++){const e=S[t];P=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),P[t]=C(e[t],e[i],e[r]);R.push(P),L=L.concat(P)}for(let t=0;t<d;t++){const e=t/d,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+f;for(let t=0,e=E.length;t<e;t++){const e=T(E[t],B[t],i);O(e.x,e.y,-n)}for(let t=0,e=S.length;t<e;t++){const e=S[t];P=R[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],P[t],i);O(r.x,r.y,-n)}}}const D=h+f;for(let t=0;t<I;t++){const e=c?T(x[t],L[t],D):x[t];w?(b.copy(y.normals[0]).multiplyScalar(e.x),v.copy(y.binormals[0]).multiplyScalar(e.y),_.copy(g[0]).add(b).add(v),O(_.x,_.y,_.z)):O(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<I;e++){const n=c?T(x[e],L[e],D):x[e];w?(b.copy(y.normals[t]).multiplyScalar(n.x),v.copy(y.binormals[t]).multiplyScalar(n.y),_.copy(g[t]).add(b).add(v),O(_.x,_.y,_.z)):O(n.x,n.y,l/s*t)}for(let t=d-1;t>=0;t--){const e=t/d,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+f;for(let t=0,e=E.length;t<e;t++){const e=T(E[t],B[t],i);O(e.x,e.y,l+n)}for(let t=0,e=S.length;t<e;t++){const e=S[t];P=R[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],P[t],i);w?O(r.x,r.y+g[s-1].y,g[s-1].x+n):O(r.x,r.y,l+n)}}}function N(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=s+2*d;t<n;t++){const n=I*t,o=I*(t+1);G(e+i+n,e+r+n,e+r+o,e+i+o)}}}function O(t,e,n){o.push(t),o.push(e),o.push(n)}function F(t,e,r){z(t),z(e),z(r);const o=i.length/3,a=m.generateTopUV(n,i,o-3,o-2,o-1);U(a[0]),U(a[1]),U(a[2])}function G(t,e,r,o){z(t),z(e),z(o),z(e),z(r),z(o);const a=i.length/3,s=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);U(s[0]),U(s[1]),U(s[3]),U(s[1]),U(s[2]),U(s[3])}function z(t){i.push(o[3*t+0]),i.push(o[3*t+1]),i.push(o[3*t+2])}function U(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(c){let t=0,e=I*t;for(let t=0;t<k;t++){const n=M[t];F(n[2]+e,n[1]+e,n[0]+e)}e=I*(t=s+2*d);for(let t=0;t<k;t++){const n=M[t];F(n[0]+e,n[1]+e,n[2]+e)}}else{for(let t=0;t<k;t++){const e=M[t];F(e[2],e[1],e[0])}for(let t=0;t<k;t++){const e=M[t];F(e[0]+I*s,e[1]+I*s,e[2]+I*s)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;N(E,e),e+=E.length;for(let t=0,n=S.length;t<n;t++){const n=S[t];N(n,e),e+=n.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new Rr(i,3)),this.setAttribute("uv",new Rr(r,2)),this.computeVertexNormals()}toJSON(){const t=Hr.prototype.toJSON.call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,i=t.length;e<i;e++){const i=t[e];n.shapes.push(i.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}}const vc={generateTopUV:function(t,e,n,i,r){const o=e[3*n],a=e[3*n+1],s=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new zn(o,a),new zn(s,l),new zn(c,u)]},generateSideWallUV:function(t,e,n,i,r,o){const a=e[3*n],s=e[3*n+1],l=e[3*n+2],c=e[3*i],u=e[3*i+1],h=e[3*i+2],f=e[3*r],d=e[3*r+1],p=e[3*r+2],m=e[3*o],g=e[3*o+1],y=e[3*o+2];return Math.abs(s-u)<.01?[new zn(a,1-l),new zn(c,1-h),new zn(f,1-p),new zn(m,1-y)]:[new zn(s,1-l),new zn(u,1-h),new zn(d,1-p),new zn(g,1-y)]}};class bc extends Tl{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new yc(t,e)),this.mergeVertices()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,i=t.length;e<i;e++){const i=t[e];n.shapes.push(i.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}}class _c extends Dl{constructor(t,e){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class wc extends Tl{constructor(t,e){super(),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new _c(t,e)),this.mergeVertices()}}class Ac extends Hr{constructor(t,e,n,i){super(),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=Gn.clamp(i,0,2*Math.PI);const r=[],o=[],a=[],s=1/e,l=new Qn,c=new zn;for(let r=0;r<=e;r++){const u=n+r*s*i,h=Math.sin(u),f=Math.cos(u);for(let n=0;n<=t.length-1;n++)l.x=t[n].x*h,l.y=t[n].y,l.z=t[n].x*f,o.push(l.x,l.y,l.z),c.x=r/e,c.y=n/(t.length-1),a.push(c.x,c.y)}for(let n=0;n<e;n++)for(let e=0;e<t.length-1;e++){const i=e+n*t.length,o=i,a=i+t.length,s=i+t.length+1,l=i+1;r.push(o,a,l),r.push(a,s,l)}if(this.setIndex(r),this.setAttribute("position",new Rr(o,3)),this.setAttribute("uv",new Rr(a,2)),this.computeVertexNormals(),i===2*Math.PI){const n=this.attributes.normal.array,i=new Qn,r=new Qn,o=new Qn,a=e*t.length*3;for(let e=0,s=0;e<t.length;e++,s+=3)i.x=n[s+0],i.y=n[s+1],i.z=n[s+2],r.x=n[a+s+0],r.y=n[a+s+1],r.z=n[a+s+2],o.addVectors(i,r).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}}class xc extends Tl{constructor(t,e,n,i){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Ac(t,e,n,i)),this.mergeVertices()}}class Sc extends Dl{constructor(t,e){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class Mc extends Tl{constructor(t,e){super(),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Sc(t,e)),this.mergeVertices()}}function Ec(t,e,n){Hr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};const i=[],r=[],o=[],a=[],s=new Qn,l=new Qn,c=new Qn,u=new Qn,h=new Qn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const f=e+1;for(let i=0;i<=n;i++){const f=i/n;for(let n=0;n<=e;n++){const i=n/e;t(i,f,l),r.push(l.x,l.y,l.z),i-1e-5>=0?(t(i-1e-5,f,c),u.subVectors(l,c)):(t(i+1e-5,f,c),u.subVectors(c,l)),f-1e-5>=0?(t(i,f-1e-5,c),h.subVectors(l,c)):(t(i,f+1e-5,c),h.subVectors(c,l)),s.crossVectors(u,h).normalize(),o.push(s.x,s.y,s.z),a.push(i,f)}}for(let t=0;t<n;t++)for(let n=0;n<e;n++){const e=t*f+n,r=t*f+n+1,o=(t+1)*f+n+1,a=(t+1)*f+n;i.push(e,r,a),i.push(r,o,a)}this.setIndex(i),this.setAttribute("position",new Rr(r,3)),this.setAttribute("normal",new Rr(o,3)),this.setAttribute("uv",new Rr(a,2))}function Tc(t,e,n){Tl.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new Ec(t,e,n)),this.mergeVertices()}Ec.prototype=Object.create(Hr.prototype),Ec.prototype.constructor=Ec,Tc.prototype=Object.create(Tl.prototype),Tc.prototype.constructor=Tc;class Ic extends Tl{constructor(t,e,n,i){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Co(t,e,n,i)),this.mergeVertices()}}class kc extends Tl{constructor(t,e,n,i){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new Dl(t,e,n,i)),this.mergeVertices()}}class Cc extends Hr{constructor(t,e,n,i,r,o){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},t=t||.5,e=e||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;const a=[],s=[],l=[],c=[];let u=t;const h=(e-t)/(i=void 0!==i?Math.max(1,i):1),f=new Qn,d=new zn;for(let t=0;t<=i;t++){for(let t=0;t<=n;t++){const i=r+t/n*o;f.x=u*Math.cos(i),f.y=u*Math.sin(i),s.push(f.x,f.y,f.z),l.push(0,0,1),d.x=(f.x/e+1)/2,d.y=(f.y/e+1)/2,c.push(d.x,d.y)}u+=h}for(let t=0;t<i;t++){const e=t*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,o=i+n+1,s=i+n+2,l=i+1;a.push(r,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new Rr(s,3)),this.setAttribute("normal",new Rr(l,3)),this.setAttribute("uv",new Rr(c,2))}}class Bc extends Tl{constructor(t,e,n,i,r,o){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Cc(t,e,n,i,r,o)),this.mergeVertices()}}class Rc extends Hr{constructor(t,e){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;const n=[],i=[],r=[],o=[];let a=0,s=0;if(!1===Array.isArray(t))l(t);else for(let e=0;e<t.length;e++)l(t[e]),this.addGroup(a,s,e),a+=s,s=0;function l(t){const a=i.length/3,l=t.extractPoints(e);let c=l.shape;const u=l.holes;!1===pc.isClockWise(c)&&(c=c.reverse());for(let t=0,e=u.length;t<e;t++){const e=u[t];!0===pc.isClockWise(e)&&(u[t]=e.reverse())}const h=pc.triangulateShape(c,u);for(let t=0,e=u.length;t<e;t++){const e=u[t];c=c.concat(e)}for(let t=0,e=c.length;t<e;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),o.push(e.x,e.y)}for(let t=0,e=h.length;t<e;t++){const e=h[t],i=e[0]+a,r=e[1]+a,o=e[2]+a;n.push(i,r,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Rr(i,3)),this.setAttribute("normal",new Rr(r,3)),this.setAttribute("uv",new Rr(o,2))}toJSON(){const t=Hr.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class Pc extends Tl{constructor(t,e){super(),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Rc(t,e)),this.mergeVertices()}toJSON(){const t=Tl.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class Lc extends Hr{constructor(t,e,n,i,r,o,a){super(),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new Qn,h=new Qn,f=[],d=[],p=[],m=[];for(let f=0;f<=n;f++){const g=[],y=f/n;let v=0;0==f&&0==o?v=.5/e:f==n&&s==Math.PI&&(v=-.5/e);for(let n=0;n<=e;n++){const s=n/e;u.x=-t*Math.cos(i+s*r)*Math.sin(o+y*a),u.y=t*Math.cos(o+y*a),u.z=t*Math.sin(i+s*r)*Math.sin(o+y*a),d.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(s+v,1-y),g.push(l++)}c.push(g)}for(let t=0;t<n;t++)for(let i=0;i<e;i++){const e=c[t][i+1],r=c[t][i],a=c[t+1][i],l=c[t+1][i+1];(0!==t||o>0)&&f.push(e,r,l),(t!==n-1||s<Math.PI)&&f.push(r,a,l)}this.setIndex(f),this.setAttribute("position",new Rr(d,3)),this.setAttribute("normal",new Rr(p,3)),this.setAttribute("uv",new Rr(m,2))}}class Dc extends Tl{constructor(t,e,n,i,r,o,a){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Lc(t,e,n,i,r,o,a)),this.mergeVertices()}}class Nc extends Dl{constructor(t,e){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class Oc extends Tl{constructor(t,e){super(),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Nc(t,e)),this.mergeVertices()}}class Fc extends yc{constructor(t,e){const n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Hr;const i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(i,e),this.type="TextBufferGeometry"}}class Gc extends Tl{constructor(t,e){super(),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Fc(t,e)),this.mergeVertices()}}class zc extends Hr{constructor(t,e,n,i,r){super(),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;const o=[],a=[],s=[],l=[],c=new Qn,u=new Qn,h=new Qn;for(let o=0;o<=n;o++)for(let f=0;f<=i;f++){const d=f/i*r,p=o/n*Math.PI*2;u.x=(t+e*Math.cos(p))*Math.cos(d),u.y=(t+e*Math.cos(p))*Math.sin(d),u.z=e*Math.sin(p),a.push(u.x,u.y,u.z),c.x=t*Math.cos(d),c.y=t*Math.sin(d),h.subVectors(u,c).normalize(),s.push(h.x,h.y,h.z),l.push(f/i),l.push(o/n)}for(let t=1;t<=n;t++)for(let e=1;e<=i;e++){const n=(i+1)*t+e-1,r=(i+1)*(t-1)+e-1,a=(i+1)*(t-1)+e,s=(i+1)*t+e;o.push(n,r,s),o.push(r,a,s)}this.setIndex(o),this.setAttribute("position",new Rr(a,3)),this.setAttribute("normal",new Rr(s,3)),this.setAttribute("uv",new Rr(l,2))}}class Uc extends Tl{constructor(t,e,n,i,r){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new zc(t,e,n,i,r)),this.mergeVertices()}}class Hc extends Hr{constructor(t,e,n,i,r,o){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;const a=[],s=[],l=[],c=[],u=new Qn,h=new Qn,f=new Qn,d=new Qn,p=new Qn,m=new Qn,g=new Qn;for(let a=0;a<=n;++a){const v=a/n*r*Math.PI*2;y(v,r,o,t,f),y(v+.01,r,o,t,d),m.subVectors(d,f),g.addVectors(d,f),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let t=0;t<=i;++t){const r=t/i*Math.PI*2,o=-e*Math.cos(r),d=e*Math.sin(r);u.x=f.x+(o*g.x+d*p.x),u.y=f.y+(o*g.y+d*p.y),u.z=f.z+(o*g.z+d*p.z),s.push(u.x,u.y,u.z),h.subVectors(u,f).normalize(),l.push(h.x,h.y,h.z),c.push(a/n),c.push(t/i)}}for(let t=1;t<=n;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),o=(i+1)*t+e,s=(i+1)*(t-1)+e;a.push(n,r,s),a.push(r,o,s)}function y(t,e,n,i,r){const o=Math.cos(t),a=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Rr(s,3)),this.setAttribute("normal",new Rr(l,3)),this.setAttribute("uv",new Rr(c,2))}}class Vc extends Tl{constructor(t,e,n,i,r,o,a){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Hc(t,e,n,i,r,o)),this.mergeVertices()}}class Wc extends Hr{constructor(t,e,n,i,r){super(),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},e=e||64,n=n||1,i=i||8,r=r||!1;const o=t.computeFrenetFrames(e,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Qn,s=new Qn,l=new zn;let c=new Qn;const u=[],h=[],f=[],d=[];function p(r){c=t.getPointAt(r/e,c);const l=o.normals[r],f=o.binormals[r];for(let t=0;t<=i;t++){const e=t/i*Math.PI*2,r=Math.sin(e),o=-Math.cos(e);s.x=o*l.x+r*f.x,s.y=o*l.y+r*f.y,s.z=o*l.z+r*f.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let t=0;t<e;t++)p(t);p(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=i;n++)l.x=t/e,l.y=n/i,f.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),o=(i+1)*t+e,a=(i+1)*(t-1)+e;d.push(n,r,a),d.push(r,o,a)}}()}(),this.setIndex(d),this.setAttribute("position",new Rr(u,3)),this.setAttribute("normal",new Rr(h,3)),this.setAttribute("uv",new Rr(f,2))}toJSON(){const t=Hr.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}class Zc extends Tl{constructor(t,e,n,i,r,o){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");const a=new Wc(t,e,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}}class jc extends Hr{constructor(t){super(),this.type="WireframeGeometry";const e=[],n=[0,0],i={},r=["a","b","c"];if(t&&t.isGeometry){const o=t.faces;for(let t=0,e=o.length;t<e;t++){const e=o[t];for(let t=0;t<3;t++){const o=e[r[t]],a=e[r[(t+1)%3]];n[0]=Math.min(o,a),n[1]=Math.max(o,a);const s=n[0]+","+n[1];void 0===i[s]&&(i[s]={index1:n[0],index2:n[1]})}}for(const n in i){const r=i[n];let o=t.vertices[r.index1];e.push(o.x,o.y,o.z),o=t.vertices[r.index2],e.push(o.x,o.y,o.z)}}else if(t&&t.isBufferGeometry){const r=new Qn;if(null!==t.index){const o=t.attributes.position,a=t.index;let s=t.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,e=s.length;t<e;++t){const e=s[t],r=e.start;for(let t=r,o=r+e.count;t<o;t+=3)for(let e=0;e<3;e++){const r=a.getX(t+e),o=a.getX(t+(e+1)%3);n[0]=Math.min(r,o),n[1]=Math.max(r,o);const s=n[0]+","+n[1];void 0===i[s]&&(i[s]={index1:n[0],index2:n[1]})}}for(const t in i){const n=i[t];r.fromBufferAttribute(o,n.index1),e.push(r.x,r.y,r.z),r.fromBufferAttribute(o,n.index2),e.push(r.x,r.y,r.z)}}else{const n=t.attributes.position;for(let t=0,i=n.count/3;t<i;t++)for(let i=0;i<3;i++){const o=3*t+i;r.fromBufferAttribute(n,o),e.push(r.x,r.y,r.z);const a=3*t+(i+1)%3;r.fromBufferAttribute(n,a),e.push(r.x,r.y,r.z)}}}this.setAttribute("position",new Rr(e,3))}}var Yc=Object.freeze({__proto__:null,BoxGeometry:Il,BoxBufferGeometry:co,CircleGeometry:Cl,CircleBufferGeometry:kl,ConeGeometry:Pl,ConeBufferGeometry:Ll,CylinderGeometry:Rl,CylinderBufferGeometry:Bl,DodecahedronGeometry:Ol,DodecahedronBufferGeometry:Nl,EdgesGeometry:Hl,ExtrudeGeometry:bc,ExtrudeBufferGeometry:yc,IcosahedronGeometry:wc,IcosahedronBufferGeometry:_c,LatheGeometry:xc,LatheBufferGeometry:Ac,OctahedronGeometry:Mc,OctahedronBufferGeometry:Sc,ParametricGeometry:Tc,ParametricBufferGeometry:Ec,PlaneGeometry:Ic,PlaneBufferGeometry:Co,PolyhedronGeometry:kc,PolyhedronBufferGeometry:Dl,RingGeometry:Bc,RingBufferGeometry:Cc,ShapeGeometry:Pc,ShapeBufferGeometry:Rc,SphereGeometry:Dc,SphereBufferGeometry:Lc,TetrahedronGeometry:Oc,TetrahedronBufferGeometry:Nc,TextGeometry:Gc,TextBufferGeometry:Fc,TorusGeometry:Uc,TorusBufferGeometry:zc,TorusKnotGeometry:Vc,TorusKnotBufferGeometry:Hc,TubeGeometry:Zc,TubeBufferGeometry:Wc,WireframeGeometry:jc});function Xc(t){_r.call(this),this.type="ShadowMaterial",this.color=new yr(0),this.transparent=!0,this.setValues(t)}function Jc(t){go.call(this,t),this.type="RawShaderMaterial"}function Qc(t){_r.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new yr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new zn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function qc(t){Qc.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new zn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Gn.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function Kc(t){_r.call(this),this.type="MeshPhongMaterial",this.color=new yr(16777215),this.specular=new yr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new zn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function $c(t){_r.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new yr(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new zn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function tu(t){_r.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new zn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function eu(t){_r.call(this),this.type="MeshLambertMaterial",this.color=new yr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function nu(t){_r.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new yr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new zn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function iu(t){el.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}Xc.prototype=Object.create(_r.prototype),Xc.prototype.constructor=Xc,Xc.prototype.isShadowMaterial=!0,Xc.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this},Jc.prototype=Object.create(go.prototype),Jc.prototype.constructor=Jc,Jc.prototype.isRawShaderMaterial=!0,Qc.prototype=Object.create(_r.prototype),Qc.prototype.constructor=Qc,Qc.prototype.isMeshStandardMaterial=!0,Qc.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},qc.prototype=Object.create(Qc.prototype),qc.prototype.constructor=qc,qc.prototype.isMeshPhysicalMaterial=!0,qc.prototype.copy=function(t){return Qc.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new yr).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},Kc.prototype=Object.create(_r.prototype),Kc.prototype.constructor=Kc,Kc.prototype.isMeshPhongMaterial=!0,Kc.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},$c.prototype=Object.create(_r.prototype),$c.prototype.constructor=$c,$c.prototype.isMeshToonMaterial=!0,$c.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},tu.prototype=Object.create(_r.prototype),tu.prototype.constructor=tu,tu.prototype.isMeshNormalMaterial=!0,tu.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},eu.prototype=Object.create(_r.prototype),eu.prototype.constructor=eu,eu.prototype.isMeshLambertMaterial=!0,eu.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},nu.prototype=Object.create(_r.prototype),nu.prototype.constructor=nu,nu.prototype.isMeshMatcapMaterial=!0,nu.prototype.copy=function(t){return _r.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},iu.prototype=Object.create(el.prototype),iu.prototype.constructor=iu,iu.prototype.isLineDashedMaterial=!0,iu.prototype.copy=function(t){return el.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var ru=Object.freeze({__proto__:null,ShadowMaterial:Xc,SpriteMaterial:Es,RawShaderMaterial:Jc,ShaderMaterial:go,PointsMaterial:fl,MeshPhysicalMaterial:qc,MeshStandardMaterial:Qc,MeshPhongMaterial:Kc,MeshToonMaterial:$c,MeshNormalMaterial:tu,MeshLambertMaterial:eu,MeshDepthMaterial:as,MeshDistanceMaterial:ss,MeshBasicMaterial:wr,MeshMatcapMaterial:nu,LineDashedMaterial:iu,LineBasicMaterial:el,Material:_r});const ou={arraySlice:function(t,e,n){return ou.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){const i=t.length,r=new t.constructor(i);for(let o=0,a=0;a!==i;++o){const i=n[o]*e;for(let n=0;n!==e;++n)r[a++]=t[i+n]}return r},flattenJSON:function(t,e,n,i){let r=1,o=t[0];for(;void 0!==o&&void 0===o[i];)o=t[r++];if(void 0===o)return;let a=o[i];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[i])&&(e.push(o.time),n.push.apply(n,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[i])&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{void 0!==(a=o[i])&&(e.push(o.time),n.push(a)),o=t[r++]}while(void 0!==o)},subclip:function(t,e,n,i,r){r=r||30;const o=t.clone();o.name=e;const a=[];for(let t=0;t<o.tracks.length;++t){const e=o.tracks[t],s=e.getValueSize(),l=[],c=[];for(let t=0;t<e.times.length;++t){const o=e.times[t]*r;if(!(o<n||o>=i)){l.push(e.times[t]);for(let n=0;n<s;++n)c.push(e.values[t*s+n])}}0!==l.length&&(e.times=ou.convertArray(l,e.times.constructor),e.values=ou.convertArray(c,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let t=0;t<o.tracks.length;++t)s>o.tracks[t].times[0]&&(s=o.tracks[t].times[0]);for(let t=0;t<o.tracks.length;++t)o.tracks[t].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=t),(void 0===i||i<=0)&&(i=30);const r=n.tracks.length,o=e/i;for(let e=0;e<r;++e){const i=n.tracks[e],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const a=t.tracks.find(function(t){return t.name===i.name&&t.ValueTypeName===r});if(void 0===a)continue;let s=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=i.times.length-1;let f;if(o<=i.times[0]){const t=s,e=l-s;f=ou.arraySlice(i.values,t,e)}else if(o>=i.times[h]){const t=h*l+s,e=t+l-s;f=ou.arraySlice(i.values,t,e)}else{const t=i.createInterpolant(),e=s,n=l-s;t.evaluate(o),f=ou.arraySlice(t.resultBuffer,e,n)}if("quaternion"===r){(new Jn).fromArray(f).normalize().conjugate().toArray(f)}const d=a.times.length;for(let t=0;t<d;++t){const e=t*u+c;if("quaternion"===r)Jn.multiplyQuaternionsFlat(a.values,e,f,0,a.values,e);else{const t=u-2*c;for(let n=0;n<t;++n)a.values[e+n]-=f[n]}}}return t.blendMode=je,t}};function au(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function su(t,e,n,i){au.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function lu(t,e,n,i){au.call(this,t,e,n,i)}function cu(t,e,n,i){au.call(this,t,e,n,i)}function uu(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ou.convertArray(e,this.TimeBufferType),this.values=ou.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function hu(t,e,n){uu.call(this,t,e,n)}function fu(t,e,n,i){uu.call(this,t,e,n,i)}function du(t,e,n,i){uu.call(this,t,e,n,i)}function pu(t,e,n,i){au.call(this,t,e,n,i)}function mu(t,e,n,i){uu.call(this,t,e,n,i)}function gu(t,e,n,i){uu.call(this,t,e,n,i)}function yu(t,e,n,i){uu.call(this,t,e,n,i)}function vu(t,e,n,i){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==i?i:Ze,this.uuid=Gn.generateUUID(),this.duration<0&&this.resetDuration()}function bu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return du;case"vector":case"vector2":case"vector3":case"vector4":return yu;case"color":return fu;case"quaternion":return mu;case"bool":case"boolean":return hu;case"string":return gu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];ou.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(au.prototype,{evaluate:function(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let o;n:{i:if(!(t<i)){for(let o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,t<(i=e[++n]))break e}o=e.length;break n}if(t>=r)break t;{const a=e[1];t<a&&(n=2,r=a);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===o)break;if(i=r,t>=(r=e[--n-1]))break e}o=n,n=0}}for(;n<o;){const i=n+o>>>1;t<e[i]?o=i:n=i+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let t=0;t!==i;++t)e[t]=n[r+t];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(au.prototype,{beforeStart_:au.prototype.copySampleValue_,afterEnd_:au.prototype.copySampleValue_}),su.prototype=Object.assign(Object.create(au.prototype),{constructor:su,DefaultSettings_:{endingStart:He,endingEnd:He},intervalChanged_:function(t,e,n){const i=this.parameterPositions;let r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case Ve:r=t,a=2*e-n;break;case We:a=e+i[r=i.length-2]-i[r+1];break;default:r=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ve:o=t,s=2*n-e;break;case We:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-e)/(i-e),p=d*d,m=p*d,g=-h*m+2*h*p-h*d,y=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,v=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p;for(let t=0;t!==a;++t)r[t]=g*o[c+t]+y*o[l+t]+v*o[s+t]+b*o[u+t];return r}}),lu.prototype=Object.assign(Object.create(au.prototype),{constructor:lu,interpolate_:function(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=(n-e)/(i-e),u=1-c;for(let t=0;t!==a;++t)r[t]=o[l+t]*u+o[s+t]*c;return r}}),cu.prototype=Object.assign(Object.create(au.prototype),{constructor:cu,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(uu,{toJSON:function(t){const e=t.constructor;let n;if(void 0!==e.toJSON)n=e.toJSON(t);else{n={name:t.name,times:ou.convertArray(t.times,Array),values:ou.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}}),Object.assign(uu.prototype,{constructor:uu,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:ze,InterpolantFactoryMethodDiscrete:function(t){return new cu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new lu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new su(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case Ge:e=this.InterpolantFactoryMethodDiscrete;break;case ze:e=this.InterpolantFactoryMethodLinear;break;case Ue:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ge;case this.InterpolantFactoryMethodLinear:return ze;case this.InterpolantFactoryMethodSmooth:return Ue}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this},scale:function(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this},trim:function(t,e){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==r||o!==i){r>=o&&(r=(o=Math.max(o,1))-1);const t=this.getValueSize();this.times=ou.arraySlice(n,r,o),this.values=ou.arraySlice(this.values,r*t,o*t)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==r;e++){const i=n[e];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,i),t=!1;break}if(null!==o&&o>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,i,o),t=!1;break}o=i}if(void 0!==i&&ou.isTypedArray(i))for(let e=0,n=i.length;e!==n;++e){const n=i[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t},optimize:function(){const t=ou.arraySlice(this.times),e=ou.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Ue,r=t.length-1;let o=1;for(let a=1;a<r;++a){let r=!1;const s=t[a];if(s!==t[a+1]&&(1!==a||s!==s[0]))if(i)r=!0;else{const t=a*n,i=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[i+a]||n!==e[o+a]){r=!0;break}}}if(r){if(a!==o){t[o]=t[a];const i=a*n,r=o*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++o}}if(r>0){t[o]=t[r];for(let t=r*n,i=o*n,a=0;a!==n;++a)e[i+a]=e[t+a];++o}return o!==t.length?(this.times=ou.arraySlice(t,0,o),this.values=ou.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this},clone:function(){const t=ou.arraySlice(this.times,0),e=ou.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),hu.prototype=Object.assign(Object.create(uu.prototype),{constructor:hu,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ge,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),fu.prototype=Object.assign(Object.create(uu.prototype),{constructor:fu,ValueTypeName:"color"}),du.prototype=Object.assign(Object.create(uu.prototype),{constructor:du,ValueTypeName:"number"}),pu.prototype=Object.assign(Object.create(au.prototype),{constructor:pu,interpolate_:function(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(i-e);let l=t*a;for(let t=l+a;l!==t;l+=4)Jn.slerpFlat(r,0,o,l-a,o,l,s);return r}}),mu.prototype=Object.assign(Object.create(uu.prototype),{constructor:mu,ValueTypeName:"quaternion",DefaultInterpolation:ze,InterpolantFactoryMethodLinear:function(t){return new pu(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),gu.prototype=Object.assign(Object.create(uu.prototype),{constructor:gu,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ge,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),yu.prototype=Object.assign(Object.create(uu.prototype),{constructor:yu,ValueTypeName:"vector"}),Object.assign(vu,{parse:function(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let t=0,r=n.length;t!==r;++t)e.push(bu(n[t]).scale(i));return new vu(t.name,t.duration,e,t.blendMode)},toJSON:function(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,i=n.length;t!==i;++t)e.push(uu.toJSON(n[t]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){const r=e.length,o=[];for(let t=0;t<r;t++){let a=[],s=[];a.push((t+r-1)%r,t,(t+1)%r),s.push(0,1,0);const l=ou.getKeyframeOrder(a);a=ou.sortedArray(a,1,l),s=ou.sortedArray(s,1,l),i||0!==a[0]||(a.push(r),s.push(s[0])),o.push(new du(".morphTargetInfluences["+e[t].name+"]",a,s).scale(1/n))}return new vu(t,-1,o)},findByName:function(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],o=n.name.match(r);if(o&&o.length>1){const t=o[1];let e=i[t];e||(i[t]=e=[]),e.push(n)}}const o=[];for(const t in i)o.push(vu.CreateFromMorphTargetSequence(t,i[t],e,n));return o},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const o=[],a=[];ou.flattenJSON(n,o,a,i),0!==o.length&&r.push(new t(e,o,a))}},i=[],r=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const l=t.hierarchy||[];for(let t=0;t<l.length;t++){const r=l[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let n=0;n<r[e].morphTargets.length;n++)t[r[e].morphTargets[n]]=-1;for(const n in t){const t=[],o=[];for(let i=0;i!==r[e].morphTargets.length;++i){const i=r[e];t.push(i.time),o.push(i.morphTarget===n?1:0)}i.push(new du(".morphTargetInfluence["+n+"]",t,o))}s=t.length*(o||1)}else{const o=".bones["+e[t].name+"]";n(yu,o+".position",r,"pos",i),n(mu,o+".quaternion",r,"rot",i),n(yu,o+".scale",r,"scl",i)}}return 0===i.length?null:new vu(r,s,i,a)}}),Object.assign(vu.prototype,{resetDuration:function(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new vu(this.name,this.duration,t,this.blendMode)}});const _u={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function wu(t,e,n){const i=this;let r=!1,o=0,a=0,s=void 0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===r&&void 0!==i.onStart&&i.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}const Au=new wu;function xu(t){this.manager=void 0!==t?t:Au,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(xu.prototype,{load:function(){},loadAsync:function(t,e){const n=this;return new Promise(function(i,r){n.load(t,i,e,r)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const Su={};function Mu(t){xu.call(this,t)}function Eu(t){xu.call(this,t)}function Tu(t){xu.call(this,t)}function Iu(t){xu.call(this,t)}function ku(t){xu.call(this,t)}function Cu(t){xu.call(this,t)}function Bu(t){xu.call(this,t)}function Ru(){this.type="Curve",this.arcLengthDivisions=200}function Pu(t,e,n,i,r,o,a,s){Ru.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Lu(t,e,n,i,r,o){Pu.call(this,t,e,n,n,i,r,o),this.type="ArcCurve"}function Du(){let t=0,e=0,n=0,i=0;function r(r,o,a,s){t=r,e=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(t,e,n,i,o){r(e,n,o*(n-t),o*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,o,a,s){let l=(e-t)/o-(n-t)/(o+a)+(n-e)/a,c=(n-e)/a-(i-e)/(a+s)+(i-n)/s;r(e,n,l*=a,c*=a)},calc:function(r){const o=r*r;return t+e*r+n*o+i*(o*r)}}}Mu.prototype=Object.assign(Object.create(xu.prototype),{constructor:Mu,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=_u.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;if(void 0!==Su[t])return void Su[t].push({onLoad:e,onProgress:n,onError:i});const a=t.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let o;const a=(this.responseType||"").toLowerCase();switch(a){case"arraybuffer":case"blob":const t=new Uint8Array(s.length);for(let e=0;e<s.length;e++)t[e]=s.charCodeAt(e);o="blob"===a?new Blob([t.buffer],{type:n}):t.buffer;break;case"document":const e=new DOMParser;o=e.parseFromString(s,n);break;case"json":o=JSON.parse(s);break;default:o=s}setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0)}catch(e){setTimeout(function(){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{Su[t]=[],Su[t].push({onLoad:e,onProgress:n,onError:i}),(s=new XMLHttpRequest).open("GET",t,!0),s.addEventListener("load",function(e){const n=this.response,i=Su[t];if(delete Su[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),_u.add(t,n);for(let t=0,e=i.length;t<e;t++){const e=i[t];e.onLoad&&e.onLoad(n)}r.manager.itemEnd(t)}else{for(let t=0,n=i.length;t<n;t++){const n=i[t];n.onError&&n.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}},!1),s.addEventListener("progress",function(e){const n=Su[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onProgress&&i.onProgress(e)}},!1),s.addEventListener("error",function(e){const n=Su[t];delete Su[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),s.addEventListener("abort",function(e){const n=Su[t];delete Su[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const t in this.requestHeader)s.setRequestHeader(t,this.requestHeader[t]);s.send(null)}return r.manager.itemStart(t),s},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Eu.prototype=Object.assign(Object.create(xu.prototype),{constructor:Eu,load:function(t,e,n,i){const r=this,o=new Mu(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}},n,i)},parse:function(t){const e=[];for(let n=0;n<t.length;n++){const i=vu.parse(t[n]);e.push(i)}return e}}),Tu.prototype=Object.assign(Object.create(xu.prototype),{constructor:Tu,load:function(t,e,n,i){const r=this,o=[],a=new _l;a.image=o;const s=new Mu(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);let l=0;function c(c){s.load(t[c],function(t){const n=r.parse(t,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=bt),a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,i)}if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)c(e);else s.load(t,function(t){const n=r.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){o[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)o[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),o[e].format=n.format,o[e].width=n.width,o[e].height=n.height}}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=bt),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,i);return a}}),Iu.prototype=Object.assign(Object.create(xu.prototype),{constructor:Iu,load:function(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=_u.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),_u.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a}}),ku.prototype=Object.assign(Object.create(xu.prototype),{constructor:ku,load:function(t,e,n,i){const r=new Ao,o=new Iu(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(t[n],function(t){r.images[n]=t,6===++a&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(let e=0;e<t.length;++e)s(e);return r}}),Cu.prototype=Object.assign(Object.create(xu.prototype),{constructor:Cu,load:function(t,e,n,i){const r=this,o=new So,a=new Mu(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(t,function(t){const n=r.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ft,o.wrapT=void 0!==n.wrapT?n.wrapT:ft,o.magFilter=void 0!==n.magFilter?n.magFilter:bt,o.minFilter=void 0!==n.minFilter?n.minFilter:bt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=At),1===n.mipmapCount&&(o.minFilter=bt),o.needsUpdate=!0,e&&e(o,n))},n,i),o}}),Bu.prototype=Object.assign(Object.create(xu.prototype),{constructor:Bu,load:function(t,e,n,i){const r=new Zn,o=new Iu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){r.image=n;const i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?Ot:Ft,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r}}),Object.assign(Ru.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let o=1;o<=t;o++)r+=(n=this.getPoint(o/t)).distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const n=this.getLengths();let i=0;const r=n.length;let o;o=e||t*n[r-1];let a,s=0,l=r-1;for(;s<=l;)if((a=n[i=Math.floor(s+(l-s)/2)]-o)<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(n[i=l]===o)return i/(r-1);const c=n[i];return(i+(o-c)/(n[i+1]-c))/(r-1)},getTangent:function(t,e){let n=t-1e-4,i=t+1e-4;n<0&&(n=0),i>1&&(i=1);const r=this.getPoint(n),o=this.getPoint(i),a=e||(r.isVector2?new zn:new Qn);return a.copy(o).sub(r).normalize(),a},getTangentAt:function(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){const n=new Qn,i=[],r=[],o=[],a=new Qn,s=new Si;for(let e=0;e<=t;e++){const n=e/t;i[e]=this.getTangentAt(n,new Qn),i[e].normalize()}r[0]=new Qn,o[0]=new Qn;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),o[0].crossVectors(i[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),o[e]=o[e-1].clone(),a.crossVectors(i[e-1],i[e]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(Gn.clamp(i[e-1].dot(i[e]),-1,1));r[e].applyMatrix4(s.makeRotationAxis(a,t))}o[e].crossVectors(i[e],r[e])}if(!0===e){let e=Math.acos(Gn.clamp(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(a.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],e*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Pu.prototype=Object.create(Ru.prototype),Pu.prototype.constructor=Pu,Pu.prototype.isEllipseCurve=!0,Pu.prototype.getPoint=function(t,e){const n=e||new zn,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);const a=this.aStartAngle+t*r;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,i=l-this.aY;s=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(s,l)},Pu.prototype.copy=function(t){return Ru.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Pu.prototype.toJSON=function(){const t=Ru.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Pu.prototype.fromJSON=function(t){return Ru.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Lu.prototype=Object.create(Pu.prototype),Lu.prototype.constructor=Lu,Lu.prototype.isArcCurve=!0;const Nu=new Qn,Ou=new Du,Fu=new Du,Gu=new Du;function zu(t,e,n,i){Ru.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=void 0!==i?i:.5}function Uu(t,e,n,i,r){const o=.5*(i-e),a=.5*(r-n),s=t*t;return(2*n-2*i+o+a)*(t*s)+(-3*n+3*i-2*o-a)*s+o*t+n}function Hu(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function Vu(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}function Wu(t,e,n,i){Ru.call(this),this.type="CubicBezierCurve",this.v0=t||new zn,this.v1=e||new zn,this.v2=n||new zn,this.v3=i||new zn}function Zu(t,e,n,i){Ru.call(this),this.type="CubicBezierCurve3",this.v0=t||new Qn,this.v1=e||new Qn,this.v2=n||new Qn,this.v3=i||new Qn}function ju(t,e){Ru.call(this),this.type="LineCurve",this.v1=t||new zn,this.v2=e||new zn}function Yu(t,e){Ru.call(this),this.type="LineCurve3",this.v1=t||new Qn,this.v2=e||new Qn}function Xu(t,e,n){Ru.call(this),this.type="QuadraticBezierCurve",this.v0=t||new zn,this.v1=e||new zn,this.v2=n||new zn}function Ju(t,e,n){Ru.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new Qn,this.v1=e||new Qn,this.v2=n||new Qn}function Qu(t){Ru.call(this),this.type="SplineCurve",this.points=t||[]}zu.prototype=Object.create(Ru.prototype),zu.prototype.constructor=zu,zu.prototype.isCatmullRomCurve3=!0,zu.prototype.getPoint=function(t,e){const n=e||new Qn,i=this.points,r=i.length,o=(r-(this.closed?0:1))*t;let a,s,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?a=i[(l-1)%r]:(Nu.subVectors(i[0],i[1]).add(i[0]),a=Nu);const u=i[l%r],h=i[(l+1)%r];if(this.closed||l+2<r?s=i[(l+2)%r]:(Nu.subVectors(i[r-1],i[r-2]).add(i[r-1]),s=Nu),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(h),t),i=Math.pow(h.distanceToSquared(s),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),Ou.initNonuniformCatmullRom(a.x,u.x,h.x,s.x,e,n,i),Fu.initNonuniformCatmullRom(a.y,u.y,h.y,s.y,e,n,i),Gu.initNonuniformCatmullRom(a.z,u.z,h.z,s.z,e,n,i)}else"catmullrom"===this.curveType&&(Ou.initCatmullRom(a.x,u.x,h.x,s.x,this.tension),Fu.initCatmullRom(a.y,u.y,h.y,s.y,this.tension),Gu.initCatmullRom(a.z,u.z,h.z,s.z,this.tension));return n.set(Ou.calc(c),Fu.calc(c),Gu.calc(c)),n},zu.prototype.copy=function(t){Ru.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},zu.prototype.toJSON=function(){const t=Ru.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},zu.prototype.fromJSON=function(t){Ru.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Qn).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Wu.prototype=Object.create(Ru.prototype),Wu.prototype.constructor=Wu,Wu.prototype.isCubicBezierCurve=!0,Wu.prototype.getPoint=function(t,e){const n=e||new zn,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Vu(t,i.x,r.x,o.x,a.x),Vu(t,i.y,r.y,o.y,a.y)),n},Wu.prototype.copy=function(t){return Ru.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Wu.prototype.toJSON=function(){const t=Ru.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Wu.prototype.fromJSON=function(t){return Ru.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Zu.prototype=Object.create(Ru.prototype),Zu.prototype.constructor=Zu,Zu.prototype.isCubicBezierCurve3=!0,Zu.prototype.getPoint=function(t,e){const n=e||new Qn,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Vu(t,i.x,r.x,o.x,a.x),Vu(t,i.y,r.y,o.y,a.y),Vu(t,i.z,r.z,o.z,a.z)),n},Zu.prototype.copy=function(t){return Ru.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Zu.prototype.toJSON=function(){const t=Ru.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Zu.prototype.fromJSON=function(t){return Ru.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},ju.prototype=Object.create(Ru.prototype),ju.prototype.constructor=ju,ju.prototype.isLineCurve=!0,ju.prototype.getPoint=function(t,e){const n=e||new zn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},ju.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},ju.prototype.getTangent=function(t,e){const n=e||new zn;return n.copy(this.v2).sub(this.v1).normalize(),n},ju.prototype.copy=function(t){return Ru.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ju.prototype.toJSON=function(){const t=Ru.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ju.prototype.fromJSON=function(t){return Ru.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Yu.prototype=Object.create(Ru.prototype),Yu.prototype.constructor=Yu,Yu.prototype.isLineCurve3=!0,Yu.prototype.getPoint=function(t,e){const n=e||new Qn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Yu.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Yu.prototype.copy=function(t){return Ru.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Yu.prototype.toJSON=function(){const t=Ru.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Yu.prototype.fromJSON=function(t){return Ru.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Xu.prototype=Object.create(Ru.prototype),Xu.prototype.constructor=Xu,Xu.prototype.isQuadraticBezierCurve=!0,Xu.prototype.getPoint=function(t,e){const n=e||new zn,i=this.v0,r=this.v1,o=this.v2;return n.set(Hu(t,i.x,r.x,o.x),Hu(t,i.y,r.y,o.y)),n},Xu.prototype.copy=function(t){return Ru.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Xu.prototype.toJSON=function(){const t=Ru.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Xu.prototype.fromJSON=function(t){return Ru.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Ju.prototype=Object.create(Ru.prototype),Ju.prototype.constructor=Ju,Ju.prototype.isQuadraticBezierCurve3=!0,Ju.prototype.getPoint=function(t,e){const n=e||new Qn,i=this.v0,r=this.v1,o=this.v2;return n.set(Hu(t,i.x,r.x,o.x),Hu(t,i.y,r.y,o.y),Hu(t,i.z,r.z,o.z)),n},Ju.prototype.copy=function(t){return Ru.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Ju.prototype.toJSON=function(){const t=Ru.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Ju.prototype.fromJSON=function(t){return Ru.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Qu.prototype=Object.create(Ru.prototype),Qu.prototype.constructor=Qu,Qu.prototype.isSplineCurve=!0,Qu.prototype.getPoint=function(t,e){const n=e||new zn,i=this.points,r=(i.length-1)*t,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(Uu(a,s.x,l.x,c.x,u.x),Uu(a,s.y,l.y,c.y,u.y)),n},Qu.prototype.copy=function(t){Ru.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this},Qu.prototype.toJSON=function(){const t=Ru.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t},Qu.prototype.fromJSON=function(t){Ru.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new zn).fromArray(n))}return this};var qu=Object.freeze({__proto__:null,ArcCurve:Lu,CatmullRomCurve3:zu,CubicBezierCurve:Wu,CubicBezierCurve3:Zu,EllipseCurve:Pu,LineCurve:ju,LineCurve3:Yu,QuadraticBezierCurve:Xu,QuadraticBezierCurve3:Ju,SplineCurve:Qu});function Ku(){Ru.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function $u(t){Ku.call(this),this.type="Path",this.currentPoint=new zn,t&&this.setFromPoints(t)}function th(t){$u.call(this,t),this.uuid=Gn.generateUUID(),this.type="Shape",this.holes=[]}function eh(t,e){Ji.call(this),this.type="Light",this.color=new yr(t),this.intensity=void 0!==e?e:1}function nh(t,e,n){eh.call(this,t,n),this.type="HemisphereLight",this.position.copy(Ji.DefaultUp),this.updateMatrix(),this.groundColor=new yr(e)}function ih(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new zn(512,512),this.map=null,this.mapPass=null,this.matrix=new Si,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new To,this._frameExtents=new zn(1,1),this._viewportCount=1,this._viewports=[new jn(0,0,1,1)]}function rh(){ih.call(this,new vo(50,1,.5,500)),this.focus=1}function oh(t,e,n,i,r,o){eh.call(this,t,e),this.type="SpotLight",this.position.copy(Ji.DefaultUp),this.updateMatrix(),this.target=new Ji,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new rh}function ah(){ih.call(this,new vo(90,1,.5,500)),this._frameExtents=new zn(4,2),this._viewportCount=6,this._viewports=[new jn(2,1,1,1),new jn(0,1,1,1),new jn(3,1,1,1),new jn(1,1,1,1),new jn(3,0,1,1),new jn(1,0,1,1)],this._cubeDirections=[new Qn(1,0,0),new Qn(-1,0,0),new Qn(0,0,1),new Qn(0,0,-1),new Qn(0,1,0),new Qn(0,-1,0)],this._cubeUps=[new Qn(0,1,0),new Qn(0,1,0),new Qn(0,1,0),new Qn(0,1,0),new Qn(0,0,1),new Qn(0,0,-1)]}function sh(t,e,n,i){eh.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new ah}function lh(t,e,n,i,r,o){yo.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function ch(){ih.call(this,new lh(-5,5,5,-5,.5,500))}function uh(t,e){eh.call(this,t,e),this.type="DirectionalLight",this.position.copy(Ji.DefaultUp),this.updateMatrix(),this.target=new Ji,this.shadow=new ch}function hh(t,e){eh.call(this,t,e),this.type="AmbientLight"}function fh(t,e,n,i){eh.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}Ku.prototype=Object.assign(Object.create(Ru.prototype),{constructor:Ku,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new ju(e,t))},getPoint:function(t){const e=t*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=e){const t=n[i]-e,r=this.curves[i],o=r.getLength(),a=0===o?0:1-t/o;return r.getPointAt(a)}i++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){const i=s[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){Ru.prototype.copy.call(this,t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){const t=Ru.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t},fromJSON:function(t){Ru.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new qu[n.type]).fromJSON(n))}return this}}),$u.prototype=Object.assign(Object.create(Ku.prototype),{constructor:$u,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const n=new ju(this.currentPoint.clone(),new zn(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,i){const r=new Xu(this.currentPoint.clone(),new zn(t,e),new zn(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(t,e,n,i,r,o){const a=new Wu(this.currentPoint.clone(),new zn(t,e),new zn(n,i),new zn(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this},splineThru:function(t){const e=new Qu([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,r,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,i,r,o),this},absarc:function(t,e,n,i,r,o){return this.absellipse(t,e,n,n,i,r,o),this},ellipse:function(t,e,n,i,r,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,o,a,s),this},absellipse:function(t,e,n,i,r,o,a,s){const l=new Pu(t,e,n,i,r,o,a,s);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(t){return Ku.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){const t=Ku.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Ku.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),th.prototype=Object.assign(Object.create($u.prototype),{constructor:th,getPointsHoles:function(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){$u.prototype.copy.call(this,t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this},toJSON:function(){const t=$u.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t},fromJSON:function(t){$u.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new $u).fromJSON(n))}return this}}),eh.prototype=Object.assign(Object.create(Ji.prototype),{constructor:eh,isLight:!0,copy:function(t){return Ji.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){const e=Ji.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),nh.prototype=Object.assign(Object.create(eh.prototype),{constructor:nh,isHemisphereLight:!0,copy:function(t){return eh.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(ih.prototype,{_projScreenMatrix:new Si,_lightPositionWorld:new Qn,_lookTarget:new Qn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),rh.prototype=Object.assign(Object.create(ih.prototype),{constructor:rh,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,n=2*Gn.RAD2DEG*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),ih.prototype.updateMatrices.call(this,t)}}),oh.prototype=Object.assign(Object.create(eh.prototype),{constructor:oh,isSpotLight:!0,copy:function(t){return eh.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ah.prototype=Object.assign(Object.create(ih.prototype),{constructor:ah,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);const n=this.camera,i=this.matrix,r=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),n.position.copy(r),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),sh.prototype=Object.assign(Object.create(eh.prototype),{constructor:sh,isPointLight:!0,copy:function(t){return eh.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),lh.prototype=Object.assign(Object.create(yo.prototype),{constructor:lh,isOrthographicCamera:!0,copy:function(t,e){return yo.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(r+=t*this.view.offsetX)+t*this.view.width,s=(a-=e*this.view.offsetY)-e*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=Ji.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),ch.prototype=Object.assign(Object.create(ih.prototype),{constructor:ch,isDirectionalLightShadow:!0,updateMatrices:function(t){ih.prototype.updateMatrices.call(this,t)}}),uh.prototype=Object.assign(Object.create(eh.prototype),{constructor:uh,isDirectionalLight:!0,copy:function(t){return eh.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),hh.prototype=Object.assign(Object.create(eh.prototype),{constructor:hh,isAmbientLight:!0}),fh.prototype=Object.assign(Object.create(eh.prototype),{constructor:fh,isRectAreaLight:!0,copy:function(t){return eh.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){const e=eh.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});class dh{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Qn)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*i),e.addScaledVector(o[2],.488603*r),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*i*1.092548),e.addScaledVector(o[5],i*r*1.092548),e.addScaledVector(o[6],.315392*(3*r*r-1)),e.addScaledVector(o[7],n*r*1.092548),e.addScaledVector(o[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*i),e.addScaledVector(o[2],1.023328*r),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*i),e.addScaledVector(o[5],.858086*i*r),e.addScaledVector(o[6],.743125*r*r-.247708),e.addScaledVector(o[7],.858086*n*r),e.addScaledVector(o[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}function ph(t,e){eh.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new dh}function mh(t){xu.call(this,t),this.textures={}}ph.prototype=Object.assign(Object.create(eh.prototype),{constructor:ph,isLightProbe:!0,copy:function(t){return eh.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){const e=eh.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),mh.prototype=Object.assign(Object.create(xu.prototype),{constructor:mh,load:function(t,e,n,i){const r=this,o=new Mu(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}},n,i)},parse:function(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const i=new ru[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=(new yr).setHex(t.sheen)),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(i.morphNormals=t.morphNormals),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.vertexTangents&&(i.vertexTangents=t.vertexTangents),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const r=t.uniforms[e];switch(i.uniforms[e]={},r.type){case"t":i.uniforms[e].value=n(r.value);break;case"c":i.uniforms[e].value=(new yr).setHex(r.value);break;case"v2":i.uniforms[e].value=(new zn).fromArray(r.value);break;case"v3":i.uniforms[e].value=(new Qn).fromArray(r.value);break;case"v4":i.uniforms[e].value=(new jn).fromArray(r.value);break;case"m3":i.uniforms[e].value=(new Un).fromArray(r.value);break;case"m4":i.uniforms[e].value=(new Si).fromArray(r.value);break;default:i.uniforms[e].value=r.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const e in t.extensions)i.extensions[e]=t.extensions[e];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),i.normalScale=(new zn).fromArray(e)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new zn).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),i},setTextures:function(t){return this.textures=t,this}});const gh={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function yh(){Hr.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function vh(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Sr.call(this,t,e,n),this.meshPerAttribute=i||1}function bh(t){xu.call(this,t)}yh.prototype=Object.assign(Object.create(Hr.prototype),{constructor:yh,isInstancedBufferGeometry:!0,copy:function(t){return Hr.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t=Hr.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),vh.prototype=Object.assign(Object.create(Sr.prototype),{constructor:vh,isInstancedBufferAttribute:!0,copy:function(t){return Sr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=Sr.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),bh.prototype=Object.assign(Object.create(xu.prototype),{constructor:bh,load:function(t,e,n,i){const r=this,o=new Mu(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}},n,i)},parse:function(t){const e={},n={};function i(t,i){if(void 0!==e[i])return e[i];const r=t.interleavedBuffers[i],o=function(t,e){if(void 0!==n[e])return n[e];const i=t.arrayBuffers[e],r=new Uint32Array(i).buffer;return n[e]=r,r}(t,r.buffer),a=new xs(new _h[r.type](o),r.stride);return a.uuid=r.uuid,e[i]=a,a}const r=t.isInstancedBufferGeometry?new yh:new Hr,o=t.data.index;if(void 0!==o){const t=new _h[o.type](o.array);r.setIndex(new Sr(t,1))}const a=t.data.attributes;for(const e in a){const n=a[e];let o;if(n.isInterleavedBufferAttribute){o=new Ms(i(t.data,n.data),n.itemSize,n.offset,n.normalized)}else{const t=new _h[n.type](n.array);o=new(n.isInstancedBufferAttribute?vh:Sr)(t,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),r.setAttribute(e,o)}const s=t.data.morphAttributes;if(s)for(const e in s){const n=s[e],o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];let a;if(r.isInterleavedBufferAttribute){a=new Ms(i(t.data,r.data),r.itemSize,r.offset,r.normalized)}else{a=new Sr(new _h[r.type](r.array),r.itemSize,r.normalized)}void 0!==r.name&&(a.name=r.name),o.push(a)}r.morphAttributes[e]=o}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let t=0,e=l.length;t!==e;++t){const e=l[t];r.addGroup(e.start,e.count,e.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new Qn;void 0!==c.center&&t.fromArray(c.center),r.boundingSphere=new mi(t,c.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}});const _h={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};class wh extends xu{constructor(t){super(t)}load(t,e,n,i){const r=this,o=""===this.path?gh.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const a=new Mu(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(n){let o=null;try{o=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)},n,i)}parse(t,e){const n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,i,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s}parseShape(t){const e={};if(void 0!==t)for(let n=0,i=t.length;n<i;n++){const i=(new th).fromJSON(t[n]);e[i.uuid]=i}return e}parseGeometries(t,e){const n={};let i;if(void 0!==t){const r=new bh;for(let o=0,a=t.length;o<a;o++){let a;const s=t[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Yc[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Yc[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Yc[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Yc[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Yc[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Yc[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Yc[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Yc[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Yc[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Yc[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Yc[s.type]((new qu[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Yc[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Yc[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":i=[];for(let t=0,n=s.shapes.length;t<n;t++){const n=e[s.shapes[t]];i.push(n)}a=new Yc[s.type](i,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":i=[];for(let t=0,n=s.shapes.length;t<n;t++){const n=e[s.shapes[t]];i.push(n)}const t=s.options.extrudePath;void 0!==t&&(s.options.extrudePath=(new qu[t.type]).fromJSON(t)),a=new Yc[s.type](i,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(t,e){const n={},i={};if(void 0!==t){const r=new mh;r.setTextures(e);for(let e=0,o=t.length;e<o;e++){const o=t[e];if("MultiMaterial"===o.type){const t=[];for(let e=0;e<o.materials.length;e++){const i=o.materials[e];void 0===n[i.uuid]&&(n[i.uuid]=r.parse(i)),t.push(n[i.uuid])}i[o.uuid]=t}else void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i}parseAnimations(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n],r=vu.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e}parseImages(t,e){const n=this,i={};let r;function o(t){return n.manager.itemStart(t),r.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t),n.manager.itemEnd(t)})}if(void 0!==t&&t.length>0){const a=new wu(e);(r=new Iu(a)).setCrossOrigin(this.crossOrigin);for(let e=0,r=t.length;e<r;e++){const r=t[e],a=r.url;if(Array.isArray(a)){i[r.uuid]=[];for(let t=0,e=a.length;t<e;t++){const e=a[t],s=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e;i[r.uuid].push(o(s))}}else{const t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r.url)?r.url:n.resourcePath+r.url;i[r.uuid]=o(t)}}}return i}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const i={};if(void 0!==t)for(let r=0,o=t.length;r<o;r++){const o=t[r];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image),(a=Array.isArray(e[o.image])?new Ao(e[o.image]):new Zn(e[o.image])).needsUpdate=!0,a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,Ah)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],xh),a.wrapT=n(o.wrap[1],xh)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,Sh)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,Sh)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),i[o.uuid]=a}return i}parseObject(t,e,n){let i,r,o;function a(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function s(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(n[r])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new As,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new yr(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new ws(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new _s(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new vo(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new lh(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new hh(t.color,t.intensity);break;case"DirectionalLight":i=new uh(t.color,t.intensity);break;case"PointLight":i=new sh(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new fh(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new oh(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new nh(t.color,t.groundColor,t.intensity);break;case"LightProbe":i=(new ph).fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":i=new ao(r=a(t.geometry),o=s(t.material));break;case"InstancedMesh":r=a(t.geometry),o=s(t.material);const e=t.count,n=t.instanceMatrix;(i=new tl(r,o,e)).instanceMatrix=new Sr(new Float32Array(n.array),16);break;case"LOD":i=new Ws;break;case"Line":i=new sl(a(t.geometry),s(t.material),t.mode);break;case"LineLoop":i=new hl(a(t.geometry),s(t.material));break;case"LineSegments":i=new ul(a(t.geometry),s(t.material));break;case"PointCloud":case"Points":i=new yl(a(t.geometry),s(t.material));break;case"Sprite":i=new zs(s(t.material));break;case"Group":i=new ps;break;default:i=new Ji}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(i.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children){const r=t.children;for(let t=0;t<r.length;t++)i.add(this.parseObject(r[t],e,n))}if("LOD"===t.type){void 0!==t.autoUpdate&&(i.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const Ah={UVMapping:rt,CubeReflectionMapping:ot,CubeRefractionMapping:at,EquirectangularReflectionMapping:st,EquirectangularRefractionMapping:lt,CubeUVReflectionMapping:ct,CubeUVRefractionMapping:ut},xh={RepeatWrapping:ht,ClampToEdgeWrapping:ft,MirroredRepeatWrapping:dt},Sh={NearestFilter:pt,NearestMipmapNearestFilter:mt,NearestMipmapLinearFilter:yt,LinearFilter:bt,LinearMipmapNearestFilter:_t,LinearMipmapLinearFilter:At};function Mh(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),xu.call(this,t),this.options={premultiplyAlpha:"none"}}function Eh(){this.type="ShapePath",this.color=new yr,this.subPaths=[],this.currentPath=null}function Th(t){this.type="Font",this.data=t}function Ih(t,e,n,i,r){const o=r.glyphs[t]||r.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");const a=new Eh;let s,l,c,u,h,f,d,p;if(o.o){const t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let r=0,o=t.length;r<o;){switch(t[r++]){case"m":s=t[r++]*e+n,l=t[r++]*e+i,a.moveTo(s,l);break;case"l":s=t[r++]*e+n,l=t[r++]*e+i,a.lineTo(s,l);break;case"q":c=t[r++]*e+n,u=t[r++]*e+i,h=t[r++]*e+n,f=t[r++]*e+i,a.quadraticCurveTo(h,f,c,u);break;case"b":c=t[r++]*e+n,u=t[r++]*e+i,h=t[r++]*e+n,f=t[r++]*e+i,d=t[r++]*e+n,p=t[r++]*e+i,a.bezierCurveTo(h,f,d,p,c,u)}}}return{offsetX:o.ha*e,path:a}}function kh(t){xu.call(this,t)}let Ch;Mh.prototype=Object.assign(Object.create(xu.prototype),{constructor:Mh,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=_u.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(t,a).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(n){_u.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}}),Object.assign(Eh.prototype,{moveTo:function(t,e){return this.currentPath=new $u,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,r,o){return this.currentPath.bezierCurveTo(t,e,n,i,r,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new th;r.curves=i.curves,e.push(r)}return e}function i(t,e){const n=e.length;let i=!1;for(let r=n-1,o=0;o<n;r=o++){let n=e[r],a=e[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[o],s=-s,a=e[r],l=-l),t.y<n.y||t.y>a.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-s*(t.y-n.y);if(0===e)return!0;if(e<0)continue;i=!i}}else{if(t.y!==n.y)continue;if(a.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=a.x)return!0}}return i}const r=pc.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);let a,s,l;const c=[];if(1===o.length)return s=o[0],(l=new th).curves=s.curves,c.push(l),c;let u=!r(o[0].getPoints());u=t?!u:u;const h=[],f=[];let d,p,m=[],g=0;f[g]=void 0,m[g]=[];for(let e=0,n=o.length;e<n;e++)a=r(d=(s=o[e]).getPoints()),(a=t?!a:a)?(!u&&f[g]&&g++,f[g]={s:new th,p:d},f[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:d[0]});if(!f[0])return n(o);if(f.length>1){let t=!1;const e=[];for(let t=0,e=f.length;t<e;t++)h[t]=[];for(let n=0,r=f.length;n<r;n++){const r=m[n];for(let o=0;o<r.length;o++){const a=r[o];let s=!0;for(let r=0;r<f.length;r++)i(a.p,f[r].p)&&(n!==r&&e.push({froms:n,tos:r,hole:o}),s?(s=!1,h[r].push(a)):t=!0);s&&h[n].push(a)}}e.length>0&&(t||(m=h))}for(let t=0,e=f.length;t<e;t++){l=f[t].s,c.push(l);for(let e=0,n=(p=m[t]).length;e<n;e++)l.holes.push(p[e].h)}return c}}),Object.assign(Th.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);const n=[],i=function(t,e,n){const i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,a=[];let s=0,l=0;for(let t=0;t<i.length;t++){const e=i[t];if("\n"===e)s=0,l-=o;else{const t=Ih(e,r,s,l,n);s+=t.offsetX,a.push(t.path)}}return a}(t,e,this.data);for(let t=0,e=i.length;t<e;t++)Array.prototype.push.apply(n,i[t].toShapes());return n}}),kh.prototype=Object.assign(Object.create(xu.prototype),{constructor:kh,load:function(t,e,n,i){const r=this,o=new Mu(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(t){let n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}const i=r.parse(n);e&&e(i)},n,i)},parse:function(t){return new Th(t)}});const Bh={getContext:function(){return void 0===Ch&&(Ch=new(window.AudioContext||window.webkitAudioContext)),Ch},setContext:function(t){Ch=t}};function Rh(t){xu.call(this,t)}function Ph(t,e,n){ph.call(this,void 0,n);const i=(new yr).set(t),r=(new yr).set(e),o=new Qn(i.r,i.g,i.b),a=new Qn(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}function Lh(t,e){ph.call(this,void 0,e);const n=(new yr).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Rh.prototype=Object.assign(Object.create(xu.prototype),{constructor:Rh,load:function(t,e,n,i){const r=this,o=new Mu(r.manager);o.setResponseType("arraybuffer"),o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(n){try{const o=n.slice(0);Bh.getContext().decodeAudioData(o,function(t){e(t)})}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}},n,i)}}),Ph.prototype=Object.assign(Object.create(ph.prototype),{constructor:Ph,isHemisphereLightProbe:!0,copy:function(t){return ph.prototype.copy.call(this,t),this},toJSON:function(t){return ph.prototype.toJSON.call(this,t)}}),Lh.prototype=Object.assign(Object.create(ph.prototype),{constructor:Lh,isAmbientLightProbe:!0,copy:function(t){return ph.prototype.copy.call(this,t),this},toJSON:function(t){return ph.prototype.toJSON.call(this,t)}});const Dh=new Si,Nh=new Si;function Oh(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new vo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new vo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(Oh.prototype,{update:function(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const n=t.projectionMatrix.clone(),i=e.eyeSep/2,r=i*e.near/e.focus,o=e.near*Math.tan(Gn.DEG2RAD*e.fov*.5)/e.zoom;let a,s;Nh.elements[12]=-i,Dh.elements[12]=i,a=-o*e.aspect+r,s=o*e.aspect+r,n.elements[0]=2*e.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(n),a=-o*e.aspect-r,s=o*e.aspect-r,n.elements[0]=2*e.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Nh),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Dh)}});class Fh{constructor(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}const Gh=new Qn,zh=new Jn,Uh=new Qn,Hh=new Qn;class Vh extends Ji{constructor(){super(),this.type="AudioListener",this.context=Bh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Fh}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Gh,zh,Uh),Hh.set(0,0,-1).applyQuaternion(zh),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Gh.x,t),e.positionY.linearRampToValueAtTime(Gh.y,t),e.positionZ.linearRampToValueAtTime(Gh.z,t),e.forwardX.linearRampToValueAtTime(Hh.x,t),e.forwardY.linearRampToValueAtTime(Hh.y,t),e.forwardZ.linearRampToValueAtTime(Hh.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(Gh.x,Gh.y,Gh.z),e.setOrientation(Hh.x,Hh.y,Hh.z,n.x,n.y,n.z)}}class Wh extends Ji{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t){if(void 0===t&&(t=0),!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Zh=new Qn,jh=new Jn,Yh=new Qn,Xh=new Qn;class Jh extends Wh{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Zh,jh,Yh),Xh.set(0,0,1).applyQuaternion(jh);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Zh.x,t),e.positionY.linearRampToValueAtTime(Zh.y,t),e.positionZ.linearRampToValueAtTime(Zh.z,t),e.orientationX.linearRampToValueAtTime(Xh.x,t),e.orientationY.linearRampToValueAtTime(Xh.y,t),e.orientationZ.linearRampToValueAtTime(Xh.z,t)}else e.setPosition(Zh.x,Zh.y,Zh.z),e.setOrientation(Xh.x,Xh.y,Xh.z)}}class Qh{constructor(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}function qh(t,e,n){let i,r,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(qh.prototype,{accumulate:function(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==i;++t)n[r+t]=n[t];o=e}else{const t=e/(o+=e);this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=o},accumulateAdditive:function(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let t=e,r=e+e;t!==r;++t)if(n[t]!==n[t+e]){a.setValue(n,i);break}},saveOriginalState:function(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let t=n,r=i;t!==r;++t)e[t]=e[i+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)t[e+i]=t[n+i]},_slerp:function(t,e,n,i){Jn.slerpFlat(t,e,t,e,t,n,i)},_slerpAdditive:function(t,e,n,i,r){const o=this._workIndex*r;Jn.multiplyQuaternionsFlat(t,o,t,e,t,n),Jn.slerpFlat(t,e,t,e,t,o,i)},_lerp:function(t,e,n,i,r){const o=1-i;for(let a=0;a!==r;++a){const r=e+a;t[r]=t[r]*o+t[n+a]*i}},_lerpAdditive:function(t,e,n,i,r){for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]+t[n+o]*i}}});const Kh=new RegExp("[\\[\\]\\.:\\/]","g"),$h="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",tf=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),ef=/(WCOD+)?/.source.replace("WCOD",$h),nf=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),rf=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),of=new RegExp("^"+tf+ef+nf+rf+"$"),af=["material","materials","bones"];function sf(t,e,n){const i=n||lf.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function lf(t,e,n){this.path=e,this.parsedPath=n||lf.parseTrackName(e),this.node=lf.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function cf(){this.uuid=Gn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(sf.prototype,{getValue:function(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(lf,{Composite:sf,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new lf.Composite(t,e,n):new lf(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Kh,"")},parseTrackName:function(t){const e=of.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==af.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const o=n(r.children);if(o)return o}return null},i=n(t.children);if(i)return i}return null}}),Object.assign(lf.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=lf.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const o=t[i];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(lf.prototype,{_getValue_unbound:lf.prototype.getValue,_setValue_unbound:lf.prototype.setValue}),Object.assign(cf.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let a=void 0,s=t.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let f=e[h];if(void 0===f){f=s++,e[h]=f,t.push(u);for(let t=0,e=o;t!==e;++t)r[t].push(new lf(u,n[t],i[t]))}else if(f<l){a=t[f];const s=--l,c=t[s];e[c.uuid]=f,t[f]=c,e[h]=s,t[s]=u;for(let t=0,e=o;t!==e;++t){const e=r[t],o=e[s];let a=e[f];e[f]=o,void 0===a&&(a=new lf(u,n[t],i[t])),e[s]=a}}else t[f]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=e[s];if(void 0!==l&&l>=r){const o=r++,c=t[o];e[c.uuid]=l,t[l]=c,e[s]=o,t[o]=a;for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[o],r=e[l];e[l]=i,e[o]=r}}}this.nCachedObjects_=r},uncache:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=t.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=e[s];if(void 0!==l)if(delete e[s],l<r){const a=--r,s=t[a],c=--o,u=t[c];e[s.uuid]=l,t[l]=s,e[u.uuid]=a,t[a]=u,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[a],r=e[c];e[l]=i,e[a]=r,e.pop()}}else{const r=--o,a=t[r];r>0&&(e[a.uuid]=l),t[l]=a,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t];e[l]=e[r],e.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[t]=i,o.push(t),a.push(e),r.push(u);for(let n=c,i=s.length;n!==i;++n){const i=s[n];u[n]=new lf(i,t,e)}return u},unsubscribe_:function(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}});function uf(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}uf.prototype=Object.assign(Object.create(Nn.prototype),{constructor:uf,_bindAction:function(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let t=0;t!==r;++t){const r=i[t],l=r.name;let u=c[l];if(void 0!==u)o[t]=u;else{if(void 0!==(u=o[t])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,l));continue}const i=e&&e._propertyBindings[t].binding.parsedPath;++(u=new qh(lf.create(n,l,i),r.ValueTypeName,r.getValueSize())).referenceCount,this._addInactiveBinding(u,s,l),o[t]=u}a[t].resultBuffer=u.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){const i=this._actions,r=this._actionsByClip;let o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[e];void 0===o&&(o={},i[e]=o),o[n]=t,t._cacheIndex=r.length,r.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[r],0===Object.keys(a).length&&delete o[i]},_lendBinding:function(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&((n=new lu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){const i=e||this._root,r=i.uuid;let o="string"==typeof t?vu.findByName(i,t):t;const a=null!==o?o.uuid:t,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:Ze),void 0!==s){const t=s.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new class{constructor(t,e,n,i){this._mixer=t,this._clip=e,this._localRoot=n||null,this.blendMode=i||e.blendMode;const r=e.tracks,o=r.length,a=new Array(o),s={endingStart:He,endingEnd:He};for(let t=0;t!==o;++t){const e=r[t].createInterpolant(null);a[t]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Oe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,o=n/i;t.warp(1,r,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/o,l[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;if(i<0||0===n)return;this._startTime=null,e=n*i}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case je:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);break;case Ze:default:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulate(i,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const o=n===Fe;if(0===t)return-1===r?i:o&&1==(1&r)?e-i:i;if(n===Ne){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1==(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=Ve,i.endingEnd=Ve):(i.endingStart=t?this.zeroSlopeAtStart?Ve:He:We,i.endingEnd=e?this.zeroSlopeAtEnd?Ve:He:We)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=n,this}}(this,o,e,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c},existingAction:function(t,e){const n=e||this._root,i=n.uuid,r="string"==typeof t?vu.findByName(n,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this},update:function(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1;for(let a=0;a!==n;++a){e[a]._update(i,t,r,o)}const a=this._bindings,s=this._nActiveBindings;for(let t=0;t!==s;++t)a[t].apply(o);return this},setTime:function(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,o=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,e[r]=o,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}},uncacheRoot:function(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const i=n[t].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const t in i){const e=i[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}},uncacheAction:function(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class hf{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new hf(void 0===this.value.clone?this.value:this.value.clone())}}function ff(t,e,n){xs.call(this,t,e),this.meshPerAttribute=n||1}function df(t,e,n,i,r){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}function pf(t,e,n,i){this.ray=new xi(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new Di,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function mf(t,e){return t.distance-e.distance}function gf(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)gf(i[t],e,n,!0)}}ff.prototype=Object.assign(Object.create(xs.prototype),{constructor:ff,isInstancedInterleavedBuffer:!0,copy:function(t){return xs.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=xs.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=xs.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.defineProperty(df.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(df.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(pf.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){const i=n||[];return gf(t,this,i,e),i.sort(mf),i},intersectObjects:function(t,e,n){const i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let n=0,r=t.length;n<r;n++)gf(t[n],this,i,e);return i.sort(mf),i}});class yf{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Gn.clamp(e/this.radius,-1,1))),this}}class vf{constructor(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}const bf=new zn;class _f{constructor(t,e){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new zn(1/0,1/0),this.max=void 0!==e?e:new zn(-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=bf.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new zn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new zn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new zn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new zn),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return bf.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const wf=new Qn,Af=new Qn;class xf{constructor(t,e){this.start=void 0!==t?t:new Qn,this.end=void 0!==e?e:new Qn}set(t,e){return this.start.copy(t),this.end.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Qn),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Qn),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Qn),this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){wf.subVectors(t,this.start),Af.subVectors(this.end,this.start);const n=Af.dot(Af);let i=Af.dot(wf)/n;return e&&(i=Gn.clamp(i,0,1)),i}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Qn),this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}function Sf(t){Ji.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Sf.prototype=Object.create(Ji.prototype),Sf.prototype.constructor=Sf,Sf.prototype.isImmediateRenderObject=!0;const Mf=new Qn;class Ef extends Ji{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new Hr,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,e=1,n=32;t<n;t++,e++){const r=t/n*Math.PI*2,o=e/n*Math.PI*2;i.push(Math.cos(r),Math.sin(r),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new Rr(i,3));const r=new el({fog:!1,toneMapped:!1});this.cone=new ul(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Mf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Mf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Tf=new Qn,If=new Si,kf=new Si;class Cf extends ul{constructor(t){const e=function t(e){const n=[];e&&e.isBone&&n.push(e);for(let i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new Hr,i=[],r=[],o=new yr(0,0,1),a=new yr(0,1,0);for(let t=0;t<e.length;t++){const n=e[t];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Rr(i,3)),n.setAttribute("color",new Rr(r,3)),super(n,new el({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");kf.getInverse(this.root.matrixWorld);for(let t=0,n=0;t<e.length;t++){const r=e[t];r.parent&&r.parent.isBone&&(If.multiplyMatrices(kf,r.matrixWorld),Tf.setFromMatrixPosition(If),i.setXYZ(n,Tf.x,Tf.y,Tf.z),If.multiplyMatrices(kf,r.parent.matrixWorld),Tf.setFromMatrixPosition(If),i.setXYZ(n+1,Tf.x,Tf.y,Tf.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class Bf extends ao{constructor(t,e,n){super(new Lc(e,4,2),new wr({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Rf=new Qn,Pf=new yr,Lf=new yr;class Df extends Ji{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new Sc(e);i.rotateY(.5*Math.PI),this.material=new wr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.setAttribute("color",new Sr(o,3)),this.add(new ao(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Pf.copy(this.light.color),Lf.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const i=t<n/2?Pf:Lf;e.setXYZ(t,i.r,i.g,i.b)}e.needsUpdate=!0}t.lookAt(Rf.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Nf extends ul{constructor(t,e,n,i){t=t||10,e=e||10,n=new yr(void 0!==n?n:4473924),i=new yr(void 0!==i?i:8947848);const r=e/2,o=t/e,a=t/2,s=[],l=[];for(let t=0,c=0,u=-a;t<=e;t++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);const e=t===r?n:i;e.toArray(l,c),c+=3,e.toArray(l,c),c+=3,e.toArray(l,c),c+=3,e.toArray(l,c),c+=3}const c=new Hr;c.setAttribute("position",new Rr(s,3)),c.setAttribute("color",new Rr(l,3)),super(c,new el({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class Of extends ul{constructor(t,e,n,i,r,o){t=t||10,e=e||16,n=n||8,i=i||64,r=new yr(void 0!==r?r:4473924),o=new yr(void 0!==o?o:8947848);const a=[],s=[];for(let n=0;n<=e;n++){const i=n/e*(2*Math.PI),l=Math.sin(i)*t,c=Math.cos(i)*t;a.push(0,0,0),a.push(l,0,c);const u=1&n?r:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let e=0;e<=n;e++){const l=1&e?r:o,c=t-t/n*e;for(let t=0;t<i;t++){let e=t/i*(2*Math.PI),n=Math.sin(e)*c,r=Math.cos(e)*c;a.push(n,0,r),s.push(l.r,l.g,l.b),e=(t+1)/i*(2*Math.PI),n=Math.sin(e)*c,r=Math.cos(e)*c,a.push(n,0,r),s.push(l.r,l.g,l.b)}}const l=new Hr;l.setAttribute("position",new Rr(a,3)),l.setAttribute("color",new Rr(s,3)),super(l,new el({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Ff=new Qn,Gf=new Qn,zf=new Qn;class Uf extends Ji{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);let i=new Hr;i.setAttribute("position",new Rr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new el({fog:!1,toneMapped:!1});this.lightPlane=new sl(i,r),this.add(this.lightPlane),(i=new Hr).setAttribute("position",new Rr([0,0,0,0,0,1],3)),this.targetLine=new sl(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Ff.setFromMatrixPosition(this.light.matrixWorld),Gf.setFromMatrixPosition(this.light.target.matrixWorld),zf.subVectors(Gf,Ff),this.lightPlane.lookAt(Gf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gf),this.targetLine.scale.z=zf.length()}}const Hf=new Qn,Vf=new yo;class Wf extends ul{constructor(t){const e=new Hr,n=new el({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={},a=new yr(16755200),s=new yr(16711680),l=new yr(43775),c=new yr(16777215),u=new yr(3355443);function h(t,e,n){f(t,n),f(e,n)}function f(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(i.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),e.setAttribute("position",new Rr(i,3)),e.setAttribute("color",new Rr(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const t=this.geometry,e=this.pointMap;Vf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Zf("c",e,t,Vf,0,0,-1),Zf("t",e,t,Vf,0,0,1),Zf("n1",e,t,Vf,-1,-1,-1),Zf("n2",e,t,Vf,1,-1,-1),Zf("n3",e,t,Vf,-1,1,-1),Zf("n4",e,t,Vf,1,1,-1),Zf("f1",e,t,Vf,-1,-1,1),Zf("f2",e,t,Vf,1,-1,1),Zf("f3",e,t,Vf,-1,1,1),Zf("f4",e,t,Vf,1,1,1),Zf("u1",e,t,Vf,.7,1.1,-1),Zf("u2",e,t,Vf,-.7,1.1,-1),Zf("u3",e,t,Vf,0,2,-1),Zf("cf1",e,t,Vf,-1,0,1),Zf("cf2",e,t,Vf,1,0,1),Zf("cf3",e,t,Vf,0,-1,1),Zf("cf4",e,t,Vf,0,1,1),Zf("cn1",e,t,Vf,-1,0,-1),Zf("cn2",e,t,Vf,1,0,-1),Zf("cn3",e,t,Vf,0,-1,-1),Zf("cn4",e,t,Vf,0,1,-1),t.getAttribute("position").needsUpdate=!0}}function Zf(t,e,n,i,r,o,a){Hf.set(r,o,a).unproject(i);const s=e[t];if(void 0!==s){const t=n.getAttribute("position");for(let e=0,n=s.length;e<n;e++)t.setXYZ(s[e],Hf.x,Hf.y,Hf.z)}}const jf=new $n;class Yf extends ul{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Hr;r.setIndex(new Sr(n,1)),r.setAttribute("position",new Sr(i,3)),super(r,new el({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&jf.setFromObject(this.object),jf.isEmpty())return;const e=jf.min,n=jf.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return ul.prototype.copy.call(this,t),this.object=t.object,this}}class Xf extends ul{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Hr;i.setIndex(new Sr(n,1)),i.setAttribute("position",new Rr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new el({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class Jf extends sl{constructor(t,e,n){const i=void 0!==n?n:16776960,r=new Hr;r.setAttribute("position",new Rr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),super(r,new el({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;const o=new Hr;o.setAttribute("position",new Rr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new ao(o,new wr({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?m:p,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const Qf=new Qn;let qf,Kf;class $f extends Ji{constructor(t,e,n,i,r,o){super(),this.type="ArrowHelper",void 0===t&&(t=new Qn(0,0,1)),void 0===e&&(e=new Qn(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===qf&&((qf=new Hr).setAttribute("position",new Rr([0,0,0,0,1,0],3)),(Kf=new Bl(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new sl(qf,new el({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ao(Kf,new wr({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Qf.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Qf,e)}}setLength(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class td extends ul{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Hr;n.setAttribute("position",new Rr(e,3)),n.setAttribute("color",new Rr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new el({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const ed=4,nd=8,id=Math.pow(2,nd),rd=[.125,.215,.35,.446,.526,.582],od=nd-ed+1+rd.length,ad=20,sd={[Qe]:0,[qe]:1,[$e]:2,[en]:3,[nn]:4,[rn]:5,[Ke]:6},ld=new lh,{_lodPlanes:cd,_sizeLods:ud,_sigmas:hd}=function(){const t=[],e=[],n=[];let i=nd;for(let r=0;r<od;r++){const o=Math.pow(2,i);e.push(o);let a=1/o;r>nd-ed?a=rd[r-nd+ed-1]:0==r&&(a=0),n.push(a);const s=1/(o-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,f=6,d=3,p=2,m=1,g=new Float32Array(d*f*h),y=new Float32Array(p*f*h),v=new Float32Array(m*f*h);for(let t=0;t<h;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];g.set(i,d*f*t),y.set(u,p*f*t);const r=[t,t,t,t,t,t];v.set(r,m*f*t)}const b=new Hr;b.setAttribute("position",new Sr(g,d)),b.setAttribute("uv",new Sr(y,p)),b.setAttribute("faceIndex",new Sr(v,m)),t.push(b),i>ed&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}();let fd=null;const dd=(1+Math.sqrt(5))/2,pd=1/dd,md=[new Qn(1,1,1),new Qn(-1,1,1),new Qn(1,1,-1),new Qn(-1,1,-1),new Qn(0,dd,pd),new Qn(0,dd,-pd),new Qn(pd,0,dd),new Qn(-pd,0,dd),new Qn(dd,pd,0),new Qn(-dd,pd,0)];class gd{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),n=new Qn(0,1,0);return new Jc({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:sd[Qe]},outputEncoding:{value:sd[Qe]}},vertexShader:wd(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Ad()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}(ad),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){fd=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=_d(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=bd(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<cd.length;t++)cd[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(fd),t.scissorTest=!1,vd(t,0,0,t.width,t.height)}_fromTexture(t){fd=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:pt,minFilter:pt,generateMipmaps:!1,type:St,format:Ut,encoding:function(t){return void 0!==t&&t.type===St&&(t.encoding===Qe||t.encoding===qe||t.encoding===Ke)}(t)?t.encoding:$e,depthBuffer:!1},n=yd(e);return n.depthBuffer=!t,this._pingPongRenderTarget=yd(e),n}_compileMaterial(t){const e=new ao(cd[0],t);this._renderer.compile(e,ld)}_sceneToCubeUV(t,e,n,i){const r=new vo(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.outputEncoding,c=s.toneMapping,u=s.getClearColor(),h=s.getClearAlpha();s.toneMapping=K,s.outputEncoding=Qe;let f=t.background;if(f&&f.isColor){f.convertSRGBToLinear();const e=Math.max(f.r,f.g,f.b),n=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);f=f.multiplyScalar(Math.pow(2,-n));const i=(n+128)/255;s.setClearColor(f,i),t.background=null}for(let e=0;e<6;e++){const n=e%3;0==n?(r.up.set(0,o[e],0),r.lookAt(a[e],0,0)):1==n?(r.up.set(0,0,o[e]),r.lookAt(0,a[e],0)):(r.up.set(0,o[e],0),r.lookAt(0,0,a[e])),vd(i,n*id,e>2?id:0,id,id),s.setRenderTarget(i),s.render(t,r)}s.toneMapping=c,s.outputEncoding=l,s.setClearColor(u,h)}_textureToCubeUV(t,e){const n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=_d()):null==this._equirectShader&&(this._equirectShader=bd());const i=t.isCubeTexture?this._cubemapShader:this._equirectShader,r=new ao(cd[0],i),o=i.uniforms;o.envMap.value=t,t.isCubeTexture||o.texelSize.value.set(1/t.image.width,1/t.image.height),o.inputEncoding.value=sd[t.encoding],o.outputEncoding.value=sd[e.texture.encoding],vd(e,0,0,3*id,2*id),n.setRenderTarget(e),n.render(r,ld)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<od;e++){const n=Math.sqrt(hd[e]*hd[e]-hd[e-1]*hd[e-1]),i=md[(e-1)%md.length];this._blur(t,e-1,e,n,i)}e.autoClear=n}_blur(t,e,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,i,"latitudinal",r),this._halfBlur(o,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new ao(cd[i],l),u=l.uniforms,h=ud[n]-1,f=isFinite(r)?Math.PI/(2*h):2*Math.PI/(2*ad-1),d=r/f,p=isFinite(r)?1+Math.floor(3*d):ad;p>ad&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${ad}`);const m=[];let g=0;for(let t=0;t<ad;++t){const e=t/d,n=Math.exp(-e*e/2);m.push(n),0==t?g+=n:t<p&&(g+=2*n)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;u.envMap.value=t.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=f,u.mipInt.value=nd-n,u.inputEncoding.value=sd[t.texture.encoding],u.outputEncoding.value=sd[t.texture.encoding];const y=ud[i];vd(e,3*Math.max(0,id-2*y),(0===i?0:2*id)+2*y*(i>nd-ed?i-nd+ed:0),3*y,2*y),s.setRenderTarget(e),s.render(c,ld)}}function yd(t){const e=new Yn(3*id,3*id,t);return e.texture.mapping=ct,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function vd(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function bd(){return new Jc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new zn(1,1)},inputEncoding:{value:sd[Qe]},outputEncoding:{value:sd[Qe]}},vertexShader:wd(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Ad()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}function _d(){return new Jc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:sd[Qe]},outputEncoding:{value:sd[Qe]}},vertexShader:wd(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Ad()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}function wd(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Ad(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function xd(t,e,n,i,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new vr(t,e,n,r,o,a)}const Sd=0,Md=1,Ed=0,Td=1,Id=2;function kd(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Cd(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Bd(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new yl(t,e)}function Rd(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new zs(t)}function Pd(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new yl(t,e)}function Ld(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new fl(t)}function Dd(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new fl(t)}function Nd(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new fl(t)}function Od(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Qn(t,e,n)}function Fd(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Sr(t,e).setUsage(En)}function Gd(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Mr(t,e)}function zd(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Er(t,e)}function Ud(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Tr(t,e)}function Hd(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ir(t,e)}function Vd(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new kr(t,e)}function Wd(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Cr(t,e)}function Zd(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Br(t,e)}function jd(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Rr(t,e)}function Yd(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Pr(t,e)}function Xd(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),zu.call(this,t),this.type="catmullrom",this.closed=!0}function Jd(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),zu.call(this,t),this.type="catmullrom"}function Qd(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),zu.call(this,t),this.type="catmullrom"}function qd(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new td(t)}function Kd(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Yf(t,e)}function $d(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ul(new Hl(t.geometry),new el({color:void 0!==e?e:16777215}))}function tp(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ul(new jc(t.geometry),new el({color:void 0!==e?e:16777215}))}function ep(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Mu(t)}function np(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Cu(t)}function ip(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new xo(t,n)}Ru.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ru.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Ku.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=new Tl;for(let n=0,i=t.length;n<i;n++){const i=t[n];e.vertices.push(new Qn(i.x,i.y,i.z||0))}return e}}),Object.assign($u.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Xd.prototype=Object.create(zu.prototype),Jd.prototype=Object.create(zu.prototype),Qd.prototype=Object.create(zu.prototype),Object.assign(Qd.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Nf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Cf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(xu.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),gh.extractUrlBase(t)}}),xu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(_f.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign($n.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(mi.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),To.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},xf.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Gn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Gn.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Gn.ceilPowerOfTwo(t)}}),Object.assign(Un.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Si.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Qn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,o)}}),$i.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Jn.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(xi.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(ur.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(ur,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ur.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ur.getNormal(t,e,n,i)}}),Object.assign(th.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new bc(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Pc(this,t)}}),Object.assign(zn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Qn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(jn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Tl.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(Ji.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Ji.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(ao.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(ao.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Ye},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Ws.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Xs.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Zs.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Ru.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),vo.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(eh.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Sr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===En},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(En)}}}),Object.assign(Sr.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?En:Mn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Hr.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Sr(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Hr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(yh.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(pf.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(xs.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===En},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(xs.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?En:Mn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(yc.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(As.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(hf.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(_r.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new yr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===y}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(Kc.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(qc.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(go.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(vs.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(vs.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?qe:Qe}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(us.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Yn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Wh.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Rh).load(t,function(t){e.setBuffer(t)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Qh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},wo.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},wo.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)};const rp={merge:function(t,e,n){let i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function op(){console.error("THREE.CanvasRenderer has been removed")}function ap(){console.error("THREE.JSONLoader has been removed.")}Vn.crossOrigin=void 0,Vn.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Bu;r.setCrossOrigin(this.crossOrigin);const o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},Vn.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new ku;r.setCrossOrigin(this.crossOrigin);const o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},Vn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Vn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const sp={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function lp(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}}))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(0);class r{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,o,a,s,l,c,u,h,f,d,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new r).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/o.setFromMatrixColumn(t,0).length(),r=1/o.setFromMatrixColumn(t,1).length(),a=1/o.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const t=o*c,n=o*u,i=a*c,r=a*u;e[0]=s*c,e[4]=-s*u,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-a*s,e[2]=r-t*l,e[6]=i+n*l,e[10]=o*s}else if("YXZ"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t+r*a,e[4]=i*a-n,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-a,e[2]=n*a-i,e[6]=r+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t-r*a,e[4]=-o*u,e[8]=i+n*a,e[1]=n+i*a,e[5]=o*c,e[9]=r-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*c,n=o*u,i=a*c,r=a*u;e[0]=s*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=s*u,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*l,i=a*s,r=a*l;e[0]=s*c,e[4]=r-t*u,e[8]=i*u+n,e[1]=u,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=n*u+i,e[10]=t-r*u}else if("XZY"===t.order){const t=o*s,n=o*l,i=a*s,r=a*l;e[0]=s*c,e[4]=-u,e[8]=l*c,e[1]=t*u+r,e[5]=o*c,e[9]=n*u-i,e[2]=i*u-n,e[6]=a*c,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(s,t,l)}lookAt(t,e,n){const i=this.elements;return h.subVectors(t,e),0===h.lengthSq()&&(h.z=1),h.normalize(),c.crossVectors(n,h),0===c.lengthSq()&&(1===Math.abs(n.z)?h.x+=1e-4:h.z+=1e-4,h.normalize(),c.crossVectors(n,h)),c.normalize(),u.crossVectors(h,c),i[0]=c.x,i[4]=u.x,i[8]=h.x,i[1]=c.y,i[5]=u.y,i[9]=h.y,i[2]=c.z,i[6]=u.z,i[10]=h.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],g=n[14],y=n[3],v=n[7],b=n[11],_=n[15],w=i[0],A=i[4],x=i[8],S=i[12],M=i[1],E=i[5],T=i[9],I=i[13],k=i[2],C=i[6],B=i[10],R=i[14],P=i[3],L=i[7],D=i[11],N=i[15];return r[0]=o*w+a*M+s*k+l*P,r[4]=o*A+a*E+s*C+l*L,r[8]=o*x+a*T+s*B+l*D,r[12]=o*S+a*I+s*R+l*N,r[1]=c*w+u*M+h*k+f*P,r[5]=c*A+u*E+h*C+f*L,r[9]=c*x+u*T+h*B+f*D,r[13]=c*S+u*I+h*R+f*N,r[2]=d*w+p*M+m*k+g*P,r[6]=d*A+p*E+m*C+g*L,r[10]=d*x+p*T+m*B+g*D,r[14]=d*S+p*I+m*R+g*N,r[3]=y*w+v*M+b*k+_*P,r[7]=y*A+v*E+b*C+_*L,r[11]=y*x+v*T+b*B+_*D,r[15]=y*S+v*I+b*R+_*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],u=t[6],h=t[10],f=t[14];return t[3]*(+r*s*u-i*l*u-r*a*h+n*l*h+i*a*f-n*s*f)+t[7]*(+e*s*f-e*l*h+r*o*h-i*o*f+i*l*c-r*s*c)+t[11]*(+e*l*u-e*a*f-r*o*u+n*o*f+r*a*c-n*l*c)+t[15]*(-i*a*c-e*s*u+e*a*h+i*o*u-n*o*h+n*s*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const n=this.elements,i=t.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],f=i[8],d=i[9],p=i[10],m=i[11],g=i[12],y=i[13],v=i[14],b=i[15],_=d*v*h-y*p*h+y*u*m-c*v*m-d*u*b+c*p*b,w=g*p*h-f*v*h-g*u*m+l*v*m+f*u*b-l*p*b,A=f*y*h-g*d*h+g*c*m-l*y*m-f*c*b+l*d*b,x=g*d*u-f*y*u-g*c*p+l*y*p+f*c*v-l*d*v,S=r*_+o*w+a*A+s*x;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/S;return n[0]=_*M,n[1]=(y*p*s-d*v*s-y*a*m+o*v*m+d*a*b-o*p*b)*M,n[2]=(c*v*s-y*u*s+y*a*h-o*v*h-c*a*b+o*u*b)*M,n[3]=(d*u*s-c*p*s-d*a*h+o*p*h+c*a*m-o*u*m)*M,n[4]=w*M,n[5]=(f*v*s-g*p*s+g*a*m-r*v*m-f*a*b+r*p*b)*M,n[6]=(g*u*s-l*v*s-g*a*h+r*v*h+l*a*b-r*u*b)*M,n[7]=(l*p*s-f*u*s+f*a*h-r*p*h-l*a*m+r*u*m)*M,n[8]=A*M,n[9]=(g*d*s-f*y*s-g*o*m+r*y*m+f*o*b-r*d*b)*M,n[10]=(l*y*s-g*c*s+g*o*h-r*y*h-l*o*b+r*c*b)*M,n[11]=(f*c*s-l*d*s-f*o*h+r*d*h+l*o*m-r*c*m)*M,n[12]=x*M,n[13]=(f*y*a-g*d*a+g*o*p-r*y*p-f*o*v+r*d*v)*M,n[14]=(g*c*a-l*y*a-g*o*u+r*y*u+l*o*v-r*c*v)*M,n[15]=(l*d*a-f*c*a+f*o*u-r*d*u-l*o*p+r*c*p)*M,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,l=r+r,c=o+o,u=a+a,h=r*l,f=r*c,d=r*u,p=o*c,m=o*u,g=a*u,y=s*l,v=s*c,b=s*u,_=n.x,w=n.y,A=n.z;return i[0]=(1-(p+g))*_,i[1]=(f+b)*_,i[2]=(d-v)*_,i[3]=0,i[4]=(f-b)*w,i[5]=(1-(h+g))*w,i[6]=(m+y)*w,i[7]=0,i[8]=(d+v)*A,i[9]=(m-y)*A,i[10]=(1-(h+p))*A,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=o.set(i[0],i[1],i[2]).length();const s=o.set(i[4],i[5],i[6]).length(),l=o.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],a.copy(this);const c=1/r,u=1/s,h=1/l;return a.elements[0]*=c,a.elements[1]*=c,a.elements[2]*=c,a.elements[4]*=u,a.elements[5]*=u,a.elements[6]*=u,a.elements[8]*=h,a.elements[9]*=h,a.elements[10]*=h,e.setFromRotationMatrix(a),n.x=r,n.y=s,n.z=l,this}makePerspective(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),h=-(o+r)/(o-r),f=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,i,r,o){const a=this.elements,s=1/(e-t),l=1/(n-i),c=1/(o-r),u=(e+t)*s,h=(n+i)*l,f=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const o=new i.a,a=new r,s=new i.a(0,0,0),l=new i.a(1,1,1),c=new i.a,u=new i.a,h=new i.a},function(t,e,n){"use strict";var i=n(8),r=n(52),o=n(51);var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n.name="interpolationIdentity",n._currentVoxel="currentVoxel",n._dataValue="dataValue",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.api=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._base,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._currentVoxel,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._dataValue;return this._base=t,this.compute(e,n)},e.prototype.compute=function(t,e){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+t+", "+e+");"},e.prototype.computeDefinition=function(){this._definition="\nvoid "+this._name+"(in vec3 currentVoxel, out vec4 dataValue){\n  // lower bound\n  vec3 rcurrentVoxel = vec3(floor(currentVoxel.x + 0.5 ), floor(currentVoxel.y + 0.5 ), floor(currentVoxel.z + 0.5 ));\n  ivec3 voxel = ivec3(int(rcurrentVoxel.x), int(rcurrentVoxel.y), int(rcurrentVoxel.z));\n\n  vec4 tmp = vec4(0., 0., 0., 0.);\n  int offset = 0;\n\n  "+o.a.api(this._base,"voxel","tmp","offset")+"\n  "+r.a.api(this._base,"tmp","offset","dataValue")+"\n}\n    "},e}(i.a);e.a=new a},function(t,e,n){"use strict";var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._rightHanded=!0}return t.prototype.pixelRepresentation=function(){return 0},t.prototype.pixelPaddingValue=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null},t.prototype.modality=function(){return"unknown"},t.prototype.segmentationType=function(){return"unknown"},t.prototype.segmentationSegments=function(){return[]},t.prototype.referencedSegmentNumber=function(t){return-1},t.prototype.rightHanded=function(){return this._rightHanded},t.prototype.spacingBetweenSlices=function(){return null},t.prototype.numberOfChannels=function(){return 1},t.prototype.sliceThickness=function(){return null},t.prototype.dimensionIndexValues=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null},t.prototype.instanceNumber=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},t.prototype.windowCenter=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null},t.prototype.windowWidth=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null},t.prototype.rescaleSlope=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return 1},t.prototype.rescaleIntercept=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return 0},t.prototype.ultrasoundRegions=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[]},t.prototype.frameTime=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null},t.prototype._decompressUncompressed=function(){},t.prototype._swap16=function(t){return(255&t)<<8|t>>8&255},t.prototype._swap32=function(t){return(255&t)<<24|(65280&t)<<8|t>>8&65280|t>>24&255},t.prototype.invert=function(){return!1},t.prototype.transferSyntaxUID=function(){return"no value provided"},t.prototype.studyDate=function(){return"no value provided"},t.prototype.studyDescription=function(){return"no value provided"},t.prototype.seriesDate=function(){return"no value provided"},t.prototype.seriesDescription=function(){return"no value provided"},t.prototype.rawHeader=function(){return"no value provided"},t.prototype.patientID=function(){return"no value provided"},t.prototype.patientName=function(){return"no value provided"},t.prototype.patientAge=function(){return"no value provided"},t.prototype.patientBirthdate=function(){return"no value provided"},t.prototype.patientSex=function(){return"no value provided"},t.prototype.minMaxPixelData=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],n=t.length,i=0;i<n;i++){var r=t[i];e[0]=Math.min(e[0],r),e[1]=Math.max(e[1],r)}return e},t}();e.a=i},function(t,e,n){"use strict";var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.matrix4=function(t){return!(null===t||void 0===t||!t.hasOwnProperty("elements")||16!==t.elements.length||"function"!=typeof t.identity||"function"!=typeof t.copy||"function"!=typeof t.determinant)},t.vector3=function(t){return!(!(null!==t&&void 0!==t&&t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&t.hasOwnProperty("z"))||t.hasOwnProperty("w"))},t.box=function(t){return!!(null!==t&&void 0!==t&&t.hasOwnProperty("center")&&this.vector3(t.center)&&t.hasOwnProperty("halfDimensions")&&this.vector3(t.halfDimensions)&&t.halfDimensions.x>=0&&t.halfDimensions.y>=0&&t.halfDimensions.z>=0)},t.ray=function(t){return!!(null!==t&&void 0!==t&&t.hasOwnProperty("position")&&this.vector3(t.position)&&t.hasOwnProperty("direction")&&this.vector3(t.direction))},t}();e.a=i},function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,a;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(a=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,r),r+=o.length;return a}},o={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(i)},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name="shadersBase",this._base={_functions:{},_uniforms:{}},this._definition=""}return i(t,[{key:"name",get:function(){return this._name},set:function(t){this._name=t}}]),t}();e.a=r},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.DataStream=i.lossless.DataStream||function(t,e,n){this.buffer=new DataView(t,e,n),this.index=0},i.lossless.DataStream.prototype.get16=function(){var t=this.buffer.getUint16(this.index,!1);return this.index+=2,t},i.lossless.DataStream.prototype.get8=function(){var t=this.buffer.getUint8(this.index);return this.index+=1,t},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.DataStream)},function(t,e,n){"use strict";var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=-1}return t.prototype.mergeModels=function(t,e){if(!this._validateModelArray(t)||!this._validateModelArray(e))return window.console.log("invalid inputs provided."),!1;for(var n=0,i=e.length;n<i;n++)for(var r=0,o=t.length;r<o&&!t[r].merge(e[n]);r++)r===t.length-1&&t.push(e[n]);return!0},t.prototype.merge=function(t){return!!this.validate(t)&&this._id===t._id},t.prototype.validate=function(t){return!(!t||null===t||"function"!=typeof t.merge)},t.prototype._validateModelArray=function(t){if(null===t||Array!==t.constructor)return window.console.log("invalid model array provided."),!1;for(var e=0;e<t.length;e++)if(!t[e]||null===t[e]||"function"!=typeof t[e].validate||!t[e].validate(t[e]))return!1;return!0},t}();e.a=i},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return r});const i=1022,r=1023},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.Utils=i.lossless.Utils||{},i.lossless.Utils.createArray=function(t){var e=new Array(t||0),n=t;if(arguments.length>1)for(var r=Array.prototype.slice.call(arguments,1);n--;)e[t-1-n]=i.lossless.Utils.createArray.apply(this,r);return e},i.lossless.Utils.makeCRCTable=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e},i.lossless.Utils.crc32=function(t){for(var e=i.lossless.Utils.crcTable||(i.lossless.Utils.crcTable=i.lossless.Utils.makeCRCTable()),n=-1,r=0;r<t.byteLength;r++)n=n>>>8^e[255&(n^t.getUint8(r))];return(-1^n)>>>0},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.Utils)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});const i=[];for(let t=0;t<256;t++)i[t]=(t<16?"0":"")+t.toString(16);let r=1234567;const o={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(i[255&t]+i[t>>8&255]+i[t>>16&255]+i[t>>24&255]+"-"+i[255&e]+i[e>>8&255]+"-"+i[e>>16&15|64]+i[e>>24&255]+"-"+i[63&n|128]+i[n>>8&255]+"-"+i[n>>16&255]+i[n>>24&255]+i[255&r]+i[r>>8&255]+i[r>>16&255]+i[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(r=t%2147483647),((r=16807*r%2147483647)-1)/2147483646},degToRad:function(t){return t*o.DEG2RAD},radToDeg:function(t){return t*o.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+i)/2),u=a((e+i)/2),h=o((e-i)/2),f=a((e-i)/2),d=o((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":t.set(s*u,l*h,l*f,s*c);break;case"YZY":t.set(l*f,s*u,l*h,s*c);break;case"ZXZ":t.set(l*h,l*f,s*u,s*c);break;case"XZX":t.set(s*u,l*p,l*d,s*c);break;case"YXY":t.set(l*d,s*u,l*p,s*c);break;case"ZYZ":t.set(l*p,l*d,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}}},function(t,e,n){"use strict";var i=i||{};i.NIFTI1=i.NIFTI1||n(33),i.NIFTI2=i.NIFTI2||n(98),i.Utils=i.Utils||n(20);var r=r||n(15);i.isNIFTI1=function(t){var e,n,r,o;return n=(e=new DataView(t)).getUint8(i.NIFTI1.MAGIC_NUMBER_LOCATION),r=e.getUint8(i.NIFTI1.MAGIC_NUMBER_LOCATION+1),o=e.getUint8(i.NIFTI1.MAGIC_NUMBER_LOCATION+2),!(n!==i.NIFTI1.MAGIC_NUMBER[0]||r!==i.NIFTI1.MAGIC_NUMBER[1]||o!==i.NIFTI1.MAGIC_NUMBER[2])},i.isNIFTI2=function(t){var e,n,r,o;return n=(e=new DataView(t)).getUint8(i.NIFTI2.MAGIC_NUMBER_LOCATION),r=e.getUint8(i.NIFTI2.MAGIC_NUMBER_LOCATION+1),o=e.getUint8(i.NIFTI2.MAGIC_NUMBER_LOCATION+2),!(n!==i.NIFTI2.MAGIC_NUMBER[0]||r!==i.NIFTI2.MAGIC_NUMBER[1]||o!==i.NIFTI2.MAGIC_NUMBER[2])},i.isNIFTI=function(t){return i.isNIFTI1(t)||i.isNIFTI2(t)},i.isCompressed=function(t){var e,n,r;if(t){if(n=(e=new DataView(t)).getUint8(0),r=e.getUint8(1),n===i.Utils.GUNZIP_MAGIC_COOKIE1)return!0;if(r===i.Utils.GUNZIP_MAGIC_COOKIE2)return!0}return!1},i.decompress=function(t){return r.inflate(t).buffer},i.readHeader=function(t){var e=null;return i.isCompressed(t)&&(t=i.decompress(t)),i.isNIFTI1(t)?e=new i.NIFTI1:i.isNIFTI2(t)&&(e=new i.NIFTI2),e?e.readHeader(t):console.error("That file does not appear to be NIFTI!"),e},i.hasExtension=function(t){return 0!=t.extensionFlag[0]},i.readImage=function(t,e){var n=t.vox_offset,i=1,r=1;t.dims[4]&&(i=t.dims[4]),t.dims[5]&&(r=t.dims[5]);var o=t.dims[1]*t.dims[2]*t.dims[3]*i*r*(t.numBitsPerVoxel/8);return e.slice(n,n+o)},i.readExtension=function(t,e){var n=t.getExtensionLocation(),i=t.extensionSize;return e.slice(n,n+i)},i.readExtensionData=function(t,e){var n=t.getExtensionLocation(),i=t.extensionSize;return e.slice(n+8,n+i-8)},"undefined"!==typeof t&&t.exports&&(t.exports=i)},function(t,e,n){"use strict";var i={};(0,n(7).assign)(i,n(80),n(83),n(30)),t.exports=i},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";t.exports=function(t){return"string"==typeof t}},function(t,e,n){"use strict";var i=n(93);t.exports=function(t){return i(t)&&t>=0}},function(t,e,n){"use strict";var i=n(17),r=n(18),o=9007199254740991;t.exports=function(t,e){var n,a;if(!i(t))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+t+"`.");if(!r(e))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+e+"`.");if(0===t.length||0===e)return"";if(t.length*e>o)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");for(n="",a=e;1==(1&a)&&(n+=t),0!=(a>>>=1);)t+=t;return n}},function(t,e,n){"use strict";var i=i||{};i.Utils=i.Utils||{},i.Utils.crcTable=null,i.Utils.GUNZIP_MAGIC_COOKIE1=31,i.Utils.GUNZIP_MAGIC_COOKIE2=139,i.Utils.getStringAt=function(t,e,n){var i,r,o="";for(i=e;i<n;i+=1)0!==(r=t.getUint8(i))&&(o+=String.fromCharCode(r));return o},i.Utils.getByteAt=function(t,e){return t.getInt8(e)},i.Utils.getShortAt=function(t,e,n){return t.getInt16(e,n)},i.Utils.getIntAt=function(t,e,n){return t.getInt32(e,n)},i.Utils.getFloatAt=function(t,e,n){return t.getFloat32(e,n)},i.Utils.getDoubleAt=function(t,e,n){return t.getFloat64(e,n)},i.Utils.getLongAt=function(t,e,n){var r,o=[],a=0;for(r=0;r<8;r+=1)o[r]=i.Utils.getByteAt(t,e+r,n);for(r=o.length-1;r>=0;r--)a=256*a+o[r];return a},i.Utils.toArrayBuffer=function(t){var e,n,i;for(e=new ArrayBuffer(t.length),n=new Uint8Array(e),i=0;i<t.length;i+=1)n[i]=t[i];return e},i.Utils.isString=function(t){return"string"==typeof t||t instanceof String},i.Utils.formatNumber=function(t,e){var n=0;return n=i.Utils.isString(t)?Number(t):t,n=e?n.toPrecision(5):n.toPrecision(7),parseFloat(n)},i.Utils.makeCRCTable=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e},i.Utils.crc32=function(t){for(var e=i.Utils.crcTable||(i.Utils.crcTable=i.Utils.makeCRCTable()),n=-1,r=0;r<t.byteLength;r++)n=n>>>8^e[255&(n^t.getUint8(r))];return(-1^n)>>>0},"undefined"!==typeof t&&t.exports&&(t.exports=i.Utils)},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,c=[],u=!1,h=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var t=s(f);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||u||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i=n(4),r=n(53);e.a=function(t,e,n,o){switch(t._uniforms.uInterpolation.value){case 0:return i.a.api(t,e,n);case 1:return r.a.api(t,e,n,o);default:return i.a.api(t,e,n)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.blue="#00B0FF",t.yellow="#FFEB3B",t.red="#F50057",t.green="#76FF03",t.white="#FFF",t.lightRed="#F77"}(e.COLORS||(e.COLORS={}));var i=function(){function t(){}return t.cielab2XYZ=function(t,e,n){var i=(t+16)/116,r=e/500+i,o=i-n/200;return i=Math.pow(i,3)>.008856?Math.pow(i,3):(i-16/116)/7.787,[95.047*(r=Math.pow(r,3)>.008856?Math.pow(r,3):(r-16/116)/7.787),100*i,108.883*(o=Math.pow(o,3)>.008856?Math.pow(o,3):(o-16/116)/7.787)]},t.xyz2RGB=function(t,e,n){var i=3.2406*(t/=100)+-1.5372*(e/=100)+-.4986*(n/=100),r=-.9689*t+1.8758*e+.0415*n,o=.0557*t+-.204*e+1.057*n;return i>.0031308?i=1.055*Math.pow(i,1/2.4)-.055:i*=12.92,r>.0031308?r=1.055*Math.pow(r,1/2.4)-.055:r*=12.92,o>.0031308?o=1.055*Math.pow(o,1/2.4)-.055:o*=12.92,[i*=255,r*=255,o*=255]},t.cielab2RGB=function(t,e,n){if(void 0===t&&(t=50),void 0===e&&(e=0),void 0===n&&(n=0),!(t>=0&&t<=100))return null;var i=this.cielab2XYZ(t,e,n),r=i[0],o=i[1],a=i[2];return this.xyz2RGB(r,o,a)},t}();e.default=i},function(t,e,n){(function(e,i){t.exports=function(t){var r,o=void 0!==(t=t||{})?t:{},a={};for(r in o)o.hasOwnProperty(r)&&(a[r]=o[r]);o.arguments=[],o.thisProgram="./this.program",o.quit=function(t,e){throw e},o.preRun=[],o.postRun=[];var s,l,c=!1,u=!1,h=!1,f=!1;if(o.ENVIRONMENT)if("WEB"===o.ENVIRONMENT)c=!0;else if("WORKER"===o.ENVIRONMENT)u=!0;else if("NODE"===o.ENVIRONMENT)h=!0;else{if("SHELL"!==o.ENVIRONMENT)throw new Error("Module['ENVIRONMENT'] value is not valid. must be one of: WEB|WORKER|NODE|SHELL.");f=!0}else c="object"==typeof window,u="function"==typeof importScripts,h="object"==typeof e&&!c&&!u,f=!c&&!h&&!u;h?(o.read=function(t,e){var i;return(i=Tt(t))||(s||(s=n(103)),l||(l=n(104)),t=l.normalize(t),i=s.readFileSync(t)),e?i:i.toString()},o.readBinary=function(t){var e=o.read(t,!0);return e.buffer||(e=new Uint8Array(e)),v(e.buffer),e},e.argv.length>1&&(o.thisProgram=e.argv[1].replace(/\\/g,"/")),o.arguments=e.argv.slice(2),e.on("uncaughtException",function(t){if(!(t instanceof zt))throw t}),e.on("unhandledRejection",function(t,n){e.exit(1)}),o.inspect=function(){return"[Emscripten Module object]"}):f?("undefined"!=typeof read&&(o.read=function(t){var e=Tt(t);return e?Mt(e):read(t)}),o.readBinary=function(t){var e;return(e=Tt(t))?e:"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(v("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof scriptArgs?o.arguments=scriptArgs:void 0!==arguments&&(o.arguments=arguments),"function"==typeof quit&&(o.quit=function(t,e){quit(t)})):(c||u)&&(o.read=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var n=Tt(t);if(n)return Mt(n);throw e}},u&&(o.readBinary=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}catch(e){var n=Tt(t);if(n)return n;throw e}}),o.readAsync=function(t,e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){if(200==i.status||0==i.status&&i.response)e(i.response);else{var r=Tt(t);r?e(r.buffer):n()}},i.onerror=n,i.send(null)},void 0!==arguments&&(o.arguments=arguments),o.setWindowTitle=function(t){document.title=t});for(r in o.print="undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null,o.printErr="undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||o.print,o.print=o.print,o.printErr=o.printErr,a)a.hasOwnProperty(r)&&(o[r]=a[r]);a=void 0;var d=16;function p(t){v(!D);var e=L;return L=L+t+15&-16,e}function m(t,e){return e||(e=d),t=Math.ceil(t/e)*e}function g(t){switch(t){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if("*"===t[t.length-1])return 4;if("i"===t[0]){var e=parseInt(t.substr(1));return v(e%8==0),e/8}return 0}}new Array(0);var y=0;function v(t,e){t||Ht("Assertion failed: "+e)}var b={stackSave:function(){Lt()},stackRestore:function(){Pt()},arrayToC:function(t){var e=Rt(t.length);return rt(t,e),e},stringToC:function(t){var e=0;if(null!==t&&void 0!==t&&0!==t){var n=1+(t.length<<2);!function(t,e,n){!function(t,e,n,i){if(!(i>0))return 0;for(var r=n+i-1,o=0;o<t.length;++o){var a=t.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o)),a<=127){if(n>=r)break;e[n++]=a}else if(a<=2047){if(n+1>=r)break;e[n++]=192|a>>6,e[n++]=128|63&a}else if(a<=65535){if(n+2>=r)break;e[n++]=224|a>>12,e[n++]=128|a>>6&63,e[n++]=128|63&a}else if(a<=2097151){if(n+3>=r)break;e[n++]=240|a>>18,e[n++]=128|a>>12&63,e[n++]=128|a>>6&63,e[n++]=128|63&a}else if(a<=67108863){if(n+4>=r)break;e[n++]=248|a>>24,e[n++]=128|a>>18&63,e[n++]=128|a>>12&63,e[n++]=128|a>>6&63,e[n++]=128|63&a}else{if(n+5>=r)break;e[n++]=252|a>>30,e[n++]=128|a>>24&63,e[n++]=128|a>>18&63,e[n++]=128|a>>12&63,e[n++]=128|a>>6&63,e[n++]=128|63&a}}e[n]=0}(t,k,e,n)}(t,e=Rt(n),n)}return e}},_={string:b.stringToC,array:b.arrayToC};function w(t,e,n,i){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":I[t>>0]=e;break;case"i16":C[t>>1]=e;break;case"i32":B[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+ot(tempDouble)>=1?tempDouble>0?(0|ct(+st(tempDouble/4294967296),4294967295))>>>0:~~+at((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],B[t>>2]=tempI64[0],B[t+4>>2]=tempI64[1];break;case"float":R[t>>2]=e;break;case"double":P[t>>3]=e;break;default:Ht("invalid type for setValue: "+n)}}var A=2,x=4;function S(t,e){if(0===e||!t)return"";for(var n,i=0,r=0;i|=n=k[t+r>>0],(0!=n||e)&&(r++,!e||r!=e););e||(e=r);var o="";if(i<128){for(var a;e>0;)a=String.fromCharCode.apply(String,k.subarray(t,t+Math.min(e,1024))),o=o?o+a:a,t+=1024,e-=1024;return o}return function(t){return E(k,t)}(t)}var M="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function E(t,e){for(var n=e;t[n];)++n;if(n-e>16&&t.subarray&&M)return M.decode(t.subarray(e,n));for(var i,r,o,a,s,l="";;){if(!(i=t[e++]))return l;if(128&i)if(r=63&t[e++],192!=(224&i))if(o=63&t[e++],224==(240&i)?i=(15&i)<<12|r<<6|o:(a=63&t[e++],240==(248&i)?i=(7&i)<<18|r<<12|o<<6|a:(s=63&t[e++],i=248==(252&i)?(3&i)<<24|r<<18|o<<12|a<<6|s:(1&i)<<30|r<<24|o<<18|a<<12|s<<6|63&t[e++])),i<65536)l+=String.fromCharCode(i);else{var c=i-65536;l+=String.fromCharCode(55296|c>>10,56320|1023&c)}else l+=String.fromCharCode((31&i)<<6|r);else l+=String.fromCharCode(i)}}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var T,I,k,C,B,R,P,L,D,N,O,F,G,z,U=65536,H=16777216,V=16777216;function W(t,e){return t%e>0&&(t+=e-t%e),t}function Z(){o.HEAP8=I=new Int8Array(T),o.HEAP16=C=new Int16Array(T),o.HEAP32=B=new Int32Array(T),o.HEAPU8=k=new Uint8Array(T),o.HEAPU16=new Uint16Array(T),o.HEAPU32=new Uint32Array(T),o.HEAPF32=R=new Float32Array(T),o.HEAPF64=P=new Float64Array(T)}function j(){var t=o.usingWasm?U:H,e=2147483648-t;if(B[G>>2]>e)return!1;var n=X;for(X=Math.max(X,V);X<B[G>>2];)X=X<=536870912?W(2*X,t):Math.min(W((3*X+2147483648)/4,t),e);var i=o.reallocBuffer(X);return i&&i.byteLength==X?(function(t){o.buffer=T=t}(i),Z(),!0):(X=n,!1)}L=N=G=0,D=!1,o.reallocBuffer||(o.reallocBuffer=function(t){var e;try{if(ArrayBuffer.transfer)e=ArrayBuffer.transfer(T,t);else{var n=I;e=new ArrayBuffer(t),new Int8Array(e).set(n)}}catch(t){return!1}return!!Ct(e)&&e});try{(z=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get))(new ArrayBuffer(4))}catch(t){z=function(t){return t.byteLength}}var Y=o.TOTAL_STACK||5242880,X=o.TOTAL_MEMORY||16777216;if(X<Y&&o.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+X+"! (TOTAL_STACK="+Y+")"),o.buffer?T=o.buffer:(T=new ArrayBuffer(X),o.buffer=T),Z(),B[0]=1668509029,C[1]=25459,115!==k[2]||99!==k[3])throw"Runtime error: expected the system to be little-endian!";function J(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var n=e.func;"number"==typeof n?void 0===e.arg?o.dynCall_v(n):o.dynCall_vi(n,e.arg):n(void 0===e.arg?null:e.arg)}else e()}}var Q=[],q=[],K=[],$=[],tt=[],et=!1;function nt(t){Q.unshift(t)}function it(t){tt.unshift(t)}function rt(t,e){I.set(t,e)}var ot=Math.abs,at=(Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil),st=Math.floor,lt=Math.pow,ct=(Math.imul,Math.fround,Math.round,Math.min),ut=(Math.max,Math.clz32,Math.trunc,0),ht=null,ft=null;o.preloadedImages={},o.preloadedAudios={};var dt=null,pt="data:application/octet-stream;base64,";function mt(t){return String.prototype.startsWith?t.startsWith(pt):0===t.indexOf(pt)}L=26360,q.push(),dt="data:application/octet-stream;base64,g8DKoUW2+z9/+zpwzojqP3/7OnDOiOo/g8DKoUW2+z/hehSuR+H8P166SQwCK/k/AAAAAAAA8D8AAAAAAAD4PwAAAAAAAAZAAAAAAACAFUBcj8L1KFwlQNejcD0KVzVA9ihcj8JVRUCF61G4HlVVQGZmZmZmVmVAzczMzMxUdUDP91PjpZvwP0a28/3UePk/JzEIrBxaB0AdWmQ7388WQClcj8L1qCZApHA9CtejNkAAAAAAAKBGQB+F61G4nlZAzczMzMycZkAAAAAAAAAAAM/3U+Olm/A/Rrbz/dR4+T8nMQisHFoHQB1aZDvfzxZAKVyPwvWoJkCkcD0K16M2QAAAAAAAoEZAH4XrUbieVkDNzMzMzJxmQAAAAAAAAAAArfpcbcX+5j9Wfa62Yn/tP8dLN4lBYPk/8tJNYhBYCED6fmq8dBMYQIXrUbgeBShAAAAAAAAAOEBcj8L1KPxHQOxRuB6F+1dAAAAAAAAAAAAAAAAAAADwP3E9CtejcP8/aJHtfD+1EEB1kxgEVs4gQGZmZmZm5jBA7FG4HoXrQEBcj8L1KOxQQJqZmZmZ6WBAmpmZmZnpcEAzMzMzM+eAQJMYBFYOLQBAtvP91HjpD0D2KFyPwrUgQArXo3A9CjFAw/UoXI8iQUC4HoXrUShRQJqZmZmZKWFAmpmZmZkpcUAAAAAAACiBQAAAAAAAAAAAkxgEVg4tAEC28/3UeOkPQPYoXI/CtSBACtejcD0KMUDD9ShcjyJBQLgehetRKFFAmpmZmZkpYUCamZmZmSlxQAAAAAAAKIFAAAAAAAAAAACkcD0K16MAQOxRuB6F6w5Ad76fGi+dIECuR+F6FC4xQHsUrkfhWkFA9ihcj8JlUUCamZmZmWlhQJqZmZmZaXFAmpmZmZlpgUAAAAAAAAAAAAQAAABDUFJMAAAAAAAAAABMUkNQAAAAAAMAAABQQ1JMAAAAAAEAAABSTENQAAAAAAIAAABSUENMAAAAAP////8AAAAAAAAAAAEAAAACAAAAAwAAAAQAAACQ/wAADAAAAAEAAABS/wAAFAAAAAIAAABT/wAAFAAAAAMAAABe/wAAFAAAAAQAAABc/wAAFAAAAAUAAABd/wAAFAAAAAYAAABf/wAAFAAAAAcAAABR/wAAAgAAAAgAAABV/wAABAAAAAkAAABX/wAABAAAAAoAAABY/wAAEAAAAAsAAABg/wAABAAAAAwAAABh/wAAEAAAAA0AAACR/wAAAAAAAAAAAABj/wAABAAAAA4AAABk/wAAFAAAAA8AAAB0/wAAFAAAABAAAAB4/wAABAAAABEAAAB1/wAAFAAAABIAAAB3/wAAFAAAABMAAAAAAAAAFAAAAAAAAAACAAAABAAAAAQAAAAIAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAAgIFBqFAAAAHB5dGYVAAAAaDJwahYAAAByZGhpFwAAAHJsb2MYAAAAY2NwYhkAAABybGNwGgAAAHBhbWMbAAAAZmVkYxwAAAABVgAAAAAAAKQEAAC0BAAAAVYAAAEAAAC0BAAApAQAAAE0AAAAAAAAxAQAAEQFAAABNAAAAQAAANQEAABUBQAAARgAAAAAAADkBAAApAUAAAEYAAABAAAA9AQAALQFAADBCgAAAAAAAAQFAAAEBgAAwQoAAAEAAAAUBQAAFAYAACEFAAAAAAAAJAUAACQIAAAhBQAAAQAAADQFAAA0CAAAIQIAAAAAAABECQAApAgAACECAAABAAAAVAkAALQIAAABVgAAAAAAAGQFAABUBQAAAVYAAAEAAAB0BQAARAUAAAFUAAAAAAAAhAUAAEQGAAABVAAAAQAAAJQFAABUBgAAAUgAAAAAAACkBQAARAYAAAFIAAABAAAAtAUAAFQGAAABOAAAAAAAAMQFAABEBgAAATgAAAEAAADUBQAAVAYAAAEwAAAAAAAA5AUAAKQGAAABMAAAAQAAAPQFAAC0BgAAASQAAAAAAAAEBgAAxAYAAAEkAAABAAAAFAYAANQGAAABHAAAAAAAACQGAAAEBwAAARwAAAEAAAA0BgAAFAcAAAEWAAAAAAAAJAgAACQHAAABFgAAAQAAADQIAAA0BwAAAVYAAAAAAABkBgAAVAYAAAFWAAABAAAAdAYAAEQGAAABVAAAAAAAAIQGAABEBgAAAVQAAAEAAACUBgAAVAYAAAFRAAAAAAAApAYAAGQGAAABUQAAAQAAALQGAAB0BgAAAUgAAAAAAADEBgAAhAYAAAFIAAABAAAA1AYAAJQGAAABOAAAAAAAAOQGAACkBgAAATgAAAEAAAD0BgAAtAYAAAE0AAAAAAAABAcAAMQGAAABNAAAAQAAABQHAADUBgAAATAAAAAAAAAkBwAA5AYAAAEwAAABAAAANAcAAPQGAAABKAAAAAAAAEQHAADkBgAAASgAAAEAAABUBwAA9AYAAAEkAAAAAAAAZAcAAAQHAAABJAAAAQAAAHQHAAAUBwAAASIAAAAAAACEBwAAJAcAAAEiAAABAAAAlAcAADQHAAABHAAAAAAAAKQHAABEBwAAARwAAAEAAAC0BwAAVAcAAAEYAAAAAAAAxAcAAGQHAAABGAAAAQAAANQHAAB0BwAAARYAAAAAAADkBwAAhAcAAAEWAAABAAAA9AcAAJQHAAABFAAAAAAAAAQIAACkBwAAARQAAAEAAAAUCAAAtAcAAAESAAAAAAAAJAgAAMQHAAABEgAAAQAAADQIAADUBwAAAREAAAAAAABECAAA5AcAAAERAAABAAAAVAgAAPQHAADBCgAAAAAAAGQIAAAECAAAwQoAAAEAAAB0CAAAFAgAAMEJAAAAAAAAhAgAACQIAADBCQAAAQAAAJQIAAA0CAAAoQgAAAAAAACkCAAARAgAAKEIAAABAAAAtAgAAFQIAAAhBQAAAAAAAMQIAABkCAAAIQUAAAEAAADUCAAAdAgAAEEEAAAAAAAA5AgAAIQIAABBBAAAAQAAAPQIAACUCAAAoQIAAAAAAAAECQAApAgAAKECAAABAAAAFAkAALQIAAAhAgAAAAAAACQJAADECAAAIQIAAAEAAAA0CQAA1AgAAEEBAAAAAAAARAkAAOQIAABBAQAAAQAAAFQJAAD0CAAAEQEAAAAAAABkCQAABAkAABEBAAABAAAAdAkAABQJAACFAAAAAAAAAIQJAAAkCQAAhQAAAAEAAACUCQAANAkAAEkAAAAAAAAApAkAAEQJAABJAAAAAQAAALQJAABUCQAAJQAAAAAAAADECQAAZAkAACUAAAABAAAA1AkAAHQJAAAVAAAAAAAAAOQJAACECQAAFQAAAAEAAAD0CQAAlAkAAAkAAAAAAAAABAoAAKQJAAAJAAAAAQAAABQKAAC0CQAABQAAAAAAAAAkCgAAxAkAAAUAAAABAAAANAoAANQJAAABAAAAAAAAACQKAADkCQAAAQAAAAEAAAA0CgAA9AkAAAFWAAAAAAAARAoAAEQKAAABVgAAAQAAAFQKAABUCgAAaAoAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAA6GIAAAAEAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAr/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABoCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC4YgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAEIAAgAoAAgAgQABABAAAAAAAAAAAAAAAAgACAAIAAgAAAAQABAAGAAYABAAIAAoACgAIAAwADgAMABAAEgAQABYAFgAUABoAGAAeABwAIgAgACYAJAAqACoALAAyADAANAA6ADgAPABCAEIARABIAE4ATgBQAFQAWABeAF4AYgBmAGgAbABwAHQAeAB8AIAAhACIAIwAkACWAJoAngCiAKQArACwALYAugC8AMQAygDOANAA2ADeAOAA6ADuAPAA+gD+AQABCgEMARYBGAEiASQBLgEwAToBPgFEAU4BUAFYAWIBZAFsAXYBegGAAYgBkgGWAZwBpAGsAbYBugHCAcoB0AHYAeAB6AHwAfgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAEAA4AEAAaABwAJgAoADIANAA+AEAASgBMAFYAWABiAGQAbgBwAHoAfACGAIgAkgCUAJ4AoACqAKwAtgC4AMIAxADOANAA2gDcAOYA6ADyAPQA/gEAAQoBDAEWARgBIgEkAS4BMAE6ATwBRgFIAVIBVAFeAWABagFsAXYBeAGCAYQBjgGQAZoBnAGmAagBsgG0Ab4BwAHKAcwB1gHYAIAAfAB4AHQAcABuAGoAZgBiAFwAXABYAFYAUgBMAEwASgBGAEAAQAA+ADgAOAA2ADAAMgAuACgAKgAkACYAIAAiABwAHgAYABoAFgAUABYAEAAQABIADAAMAA4ACgAIAAgACgAGAAQABAAEAAYAAgACAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgACAAIAAAAEAAQABgAGAAQACAAKAAoACAAMAA4ADAAQABIAEAAWABYAFAAaABgAHgAcACIAIAAmACQAKgAqACwAMgAwADQAOgA4ADwAQgBCAEQASABOAE4AUABUAFgAXgBeAGIAZgBoAGwAcAB0AHgAfABiAFwAXgBYAFoAVABWAFAAUgBMAE4ASABKAEQARgBAAEIAPAA+ADgAOgA0ADYAMAAyACwALgAoACoAJAAmACAAIgAcAB4AGAAaABQAFgAQABIADAAOAAgACgAEAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAYABAAKAAgADgAMABIAEAAWABQAGgAYAB4AHAAiACAAJgAkACoAKAAuACwAMgAwADYANAA6ADgAPgA8AEIAQABGAEQASgBIAE4ATABSAFAAVgBUAFoAWABeAF1tFUlJPUl0gJXMAW0VSUk9SXSBvcGpfZGVjb21wcmVzczogZmFpbGVkIHRvIHNldHVwIHRoZSBkZWNvZGVyAFtFUlJPUl0gb3BqX2RlY29tcHJlc3M6IGZhaWxlZCB0byByZWFkIHRoZSBoZWFkZXIAW0VSUk9SXSBvcGpfZGVjb21wcmVzczogZmFpbGVkIHRvIGRlY29kZSB0aWxlIQBFcnJvciBvbiB3cml0aW5nIHN0cmVhbSEKAFN0cmVhbSByZWFjaGVkIGl0cyBlbmQgIQoAU3RyZWFtIGVycm9yIQoAMi4xLjEAd2IAcmIAQ29kZWMgcHJvdmlkZWQgdG8gdGhlIG9wal9zZXR1cF9kZWNvZGVyIGZ1bmN0aW9uIGlzIG5vdCBhIGRlY29tcHJlc3NvciBoYW5kbGVyLgoAQ29kZWMgcHJvdmlkZWQgdG8gdGhlIG9wal9yZWFkX2hlYWRlciBmdW5jdGlvbiBpcyBub3QgYSBkZWNvbXByZXNzb3IgaGFuZGxlci4KAEludmFsaWQgbnVtYmVyIG9mIHJlc29sdXRpb25zIDogJWQgbm90IGluIHJhbmdlIFsxLCVkXQoARGVwcmVjYXRlZCBmaWVsZHMgY3BfY2luZW1hIG9yIGNwX3JzaXogYXJlIHVzZWQKUGxlYXNlIGNvbnNpZGVyIHVzaW5nIG9ubHkgdGhlIHJzaXogZmllbGQKU2VlIG9wZW5qcGVnLmggZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBkZXRhaWxzCgBUaGUgZGVzaXJlZCBtYXhpbXVtIGNvZGVzdHJlYW0gc2l6ZSBoYXMgbGltaXRlZAphdCBsZWFzdCBvbmUgb2YgdGhlIGRlc2lyZWQgcXVhbGl0eSBsYXllcnMKAEpQRUcgMjAwMCBTY2FsYWJsZSBEaWdpdGFsIENpbmVtYSBwcm9maWxlcyBub3QgeWV0IHN1cHBvcnRlZAoASlBFRyAyMDAwIFByb2ZpbGUtMyBhbmQgNCAoMmsvNGsgZGMgcHJvZmlsZSkgcmVxdWlyZXM6CjEgc2luZ2xlIHF1YWxpdHkgbGF5ZXItPiBOdW1iZXIgb2YgbGF5ZXJzIGZvcmNlZCB0byAxIChyYXRoZXIgdGhhbiAlZCkKLT4gUmF0ZSBvZiB0aGUgbGFzdCBsYXllciAoJTMuMWYpIHdpbGwgYmUgdXNlZABKUEVHIDIwMDAgUHJvZmlsZS0zICgyayBkYyBwcm9maWxlKSByZXF1aXJlczoKTnVtYmVyIG9mIGRlY29tcG9zaXRpb24gbGV2ZWxzIDw9IDUKLT4gTnVtYmVyIG9mIGRlY29tcG9zaXRpb24gbGV2ZWxzIGZvcmNlZCB0byA1IChyYXRoZXIgdGhhbiAlZCkKAEpQRUcgMjAwMCBQcm9maWxlLTQgKDRrIGRjIHByb2ZpbGUpIHJlcXVpcmVzOgpOdW1iZXIgb2YgZGVjb21wb3NpdGlvbiBsZXZlbHMgPj0gMSAmJiA8PSA2Ci0+IE51bWJlciBvZiBkZWNvbXBvc2l0aW9uIGxldmVscyBmb3JjZWQgdG8gMSAocmF0aGVyIHRoYW4gJWQpCgBKUEVHIDIwMDAgUHJvZmlsZS00ICg0ayBkYyBwcm9maWxlKSByZXF1aXJlczoKTnVtYmVyIG9mIGRlY29tcG9zaXRpb24gbGV2ZWxzID49IDEgJiYgPD0gNgotPiBOdW1iZXIgb2YgZGVjb21wb3NpdGlvbiBsZXZlbHMgZm9yY2VkIHRvIDYgKHJhdGhlciB0aGFuICVkKQoASlBFRyAyMDAwIFByb2ZpbGUtMyBhbmQgNCAoMmsvNGsgZGMgcHJvZmlsZSkgcmVxdWlyZXM6Ck1heGltdW0gMTMwMjA4MyBjb21wcmVzc2VkIGJ5dGVzIEAgMjRmcHMKQXMgbm8gcmF0ZSBoYXMgYmVlbiBnaXZlbiwgdGhpcyBsaW1pdCB3aWxsIGJlIHVzZWQuCgBKUEVHIDIwMDAgUHJvZmlsZS0zIGFuZCA0ICgyay80ayBkYyBwcm9maWxlKSByZXF1aXJlczoKTWF4aW11bSAxMzAyMDgzIGNvbXByZXNzZWQgYnl0ZXMgQCAyNGZwcwotPiBTcGVjaWZpZWQgcmF0ZSBleGNlZWRzIHRoaXMgbGltaXQuIFJhdGUgd2lsbCBiZSBmb3JjZWQgdG8gMTMwMjA4MyBieXRlcy4KAEpQRUcgMjAwMCBQcm9maWxlLTMgYW5kIDQgKDJrLzRrIGRjIHByb2ZpbGUpIHJlcXVpcmVzOgpNYXhpbXVtIDEwNDE2NjYgY29tcHJlc3NlZCBieXRlcyBAIDI0ZnBzCkFzIG5vIHJhdGUgaGFzIGJlZW4gZ2l2ZW4sIHRoaXMgbGltaXQgd2lsbCBiZSB1c2VkLgoASlBFRyAyMDAwIFByb2ZpbGUtMyBhbmQgNCAoMmsvNGsgZGMgcHJvZmlsZSkgcmVxdWlyZXM6Ck1heGltdW0gMTA0MTY2NiBjb21wcmVzc2VkIGJ5dGVzIEAgMjRmcHMKLT4gU3BlY2lmaWVkIHJhdGUgZXhjZWVkcyB0aGlzIGxpbWl0LiBSYXRlIHdpbGwgYmUgZm9yY2VkIHRvIDEwNDE2NjYgYnl0ZXMuCgBKUEVHIDIwMDAgUHJvZmlsZS0zICgyayBkYyBwcm9maWxlKSByZXF1aXJlczoKMyBjb21wb25lbnRzLT4gTnVtYmVyIG9mIGNvbXBvbmVudHMgb2YgaW5wdXQgaW1hZ2UgKCVkKSBpcyBub3QgY29tcGxpYW50Ci0+IE5vbi1wcm9maWxlLTMgY29kZXN0cmVhbSB3aWxsIGJlIGdlbmVyYXRlZAoAc2lnbmVkAHVuc2lnbmVkAEpQRUcgMjAwMCBQcm9maWxlLTMgKDJrIGRjIHByb2ZpbGUpIHJlcXVpcmVzOgpQcmVjaXNpb24gb2YgZWFjaCBjb21wb25lbnQgc2hhbGwgYmUgMTIgYml0cyB1bnNpZ25lZC0+IEF0IGxlYXN0IGNvbXBvbmVudCAlZCBvZiBpbnB1dCBpbWFnZSAoJWQgYml0cywgJXMpIGlzIG5vdCBjb21wbGlhbnQKLT4gTm9uLXByb2ZpbGUtMyBjb2Rlc3RyZWFtIHdpbGwgYmUgZ2VuZXJhdGVkCgBKUEVHIDIwMDAgUHJvZmlsZS0zICgyayBkYyBwcm9maWxlKSByZXF1aXJlczoKd2lkdGggPD0gMjA0OCBhbmQgaGVpZ2h0IDw9IDEwODAKLT4gSW5wdXQgaW1hZ2Ugc2l6ZSAlZCB4ICVkIGlzIG5vdCBjb21wbGlhbnQKLT4gTm9uLXByb2ZpbGUtMyBjb2Rlc3RyZWFtIHdpbGwgYmUgZ2VuZXJhdGVkCgBKUEVHIDIwMDAgUHJvZmlsZS00ICg0ayBkYyBwcm9maWxlKSByZXF1aXJlczoKd2lkdGggPD0gNDA5NiBhbmQgaGVpZ2h0IDw9IDIxNjAKLT4gSW1hZ2Ugc2l6ZSAlZCB4ICVkIGlzIG5vdCBjb21wbGlhbnQKLT4gTm9uLXByb2ZpbGUtNCBjb2Rlc3RyZWFtIHdpbGwgYmUgZ2VuZXJhdGVkCgBKUEVHIDIwMDAgTG9uZyBUZXJtIFN0b3JhZ2UgcHJvZmlsZSBub3QgeWV0IHN1cHBvcnRlZAoASlBFRyAyMDAwIEJyb2FkY2FzdCBwcm9maWxlcyBub3QgeWV0IHN1cHBvcnRlZAoASlBFRyAyMDAwIElNRiBwcm9maWxlcyBub3QgeWV0IHN1cHBvcnRlZAoASlBFRyAyMDAwIFBhcnQtMiBwcm9maWxlIGRlZmluZWQKYnV0IG5vIFBhcnQtMiBleHRlbnNpb24gZW5hYmxlZC4KUHJvZmlsZSBzZXQgdG8gTk9ORS4KAFVuc3VwcG9ydGVkIFBhcnQtMiBleHRlbnNpb24gZW5hYmxlZApQcm9maWxlIHNldCB0byBOT05FLgoATm90IGVub3VnaCBtZW1vcnkgdG8gYWxsb2NhdGUgY29weSBvZiB1c2VyIGVuY29kaW5nIHBhcmFtZXRlcnMgbWF0cml4IAoATm90IGVub3VnaCBtZW1vcnkgdG8gYWxsb2NhdGUgY29weSBvZiBjb21tZW50IHN0cmluZwoATm90IGVub3VnaCBtZW1vcnkgdG8gYWxsb2NhdGUgY29tbWVudCBzdHJpbmcKACVzJXMAQ3JlYXRlZCBieSBPcGVuSlBFRyB2ZXJzaW9uIABOb3QgZW5vdWdoIG1lbW9yeSB0byBhbGxvY2F0ZSB0aWxlIGNvZGluZyBwYXJhbWV0ZXJzCgBOb3QgZW5vdWdoIG1lbW9yeSBmb3IgY2hlY2tpbmcgdGhlIHBvYyB2YWx1ZXMuCgBNaXNzaW5nIHBhY2tldHMgcG9zc2libGUgbG9zcyBvZiBkYXRhCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBhbGxvY2F0ZSB0aWxlIGNvbXBvbmVudCBjb2RpbmcgcGFyYW1ldGVycwoATm90IGVub3VnaCBtZW1vcnkgdG8gYWxsb2NhdGUgdGVtcCBidWZmZXIKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGFsbG9jYXRlIGVuY29kZXIgTUNUIGNvZGluZyBtYXRyaXggCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBhbGxvY2F0ZSBlbmNvZGVyIE1DVCBkZWNvZGluZyBtYXRyaXggCgBGYWlsZWQgdG8gaW52ZXJzZSBlbmNvZGVyIE1DVCBkZWNvZGluZyBtYXRyaXggCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBhbGxvY2F0ZSBlbmNvZGVyIE1DVCBub3JtcyAKAEZhaWxlZCB0byBzZXR1cCBqMmsgbWN0IGVuY29kaW5nCgBDYW5ub3QgcGVyZm9ybSBNQ1Qgb24gY29tcG9uZW50cyB3aXRoIGRpZmZlcmVudCBzaXplcy4gRGlzYWJsaW5nIE1DVC4KAENhbm5vdCBkZWNvZGUgdGlsZSwgbWVtb3J5IGVycm9yCgBTdGFydCB0byByZWFkIGoyayBtYWluIGhlYWRlciAoJWQpLgoATm90IGVub3VnaCBtZW1vcnkgdG8gYWRkIG1oIG1hcmtlcgoARXhwZWN0ZWQgYSBTT0MgbWFya2VyIAoAU3RyZWFtIHRvbyBzaG9ydAoAQSBtYXJrZXIgSUQgd2FzIGV4cGVjdGVkICgweGZmLS0pIGluc3RlYWQgb2YgJS44eAoAVW5rbm93biBtYXJrZXIKAE1hcmtlciBpcyBub3QgY29tcGxpYW50IHdpdGggaXRzIHBvc2l0aW9uCgBVbmtub3cgbWFya2VyIGhhdmUgYmVlbiBkZXRlY3RlZCBhbmQgZ2VuZXJhdGVkIGVycm9yLgoATm90IGVub3VnaCBtZW1vcnkgdG8gcmVhZCBoZWFkZXIKAE1hcmtlciBoYW5kbGVyIGZ1bmN0aW9uIGZhaWxlZCB0byByZWFkIHRoZSBtYXJrZXIgc2VnbWVudAoAcmVxdWlyZWQgU0laIG1hcmtlciBub3QgZm91bmQgaW4gbWFpbiBoZWFkZXIKAHJlcXVpcmVkIENPRCBtYXJrZXIgbm90IGZvdW5kIGluIG1haW4gaGVhZGVyCgByZXF1aXJlZCBRQ0QgbWFya2VyIG5vdCBmb3VuZCBpbiBtYWluIGhlYWRlcgoATm90IGVub3VnaCBieXRlcyB0byByZWFkIE5wcG0KAENvcnJ1cHRlZCBQUE0gbWFya2VycwoATm90IGVub3VnaCBtZW1vcnkgdG8gcmVhZCBQUE0gbWFya2VyCgBGYWlsZWQgdG8gbWVyZ2UgUFBNIGRhdGEKAE1haW4gaGVhZGVyIGhhcyBiZWVuIGNvcnJlY3RseSBkZWNvZGVkLgoARXJyb3IgcmVhZGluZyBNQ08gbWFya2VyCgBDYW5ub3QgdGFrZSBpbiBjaGFyZ2UgbXVsdGlwbGUgdHJhbnNmb3JtYXRpb24gc3RhZ2VzLgoARXJyb3IgcmVhZGluZyBNQ0MgbWFya2VyCgBDYW5ub3QgdGFrZSBpbiBjaGFyZ2UgbXVsdGlwbGUgZGF0YSBzcGFubmluZwoATm90IGVub3VnaCBtZW1vcnkgdG8gcmVhZCBNQ0MgbWFya2VyCgBDYW5ub3QgdGFrZSBpbiBjaGFyZ2UgbXVsdGlwbGUgY29sbGVjdGlvbnMKAENhbm5vdCB0YWtlIGluIGNoYXJnZSBjb2xsZWN0aW9ucyBvdGhlciB0aGFuIGFycmF5IGRlY29ycmVsYXRpb24KAENhbm5vdCB0YWtlIGluIGNoYXJnZSBjb2xsZWN0aW9ucyB3aXRoIGluZGl4IHNodWZmbGUKAENhbm5vdCB0YWtlIGluIGNoYXJnZSBjb2xsZWN0aW9ucyB3aXRob3V0IHNhbWUgbnVtYmVyIG9mIGluZGl4ZXMKAENycm9yIHJlYWRpbmcgQ0JEIG1hcmtlcgoARXJyb3IgcmVhZGluZyBNQ1QgbWFya2VyCgBDYW5ub3QgdGFrZSBpbiBjaGFyZ2UgbWN0IGRhdGEgd2l0aGluIG11bHRpcGxlIE1DVCByZWNvcmRzCgBOb3QgZW5vdWdoIG1lbW9yeSB0byByZWFkIE1DVCBtYXJrZXIKAENhbm5vdCB0YWtlIGluIGNoYXJnZSBtdWx0aXBsZSBNQ1QgbWFya2VycwoARXJyb3IgcmVhZGluZyBDUkcgbWFya2VyCgBFcnJvciByZWFkaW5nIFBQVCBtYXJrZXIKAEVycm9yIHJlYWRpbmcgUFBUIG1hcmtlcjogcGFja2V0IGhlYWRlciBoYXZlIGJlZW4gcHJldmlvdXNseSBmb3VuZCBpbiB0aGUgbWFpbiBoZWFkZXIgKFBQTSBtYXJrZXIpLgoATm90IGVub3VnaCBtZW1vcnkgdG8gcmVhZCBQUFQgbWFya2VyCgBacHB0ICV1IGFscmVhZHkgcmVhZAoARXJyb3IgcmVhZGluZyBQUE0gbWFya2VyCgBacHBtICV1IGFscmVhZHkgcmVhZAoARXJyb3IgcmVhZGluZyBQTFQgbWFya2VyCgBFcnJvciByZWFkaW5nIFBMTSBtYXJrZXIKAEVycm9yIHJlYWRpbmcgVExNIG1hcmtlcgoARXJyb3Igd2l0aCBTSVogbWFya2VyIHNpemUKAEVycm9yIHdpdGggU0laIG1hcmtlcjogbnVtYmVyIG9mIGNvbXBvbmVudCBpcyBpbGxlZ2FsIC0+ICVkCgBFcnJvciB3aXRoIFNJWiBtYXJrZXI6IG51bWJlciBvZiBjb21wb25lbnQgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgcmVtYWluaW5nIG51bWJlciBvZiBwYXJhbWV0ZXJzICggJWQgdnMgJWQpCgBFcnJvciB3aXRoIFNJWiBtYXJrZXI6IG5lZ2F0aXZlIG9yIHplcm8gaW1hZ2Ugc2l6ZSAoJWxsZCB4ICVsbGQpCgBFcnJvciB3aXRoIFNJWiBtYXJrZXI6IGludmFsaWQgdGlsZSBzaXplICh0ZHg6ICVkLCB0ZHk6ICVkKQoAUHJldmVudCBidWZmZXIgb3ZlcmZsb3cgKHgxOiAlZCwgeTE6ICVkKQoARXJyb3Igd2l0aCBTSVogbWFya2VyOiBpbGxlZ2FsIHRpbGUgb2Zmc2V0CgBOb3QgZW5vdWdoIG1lbW9yeSB0byB0YWtlIGluIGNoYXJnZSBTSVogbWFya2VyCgBJbnZhbGlkIHZhbHVlcyBmb3IgY29tcCA9ICVkIDogZHg9JXUgZHk9JXUgKHNob3VsZCBiZSBiZXR3ZWVuIDEgYW5kIDI1NSBhY2NvcmRpbmcgdG8gdGhlIEpQRUcyMDAwIG5vcm0pCgBJbnZhbGlkIHZhbHVlcyBmb3IgY29tcCA9ICVkIDogcHJlYz0ldSAoc2hvdWxkIGJlIGJldHdlZW4gMSBhbmQgMzggYWNjb3JkaW5nIHRvIHRoZSBKUEVHMjAwMCBub3JtKQoASW52YWxpZCBudW1iZXIgb2YgdGlsZXMgOiAldSB4ICV1IChtYXhpbXVtIGZpeGVkIGJ5IGpwZWcyMDAwIG5vcm0gaXMgNjU1MzUgdGlsZXMpCgBFcnJvciByZWFkaW5nIFBPQyBtYXJrZXIKAFRvbyBtYW55IFBPQ3MgJWQKAEVycm9yIHJlYWRpbmcgUUNDIG1hcmtlcgoASW52YWxpZCBjb21wb25lbnQgbnVtYmVyOiAlZCwgcmVnYXJkaW5nIHRoZSBudW1iZXIgb2YgY29tcG9uZW50cyAlZAoARXJyb3IgcmVhZGluZyBTUWNkIG9yIFNRY2MgZWxlbWVudAoAV2hpbGUgcmVhZGluZyBDQ1BfUU5UU1RZIGVsZW1lbnQgaW5zaWRlIFFDRCBvciBRQ0MgbWFya2VyIHNlZ21lbnQsIG51bWJlciBvZiBzdWJiYW5kcyAoJWQpIGlzIGdyZWF0ZXIgdG8gT1BKX0oyS19NQVhCQU5EUyAoJWQpLiBTbyB3ZSBsaW1pdCB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHN0b3JlZCB0byBPUEpfSjJLX01BWEJBTkRTICglZCkgYW5kIHNraXAgdGhlIHJlc3QuIAoARXJyb3IgcmVhZGluZyBRQ0QgbWFya2VyCgBFcnJvciByZWFkaW5nIFJHTiBtYXJrZXIKAGJhZCBjb21wb25lbnQgbnVtYmVyIGluIFJHTiAoJWQgd2hlbiB0aGVyZSBhcmUgb25seSAlZCkKAEVycm9yIHJlYWRpbmcgQ09DIG1hcmtlcgoARXJyb3IgcmVhZGluZyBDT0MgbWFya2VyIChiYWQgbnVtYmVyIG9mIGNvbXBvbmVudHMpCgBFcnJvciByZWFkaW5nIFNQQ29kIFNQQ29jIGVsZW1lbnQKAEludmFsaWQgdmFsdWUgZm9yIG51bXJlc29sdXRpb25zIDogJWQsIG1heCB2YWx1ZSBpcyBzZXQgaW4gb3BlbmpwZWcuaCBhdCAlZAoARXJyb3IgZGVjb2RpbmcgY29tcG9uZW50ICVkLgpUaGUgbnVtYmVyIG9mIHJlc29sdXRpb25zIHRvIHJlbW92ZSBpcyBoaWdoZXIgdGhhbiB0aGUgbnVtYmVyIG9mIHJlc29sdXRpb25zIG9mIHRoaXMgY29tcG9uZW50Ck1vZGlmeSB0aGUgY3BfcmVkdWNlIHBhcmFtZXRlci4KCgBFcnJvciByZWFkaW5nIFNQQ29kIFNQQ29jIGVsZW1lbnQsIEludmFsaWQgY2Jsa3cvY2Jsa2ggY29tYmluYXRpb24KAEVycm9yIHJlYWRpbmcgU1BDb2QgU1BDb2MgZWxlbWVudCwgSW52YWxpZCBjb2RlLWJsb2NrIHN0eWxlIGZvdW5kCgBJbnZhbGlkIHByZWNpbmN0IHNpemUKAENPRCBtYXJrZXIgYWxyZWFkeSByZWFkLiBObyBtb3JlIHRoYW4gb25lIENPRCBtYXJrZXIgcGVyIHRpbGUuCgBFcnJvciByZWFkaW5nIENPRCBtYXJrZXIKAFVua25vd24gU2NvZCB2YWx1ZSBpbiBDT0QgbWFya2VyCgBVbmtub3duIHByb2dyZXNzaW9uIG9yZGVyIGluIENPRCBtYXJrZXIKAEludmFsaWQgbnVtYmVyIG9mIGxheWVycyBpbiBDT0QgbWFya2VyIDogJWQgbm90IGluIHJhbmdlIFsxLTY1NTM1XQoARXJyb3IgcmVhZGluZyBTT1QgbWFya2VyCgBJbnZhbGlkIHRpbGUgbnVtYmVyICVkCgBFbXB0eSBTT1QgbWFya2VyIGRldGVjdGVkOiBQc290PSVkLgoAUHNvdCB2YWx1ZSBpcyBub3QgY29ycmVjdCByZWdhcmRzIHRvIHRoZSBKUEVHMjAwMCBub3JtOiAlZC4KAFBzb3QgdmFsdWUgb2YgdGhlIGN1cnJlbnQgdGlsZS1wYXJ0IGlzIGVxdWFsIHRvIHplcm8sIHdlIGFzc3VtaW5nIGl0IGlzIHRoZSBsYXN0IHRpbGUtcGFydCBvZiB0aGUgY29kZXN0cmVhbS4KAEluIFNPVCBtYXJrZXIsIFRQU290ICglZCkgaXMgbm90IHZhbGlkIHJlZ2FyZHMgdG8gdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHRpbGUtcGFydCAoJWQpLCBnaXZpbmcgdXAKAEluIFNPVCBtYXJrZXIsIFRQU290ICglZCkgaXMgbm90IHZhbGlkIHJlZ2FyZHMgdG8gdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHRpbGUtcGFydCAoaGVhZGVyKSAoJWQpLCBnaXZpbmcgdXAKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIHJlYWQgU09UIG1hcmtlci4gVGlsZSBpbmRleCBhbGxvY2F0aW9uIGZhaWxlZAoASW5jb25zaXN0ZW50IG1hcmtlciBzaXplCgBNYXJrZXIgc2l6ZSBpbmNvbnNpc3RlbnQgd2l0aCBzdHJlYW0gbGVuZ3RoCgBOb3Qgc3VyZSBob3cgdGhhdCBoYXBwZW5lZC4KAEZhaWwgdG8gcmVhZCB0aGUgY3VycmVudCBtYXJrZXIgc2VnbWVudCAoJSN4KQoATm90IGVub3VnaCBtZW1vcnkgdG8gYWRkIHRsIG1hcmtlcgoAVGlsZSBwYXJ0IGxlbmd0aCBzaXplIGluY29uc2lzdGVudCB3aXRoIHN0cmVhbSBsZW5ndGgKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGRlY29kZSB0aWxlCgBvcGpfajJrX2FwcGx5X25iX3RpbGVfcGFydHNfY29ycmVjdGlvbiBlcnJvcgoATm9uIGNvbmZvcm1hbnQgY29kZXN0cmVhbSBUUHNvdD09VE5zb3QuCgBGYWlsZWQgdG8gbWVyZ2UgUFBUIGRhdGEKAEhlYWRlciBvZiB0aWxlICVkIC8gJWQgaGFzIGJlZW4gcmVhZC4KAEZhaWxlZCB0byBkZWNvZGUuCgBObyBFT0MgbWFya2VyLiBQb3NzaWJseSBhIHRydW5jYXRlZCBzdHJlYW0KAFN0cmVhbSBkb2VzIG5vdCBlbmQgd2l0aCBFT0MKAFN0cmVhbSB0b28gc2hvcnQsIGV4cGVjdGVkIFNPVAoATmVlZCB0byBkZWNvZGUgdGhlIG1haW4gaGVhZGVyIGJlZm9yZSBiZWdpbiB0byBkZWNvZGUgdGhlIHJlbWFpbmluZyBjb2Rlc3RyZWFtAE5vIGRlY29kZWQgYXJlYSBwYXJhbWV0ZXJzLCBzZXQgdGhlIGRlY29kZWQgYXJlYSB0byB0aGUgd2hvbGUgaW1hZ2UKAExlZnQgcG9zaXRpb24gb2YgdGhlIGRlY29kZWQgYXJlYSAocmVnaW9uX3gwPSVkKSBpcyBvdXRzaWRlIHRoZSBpbWFnZSBhcmVhIChYc2l6PSVkKS4KAExlZnQgcG9zaXRpb24gb2YgdGhlIGRlY29kZWQgYXJlYSAocmVnaW9uX3gwPSVkKSBpcyBvdXRzaWRlIHRoZSBpbWFnZSBhcmVhIChYT3Npej0lZCkuCgBVcCBwb3NpdGlvbiBvZiB0aGUgZGVjb2RlZCBhcmVhIChyZWdpb25feTA9JWQpIGlzIG91dHNpZGUgdGhlIGltYWdlIGFyZWEgKFlzaXo9JWQpLgoAVXAgcG9zaXRpb24gb2YgdGhlIGRlY29kZWQgYXJlYSAocmVnaW9uX3kwPSVkKSBpcyBvdXRzaWRlIHRoZSBpbWFnZSBhcmVhIChZT3Npej0lZCkuCgBSaWdodCBwb3NpdGlvbiBvZiB0aGUgZGVjb2RlZCBhcmVhIChyZWdpb25feDE9JWQpIGlzIG91dHNpZGUgdGhlIGltYWdlIGFyZWEgKFhPc2l6PSVkKS4KAFJpZ2h0IHBvc2l0aW9uIG9mIHRoZSBkZWNvZGVkIGFyZWEgKHJlZ2lvbl94MT0lZCkgaXMgb3V0c2lkZSB0aGUgaW1hZ2UgYXJlYSAoWHNpej0lZCkuCgBCb3R0b20gcG9zaXRpb24gb2YgdGhlIGRlY29kZWQgYXJlYSAocmVnaW9uX3kxPSVkKSBpcyBvdXRzaWRlIHRoZSBpbWFnZSBhcmVhIChZT3Npej0lZCkuCgBCb3R0b20gcG9zaXRpb24gb2YgdGhlIGRlY29kZWQgYXJlYSAocmVnaW9uX3kxPSVkKSBpcyBvdXRzaWRlIHRoZSBpbWFnZSBhcmVhIChZc2l6PSVkKS4KAFNpemUgeCBvZiB0aGUgZGVjb2RlZCBjb21wb25lbnQgaW1hZ2UgaXMgaW5jb3JyZWN0IChjb21wWyVkXS53PSVkKS4KAFNpemUgeSBvZiB0aGUgZGVjb2RlZCBjb21wb25lbnQgaW1hZ2UgaXMgaW5jb3JyZWN0IChjb21wWyVkXS5oPSVkKS4KAFNldHRpbmcgZGVjb2RpbmcgYXJlYSB0byAlZCwlZCwlZCwlZAoAV3JvbmcgZmxhZwoAQ29kZXN0cmVhbSBpbmZvIGZyb20gbWFpbiBoZWFkZXI6IHsKAAkgdHgwPSVkLCB0eTA9JWQKAAkgdGR4PSVkLCB0ZHk9JWQKAAkgdHc9JWQsIHRoPSVkCgB9CgBDb2Rlc3RyZWFtIGluZGV4IGZyb20gbWFpbiBoZWFkZXI6IHsKAAkgTWFpbiBoZWFkZXIgc3RhcnQgcG9zaXRpb249JWxsaQoJIE1haW4gaGVhZGVyIGVuZCBwb3NpdGlvbj0lbGxpCgAJIE1hcmtlciBsaXN0OiB7CgAJCSB0eXBlPSUjeCwgcG9zPSVsbGksIGxlbj0lZAoACSB9CgAJIFRpbGUgaW5kZXg6IHsKAAkJIG5iIG9mIHRpbGUtcGFydCBpbiB0aWxlIFslZF09JWQKAAkJCSB0aWxlLXBhcnRbJWRdOiBzdGFyX3Bvcz0lbGxpLCBlbmRfaGVhZGVyPSVsbGksIGVuZF9wb3M9JWxsaS4KAAkgZGVmYXVsdCB0aWxlIHsKAAkJIGNzdHk9JSN4CgAJCSBwcmc9JSN4CgAJCSBudW1sYXllcnM9JWQKAAkJIG1jdD0leAoACQkgY29tcCAlZCB7CgAJCQkgY3N0eT0lI3gKAAkJCSBudW1yZXNvbHV0aW9ucz0lZAoACQkJIGNibGt3PTJeJWQKAAkJCSBjYmxraD0yXiVkCgAJCQkgY2Jsa3N0eT0lI3gKAAkJCSBxbWZiaWQ9JWQKAAkJCSBwcmVjY2ludHNpemUgKHcsaCk9ACglZCwlZCkgAAkJCSBxbnRzdHk9JWQKAAkJCSBudW1nYml0cz0lZAoACQkJIHN0ZXBzaXplcyAobSxlKT0ACQkJIHJvaXNoaWZ0PSVkCgAJCSB9CgBbREVWXSBEdW1wIGFuIGltYWdlX2hlYWRlciBzdHJ1Y3QgewoASW1hZ2UgaW5mbyB7CgAlcyB4MD0lZCwgeTA9JWQKACVzIHgxPSVkLCB5MT0lZAoAJXMgbnVtY29tcHM9JWQKACVzCSBjb21wb25lbnQgJWQgewoAJXN9CgBbREVWXSBEdW1wIGFuIGltYWdlX2NvbXBfaGVhZGVyIHN0cnVjdCB7CgAlcyBkeD0lZCwgZHk9JWQKACVzIHByZWM9JWQKACVzIHNnbmQ9JWQKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGRlY29kZSB0aWxlcwoATm90IGVub3VnaCBtZW1vcnkgdG8gZGVjb2RlIHRpbGUgJWQvJWQKAEZhaWxlZCB0byBkZWNvZGUgdGlsZSAlZC8lZAoAVGlsZSAlZC8lZCBoYXMgYmVlbiBkZWNvZGVkLgoASW1hZ2UgZGF0YSBoYXMgYmVlbiB1cGRhdGVkIHdpdGggdGlsZSAlZC4KCgBXZSBuZWVkIGFuIGltYWdlIHByZXZpb3VzbHkgY3JlYXRlZC4KAFRpbGUgaW5kZXggcHJvdmlkZWQgYnkgdGhlIHVzZXIgaXMgaW5jb3JyZWN0ICVkIChtYXggPSAlZCkgCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBkZWNvZGUgb25lIHRpbGUKAFByb2JsZW0gd2l0aCBzZWVrIGZ1bmN0aW9uCgBUaWxlIHJlYWQsIGRlY29kZWQgYW5kIHVwZGF0ZWQgaXMgbm90IHRoZSBkZXNpcmVkIG9uZSAoJWQgdnMgJWQpLgoAUmVzb2x1dGlvbiBmYWN0b3IgaXMgZ3JlYXRlciB0aGFuIHRoZSBtYXhpbXVtIHJlc29sdXRpb24gaW4gdGhlIGNvbXBvbmVudC4KAFRoZSBnaXZlbiB0aWxlIGluZGV4IGRvZXMgbm90IG1hdGNoLgB0aWxlIG51bWJlciAlZCAvICVkCgBFcnJvciBhbGxvY2F0aW5nIHRpbGUgY29tcG9uZW50IGRhdGEuAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGVuY29kZSBhbGwgdGlsZXMKAFNpemUgbWlzbWF0Y2ggYmV0d2VlbiB0aWxlIGRhdGEgYW5kIHNlbnQgZGF0YS4AQ2Fubm90IGVuY29kZSB0aWxlCgBGYWlsZWQgdG8gYWxsb2NhdGUgaW1hZ2UgaGVhZGVyLgBOb3QgZW5vdWdoIG1lbW9yeSB0byBjcmVhdGUgVGlsZSBDb2RlcgoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgQ0JEIG1hcmtlcgoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgTUNUIG1hcmtlcgoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgTUNDIG1hcmtlcgoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgTUNPIG1hcmtlcgoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgdGhlIENPTSBtYXJrZXIKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIHdyaXRlIFBPQyBtYXJrZXIKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIHdyaXRlIFRMTSBtYXJrZXIKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIHdyaXRlIFFDQyBtYXJrZXIKAEVycm9yIHdyaXRpbmcgU1FjZCBTUWNjIGVsZW1lbnQKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIHdyaXRlIENPQyBtYXJrZXIKAEVycm9yIHdyaXRpbmcgU1BDb2QgU1BDb2MgZWxlbWVudAoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgUUNEIG1hcmtlcgoARXJyb3Igd3JpdGluZyBRQ0QgbWFya2VyCgBOb3QgZW5vdWdoIG1lbW9yeSB0byB3cml0ZSBDT0QgbWFya2VyCgBFcnJvciB3cml0aW5nIENPRCBtYXJrZXIKAE5vdCBlbm91Z2ggbWVtb3J5IGZvciB0aGUgU0laIG1hcmtlcgoATnVtYmVyIG9mIHJlc29sdXRpb25zIGlzIHRvbyBoaWdoIGluIGNvbXBhcmlzb24gdG8gdGhlIHNpemUgb2YgdGlsZXMKAEVycm9yIHdoaWxlIG9wal9qMmtfcHJlX3dyaXRlX3RpbGUgd2l0aCB0aWxlIGluZGV4ID0gJWQKAEVycm9yIHdoaWxlIG9wal9qMmtfcG9zdF93cml0ZV90aWxlIHdpdGggdGlsZSBpbmRleCA9ICVkCgBGYWlsZWQgdG8gZGVjb2RlIHRoZSBjb2Rlc3RyZWFtIGluIHRoZSBKUDIgZmlsZQoAb3BqX2pwMl9hcHBseV9jZGVmOiBjbj0lZCwgbnVtY29tcHM9JWQKAG9wal9qcDJfYXBwbHlfY2RlZjogYWNuPSVkLCBudW1jb21wcz0lZAoASW52YWxpZCBjb21wb25lbnQgaW5kZXggJWQgKD49ICVkKS4KAEluY29tcGxldGUgY2hhbm5lbCBkZWZpbml0aW9ucy4KAFVuZXhwZWN0ZWQgT09NLgoASW52YWxpZCBjb21wb25lbnQvcGFsZXR0ZSBpbmRleCBmb3IgZGlyZWN0IG1hcHBpbmcgJWQuCgBDb21wb25lbnQgJWQgaXMgbWFwcGVkIHR3aWNlLgoARGlyZWN0IHVzZSBhdCAjJWQgaG93ZXZlciBwY29sPSVkLgoAQ29tcG9uZW50ICVkIGRvZXNuJ3QgaGF2ZSBhIG1hcHBpbmcuCgBDb21wb25lbnQgbWFwcGluZyBzZWVtcyB3cm9uZy4gVHJ5aW5nIHRvIGNvcnJlY3QuCgBJbnZhbGlkIG51bWJlciBvZiBjb21wb25lbnRzIHNwZWNpZmllZCB3aGlsZSBzZXR0aW5nIHVwIEpQMiBlbmNvZGVyCgBOb3QgZW5vdWdoIG1lbW9yeSB3aGVuIHNldHVwIHRoZSBKUDIgZW5jb2RlcgoAQWxwaGEgY2hhbm5lbCBzcGVjaWZpZWQgYnV0IHVua25vd24gZW51bWNzLiBObyBjZGVmIGJveCB3aWxsIGJlIGNyZWF0ZWQuCgBBbHBoYSBjaGFubmVsIHNwZWNpZmllZCBidXQgbm90IGVub3VnaCBpbWFnZSBjb21wb25lbnRzIGZvciBhbiBhdXRvbWF0aWMgY2RlZiBib3ggY3JlYXRpb24uCgBBbHBoYSBjaGFubmVsIHBvc2l0aW9uIGNvbmZsaWN0cyB3aXRoIGNvbG9yIGNoYW5uZWwuIE5vIGNkZWYgYm94IHdpbGwgYmUgY3JlYXRlZC4KAE11bHRpcGxlIGFscGhhIGNoYW5uZWxzIHNwZWNpZmllZC4gTm8gY2RlZiBib3ggd2lsbCBiZSBjcmVhdGVkLgoATm90IGVub3VnaCBtZW1vcnkgdG8gc2V0dXAgdGhlIEpQMiBlbmNvZGVyCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBoYW5kbGUganBlZzIwMDAgZmlsZSBoZWFkZXIKAENhbm5vdCBoYW5kbGUgYm94IHNpemVzIGhpZ2hlciB0aGFuIDJeMzIKAGJhZCBwbGFjZWQganBlZyBjb2Rlc3RyZWFtCgBDYW5ub3QgaGFuZGxlIGJveCBvZiB1bmRlZmluZWQgc2l6ZXMKAGludmFsaWQgYm94IHNpemUgJWQgKCV4KQoARm91bmQgYSBtaXNwbGFjZWQgJyVjJWMlYyVjJyBib3ggb3V0c2lkZSBqcDJoIGJveAoASlBFRzIwMDAgSGVhZGVyIGJveCBub3QgcmVhZCB5ZXQsICclYyVjJWMlYycgYm94IHdpbGwgYmUgaWdub3JlZAoAUHJvYmxlbSB3aXRoIHNraXBwaW5nIEpQRUcyMDAwIGJveCwgc3RyZWFtIGVycm9yCgBJbnZhbGlkIGJveCBzaXplICVkIGZvciBib3ggJyVjJWMlYyVjJy4gTmVlZCAlZCBieXRlcywgJWQgYnl0ZXMgcmVtYWluaW5nIAoATm90IGVub3VnaCBtZW1vcnkgdG8gaGFuZGxlIGpwZWcyMDAwIGJveAoAUHJvYmxlbSB3aXRoIHJlYWRpbmcgSlBFRzIwMDAgYm94LCBzdHJlYW0gZXJyb3IKAE1hbGZvcm1lZCBKUDIgZmlsZSBmb3JtYXQ6IGZpcnN0IGJveCBtdXN0IGJlIEpQRUcgMjAwMCBzaWduYXR1cmUgYm94CgBNYWxmb3JtZWQgSlAyIGZpbGUgZm9ybWF0OiBzZWNvbmQgYm94IG11c3QgYmUgZmlsZSB0eXBlIGJveAoASW5zdWZmaWNpZW50IGRhdGEgZm9yIENERUYgYm94LgoATnVtYmVyIG9mIGNoYW5uZWwgZGVzY3JpcHRpb24gaXMgZXF1YWwgdG8gemVybyBpbiBDREVGIGJveC4KAE5lZWQgdG8gcmVhZCBhIFBDTFIgYm94IGJlZm9yZSB0aGUgQ01BUCBib3guCgBPbmx5IG9uZSBDTUFQIGJveCBpcyBhbGxvd2VkLgoASW5zdWZmaWNpZW50IGRhdGEgZm9yIENNQVAgYm94LgoASW52YWxpZCBQQ0xSIGJveC4gUmVwb3J0cyAlZCBlbnRyaWVzCgBJbnZhbGlkIFBDTFIgYm94LiBSZXBvcnRzIDAgcGFsZXR0ZSBjb2x1bW5zCgBBIEJQQ0MgaGVhZGVyIGJveCBpcyBhdmFpbGFibGUgYWx0aG91Z2ggQlBDIGdpdmVuIGJ5IHRoZSBJSERSIGJveCAoJWQpIGluZGljYXRlIGNvbXBvbmVudHMgYml0IGRlcHRoIGlzIGNvbnN0YW50CgBCYWQgQlBDQyBoZWFkZXIgYm94IChiYWQgc2l6ZSkKAEJhZCBDT0xSIGhlYWRlciBib3ggKGJhZCBzaXplKQoAQSBjb25mb3JtaW5nIEpQMiByZWFkZXIgc2hhbGwgaWdub3JlIGFsbCBDb2xvdXIgU3BlY2lmaWNhdGlvbiBib3hlcyBhZnRlciB0aGUgZmlyc3QsIHNvIHdlIGlnbm9yZSB0aGlzIG9uZS4KAEJhZCBDT0xSIGhlYWRlciBib3ggKGJhZCBzaXplOiAlZCkKAE5vdCBlbm91Z2ggbWVtb3J5IGZvciBjaWVsYWIKAEJhZCBDT0xSIGhlYWRlciBib3ggKENJRUxhYiwgYmFkIHNpemU6ICVkKQoAQ09MUiBCT1ggbWV0aCB2YWx1ZSBpcyBub3QgYSByZWd1bGFyIHZhbHVlICglZCksIHNvIHdlIHdpbGwgaWdub3JlIHRoZSBlbnRpcmUgQ29sb3VyIFNwZWNpZmljYXRpb24gYm94LiAKAElnbm9yaW5nIGloZHIgYm94LiBGaXJzdCBpaGRyIGJveCBhbHJlYWR5IHJlYWQKAEJhZCBpbWFnZSBoZWFkZXIgYm94IChiYWQgc2l6ZSkKAEludmFsaWQgbnVtYmVyIG9mIGNvbXBvbmVudHMgKGloZHIpCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBoYW5kbGUgaW1hZ2UgaGVhZGVyIChpaGRyKQoASlAyIElIRFIgYm94OiBjb21wcmVzc2lvbiB0eXBlIGluZGljYXRlIHRoYXQgdGhlIGZpbGUgaXMgbm90IGEgY29uZm9ybWluZyBKUDIgZmlsZSAoJWQpIAoAVGhlICBib3ggbXVzdCBiZSB0aGUgZmlyc3QgYm94IGluIHRoZSBmaWxlLgoAQ2Fubm90IGhhbmRsZSBib3ggb2YgbGVzcyB0aGFuIDggYnl0ZXMKAENhbm5vdCBoYW5kbGUgWEwgYm94IG9mIGxlc3MgdGhhbiAxNiBieXRlcwoAQm94IGxlbmd0aCBpcyBpbmNvbnNpc3RlbnQuCgBTdHJlYW0gZXJyb3Igd2hpbGUgcmVhZGluZyBKUDIgSGVhZGVyIGJveAoAU3RyZWFtIGVycm9yIHdoaWxlIHJlYWRpbmcgSlAyIEhlYWRlciBib3g6IGJveCBsZW5ndGggaXMgaW5jb25zaXN0ZW50LgoAU3RyZWFtIGVycm9yIHdoaWxlIHJlYWRpbmcgSlAyIEhlYWRlciBib3g6IG5vICdpaGRyJyBib3guCgBUaGUgZnR5cCBib3ggbXVzdCBiZSB0aGUgc2Vjb25kIGJveCBpbiB0aGUgZmlsZS4KAEVycm9yIHdpdGggRlRZUCBzaWduYXR1cmUgQm94IHNpemUKAE5vdCBlbm91Z2ggbWVtb3J5IHdpdGggRlRZUCBCb3gKAFRoZSBzaWduYXR1cmUgYm94IG11c3QgYmUgdGhlIGZpcnN0IGJveCBpbiB0aGUgZmlsZS4KAEVycm9yIHdpdGggSlAgc2lnbmF0dXJlIEJveCBzaXplCgBFcnJvciB3aXRoIEpQIFNpZ25hdHVyZSA6IGJhZCBtYWdpYyBudW1iZXIKAEZhaWxlZCB0byBzZWVrIGluIHRoZSBzdHJlYW0uCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBob2xkIEpQMiBIZWFkZXIgZGF0YQoAU3RyZWFtIGVycm9yIHdoaWxlIHdyaXRpbmcgSlAyIEhlYWRlciBib3gKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGhhbmRsZSBmdHlwIGRhdGEKAEVycm9yIHdoaWxlIHdyaXRpbmcgZnR5cCBkYXRhIHRvIHN0cmVhbQoASlAyIGJveCB3aGljaCBhcmUgYWZ0ZXIgdGhlIGNvZGVzdHJlYW0gd2lsbCBub3QgYmUgcmVhZCBieSB0aGlzIGZ1bmN0aW9uLgoAVGlsZSBYIGNvb3JkaW5hdGVzIGFyZSBub3Qgc3VwcG9ydGVkCgBUaWxlIFkgY29vcmRpbmF0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQKAHRpbGVzIHJlcXVpcmUgYXQgbGVhc3Qgb25lIHJlc29sdXRpb24KAE5vdCBlbm91Z2ggbWVtb3J5IGZvciB0aWxlIGRhdGEKAE5vdCBlbm91Z2ggbWVtb3J5IGZvciB0aWxlIHJlc29sdXRpb25zCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBoYW5kbGUgYmFuZCBwcmVjaW50cwoATm90IGVub3VnaCBtZW1vcnkgZm9yIGN1cnJlbnQgcHJlY2luY3QgY29kZWJsb2NrIGVsZW1lbnQKAE5vIGluY2x0cmVlIGNyZWF0ZWQuCgBObyBpbXNidHJlZSBjcmVhdGVkLgoAVGlsZXMgZG9uJ3QgYWxsIGhhdmUgdGhlIHNhbWUgZGltZW5zaW9uLiBTa2lwIHRoZSBNQ1Qgc3RlcC4KAE51bWJlciBvZiBjb21wb25lbnRzICglZCkgaXMgaW5jb25zaXN0ZW50IHdpdGggYSBNQ1QuIFNraXAgdGhlIE1DVCBzdGVwLgoATm90IGVub3VnaCBtZW1vcnkgdG8gY3JlYXRlIFRhZy10cmVlCgB0Z3RfY3JlYXRlIHRyZWUtPm51bW5vZGVzID09IDAsIG5vIHRyZWUgY3JlYXRlZC4KAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGNyZWF0ZSBUYWctdHJlZSBub2RlcwoATm90IGVub3VnaCBtZW1vcnkgdG8gcmVpbml0aWFsaXplIHRoZSB0YWcgdHJlZQoATm90IGVub3VnaCBtZW1vcnkgdG8gYWRkIGEgbmV3IHZhbGlkYXRpb24gcHJvY2VkdXJlCgAAAQECAQICAgECAgICAgICAwMDAwMDAwMDAwMDAwMDAwUGBgYGBgYGBgYGBgYGBgYHBwcHBwcHBwcHBwcHBwcHAwMDAwMDAwMDAwMDAwMDAwQEBAQEBAQEBAQEBAQEBAQHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwUGBgYGBgYGBgYGBgYGBgYHBwcHBwcHBwcHBwcHBwcHCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAEBAgECAgIBAgICAgICAgUGBgYGBgYGBgYGBgYGBgYDAwMDAwMDAwMDAwMDAwMDBwcHBwcHBwcHBwcHBwcHBwUGBgYGBgYGBgYGBgYGBgYICAgICAgICAgICAgICAgIBwcHBwcHBwcHBwcHBwcHBwgICAgICAgICAgICAgICAgDAwMDAwMDAwMDAwMDAwMDBwcHBwcHBwcHBwcHBwcHBwQEBAQEBAQEBAQEBAQEBAQHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwgICAgICAgICAgICAgICAgHBwcHBwcHBwcHBwcHBwcHCAgICAgICAgICAgICAgICAABAQIBAgICAQICAgICAgIDAwMDAwMDAwMDAwMDAwMDBQYGBgYGBgYGBgYGBgYGBgcHBwcHBwcHBwcHBwcHBwcDAwMDAwMDAwMDAwMDAwMDBAQEBAQEBAQEBAQEBAQEBAcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBQYGBgYGBgYGBgYGBgYGBgcHBwcHBwcHBwcHBwcHBwcICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgAAwMGAwYGCAMGBggGCAgIAQQEBwQHBwgEBwcIBwgICAEEBAcEBwcIBAcHCAcICAgCBQUHBQcHCAUHBwgHCAgIAQQEBwQHBwgEBwcIBwgICAIFBQcFBwcIBQcHCAcICAgCBQUHBQcHCAUHBwgHCAgIAgUFBwUHBwgFBwcIBwgICAEEBAcEBwcIBAcHCAcICAgCBQUHBQcHCAUHBwgHCAgIAgUFBwUHBwgFBwcIBwgICAIFBQcFBwcIBQcHCAcICAgCBQUHBQcHCAUHBwgHCAgIAgUFBwUHBwgFBwcIBwgICAIFBQcFBwcIBQcHCAcICAgCBQUHBQcHCAUHBwgHCAgICQoMDQoKDQ0MDQwNDQ0NDQkKDAsKCQ0MDAsMCw0MDQwJCgwLCgoLCwwNCQoNDQoKCQoMDQoJCwwMCwkKDQwKCQkKDA0KCQsMDA0MDQsMCwwJCgwLCgoLCwwLDAsLCwsLCQoMCwoJDQwMDQkKCwwKCQkKDA0KCg0NDAsJCgsLCgoJCgwNCgoNDQwLCQoLCwoKCQoMCwoJDQwMDQkKCwwKCQkKDAsKCgsLDAsMCwsLCwsJCgwNCgkLDAwNDA0LDAsMCQoMDQoJCwwMCwkKDQwKCQkKDAsKCgsLDA0JCg0NCgoJCgwLCgkNDAwLDAsNDA0MCQoMDQoKDQ0MDQwNDQ0NDQAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABAQAAAQEAAAAAAAAAAAABAQEAAAEBAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAAAAAEAAAEBAAAAAAAAAAAAAAAAAQEBAAEBAAAAAAAAAQAAAQEBAQEBAQAAAAEAAAEBAAAAAAAAAAABAQAAAQEAAAABAAAAAAAAAQEAAQEBAAAAAAEBAAABAQEBAQEBAQEBAAEBAQAAAQEBAQEBAQEBAQAAAAABAAAAAQEAAAEBAQAAAQAAAQEAAAEBAAEBAQEBAAABAQEAAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQFyZWFkOiBzZWdtZW50IHRvbyBsb25nICglZCkgd2l0aCBtYXggKCVkKSBmb3IgY29kZWJsb2NrICVkIChwPSVkLCBiPSVkLCByPSVkLCBjPSVkKQoAcmVhZDogc2VnbWVudCB0b28gbG9uZyAoJWQpIHdpdGggY3VycmVudCBzaXplICglZCA+ICVkKSBmb3IgY29kZWJsb2NrICVkIChwPSVkLCBiPSVkLCByPSVkLCBjPSVkKQoAc2tpcDogc2VnbWVudCB0b28gbG9uZyAoJWQpIHdpdGggbWF4ICglZCkgZm9yIGNvZGVibG9jayAlZCAocD0lZCwgYj0lZCwgcj0lZCwgYz0lZCkKAEludmFsaWQgcHJlY2luY3QKAE5vdCBlbm91Z2ggc3BhY2UgZm9yIGV4cGVjdGVkIFNPUCBtYXJrZXIKAEV4cGVjdGVkIFNPUCBtYXJrZXIKAE5vdCBlbm91Z2ggc3BhY2UgZm9yIGV4cGVjdGVkIEVQSCBtYXJrZXIKAEV4cGVjdGVkIEVQSCBtYXJrZXIKAHJ3YQARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAAC0rICAgMFgweAAobnVsbCkALTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAwMTIzNDU2Nzg5QUJDREVGLgBUISIZDQECAxFLHAwQBAsdEh4naG5vcHFiIAUGDxMUFRoIFgcoJBcYCQoOGx8lI4OCfSYqKzw9Pj9DR0pNWFlaW1xdXl9gYWNkZWZnaWprbHJzdHl6e3wASWxsZWdhbCBieXRlIHNlcXVlbmNlAERvbWFpbiBlcnJvcgBSZXN1bHQgbm90IHJlcHJlc2VudGFibGUATm90IGEgdHR5AFBlcm1pc3Npb24gZGVuaWVkAE9wZXJhdGlvbiBub3QgcGVybWl0dGVkAE5vIHN1Y2ggZmlsZSBvciBkaXJlY3RvcnkATm8gc3VjaCBwcm9jZXNzAEZpbGUgZXhpc3RzAFZhbHVlIHRvbyBsYXJnZSBmb3IgZGF0YSB0eXBlAE5vIHNwYWNlIGxlZnQgb24gZGV2aWNlAE91dCBvZiBtZW1vcnkAUmVzb3VyY2UgYnVzeQBJbnRlcnJ1cHRlZCBzeXN0ZW0gY2FsbABSZXNvdXJjZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZQBJbnZhbGlkIHNlZWsAQ3Jvc3MtZGV2aWNlIGxpbmsAUmVhZC1vbmx5IGZpbGUgc3lzdGVtAERpcmVjdG9yeSBub3QgZW1wdHkAQ29ubmVjdGlvbiByZXNldCBieSBwZWVyAE9wZXJhdGlvbiB0aW1lZCBvdXQAQ29ubmVjdGlvbiByZWZ1c2VkAEhvc3QgaXMgZG93bgBIb3N0IGlzIHVucmVhY2hhYmxlAEFkZHJlc3MgaW4gdXNlAEJyb2tlbiBwaXBlAEkvTyBlcnJvcgBObyBzdWNoIGRldmljZSBvciBhZGRyZXNzAEJsb2NrIGRldmljZSByZXF1aXJlZABObyBzdWNoIGRldmljZQBOb3QgYSBkaXJlY3RvcnkASXMgYSBkaXJlY3RvcnkAVGV4dCBmaWxlIGJ1c3kARXhlYyBmb3JtYXQgZXJyb3IASW52YWxpZCBhcmd1bWVudABBcmd1bWVudCBsaXN0IHRvbyBsb25nAFN5bWJvbGljIGxpbmsgbG9vcABGaWxlbmFtZSB0b28gbG9uZwBUb28gbWFueSBvcGVuIGZpbGVzIGluIHN5c3RlbQBObyBmaWxlIGRlc2NyaXB0b3JzIGF2YWlsYWJsZQBCYWQgZmlsZSBkZXNjcmlwdG9yAE5vIGNoaWxkIHByb2Nlc3MAQmFkIGFkZHJlc3MARmlsZSB0b28gbGFyZ2UAVG9vIG1hbnkgbGlua3MATm8gbG9ja3MgYXZhaWxhYmxlAFJlc291cmNlIGRlYWRsb2NrIHdvdWxkIG9jY3VyAFN0YXRlIG5vdCByZWNvdmVyYWJsZQBQcmV2aW91cyBvd25lciBkaWVkAE9wZXJhdGlvbiBjYW5jZWxlZABGdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQATm8gbWVzc2FnZSBvZiBkZXNpcmVkIHR5cGUASWRlbnRpZmllciByZW1vdmVkAERldmljZSBub3QgYSBzdHJlYW0ATm8gZGF0YSBhdmFpbGFibGUARGV2aWNlIHRpbWVvdXQAT3V0IG9mIHN0cmVhbXMgcmVzb3VyY2VzAExpbmsgaGFzIGJlZW4gc2V2ZXJlZABQcm90b2NvbCBlcnJvcgBCYWQgbWVzc2FnZQBGaWxlIGRlc2NyaXB0b3IgaW4gYmFkIHN0YXRlAE5vdCBhIHNvY2tldABEZXN0aW5hdGlvbiBhZGRyZXNzIHJlcXVpcmVkAE1lc3NhZ2UgdG9vIGxhcmdlAFByb3RvY29sIHdyb25nIHR5cGUgZm9yIHNvY2tldABQcm90b2NvbCBub3QgYXZhaWxhYmxlAFByb3RvY29sIG5vdCBzdXBwb3J0ZWQAU29ja2V0IHR5cGUgbm90IHN1cHBvcnRlZABOb3Qgc3VwcG9ydGVkAFByb3RvY29sIGZhbWlseSBub3Qgc3VwcG9ydGVkAEFkZHJlc3MgZmFtaWx5IG5vdCBzdXBwb3J0ZWQgYnkgcHJvdG9jb2wAQWRkcmVzcyBub3QgYXZhaWxhYmxlAE5ldHdvcmsgaXMgZG93bgBOZXR3b3JrIHVucmVhY2hhYmxlAENvbm5lY3Rpb24gcmVzZXQgYnkgbmV0d29yawBDb25uZWN0aW9uIGFib3J0ZWQATm8gYnVmZmVyIHNwYWNlIGF2YWlsYWJsZQBTb2NrZXQgaXMgY29ubmVjdGVkAFNvY2tldCBub3QgY29ubmVjdGVkAENhbm5vdCBzZW5kIGFmdGVyIHNvY2tldCBzaHV0ZG93bgBPcGVyYXRpb24gYWxyZWFkeSBpbiBwcm9ncmVzcwBPcGVyYXRpb24gaW4gcHJvZ3Jlc3MAU3RhbGUgZmlsZSBoYW5kbGUAUmVtb3RlIEkvTyBlcnJvcgBRdW90YSBleGNlZWRlZABObyBtZWRpdW0gZm91bmQAV3JvbmcgbWVkaXVtIHR5cGUATm8gZXJyb3IgaW5mb3JtYXRpb24=";var gt=L;L+=16;var yt={varargs:0,get:function(t){return yt.varargs+=4,B[yt.varargs-4>>2]},getStr:function(){return S(yt.get())},get64:function(){var t=yt.get(),e=yt.get();return v(t>=0?0===e:-1===e),t},getZero:function(){v(0===yt.get())}};function vt(t,e){yt.varargs=e;try{var n=yt.get(),i=yt.get(),r=yt.get(),a=0;vt.buffers||(vt.buffers=[null,[],[]],vt.printChar=function(t,e){var n=vt.buffers[t];v(n),0===e||10===e?((1===t?o.print:o.printErr)(E(n,0)),n.length=0):n.push(e)});for(var s=0;s<r;s++){for(var l=B[i+8*s>>2],c=B[i+(8*s+4)>>2],u=0;u<c;u++)vt.printChar(n,k[l+u]);a+=c}return a}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ht(t),-t.errno}}var bt=function(t,e,n,i){var r,o;"number"==typeof t?(r=!0,o=t):(r=!1,o=t.length);var a,s="string"==typeof e?e:null;if(a=n==x?i:["function"==typeof Bt?Bt:p,Rt,p,function(t){v(G);var e=B[G>>2],n=e+t+15&-16;return B[G>>2]=n,n>=X&&!j()?(B[G>>2]=e,0):e}][void 0===n?A:n](Math.max(o,s?1:e.length)),r){var l;for(i=a,v(0==(3&a)),l=a+(-4&o);i<l;i+=4)B[i>>2]=0;for(l=a+o;i<l;)I[i++>>0]=0;return a}if("i8"===s)return t.subarray||t.slice?k.set(t,a):k.set(new Uint8Array(t),a),a;for(var c,u,h,f=0;f<o;){var d=t[f];0!==(c=s||e[f])?("i64"==c&&(c="i32"),w(a+f,d,c),h!==c&&(u=g(c),h=c),f+=u):f++}return a}([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",A);var _t=at,wt=st,At=st,xt=lt;G=p(4),F=m(O=(N=m(L))+Y),B[G>>2]=F,D=!0;var St=!1;function Mt(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];i>255&&(St&&v(!1,"Character code "+i+" ("+String.fromCharCode(i)+")  at offset "+n+" not in 0x00-0xFF."),i&=255),e.push(String.fromCharCode(i))}return e.join("")}var Et="function"==typeof atob?atob:function(t){var e,n,i,r,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=s.indexOf(t.charAt(c++))<<2|(r=s.indexOf(t.charAt(c++)))>>4,n=(15&r)<<4|(o=s.indexOf(t.charAt(c++)))>>2,i=(3&o)<<6|(a=s.indexOf(t.charAt(c++))),l+=String.fromCharCode(e),64!==o&&(l+=String.fromCharCode(n)),64!==a&&(l+=String.fromCharCode(i))}while(c<t.length);return l};function Tt(t){if(mt(t))return function(t){if("boolean"==typeof h&&h){var e;try{e=i.from(t,"base64")}catch(n){e=new i(t,"base64")}return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}try{for(var n=Et(t),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}catch(t){throw new Error("Converting base64 string to bytes failed.")}}(t.slice(pt.length))}o.asmGlobalArg={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0,byteLength:z},o.asmLibraryArg={abort:Ht,assert:v,enlargeMemory:j,getTotalMemory:function(){return X},abortOnCannotGrowMemory:function(){Ht("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+X+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or (4) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")},invoke_di:function(t,e){try{return o.dynCall_di(t,e)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_ii:function(t,e){try{return o.dynCall_ii(t,e)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_iii:function(t,e,n){try{return o.dynCall_iii(t,e,n)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_iiii:function(t,e,n,i){try{return o.dynCall_iiii(t,e,n,i)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_iiiii:function(t,e,n,i,r){try{return o.dynCall_iiiii(t,e,n,i,r)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_iiiiii:function(t,e,n,i,r,a){try{return o.dynCall_iiiiii(t,e,n,i,r,a)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_iiiiiii:function(t,e,n,i,r,a,s){try{return o.dynCall_iiiiiii(t,e,n,i,r,a,s)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_iiiiiiii:function(t,e,n,i,r,a,s,l){try{return o.dynCall_iiiiiiii(t,e,n,i,r,a,s,l)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_iiiiiiiiiiii:function(t,e,n,i,r,a,s,l,c,u,h,f){try{return o.dynCall_iiiiiiiiiiii(t,e,n,i,r,a,s,l,c,u,h,f)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_vi:function(t,e){try{o.dynCall_vi(t,e)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_vii:function(t,e,n){try{o.dynCall_vii(t,e,n)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_viii:function(t,e,n,i){try{o.dynCall_viii(t,e,n,i)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},invoke_viiii:function(t,e,n,i,r){try{o.dynCall_viiii(t,e,n,i,r)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;o.setThrew(1,0)}},___lock:function(){},___setErrNo:function(t){return o.___errno_location&&(B[o.___errno_location()>>2]=t),t},___syscall140:function(t,e){yt.varargs=e;try{var n=yt.getStreamFromFD(),i=(yt.get(),yt.get()),r=yt.get(),o=yt.get(),a=i;return FS.llseek(n,a,o),B[r>>2]=n.position,n.getdents&&0===a&&0===o&&(n.getdents=null),0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ht(t),-t.errno}},___syscall145:function(t,e){yt.varargs=e;try{var n=yt.getStreamFromFD(),i=yt.get(),r=yt.get();return yt.doReadv(n,i,r)}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ht(t),-t.errno}},___syscall146:vt,___syscall221:function(t,e){yt.varargs=e;try{return 0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ht(t),-t.errno}},___syscall5:function(t,e){yt.varargs=e;try{var n=yt.getStr(),i=yt.get(),r=yt.get();return FS.open(n,i,r).fd}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ht(t),-t.errno}},___syscall54:function(t,e){yt.varargs=e;try{return 0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ht(t),-t.errno}},___syscall6:function(t,e){yt.varargs=e;try{var n=yt.getStreamFromFD();return FS.close(n),0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ht(t),-t.errno}},___unlock:function(){},_emscripten_memcpy_big:function(t,e,n){return k.set(k.subarray(e,e+n),t),t},_llvm_ceil_f32:_t,_llvm_floor_f32:wt,_llvm_floor_f64:At,_llvm_pow_f64:xt,flush_NO_FILESYSTEM:function(){var t=o._fflush;t&&t(0);var e=vt.printChar;if(e){var n=vt.buffers;n[1].length&&e(1,10),n[2].length&&e(2,10)}},DYNAMICTOP_PTR:G,tempDoublePtr:gt,ABORT:y,STACKTOP:N,STACK_MAX:O,cttz_i8:bt};var It,kt=function(t,e,n){"almost asm";var i=t.Int8Array,r=new i(n),o=t.Int16Array,a=new o(n),s=t.Int32Array,l=new s(n),c=t.Uint8Array,u=new c(n),h=t.Uint16Array,f=new h(n),d=t.Uint32Array,p=(new d(n),t.Float32Array),m=new p(n),g=t.Float64Array,y=new g(n),v=t.byteLength,b=0|e.DYNAMICTOP_PTR,_=0|e.tempDoublePtr,w=(e.ABORT,0|e.STACKTOP),A=(e.STACK_MAX,0|e.cttz_i8),x=0,S=(t.NaN,t.Infinity,0),M=t.Math.floor,E=(t.Math.abs,t.Math.sqrt),T=t.Math.pow,I=(t.Math.cos,t.Math.sin,t.Math.tan,t.Math.acos,t.Math.asin,t.Math.atan,t.Math.atan2,t.Math.exp,t.Math.log,t.Math.ceil),k=t.Math.imul,C=(t.Math.min,t.Math.max,t.Math.clz32),B=e.abort,R=(e.assert,e.enlargeMemory),P=e.getTotalMemory,L=e.abortOnCannotGrowMemory,D=(e.invoke_di,e.invoke_ii,e.invoke_iii,e.invoke_iiii,e.invoke_iiiii,e.invoke_iiiiii,e.invoke_iiiiiii,e.invoke_iiiiiiii,e.invoke_iiiiiiiiiiii,e.invoke_vi,e.invoke_vii,e.invoke_viii,e.invoke_viiii,e.___lock),N=e.___setErrNo,O=e.___syscall140,F=e.___syscall145,G=e.___syscall146,z=e.___syscall221,U=e.___syscall5,H=e.___syscall54,V=e.___syscall6,W=e.___unlock,Z=e._emscripten_memcpy_big;function j(t,e){t|=0,e|=0;var n=0;return(n=0|Ut(1,72))?(l[n+64>>2]=t,t=0|zt(t),l[n+32>>2]=t,t?(l[n+36>>2]=t,e=0==(0|e),l[(t=n+68|0)>>2]=l[t>>2]|(e?1:2),l[n+40>>2]=e?29:30,l[n+44>>2]=e?31:32,l[n+16>>2]=4,l[n+20>>2]=5,l[n+24>>2]=6,l[n+28>>2]=7,0|n):(Zt(n),0|(n=0))):0|(n=0)}function Y(t){t|=0;var e,n=0;return(e=0|Ut(1,72))?(l[e+64>>2]=1048576,n=0|zt(1048576),l[e+32>>2]=n,n?(l[e+36>>2]=n,n=0==(0|t),l[(t=e+68|0)>>2]=l[t>>2]|(n?1:2),l[e+40>>2]=n?29:30,l[e+44>>2]=n?31:32,l[e+16>>2]=4,l[e+20>>2]=5,l[e+24>>2]=6,l[e+28>>2]=7,0|(n=e)):(Zt(e),0|(n=0))):0|(n=0)}function X(t){var e=0;(t|=0)&&(0|(e=0|l[t+4>>2])&&no[7&e](0|l[t>>2]),Zt(0|l[(e=t+32|0)>>2]),l[e>>2]=0,Zt(t))}function J(t,e){e|=0,(t|=0)&&2&l[t+68>>2]&&(l[t+16>>2]=e)}function Q(t,e){e|=0,(t|=0)&&(l[t+28>>2]=e)}function q(t,e){e|=0,(t|=0)&&(l[t+24>>2]=e)}function K(t,e,n){e|=0,n|=0,(t|=0)&&(l[t>>2]=e,l[t+4>>2]=n)}function $(t,e,n){e|=0,n|=0,(t|=0)&&(l[(t=t+8|0)>>2]=e,l[t+4>>2]=n)}function tt(t,e){e|=0,(t|=0)&&1&l[t+68>>2]&&(l[t+20>>2]=e)}function et(t,e,n,i){e|=0,n|=0,i|=0;var r,o=0;return l[36+(t|=0)>>2]=l[t+32>>2],l[t+48>>2]=0,o=0==(0|Qr[63&l[t+28>>2]](e,n,0|l[t>>2])),r=0|l[(i=t+68|0)>>2],o?(l[i>>2]=4|r,0|(o=0)):(l[i>>2]=-5&r,l[(o=t+56|0)>>2]=e,l[o+4>>2]=n,0|(o=1))}function nt(t,e,n){t|=0,e|=0,n|=0;var i,o,a=0;if(o=w,w=w+16|0,l[(i=o)>>2]=e,n){for(a=0,e=i+n|0;e=e+-1|0,r[t>>0]=0|r[e>>0],(0|(a=a+1|0))!=(0|n);)t=t+1|0;w=o}else w=o}function it(t,e,n){t|=0,n|=0;var i=0;if(l[(e|=0)>>2]=0,n)for(i=e+n|0,e=t,t=0;r[(i=i+-1|0)>>0]=0|r[e>>0],(0|(t=t+1|0))!=(0|n);)e=e+1|0}function rt(t,e){t|=0,e=+e;var n,i=0,o=0;y[_>>3]=e,o=0|Er(0|(n=0|l[_>>2]),0|(i=0|l[_+4>>2]),56),r[t>>0]=o,o=0|Er(0|n,0|i,48),r[t+1>>0]=o,o=0|Er(0|n,0|i,40),r[t+2>>0]=o,r[t+3>>0]=i,o=0|Er(0|n,0|i,24),r[t+4>>0]=o,o=0|Er(0|n,0|i,16),r[t+5>>0]=o,i=0|Er(0|n,0|i,8),r[t+6>>0]=i,r[t+7>>0]=n}function ot(t,e){var n;t|=0,r[(n=8+(e|=0)|0)-1>>0]=0|r[t>>0],r[n+-2>>0]=0|r[t+1>>0],r[n+-3>>0]=0|r[t+2>>0],r[n+-4>>0]=0|r[t+3>>0],r[n+-5>>0]=0|r[t+4>>0],r[n+-6>>0]=0|r[t+5>>0],r[n+-7>>0]=0|r[t+6>>0],r[e>>0]=0|r[t+7>>0]}function at(t,e){t|=0,e=+e;var n=0;m[_>>2]=e,n=0|l[_>>2],r[t>>0]=n>>>24,r[t+1>>0]=n>>>16,r[t+2>>0]=n>>>8,r[t+3>>0]=n}function st(t,e){var n;t|=0,r[(n=4+(e|=0)|0)-1>>0]=0|r[t>>0],r[n+-2>>0]=0|r[t+1>>0],r[n+-3>>0]=0|r[t+2>>0],r[e>>0]=0|r[t+3>>0]}function lt(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0;if(a=w,w=w+16|0,v=a+8|0,y=a,(s=0|l[(o=48+(t|=0)|0)>>2])>>>0>=n>>>0)return kr(0|e,0|l[(v=t+36|0)>>2],0|n),l[v>>2]=(0|l[v>>2])+n,l[o>>2]=(0|l[o>>2])-n,y=0|br(0|l[(y=v=t+56|0)>>2],0|l[y+4>>2],0|n,0),l[v>>2]=y,l[v+4>>2]=S,w=a,0|(v=n);if(4&l[(r=t+68|0)>>2]|0)return kr(0|e,0|l[(v=t+36|0)>>2],0|s),y=0|l[o>>2],l[v>>2]=(0|l[v>>2])+y,y=0|br(0|l[(i=v=t+56|0)>>2],0|l[i+4>>2],0|y,0),l[v>>2]=y,l[v+4>>2]=S,l[o>>2]=0,w=a,0|(v=0|s?s:-1);for(s?(kr(0|e,0|l[(m=t+36|0)>>2],0|s),c=0|l[(g=t+32|0)>>2],l[m>>2]=c,p=0|l[o>>2],f=0|br(0|l[(f=d=t+56|0)>>2],0|l[f+4>>2],0|p,0),l[d>>2]=f,l[d+4>>2]=S,l[o>>2]=0,n=n-p|0,e=e+p|0):(c=0|l[(g=t+32|0)>>2],l[(m=t+36|0)>>2]=c,s=0),d=t+64|0,p=t+16|0,f=t+56|0;;){if(u=0|l[d>>2],h=0|l[p>>2],n>>>0>=u>>>0){if(u=0|Qr[63&h](e,n,0|l[t>>2]),l[o>>2]=u,-1==(0|u)){c=16;break}if(s=u+s|0,!(u>>>0<n>>>0)){c=19;break}c=u}else{if(c=0|Qr[63&h](c,u,0|l[t>>2]),l[o>>2]=c,-1==(0|c)){c=11;break}if(c>>>0>=n>>>0){c=14;break}kr(0|e,0|l[m>>2],0|c),s=c+s|0,c=0|l[o>>2]}h=0|l[g>>2],l[m>>2]=h,b=0|br(0|l[(b=f)>>2],0|l[b+4>>2],0|c,0),l[(u=f)>>2]=b,l[u+4>>2]=S,l[o>>2]=0,n=n-c|0,e=e+c|0,c=h}return 11==(0|c)?(mt(i,4,4386,y),l[o>>2]=0,l[r>>2]=4|l[r>>2],w=a,0|(b=0|s?s:-1)):14==(0|c)?(kr(0|e,0|l[m>>2],0|n),l[m>>2]=(0|l[m>>2])+n,l[o>>2]=(0|l[o>>2])-n,v=0|br(0|l[(v=b=t+56|0)>>2],0|l[v+4>>2],0|n,0),l[b>>2]=v,l[b+4>>2]=S,w=a,0|(b=s+n|0)):16==(0|c)?(mt(i,4,4386,v),l[o>>2]=0,l[r>>2]=4|l[r>>2],w=a,0|(b=0|s?s:-1)):19==(0|c)?(v=0|br(0|l[(v=b=t+56|0)>>2],0|l[v+4>>2],0|u,0),l[b>>2]=v,l[b+4>>2]=S,l[m>>2]=l[g>>2],l[o>>2]=0,w=a,0|(b=s)):0}function ct(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0;if(s=w,w=w+16|0,a=s,8&l[(r=68+(t|=0)|0)>>2]|0)return w=s,0|(v=-1);o=t+64|0,d=0|l[(v=t+48|0)>>2],c=(0|l[o>>2])-d|0;do{if(c>>>0<n>>>0){m=t+32|0,u=t+36|0,g=t+20|0,h=t+56|0,f=0,p=c;t:for(;;){if(p?(kr(0|l[u>>2],0|e,0|p),c=0|l[m>>2],l[u>>2]=c,d=(0|l[v>>2])+p|0,l[v>>2]=d,_=0|br(0|l[(_=h)>>2],0|l[_+4>>2],0|p,0),l[(b=h)>>2]=_,l[b+4>>2]=S,f=p+f|0,n=n-p|0,e=e+p|0):c=0|l[m>>2],l[u>>2]=c,d){do{if(-1==(0|(d=0|Qr[63&l[g>>2]](c,d,0|l[t>>2]))))break t;c=(0|l[u>>2])+d|0,l[u>>2]=c,d=(0|l[v>>2])-d|0,l[v>>2]=d}while(0!=(0|d));c=0|l[m>>2]}if(l[u>>2]=c,n>>>0<=(p=0|l[o>>2])>>>0){y=5;break}d=0}if(5==(0|y))break;return l[r>>2]=8|l[r>>2],mt(i,4,4360,a),w=s,0|(_=-1)}f=0,h=t+56|0,u=c=t+36|0,c=0|l[c>>2]}while(0);return kr(0|c,0|e,0|n),l[u>>2]=(0|l[u>>2])+n,l[v>>2]=(0|l[v>>2])+n,b=0|br(0|l[(b=h)>>2],0|l[b+4>>2],0|n,0),l[(_=h)>>2]=b,l[_+4>>2]=S,w=s,0|(_=f+n|0)}function ut(t){return S=0|l[4+(t=56+(t|=0)|0)>>2],0|l[t>>2]}function ht(t){var e=0,n=0;return 0==(0|(e=0|l[(n=8+(t|=0)|0)>>2]))&0==(0|(n=0|l[n+4>>2]))?(S=e=0,0|(n=0)):(n=0|_r(0|e,0|n,0|l[(t=t+56|0)>>2],0|l[t+4>>2]),S=e=S,0|n)}function ft(t,e,n,i){return e|=0,n|=0,i|=0,0|(i=0|qr[63&l[40+(t|=0)>>2]](t,e,n,i))}function dt(t,e,n,i){return e|=0,n|=0,i|=0,0|qr[63&l[44+(t|=0)>>2]](t,e,n,i)}function pt(t){return 7!=(0|l[28+(t|=0)>>2])|0}function mt(t,e,n,i){t|=0,e|=0,n|=0,i|=0;var r,o,a,s=0;a=w,w=w+528|0,r=a,o=a+16|0;t:do{if(t){switch(0|e){case 1:e=t+12|0;break;case 2:e=t+16|0,t=t+4|0;break;case 4:e=t+20|0,t=t+8|0;break;default:e=0;break t}s=0|l[e>>2],e=0|l[t>>2],s?n?(Cr(0|o,0,512),l[r>>2]=i,lr(o,512,n,r),io[7&s](o,e),e=1):e=1:e=0}else e=0}while(0);return w=a,0|e}function gt(t){l[(t|=0)>>2]=0,l[t+4>>2]=0,l[t+8>>2]=0,l[t+12>>2]=4,l[t+20>>2]=4,l[t+16>>2]=4}function yt(t,e,n){t|=0,e|=0,n|=0;var i,r,o=0,a=0,s=0,c=0,u=0;if(!(i=0|Ut(1,36)))return 0|(s=i);if(l[i+20>>2]=n,l[(r=i+16|0)>>2]=t,o=0|Ut(1,52*t|0),l[(s=i+24|0)>>2]=o,!o)return 0|(n=0|l[i+28>>2])&&Zt(n),Zt(i),0|(s=0);if(!t)return 0|(s=i);for(n=0;l[o+(52*n|0)>>2]=l[e+(36*n|0)>>2],l[o+(52*n|0)+4>>2]=l[e+(36*n|0)+4>>2],c=0|l[e+(36*n|0)+8>>2],l[o+(52*n|0)+8>>2]=c,u=0|l[e+(36*n|0)+12>>2],l[o+(52*n|0)+12>>2]=u,l[o+(52*n|0)+16>>2]=l[e+(36*n|0)+16>>2],l[o+(52*n|0)+20>>2]=l[e+(36*n|0)+20>>2],l[o+(52*n|0)+24>>2]=l[e+(36*n|0)+24>>2],l[o+(52*n|0)+28>>2]=l[e+(36*n|0)+28>>2],l[o+(52*n|0)+32>>2]=l[e+(36*n|0)+32>>2],c=0|Ut(0|k(u,c),4),l[o+(52*n|0)+44>>2]=c,n=n+1|0,c;){if(n>>>0>=t>>>0){a=22;break}o=0|l[s>>2]}if(22==(0|a))return 0|i;if(0|(n=0|l[s>>2])){if(o=0|l[r>>2]){for(t=0;(n=0|l[n+(52*t|0)+44>>2])&&(Zt(n),o=0|l[r>>2]),!((n=t+1|0)>>>0>=o>>>0);)t=n,n=0|l[s>>2];n=0|l[s>>2]}Zt(n)}return 0|(n=0|l[i+28>>2])&&Zt(n),Zt(i),0|(u=0)}function vt(t){var e,n=0,i=0,r=0,o=0;if(t|=0){if(0|(n=0|l[(e=t+24|0)>>2])){if(i=0|l[(o=t+16|0)>>2]){for(r=0;(n=0|l[n+(52*r|0)+44>>2])&&(Zt(n),i=0|l[o>>2]),!((n=r+1|0)>>>0>=i>>>0);)r=n,n=0|l[e>>2];n=0|l[e>>2]}Zt(n)}0|(n=0|l[t+28>>2])&&Zt(n),Zt(t)}}function bt(){return 0|Ut(1,36)}function _t(t,e){t|=0;var n,i,r=0,o=0,a=0,s=0,c=0;if(l[(e|=0)>>2]=l[t>>2],l[e+4>>2]=l[t+4>>2],l[e+8>>2]=l[t+8>>2],l[e+12>>2]=l[t+12>>2],n=e+16|0,o=0|l[(i=e+24|0)>>2]){if(a=0|l[n>>2]){for(r=0;(o=0|l[o+(52*r|0)+44>>2])&&(Zt(o),a=0|l[n>>2]),!((r=r+1|0)>>>0>=a>>>0);)o=0|l[i>>2];r=i,o=0|l[i>>2]}else r=i;Zt(o),l[i>>2]=0}else r=i;if(o=0|l[t+16>>2],l[n>>2]=o,o=0|zt(52*o|0),l[r>>2]=o,!o)return l[i>>2]=0,void(l[n>>2]=0);if(0|l[n>>2]){c=t+24|0,s=0,r=o;do{r=r+(52*s|0)|0,o=(0|l[c>>2])+(52*s|0)|0,a=r+52|0;do{l[r>>2]=l[o>>2],r=r+4|0,o=o+4|0}while((0|r)<(0|a));r=0|l[i>>2],l[r+(52*s|0)+44>>2]=0,s=s+1|0}while(s>>>0<(0|l[n>>2])>>>0)}if(l[e+20>>2]=l[t+20>>2],r=0|l[(a=t+32|0)>>2],l[(s=e+32|0)>>2]=r,r)return o=0|zt(r),l[(r=e+28|0)>>2]=o,o?void kr(0|o,0|l[t+28>>2],0|l[a>>2]):(l[r>>2]=0,void(l[s>>2]=0));l[e+28>>2]=0}function wt(t){t|=0;var e=0;if(!(e=0|Ut(1,84)))return 0|(e=0);switch(l[e+68>>2]=0,0|t){case 0:if(l[e+4>>2]=8,l[e+12>>2]=9,l[e>>2]=33,l[e+8>>2]=1,l[e+16>>2]=1,l[e+20>>2]=34,t=0|Yt(),l[e+40>>2]=t,!t)return Zt(e),0|(e=0);break;case 2:if(l[e+4>>2]=10,l[e+12>>2]=11,l[e>>2]=35,l[e+8>>2]=2,l[e+16>>2]=2,l[e+20>>2]=36,t=0|Ce(0),l[e+40>>2]=t,!t)return Zt(e),0|(e=0);break;default:return Zt(e),0|(e=0)}return gt(e+44|0),0|e}function At(t){t|=0;var e=0;if(!(e=0|Ut(1,84)))return 0|(e=0);switch(l[e+68>>2]=1,0|t){case 0:if(l[e+72>>2]=13,l[e+76>>2]=2,l[e+80>>2]=3,l[e+4>>2]=37,l[e+16>>2]=12,l[e>>2]=38,l[e+20>>2]=1,l[e+24>>2]=5,l[e+8>>2]=1,l[e+12>>2]=3,l[e+28>>2]=1,l[e+32>>2]=1,l[e+36>>2]=13,t=0|ae(),l[e+40>>2]=t,!t)return Zt(e),0|(e=0);break;case 2:if(l[e+72>>2]=14,l[e+76>>2]=4,l[e+80>>2]=5,l[e+4>>2]=39,l[e+16>>2]=14,l[e>>2]=40,l[e+8>>2]=2,l[e+12>>2]=4,l[e+20>>2]=2,l[e+24>>2]=6,l[e+28>>2]=2,l[e+32>>2]=2,l[e+36>>2]=15,t=0|Ce(1),l[e+40>>2]=t,!t)return Zt(e),0|(e=0);break;default:return Zt(e),0|(e=0)}return gt(e+44|0),0|e}function xt(t,e,n){return n|=0,0!=(0|(t|=0))&0!=(0|(e|=0))&&0|l[t+68>>2]?0|(n=0|qr[63&l[t+4>>2]](0|l[t+40>>2],e,n,t+44|0)):0|(n=0)}function St(t){var e=0;(t|=0)&&(0|l[t+68>>2]?(e=t+40|0,no[7&l[t+20>>2]](0|l[e>>2])):(e=t+40|0,no[7&l[t+16>>2]](0|l[e>>2])),l[e>>2]=0,Zt(t))}function Mt(t){var e,n=0;(t|=0)&&(n=0|l[t>>2],(e=0|l[n+48>>2])&&(Zt(e),n=0|l[t>>2]),Zt(n),l[t>>2]=0)}function Et(t,e){return 0!=(0|(t|=0))&0!=(0|(e|=0))?0|l[t+68>>2]?0|(e=0):0|(e=0|Qr[63&l[t+4>>2]](0|l[t+40>>2],e,t+44|0)):0|(e=0)}function Tt(t,e){return 0!=(0|(t|=0))&0!=(0|(e|=0))?0|l[t+68>>2]?0|(e=0):0|(e=0|Qr[63&l[t+12>>2]](0|l[t+40>>2],e,t+44|0)):0|(e=0)}function It(t,e,n){var i;return n|=0,i=w,w=w+16|0,0!=(0|(t|=0))&0!=(0|(e|=0))?0|l[e+68>>2]?(n=0|qr[63&l[e>>2]](t,0|l[e+40>>2],n,e+44|0),w=i,0|n):(mt(e+44|0,1,4520,i),w=i,0|(n=0)):(w=i,0|(n=0))}function kt(t){(t|=0)&&(Cr(0|t,0,8248),l[t+8200>>2]=-1,l[t+8204>>2]=-1,l[t+8248>>2]=0)}function Ct(t){(t|=0)&&(Cr(0|t,0,18708),l[t+5592>>2]=6,l[t+18684>>2]=0,l[t+5596>>2]=64,l[t+5600>>2]=64,l[t+44>>2]=0,l[t+5612>>2]=-1,l[t+18188>>2]=1,l[t+18192>>2]=1,r[t+18688>>0]=0,l[t+18196>>2]=-1,l[t+18200>>2]=-1,m[t+4792>>2]=0,l[t+4788>>2]=0,l[t+20>>2]=0,l[t+24>>2]=0,l[t+28>>2]=0,l[t+18692>>2]=0)}function Bt(t,e,n){return e|=0,n|=0,(t|=0)?(l[t+56>>2]=e,l[t+44>>2]=n,0|(n=1)):0|(n=0)}function Rt(t,e,n){return e|=0,n|=0,(t|=0)?(l[t+64>>2]=e,l[t+52>>2]=n,0|(n=1)):0|(n=0)}function Pt(t,e,n){return e|=0,n|=0,(t|=0)?(l[t+60>>2]=e,l[t+48>>2]=n,0|(n=1)):0|(n=0)}function Lt(t,e){var n;return n=w,w=w+16|0,0!=(0|(t|=0))&0!=(0|(e|=0))?0|l[t+68>>2]?(io[7&l[t+24>>2]](0|l[t+40>>2],e),w=n,0|(e=1)):(mt(t+44|0,1,4439,n),w=n,0|(e=0)):(w=n,0|(e=0))}function Dt(t,e,n){return 0!=(0|(t|=0))&0!=(0|(e|=0))&0!=(0|(n|=0))?0|l[t+68>>2]?0|(n=0):0|(n=0|qr[63&l[t+20>>2]](0|l[t+40>>2],e,n,t+44|0)):0|(n=0)}function Nt(t,e,n){return e|=0,0!=(0|(t|=0))&0!=(0|(n|=0))?0|l[t+68>>2]?0|(n=0):0|(n=0|qr[63&l[t>>2]](0|l[t+40>>2],n,e,t+44|0)):0|(n=0)}function Ot(t,e){e|=0;var n=0;return(t|=0)&&(n=0|Y(e))?(K(n,t,0),$(n,0|l[t+8>>2],0),e?J(n,16):tt(n,17),q(n,18),Q(n,19),0|n):0|(n=0)}function Ft(t,e,n){e|=0,n|=0;var i=0;return(t|=0)&&(i=0|Di(t,0==(0|n)?4433:4436))?(t=0|j(e,n))?(K(t,i,6),Vi(i,0,2),n=0|function(t){return 0|function(t){var e=0,n=0;return(0|l[76+(t|=0)>>2])>-1?(n=0==(0|ki()),e=0|yr(t),n||Ii()):e=0|yr(t),0|e}(t|=0)}(i),Vi(i,0,0),$(t,n,((0|n)<0)<<31>>31),J(t,20),tt(t,21),q(t,22),Q(t,23),0|(i=t)):(zi(i),0|(i=0)):0|(i=0)}function Gt(){return 4427}function zt(t){return 0|(t=(t|=0)?0|gi(t):0)}function Ut(t,e){return 0==(0|(t|=0))|0==(0|(e|=0))?0|(e=0):0|(e=0|function(t,e){e|=0;var n=0;return(t|=0)?(n=0|k(e,t),(e|t)>>>0>65535&&(n=(0|(n>>>0)/(t>>>0))==(0|e)?n:-1)):n=0,(t=0|gi(n))&&3&l[t+-4>>2]?(Cr(0|t,0,0|n),0|t):0|t}(t,e))}function Ht(t){var e,n;t|=0,n=w,w=w+16|0,e=n;do{if(t){if(0|_i(e,16,t)){l[e>>2]=0,t=0;break}t=0|l[e>>2];break}t=0}while(0);return w=n,0|t}function Vt(t){yi(t|=0)}function Wt(t,e){return t|=0,0|(t=(e|=0)?0|function(t,e){e|=0;var n=0,i=0;return(t|=0)?e>>>0>4294967231?(l[(e=25296)>>2]=12,0|(e=0)):0|(n=0|function(t,e){e|=0;var n=0,i=0,r=0,o=0,a=0,s=0,c=0,u=0,h=0,f=0;if(f=0|l[(h=4+(t|=0)|0)>>2],s=t+(n=-8&f)|0,!(3&f))return e>>>0<256?0|(t=0):n>>>0>=(e+4|0)>>>0&&(n-e|0)>>>0<=l[6304]<<1>>>0?0|t:0|(t=0);if(n>>>0>=e>>>0)return(n=n-e|0)>>>0<=15?0|t:(u=t+e|0,l[h>>2]=1&f|e|2,l[u+4>>2]=3|n,l[(f=s+4|0)>>2]=1|l[f>>2],vi(u,n),0|t);if((0|l[6190])==(0|s))return u=(0|l[6187])+n|0,n=u-e|0,i=t+e|0,u>>>0<=e>>>0?0|(t=0):(l[h>>2]=1&f|e|2,l[i+4>>2]=1|n,l[6190]=i,l[6187]=n,0|t);if((0|l[6189])==(0|s))return(i=(0|l[6186])+n|0)>>>0<e>>>0?0|(t=0):((n=i-e|0)>>>0>15?(u=t+e|0,i=t+i|0,l[h>>2]=1&f|e|2,l[u+4>>2]=1|n,l[i>>2]=n,l[(i=i+4|0)>>2]=-2&l[i>>2],i=u):(l[h>>2]=1&f|i|2,l[(i=t+i+4|0)>>2]=1|l[i>>2],i=0,n=0),l[6186]=n,l[6189]=i,0|t);if(2&(i=0|l[s+4>>2])|0)return 0|(t=0);if((c=(-8&i)+n|0)>>>0<e>>>0)return 0|(t=0);u=c-e|0,r=i>>>3;do{if(i>>>0<256){if(i=0|l[s+8>>2],(0|(n=0|l[s+12>>2]))==(0|i)){l[6184]=l[6184]&~(1<<r);break}l[i+12>>2]=n,l[n+8>>2]=i;break}a=0|l[s+24>>2],n=0|l[s+12>>2];do{if((0|n)==(0|s)){if(n=0|l[(i=4+(r=s+16|0)|0)>>2])o=i;else{if(!(n=0|l[r>>2])){r=0;break}o=r}for(;;)if(0|(i=0|l[(r=n+20|0)>>2]))n=i,o=r;else{if(!(r=0|l[(i=n+16|0)>>2]))break;n=r,o=i}l[o>>2]=0,r=n}else r=0|l[s+8>>2],l[r+12>>2]=n,l[n+8>>2]=r,r=n}while(0);if(0|a){if(n=0|l[s+28>>2],(0|l[(i=25040+(n<<2)|0)>>2])==(0|s)){if(l[i>>2]=r,!r){l[6185]=l[6185]&~(1<<n);break}}else if(l[a+16+(((0|l[a+16>>2])!=(0|s)&1)<<2)>>2]=r,!r)break;l[r+24>>2]=a,0|(i=0|l[(n=s+16|0)>>2])&&(l[r+16>>2]=i,l[i+24>>2]=r),0|(n=0|l[n+4>>2])&&(l[r+20>>2]=n,l[n+24>>2]=r)}}while(0);return u>>>0<16?(l[h>>2]=c|1&f|2,l[(f=t+c+4|0)>>2]=1|l[f>>2],0|t):(s=t+e|0,l[h>>2]=1&f|e|2,l[s+4>>2]=3|u,l[(f=t+c+4|0)>>2]=1|l[f>>2],vi(s,u),0|t)}(t+-8|0,e>>>0<11?16:e+11&-8))?0|(e=n+8|0):(n=0|gi(e))?(i=0|l[t+-4>>2],kr(0|n,0|t,0|((i=(-8&i)-(0==(3&i|0)?8:4)|0)>>>0<e>>>0?i:e)),yi(t),0|(e=n)):0|(e=0):0|(e=0|gi(e))}(t,e):0)}function Zt(t){yi(t|=0)}function jt(t,e){0!=(0|(t|=0))&0!=(0|(e|=0))&&(l[t+172>>2]=l[e+4>>2],l[t+168>>2]=l[e>>2])}function Yt(){var t=0,e=0;return(t=0|Ut(1,208))?(l[t>>2]=0,r[(e=t+184|0)>>0]=-3&r[e>>0],e=0|zt(1e3),l[t+44>>2]=e,e?(l[t+48>>2]=1e3,e=0|gn(),l[t+192>>2]=e,e?(e=0|gn(),l[t+188>>2]=e,0|e?0|(e=t):(Xt(t),0|(e=0))):(Xt(t),0|(e=0))):(Xt(t),0|(e=0))):0|(t=0)}function Xt(t){var e=0,n=0,i=0,o=0,a=0,s=0;if(t|=0){if(0|l[t>>2]?(0|(n=0|l[(e=t+12|0)>>2])&&(Jt(n),Zt(0|l[e>>2]),l[e>>2]=0),0|(n=0|l[(e=t+16|0)>>2])&&(Zt(n),l[e>>2]=0,l[t+20>>2]=0)):(0|(n=0|l[(e=t+36|0)>>2])&&(Zt(n),l[e>>2]=0),0|(n=0|l[(e=t+24|0)>>2])&&(Zt(n),l[e>>2]=0,l[t+28>>2]=0),0|(n=0|l[(e=t+44|0)>>2])&&(Zt(n),l[e>>2]=0,l[t+48>>2]=0)),$e(0|l[t+204>>2]),e=t+88|0,0|(n=0|l[(a=t+164|0)>>2])){if(o=0|k(0|l[t+112>>2],0|l[t+116>>2])){for(i=0;Jt(n),(0|(i=i+1|0))!=(0|o);)n=n+5640|0;n=0|l[a>>2]}Zt(n),l[a>>2]=0}if(0|(n=0|l[(a=t+124|0)>>2])){if(i=0|l[(s=t+120|0)>>2]){for(o=0;(n=0|l[n+(o<<3)>>2])&&(Zt(n),i=0|l[s>>2]),!((n=o+1|0)>>>0>=i>>>0);)o=n,n=0|l[a>>2];n=0|l[a>>2]}l[s>>2]=0,Zt(n),l[a>>2]=0}Zt(0|l[(s=t+144|0)>>2]),l[s>>2]=0,l[t+128>>2]=0,Zt(0|l[(s=t+108|0)>>2]),l[s>>2]=0,2&r[t+184>>0]||(Zt(0|l[(s=t+176|0)>>2]),l[s>>2]=0),n=e+100|0;do{l[e>>2]=0,e=e+4|0}while((0|e)<(0|n));yn(0|l[(s=t+188|0)>>2]),l[s>>2]=0,yn(0|l[t+192>>2]),l[s>>2]=0,Qt(0|l[(s=t+196|0)>>2]),l[s>>2]=0,vt(0|l[(s=t+80|0)>>2]),l[s>>2]=0,vt(0|l[(s=t+84|0)>>2]),l[s>>2]=0,Zt(t)}}function Jt(t){var e,n=0,i=0,r=0,o=0,a=0,s=0;if(t|=0){if(0|(n=0|l[(o=t+5164|0)>>2])){if(i=0|l[(a=t+5160|0)>>2]){for(r=0;(n=0|l[n+(r<<3)>>2])&&(Zt(n),i=0|l[a>>2]),!((n=r+1|0)>>>0>=i>>>0);)r=n,n=0|l[o>>2];n=0|l[o>>2]}l[a>>2]=0,Zt(n),l[o>>2]=0}if(0|(i=0|l[(n=t+5172|0)>>2])&&(Zt(i),l[n>>2]=0),0|(i=0|l[(n=t+5584|0)>>2])&&(Zt(i),l[n>>2]=0),0|(i=0|l[(n=t+5608|0)>>2])&&(Zt(i),l[n>>2]=0),0|(i=0|l[(n=t+5604|0)>>2])&&(Zt(i),l[n>>2]=0),0|(i=0|l[(n=t+5624|0)>>2])&&(Zt(i),l[n>>2]=0,l[t+5632>>2]=0,l[t+5628>>2]=0),0|(n=0|l[(e=t+5612|0)>>2])){if(i=0|l[(s=t+5616|0)>>2]){for(a=0;(o=0|l[(r=n+12|0)>>2])&&(Zt(o),l[r>>2]=0,i=0|l[s>>2]),!((a=a+1|0)>>>0>=i>>>0);)n=n+20|0;n=0|l[e>>2]}Zt(n),l[e>>2]=0}0|(i=0|l[(n=t+5600|0)>>2])&&(Zt(i),l[n>>2]=0),(i=0|l[(n=t+5592|0)>>2])&&(Zt(i),l[n>>2]=0,l[t+5596>>2]=0)}}function Qt(t){var e,n=0,i=0,r=0,o=0;if(t|=0){if(0|(i=0|l[(n=t+28|0)>>2])&&(Zt(i),l[n>>2]=0),0|(n=0|l[(e=t+40|0)>>2])){if(0|l[(o=t+36|0)>>2]){r=0;do{(i=0|l[n+(40*r|0)+36>>2])&&(Zt(i),n=0|l[e>>2],l[n+(40*r|0)+36>>2]=0),(i=0|l[n+(40*r|0)+16>>2])&&(Zt(i),n=0|l[e>>2],l[n+(40*r|0)+16>>2]=0),(i=0|l[n+(40*r|0)+24>>2])&&(Zt(i),n=0|l[e>>2],l[n+(40*r|0)+24>>2]=0),r=r+1|0}while(r>>>0<(0|l[o>>2])>>>0)}Zt(n),l[e>>2]=0}Zt(t)}}function qt(t,e,n,i){i|=0;var o,s,c,u,h,f,d,p,g,v,b,_,A,x,S,E,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0,Y=0,X=0,J=0,Q=0,q=0,K=0,$=0,tt=0,et=0,nt=0,it=0,rt=0,ot=0,at=0,st=0,lt=0,ct=0;if(E=w,w=w+320|0,lt=E+296|0,S=E+288|0,x=E+280|0,A=E+272|0,_=E+264|0,b=E+256|0,v=E+248|0,g=E+240|0,ot=E+232|0,h=E+224|0,u=E+216|0,rt=E+208|0,c=E+200|0,s=E+192|0,o=E+184|0,G=E+176|0,F=E+168|0,O=E+160|0,N=E+152|0,L=E+144|0,K=E+136|0,q=E+128|0,nt=E+112|0,Q=E+104|0,J=E+96|0,X=E+88|0,Y=E+80|0,j=E+72|0,W=E+64|0,V=E+56|0,H=E+48|0,U=E+32|0,z=E+24|0,P=E+16|0,B=E+8|0,I=E,tt=E+309|0,et=E+300|0,!(0!=(0|(t|=0))&0!=(0|(e|=0))&0!=(0|(n|=0))))return w=E,0|(lt=0);if(((T=0|l[(p=e+5592|0)>>2])-1|0)>>>0>32)return l[I>>2]=T,l[I+4>>2]=33,mt(i,1,4599,I),w=E,0|(lt=0);l[(f=t+112|0)>>2]=1,l[(d=t+116|0)>>2]=1,$=e+18704|0;do{if(!(0|a[$>>1])){switch(0|l[e+18676>>2]){case 1:T=1041666,I=1302083,C=3,st=8;break;case 2:T=520833,I=651041,C=3,st=8;break;case 3:T=1041666,I=1302083,C=4,st=8;break;default:I=0}8==(0|st)&&(a[$>>1]=C,l[e+18700>>2]=I,l[e+18680>>2]=T,I=1),T=0|l[e+18684>>2];t:do{if((0|T)<4){switch(0|T){case 3:break;default:st=13;break t}T=3,st=12}else{if((0|T)<33024)switch(0|T){case 4:T=4,st=12;break t;default:st=13;break t}switch(0|T){case 33024:break;default:st=13;break t}T=-32512,st=12}}while(0);if(12==(0|st))a[$>>1]=T;else if(13==(0|st)&&0==(0|I))break;mt(i,2,4655,B)}}while(0);T=0|l[(Z=e+18700|0)>>2];do{if((0|T)<1){if((D=+m[e+4792+((0|l[e+4788>>2])-1<<2)>>2])>0){at=0|l[n+24>>2],P=0|k(0|l[at+8>>2],0|l[n+16>>2]),P=0|k(P,0|l[at+12>>2]),ct=+((0|k(P,0|l[at+24>>2]))>>>0),at=~~+M(+ct/(8*D*+((0|l[at>>2])>>>0)*+((0|l[at+4>>2])>>>0))),l[Z>>2]=at;break}l[Z>>2]=0;break}if(R=0|l[n+24>>2],at=0|k(0|l[R+8>>2],0|l[n+16>>2]),at=0|k(at,0|l[R+12>>2]),D=+((0|k(at,0|l[R+24>>2]))>>>0),T=0|k(T<<3,0|l[R>>2]),D/=+((0|k(T,0|l[R+4>>2]))>>>0),0|(T=0|l[(R=e+4788|0)>>2])){B=0,I=0;do{+m[(C=e+4792+(B<<2)|0)>>2]<D&&(m[C>>2]=D,I=1,T=0|l[R>>2]),B=B+1|0}while(B>>>0<T>>>0);0|I&&mt(i,2,4792,P)}}while(0);T=0|a[$>>1];t:do{if((T+-3&65535)>=4){if(T<<16>>16==7){mt(i,2,6952,L),a[$>>1]=0;break}if((T+-256&65535)<524){mt(i,2,7007,N),a[$>>1]=0;break}if((T+-1024&65535)<1180){mt(i,2,7055,O),a[$>>1]=0;break}if(T<<16>>16<=-1)switch(T<<16>>16){case-32512:break t;case-32768:mt(i,2,7097,F),a[$>>1]=0;break t;default:mt(i,2,7185,G),a[$>>1]=0;break t}}else{if((T+-5&65535)<2){mt(i,2,4884,z),a[$>>1]=0;break}l[e>>2]=0,l[e+12>>2]=1,l[e+16>>2]=1,r[e+18689>>0]=67,r[e+18688>>0]=1,l[e+4>>2]=0,l[e+8>>2]=0,l[e+18180>>2]=0,l[e+18184>>2]=0,l[e+5596>>2]=32,l[e+5600>>2]=32,l[e+5604>>2]=0,l[e+5612>>2]=-1,l[e+18188>>2]=1,l[e+18192>>2]=1,l[e+5608>>2]=1,(0|(C=0|l[(I=e+4788|0)>>2]))>1&&(ct=+m[e+4792+(C+-1<<2)>>2],l[U>>2]=C,y[U+8>>3]=ct,mt(i,2,4946,U),l[e+4792>>2]=l[e+4792+((0|l[I>>2])-1<<2)>>2],l[I>>2]=1,T=0|a[$>>1]);e:do{switch(T<<16>>16){case 3:(0|(T=0|l[p>>2]))>6&&(l[H>>2]=T+1,mt(i,2,5119,H),l[p>>2]=6,T=6);break;case 4:if((0|(T=0|l[p>>2]))<2){l[V>>2]=T+1,mt(i,2,5265,V),l[p>>2]=1,T=1;break e}(0|T)>7&&(l[W>>2]=T+1,mt(i,2,5419,W),l[p>>2]=7,T=7);break;default:T=0|l[p>>2]}}while(0);if(l[(I=e+40|0)>>2]=1|l[I>>2],l[(I=e+5620|0)>>2]=T+-1,(0|T)>1){T=0;do{l[e+5624+(T<<2)>>2]=256,l[e+5756+(T<<2)>>2]=256,T=T+1|0}while((0|T)<(0|l[I>>2]))}l[e+44>>2]=4,4==(0|a[$>>1])?(T=0|l[p>>2],l[e+96>>2]=1,l[e+48>>2]=0,l[e+52>>2]=0,l[e+56>>2]=1,at=T+-1|0,l[e+60>>2]=at,l[e+64>>2]=3,l[e+80>>2]=4,l[e+244>>2]=1,l[e+196>>2]=at,l[e+200>>2]=0,l[e+204>>2]=1,l[e+208>>2]=T,l[e+212>>2]=3,l[e+228>>2]=4,T=2):T=0,l[e+4784>>2]=T,l[e+20>>2]=1,(0|(T=0|l[Z>>2]))>=1?(0|T)>1302083&&(mt(i,2,5722,Y),l[Z>>2]=1302083):(l[Z>>2]=1302083,mt(i,2,5573,j)),(0|(I=0|l[(T=e+18680|0)>>2]))>=1?(0|I)>1041666&&(mt(i,2,6044,J),l[T>>2]=1041666):(l[T>>2]=1041666,mt(i,2,5895,X)),T=0|l[n+16>>2],I=0|l[n+24>>2],B=0|l[I+8>>2],C=0|k(B,T),P=0|l[I+12>>2],C=0|k(C,P),ct=+((0|k(C,0|l[I+24>>2]))>>>0),C=0|k(l[Z>>2]<<3,0|l[I>>2]),ct/=+((0|k(C,0|l[I+4>>2]))>>>0),m[e+4792>>2]=ct,C=0|a[$>>1];e:do{if(3==(0|T)){if(T=0|l[I+28>>2],(R=0|l[I+32>>2])|12!=(0|T))P=0;else if(T=0|l[I+80>>2],(R=0|l[I+84>>2])|12!=(0|T))P=1;else if(T=0|l[I+132>>2],(I=0|l[I+136>>2])|12!=(0|T))P=2,R=I;else switch(C<<16>>16){case 3:if(!(B>>>0>2048|P>>>0>1080))break t;l[q>>2]=B,l[q+4>>2]=P,mt(i,2,6616,q);break e;case 4:if(!(B>>>0>4096|P>>>0>2160))break t;l[K>>2]=B,l[K+4>>2]=P,mt(i,2,6787,K);break e;default:break t}r[tt>>0]=0|r[6383],r[tt+1>>0]=0|r[6384],r[tt+2>>0]=0|r[6385],r[tt+3>>0]=0|r[6386],r[tt+4>>0]=0|r[6387],r[tt+5>>0]=0|r[6388],r[tt+6>>0]=0|r[6389],C=6390,B=(I=et)+9|0;do{r[I>>0]=0|r[C>>0],I=I+1|0,C=C+1|0}while((0|I)<(0|B));l[nt>>2]=P,l[nt+4>>2]=T,l[nt+8>>2]=0|R?tt:et,mt(i,2,6399,nt)}else l[Q>>2]=T,mt(i,2,6217,Q)}while(0);a[$>>1]=0}}while(0);l[t+168>>2]=l[e+18680>>2],a[(at=t+88|0)>>1]=0|a[$>>1],tt=-2&r[(nt=t+181|0)>>0]|1&l[e+20>>2],r[nt>>0]=tt,tt=(255&l[(et=e+24|0)>>2])<<1&2|-3&tt,r[nt>>0]=tt,r[nt>>0]=-5&tt|(255&l[e+28>>2])<<2&4;do{if(0|l[et>>2]&&0|l[(it=e+32|0)>>2]){if(I=0|zt(T=0|k(12*(0|l[e+4788>>2])|0,0|l[p>>2])),l[t+176>>2]=I,0|I){kr(0|I,0|l[it>>2],0|T);break}return mt(i,1,7244,o),w=E,0|(lt=0)}}while(0);l[(B=t+100|0)>>2]=l[e+12>>2],l[(R=t+104|0)>>2]=l[e+16>>2],l[(C=t+92|0)>>2]=l[e+4>>2],l[(P=t+96|0)>>2]=l[e+8>>2],T=0|l[(I=e+36|0)>>2];do{if(T){if(T=0|zt(1+(0|Si(T))|0),l[t+108>>2]=T,0|T){cr(T,0|l[I>>2]);break}return mt(i,1,7316,s),w=E,0|(lt=0)}if(I=0|zt(29+(0|Si(T=4427))|0),l[t+108>>2]=I,0|I){l[rt>>2]=7421,l[rt+4>>2]=T,hr(I,7416,rt);break}return mt(i,1,7370,c),w=E,0|(lt=0)}while(0);if(T=(0|l[n+8>>2])-(0|l[C>>2])|0,0|l[e>>2]?(rt=0|l[B>>2],l[f>>2]=(T+-1+rt|0)/(0|rt)|0,rt=0|l[R>>2],l[d>>2]=((0|l[n+12>>2])-1-(0|l[P>>2])+rt|0)/(0|rt)|0):(l[B>>2]=T,l[R>>2]=(0|l[n+12>>2])-(0|l[P>>2])),0|r[e+18688>>0]&&(r[t+180>>0]=0|r[e+18689>>0],r[nt>>0]=8|r[nt>>0]),rt=0|Ut(0|k(0|l[d>>2],0|l[f>>2]),5640),l[(et=t+164|0)>>2]=rt,!rt)return mt(i,1,7450,u),w=E,0|(lt=0);W=0|l[(tt=e+4784|0)>>2];do{if(0|W){if(z=e+48|0,Z=0|l[p>>2],j=0|l[n+16>>2],Y=0|l[e+4788>>2],X=0|k(j,Z),!(J=0|Ut(0|k(X,Y),4))){mt(i,1,7504,h);break}if((T=0|l[z>>2])>>>0<(C=0|l[(N=e+60|0)>>2])>>>0)for(L=0|k(T,j),O=e+52|0,G=e+56|0,I=0|l[(F=e+64|0)>>2];;){if((B=0|l[O>>2])>>>0<I>>>0){for(P=B+L|0,C=0|l[G>>2];;){if(C){for(I=P,R=0;l[J+(I<<2)>>2]=1,!((R=R+1|0)>>>0>=(C=0|l[G>>2])>>>0);)I=I+X|0;I=0|l[F>>2]}else C=0;if((B=B+1|0)>>>0>=I>>>0)break;P=P+1|0}C=0|l[N>>2]}if((T=T+1|0)>>>0>=C>>>0)break;L=L+j|0}if(W>>>0>1){F=1;do{if(T=z,z=z+148|0,U=0|l[T+8>>2],U=(R=0|l[(G=T+156|0)>>2])>>>0>U>>>0?U:0,(I=0|l[z>>2])>>>0<(C=0|l[(H=T+160|0)>>2])>>>0)for(L=0|k(I,j),V=T+152|0,N=T+164|0,O=0|k(U,X),T=0|l[N>>2];;){if((B=0|l[V>>2])>>>0<T>>>0){for(P=B+L|0;;){if(U>>>0<R>>>0){for(T=P+O|0,C=U;l[J+(T<<2)>>2]=1,!((C=C+1|0)>>>0>=(R=0|l[G>>2])>>>0);)T=T+X|0;T=0|l[N>>2]}if((B=B+1|0)>>>0>=T>>>0)break;P=P+1|0}C=0|l[H>>2]}if((I=I+1|0)>>>0>=C>>>0)break;L=L+j|0}F=F+1|0}while((0|F)!=(0|W))}if(!(0==(0|Y)|0==(0|Z)|0==(0|j))){for(T=0,P=0,L=0;;){for(C=0,R=P;;){for(B=0,I=R;T|=1!=(0|l[J+(I<<2)>>2]),(0|(B=B+1|0))!=(0|j);)I=I+1|0;if((0|(C=C+1|0))==(0|Z))break;R=R+j|0}if((0|(L=L+1|0))==(0|Y))break;P=P+X|0}0|T&&mt(i,1,7552,ot)}Zt(J)}}while(0);t:do{if(0|k(0|l[d>>2],0|l[f>>2])){U=e+4788|0,H=e+40|0,V=e+44|0,W=e+18690|0,Z=n+16|0,I=e+18696|0,j=n+24|0,Y=e+5596|0,X=e+5600|0,J=e+5604|0,Q=e+5608|0,q=e+5612|0,K=e+5616|0,$=e+5620|0,z=0;e:for(;;){N=(L=0|l[et>>2])+(5640*z|0)|0,ot=0|l[U>>2],l[(C=L+(5640*z|0)+8|0)>>2]=ot;n:do{if(0|ot){if(((0|a[at>>1])-3&65535)<4)T=0;else for(T=0;;)if(ot=0==(4&r[nt>>0]),l[(ot?L+(5640*z|0)+20+(T<<2)|0:L+(5640*z|0)+5184+(T<<2)|0)>>2]=l[(ot?e+4792+(T<<2)|0:e+5192+(T<<2)|0)>>2],(T=T+1|0)>>>0>=(0|l[C>>2])>>>0)break n;do{4&r[nt>>0]&&(l[L+(5640*z|0)+5184+(T<<2)>>2]=l[e+5192+(T<<2)>>2]),l[L+(5640*z|0)+20+(T<<2)>>2]=l[e+4792+(T<<2)>>2],T=T+1|0}while(T>>>0<(0|l[C>>2])>>>0)}}while(0);if(l[N>>2]=l[H>>2],l[L+(5640*z|0)+4>>2]=l[V>>2],l[(P=L+(5640*z|0)+16|0)>>2]=r[W>>0],C=0|r[(T=L+(5640*z|0)+5636|0)>>0],r[T>>0]=-5&C,0|l[tt>>2]){if(r[T>>0]=4|C,B=0|l[tt>>2]){R=z+1|0,T=0,C=0;do{(0|R)==(0|l[e+48+(148*C|0)+48>>2])&&(l[L+(5640*z|0)+424+(148*T|0)>>2]=l[e+48+(148*T|0)>>2],l[L+(5640*z|0)+424+(148*T|0)+4>>2]=l[e+48+(148*T|0)+4>>2],l[L+(5640*z|0)+424+(148*T|0)+8>>2]=l[e+48+(148*T|0)+8>>2],l[L+(5640*z|0)+424+(148*T|0)+12>>2]=l[e+48+(148*T|0)+12>>2],l[L+(5640*z|0)+424+(148*T|0)+16>>2]=l[e+48+(148*T|0)+16>>2],l[L+(5640*z|0)+424+(148*T|0)+32>>2]=l[e+48+(148*T|0)+32>>2],l[L+(5640*z|0)+424+(148*T|0)+48>>2]=l[e+48+(148*T|0)+48>>2],T=T+1|0),C=C+1|0}while(C>>>0<B>>>0)}else T=0;T=T+-1|0}else T=0;if(l[L+(5640*z|0)+420>>2]=T,ot=0|Ut(0|l[Z>>2],1080),l[(G=L+(5640*z|0)+5584|0)>>2]=ot,!ot){st=141;break}do{if(0|l[I>>2]){if(C=0|l[Z>>2],B=0|zt(C=0|k(C<<2,C)),R=(0|l[I>>2])+C|0,!B){st=144;break e}if(l[P>>2]=2,T=0|zt(C),l[L+(5640*z|0)+5608>>2]=T,!T){st=146;break e}if(kr(0|T,0|l[I>>2],0|C),kr(0|B,0|l[I>>2],0|C),T=0|zt(C),l[(C=L+(5640*z|0)+5604|0)>>2]=T,!T){st=148;break e}if(!(0|zn(B,T,0|l[Z>>2]))){st=150;break e}if(T=0|zt(l[Z>>2]<<3),l[L+(5640*z|0)+5600>>2]=T,!T){st=152;break e}if(Oe(T,0|l[Z>>2],0|l[C>>2]),Zt(B),0|(C=0|l[Z>>2])){B=0|l[G>>2],T=0;do{l[B+(1080*T|0)+1076>>2]=l[R+(T<<2)>>2],T=T+1|0}while(T>>>0<C>>>0)}if(!(0|Kt(N,n))){st=158;break e}0|l[Z>>2]&&(N=0,st=172)}else{n:do{if(1==(0|l[P>>2])){if((T=0|l[Z>>2])>>>0<=2){B=T;break}C=0|l[j>>2],T=0|l[C>>2];do{if((0|T)==(0|l[C+52>>2])){if((0|T)!=(0|l[C+104>>2]))break;if((0|(T=0|l[C+4>>2]))!=(0|l[C+56>>2]))break;if((0|T)==(0|l[C+108>>2])){st=166;break n}}}while(0);mt(i,2,7948,lt),l[P>>2]=0,st=166}else st=166}while(0);if(166==(0|st)&&(st=0,B=0|l[Z>>2]),!B)break;C=0|l[j>>2],T=0;do{0|l[C+(52*T|0)+32>>2]||(l[(0|l[G>>2])+(1080*T|0)+1076>>2]=1<<(0|l[C+(52*T|0)+24>>2])-1),T=T+1|0}while(T>>>0<B>>>0);N=0,st=172}}while(0);if(172==(0|st))for(;;){if(st=0,F=(O=0|l[G>>2])+(1080*N|0)|0,B=1&l[H>>2],l[F>>2]=B,R=0|l[p>>2],l[(P=O+(1080*N|0)+4|0)>>2]=R,(0|(T=0|l[Y>>2]))>1)for(C=T,T=0;T=T+1|0,C>>>0>3;)C>>>=1;else T=0;if(l[O+(1080*N|0)+8>>2]=T,(0|(T=0|l[X>>2]))>1)for(C=T,T=0;T=T+1|0,C>>>0>3;)C>>>=1;else T=0;l[O+(1080*N|0)+12>>2]=T,l[O+(1080*N|0)+16>>2]=l[J>>2],ot=0|l[Q>>2],l[O+(1080*N|0)+20>>2]=0==(0|ot)&1,l[O+(1080*N|0)+24>>2]=0|ot?2:0,l[O+(1080*N|0)+804>>2]=2,T=(0|N)==(0|l[q>>2])?0|l[K>>2]:0,l[O+(1080*N|0)+808>>2]=T;do{if(B){if(!((0|R)>0))break;for(L=0;;){P=R,R=R+-1|0,T=0|l[$>>2];do{if((0|L)<(0|T)){T=0|l[e+5624+(L<<2)>>2];do{if((0|T)<1)T=1;else{if(1==(0|T)){T=0;break}for(C=T,T=0;T=T+1|0,C>>>0>3;)C>>>=1}}while(0);if(l[O+(1080*N|0)+812+(R<<2)>>2]=T,(0|(T=0|l[e+5756+(L<<2)>>2]))<1){T=1;break}if(1==(0|T)){T=0;break}for(C=T,T=0;T=T+1|0,C>>>0>3;)C>>>=1}else{C=L-(ot=T+-1|0)|0,T=l[e+5624+(ot<<2)>>2]>>C,C=l[e+5756+(ot<<2)>>2]>>C;do{if((0|T)<1)T=1;else{if(1==(0|T)){T=0;break}for(B=T,T=0;T=T+1|0,B>>>0>3;)B>>>=1}}while(0);if(l[O+(1080*N|0)+812+(R<<2)>>2]=T,(0|C)<1){T=1;break}if(1==(0|C)){T=0;break}for(T=0;T=T+1|0,C>>>0>3;)C>>>=1}}while(0);if(l[O+(1080*N|0)+944+(R<<2)>>2]=T,(0|P)<=1)break;L=L+1|0}}else{if(!R)break;T=0;do{l[O+(1080*N|0)+812+(T<<2)>>2]=15,l[O+(1080*N|0)+944+(T<<2)>>2]=15,T=T+1|0}while(T>>>0<(0|l[P>>2])>>>0)}}while(0);if(Dn(F,0|l[(0|l[j>>2])+(52*N|0)+24>>2]),(N=N+1|0)>>>0>=(0|l[Z>>2])>>>0)break;st=172}if((z=z+1|0)>>>0>=(0|k(0|l[d>>2],0|l[f>>2]))>>>0)break t}if(141==(0|st))return mt(i,1,7591,g),w=E,0|(lt=0);if(144==(0|st))return mt(i,1,7655,v),w=E,0|(lt=0);if(146==(0|st))return Zt(B),mt(i,1,7698,b),w=E,0|(lt=0);if(148==(0|st))return Zt(B),mt(i,1,7756,_),w=E,0|(lt=0);if(150==(0|st))return Zt(B),mt(i,1,7816,A),w=E,0|(lt=0);if(152==(0|st))return Zt(B),mt(i,1,7864,x),w=E,0|(lt=0);if(158==(0|st))return mt(i,1,7914,S),w=E,0|(lt=0)}else I=e+18696|0}while(0);return(T=0|l[I>>2])?(Zt(T),l[I>>2]=0,w=E,0|(lt=1)):(w=E,0|(lt=1))}function Kt(t,e){e|=0;var n,i,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,g=0,y=0;if(2!=(0|l[16+(t|=0)>>2]))return 0|(t=1);d=t+5604|0,a=0|l[(y=t+5616|0)>>2],p=t+5620|0;do{if(0|l[d>>2]){do{if((0|a)==(0|l[p>>2])){if(a=a+10|0,l[p>>2]=a,0|(a=0|Wt(0|l[(o=t+5612|0)>>2],20*a|0))){l[o>>2]=a,Cr(a+(20*(g=0|l[y>>2])|0)|0,0,20*((0|l[p>>2])-g|0)|0),a=0|l[y>>2];break}return Zt(0|l[o>>2]),l[o>>2]=0,l[p>>2]=0,l[y>>2]=0,0|(t=0)}o=t+5612|0}while(0);if(s=(h=0|l[o>>2])+(20*a|0)|0,0|(o=0|l[(f=h+(20*a|0)+12|0)>>2])&&(Zt(o),l[f>>2]=0),l[h+(20*a|0)+8>>2]=1,l[h+(20*a|0)+4>>2]=1,l[s>>2]=2,o=0|l[e+16>>2],u=0|zt(c=(o=0|k(o,o))<<2),l[f>>2]=u,u){ro[15&l[768+(l[s>>2]<<2)>>2]](0|l[d>>2],u,o),l[h+(20*a|0)+16>>2]=c,a=1+(0|l[y>>2])|0,l[y>>2]=a,c=2;break}return 0|(t=0)}c=1,s=0}while(0);do{if((0|a)==(0|l[p>>2])){if(a=a+10|0,l[p>>2]=a,0|(a=0|Wt(0|l[(o=t+5612|0)>>2],20*a|0))){l[o>>2]=a,Cr(0|(a=a+(20*(g=0|l[y>>2])|0)|0),0,20*((0|l[p>>2])-g|0)|0),s=0==(0|s)?0:a+-20|0,a=0|l[y>>2];break}return Zt(0|l[o>>2]),l[o>>2]=0,l[p>>2]=0,l[y>>2]=0,0|(t=0)}o=t+5612|0}while(0);if(g=(p=0|l[o>>2])+(20*a|0)|0,0|(o=0|l[(n=p+(20*a|0)+12|0)>>2])&&(Zt(o),l[n>>2]=0),i=c+1|0,l[p+(20*a|0)+8>>2]=c,l[p+(20*a|0)+4>>2]=2,l[g>>2]=2,d=0|zt(f=(h=0|l[(e=e+16|0)>>2])<<2),l[n>>2]=d,!d)return 0|(t=0);if(!(d=0|zt(f)))return Zt(0|l[n>>2]),l[n>>2]=0,0|(t=0);if(0|h)for(o=0,c=0|l[t+5584>>2],u=d;m[u>>2]=+(0|l[c+1076>>2]),(0|(o=o+1|0))!=(0|h);)c=c+1080|0,u=u+4|0;ro[15&l[768+(l[g>>2]<<2)>>2]](d,0|l[n>>2],h),Zt(d),l[p+(20*a|0)+16>>2]=f,l[y>>2]=1+(0|l[y>>2]),o=0|l[(u=t+5628|0)>>2],c=t+5632|0;do{if((0|o)==(0|l[c>>2])){if(o=o+10|0,l[c>>2]=o,0|(o=0|Wt(0|l[(a=t+5624|0)>>2],20*o|0))){l[a>>2]=o,Cr(o+(20*(t=0|l[u>>2])|0)|0,0,20*((0|l[c>>2])-t|0)|0),o=0|l[u>>2];break}return Zt(0|l[a>>2]),l[a>>2]=0,l[c>>2]=0,l[u>>2]=0,0|(t=0)}a=t+5624|0}while(0);return t=0|l[a>>2],l[t+(20*o|0)+8>>2]=s,r[(y=t+(20*o|0)+16|0)>>0]=1|r[y>>0],l[t+(20*o|0)+4>>2]=l[e>>2],l[t+(20*o|0)>>2]=i,l[t+(20*o|0)+12>>2]=g,l[u>>2]=1+(0|l[u>>2]),0|(t=1)}function $t(t,e,n){return 1}function te(t,e,n,i){t|=0,e|=0,n|=0,i|=0;var r=0,o=0,a=0,s=0,c=0,u=0;if(c=0|bt(),l[(u=e+80|0)>>2]=c,!c)return 0|(u=0);if(0|vn(0|l[(r=e+192|0)>>2],24,i)&&0|vn(0|l[r>>2],25,i)){if(c=0|bn(s=0|l[r>>2]),r=0|_n(s),c){for(o=1,a=0;o=o?0!=(0|Qr[63&l[r>>2]](e,t,i)):0,(0|(a=a+1|0))!=(0|c);)r=r+4|0,o&=1;if(wn(s),!o)return vt(0|l[u>>2]),l[u>>2]=0,0|(u=0)}else wn(s);if(0|vn(0|l[(r=e+188|0)>>2],26,i)&&0|vn(0|l[r>>2],27,i)){if(c=0|bn(s=0|l[r>>2]),r=0|_n(s),c){for(o=1,a=0;o=o?0!=(0|Qr[63&l[r>>2]](e,t,i)):0,(0|(a=a+1|0))!=(0|c);)r=r+4|0,o&=1;if(wn(s),!o)return vt(0|l[u>>2]),l[u>>2]=0,0|(u=0)}else wn(s);if(r=0|bt(),l[n>>2]=r,!r)return 0|(u=0);if(_t(0|l[u>>2],r),o=0|k(0|l[e+116>>2],0|l[e+112>>2]),l[36+(0|l[(s=e+196|0)>>2])>>2]=o,o=0|Ut(o,40),r=0|l[s>>2],l[r+40>>2]=o,!o)return 0|(u=0);if(!(0|l[r+36>>2]))return 0|(u=1);for(a=0;;){if(l[o+(40*a|0)+28>>2]=100,l[o+(40*a|0)+20>>2]=0,u=0|Ut(100,24),r=0|l[s>>2],o=0|l[r+40>>2],l[o+(40*a|0)+24>>2]=u,a=a+1|0,!u){r=0,o=30;break}if(a>>>0>=(0|l[r+36>>2])>>>0){r=1,o=30;break}}if(30==(0|o))return 0|r}return vt(0|l[u>>2]),l[u>>2]=0,0|(u=0)}return vt(0|l[u>>2]),l[u>>2]=0,0|(u=0)}function ee(t,e,n,i,r){e|=0,n|=0,i|=0,r|=0;var o,a,s,c,u,h=0,f=0;if(u=w,w=w+32|0,o=u+8|0,s=u+20|0,t=16==(0|l[8+(t|=0)>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],c=0|l[t+5584>>2],!(t=0|l[i>>2]))return mt(r,1,10568,u),w=u,0|(e=0);l[i>>2]=t+-1,it(n,s,1),n=n+1|0,h=31&(t=0|l[s>>2]),l[(a=c+(1080*e|0)+24|0)>>2]=h,l[c+(1080*e|0)+804>>2]=t>>>5;do{if(1==(0|h))t=1,f=8;else{if((t=(0|l[i>>2])>>>(0!=(0|h)&1))>>>0>97&&(l[o>>2]=t,l[o+4>>2]=97,l[o+8>>2]=97,mt(r,2,10604,o),h=0|l[a>>2]),r=0==(0|t),0|h){if(r){t=0,f=20;break}f=8;break}if(!r)for(h=0;it(n,s,1),h>>>0<97&&(l[c+(1080*e|0)+28+(h<<3)>>2]=(0|l[s>>2])>>>3,l[c+(1080*e|0)+28+(h<<3)+4>>2]=0),(0|(h=h+1|0))!=(0|t);)n=n+1|0;t=(0|l[i>>2])-t|0}}while(0);if(8==(0|f))for(h=0;;){if(it(n,s,2),h>>>0<97&&(f=0|l[s>>2],l[c+(1080*e|0)+28+(h<<3)>>2]=f>>>11,l[c+(1080*e|0)+28+(h<<3)+4>>2]=2047&f),(0|(h=h+1|0))==(0|t)){f=20;break}n=n+2|0}if(20==(0|f)&&(t=(0|l[i>>2])-(t<<1)|0),l[i>>2]=t,1!=(0|l[a>>2]))return w=u,0|(e=1);n=c+(1080*e|0)+28|0,h=c+(1080*e|0)+32|0,t=1;do{i=(0|l[n>>2])-(((t+-1|0)>>>0)/3|0)|0,l[c+(1080*e|0)+28+(t<<3)>>2]=(0|i)>0?i:0,l[c+(1080*e|0)+28+(t<<3)+4>>2]=l[h>>2],t=t+1|0}while(97!=(0|t));return w=u,0|(t=1)}function ne(t,e,n,i,r){e|=0,n|=0,i|=0,r|=0;var o,a,s,c,u,h,f=0,d=0,p=0,m=0,g=0;if(h=w,w=w+64|0,u=h+48|0,o=h+40|0,m=h+16|0,p=h+8|0,c=h+52|0,f=16==(0|l[(d=8+(t|=0)|0)>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],a=0|l[f+5584>>2],(0|l[i>>2])>>>0<5)return mt(r,1,11008,h),w=h,0|(i=0);if(it(n,s=a+(1080*e|0)+4|0,1),f=1+(0|l[s>>2])|0,l[s>>2]=f,f>>>0>33)return l[p>>2]=f,l[p+4>>2]=33,mt(r,1,11043,p),w=h,0|(i=0);if((0|l[t+168>>2])>>>0>=f>>>0)return l[m>>2]=e,mt(r,1,11120,m),l[d>>2]=32768|l[d>>2],w=h,0|(i=0);if(it(n+1|0,p=a+(1080*e|0)+8|0,1),l[p>>2]=2+(0|l[p>>2]),it(n+2|0,d=a+(1080*e|0)+12|0,1),m=2+(0|l[d>>2])|0,l[d>>2]=m,m>>>0>10|(p=0|l[p>>2])>>>0>10|(p+m|0)>>>0>12)return mt(r,1,11278,h+24|0),w=h,0|(i=0);if(it(n+3|0,m=a+(1080*e|0)+16|0,1),192&l[m>>2]|0)return mt(r,1,11346,h+32|0),w=h,0|(i=0);if(it(n+4|0,a+(1080*e|0)+20|0,1),f=(0|l[i>>2])-5|0,l[i>>2]=f,t=0|l[s>>2],!(1&l[a+(1080*e|0)>>2])){if(!t)return w=h,0|(i=1);f=0;do{l[a+(1080*e|0)+812+(f<<2)>>2]=15,l[a+(1080*e|0)+944+(f<<2)>>2]=15,f=f+1|0}while(f>>>0<(0|l[s>>2])>>>0);return w=h,0|(f=1)}if(f>>>0<t>>>0)return mt(r,1,11008,o),w=h,0|(i=0);do{if(t){for(p=0,d=n+5|0;it(d,c,1),d=d+1|0,f=0|l[c>>2],!(0|p&&f>>>0<16|0==(15&f|0));)if(l[a+(1080*e|0)+812+(p<<2)>>2]=15&f,l[a+(1080*e|0)+944+(p<<2)>>2]=f>>>4,(p=p+1|0)>>>0>=(t=0|l[s>>2])>>>0){g=24;break}if(24==(0|g)){f=0|l[i>>2];break}return mt(r,1,11413,u),w=h,0|(i=0)}t=0}while(0);return l[i>>2]=f-t,w=h,0|(i=1)}function ie(t,e,n,i,o,s,c,u,h,f,d){t|=0,e|=0,n|=0,i|=0,o|=0,s|=0,c|=0,u|=0,h|=0,f|=0,d|=0;var p,m,g,y,v,b,_,A,x,M,E,T,I,C,B,R,P,L,D,N,O,F,G,z,U,H,V,W,Z,j,Y,X,J,Q,q,K,$,tt=0,et=0,nt=0,rt=0,ot=0,at=0,st=0,ct=0,gt=0,yt=0,vt=0,bt=0,_t=0,wt=0,At=0,xt=0,St=0,Mt=0,Et=0,Tt=0,It=0,kt=0,Ct=0,Bt=0,Rt=0,Pt=0,Lt=0,Dt=0,Nt=0,Ot=0;switch($=w,w=w+256|0,K=$+200|0,q=$+192|0,J=$+184|0,X=$+176|0,W=$+168|0,V=$+160|0,H=$+152|0,U=$+144|0,z=$+136|0,G=$+128|0,O=$+120|0,N=$+112|0,D=$+104|0,L=$+96|0,P=$+88|0,R=$+80|0,B=$+72|0,C=$+64|0,I=$+56|0,T=$+48|0,Y=$+40|0,j=$+32|0,Z=$+24|0,F=$+16|0,E=$+8|0,M=$,p=$+240|0,m=$+236|0,g=$+232|0,y=$+228|0,v=$+224|0,b=$+220|0,_=$+216|0,x=$+208|0,l[(A=$+212|0)>>2]=65424,0|l[(Q=t+8|0)>>2]){case 256:l[A>>2]=65497,tt=t+76|0;break;case 8:if(!(1&r[(tt=t+76|0)>>0])){At=t+164|0,xt=t+200|0,St=t+72|0,Mt=t+24|0,Et=t+196|0,Tt=t+112|0,Ct=t+116|0,Bt=p+2|0,Rt=p+6|0,Pt=p+7|0,Lt=t+16|0,Dt=t+20|0,Nt=t+64|0,et=65424;t:do{e:do{if(65427!=(0|et)){for(;;){if(0==(0|(bt=0|ht(f)))&0==(0|S)){_t=50;break}if(2!=(0|lt(f,0|l[Lt>>2],2,d))){_t=8;break t}if(it(0|l[Lt>>2],x,2),(0|l[x>>2])>>>0<2){_t=10;break t}if(32896==(0|l[A>>2])&&0==(0|(bt=0|ht(f)))&0==(0|S)){_t=50;break}for(rt=0|l[Q>>2],et=0|l[x>>2],16&rt|0&&(l[Mt>>2]=-2-et+(0|l[Mt>>2])),nt=et+-2|0,l[x>>2]=nt,et=0|l[A>>2],vt=784;!(0==(0|(bt=0|l[vt>>2]))|(0|bt)==(0|et));)vt=vt+12|0;if(!(l[vt+4>>2]&rt)){_t=18;break t}if(nt>>>0>(0|l[Dt>>2])>>>0){if(bt=0|ht(f),(0|(yt=S))<0|0==(0|yt)&bt>>>0<nt>>>0){_t=22;break t}if(!(et=0|Wt(0|l[Lt>>2],0|l[x>>2]))){_t=24;break t}l[Lt>>2]=et,nt=0|l[x>>2],l[Dt>>2]=nt}else et=0|l[Lt>>2];if((0|(et=0|lt(f,et,nt,d)))!=(0|l[x>>2])){_t=27;break t}if(!(nt=0|l[vt+8>>2])){_t=29;break t}if(!(0|qr[63&nt](t,0|l[Lt>>2],et,d))){_t=31;break t}if(st=0|l[xt>>2],at=0|l[Et>>2],ct=0|l[vt>>2],gt=(gt=0|ut(f))-(yt=0|l[x>>2])-4|0,yt=yt+4|0,ot=0|l[(at=at+40|0)>>2],(1+(et=0|l[ot+(40*st|0)+20>>2])|0)>>>0>(rt=0|l[(nt=ot+(40*st|0)+28|0)>>2])>>>0){if(rt=~~(+(rt>>>0)+100)>>>0,l[nt>>2]=rt,nt=0|Wt(0|l[ot+(40*st|0)+24>>2],24*rt|0),et=(rt=0|l[at>>2])+(40*st|0)+24|0,!nt){_t=39;break t}l[et>>2]=nt,at=rt,et=0|l[rt+(40*st|0)+20>>2]}else at=ot,nt=0|l[ot+(40*st|0)+24>>2];a[nt+(24*et|0)>>1]=ct,l[(bt=nt+(24*et|0)+8|0)>>2]=gt,l[bt+4>>2]=((0|gt)<0)<<31>>31,l[nt+(24*et|0)+16>>2]=yt,l[at+(40*st|0)+20>>2]=et+1,65424==(0|ct)&&0|(wt=0|l[at+(40*st|0)+16>>2])&&(bt=wt+(24*(0|l[at+(40*st|0)+12>>2])|0)|0,l[bt>>2]=gt,l[bt+4>>2]=0);do{if(65424==(0|l[vt>>2])){if(et=0|ut(f),et=-4-(0|l[x>>2])+et|0,!((0|(vt=0|l[(bt=Nt)+4>>2]))<0|(0==(0|vt)?(0|l[bt>>2])>>>0<et>>>0:0)))break;l[(bt=Nt)>>2]=et,l[bt+4>>2]=0}}while(0);if(4&r[tt>>0])break;if(2!=(0|lt(f,0|l[Lt>>2],2,d))){_t=48;break t}if(it(0|l[Lt>>2],A,2),65427==(0|l[A>>2]))break e}if(50==(0|_t)){_t=0,l[Q>>2]=64;break}if(bt=0|ft(f,0|l[Mt>>2],0,d),0!=(0|S)||(0|bt)!=(0|l[Mt>>2])){_t=45;break t}l[A>>2]=65427}}while(0);if(0==(0|(bt=0|ht(f)))&0==(0|S)&&64==(0|l[Q>>2])){_t=114;break}if(4&(et=0|r[tt>>0])){if(r[tt>>0]=-6&et,l[Q>>2]=8,2!=(0|lt(f,0|l[Lt>>2],2,d))){_t=112;break}it(0|l[Lt>>2],A,2)}else{nt=0|l[At>>2],rt=0|l[xt>>2],0|l[St>>2]?(et=0|br(0|(et=0|ht(f)),0|S,-2,0),_t=57):(et=0|l[Mt>>2])>>>0>1&&(et=et+-2|0,_t=57),57==(0|_t)&&(_t=0,l[Mt>>2]=et),bt=nt+(5640*rt|0)+5592|0,vt=nt+(5640*rt|0)+5596|0;do{if(et){if(yt=0|ht(f),(0|(gt=S))<0|0==(0|gt)&yt>>>0<et>>>0&&mt(d,2,12386,P),!(et=0|l[bt>>2])){if(yt=0|zt(0|l[Mt>>2]),l[bt>>2]=yt,yt){gt=0;break}_t=66;break t}if(!(et=0|Wt(et,(0|l[Mt>>2])+(0|l[vt>>2])|0))){_t=64;break t}l[bt>>2]=et,gt=0}else gt=1}while(0);if(0|(et=0|l[Et>>2])){if(yt=0|br(0|(Ot=0|ut(f)),0|(rt=S),-2,-1),ot=0|l[(at=et+40|0)>>2],st=0|l[xt>>2],ct=0|l[ot+(40*st|0)+12>>2],nt=0|l[ot+(40*st|0)+16>>2],l[(et=nt+(24*ct|0)+8|0)>>2]=yt,l[et+4>>2]=S,et=0|br(0|Ot,0|rt,0|l[Mt>>2],0),l[(ct=nt+(24*ct|0)+16|0)>>2]=et,l[ct+4>>2]=S,ct=2+(0|l[Mt>>2])|0,(1+(et=0|l[ot+(40*st|0)+20>>2])|0)>>>0>(rt=0|l[(nt=ot+(40*st|0)+28|0)>>2])>>>0){if(rt=~~(+(rt>>>0)+100)>>>0,l[nt>>2]=rt,nt=0|Wt(0|l[ot+(40*st|0)+24>>2],24*rt|0),et=(rt=0|l[at>>2])+(40*st|0)+24|0,!nt){_t=73;break}l[et>>2]=nt,at=rt,et=0|l[rt+(40*st|0)+20>>2]}else at=ot,nt=0|l[ot+(40*st|0)+24>>2];a[nt+(24*et|0)>>1]=-109,yt=0|Mr(0,0|yt,32),l[(Ot=nt+(24*et|0)+8|0)>>2]=yt,l[Ot+4>>2]=S,l[nt+(24*et|0)+16>>2]=ct,l[at+(40*st|0)+20>>2]=et+1}if(et=gt?0:0|lt(f,(0|l[bt>>2])+(0|l[vt>>2])|0,0|l[Mt>>2],d),l[Q>>2]=(0|et)!=(0|l[Mt>>2])?64:8,l[vt>>2]=(0|l[vt>>2])+et,1==(9&(et=0|r[tt>>0]))){r[tt>>0]=8|et,nt=0|l[xt>>2];do{if(0==(0|pt(f))||-1==(0|(It=0|ut(f)))&-1==(0|(kt=S)))et=1,nt=0;else{for(;;){if(2!=(0|lt(f,p,2,d))){_t=80;break}if(it(p,m,2),65424!=(0|l[m>>2])){_t=82;break}if(2!=(0|lt(f,p,2,d))){_t=84;break}if(it(p,g,2),10!=(0|l[g>>2])){_t=86;break}if(l[g>>2]=8,(0|(et=0|lt(f,p,8,d)))!=(0|l[g>>2])){_t=88;break}if(8!=(0|et)){_t=90;break}if(it(p,y,2),it(Bt,v,4),it(Rt,b,1),it(Pt,_,1),(0|l[y>>2])==(0|nt)){_t=96;break}if((et=0|l[v>>2])>>>0<14){_t=93;break}if(Ot=et+-12|0,l[v>>2]=Ot,Ot=0|ft(f,Ot,0,d),0!=(0|S)||(0|Ot)!=(0|l[v>>2])){_t=95;break}}if(80==(0|_t)){_t=0,et=0!=(0|dt(f,It,kt,d)),nt=0;break}if(82==(0|_t)){_t=0,et=0!=(0|dt(f,It,kt,d)),nt=0;break}if(84==(0|_t)){_t=0,mt(d,1,8150,N),et=0,nt=0;break}if(86==(0|_t)){_t=0,mt(d,1,12203,O),et=0,nt=0;break}if(88==(0|_t)){_t=0,mt(d,1,8150,G),et=0,nt=0;break}if(90==(0|_t)){_t=0,mt(d,1,11669,z),et=0,nt=0;break}if(93==(0|_t)){_t=0,et=0!=(0|dt(f,It,kt,d)),nt=0;break}if(95==(0|_t)){_t=0,et=0!=(0|dt(f,It,kt,d)),nt=0;break}if(96==(0|_t)){_t=0,nt=(0|l[b>>2])==(0|l[_>>2])&1,et=0!=(0|dt(f,It,kt,d));break}}}while(0);if(!et){_t=98;break}if(0|nt){if(nt=0|k(0|l[Ct>>2],0|l[Tt>>2]),r[tt>>0]=-18&r[tt>>0]|16,0|nt){rt=0|l[At>>2],et=0;do{0|(at=0|l[(ot=rt+(5640*et|0)+5588|0)>>2])&&(l[ot>>2]=at+1),et=et+1|0}while((0|et)!=(0|nt))}mt(d,2,12521,H)}}if(!(1&r[tt>>0])){if(2!=(0|lt(f,0|l[Lt>>2],2,d))){_t=108;break}it(0|l[Lt>>2],A,2)}}et=0|l[A>>2]}while(65497!=(0|et)&0==(1&r[tt>>0]));switch(0|_t){case 8:return mt(d,1,8150,M),w=$,0|(Ot=0);case 10:return mt(d,1,12203,E),w=$,0|(Ot=0);case 18:return mt(d,1,8235,F),w=$,0|(Ot=0);case 22:return mt(d,1,12229,Z),w=$,0|(Ot=0);case 24:return Zt(0|l[Lt>>2]),l[Lt>>2]=0,l[Dt>>2]=0,mt(d,1,8333,j),w=$,0|(Ot=0);case 27:return mt(d,1,8150,Y),w=$,0|(Ot=0);case 29:return mt(d,1,12274,T),w=$,0|(Ot=0);case 31:return l[I>>2]=l[A>>2],mt(d,1,12303,I),w=$,0|(Ot=0);case 39:return Zt(0|l[et>>2]),Ot=0|l[at>>2],l[Ot+(40*st|0)+24>>2]=0,l[Ot+(40*st|0)+28>>2]=0,l[Ot+(40*st|0)+20>>2]=0,mt(d,1,12350,C),w=$,0|(Ot=0);case 45:return mt(d,1,8150,B),w=$,0|(Ot=0);case 48:return mt(d,1,8150,R),w=$,0|(Ot=0);case 64:Zt(0|l[bt>>2]),l[bt>>2]=0,_t=66;break;case 73:return Zt(0|l[et>>2]),Ot=0|l[at>>2],l[Ot+(40*st|0)+24>>2]=0,l[Ot+(40*st|0)+28>>2]=0,l[Ot+(40*st|0)+20>>2]=0,mt(d,1,12350,D),w=$,0|(Ot=0);case 98:return mt(d,1,12475,U),w=$,0|(Ot=0);case 108:return mt(d,1,8150,V),w=$,0|(Ot=0);case 112:return mt(d,1,8150,W),w=$,0|(Ot=0);case 114:et=0|l[A>>2]}if(66==(0|_t))return mt(d,1,12441,L),w=$,0|(Ot=0);65497==(0|et)&&256!=(0|l[Q>>2])&&(l[t+200>>2]=0,l[Q>>2]=256)}break;default:return w=$,0|(Ot=0)}if(1&r[tt>>0])rt=tt=t+200|0,ot=0|l[t+164>>2],tt=0|l[tt>>2];else{nt=0|k(0|l[t+112>>2],0|l[t+116>>2]),ot=0|l[t+164>>2],tt=0|l[(rt=t+200|0)>>2];t:do{if(tt>>>0<nt>>>0)for(et=ot+(5640*tt|0)|0;;){if(0|l[et+5592>>2])break t;if(tt=tt+1|0,l[rt>>2]=tt,!(tt>>>0<nt>>>0))break;et=et+5640|0}}while(0);if((0|tt)==(0|nt))return l[h>>2]=0,w=$,0|(Ot=1)}if(2&r[ot+(5640*tt|0)+5636>>0]){if(at=0|l[(_t=ot+(5640*tt|0)+5160|0)>>2]){st=0|l[ot+(5640*tt|0)+5164>>2],nt=0,et=0;do{et=(0|l[st+(nt<<3)+4>>2])+et|0,nt=nt+1|0}while((0|nt)!=(0|at))}else et=0;if(Ot=0|zt(et),l[(bt=ot+(5640*tt|0)+5172|0)>>2]=Ot,!Ot)return mt(d,1,9491,X),mt(d,1,12562,J),w=$,0|(Ot=0);if(l[(vt=ot+(5640*tt|0)+5180|0)>>2]=et,yt=ot+(5640*tt|0)+5164|0,nt=0|l[_t>>2])for(gt=0,st=0,ct=et=0|l[yt>>2];(at=0|l[ct+(gt<<3)>>2])?(kr((0|l[bt>>2])+st|0,0|at,0|l[ct+(gt<<3)+4>>2]),at=0|l[yt>>2],st=(0|l[at+(gt<<3)+4>>2])+st|0,Zt(0|l[at+(gt<<3)>>2]),at=0|l[yt>>2],l[at+(gt<<3)>>2]=0,l[at+(gt<<3)+4>>2]=0,nt=0|l[_t>>2],et=at):at=ct,!((gt=gt+1|0)>>>0>=nt>>>0);)ct=at;else et=0|l[yt>>2];l[_t>>2]=0,Zt(et),l[yt>>2]=0,l[ot+(5640*tt|0)+5168>>2]=l[bt>>2],l[ot+(5640*tt|0)+5176>>2]=l[vt>>2]}return 0|function(t,e,n){return 0|nn(t|=0,e|=0,0,.5,56,n|=0)}(0|l[(tt=t+204|0)>>2],0|l[rt>>2],d)?(Ot=0|k(0|l[t+112>>2],0|l[t+116>>2]),l[K>>2]=1+(0|l[rt>>2]),l[K+4>>2]=Ot,mt(d,4,12588,K),l[e>>2]=l[rt>>2],l[h>>2]=1,Ot=0|function(t){var e=0,n=0,i=0,r=0,o=0,a=0;if(e=0|l[24+(t|=0)>>2],!(r=0|l[e+16>>2]))return 0|(r=0);for(i=0|l[20+(0|l[l[t+20>>2]>>2])>>2],e=0|l[e+24>>2],t=0,n=0;a=((a=0|l[e+24>>2])>>>3)+(0!=(7&a|0)&1)|0,o=(0|l[i+24>>2])+(136*(0|l[i+20>>2])|0)-136|0,t=(0|k(0|k(3==(0|a)?4:a,(0|l[o+8>>2])-(0|l[o>>2])|0),(0|l[o+12>>2])-(0|l[o+4>>2])|0))+t|0,!((n=n+1|0)>>>0>=r>>>0);)i=i+52|0,e=e+52|0;return 0|t}(0|l[tt>>2]),l[n>>2]=Ot,Ot=0|l[l[20+(0|l[tt>>2])>>2]>>2],l[i>>2]=l[Ot>>2],l[o>>2]=l[Ot+4>>2],l[s>>2]=l[Ot+8>>2],l[c>>2]=l[Ot+12>>2],l[u>>2]=l[Ot+16>>2],l[Q>>2]=128|l[Q>>2],w=$,0|(Ot=1)):(mt(d,1,8019,q),w=$,0|(Ot=0))}function re(t,e,n,i,o,a){e|=0,n|=0,i|=0,o|=0,a|=0;var s,c,u,h,f,d,p,m,g=0,y=0,v=0;if(m=w,w=w+48|0,d=m+28|0,p=m+32|0,!(128&l[(v=8+(t|=0)|0)>>2]))return w=m,0|(v=0);if((0|l[(f=t+200|0)>>2])!=(0|e))return w=m,0|(v=0);if(s=(g=0|l[t+164>>2])+(5640*e|0)|0,!(c=0|l[(y=g+(5640*e|0)+5592|0)>>2]))return Jt(s),w=m,0|(v=0);if(h=g+(5640*e|0)+5596|0,!(0|on(0|l[(u=t+204|0)>>2],c,0|l[h>>2],e,0|l[t+196>>2],a)))return Jt(s),l[v>>2]=32768|l[v>>2],mt(a,1,12627,m),w=m,0|(v=0);if(!(0|an(0|l[u>>2],n,i)))return w=m,0|(v=0);if(0|(g=0|l[y>>2])&&(Zt(g),l[y>>2]=0,l[h>>2]=0),r[(t=t+76|0)>>0]=-2&r[t>>0],l[v>>2]=-129&l[v>>2],t=0|ht(o),256==(0|(y=0|l[v>>2]))|0==(0|t)&0==(0|S)&64==(0|y))return w=m,0|(v=1);if(2!=(0|lt(o,p,2,a)))return mt(a,2,12646,m+8|0),w=m,0|(v=1);switch(it(p,d,2),0|l[d>>2]){case 65497:return l[f>>2]=0,l[v>>2]=256,w=m,0|(v=1);case 65424:return w=m,0|(v=1);default:return 0==(0|ht(o))&0==(0|S)?(l[v>>2]=64,mt(a,2,12690,m+16|0),w=m,0|(v=1)):(mt(a,1,12720,m+24|0),w=m,0|(v=0))}return 0}function oe(t,e,n,i,o,a,s){e|=0,n|=0,i|=0,o|=0,a|=0,s|=0;var c,u,h,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,M=0,E=0;if(h=w,w=w+112|0,E=h+96|0,u=h+88|0,c=h+80|0,M=h+72|0,x=h+64|0,A=h+56|0,b=h+48|0,g=h+40|0,m=h+32|0,p=h+24|0,d=h+16|0,v=0|l[80+(t|=0)>>2],8!=(0|l[t+8>>2]))return mt(s,1,12752,h),w=h,0|(E=0);if(!(i|n|o|a))return mt(s,4,12831,h+8|0),l[t+28>>2]=0,l[t+32>>2]=0,l[t+36>>2]=l[t+112>>2],l[t+40>>2]=l[t+116>>2],w=h,0|(E=1);if((f=0|l[(_=v+8|0)>>2])>>>0<n>>>0)return l[d>>2]=n,l[d+4>>2]=f,mt(s,1,12900,d),w=h,0|(E=0);if((f=0|l[v>>2])>>>0>n>>>0?(l[p>>2]=n,l[p+4>>2]=f,mt(s,2,12987,p),l[t+28>>2]=0,n=0|l[v>>2]):l[t+28>>2]=((n-(0|l[t+92>>2])|0)>>>0)/((0|l[t+100>>2])>>>0)|0,l[e>>2]=n,(n=0|l[(y=v+12|0)>>2])>>>0<i>>>0)return l[m>>2]=i,l[m+4>>2]=n,mt(s,1,13075,m),w=h,0|(E=0);if((n=0|l[(d=v+4|0)>>2])>>>0>i>>>0?(l[g>>2]=i,l[g+4>>2]=n,mt(s,2,13160,g),l[t+32>>2]=0,n=0|l[d>>2]):(l[t+32>>2]=((i-(0|l[t+96>>2])|0)>>>0)/((0|l[t+104>>2])>>>0)|0,n=i),l[(p=e+4|0)>>2]=n,(n=0|l[v>>2])>>>0>o>>>0)return l[b>>2]=o,l[b+4>>2]=n,mt(s,1,13246,b),w=h,0|(E=0);if((n=0|l[_>>2])>>>0<o>>>0?(l[A>>2]=o,l[A+4>>2]=n,mt(s,2,13335,A),l[t+36>>2]=l[t+112>>2],o=0|l[_>>2]):(A=0|l[t+100>>2],l[t+36>>2]=(o+-1-(0|l[t+92>>2])+A|0)/(0|A)|0),l[(f=e+8|0)>>2]=o,(o=0|l[d>>2])>>>0>a>>>0)return l[x>>2]=a,l[x+4>>2]=o,mt(s,1,13423,x),w=h,0|(E=0);(o=0|l[y>>2])>>>0<a>>>0?(l[M>>2]=a,l[M+4>>2]=o,mt(s,2,13513,M),l[t+40>>2]=l[t+116>>2],a=0|l[y>>2]):(M=0|l[t+104>>2],l[t+40>>2]=(a+-1-(0|l[t+96>>2])+M|0)/(0|M)|0),l[(M=e+12|0)>>2]=a,r[(x=t+76|0)>>0]=2|r[x>>0],x=0|l[e+16>>2],t=0|l[e>>2];t:do{if(x){for(A=(n=0|l[p>>2])-1|0,b=(o=0|l[f>>2])-1|0,_=t+-1|0,v=0,y=0|l[e+24>>2];;){if(g=(_+(e=0|l[y>>2])|0)/(0|e)|0,l[y+16>>2]=g,d=(A+(f=0|l[y+4>>2])|0)/(0|f)|0,l[y+20>>2]=d,e=(b+e|0)/(0|e)|0,m=0|Tr(1,0,0|(p=0|l[y+40>>2])),i=S,(0|(g=(e=0|Mr(0|(e=0|br(0|(e=0|br(0|e,((0|e)<0)<<31>>31|0,-1,-1)),0|S,0|m,0|i)),0|S,0|p))-(g=0|Mr(0|(g=0|br(0|(g=0|br(0|g,((0|g)<0)<<31>>31|0,-1,-1)),0|S,0|m,0|i)),0|S,0|p))|0))<0){f=29;break}if(e=(f+-1+(a=0|l[M>>2])|0)/(0|f)|0,l[y+8>>2]=g,(0|(d=(e=0|Mr(0|(e=0|br(0|(e=0|br(0|e,((0|e)<0)<<31>>31|0,-1,-1)),0|S,0|m,0|i)),0|S,0|p))-(d=0|Mr(0|(d=0|br(0|(d=0|br(0|d,((0|d)<0)<<31>>31|0,-1,-1)),0|S,0|m,0|i)),0|S,0|p))|0))<0){f=31;break}if(l[y+12>>2]=d,!((f=v+1|0)>>>0<x>>>0))break t;v=f,y=y+52|0}if(29==(0|f))return l[c>>2]=v,l[c+4>>2]=g,mt(s,1,13602,c),w=h,0|(E=0);if(31==(0|f))return l[u>>2]=v,l[u+4>>2]=d,mt(s,1,13671,u),w=h,0|(E=0)}else n=0|l[p>>2],o=0|l[f>>2],a=0|l[M>>2]}while(0);return l[E>>2]=t,l[E+4>>2]=n,l[E+8>>2]=o,l[E+12>>2]=a,mt(s,4,13740,E),w=h,0|(E=1)}function ae(){var t,e=0,n=0;if(!(t=0|Ut(1,208)))return 0|(e=0);if(l[t>>2]=1,r[(e=t+184|0)>>0]=2|r[e>>0],e=0|Ut(1,5640),l[t+12>>2]=e,!e)return Xt(t),0|(e=0);if(e=0|Ut(1,1e3),l[t+16>>2]=e,!e)return Xt(t),0|(e=0);l[t+20>>2]=1e3,l[t+60>>2]=-1,l[(e=t+64|0)>>2]=0,l[e+4>>2]=0,e=0|Ut(1,48);do{if(0|e){if(l[e+32>>2]=100,l[e+24>>2]=0,n=0|Ut(100,24),l[e+28>>2]=n,!n){Zt(e);break}return l[e+40>>2]=0,l[t+196>>2]=e,n=0|gn(),l[t+192>>2]=n,n?(n=0|gn(),l[t+188>>2]=n,0|n?0|(n=t):(Xt(t),0|(n=0))):(Xt(t),0|(n=0))}}while(0);return l[t+196>>2]=0,Xt(t),0|(n=0)}function se(t,e,n){t|=0,n|=0;var i,r,o,a,s,c=0,u=0,h=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0;if(s=w,w=w+128|0,a=s+104|0,o=s+72|0,r=s+64|0,_=s+40|0,v=s+24|0,i=s+16|0,m=s+8|0,p=s,384&(e|=0)|0)return Ei(13778,11,1,n),void(w=s);if(1&e|0&&0|(d=0|l[t+80>>2])&&le(d,0,n),2&e|0&&0|l[(u=t+80|0)>>2]&&(Ei(13790,36,1,n),d=0|l[t+96>>2],l[p>>2]=l[t+92>>2],l[p+4>>2]=d,Wi(n,13827,p),p=0|l[t+104>>2],l[m>>2]=l[t+100>>2],l[m+4>>2]=p,Wi(n,13845,m),m=0|l[t+116>>2],l[i>>2]=l[t+112>>2],l[i+4>>2]=m,Wi(n,13863,i),ce(0|l[t+12>>2],0|l[16+(0|l[u>>2])>>2],n),Ei(13879,2,1,n)),8&e|0&&(g=0|k(0|l[t+112>>2],0|l[t+116>>2]),!(0==(0|(h=0|l[(y=t+80|0)>>2]))|0==(0|g)))&&(ce(c=0|l[t+164>>2],0|l[h+16>>2],n),1!=(0|g))){u=1;do{ce(c=c+5640|0,0|l[16+(0|l[y>>2])>>2],n),u=u+1|0}while((0|u)!=(0|g))}if(16&e){d=0|l[t+196>>2],Ei(13882,37,1,n),g=0|l[(e=d)+4>>2],y=0|l[(u=d+8|0)>>2],u=0|l[u+4>>2],l[(h=v)>>2]=l[e>>2],l[h+4>>2]=g,l[(h=v+8|0)>>2]=y,l[h+4>>2]=u,Wi(n,13920,v),Ei(13987,17,1,n),u=0|l[(h=d+28|0)>>2];t:do{if(0|u&&(b=d+24|0,0|l[b>>2]))for(c=0;;){if(e=0|l[(g=u+(24*c|0)+8|0)>>2],g=0|l[g+4>>2],v=0|l[u+(24*c|0)+16>>2],l[_>>2]=f[u+(24*c|0)>>1],l[(y=_+8|0)>>2]=e,l[y+4>>2]=g,l[_+16>>2]=v,Wi(n,14005,_),(c=c+1|0)>>>0>=(0|l[b>>2])>>>0)break t;u=0|l[h>>2]}}while(0);if(Ei(14036,4,1,n),0|(h=0|l[(m=d+40|0)>>2])&&0|(A=0|l[(x=d+36|0)>>2])){c=0,u=0;do{c=(0|l[h+(40*u|0)+4>>2])+c|0,u=u+1|0}while((0|u)!=(0|A));if(0|c){if(Ei(14041,16,1,n),0|l[x>>2]){p=0,c=0|l[m>>2];do{d=0|l[c+(40*p|0)+4>>2],l[r>>2]=p,l[r+4>>2]=d,Wi(n,14058,r),c=0|l[m>>2],h=0|l[c+(40*p|0)+16>>2];t:do{if(0!=(0|d)&0!=(0|h))for(u=0,c=h;;){if(g=0|l[(y=c+(24*u|0)|0)>>2],y=0|l[y+4>>2],v=0|l[(b=c+(24*u|0)+8|0)>>2],b=0|l[b+4>>2],_=0|l[(A=c+(24*u|0)+16|0)>>2],A=0|l[A+4>>2],l[o>>2]=u,l[(c=o+8|0)>>2]=g,l[c+4>>2]=y,l[(c=o+16|0)>>2]=v,l[c+4>>2]=b,l[(c=o+24|0)>>2]=_,l[c+4>>2]=A,Wi(n,14094,o),u=u+1|0,c=0|l[m>>2],(0|u)==(0|d))break t;c=0|l[c+(40*p|0)+16>>2]}}while(0);h=0|l[c+(40*p|0)+24>>2];t:do{if(0!=(0|h)&&0!=(0|l[c+(40*p|0)+20>>2]))for(u=0,c=h;;){if(b=0|l[(_=c+(24*u|0)+8|0)>>2],_=0|l[_+4>>2],A=0|l[c+(24*u|0)+16>>2],l[a>>2]=f[c+(24*u|0)>>1],l[(c=a+8|0)>>2]=b,l[c+4>>2]=_,l[a+16>>2]=A,Wi(n,14005,a),u=u+1|0,c=0|l[m>>2],u>>>0>=(0|l[c+(40*p|0)+20>>2])>>>0)break t;c=0|l[c+(40*p|0)+24>>2]}}while(0);p=p+1|0}while(p>>>0<(0|l[x>>2])>>>0)}Ei(14036,4,1,n)}}Ei(13879,2,1,n),w=s}else w=s}function le(t,e,n){t|=0,n|=0;var i,o,a,s,c,u,h=0,f=0,d=0;if(c=w,w=w+64|0,s=c+48|0,a=c+40|0,i=c+32|0,d=c+16|0,f=c,o=c+52|0,(e|=0)?(Ei(14455,36,1,0|l[665]),h=0):(Ei(14492,13,1,n),r[o>>0]=9,h=1),r[o+h>>0]=0,u=0|l[t>>2],h=0|l[t+4>>2],l[f>>2]=o,l[f+4>>2]=u,l[f+8>>2]=h,Wi(n,14506,f),h=0|l[t+8>>2],f=0|l[t+12>>2],l[d>>2]=o,l[d+4>>2]=h,l[d+8>>2]=f,Wi(n,14523,d),f=0|l[(d=t+16|0)>>2],l[i>>2]=o,l[i+4>>2]=f,Wi(n,14540,i),!(0|l[(f=t+24|0)>>2]))return Ei(13879,2,1,n),void(w=c);if(!(0|l[d>>2]))return Ei(13879,2,1,n),void(w=c);h=0;do{l[a>>2]=o,l[a+4>>2]=h,Wi(n,14556,a),ue((0|l[f>>2])+(52*h|0)|0,e,n),l[s>>2]=o,Wi(n,14576,s),h=h+1|0}while(h>>>0<(0|l[d>>2])>>>0);Ei(13879,2,1,n),w=c}function ce(t,e,n){e|=0,n|=0;var i,r,o,a,s,c,u,h,f,d,p,m,g,y=0,v=0,b=0,_=0,A=0,x=0;if(g=w,w=w+128|0,m=g+120|0,p=g+112|0,d=g+104|0,f=g+96|0,h=g+88|0,u=g+80|0,c=g+72|0,s=g+64|0,a=g+56|0,o=g+48|0,r=g+40|0,i=g+32|0,_=g+24|0,b=g+16|0,v=g+8|0,y=g,t|=0){if(Ei(14160,17,1,n),l[y>>2]=l[t>>2],Wi(n,14178,y),l[v>>2]=l[t+4>>2],Wi(n,14191,v),l[b>>2]=l[t+8>>2],Wi(n,14203,b),l[_>>2]=l[t+16>>2],Wi(n,14220,_),(0|e)>0){b=t+5584|0,v=0;do{if(_=0|l[b>>2],l[i>>2]=v,Wi(n,14231,i),l[r>>2]=l[_+(1080*v|0)>>2],Wi(n,14245,r),y=_+(1080*v|0)+4|0,l[o>>2]=l[y>>2],Wi(n,14259,o),l[a>>2]=l[_+(1080*v|0)+8>>2],Wi(n,14282,a),l[s>>2]=l[_+(1080*v|0)+12>>2],Wi(n,14298,s),l[c>>2]=l[_+(1080*v|0)+16>>2],Wi(n,14314,c),l[u>>2]=l[_+(1080*v|0)+20>>2],Wi(n,14331,u),Ei(14346,23,1,n),0|l[y>>2]){t=0;do{x=0|l[_+(1080*v|0)+944+(t<<2)>>2],l[h>>2]=l[_+(1080*v|0)+812+(t<<2)>>2],l[h+4>>2]=x,Wi(n,14370,h),t=t+1|0}while(t>>>0<(0|l[y>>2])>>>0)}if(mr(10,n),x=_+(1080*v|0)+24|0,l[f>>2]=l[x>>2],Wi(n,14379,f),l[d>>2]=l[_+(1080*v|0)+804>>2],Wi(n,14394,d),Ei(14411,20,1,n),1!=(0|l[x>>2])?(0|(t=3*(0|l[y>>2])|0))>2&&(y=t+-2|0,A=8):(y=1,A=8),8==(0|A)){A=0,t=0;do{x=0|l[_+(1080*v|0)+28+(t<<3)>>2],l[p>>2]=l[_+(1080*v|0)+28+(t<<3)+4>>2],l[p+4>>2]=x,Wi(n,14370,p),t=t+1|0}while((0|t)!=(0|y))}mr(10,n),l[m>>2]=l[_+(1080*v|0)+808>>2],Wi(n,14432,m),Ei(14449,5,1,n),v=v+1|0}while((0|v)!=(0|e))}Ei(14036,4,1,n),w=g}else w=g}function ue(t,e,n){t|=0,n|=0;var i,o,a,s,c,u=0,h=0;s=w,w=w+48|0,a=s+24|0,h=s+16|0,u=s,o=s+32|0,(i=0!=(0|(e|=0)))?(Ei(14581,41,1,0|l[665]),e=0):(r[o>>0]=9,r[o+1>>0]=9,e=2),r[o+e>>0]=0,c=0|l[t>>2],e=0|l[t+4>>2],l[u>>2]=o,l[u+4>>2]=c,l[u+8>>2]=e,Wi(n,14623,u),u=0|l[t+24>>2],l[h>>2]=o,l[h+4>>2]=u,Wi(n,14640,h),h=0|l[t+32>>2],l[a>>2]=o,l[a+4>>2]=h,Wi(n,14652,a),i?(Ei(13879,2,1,n),w=s):w=s}function he(t){var e,n,i,r,o,a=0,s=0,c=0,u=0,h=0;if(o=w,w=w+16|0,s=o,r=0|l[16+(0|l[(a=80+(t|=0)|0)>>2])>>2],e=0|Ut(1,56),l[s>>2]=e,!e)return w=o,0|(h=0);if(a=0|l[16+(0|l[a>>2])>>2],l[e+24>>2]=a,l[e>>2]=l[t+92>>2],l[e+4>>2]=l[t+96>>2],l[e+8>>2]=l[t+100>>2],l[e+12>>2]=l[t+104>>2],l[e+16>>2]=l[t+112>>2],l[e+20>>2]=l[t+116>>2],l[e+52>>2]=0,t=0|l[t+12>>2],l[e+32>>2]=l[t>>2],l[e+36>>2]=l[t+4>>2],l[e+40>>2]=l[t+8>>2],l[e+44>>2]=l[t+16>>2],a=0|Ut(a,1080),l[(i=e+48|0)>>2]=a,!a)return Mt(s),w=o,0|(h=0);if(!r)return w=o,0|(h=e);for(n=t+5584|0,t=0;;){if(u=0|l[n>>2],l[a+(1080*t|0)+4>>2]=l[u+(1080*t|0)>>2],c=0|l[(s=u+(1080*t|0)+4|0)>>2],l[a+(1080*t|0)+8>>2]=c,l[a+(1080*t|0)+12>>2]=l[u+(1080*t|0)+8>>2],l[a+(1080*t|0)+16>>2]=l[u+(1080*t|0)+12>>2],l[a+(1080*t|0)+20>>2]=l[u+(1080*t|0)+16>>2],l[a+(1080*t|0)+24>>2]=l[u+(1080*t|0)+20>>2],c>>>0<33&&(kr(a+(1080*t|0)+948|0,u+(1080*t|0)+944|0,0|c),kr(a+(1080*t|0)+816|0,u+(1080*t|0)+812|0,0|l[s>>2])),c=0|l[u+(1080*t|0)+24>>2],l[a+(1080*t|0)+28>>2]=c,l[a+(1080*t|0)+808>>2]=l[u+(1080*t|0)+804>>2],1!=(0|c)?((s=3*(0|l[s>>2])|0)-3|0)>>>0<96&&(c=s+-2|0,h=10):(c=1,h=10),10==(0|h)){h=0,s=0;do{l[a+(1080*t|0)+32+(s<<2)>>2]=l[u+(1080*t|0)+28+(s<<3)+4>>2],l[a+(1080*t|0)+420+(s<<2)>>2]=l[u+(1080*t|0)+28+(s<<3)>>2],s=s+1|0}while((0|s)!=(0|c))}if(l[a+(1080*t|0)+812>>2]=l[u+(1080*t|0)+808>>2],(0|(t=t+1|0))==(0|r))break;a=0|l[i>>2]}return w=o,0|e}function fe(t){t|=0;var e,n,i,r=0,o=0,a=0,s=0,c=0,u=0;if(!(e=0|Ut(1,48)))return 0|(u=0);if(r=0|l[(i=t+196|0)>>2],u=0|l[(c=r)+4>>2],l[(t=e)>>2]=l[c>>2],l[t+4>>2]=u,u=0|l[4+(t=r+8|0)>>2],l[(c=e+8|0)>>2]=l[t>>2],l[c+4>>2]=u,u=0|l[4+(c=r+16|0)>>2],l[(t=e+16|0)>>2]=l[c>>2],l[t+4>>2]=u,r=0|l[r+24>>2],l[(t=e+24|0)>>2]=r,r=0|zt(24*r|0),l[(u=e+28|0)>>2]=r,!r)return Zt(e),0|(u=0);if((o=0|l[28+(0|l[i>>2])>>2])?kr(0|r,0|o,24*(0|l[t>>2])|0):(Zt(r),l[u>>2]=0),t=0|l[36+(0|l[i>>2])>>2],l[(n=e+36|0)>>2]=t,t=0|Ut(t,40),l[(c=e+40|0)>>2]=t,!t)return Zt(0|l[u>>2]),Zt(e),0|(u=0);if(!(r=0|l[40+(0|l[i>>2])>>2]))return Zt(t),l[c>>2]=0,0|(u=e);if(!(0|l[n>>2]))return 0|(u=e);r=0|l[r+20>>2],l[t+20>>2]=r,r=0|zt(24*r|0),t=0|l[c>>2],l[t+24>>2]=r;t:do{if(r){for(o=0;(a=0|l[(0|l[40+(0|l[i>>2])>>2])+(40*o|0)+24>>2])?(kr(0|r,0|a,24*(0|l[t+(40*o|0)+20>>2])|0),t=0|l[c>>2]):(Zt(r),t=0|l[c>>2],l[t+(40*o|0)+24>>2]=0),r=0|l[(0|l[40+(0|l[i>>2])>>2])+(40*o|0)+4>>2],l[t+(40*o|0)+4>>2]=r,r=0|zt(24*r|0),t=0|l[c>>2],l[t+(40*o|0)+16>>2]=r,r;){if((a=0|l[(0|l[40+(0|l[i>>2])>>2])+(40*o|0)+16>>2])?(kr(0|r,0|a,24*(0|l[t+(40*o|0)+4>>2])|0),t=0|l[c>>2]):(Zt(r),t=0|l[c>>2],l[t+(40*o|0)+16>>2]=0),l[t+(40*o|0)+32>>2]=0,l[t+(40*o|0)+36>>2]=0,(o=o+1|0)>>>0>=(0|l[n>>2])>>>0){s=28;break}if(r=0|l[(0|l[40+(0|l[i>>2])>>2])+(40*o|0)+20>>2],l[t+(40*o|0)+20>>2]=r,r=0|zt(24*r|0),t=0|l[c>>2],l[t+(40*o|0)+24>>2]=r,!r)break t}if(28==(0|s))return 0|e;if(o){r=0;do{Zt(0|l[t+(40*r|0)+24>>2]),Zt(0|l[(0|l[c>>2])+(40*r|0)+16>>2]),r=r+1|0,t=0|l[c>>2]}while((0|r)!=(0|o))}return Zt(t),Zt(0|l[u>>2]),Zt(e),0|(u=0)}o=0}while(0);if(o){r=0;do{Zt(0|l[t+(40*r|0)+24>>2]),r=r+1|0,t=0|l[c>>2]}while((0|r)!=(0|o))}return Zt(t),Zt(0|l[u>>2]),Zt(e),0|(u=0)}function de(t,e,n,i){t|=0,e|=0,i|=0;var r,o,a=0,s=0,c=0,u=0;if(!(n|=0))return 0|(n=0);if(a=0|bt(),l[(o=t+84|0)>>2]=a,!a)return 0|(n=0);if(_t(n,a),vn(0|l[(u=t+188|0)>>2],28,i),r=0|bn(u=0|l[u>>2]),a=0|_n(u),r){for(s=1,c=0;s=s?0!=(0|Qr[63&l[a>>2]](t,e,i)):0,(0|(c=c+1|0))!=(0|r);)a=a+4|0,s&=1;if(wn(u),!s)return vt(0|l[(n=t+80|0)>>2]),l[n>>2]=0,0|(n=0)}else wn(u);if(!(u=0|l[n+16>>2]))return 0|(n=1);c=0|l[24+(0|l[o>>2])>>2],s=0|l[n+24>>2],a=0;do{l[s+(52*a|0)+36>>2]=l[c+(52*a|0)+36>>2],n=c+(52*a|0)+44|0,l[s+(52*a|0)+44>>2]=l[n>>2],l[n>>2]=0,a=a+1|0}while(a>>>0<u>>>0);return 0|(a=1)}function pe(t,e,n,i){t|=0,n|=0,i|=0;var o=0,s=0,c=0,h=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,w=0,A=0,x=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0;if(!(0|l[(R=16+(e|=0)|0)>>2]))return 0|(R=1);for(B=0,C=0|l[e+24>>2];;){if(h=i+8|0,e=0|l[(c=i+44|0)>>2])s=i+12|0;else{if(e=0|l[h>>2],!(o=0|l[(s=i+12|0)>>2])){n=0,t=66;break}if(e>>>0>(4294967295/(o>>>0)|0)>>>0){n=0,t=66;break}if(e=0|Ut(0|k(o,e),4),l[c>>2]=e,!e){n=0,t=66;break}}p=C+36|0,l[i+36>>2]=l[p>>2],w=0|l[C+24>>2],b=0|l[t+24>>2],p=0|l[p>>2],A=3==(0|(w=(w>>>3)+(0!=(7&w|0)&1)|0)),M=(d=0|l[b+(136*p|0)+8>>2])-(o=0|l[b+(136*p|0)>>2])|0,b=(v=0|l[b+(136*p|0)+12>>2])-(p=0|l[b+(136*p|0)+4>>2])|0,c=0|l[i+16>>2],g=0|Tr(1,0,0|(m=0|l[i+40>>2])),I=S,c=0|Er(0|(c=0|br(0|(c=0|br(0|c,0,-1,-1)),0|S,0|g,0|I)),0|S,0|m),m=0|Er(0|(I=0|br(0|(T=0|br(0|l[i+20>>2],0,-1,-1)),0|S,0|g,0|I)),0|S,0|m),h=(I=0|l[h>>2])+c|0,g=(s=0|l[s>>2])+m|0;do{if(o>>>0<=c>>>0){if(o=c-o|0,d>>>0>h>>>0){T=I,x=o,y=0,_=d-h|0;break}T=M-o|0,x=o,y=0,_=0;break}_=h-o|0,T=(E=d>>>0>h>>>0)?_:M,x=0,y=o-c|0,_=E?M-_|0:0}while(0);do{if(p>>>0<=m>>>0){if(o=m-p|0,v>>>0>g>>>0){E=s,d=o,c=0,o=v-g|0;break}E=b-o|0,d=o,c=0,o=0;break}o=g-p|0,E=(v=v>>>0>g>>>0)?o:b,d=0,c=p-m|0,o=v?b-o|0:0}while(0);if((x|_|T|o|d|E|0)<0){n=0,t=66;break}switch(s=(h=0|k(d,M))+x|0,m=x+_|0,g=(0|k(o,M))-x|0,c=e+((0|k(I,c))+y<<2)|0,1073741823&(A?4:w)|0){case 1:o=n+s|0,e=0!=(0|E);do{if(0|l[C+32>>2])if(e){if(!T){n=n+(_+h+(0|k(m,E+-1|0))+(x<<1))|0;break}for(p=T+_+h+(0|k(T+x+_|0,E+-1|0))+(x<<1)|0,e=o,s=0;;){for(d=e+T|0,h=0,o=c;l[o>>2]=r[e>>0],(0|(h=h+1|0))!=(0|T);)e=e+1|0,o=o+4|0;if((0|(s=s+1|0))==(0|E))break;e=d+m|0,c=c+(I<<2)|0}n=n+p|0}else n=o;else if(e){if(!T){n=n+(_+h+(0|k(m,E+-1|0))+(x<<1))|0;break}for(p=T+_+h+(0|k(T+x+_|0,E+-1|0))+(x<<1)|0,d=0,e=o;;){for(h=e+T|0,s=0,o=c;l[o>>2]=u[e>>0],(0|(s=s+1|0))!=(0|T);)e=e+1|0,o=o+4|0;if((0|(d=d+1|0))==(0|E))break;e=h+m|0,c=c+(I<<2)|0}n=n+p|0}else n=o}while(0);n=n+g|0;break;case 2:e=n+(s<<1)|0,o=0!=(0|E);do{if(0|l[C+32>>2])if(o){if(!T){n=n+((0|k(d<<1,M))+(0|k(m<<1,E+-1|0))+(x<<2)+(_<<1))|0;break}for(n=n+((0|k(T+m<<1,E+-1|0))+(x<<2)+(T+_+h<<1))|0,d=0;;){for(h=e+(T<<1)|0,o=0,s=c;l[s>>2]=a[e>>1],(0|(o=o+1|0))!=(0|T);)e=e+2|0,s=s+4|0;if((0|(d=d+1|0))==(0|E))break;e=h+(m<<1)|0,c=c+(I<<2)|0}}else n=e;else if(o){if(!T){n=n+((0|k(d<<1,M))+(0|k(m<<1,E+-1|0))+(x<<2)+(_<<1))|0;break}for(n=n+((0|k(T+m<<1,E+-1|0))+(x<<2)+(T+_+h<<1))|0,d=0;;){for(h=e+(T<<1)|0,s=0,o=c;l[o>>2]=f[e>>1],(0|(s=s+1|0))!=(0|T);)e=e+2|0,o=o+4|0;if((0|(d=d+1|0))==(0|E))break;e=h+(m<<1)|0,c=c+(I<<2)|0}}else n=e}while(0);n=n+(g<<1)|0;break;case 4:e=n+(s<<2)|0;do{if(E){if(!T){n=n+((0|k(d<<2,M))+(0|k(m<<2,E+-1|0))+(x<<3)+(_<<2))|0;break}for(n=n+((0|k(T+m<<2,E+-1|0))+(x<<3)+(T+_+h<<2))|0,d=0;;){for(h=e+(T<<2)|0,o=0,s=c;l[s>>2]=l[e>>2],(0|(o=o+1|0))!=(0|T);)e=e+4|0,s=s+4|0;if((0|(d=d+1|0))==(0|E))break;e=h+(m<<2)|0,c=c+(I<<2)|0}}else n=e}while(0);n=n+(g<<2)|0}if((B=B+1|0)>>>0>=(0|l[R>>2])>>>0){n=1,t=66;break}t=t+52|0,i=i+52|0,C=C+52|0}return 66==(0|t)?0|n:0}function me(t,e,n,i,r){t|=0,e|=0,i|=0,r|=0;var o,a,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,M=0,E=0;if(a=w,w=w+16|0,u=a+8|0,!(n|=0))return mt(i,1,14842,a),w=a,0|(v=0);if(c=0|l[t+112>>2],(s=0|k(0|l[t+116>>2],c))>>>0<=r>>>0)return l[u>>2]=r,l[u+4>>2]=s+-1,mt(i,1,14880,u),w=a,0|(v=0);if(v=(r>>>0)%(c>>>0)|0,y=(r>>>0)/(c>>>0)|0,s=(s=0|k(0|l[(c=t+100|0)>>2],v))+(0|l[(u=t+92|0)>>2])|0,l[n>>2]=s,s=s>>>0<(h=0|l[l[(o=t+80|0)>>2]>>2])>>>0?h:s,l[n>>2]=s,u=(v=0|k(0|l[c>>2],v+1|0))+(0|l[u>>2])|0,l[(v=n+8|0)>>2]=u,u=u>>>0>(c=0|l[8+(0|l[o>>2])>>2])>>>0?c:u,l[v>>2]=u,c=(c=0|k(0|l[(v=t+104|0)>>2],y))+(0|l[(h=t+96|0)>>2])|0,l[(m=n+4|0)>>2]=c,c=c>>>0<(g=0|l[4+(0|l[o>>2])>>2])>>>0?g:c,l[m>>2]=c,h=(y=0|k(0|l[v>>2],y+1|0))+(0|l[h>>2])|0,l[(y=n+12|0)>>2]=h,h=h>>>0>(v=0|l[12+(0|l[o>>2])>>2])>>>0?v:h,l[y>>2]=h,y=n+24|0,0|(m=0|l[(v=n+16|0)>>2]))for(g=0|l[24+(0|l[o>>2])>>2],p=s+-1|0,d=c+-1|0,f=u+-1|0,u=h+-1|0,s=0,c=0|l[y>>2];h=0|l[g+(52*s|0)+40>>2],l[c+40>>2]=h,M=(p+(E=0|l[c>>2])|0)/(0|E)|0,l[c+16>>2]=M,x=(d+(b=0|l[c+4>>2])|0)/(0|b)|0,l[c+20>>2]=x,E=(f+E|0)/(0|E)|0,b=(u+b|0)/(0|b)|0,A=0|Tr(1,0,0|h),_=S,E=0|Mr(0|(E=0|br(0|(E=0|br(0|E,((0|E)<0)<<31>>31|0,-1,-1)),0|S,0|A,0|_)),0|S,0|h),M=0|Mr(0|(M=0|br(0|(M=0|br(0|M,((0|M)<0)<<31>>31|0,-1,-1)),0|S,0|A,0|_)),0|S,0|h),l[c+8>>2]=E-M,b=0|Mr(0|(b=0|br(0|(b=0|br(0|b,((0|b)<0)<<31>>31|0,-1,-1)),0|S,0|A,0|_)),0|S,0|h),h=0|Mr(0|(_=0|br(0|(x=0|br(0|x,((0|x)<0)<<31>>31|0,-1,-1)),0|S,0|A,0|_)),0|S,0|h),l[c+12>>2]=b-h,!((s=s+1|0)>>>0>=m>>>0);)c=c+52|0;if(0|(s=0|l[(d=t+84|0)>>2])&&vt(s),s=0|bt(),l[d>>2]=s,!s)return w=a,0|(E=0);if(_t(n,s),l[t+60>>2]=r,vn(0|l[(h=t+188|0)>>2],29,i),f=0|bn(h=0|l[h>>2]),s=0|_n(h),f){for(c=1,u=0;c=c?0!=(0|Qr[63&l[s>>2]](t,e,i)):0,(0|(u=u+1|0))!=(0|f);)s=s+4|0,c&=1;if(wn(h),!c)return vt(0|l[o>>2]),l[o>>2]=0,w=a,0|(E=0)}else wn(h);if(!(s=0|l[v>>2]))return w=a,0|(E=1);for(f=0,h=0|l[24+(0|l[d>>2])>>2],u=0|l[y>>2];;){if(l[u+(52*f|0)+36>>2]=l[h+(52*f|0)+36>>2],(c=0|l[u+(52*f|0)+44>>2])?(Zt(c),c=0|l[24+(0|l[d>>2])>>2],u=0|l[y>>2],s=0|l[v>>2]):c=h,E=c+(52*f|0)+44|0,l[u+(52*f|0)+44>>2]=l[E>>2],l[E>>2]=0,(f=f+1|0)>>>0>=s>>>0){s=1;break}h=c}return w=a,0|s}function ge(t,e,n){e|=0,n|=0;var i,r,o,a=0,s=0,c=0,u=0;o=w,w=w+16|0,r=o,l[168+(t|=0)>>2]=e,i=0|l[t+80>>2];t:do{if(0!=(0|i)&&(u=0|l[i+24>>2],0!=(0|u))&&(c=t+12|0,a=0|l[c>>2],0!=(0|a))&&(s=0|l[a+5584>>2],0!=(0|s)))if(a=0|l[i+16>>2]){if((0|l[s+4>>2])>>>0>e>>>0){t=0;do{if(l[u+(52*t|0)+40>>2]=e,(t=t+1|0)>>>0>=a>>>0){t=1;break t}}while((0|l[(0|l[5584+(0|l[c>>2])>>2])+(1080*t|0)+4>>2])>>>0>e>>>0)}mt(n,1,15074,r),t=0}else t=1;else t=0}while(0);return w=o,0|t}function ye(t,e,n){e|=0,n|=0;var i,o,s,c,u,h,f,d,p,m,g,y,v,b,_,A,x,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0;if(x=w,w=w+48|0,A=x+32|0,_=x+24|0,b=x+16|0,v=x+8|0,y=x,S=0|l[(d=204+(t|=0)|0)>>2],p=t+116|0,o=1==(0|(g=0|k(0|l[(m=t+112|0)>>2],0|l[p>>2]))),!g)return w=x,0|(V=1);s=t+200|0,c=t+12|0,u=t+164|0,h=t+8|0,f=S+20|0,i=S+24|0,H=0,B=0,S=0;t:for(;;){if((0|l[s>>2])!=(0|H)){V=5;break}if(z=H,H=H+1|0,U=0|k(0|l[p>>2],0|l[m>>2]),l[v>>2]=H,l[v+4>>2]=U,mt(n,4,15187,v),l[c>>2]=0,U=0|l[d>>2],l[U+12>>2]=l[(0|l[u>>2])+(5640*z|0)+5588>>2],l[h>>2]=0,!(0|en(U,0|l[s>>2],n)))break;if(M=0|l[d>>2],C=0|l[16+(0|l[M+24>>2])>>2])if(o){T=0|l[20+(0|l[l[f>>2]>>2])>>2],I=0|l[24+(0|l[i>>2])>>2],E=0;do{l[T+(52*E|0)+32>>2]=l[I+(52*E|0)+44>>2],l[T+(52*E|0)+36>>2]=0,E=E+1|0}while(E>>>0<C>>>0)}else{E=0;do{if(!(0|tn((0|l[20+(0|l[l[f>>2]>>2])>>2])+(52*E|0)|0))){V=14;break t}E=E+1|0,M=0|l[d>>2]}while(E>>>0<(0|l[16+(0|l[M+24>>2])>>2])>>>0)}if(U=0|sn(M),o)M=B;else{if(U>>>0>S>>>0){if(!(S=0|Wt(B,U))){V=20;break}M=S,S=U}else M=B;if(E=0|l[d>>2],T=0|l[(z=E+24|0)>>2],0|l[T+16>>2]){G=E+20|0,E=M,F=0;do{L=0|l[20+(0|l[l[G>>2]>>2])>>2],R=0|l[T+24>>2],W=((W=0|l[R+(52*F|0)+24>>2])>>>3)+(0!=(7&W|0)&1)|0,N=(C=0|l[L+(52*F|0)+8>>2])-(B=0|l[L+(52*F|0)>>2])|0,O=(P=0|l[L+(52*F|0)+12>>2])-(L=0|l[L+(52*F|0)+4>>2])|0,j=0|l[T>>2],Z=0|l[R+(52*F|0)>>2],I=0|l[R+(52*F|0)+4>>2],D=(Z+~j+(0|l[T+8>>2])|0)/(0|Z)|0,I=B-((j+-1+Z|0)/(0|Z)|0)+(0|k(D,L-(((0|l[T+4>>2])-1+I|0)/(0|I)|0)|0))|0,I=(0|l[R+(52*F|0)+44>>2])+(I<<2)|0;e:do{switch(1073741823&(3==(0|W)?4:W)|0){case 1:if(T=0==(0|N)|0==(0|O),0|l[R+(52*F|0)+32>>2]){if(T)break e;for(L=P+-1-L|0,P=E,T=I,I=0;;){for(C=0,B=P,R=T;r[B>>0]=l[R>>2],(0|(C=C+1|0))!=(0|N);)B=B+1|0,R=R+4|0;if((0|(I=I+1|0))==(0|O))break;P=P+N|0,T=T+(D<<2)|0}E=E+(N+(0|k(L,N)))|0;break e}if(T)break e;for(L=P+-1-L|0,R=0,P=E;;){for(T=0,C=P,B=I;r[C>>0]=l[B>>2],(0|(T=T+1|0))!=(0|N);)C=C+1|0,B=B+4|0;if((0|(R=R+1|0))==(0|O))break;P=P+N|0,I=I+(D<<2)|0}E=E+(N+(0|k(L,N)))|0;break e;case 2:if(T=0==(0|N)|0==(0|O),0|l[R+(52*F|0)+32>>2]){if(T)break e;for(L=(R=C-B<<1)+(0|k(P+-1-L|0,R))|0,R=E,P=0;;){for(T=R,C=0,B=I;a[T>>1]=l[B>>2],(0|(C=C+1|0))!=(0|N);)T=T+2|0,B=B+4|0;if((0|(P=P+1|0))==(0|O))break;R=R+(N<<1)|0,I=I+(D<<2)|0}E=E+L|0;break e}if(T)break e;for(L=(R=C-B<<1)+(0|k(P+-1-L|0,R))|0,R=E,P=0;;){for(T=0,C=R,B=I;a[C>>1]=l[B>>2],(0|(T=T+1|0))!=(0|N);)C=C+2|0,B=B+4|0;if((0|(P=P+1|0))==(0|O))break;R=R+(N<<1)|0,I=I+(D<<2)|0}E=E+L|0;break e;case 4:if(!(0==(0|N)|0==(0|O))){for(L=(R=C-B<<2)+(0|k(P+-1-L|0,R))|0,R=E,P=0;;){for(T=R,C=0,B=I;l[T>>2]=l[B>>2],(0|(C=C+1|0))!=(0|N);)T=T+4|0,B=B+4|0;if((0|(P=P+1|0))==(0|O))break;R=R+(N<<2)|0,I=I+(D<<2)|0}E=E+L|0}}}while(0);F=F+1|0,T=0|l[z>>2]}while(F>>>0<(0|l[T+16>>2])>>>0);E=0|l[d>>2]}if(!(0|ln(E,M,U))){V=61;break}}if(!(0|ve(t,e,n))){V=63;break}if(H>>>0>=g>>>0){V=65;break}B=M}if(5==(0|V))mt(n,1,15150,y);else{if(14==(0|V))return mt(n,1,15208,b),B?(Zt(B),w=x,0|(j=0)):(w=x,0|(j=0));if(20==(0|V))return 0|B&&Zt(B),mt(n,1,15246,_),w=x,0|(j=0);if(61==(0|V))return mt(n,1,15285,A),Zt(M),w=x,0|(j=0);if(63==(0|V))return M?(Zt(M),w=x,0|(j=0)):(w=x,0|(j=0));if(65==(0|V))return M?(Zt(M),w=x,0|(j=1)):(w=x,0|(j=1))}return B?(Zt(B),w=x,0|(j=0)):(w=x,0|(j=0))}function ve(t,e,n){e|=0,n|=0;var i,r,o,s,c,u,h,f,d,p,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,k=0,C=0,B=0,R=0,P=0,L=0;if(p=w,w=w+32|0,h=p+16|0,k=p+8|0,_=p,u=p+20|0,d=0|l[40+(t|=0)>>2],x=0|l[(P=t+36|0)>>2],b=0|l[(S=t+204|0)>>2],l[b+16>>2]=0,l[(o=t+8|0)>>2]=0,nt(x,65424,2),nt(x+2|0,10,2),nt(x+4|0,0|l[(f=t+200|0)>>2],2),nt(x+10|0,0|l[(s=t+12|0)>>2],1),nt(x+11|0,0|l[(0|l[(c=t+164|0)>>2])+(5640*(0|l[f>>2])|0)+5588>>2],1),l[u>>2]=12,g=x+12|0,m=d+-12|0,((0|a[(A=t+88|0)>>1])-3&65535)>=4&&(y=0|l[c>>2],v=0|l[f>>2],0!=(0|l[y+(5640*v|0)+420>>2]))?(l[u>>2]=0,be(0|l[16+(0|l[t+80>>2])>>2],y,v,g,u),y=12+(R=0|l[u>>2])|0,g=g+R|0,m=m-R|0):y=12,l[u>>2]=0,nt(g,65427,2),l[b+4>>2]=l[o>>2],l[b+8>>2]=l[s>>2],0|l[s>>2]||(l[840+(0|l[l[b+20>>2]>>2])>>2]=0),l[u>>2]=0,!(0|rn(b,0|l[f>>2],g+2|0,u,m+-4|0,0)))return mt(n,1,15332,_),w=p,0|(P=0);m=2+(0|l[u>>2])|0,l[u>>2]=m,nt(x+6|0,m=m+y|0,4),((0|a[A>>1])-3&65535)<4&&(nt(0|l[(R=t+28|0)>>2],0|l[f>>2],1),B=1+(0|l[R>>2])|0,l[R>>2]=B,nt(B,m,4),l[R>>2]=4+(0|l[R>>2])),y=x+m|0,R=d-m|0,i=0|l[S>>2],r=t+88|0,T=0|l[c>>2],A=0|_e(r,0,I=0|l[f>>2]),B=t+8|0,l[s>>2]=1+(0|l[s>>2]);t:do{if(A>>>0>1){for(x=i+4|0,S=i+8|0,M=i+20|0,E=t+28|0,b=y,g=R,m=0,_=1;l[B>>2]=_,l[u>>2]=0,nt(b,65424,2),nt(b+2|0,10,2),nt(b+4|0,0|l[f>>2],2),nt(b+10|0,0|l[s>>2],1),nt(b+11|0,0|l[(0|l[c>>2])+(5640*(0|l[f>>2])|0)+5588>>2],1),y=b+12|0,l[u>>2]=0,nt(y,65427,2),l[x>>2]=l[o>>2],l[S>>2]=l[s>>2],0|l[s>>2]||(l[840+(0|l[l[M>>2]>>2])>>2]=0),l[u>>2]=0,0|rn(i,0|l[f>>2],b+14|0,u,g+-16|0,0);){if(L=2+(v=0|l[u>>2])|0,l[u>>2]=L,y=y+L|0,m=m+12+L|0,g=g+-12+(-2-v)|0,nt(b+6|0,v=v+14|0,4),((0|a[r>>1])-3&65535)<4&&(nt(0|l[E>>2],0|l[f>>2],1),L=1+(0|l[E>>2])|0,l[E>>2]=L,nt(L,v,4),l[E>>2]=4+(0|l[E>>2])),l[s>>2]=1+(0|l[s>>2]),(_=_+1|0)>>>0>=A>>>0){C=12;break t}b=y}mt(n,1,15332,k)}else g=R,m=0,C=12}while(0);t:do{if(12==(0|C)){M=T+(5640*I|0)+420|0;e:do{if(0|l[M>>2]){E=i+16|0,T=i+4|0,I=i+8|0,k=i+20|0,S=t+28|0,x=1;n:for(;;){if(l[E>>2]=x,A=0|_e(r,x,0|l[f>>2]))for(_=0;;){if(l[B>>2]=_,l[u>>2]=0,nt(y,65424,2),nt(y+2|0,10,2),nt(y+4|0,0|l[f>>2],2),nt(y+10|0,0|l[s>>2],1),nt(y+11|0,0|l[(0|l[c>>2])+(5640*(0|l[f>>2])|0)+5588>>2],1),v=y+12|0,l[u>>2]=0,nt(v,65427,2),l[T>>2]=l[o>>2],l[I>>2]=l[s>>2],0|l[s>>2]||(l[840+(0|l[l[k>>2]>>2])>>2]=0),l[u>>2]=0,!(0|rn(i,0|l[f>>2],y+14|0,u,g+-16|0,0)))break n;if(b=2+(L=0|l[u>>2])|0,l[u>>2]=b,m=m+12+b|0,b=v+b|0,g=g+-12+(-2-L)|0,nt(y+6|0,v=L+14|0,4),((0|a[r>>1])-3&65535)<4&&(nt(0|l[S>>2],0|l[f>>2],1),L=1+(0|l[S>>2])|0,l[S>>2]=L,nt(L,v,4),l[S>>2]=4+(0|l[S>>2])),l[s>>2]=1+(0|l[s>>2]),(_=_+1|0)>>>0>=A>>>0){y=b;break}y=b}if((x=x+1|0)>>>0>(0|l[M>>2])>>>0)break e}mt(n,1,15332,h);break t}}while(0);return L=m-R+d|0,(0|ct(e,0|l[P>>2],L,n))!=(0|L)?(w=p,0|(L=0)):(l[f>>2]=1+(0|l[f>>2]),w=p,0|(L=1))}}while(0);return w=p,0|(L=0)}function be(t,e,n,i,r){t|=0,i|=0,r|=0;var o,a,s,c,u=0,h=0,f=0,d=0,p=0,m=0;if(u=0|l[(e|=0)+(5640*(n|=0)|0)+5584>>2],c=1+(0|l[e+(5640*n|0)+420>>2])|0,s=4+(h=0|k(c,5+((a=t>>>0<257?1:2)<<1)|0))|0,nt(i,65375,2),nt(i+2|0,h+2|0,2),c){for(h=e+(5640*n|0)+8|0,o=u+4|0,e=e+(5640*n|0)+424|0,n=0,u=i+4|0;nt(u,0|l[e>>2],1),nt(u=u+1|0,0|l[e+4>>2],a),nt(u=u+a|0,0|l[(p=e+8|0)>>2],2),nt(u=u+2|0,0|l[(f=e+12|0)>>2],1),nt(u=u+1|0,0|l[(i=e+16|0)>>2],a),nt(u=u+a|0,0|l[e+36>>2],1),m=0|l[p>>2],d=0|l[h>>2],l[p>>2]=(0|m)<(0|d)?m:d,p=0|l[f>>2],d=0|l[o>>2],l[f>>2]=(0|p)<(0|d)?p:d,f=0|l[i>>2],l[i>>2]=(0|f)<(0|t)?f:t,(0|(n=n+1|0))!=(0|c);)e=e+148|0,u=u+1|0;l[r>>2]=s}else l[r>>2]=s}function _e(t,e,n){e|=0,n|=0;var i,o,a=0,s=0,c=0,h=0,f=0,d=0;for(c=0|l[76+(t|=0)>>2],a=0|l[c+(5640*n|0)+4>>2],h=696;!(-1==(0|(f=0|l[h>>2]))|(0|f)==(0|a));)h=h+12|0;if(!(8&r[t+93>>0]))return 0|(t=1);switch(f=0|u[t+92>>0],s=c+(5640*n|0)+424+(148*e|0)+92|0,i=c+(5640*n|0)+424+(148*e|0)+88|0,o=c+(5640*n|0)+424+(148*e|0)+96|0,c=c+(5640*n|0)+424+(148*e|0)+84|0,0|(e=0|r[h+4>>0])){case 67:a=s,d=8;break;case 82:a=i,d=8;break;case 80:a=o,d=8;break;case 76:a=c,d=8;break;default:a=1}if(8==(0|d)&&(a=0|l[a>>2]),(0|f)!=(0|e)){switch(0|(n=0|r[h+5>>0])){case 67:e=s,d=16;break;case 82:e=i,d=16;break;case 80:e=o,d=16;break;case 76:e=c,d=16}if(16==(0|d)&&(a=0|k(0|l[e>>2],a)),(0|f)!=(0|n)){switch(0|(n=0|r[h+6>>0])){case 67:e=s,d=22;break;case 82:e=i,d=22;break;case 80:e=o,d=22;break;case 76:e=c,d=22}if(22==(0|d)&&(a=0|k(0|l[e>>2],a)),(0|f)!=(0|n)){switch(0|(e=0|r[h+7>>0])){case 67:d=28;break;case 82:s=i,d=28;break;case 80:s=o,d=28;break;case 76:s=c,d=28}if(28==(0|d)&&(a=0|k(0|l[s>>2],a)),(0|f)!=(0|e))return 0|(t=a);s=3}else s=2}else s=1}else s=0;return l[t+84>>2]=s,0|(t=a)}function we(t,e,n){e|=0,n|=0;var i,r=0,o=0,s=0,c=0;if(!(0|vn(0|l[(r=188+(t|=0)|0)>>2],30,n)))return 0|(c=0);if(((0|a[t+88>>1])-3&65535)<4&&0==(0|vn(0|l[r>>2],31,n)))return 0|(c=0);if(!(0|vn(0|l[r>>2],32,n)))return 0|(c=0);if(!(0|vn(0|l[r>>2],33,n)))return 0|(c=0);if(!(0|vn(0|l[r>>2],34,n)))return 0|(c=0);if(i=0|bn(c=0|l[r>>2]),r=0|_n(c),i)for(o=r,r=1,s=0;r=r?0!=(0|Qr[63&l[o>>2]](t,e,n)):0,r&=1,(0|(s=s+1|0))!=(0|i);)o=o+4|0;else r=1;return wn(c),0|(c=r)}function Ae(t,e,n,i){t|=0,e|=0,n|=0,i|=0;var r,o,s=0,c=0,u=0,h=0;if(o=w,w=w+16|0,s=0|bt(),l[(r=t+80|0)>>2]=s,!s)return mt(i,1,15352,o),w=o,0|(i=0);if(_t(n,s),0|(u=0|l[n+24>>2])&&0|(h=0|l[n+16>>2])){s=0;do{0|(c=0|l[(n=u+(52*s|0)+44|0)>>2])&&(l[(0|l[24+(0|l[r>>2])>>2])+(52*s|0)+44>>2]=c,l[n>>2]=0),s=s+1|0}while(s>>>0<h>>>0)}if(!(0|vn(0|l[(s=t+192|0)>>2],35,i)))return w=o,0|(i=0);if(!(0|vn(0|l[s>>2],36,i)))return w=o,0|(i=0);if(!(0|vn(0|l[s>>2],37,i)))return w=o,0|(i=0);if(h=0|bn(u=0|l[s>>2]),s=0|_n(u),h){for(n=1,c=0;n=n?0!=(0|Qr[63&l[s>>2]](t,e,i)):0,(0|(c=c+1|0))!=(0|h);)s=s+4|0,n&=1;if(wn(u),!n)return w=o,0|(i=0)}else wn(u);if(!(0|vn(0|l[(s=t+188|0)>>2],38,i)))return w=o,0|(i=0);if(!(0|vn(0|l[s>>2],39,i)))return w=o,0|(i=0);if(!(0|vn(0|l[s>>2],40,i)))return w=o,0|(i=0);if(!(0|vn(0|l[s>>2],41,i)))return w=o,0|(i=0);if(!(0|vn(0|l[s>>2],42,i)))return w=o,0|(i=0);if(!(0|vn(0|l[s>>2],43,i)))return w=o,0|(i=0);if(!(0|vn(0|l[s>>2],44,i)))return w=o,0|(i=0);if(((0|a[(n=t+88|0)>>1])-3&65535)<4){if(!(0|vn(0|l[s>>2],45,i)))return w=o,0|(i=0);if(4==(0|a[n>>1])&&0==(0|vn(0|l[s>>2],46,i)))return w=o,0|(i=0)}if(!(0|vn(0|l[s>>2],47,i)))return w=o,0|(i=0);if(0|l[t+108>>2]&&0==(0|vn(0|l[s>>2],48,i)))return w=o,0|(i=0);if(256&a[n>>1]&&0==(0|vn(0|l[s>>2],49,i)))return w=o,0|(i=0);if(0|l[t+196>>2]&&0==(0|vn(0|l[s>>2],50,i)))return w=o,0|(i=0);if(!(0|vn(0|l[s>>2],51,i)))return w=o,0|(i=0);if(!(0|vn(0|l[s>>2],52,i)))return w=o,0|(i=0);if(u=0|bn(h=0|l[s>>2]),s=0|_n(h),u)for(n=s,s=1,c=0;s=s?0!=(0|Qr[63&l[n>>2]](t,e,i)):0,s&=1,(0|(c=c+1|0))!=(0|u);)n=n+4|0;else s=1;return wn(h),w=o,0|(i=s)}function xe(t,e,n,i,r,o){n|=0,i|=0,r|=0,o|=0;var a,s,c,u,h=0,f=0;u=w,w=w+16|0,s=u+8|0,a=u,c=0|l[(t|=0)+(5640*(e|=0)|0)+5584>>2],e=0|l[c+(1080*n|0)+24>>2];do{if(1!=(0|e))if(h=(t=3*(0|l[c+(1080*n|0)+4>>2])|0)-2|0,e)f=7;else{if(t=t+-1|0,(0|l[r>>2])>>>0<t>>>0)return mt(o,1,15741,a),w=u,0|(r=0);if(nt(i,l[c+(1080*n|0)+804>>2]<<5,1),!h)break;e=0;do{nt(i=i+1|0,l[c+(1080*n|0)+28+(e<<3)>>2]<<3,1),e=e+1|0}while((0|e)!=(0|h))}else h=1,e=1,f=7}while(0);if(7==(0|f)){if(t=h<<1|1,(0|l[r>>2])>>>0<t>>>0)return mt(o,1,15741,s),w=u,0|(r=0);if(nt(i,(l[c+(1080*n|0)+804>>2]<<5)+e|0,1),h)for(i=i+1|0,e=0;nt(i,(l[c+(1080*n|0)+28+(e<<3)>>2]<<11)+(0|l[c+(1080*n|0)+28+(e<<3)+4>>2])|0,2),(0|(e=e+1|0))!=(0|h);)i=i+2|0}return l[r>>2]=(0|l[r>>2])-t,w=u,0|(r=1)}function Se(t,e,n,i,r){var o,a,s;if(n|=0,i|=0,r|=0,s=w,w=w+16|0,o=0|l[(t|=0)+(5640*(e|=0)|0)+5584>>2],(0|l[i>>2])>>>0<5)return mt(r,1,15813,s),w=s,0|(i=0);if(nt(n,(0|l[(a=o+4|0)>>2])-1|0,1),nt(n+1|0,(0|l[o+8>>2])-2|0,1),nt(n+2|0,(0|l[o+12>>2])-2|0,1),nt(n+3|0,0|l[o+16>>2],1),nt(n+4|0,0|l[o+20>>2],1),t=(0|l[i>>2])-5|0,l[i>>2]=t,!(1&l[o>>2]))return w=s,0|(i=1);if(t>>>0<(e=0|l[a>>2])>>>0)return mt(r,1,15813,s+8|0),w=s,0|(i=0);if(e){for(t=n+5|0,n=0;nt(t,(l[o+944+(n<<2)>>2]<<4)+(0|l[o+812+(n<<2)>>2])|0,1),!((n=n+1|0)>>>0>=(e=0|l[a>>2])>>>0);)t=t+1|0;t=0|l[i>>2]}else e=0;return l[i>>2]=t-e,w=s,0|(i=1)}function Me(t,e,n,i,r,o){e|=0,n|=0,i|=0,r|=0,o|=0;var a,s,c,u,h=0,f=0,d=0,p=0;if(u=w,w=w+48|0,c=u+40|0,p=u+32|0,s=u+24|0,a=u+16|0,h=u+8|0,(0|l[(f=200+(t|=0)|0)>>2])!=(0|e))return mt(o,1,15150,u),l[a>>2]=e,mt(o,1,16086,a),w=u,0;if(d=0|k(0|l[t+116>>2],0|l[t+112>>2]),l[h>>2]=e+1,l[h+4>>2]=d,mt(o,4,15187,h),l[t+12>>2]=0,h=0|l[(d=t+204|0)>>2],l[h+12>>2]=l[(0|l[t+164>>2])+(5640*e|0)+5588>>2],l[t+8>>2]=0,!(0|en(h,0|l[f>>2],o)))return l[a>>2]=e,mt(o,1,16086,a),w=u,0;h=0|l[d>>2];t:do{if(0|l[16+(0|l[h+24>>2])>>2]){for(f=0;0|tn((0|l[20+(0|l[l[h+20>>2]>>2])>>2])+(52*f|0)|0);)if(f=f+1|0,h=0|l[d>>2],f>>>0>=(0|l[16+(0|l[h+24>>2])>>2])>>>0)break t;return mt(o,1,15208,s),w=u,0|(p=0)}}while(0);return 0|ln(h,n,i)?0|ve(t,r,o)?(w=u,0|(p=1)):(l[c>>2]=e,mt(o,1,16143,c),w=u,0|(p=0)):(mt(o,1,15285,p),w=u,0|(p=0))}function Ee(t,e,n){t|=0,n|=0;var i,o,s,c,h,d,p,m,g,y=0,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,T=0;g=w,w=w+80|0,T=g+72|0,m=g+64|0,p=g+56|0,d=g+48|0,h=g+40|0,c=g+32|0,s=g+24|0,E=g+16|0,x=g+8|0,A=g,y=0|l[8+(e|=0)>>2];t:do{if(y){M=0|l[y>>2],S=0|a[y+4>>1],v=0|l[t+16>>2],0!=(0|(y=0|l[e+12>>2]))&&0!=(0|l[y+12>>2])&&(v=0|u[y+18>>0]);e:do{if(S<<16>>16){_=0;n:for(;;){if(v>>>0<=(b=0|f[M+(6*(e=65535&_)|0)>>1])>>>0){_=14;break}switch((e=0|a[M+(6*e|0)+4>>1])<<16>>16){case 0:case-1:break;default:if((e=(65535&e)-1|0)>>>0>=v>>>0){_=17;break n}}if((65535&(_=_+1<<16>>16))>=(65535&S)){_=8;break}}if(8==(0|_))for(;;){v=v+-1|0,e=0;do{if((0|v)==(0|f[M+(6*(65535&e)|0)>>1]))break;e=e+1<<16>>16}while((65535&e)<(65535&S));if(e<<16>>16==S<<16>>16)break e;if(!v)break t;_=8}else{if(14==(0|_))return l[A>>2]=b,l[A+4>>2]=v,mt(n,1,16331,A),w=g,0|(T=0);if(17==(0|_))return l[x>>2]=e,l[x+4>>2]=v,mt(n,1,16331,x),w=g,0|(T=0)}}else if(!v)break t}while(0);return mt(n,1,16368,E),w=g,0|(T=0)}y=0|l[e+12>>2]}while(0);if(!y)return w=g,0|(T=1);if(!(o=0|l[y+12>>2]))return w=g,0|(T=1);if(i=255&(S=0|r[y+18>>0]),E=S<<24>>24==0)y=1;else{_=t+16|0,y=1,b=0,e=0;do{e=0|f[o+(e<<2)>>1],(v=0|l[_>>2])>>>0<=e>>>0&&(l[s>>2]=e,l[s+4>>2]=v,mt(n,1,16331,s),y=0),e=65535&(b=b+1<<16>>16)}while(e>>>0<i>>>0)}if(!(M=0|Ut(i,4)))return mt(n,1,16401,c),w=g,0|(T=0);if(!E){A=0,x=0;do{b=255&(v=0|r[o+(x<<2)+3>>0]);do{if((255&v)<(255&S)){if(_=M+(b<<2)|0,e=0|r[o+(x<<2)+2>>0],0!=(0|l[_>>2])&e<<24>>24==1){l[d>>2]=b,mt(n,1,16474,d),y=0;break}if(e<<24>>24!=0|v<<24>>24==0){l[_>>2]=1;break}l[p>>2]=x,l[p+4>>2]=b,mt(n,1,16505,p),y=0;break}l[h>>2]=b,mt(n,1,16418,h),y=0}while(0);x=65535&(A=A+1<<16>>16)}while(x>>>0<i>>>0);if(!E){v=0,e=0;do{0==(0|l[M+(e<<2)>>2])&&0!=(0|r[o+(e<<2)+2>>0])&&(l[m>>2]=e,mt(n,1,16541,m),y=0),e=65535&(v=v+1<<16>>16)}while(e>>>0<i>>>0)}}if(!y)return Zt(M),w=g,0|(T=0);t:do{if(!(1!=(0|l[t+16>>2])|E)){for(e=0,y=0;e=e+1<<16>>16,0|l[M+(y<<2)>>2];)if((y=65535&e)>>>0>=i>>>0)break t;l[T>>2]=y,mt(n,2,16579,T),y=0,e=0;do{r[o+(e<<2)+2>>0]=1,r[o+(e<<2)+3>>0]=y,e=65535&(y=y+1<<16>>16)}while(e>>>0<i>>>0)}}while(0);return Zt(M),w=g,0|(T=1)}function Te(t,e){t|=0;var n,i,o,s,c,h,d,p,m=0,g=0,y=0,v=0,b=0,_=0,w=0,A=0;if(e=0|l[(p=12+(e|=0)|0)>>2],_=0|l[e+8>>2],w=0|l[e+4>>2],o=0|l[e>>2],i=0|l[e+12>>2],e=0|r[e+18>>0],c=0|l[(s=t+24|0)>>2],d=0|zt(52*(h=255&e)|0)){if(!(n=e<<24>>24==0)){v=0,b=0;do{if(e=0|a[i+(b<<2)>>1],0|r[i+(b<<2)+2>>0]){g=c+(52*(e&=65535)|0)|0,y=52+(m=d+(52*(0|u[i+(b<<2)+3>>0])|0)|0)|0;do{l[m>>2]=l[g>>2],m=m+4|0,g=g+4|0}while((0|m)<(0|y))}else{g=c+(52*(e&=65535)|0)|0,y=52+(m=d+(52*b|0)|0)|0;do{l[m>>2]=l[g>>2],m=m+4|0,g=g+4|0}while((0|m)<(0|y))}if(y=0|zt(0|k(l[c+(52*e|0)+8>>2]<<2,0|l[c+(52*e|0)+12>>2])),l[d+(52*b|0)+44>>2]=y,!y){A=7;break}l[d+(52*b|0)+24>>2]=u[_+b>>0],l[d+(52*b|0)+32>>2]=u[w+b>>0],b=65535&(v=v+1<<16>>16)}while(b>>>0<h>>>0);if(7==(0|A))return void Zt(d);if(w=(_=0|f[16+(0|l[p>>2])>>1])-1|0,!n){y=0,e=0;do{if(v=0|l[c+(52*(0|f[i+(e<<2)>>1])|0)+44>>2],g=0|u[i+(e<<2)+3>>0],b=0|k(0|l[d+(52*g|0)+12>>2],0|l[d+(52*g|0)+8>>2]),0|r[i+(e<<2)+2>>0]){if(m=0|l[d+(52*g|0)+44>>2],0|b){e=0;do{A=0|l[v+(e<<2)>>2],A=o+((0|k((0|A)<0?0:(0|A)<(0|_)?A:w,h))+g<<2)|0,l[m+(e<<2)>>2]=l[A>>2],e=e+1|0}while((0|e)!=(0|b))}}else if(m=0|l[d+(52*e|0)+44>>2],0|b){e=0;do{l[m+(e<<2)>>2]=l[v+(e<<2)>>2],e=e+1|0}while((0|e)!=(0|b))}e=65535&(y=y+1<<16>>16)}while(e>>>0<h>>>0)}}if(0|(y=0|l[(g=t+16|0)>>2])){m=0,e=0;do{0|(e=0|l[c+(52*e|0)+44>>2])&&Zt(e),e=65535&(m=m+1<<16>>16)}while(y>>>0>e>>>0)}Zt(c),l[s>>2]=d,l[g>>2]=h,Zt(0|l[4+(0|l[p>>2])>>2]),Zt(0|l[8+(0|l[p>>2])>>2]),Zt(0|l[l[p>>2]>>2]),e=0|l[p>>2],(m=0|l[e+12>>2])&&(Zt(m),e=0|l[p>>2]),Zt(e),l[p>>2]=0}}function Ie(t,e,n){t|=0,n|=0;var i,r,o,s,c,u,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,T=0;if(u=w,w=w+80|0,s=u+8|0,o=u,r=u+16|0,h=0|l[(c=8+(e|=0)|0)>>2],e=0|l[h>>2],(i=0|a[h+4>>1])<<16>>16){for(E=t+16|0,v=t+24|0,M=65535&i,x=1,S=0;;){_=65535&(b=0|a[e+(6*S|0)>>1]),t=0|l[E>>2];t:do{if(t>>>0>_>>>0){switch((h=0|a[e+(6*S|0)+4>>1])<<16>>16){case-1:case 0:a[(0|l[v>>2])+(52*_|0)+48>>1]=0|a[e+(6*S|0)+2>>1];break t}if(A=65535+(65535&h)&65535,t>>>0<=(m=65535&(y=h+-1<<16>>16))>>>0){l[s>>2]=m,l[s+4>>2]=t,mt(n,2,16290,s);break}if(g=e+(6*S|0)+2|0,b<<16>>16!=y<<16>>16&&0==(0|a[g>>1])){d=t=(h=0|l[v>>2])+(52*_|0)|0,p=(f=r)+52|0;do{l[f>>2]=l[d>>2],f=f+4|0,d=d+4|0}while((0|f)<(0|p));d=h+(52*m|0)|0,p=(f=t)+52|0;do{l[f>>2]=l[d>>2],f=f+4|0,d=d+4|0}while((0|f)<(0|p));d=r,p=52+(f=(0|l[v>>2])+(52*m|0)|0)|0;do{l[f>>2]=l[d>>2],f=f+4|0,d=d+4|0}while((0|f)<(0|p));if((65535&i)>(S+1&65535)){f=x;do{(h=0|a[(t=e+(6*f|0)|0)>>1])<<16>>16!=b<<16>>16?h<<16>>16==y<<16>>16&&(h=b,T=14):(h=A,T=14),14==(0|T)&&(T=0,a[t>>1]=h),f=f+1|0}while(i<<16>>16!=(65535&f)<<16>>16)}}a[(0|l[v>>2])+(52*_|0)+48>>1]=0|a[g>>1]}else l[o>>2]=_,l[o+4>>2]=t,mt(n,2,16250,o)}while(0);if((0|(S=S+1|0))==(0|M))break;x=x+1|0}h=e=0|l[c>>2],e=0|l[e>>2]}return e?(Zt(e),Zt(T=0|l[c>>2]),l[c>>2]=0,void(w=u)):(Zt(T=h),l[c>>2]=0,void(w=u))}function ke(t){var e=0,n=0,i=0;(t|=0)&&(Xt(0|l[t>>2]),l[t>>2]=0,0|(n=0|l[(e=t+72|0)>>2])&&(Zt(n),l[e>>2]=0),0|(n=0|l[(e=t+68|0)>>2])&&(Zt(n),l[e>>2]=0),0|(e=0|l[(n=t+108|0)>>2])&&(Zt(e),l[n>>2]=0),0|(e=0|l[(i=t+116|0)>>2])&&((n=0|l[e>>2])&&(Zt(n),e=0|l[i>>2],l[e>>2]=0),Zt(e),l[i>>2]=0),0|(e=0|l[(i=t+120|0)>>2])&&((n=0|l[e+12>>2])&&(Zt(n),e=0|l[i>>2],l[e+12>>2]=0),(n=0|l[e+4>>2])&&(Zt(n),e=0|l[i>>2],l[e+4>>2]=0),(n=0|l[e+8>>2])&&(Zt(n),e=0|l[i>>2],l[e+8>>2]=0),(n=0|l[e>>2])&&(Zt(n),e=0|l[i>>2],l[e>>2]=0),Zt(e),l[i>>2]=0),0|(n=0|l[(e=t+4|0)>>2])&&(yn(n),l[e>>2]=0),0|(n=0|l[(e=t+8|0)>>2])&&(yn(n),l[e>>2]=0),Zt(t))}function Ce(t){t|=0;var e=0;return(e=0|Ut(1,136))?(t=t?0|ae():0|Yt(),l[e>>2]=t,t?(l[(t=e+108|0)>>2]=0,l[t+4>>2]=0,l[t+8>>2]=0,l[t+12>>2]=0,r[t+16>>0]=0,t=0|gn(),l[e+4>>2]=t,t?(t=0|gn(),l[e+8>>2]=t,0|t?0|e:(ke(e),0|(e=0))):(ke(e),0|(e=0))):(ke(e),0|(e=0))):0|e}function Be(t,e,n,i){t|=0,e|=0,n|=0;var r=0,o=0,a=0,s=0,c=0,u=0,h=0;if(i|=0){r=0;do{s=0|l[(h=t+(r<<2)|0)>>2],a=0|l[(c=e+(r<<2)|0)>>2],u=0|l[(o=n+(r<<2)|0)>>2],l[h>>2]=(a<<1)+s+u>>2,l[c>>2]=u-a,l[o>>2]=s-a,r=r+1|0}while((0|r)!=(0|i))}}function Re(t,e,n,i){t|=0,e|=0,n|=0;var r=0,o=0,a=0,s=0,c=0,u=0,h=0;if(i|=0){r=0;do{u=t+(r<<2)|0,a=0|l[(c=e+(r<<2)|0)>>2],h=0|l[(o=n+(r<<2)|0)>>2],s=(0|l[u>>2])-(h+a>>2)|0,l[u>>2]=s+h,l[c>>2]=s,l[o>>2]=s+a,r=r+1|0}while((0|r)!=(0|i))}}function Pe(t,e,n,i){t|=0,e|=0,n|=0;var r=0,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0;if(i|=0){r=0;do{_=0|l[(p=t+(r<<2)|0)>>2],b=0|l[(u=e+(r<<2)|0)>>2],v=0|l[(o=n+(r<<2)|0)>>2],g=0|Er(0|(g=0|br(0|(g=0|vr(0|_,0|(c=((0|_)<0)<<31>>31),2449,0)),0|S,4096,0)),0|S,13),y=0|Er(0|(y=0|br(0|(y=0|vr(0|b,0|(s=((0|b)<0)<<31>>31),4809,0)),0|S,4096,0)),0|S,13),m=0|Er(0|(m=0|br(0|(m=0|vr(0|v,0|(a=((0|v)<0)<<31>>31),934,0)),0|S,4096,0)),0|S,13),h=0|Er(0|(h=0|br(0|(h=0|vr(0|_,0|c,1382,0)),0|S,4096,0)),0|S,13),f=0|Er(0|(f=0|br(0|(f=0|vr(0|b,0|s,2714,0)),0|S,4096,0)),0|S,13),d=0|Er(0|(d=0|br(0|(d=0|Tr(0|v,0|a,12)),0|S,4096,0)),0|S,13),c=0|Er(0|(c=0|br(0|(c=0|Tr(0|_,0|c,12)),0|S,4096,0)),0|S,13),s=0|Er(0|(s=0|br(0|(s=0|vr(0|b,0|s,3430,0)),0|S,4096,0)),0|S,13),a=0|Er(0|(a=0|br(0|(a=0|vr(0|v,0|a,666,0)),0|S,4096,0)),0|S,13),l[p>>2]=y+g+m,l[u>>2]=d-(f+h),l[o>>2]=c-s-a,r=r+1|0}while((0|r)!=(0|i))}}function Le(t,e,n,i){t|=0,e|=0,n|=0;var r=0,o=0,a=0,s=0,l=0,c=0,u=0;if(i|=0){r=0;do{s=+m[(u=t+(r<<2)|0)>>2],a=+m[(l=e+(r<<2)|0)>>2],c=+m[(o=n+(r<<2)|0)>>2],m[u>>2]=s+1.4019999504089355*c,m[l>>2]=s-.3441300094127655*a-.714139997959137*c,m[o>>2]=s+1.7719999551773071*a,r=r+1|0}while((0|r)!=(0|i))}}function De(t,e,n,i,r){t|=0,e|=0,n|=0,r|=0;var o,a,s=0,c=0,u=0,h=0,f=0,d=0,p=0,g=0;if(!(a=0|zt((s=0|k(i|=0,i))+i<<2)))return 0|(e=0);if(o=a+(i<<2)|0,0|s)for(r=t,t=0;l[o+(t<<2)>>2]=~~(8192*+m[r>>2]),(0|(t=t+1|0))!=(0|s);)r=r+4|0;t:do{if(0|e){if(i)d=0;else for(r=0;;)if((0|(r=r+1|0))==(0|e))break t;do{r=0;do{l[a+(r<<2)>>2]=l[l[n+(r<<2)>>2]>>2],r=r+1|0}while((0|r)!=(0|i));for(t=o,s=0;;){for(h=0|l[(u=n+(s<<2)|0)>>2],l[h>>2]=0,r=0,c=t,f=0;p=0|l[c>>2],f=f+(p=0|Er(0|(p=0|br(0|(p=0|vr(0|(g=0|l[a+(r<<2)>>2]),((0|g)<0)<<31>>31|0,0|p,((0|p)<0)<<31>>31|0)),0|S,4096,0)),0|S,13))|0,l[h>>2]=f,(0|(r=r+1|0))!=(0|i);)c=c+4|0;if(l[u>>2]=h+4,(0|(s=s+1|0))==(0|i))break;t=t+(i<<2)|0}d=d+1|0}while((0|d)!=(0|e))}}while(0);return Zt(a),0|(g=1)}function Ne(t,e,n,i,r){t|=0,e|=0,n|=0,r|=0;var o,a,s=0,c=0,u=0,h=0,f=0,d=0;if(!(a=0|zt((i|=0)<<3)))return 0|(e=0);o=a+(i<<2)|0;t:do{if(0|e){if(i)d=0;else for(r=0;;)if((0|(r=r+1|0))==(0|e))break t;do{r=0;do{l[a+(r<<2)>>2]=l[l[n+(r<<2)>>2]>>2],r=r+1|0}while((0|r)!=(0|i));for(s=t,u=0;;){for(m[(h=o+(u<<2)|0)>>2]=0,r=0,c=s,f=0;f+=+m[c>>2]*+m[a+(r<<2)>>2],m[h>>2]=f,(0|(r=r+1|0))!=(0|i);)c=c+4|0;if(h=0|l[(c=n+(u<<2)|0)>>2],l[c>>2]=h+4,m[h>>2]=f,(0|(u=u+1|0))==(0|i))break;s=s+(i<<2)|0}d=d+1|0}while((0|d)!=(0|e))}}while(0);return Zt(a),0|(e=1)}function Oe(t,e,n){t|=0,n|=0;var i=0,r=0,o=0,a=0,s=0,l=0;if(e|=0){o=0;do{for(y[(s=t+(o<<3)|0)>>3]=0,i=0,r=o,a=0;a+=(l=+m[n+(r<<2)>>2])*l,(0|(i=i+1|0))!=(0|e);)r=r+e|0;l=+E(+a),y[s>>3]=l,o=o+1|0}while((0|o)!=(0|e))}}function Fe(t,e,n){t|=0,n|=0;var i,o,a,s,c,u,h,f,d,p,m,g,y=0,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0;if(g=w,w=w+32|0,E=g+28|0,x=g+24|0,T=g+20|0,i=g+16|0,I=g+12|0,o=g+8|0,S=g+4|0,A=g,m=0|l[(y=76+(e|=0)|0)>>2],P=1+(0|l[(h=m+(5640*n|0)+420|0)>>2])|0,!(f=0|zt(528*(0|l[(M=t+16|0)>>2])|0)))return w=g,0|(P=0);if(!(d=0|zt(l[M>>2]<<2)))return Zt(f),w=g,0|(P=0);if(!(y=0|Ge(t,0|l[y>>2],n)))return Zt(f),Zt(d),w=g,0|(P=0);if(0|(_=0|l[M>>2]))for(v=f,b=0;l[d+(b<<2)>>2]=v,!((b=b+1|0)>>>0>=_>>>0);)v=v+528|0;if(ze(t,e,n,T,i,I,o,S,A,x,E,d),p=0|l[x>>2],s=0|k(0|l[M>>2],p),u=0|l[E>>2],a=0|k(u,s),l[(b=y+4|0)>>2]=0,a>>>0<=(4294967295/((v=1+(0|l[(c=m+(5640*n|0)+8|0)>>2])|0)>>>0)|0)>>>0&&(R=0|Ut(0|k(v,a),2),l[b>>2]=R,0|R)){if(v=0|l[y+196>>2],R=0|l[t+24>>2],B=0|l[T>>2],l[y+200>>2]=B,C=0|l[I>>2],l[y+204>>2]=C,I=0|l[i>>2],l[y+208>>2]=I,T=0|l[o>>2],l[y+212>>2]=T,l[y+20>>2]=1,l[y+16>>2]=p,l[y+12>>2]=s,l[y+8>>2]=a,0|(M=0|l[y+192>>2]))for(S=R,e=v,A=0;;){if(v=0|l[e+12>>2],b=0|l[d+(A<<2)>>2],l[e>>2]=l[S>>2],l[e+4>>2]=l[S+4>>2],0|(x=0|l[e+8>>2]))for(_=0;l[v>>2]=l[b>>2],l[v+4>>2]=l[b+4>>2],l[v+8>>2]=l[b+8>>2],l[v+12>>2]=l[b+12>>2],!((_=_+1|0)>>>0>=x>>>0);)v=v+16|0,b=b+16|0;if((A=A+1|0)>>>0>=M>>>0)break;S=S+52|0,e=e+16|0}if(P>>>0>1){S=1,E=y;do{if(v=0|l[E+428>>2],l[E+432>>2]=B,l[E+436>>2]=C,l[E+440>>2]=I,l[E+444>>2]=T,l[E+252>>2]=1,l[E+248>>2]=p,l[E+244>>2]=s,l[E+240>>2]=a,0|(t=0|l[E+424>>2]))for(M=R,A=0;;){if(b=0|l[v+12>>2],_=0|l[d+(A<<2)>>2],l[v>>2]=l[M>>2],l[v+4>>2]=l[M+4>>2],0|(x=0|l[v+8>>2]))for(e=0;l[b>>2]=l[_>>2],l[b+4>>2]=l[_+4>>2],l[b+8>>2]=l[_+8>>2],l[b+12>>2]=l[_+12>>2],!((e=e+1|0)>>>0>=x>>>0);)b=b+16|0,_=_+16|0;if((A=A+1|0)>>>0>=t>>>0)break;M=M+52|0,v=v+16|0}l[E+236>>2]=l[E+4>>2],E=E+232|0,S=S+1|0}while((0|S)!=(0|P))}if(Zt(f),Zt(d),v=0==(0|(A=1+(0|l[h>>2])|0)),4&r[m+(5640*n|0)+5636>>0]){if(v)return w=g,0|(P=y);for(v=m+(5640*n|0)+424|0,b=y,_=0;l[b+80>>2]=l[v+36>>2],l[b+40>>2]=1,l[b+44>>2]=l[v>>2],l[b+48>>2]=l[v+4>>2],l[b+64>>2]=0,l[b+68>>2]=0,l[b+56>>2]=l[v+12>>2],l[b+60>>2]=l[v+16>>2],l[b+52>>2]=l[v+8>>2],l[b+72>>2]=p,(0|(_=_+1|0))!=(0|A);)v=v+148|0,b=b+232|0;return w=g,0|y}if(v)return w=g,0|(P=y);for(e=0|l[m+(5640*n|0)+4>>2],_=0|l[c>>2],v=0,b=y;l[b+80>>2]=e,l[b+40>>2]=1,l[b+44>>2]=0,l[b+48>>2]=0,l[b+64>>2]=0,l[b+68>>2]=0,l[b+56>>2]=u,l[b+60>>2]=l[b+192>>2],l[b+52>>2]=_,l[b+72>>2]=p,(0|(v=v+1|0))!=(0|A);)b=b+232|0;return w=g,0|y}if(Zt(f),Zt(d),0|(v=0|l[b>>2])&&(Zt(v),l[b>>2]=0),0|P)for(S=y,M=0;;){if(0|(v=0|l[(E=S+196|0)>>2])){if(b=0|l[(x=S+192|0)>>2]){for(A=0;(e=0|l[(_=v+12|0)>>2])&&(Zt(e),l[_>>2]=0,b=0|l[x>>2]),!((A=A+1|0)>>>0>=b>>>0);)v=v+16|0;v=0|l[E>>2]}Zt(v),l[E>>2]=0}if((0|(M=M+1|0))==(0|P))break;S=S+232|0}return Zt(y),w=g,0|(P=0)}function Ge(t,e,n){t|=0;var i,r=0,o=0,a=0,s=0,c=0,u=0,h=0;if(!(i=0|Ut(h=1+(0|l[(e|=0)+(5640*(n|=0)|0)+420>>2])|0,232)))return 0|(h=0);if(!h)return 0|(h=i);s=e+(5640*n|0)+5584|0,o=i,a=0,t=0|l[(c=t+16|0)>>2];t:for(;;){if(e=0|Ut(t,16),l[(r=o+196|0)>>2]=e,!e){t=5;break}u=0|l[c>>2],l[o+192>>2]=u;e:do{if(u){if(t=4+(0|l[s>>2])|0,u=0|Ut(0|l[t>>2],16),l[e+12>>2]=u,!u){t=19;break t}for(n=0;;){if(l[e+(n<<4)+8>>2]=l[t>>2],(n=n+1|0)>>>0>=(t=0|l[c>>2])>>>0)break e;if(e=0|l[r>>2],t=(0|l[s>>2])+(1080*n|0)+4|0,u=0|Ut(0|l[t>>2],16),l[e+(n<<4)+12>>2]=u,!u){t=19;break t}}}else t=0}while(0);if((a=a+1|0)>>>0>=h>>>0){t=33;break}o=o+232|0}if(5==(0|t)){for((e=0|l[(t=i+4|0)>>2])?(Zt(e),l[t>>2]=0,s=i,c=0):(s=i,c=0);;){if(0|(t=0|l[(u=s+196|0)>>2])){if(e=0|l[(a=s+192|0)>>2]){for(o=0;(r=0|l[(n=t+12|0)>>2])&&(Zt(r),l[n>>2]=0,e=0|l[a>>2]),!((o=o+1|0)>>>0>=e>>>0);)t=t+16|0;t=0|l[u>>2]}Zt(t),l[u>>2]=0}if((0|(c=c+1|0))==(0|h))break;s=s+232|0}return Zt(i),0|(h=0)}if(19==(0|t)){for((e=0|l[(t=i+4|0)>>2])?(Zt(e),l[t>>2]=0,s=i,c=0):(s=i,c=0);;){if(0|(t=0|l[(u=s+196|0)>>2])){if(e=0|l[(a=s+192|0)>>2]){for(o=0;(r=0|l[(n=t+12|0)>>2])&&(Zt(r),l[n>>2]=0,e=0|l[a>>2]),!((o=o+1|0)>>>0>=e>>>0);)t=t+16|0;t=0|l[u>>2]}Zt(t),l[u>>2]=0}if((0|(c=c+1|0))==(0|h))break;s=s+232|0}return Zt(i),0|(h=0)}return 33==(0|t)?0|i:0}function ze(t,e,n,i,r,o,a,s,c,u,h,f){t|=0,n|=0,i|=0,r|=0,o|=0,a|=0,s|=0,c|=0,u|=0,h|=0,f|=0;var d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,w=0,A=0,x=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0;if(d=0|l[(0|l[76+(e|=0)>>2])+(5640*n|0)+5584>>2],p=0|l[t+24>>2],I=0|l[e+24>>2],T=(0|k(0|l[(C=e+12|0)>>2],(n>>>0)%(I>>>0)|0))+(0|l[e+4>>2])|0,E=0|l[t>>2],l[i>>2]=T>>>0>E>>>0?T:E,T=0|br(0|l[C>>2],0,0|T,0),T|=0-S,C=0|l[t+8>>2],l[r>>2]=T>>>0<C>>>0?T:C,I=(0|k(0|l[(C=e+16|0)>>2],(n>>>0)/(I>>>0)|0))+(0|l[e+8>>2])|0,T=0|l[t+4>>2],l[o>>2]=I>>>0>T>>>0?I:T,I=0|br(0|l[C>>2],0,0|I,0),I|=0-S,C=0|l[t+12>>2],l[a>>2]=I>>>0<C>>>0?I:C,l[u>>2]=0,l[h>>2]=0,l[s>>2]=2147483647,l[c>>2]=2147483647,0|l[(C=t+16|0)>>2])for(E=0;;){if(_=0|l[f+(E<<2)>>2],m=0|l[p>>2],e=((0|l[i>>2])-1+m|0)/(0|m)|0,g=0|l[(T=p+4|0)>>2],n=((0|l[o>>2])-1+g|0)/(0|g)|0,m=(m+-1+(0|l[r>>2])|0)/(0|m)|0,g=(g+-1+(0|l[a>>2])|0)/(0|g)|0,(t=0|l[(I=d+4|0)>>2])>>>0>(0|l[h>>2])>>>0&&(l[h>>2]=t,t=0|l[I>>2]),0|t)for(x=0|br(0|e,((0|e)<0)<<31>>31|0,-1,-1),M=S,w=0|br(0|n,((0|n)<0)<<31>>31|0,-1,-1),A=S,b=0|br(0|m,((0|m)<0)<<31>>31|0,-1,-1),v=S,g=0|br(0|g,((0|g)<0)<<31>>31|0,-1,-1),y=S,m=0,n=_;t=t+-1|0,e=0|l[d+812+(m<<2)>>2],_=0|l[d+944+(m<<2)>>2],l[n>>2]=e,l[n+4>>2]=_,P=l[p>>2]<<e+t,O=l[T>>2]<<_+t,L=0|l[s>>2],l[s>>2]=(0|L)<(0|P)?L:P,P=0|l[c>>2],l[c>>2]=(0|P)<(0|O)?P:O,L=0|Mr(0|(L=0|br(0|x,0|M,0|(O=0|Tr(1,0,0|t)),0|(P=S))),0|S,0|t),B=0|Mr(0|(B=0|br(0|w,0|A,0|O,0|P)),0|S,0|t),N=0|Mr(0|(N=0|br(0|b,0|v,0|O,0|P)),0|S,0|t),P=0|Mr(0|(P=0|br(0|g,0|y,0|O,0|P)),0|S,0|t),O=0|Tr(1,0,0|e),D=S,D=0|Mr(0|(D=0|br(0|(R=0|br(0|N,((0|N)<0)<<31>>31|0,-1,-1)),0|S,0|O,0|D)),0|S,0|e),O=0|Tr(1,0,0|_),R=S,R=0|Mr(0|(R=0|br(0|br(0|P,((0|P)<0)<<31>>31|0,-1,-1),0|S,0|O,0|R)),0|S,0|_),e=(0|L)==(0|N)?0:(D<<e)-(L>>e<<e)>>e,_=(0|B)==(0|P)?0:(R<<_)-(B>>_<<_)>>_,l[n+8>>2]=e,l[n+12>>2]=_,(e=0|k(_,e))>>>0>(0|l[u>>2])>>>0&&(l[u>>2]=e),!((m=m+1|0)>>>0>=(0|l[I>>2])>>>0);)n=n+16|0;if((E=E+1|0)>>>0>=(0|l[C>>2])>>>0)break;d=d+1080|0,p=p+52|0}}function Ue(t,e){e|=0;var n=0,i=0,r=0,o=0,a=0,s=0,c=0,u=0,h=0;if(t|=0){if(0|(i=0|l[(n=t+4|0)>>2])&&(Zt(i),l[n>>2]=0),0|e)for(c=t,u=0;;){if(0|(n=0|l[(h=c+196|0)>>2])){if(i=0|l[(s=c+192|0)>>2]){for(a=0;(o=0|l[(r=n+12|0)>>2])&&(Zt(o),l[r>>2]=0,i=0|l[s>>2]),!((a=a+1|0)>>>0>=i>>>0);)n=n+16|0;n=0|l[h>>2]}Zt(n),l[h>>2]=0}if((0|(u=u+1|0))==(0|e))break;c=c+232|0}Zt(t)}}function He(t,e,n,i){t|=0,n|=0,i|=0;var o,s,c,h,f,d,p,m,g,y,v,b,_,A,x,S,M,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0;if(M=w,w=w+32|0,B=M+28|0,C=M+24|0,R=M+20|0,L=M+16|0,P=M+12|0,D=M+8|0,N=M+4|0,s=M,y=0|l[(A=76+(e|=0)|0)>>2],F=1+(0|l[y+(5640*n|0)+420>>2])|0,!(v=0|zt(528*(0|l[(_=t+16|0)>>2])|0)))return w=M,0|(F=0);if(!(b=0|zt(l[_>>2]<<2)))return Zt(v),w=M,0|(F=0);if(!(o=0|Ge(t,0|l[A>>2],n)))return Zt(v),Zt(b),w=M,0|(F=0);if(0|(I=0|l[_>>2]))for(E=v,T=0;l[b+(T<<2)>>2]=E,!((T=T+1|0)>>>0>=I>>>0);)E=E+528|0;if(ze(t,e,n,R,L,P,D,N,s,C,B,b),S=0|l[C>>2],f=0|k(0|l[_>>2],S),x=0|l[B>>2],h=0|k(x,f),r[o>>0]=(0|u[e+93>>0])>>>3&1,O=0|Ut(0|k(0|l[y+(5640*n|0)+8>>2],h),2),l[(T=o+4|0)>>2]=O,!O){if(Zt(v),Zt(b),0|(E=0|l[T>>2])&&(Zt(E),l[T>>2]=0),0|F)for(R=o,P=0;;){if(0|(E=0|l[(L=R+196|0)>>2])){if(T=0|l[(t=R+192|0)>>2]){for(B=0;(C=0|l[(I=E+12|0)>>2])&&(Zt(C),l[I>>2]=0,T=0|l[t>>2]),!((B=B+1|0)>>>0>=T>>>0);)E=E+16|0;E=0|l[L>>2]}Zt(E),l[L>>2]=0}if((0|(P=P+1|0))==(0|F))break;R=R+232|0}return Zt(o),w=M,0|(F=0)}if(C=0|l[o+196>>2],c=0|l[t+24>>2],O=0|l[R>>2],l[o+200>>2]=O,g=0|l[P>>2],l[o+204>>2]=g,m=0|l[L>>2],l[o+208>>2]=m,p=0|l[D>>2],l[o+212>>2]=p,d=0|l[N>>2],l[o+224>>2]=d,N=0|l[s>>2],l[o+228>>2]=N,l[o+20>>2]=1,l[o+16>>2]=S,l[o+12>>2]=f,l[o+8>>2]=h,0|(P=0|l[o+192>>2]))for(R=c,B=0;;){if(E=0|l[C+12>>2],T=0|l[b+(B<<2)>>2],l[C>>2]=l[R>>2],l[C+4>>2]=l[R+4>>2],0|(t=0|l[C+8>>2]))for(I=0;l[E>>2]=l[T>>2],l[E+4>>2]=l[T+4>>2],l[E+8>>2]=l[T+8>>2],l[E+12>>2]=l[T+12>>2],!((I=I+1|0)>>>0>=t>>>0);)E=E+16|0,T=T+16|0;if((B=B+1|0)>>>0>=P>>>0)break;R=R+52|0,C=C+16|0}if(F>>>0>1){R=1,L=o;do{if(E=0|l[L+428>>2],l[L+432>>2]=O,l[L+436>>2]=g,l[L+440>>2]=m,l[L+444>>2]=p,l[L+456>>2]=d,l[L+460>>2]=N,l[L+252>>2]=1,l[L+248>>2]=S,l[L+244>>2]=f,l[L+240>>2]=h,0|(D=0|l[L+424>>2]))for(P=c,B=0;;){if(T=0|l[E+12>>2],I=0|l[b+(B<<2)>>2],l[E>>2]=l[P>>2],l[E+4>>2]=l[P+4>>2],0|(t=0|l[E+8>>2]))for(C=0;l[T>>2]=l[I>>2],l[T+4>>2]=l[I+4>>2],l[T+8>>2]=l[I+8>>2],l[T+12>>2]=l[I+12>>2],!((C=C+1|0)>>>0>=t>>>0);)T=T+16|0,I=I+16|0;if((B=B+1|0)>>>0>=D>>>0)break;P=P+52|0,E=E+16|0}l[L+236>>2]=l[L+4>>2],L=L+232|0,R=R+1|0}while((0|R)!=(0|F))}Zt(v),Zt(b);do{if(4&r[y+(5640*n|0)+5636>>0]){if((65535&(E=0|a[e>>1]))>2){if(!(1==(0|i)|(65535&E)<7))break}else if(1!=(0|i))break;return Ve(0|l[A>>2],n,O,m,g,p,S,d,N),w=M,0|(F=o)}}while(0);if(t=0|l[_>>2],E=0|l[A>>2],!(I=1+(0|l[E+(5640*n|0)+420>>2])|0))return w=M,0|(F=o);for(C=0|l[E+(5640*n|0)+8>>2],B=0|l[E+(5640*n|0)+4>>2],T=0,E=E+(5640*n|0)+424|0;l[E+76>>2]=0,l[E+92>>2]=t,l[E+72>>2]=0,l[E+88>>2]=x,l[E+68>>2]=0,l[E+84>>2]=C,l[E+36>>2]=B,l[E+80>>2]=0,l[E+96>>2]=S,l[E+100>>2]=O,l[E+104>>2]=m,l[E+108>>2]=g,l[E+112>>2]=p,l[E+116>>2]=d,l[E+120>>2]=N,(0|(T=T+1|0))!=(0|I);)E=E+148|0;return w=M,0|o}function Ve(t,e,n,i,r,o,a,s,c){n|=0,i|=0,r|=0,o|=0,a|=0,s|=0,c|=0;var u,h=0;if(u=1+(0|l[(t|=0)+(5640*(e|=0)|0)+420>>2])|0,l[t+(5640*e|0)+500>>2]=l[t+(5640*e|0)+428>>2],l[t+(5640*e|0)+516>>2]=l[t+(5640*e|0)+440>>2],l[t+(5640*e|0)+496>>2]=l[t+(5640*e|0)+424>>2],l[t+(5640*e|0)+512>>2]=l[t+(5640*e|0)+436>>2],l[t+(5640*e|0)+508>>2]=l[t+(5640*e|0)+432>>2],l[t+(5640*e|0)+492>>2]=0,l[t+(5640*e|0)+460>>2]=l[t+(5640*e|0)+456>>2],l[t+(5640*e|0)+504>>2]=0,l[t+(5640*e|0)+520>>2]=a,l[t+(5640*e|0)+524>>2]=n,l[t+(5640*e|0)+528>>2]=i,l[t+(5640*e|0)+532>>2]=r,l[t+(5640*e|0)+536>>2]=o,l[t+(5640*e|0)+540>>2]=s,l[t+(5640*e|0)+544>>2]=c,!(u>>>0<=1))for(h=1,t=t+(5640*e|0)+572|0;l[t+76>>2]=l[t+4>>2],l[t+92>>2]=l[t+16>>2],l[t+72>>2]=l[t>>2],l[t+88>>2]=l[t+12>>2],e=0|l[t+8>>2],l[t+84>>2]=e,l[t+36>>2]=l[t+32>>2],l[t+80>>2]=0,l[t+68>>2]=e>>>0>(0|l[t+-64>>2])>>>0?e:0,l[t+96>>2]=a,l[t+100>>2]=n,l[t+104>>2]=i,l[t+108>>2]=r,l[t+112>>2]=o,l[t+116>>2]=s,l[t+120>>2]=c,(0|(h=h+1|0))!=(0|u);)t=t+148|0}function We(t,e,n,i,o,s,c){t|=0,n|=0,i|=0,o|=0,s|=0,c|=0;var u,h,f,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,w=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,k=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0,Y=0,X=0,J=0,Q=0;Q=0|l[76+(e|=0)>>2],u=0|function(t){t|=0;var e=0,n=0;for(e=696;!(-1==(0|(n=0|l[e>>2]))|(0|n)==(0|t));)e=e+12|0;return e+4|0}(0|l[(f=Q+(5640*n|0)+424+(148*i|0)+36|0)>>2]),l[t+(232*i|0)+40>>2]=1,h=t+(232*i|0)+44|0,l[t+(232*i|0)+80>>2]=l[f>>2];do{if(8&r[e+93>>0]){if((65535&(d=0|a[e>>1]))>2){if(!(1==(0|c)&(65535&d)>6|(d+-3&65535)<4))break}else if(!(1==(0|c)|(d+-3&65535)<4))break;t:do{if((0|s)<3)for(v=Q+(5640*n|0)+424+(148*i|0)+72|0,b=Q+(5640*n|0)+424+(148*i|0)+88|0,_=t+(232*i|0)+56|0,w=Q+(5640*n|0)+424+(148*i|0)+76|0,A=t+(232*i|0)+48|0,x=Q+(5640*n|0)+424+(148*i|0)+92|0,S=t+(232*i|0)+60|0,M=Q+(5640*n|0)+424+(148*i|0)+68|0,E=t+(232*i|0)+64|0,T=Q+(5640*n|0)+424+(148*i|0)+84|0,I=t+(232*i|0)+52|0,k=Q+(5640*n|0)+424+(148*i|0)+80|0,C=t+(232*i|0)+68|0,B=Q+(5640*n|0)+424+(148*i|0)+96|0,R=t+(232*i|0)+72|0,P=Q+(5640*n|0)+424+(148*i|0)+100|0,L=t+(232*i|0)+96|0,D=Q+(5640*n|0)+424+(148*i|0)+108|0,N=t+(232*i|0)+104|0,O=Q+(5640*n|0)+424+(148*i|0)+104|0,F=t+(232*i|0)+100|0,G=Q+(5640*n|0)+424+(148*i|0)+112|0,z=t+(232*i|0)+108|0,d=s;;){switch(c=d,0|r[u+(d=d+1|0)>>0]){case 82:p=_,m=b,g=h,y=v,J=10;break;case 67:p=S,m=x,g=A,y=w,J=10;break;case 76:p=I,m=T,g=E,y=M,J=10;break;case 80:(0|l[f>>2])>>>0<2?(p=R,m=B,g=C,y=k,J=10):(l[L>>2]=l[P>>2],l[N>>2]=l[D>>2],p=z,m=G,g=F,y=O,J=10)}if(10==(0|J)&&(J=0,l[g>>2]=l[y>>2],l[p>>2]=l[m>>2]),(0|c)>=2)break t}}while(0);if(d=(0|s)>-1,!o){if(!d)return;for(m=Q+(5640*n|0)+424+(148*i|0)+76|0,g=Q+(5640*n|0)+424+(148*i|0)+132|0,y=t+(232*i|0)+48|0,v=t+(232*i|0)+60|0,b=Q+(5640*n|0)+424+(148*i|0)+72|0,_=Q+(5640*n|0)+424+(148*i|0)+128|0,w=t+(232*i|0)+56|0,A=Q+(5640*n|0)+424+(148*i|0)+68|0,x=Q+(5640*n|0)+424+(148*i|0)+124|0,S=t+(232*i|0)+64|0,M=t+(232*i|0)+52|0,E=Q+(5640*n|0)+424+(148*i|0)+80|0,T=Q+(5640*n|0)+424+(148*i|0)+136|0,I=t+(232*i|0)+68|0,k=t+(232*i|0)+72|0,C=Q+(5640*n|0)+424+(148*i|0)+100|0,B=Q+(5640*n|0)+424+(148*i|0)+140|0,R=Q+(5640*n|0)+424+(148*i|0)+108|0,P=Q+(5640*n|0)+424+(148*i|0)+144|0,L=t+(232*i|0)+96|0,D=Q+(5640*n|0)+424+(148*i|0)+116|0,N=t+(232*i|0)+100|0,O=t+(232*i|0)+104|0,p=Q+(5640*n|0)+424+(148*i|0)+120|0,c=t+(232*i|0)+108|0,d=s;;){t:do{switch(0|r[u+d>>0]){case 67:i=0|l[m>>2],l[y>>2]=i,i=i+1|0,l[v>>2]=i,l[g>>2]=i;break;case 82:i=0|l[b>>2],l[h>>2]=i,i=i+1|0,l[w>>2]=i,l[_>>2]=i;break;case 76:i=0|l[A>>2],l[S>>2]=i,i=i+1|0,l[M>>2]=i,l[x>>2]=i;break;case 80:if((0|l[f>>2])>>>0<2){i=0|l[E>>2],l[I>>2]=i,i=i+1|0,l[k>>2]=i,l[T>>2]=i;break t}i=0|l[C>>2],s=0|l[R>>2],l[L>>2]=i,n=(n=0|l[D>>2])+i-((i>>>0)%(n>>>0)|0)|0,l[N>>2]=n,l[O>>2]=s,i=(i=0|l[p>>2])+s-((s>>>0)%(i>>>0)|0)|0,l[c>>2]=i,l[B>>2]=n,l[P>>2]=i;break t}}while(0);if(!((0|d)>0))break;d=d+-1|0}return}if(!d)return;for(W=Q+(5640*n|0)+424+(148*i|0)+128|0,Z=Q+(5640*n|0)+424+(148*i|0)+88|0,j=Q+(5640*n|0)+424+(148*i|0)+72|0,Y=t+(232*i|0)+56|0,X=Q+(5640*n|0)+424+(148*i|0)+132|0,A=Q+(5640*n|0)+424+(148*i|0)+92|0,x=Q+(5640*n|0)+424+(148*i|0)+76|0,S=t+(232*i|0)+48|0,M=t+(232*i|0)+60|0,E=Q+(5640*n|0)+424+(148*i|0)+124|0,T=Q+(5640*n|0)+424+(148*i|0)+84|0,I=Q+(5640*n|0)+424+(148*i|0)+68|0,k=t+(232*i|0)+64|0,C=t+(232*i|0)+52|0,B=Q+(5640*n|0)+424+(148*i|0)+136|0,R=Q+(5640*n|0)+424+(148*i|0)+96|0,P=Q+(5640*n|0)+424+(148*i|0)+80|0,L=t+(232*i|0)+68|0,D=t+(232*i|0)+72|0,N=Q+(5640*n|0)+424+(148*i|0)+140|0,O=Q+(5640*n|0)+424+(148*i|0)+104|0,F=t+(232*i|0)+96|0,G=Q+(5640*n|0)+424+(148*i|0)+116|0,z=t+(232*i|0)+100|0,o=Q+(5640*n|0)+424+(148*i|0)+144|0,U=Q+(5640*n|0)+424+(148*i|0)+112|0,H=t+(232*i|0)+104|0,V=Q+(5640*n|0)+424+(148*i|0)+120|0,_=t+(232*i|0)+108|0,w=Q+(5640*n|0)+424+(148*i|0)+100|0,b=Q+(5640*n|0)+424+(148*i|0)+108|0,d=1,v=s;;){y=u+v|0;t:do{switch(0|r[y>>0]){case 67:c=M,p=X,m=(0|l[X>>2])-1|0,g=S,J=35;break;case 82:c=Y,p=W,m=(0|l[W>>2])-1|0,g=h,J=35;break;case 76:c=C,p=E,m=(0|l[E>>2])-1|0,g=k,J=35;break;case 80:if((0|l[f>>2])>>>0<2){c=D,p=B,m=(0|l[B>>2])-1|0,g=L,J=35;break t}g=0|l[N>>2],m=0|l[G>>2],l[F>>2]=g-m-((g>>>0)%(m>>>0)|0),l[z>>2]=g,c=_,p=o,m=(g=0|l[o>>2])-(m=0|l[V>>2])-((g>>>0)%(m>>>0)|0)|0,g=H,J=35;break t}}while(0);35==(0|J)&&(J=0,l[g>>2]=m,l[c>>2]=l[p>>2]);t:do{if(1==(0|d))switch(0|r[y>>0]){case 82:if((0|(d=0|l[W>>2]))!=(0|l[Z>>2])){l[h>>2]=d,d=d+1|0,l[Y>>2]=d,l[W>>2]=d,d=0;break t}if(!(0|Ze(v+-1|0,e,n,i,u))){d=0;break t}d=0|l[j>>2],l[h>>2]=d,d=d+1|0,l[Y>>2]=d,l[W>>2]=d,d=1;break t;case 67:if((0|(d=0|l[X>>2]))!=(0|l[A>>2])){l[S>>2]=d,d=d+1|0,l[M>>2]=d,l[X>>2]=d,d=0;break t}if(!(0|Ze(v+-1|0,e,n,i,u))){d=0;break t}d=0|l[x>>2],l[S>>2]=d,d=d+1|0,l[M>>2]=d,l[X>>2]=d,d=1;break t;case 76:if((0|(d=0|l[E>>2]))!=(0|l[T>>2])){l[k>>2]=d,d=d+1|0,l[C>>2]=d,l[E>>2]=d,d=0;break t}if(!(0|Ze(v+-1|0,e,n,i,u))){d=0;break t}d=0|l[I>>2],l[k>>2]=d,d=d+1|0,l[C>>2]=d,l[E>>2]=d,d=1;break t;case 80:if((0|l[f>>2])>>>0<2){if((0|(d=0|l[B>>2]))!=(0|l[R>>2])){l[L>>2]=d,d=d+1|0,l[D>>2]=d,l[B>>2]=d,d=0;break t}if(!(0|Ze(v+-1|0,e,n,i,u))){d=0;break t}d=0|l[P>>2],l[L>>2]=d,d=d+1|0,l[D>>2]=d,l[B>>2]=d,d=1;break t}if((d=0|l[N>>2])>>>0<(0|l[O>>2])>>>0){l[F>>2]=d,d=(s=0|l[G>>2])+d-((d>>>0)%(s>>>0)|0)|0,l[z>>2]=d,l[N>>2]=d,d=0;break t}if((c=0|l[o>>2])>>>0<(0|l[U>>2])>>>0)l[H>>2]=c,d=0,p=(s=0|l[V>>2])+c|0,c=(c>>>0)%(s>>>0)|0;else{if(!(0|Ze(v+-1|0,e,n,i,u))){d=0;break t}s=0|l[b>>2],l[o>>2]=s,l[H>>2]=s,d=1,p=(c=0|l[V>>2])+s|0,c=(s>>>0)%(c>>>0)|0}Q=p-c|0,l[_>>2]=Q,l[o>>2]=Q,Q=0|l[w>>2],l[F>>2]=Q,s=(s=0|l[G>>2])+Q-((Q>>>0)%(s>>>0)|0)|0,l[z>>2]=s,l[N>>2]=s;break t;default:d=1;break t}}while(0);if(!((0|v)>0))break;v=v+-1|0}return}}while(0);l[h>>2]=l[Q+(5640*n|0)+424+(148*i|0)+72>>2],l[t+(232*i|0)+56>>2]=l[Q+(5640*n|0)+424+(148*i|0)+88>>2],l[t+(232*i|0)+48>>2]=l[Q+(5640*n|0)+424+(148*i|0)+76>>2],l[t+(232*i|0)+60>>2]=l[Q+(5640*n|0)+424+(148*i|0)+92>>2],l[t+(232*i|0)+64>>2]=l[Q+(5640*n|0)+424+(148*i|0)+68>>2],l[t+(232*i|0)+52>>2]=l[Q+(5640*n|0)+424+(148*i|0)+84>>2],l[t+(232*i|0)+68>>2]=l[Q+(5640*n|0)+424+(148*i|0)+80>>2],l[t+(232*i|0)+72>>2]=l[Q+(5640*n|0)+424+(148*i|0)+96>>2],l[t+(232*i|0)+96>>2]=l[Q+(5640*n|0)+424+(148*i|0)+100>>2],l[t+(232*i|0)+104>>2]=l[Q+(5640*n|0)+424+(148*i|0)+108>>2],l[t+(232*i|0)+100>>2]=l[Q+(5640*n|0)+424+(148*i|0)+104>>2],l[t+(232*i|0)+108>>2]=l[Q+(5640*n|0)+424+(148*i|0)+112>>2]}function Ze(t,e,n,i,o){t|=0,n|=0,i|=0,o|=0;var a,s=0,c=0;if(a=0|l[76+(e|=0)>>2],!((0|t)>-1))return c=0,0|(c&=1);s=t;t:for(;;){switch(0|r[o+s>>0]){case 82:c=3;break t;case 67:c=5;break t;case 76:c=7;break t;case 80:c=9;break t}s=s+-1|0}return 3==(0|c)?(0|l[a+(5640*n|0)+424+(148*i|0)+128>>2])!=(0|l[a+(5640*n|0)+424+(148*i|0)+88>>2])?(c=1,0|(c&=1)):(c=0!=(0|Ze(t+-1|0,e,n,i,o)),0|(c&=1)):5==(0|c)?(0|l[a+(5640*n|0)+424+(148*i|0)+132>>2])!=(0|l[a+(5640*n|0)+424+(148*i|0)+92>>2])?(c=1,0|(c&=1)):(c=0!=(0|Ze(t+-1|0,e,n,i,o)),0|(c&=1)):7==(0|c)?(0|l[a+(5640*n|0)+424+(148*i|0)+124>>2])!=(0|l[a+(5640*n|0)+424+(148*i|0)+84>>2])?(c=1,0|(c&=1)):(c=0!=(0|Ze(t+-1|0,e,n,i,o)),0|(c&=1)):9==(0|c)?(0|l[a+(5640*n|0)+424+(148*i|0)+36>>2])>>>0<2?(0|l[a+(5640*n|0)+424+(148*i|0)+136>>2])!=(0|l[a+(5640*n|0)+424+(148*i|0)+96>>2])?(c=1,0|(c&=1)):(c=0!=(0|Ze(s+-1|0,e,n,i,o)),0|(c&=1)):(0|l[a+(5640*n|0)+424+(148*i|0)+140>>2])!=(0|l[a+(5640*n|0)+424+(148*i|0)+104>>2])?(c=1,0|(c&=1)):(0|l[a+(5640*n|0)+424+(148*i|0)+144>>2])!=(0|l[a+(5640*n|0)+424+(148*i|0)+112>>2])?(c=1,0|(c&=1)):(c=0!=(0|Ze(s+-1|0,e,n,i,o)),0|(c&=1)):0}function je(t,e,n){t|=0,n|=0;var i,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,w=0,A=0,x=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0;if(i=0|l[76+(e|=0)>>2],N=(n>>>0)%((P=0|l[e+24>>2])>>>0)|0,P=(n>>>0)/(P>>>0)|0,L=0|l[e+4>>2],C=0|l[e+12>>2],D=(0|(I=(0|k(C,N))+L|0))>(0|(D=0|l[t>>2]))?I:D,N=(0|(L=(0|k(C,N+1|0))+L|0))<(0|(N=0|l[t+8>>2]))?L:N,L=0|l[e+8>>2],C=0|l[e+16>>2],R=(0|(I=(0|k(C,P))+L|0))>(0|(R=0|l[t+4>>2]))?I:R,P=(0|(L=(0|k(C,P+1|0))+L|0))<(0|(P=0|l[t+12>>2]))?L:P,L=0|l[t+16>>2])for(E=D+-1|0,T=R+-1|0,I=N+-1|0,C=P+-1|0,h=2147483647,M=0|l[i+(5640*n|0)+5584>>2],A=0|l[t+24>>2],x=0,u=2147483647,f=0,o=0;;){if(e=(E+(b=0|l[A>>2])|0)/(0|b)|0,t=(T+(_=0|l[A+4>>2])|0)/(0|_)|0,a=(I+b|0)/(0|b)|0,s=(C+_|0)/(0|_)|0,(w=0|l[M+4>>2])>>>0<=f>>>0?w&&(B=5):(f=w,B=5),5==(0|B)&&(B=0,y=0|br(0|e,((0|e)<0)<<31>>31|0,-1,-1),v=S,m=0|br(0|t,((0|t)<0)<<31>>31|0,-1,-1),g=S,d=0|br(0|a,((0|a)<0)<<31>>31|0,-1,-1),p=S,s=0|br(0|s,((0|s)<0)<<31>>31|0,-1,-1),c=S,F=0|l[M+812>>2],e=_<<(a=0|l[M+944>>2])+(O=w+-1|0),u=u>>>0<(z=b<<O+F)>>>0?u:z,h=h>>>0<e>>>0?h:e,G=0|Mr(0|(G=0|br(0|y,0|v,0|(e=0|Tr(1,0,0|O)),0|(z=S))),0|S,0|O),t=0|Mr(0|(t=0|br(0|m,0|g,0|e,0|z)),0|S,0|O),U=0|Mr(0|(U=0|br(0|d,0|p,0|e,0|z)),0|S,0|O),O=0|Mr(0|(z=0|br(0|s,0|c,0|e,0|z)),0|S,0|O),z=0|Mr(0|(z=0|br(0|(z=0|br(0|(z=0|Tr(1,0,0|F)),0|S,-1,-1)),0|S,0|U,((0|U)<0)<<31>>31|0)),0|S,0|F),e=0|Mr(0|(e=0|br(0|(e=0|br(0|(e=0|Tr(1,0,0|a)),0|S,-1,-1)),0|S,0|O,((0|O)<0)<<31>>31|0)),0|S,0|a),o=(a=0|k((0|G)==(0|U)?0:(z<<F)-(G>>F<<F)>>F,(0|t)==(0|O)?0:(e<<a)-(t>>a<<a)>>a))>>>0>o>>>0?a:o,w>>>0>1))for(t=-1,a=1;F=0|l[M+812+(a<<2)>>2],z=_<<(e=0|l[M+944+(a<<2)>>2])+(G=t+-1+w|0),u=u>>>0<(t=b<<G+F)>>>0?u:t,h=h>>>0<z>>>0?h:z,O=0|Mr(0|(O=0|br(0|y,0|v,0|(z=0|Tr(1,0,0|G)),0|(t=S))),0|S,0|G),U=0|Mr(0|(U=0|br(0|m,0|g,0|z,0|t)),0|S,0|G),H=0|Mr(0|(H=0|br(0|d,0|p,0|z,0|t)),0|S,0|G),G=0|Mr(0|(t=0|br(0|s,0|c,0|z,0|t)),0|S,0|G),t=0|Mr(0|(t=0|br(0|(t=0|br(0|(t=0|Tr(1,0,0|F)),0|S,-1,-1)),0|S,0|H,((0|H)<0)<<31>>31|0)),0|S,0|F),z=0|Mr(0|(z=0|br(0|(z=0|br(0|(z=0|Tr(1,0,0|e)),0|S,-1,-1)),0|S,0|G,((0|G)<0)<<31>>31|0)),0|S,0|e),o=(e=0|k((0|O)==(0|H)?0:(t<<F)-(O>>F<<F)>>F,(0|U)==(0|G)?0:(z<<e)-(U>>e<<e)>>e))>>>0>o>>>0?e:o,(e=a+1|0)>>>0<w>>>0;)t=~a,a=e;if((x=x+1|0)>>>0>=L>>>0)break;M=M+1080|0,A=A+52|0}else f=0,h=2147483647,u=2147483647,o=0;if(4&r[i+(5640*n|0)+5636>>0])Ve(i,n,D,N,R,P,o,u,h);else if(a=1+(0|l[i+(5640*n|0)+420>>2])|0)for(s=0|l[i+(5640*n|0)+8>>2],c=0|l[i+(5640*n|0)+4>>2],t=0,e=i+(5640*n|0)+424|0;l[e+76>>2]=0,l[e+92>>2]=L,l[e+72>>2]=0,l[e+88>>2]=f,l[e+68>>2]=0,l[e+84>>2]=s,l[e+36>>2]=c,l[e+80>>2]=0,l[e+96>>2]=o,l[e+100>>2]=D,l[e+104>>2]=N,l[e+108>>2]=R,l[e+112>>2]=P,l[e+116>>2]=u,l[e+120>>2]=h,(0|(t=t+1|0))!=(0|a);)e=e+148|0}function Ye(t){var e=0,n=0,i=0,o=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,w=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0,Y=0,X=0,J=0,Q=0,q=0,K=0,$=0,tt=0,et=0,nt=0,it=0,rt=0,ot=0,at=0,st=0,lt=0,ct=0,ut=0,ht=0,ft=0,dt=0,pt=0,mt=0,gt=0,yt=0,vt=0,bt=0,_t=0,wt=0,At=0,xt=0,St=0,Mt=0,Et=0,Tt=0,It=0,kt=0,Ct=0,Bt=0,Rt=0,Pt=0,Lt=0,Dt=0,Nt=0,Ot=0,Ft=0,Gt=0,zt=0,Ut=0,Ht=0,Vt=0,Wt=0,Zt=0,jt=0,Yt=0,Xt=0,Jt=0,Qt=0,qt=0,Kt=0,$t=0,te=0,ee=0,ne=0,ie=0,re=0,oe=0,ae=0,se=0,le=0,ce=0,ue=0,he=0,fe=0,de=0;switch(0|l[80+(t|=0)>>2]){case 0:for(0|l[(e=t+40|0)>>2]?(l[e>>2]=0,w=0|l[t+64>>2],l[t+36>>2]=w,n=5):(h=B=t+32|0,B=0|l[B>>2],n=18);;){if(5==(0|n)){if(w>>>0>=(0|l[t+52>>2])>>>0){de=0,n=153;break}M=0|l[t+44>>2],l[t+28>>2]=M,n=7}else 18==(0|n)&&(c=B+1|0,l[h>>2]=c,o=h,n=14);for(;;){if(7==(0|n)){if(n=0,M>>>0>=(0|l[t+56>>2])>>>0){n=21;break}E=0|l[t+48>>2],l[(m=t+24|0)>>2]=E}else if(14==(0|n)){if(c>>>0<(0|l[t+72>>2])>>>0){n=16;break}d=R=t+24|0,R=0|l[R>>2],n=19}for(;;){if(19==(0|n)&&(n=0,E=R+1|0,l[d>>2]=E,m=d),E>>>0>=(0|l[t+60>>2])>>>0){n=20;break}if(T=0|l[t+196>>2],(I=0|l[t+28>>2])>>>0<(0|l[T+(E<<4)+8>>2])>>>0)break;d=m,R=E,n=19}20!=(0|n)?(e=0|l[T+(E<<4)+12>>2],0|r[t>>0]||(fe=0|k(0|l[e+(I<<4)+12>>2],0|l[e+(I<<4)+8>>2]),l[t+72>>2]=fe),c=0|l[t+68>>2],l[(o=t+32|0)>>2]=c,n=14):(M=1+(0|l[(n=t+28|0)>>2])|0,l[n>>2]=M,n=7)}if(16==(0|n)){if(n=0,C=0|k(0|l[t+8>>2],0|l[t+36>>2]),C=(C=(C=(0|k(0|l[t+12>>2],0|l[t+28>>2]))+C|0)+(0|k(0|l[t+16>>2],0|l[t+24>>2]))|0)+(0|k(0|l[t+20>>2],c))|0,C=(0|l[t+4>>2])+(C<<1)|0,0|a[C>>1]){h=o,B=c,n=18;continue}break}21!=(0|n)||(w=1+(0|l[(n=t+36|0)>>2])|0,l[n>>2]=w,n=5)}return 153==(0|n)?0|de:(a[C>>1]=1,0|(t=1));case 1:for(0|l[(e=t+40|0)>>2]?(l[e>>2]=0,P=0|l[t+44>>2],l[t+28>>2]=P,n=25):(u=x=t+32|0,x=0|l[x>>2],n=38);;){if(25==(0|n)){if(P>>>0>=(0|l[t+56>>2])>>>0){de=0,n=153;break}y=0|l[t+64>>2],l[t+36>>2]=y,n=27}else 38==(0|n)&&(s=x+1|0,l[u>>2]=s,i=u,n=34);for(;;){if(27==(0|n)){if(n=0,y>>>0>=(0|l[t+52>>2])>>>0){n=41;break}v=0|l[t+48>>2],l[(p=t+24|0)>>2]=v}else if(34==(0|n)){if(s>>>0<(0|l[t+72>>2])>>>0){n=36;break}f=S=t+24|0,S=0|l[S>>2],n=39}for(;;){if(39==(0|n)&&(n=0,v=S+1|0,l[f>>2]=v,p=f),v>>>0>=(0|l[t+60>>2])>>>0){n=40;break}if(b=0|l[t+196>>2],(_=0|l[t+28>>2])>>>0<(0|l[b+(v<<4)+8>>2])>>>0)break;f=p,S=v,n=39}40!=(0|n)?(e=0|l[b+(v<<4)+12>>2],0|r[t>>0]||(fe=0|k(0|l[e+(_<<4)+12>>2],0|l[e+(_<<4)+8>>2]),l[t+72>>2]=fe),s=0|l[t+68>>2],l[(i=t+32|0)>>2]=s,n=34):(y=1+(0|l[(n=t+36|0)>>2])|0,l[n>>2]=y,n=27)}if(36==(0|n)){if(n=0,A=0|k(0|l[t+8>>2],0|l[t+36>>2]),A=(A=(A=(0|k(0|l[t+12>>2],0|l[t+28>>2]))+A|0)+(0|k(0|l[t+16>>2],0|l[t+24>>2]))|0)+(0|k(0|l[t+20>>2],s))|0,A=(0|l[t+4>>2])+(A<<1)|0,0|a[A>>1]){u=i,x=s,n=38;continue}break}41!=(0|n)||(P=1+(0|l[(n=t+28|0)>>2])|0,l[n>>2]=P,n=25)}return 153==(0|n)?0|de:(a[A>>1]=1,0|(t=1));case 2:if(0|l[(e=t+40|0)>>2]){if(l[e>>2]=0,l[(m=t+224|0)>>2]=0,l[(g=t+228|0)>>2]=0,0|(y=0|l[t+192>>2])){v=0|l[t+196>>2],p=0,n=0,e=0;do{if(c=0|l[v+(p<<4)+8>>2]){if(u=0|l[v+(p<<4)+12>>2],h=0|l[v+(p<<4)>>2],f=0|l[v+(p<<4)+4>>2],d=c+-1|0,Vt=h<<(0|l[u>>2])+d,Wt=f<<(0|l[u+4>>2])+d,n=0==(0|n)?Vt:n>>>0<Vt>>>0?n:Vt,e=0==(0|e)?Wt:e>>>0<Wt>>>0?e:Wt,1!=(0|c))for(o=-1,s=1;Wt=h<<(i=d+o|0)+(0|l[u+(s<<4)>>2]),i=f<<(0|l[u+(s<<4)+4>>2])+i,n=0==(0|n)?Wt:n>>>0<Wt>>>0?n:Wt,e=0==(0|e)?i:e>>>0<i>>>0?e:i,(i=s+1|0)>>>0<c>>>0;)o=~s,s=i;l[m>>2]=n,l[g>>2]=e}p=p+1|0}while((0|p)!=(0|y))}0|r[t>>0]||(l[t+104>>2]=l[t+204>>2],l[t+96>>2]=l[t+200>>2],l[t+108>>2]=l[t+212>>2],l[t+100>>2]=l[t+208>>2]),N=0|l[t+44>>2],l[t+28>>2]=N,n=54}else Zt=he=t+36|0,he=0|l[he>>2],n=75;for(;;){if(54==(0|n)){if(N>>>0>=(0|l[t+56>>2])>>>0){de=0,n=153;break}Jt=0|l[t+104>>2],l[t+220>>2]=Jt,n=56}else 75==(0|n)&&(ce=he+1|0,l[Zt>>2]=ce,jt=Zt,n=71);for(;;){if(56==(0|n)){if((0|Jt)>=(0|l[t+108>>2])){n=79;break}Qt=0|l[t+96>>2],l[t+216>>2]=Qt,n=58}else if(71==(0|n)){if(ce>>>0<(0|l[t+52>>2])>>>0){n=73;break}Yt=fe=t+24|0,fe=0|l[fe>>2],n=76}for(;;){if(58==(0|n)){if((0|Qt)>=(0|l[t+100>>2])){n=78;break}qt=0|l[t+48>>2],l[(Xt=t+24|0)>>2]=qt}else 76==(0|n)&&(qt=fe+1|0,l[Yt>>2]=qt,Xt=Yt);if(qt>>>0>=(0|l[t+60>>2])>>>0)Qt=0|l[t+224>>2],Qt=(Wt=0|l[(n=t+216|0)>>2])+Qt-((0|Wt)%(0|Qt)|0)|0,l[n>>2]=Qt,n=58;else if(n=0|l[t+196>>2],(f=0|l[t+28>>2])>>>0>=(e=0|l[n+(qt<<4)+8>>2])>>>0)Yt=Xt,fe=qt,n=76;else{if(d=0|l[n+(qt<<4)+12>>2],s=e+~f|0,$t=((c=0|l[t+200>>2])-1+(Kt=(u=0|l[n+(qt<<4)>>2])<<s)|0)/(0|Kt)|0,ee=((h=0|l[t+204>>2])-1+(te=(Wt=0|l[n+(qt<<4)+4>>2])<<s)|0)/(0|te)|0,e=((ne=Kt+-1|0)+(0|l[t+208>>2])|0)/(0|Kt)|0,n=((ie=te+-1|0)+(0|l[t+212>>2])|0)/(0|te)|0,i=(re=0|l[d+(f<<4)>>2])+s|0,o=(oe=0|l[d+(f<<4)+4>>2])+s|0,0|(0|(ae=0|l[t+220>>2]))%(Wt<<o|0)){if((0|ae)!=(0|h)){Yt=Xt,fe=qt,n=76;continue}if(!((ee<<s|0)%(1<<o|0)|0)){Yt=Xt,fe=qt,n=76;continue}}if(0|(0|(se=0|l[t+216>>2]))%(u<<i|0)){if((0|se)!=(0|c)){Yt=Xt,fe=qt,n=76;continue}if(!(($t<<s|0)%(1<<i|0)|0)){Yt=Xt,fe=qt,n=76;continue}}if(le=0|l[d+(f<<4)+8>>2]){if(!((0|ee)==(0|n)|((0|$t)==(0|e)?1:0==(0|l[d+(f<<4)+12>>2])))){n=70;break}Yt=Xt,fe=qt,n=76}else Yt=Xt,fe=qt,n=76}}70!=(0|n)?78!=(0|n)||(Jt=0|l[t+228>>2],Jt=(Wt=0|l[(n=t+220|0)>>2])+Jt-((0|Wt)%(0|Jt)|0)|0,l[n>>2]=Jt,n=56):(ce=(((ne+se|0)/(0|Kt)|0)>>re)-($t>>re)+(0|k((((ie+ae|0)/(0|te)|0)>>oe)-(ee>>oe)|0,le))|0,l[t+32>>2]=ce,ce=0|l[t+64>>2],l[(jt=t+36|0)>>2]=ce,n=71)}if(73==(0|n)){if(n=0,ue=0|k(0|l[t+8>>2],ce),ue=(ue=(ue=(0|k(0|l[t+12>>2],0|l[t+28>>2]))+ue|0)+(0|k(0|l[t+16>>2],0|l[t+24>>2]))|0)+(0|k(0|l[t+20>>2],0|l[t+32>>2]))|0,ue=(0|l[t+4>>2])+(ue<<1)|0,0|a[ue>>1]){Zt=jt,he=ce,n=75;continue}break}79!=(0|n)||(N=1+(0|l[(n=t+28|0)>>2])|0,l[n>>2]=N,n=54)}return 153==(0|n)?0|de:(a[ue>>1]=1,0|(t=1));case 3:if(0|l[(n=t+40|0)>>2]){if(l[n>>2]=0,l[(m=t+224|0)>>2]=0,l[(g=t+228|0)>>2]=0,0|(y=0|l[t+192>>2])){v=0|l[t+196>>2],p=0,n=0,e=0;do{if(c=0|l[v+(p<<4)+8>>2]){if(u=0|l[v+(p<<4)+12>>2],h=0|l[v+(p<<4)>>2],f=0|l[v+(p<<4)+4>>2],d=c+-1|0,he=h<<(0|l[u>>2])+d,fe=f<<(0|l[u+4>>2])+d,n=0==(0|n)?he:n>>>0<he>>>0?n:he,e=0==(0|e)?fe:e>>>0<fe>>>0?e:fe,1!=(0|c))for(o=-1,s=1;fe=h<<(i=d+o|0)+(0|l[u+(s<<4)>>2]),i=f<<(0|l[u+(s<<4)+4>>2])+i,n=0==(0|n)?fe:n>>>0<fe>>>0?n:fe,e=0==(0|e)?i:e>>>0<i>>>0?e:i,(i=s+1|0)>>>0<c>>>0;)o=~s,s=i;l[m>>2]=n,l[g>>2]=e}p=p+1|0}while((0|p)!=(0|y))}0|r[t>>0]?e=0|l[t+104>>2]:(e=0|l[t+204>>2],l[t+104>>2]=e,l[t+96>>2]=l[t+200>>2],l[t+108>>2]=l[t+212>>2],l[t+100>>2]=l[t+208>>2]),l[t+220>>2]=e,n=93}else Vt=0|l[t+24>>2],zt=t+36|0,yt=(0|l[t+196>>2])+(Vt<<4)|0,bt=zt,zt=0|l[zt>>2],n=113;for(;;){if(93==(0|n)){if((0|e)>=(0|l[t+108>>2])){de=0,n=153;break}xt=0|l[t+96>>2],l[t+216>>2]=xt,n=95}else 113==(0|n)&&(Ot=zt+1|0,l[bt>>2]=Ot,gt=yt,_t=bt,Ft=Vt,n=109);for(;;){if(95==(0|n)){if((0|xt)>=(0|l[t+100>>2])){n=117;break}St=0|l[t+48>>2],l[t+24>>2]=St,n=97}else if(109==(0|n)){if(Ot>>>0<(0|l[t+52>>2])>>>0){n=111;break}vt=gt,wt=Ut=t+28|0,Ut=0|l[Ut>>2],Wt=Ft,n=114}for(;;){if(97==(0|n)){if(St>>>0>=(0|l[t+60>>2])>>>0){n=116;break}mt=(0|l[t+196>>2])+(St<<4)|0,Mt=0|l[t+44>>2],l[(At=t+28|0)>>2]=Mt,Ht=St}else 114==(0|n)&&(Mt=Ut+1|0,l[wt>>2]=Mt,mt=vt,At=wt,Ht=Wt);if(Mt>>>0>=((fe=0|l[t+56>>2])>>>0<(n=0|l[mt+8>>2])>>>0?fe:n)>>>0)St=Ht+1|0,l[t+24>>2]=St,n=97;else{if(d=0|l[mt+12>>2],n=n+~Mt|0,Tt=((i=0|l[t+200>>2])-1+(Et=(o=0|l[mt>>2])<<n)|0)/(0|Et)|0,kt=((s=0|l[t+204>>2])-1+(It=(fe=0|l[mt+4>>2])<<n)|0)/(0|It)|0,c=((Ct=Et+-1|0)+(0|l[t+208>>2])|0)/(0|Et)|0,u=((Bt=It+-1|0)+(0|l[t+212>>2])|0)/(0|It)|0,h=(Rt=0|l[d+(Mt<<4)>>2])+n|0,f=(Pt=0|l[d+(Mt<<4)+4>>2])+n|0,0|(0|(Lt=0|l[t+220>>2]))%(fe<<f|0)){if((0|Lt)!=(0|s)){vt=mt,wt=At,Ut=Mt,Wt=Ht,n=114;continue}if(!((kt<<n|0)%(1<<f|0)|0)){vt=mt,wt=At,Ut=Mt,Wt=Ht,n=114;continue}}if(0|(0|(Dt=0|l[t+216>>2]))%(o<<h|0)){if((0|Dt)!=(0|i)){vt=mt,wt=At,Ut=Mt,Wt=Ht,n=114;continue}if(!((Tt<<n|0)%(1<<h|0)|0)){vt=mt,wt=At,Ut=Mt,Wt=Ht,n=114;continue}}if(Nt=0|l[d+(Mt<<4)+8>>2]){if(!((0|kt)==(0|u)|((0|Tt)==(0|c)?1:0==(0|l[d+(Mt<<4)+12>>2])))){n=108;break}vt=mt,wt=At,Ut=Mt,Wt=Ht,n=114}else vt=mt,wt=At,Ut=Mt,Wt=Ht,n=114}}108!=(0|n)?116!=(0|n)||(xt=0|l[t+224>>2],xt=(fe=0|l[(n=t+216|0)>>2])+xt-((0|fe)%(0|xt)|0)|0,l[n>>2]=xt,n=95):(Ot=(((Ct+Dt|0)/(0|Et)|0)>>Rt)-(Tt>>Rt)+(0|k((((Bt+Lt|0)/(0|It)|0)>>Pt)-(kt>>Pt)|0,Nt))|0,l[t+32>>2]=Ot,Ot=0|l[t+64>>2],l[(_t=t+36|0)>>2]=Ot,gt=mt,Ft=Ht,n=109)}if(111==(0|n)){if(n=0,Gt=0|k(0|l[t+8>>2],Ot),Gt=(Gt=(Gt=(0|k(0|l[t+12>>2],0|l[t+28>>2]))+Gt|0)+(0|k(0|l[t+16>>2],Ft))|0)+(0|k(0|l[t+20>>2],0|l[t+32>>2]))|0,Gt=(0|l[t+4>>2])+(Gt<<1)|0,0|a[Gt>>1]){yt=gt,bt=_t,zt=Ot,Vt=Ft,n=113;continue}break}117!=(0|n)||(e=0|l[t+228>>2],e=(fe=0|l[(n=t+220|0)>>2])+e-((0|fe)%(0|e)|0)|0,l[n>>2]=e,n=93)}return 153==(0|n)?0|de:(a[Gt>>1]=1,0|(t=1));case 4:for(0|l[(e=t+40|0)>>2]?(l[e>>2]=0,j=0|l[t+48>>2],l[t+24>>2]=j,n=121):(ht=0|l[t+24>>2],ct=t+36|0,z=(0|l[t+196>>2])+(ht<<4)|0,H=ct,ct=0|l[ct>>2],n=148);;){if(121==(0|n)){if(j>>>0>=(0|l[t+60>>2])>>>0){de=0,n=153;break}if(g=(e=0|l[t+196>>2])+(j<<4)|0,l[(p=t+224|0)>>2]=0,l[(m=t+228|0)>>2]=0,0|(h=0|l[e+(j<<4)+8>>2])){if(f=0|l[e+(j<<4)+12>>2],d=0|l[g>>2],c=0|l[e+(j<<4)+4>>2],u=h+-1|0,n=d<<(0|l[f>>2])+u,e=c<<(0|l[f+4>>2])+u,1!=(0|h))for(o=-1,s=1;fe=d<<(i=u+o|0)+(0|l[f+(s<<4)>>2]),i=c<<(0|l[f+(s<<4)+4>>2])+i,n=0==(0|n)?fe:n>>>0<fe>>>0?n:fe,e=0==(0|e)?i:e>>>0<i>>>0?e:i,(i=s+1|0)>>>0<h>>>0;)o=~s,s=i;l[p>>2]=n,l[m>>2]=e}0|r[t>>0]?e=0|l[t+104>>2]:(e=0|l[t+204>>2],l[t+104>>2]=e,l[t+96>>2]=l[t+200>>2],l[t+108>>2]=l[t+212>>2],l[t+100>>2]=l[t+208>>2]),l[t+220>>2]=e,L=e,D=j,n=130}else 148==(0|n)&&(at=ct+1|0,l[H>>2]=at,G=z,V=H,st=ht,n=144);for(;;){if(130==(0|n)){if((0|L)>=(0|l[t+108>>2])){n=152;break}Y=0|l[t+96>>2],l[t+216>>2]=Y,O=g,ft=D,n=132}else if(144==(0|n)){if(at>>>0<(0|l[t+52>>2])>>>0){n=146;break}U=G,W=ut=t+28|0,ut=0|l[ut>>2],pt=st,n=149}for(;;){if(132==(0|n)){if((0|Y)>=(0|l[t+100>>2])){n=151;break}X=0|l[t+44>>2],l[(Z=t+28|0)>>2]=X,F=O,dt=ft}else 149==(0|n)&&(X=ut+1|0,l[W>>2]=X,F=U,Z=W,dt=pt);if(X>>>0>=((fe=0|l[t+56>>2])>>>0<(e=0|l[F+8>>2])>>>0?fe:e)>>>0)Y=0|l[t+224>>2],Y=(ft=0|l[(O=t+216|0)>>2])+Y-((0|ft)%(0|Y)|0)|0,l[O>>2]=Y,O=F,ft=dt,n=132;else{if(f=0|l[F+12>>2],e=e+~X|0,Q=((n=0|l[t+200>>2])-1+(J=(i=0|l[F>>2])<<e)|0)/(0|J)|0,K=((o=0|l[t+204>>2])-1+(q=(fe=0|l[F+4>>2])<<e)|0)/(0|q)|0,s=(($=J+-1|0)+(0|l[t+208>>2])|0)/(0|J)|0,c=((tt=q+-1|0)+(0|l[t+212>>2])|0)/(0|q)|0,u=(et=0|l[f+(X<<4)>>2])+e|0,h=(nt=0|l[f+(X<<4)+4>>2])+e|0,0|(0|(it=0|l[t+220>>2]))%(fe<<h|0)){if((0|it)!=(0|o)){U=F,W=Z,ut=X,pt=dt,n=149;continue}if(!((K<<e|0)%(1<<h|0)|0)){U=F,W=Z,ut=X,pt=dt,n=149;continue}}if(0|(0|(rt=0|l[t+216>>2]))%(i<<u|0)){if((0|rt)!=(0|n)){U=F,W=Z,ut=X,pt=dt,n=149;continue}if(!((Q<<e|0)%(1<<u|0)|0)){U=F,W=Z,ut=X,pt=dt,n=149;continue}}if(ot=0|l[f+(X<<4)+8>>2]){if(!((0|K)==(0|c)|((0|Q)==(0|s)?1:0==(0|l[f+(X<<4)+12>>2])))){n=143;break}U=F,W=Z,ut=X,pt=dt,n=149}else U=F,W=Z,ut=X,pt=dt,n=149}}143!=(0|n)?151!=(0|n)||(L=0|l[t+228>>2],L=(D=0|l[(g=t+220|0)>>2])+L-((0|D)%(0|L)|0)|0,l[g>>2]=L,g=O,D=ft,n=130):(at=((($+rt|0)/(0|J)|0)>>et)-(Q>>et)+(0|k((((tt+it|0)/(0|q)|0)>>nt)-(K>>nt)|0,ot))|0,l[t+32>>2]=at,at=0|l[t+64>>2],l[(V=t+36|0)>>2]=at,G=F,st=dt,n=144)}if(146==(0|n)){if(n=0,lt=0|k(0|l[t+8>>2],at),lt=(lt=(lt=(0|k(0|l[t+12>>2],0|l[t+28>>2]))+lt|0)+(0|k(0|l[t+16>>2],st))|0)+(0|k(0|l[t+20>>2],0|l[t+32>>2]))|0,lt=(0|l[t+4>>2])+(lt<<1)|0,0|a[lt>>1]){z=G,H=V,ct=at,ht=st,n=148;continue}break}152!=(0|n)||(j=D+1|0,l[t+24>>2]=j,n=121)}return 153==(0|n)?0|de:(a[lt>>1]=1,0|(t=1));default:return 0|(t=0)}return 0}function Xe(t){t|=0;var e=0,n=0;return(e=0|Ut(1,44))?(r[(n=e+40|0)>>0]=-2&r[n>>0]|0!=(0|t),t=0|Ut(1,4),l[e+20>>2]=t,0|t?0|(n=e):(Zt(e),0|(n=0))):0|(e=0)}function Je(t,e,n){e|=0,n|=0;var i,r,o,a,s,c,u,h,f,d,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0;if(d=w,w=w+1200|0,h=d,p=0|l[l[20+(t|=0)>>2]>>2],m=0|l[(f=p+16|0)>>2]){s=p+20|0,c=8+(0|l[t+32>>2])|0,u=88+(0|l[t+28>>2])|0,o=t+24|0,a=0==(0|e),i=0==(0|n),r=e+-1|0,U=0,p=m;do{if(v=0|l[s>>2],b=0|l[c>>2],_=0|l[(G=v+(52*U|0)+16|0)>>2],b){if(_){m=0|l[u>>2],g=.0625*+((0|l[(0|l[24+(0|l[o>>2])>>2])+(52*U|0)+24>>2])>>>0),t=0;do{y=0|k(_,t),n=0;do{z=3*(y+n|0)|0,l[h+(120*t|0)+(12*n|0)>>2]=~~(+(0|l[m+(z<<2)>>2])*g),l[h+(120*t|0)+(12*n|0)+4>>2]=~~(+(0|l[m+(z+1<<2)>>2])*g),l[h+(120*t|0)+(12*n|0)+8>>2]=~~(+(0|l[m+(z+2<<2)>>2])*g),n=n+1|0}while(n>>>0<_>>>0);t=t+1|0}while(t>>>0<b>>>0);z=9}}else z=9;if(9==(0|z)&&(z=0,_)){F=v+(52*U|0)+24|0,O=0,p=_;do{if(D=0|l[F>>2],t=0|l[(N=D+(136*O|0)+24|0)>>2]){P=D+(136*O|0)+16|0,R=0,n=0|l[(L=D+(136*O|0)+20|0)>>2],p=0|l[P>>2];do{if(0|k(n,p)){I=D+(136*O|0)+28+(36*R|0)+20|0,C=h+(120*e|0)+(12*O|0)+(R<<2)|0,B=h+(120*r|0)+(12*O|0)+(R<<2)|0,T=0;do{p=0|l[I>>2],E=0|k(0|l[p+(40*T|0)+20>>2],0|l[p+(40*T|0)+16>>2]);t:do{if(0|E){if(M=p+(40*T|0)+24|0,v=0|l[C>>2],a)for(p=0;;)if(n=0|l[M>>2],m=0|l[n+(52*p|0)+4>>2],t=(0|v)>(0|(t=(0|l[(0|l[24+(0|l[o>>2])>>2])+(52*U|0)+24>>2])-(0|l[n+(52*p|0)+28>>2])|0))?v-t|0:0,l[(y=n+(52*p|0)+44|0)>>2]=0,t=0==(0|t)?0:(3*t|0)-2|0,l[m>>2]=t,0|t&&(S=0|l[n+(52*p|0)>>2],l[m+4>>2]=l[(0|l[n+(52*p|0)+8>>2])+(24*(t+-1|0)|0)>>2],l[m+16>>2]=S,!i)&&(l[y>>2]=t),(p=p+1|0)>>>0>=E>>>0)break t;x=v-(S=0|l[B>>2])|0,b=0;do{n=(t=0|l[M>>2])+(52*b|0)|0,_=0|l[t+(52*b|0)+4>>2],p=x+(S-(A=(0|l[(0|l[24+(0|l[o>>2])>>2])+(52*U|0)+24>>2])-(0|l[t+(52*b|0)+28>>2])|0))|0,p=(0|S)>(0|A)?x:(0|p)>0?p:0,p=(v=(y=0==(0|(m=0|l[(A=t+(52*b|0)+44|0)>>2])))?0==(0|p)?0:(3*p|0)-2|0:(3*p|0)+m|0)-m|0,l[_+(24*e|0)>>2]=p;do{if(0|p){if(t=0|l[t+(52*b|0)+8>>2],p=0|l[t+(24*(v+-1|0)|0)>>2],y?t=0|l[n>>2]:(y=0|l[t+(24*(m+-1|0)|0)>>2],t=(0|l[n>>2])+y|0,p=p-y|0),l[_+(24*e|0)+4>>2]=p,l[_+(24*e|0)+16>>2]=t,i)break;l[A>>2]=v}}while(0);b=b+1|0}while(b>>>0<E>>>0)}}while(0);T=T+1|0,p=0|l[P>>2],n=0|l[L>>2]}while(T>>>0<(0|k(n,p))>>>0);t=0|l[N>>2]}R=R+1|0}while(R>>>0<t>>>0);p=0|l[G>>2]}O=O+1|0}while(O>>>0<p>>>0);p=0|l[f>>2]}U=U+1|0}while(U>>>0<p>>>0);w=d}else w=d}function Qe(t,e,n,i){e|=0,n=+n,i|=0;var r,o,a,s,c,u=0,h=0,f=0,d=0,p=0,m=0,g=0,v=0,b=0,_=0,w=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0;if(t=0|l[l[20+(t|=0)>>2]>>2],y[(s=t+40+(e<<3)|0)>>3]=0,u=0|l[(c=t+16|0)>>2]){o=t+20|0,a=0==(0|e),r=0==(0|i),L=0,t=u;do{if(i=0|l[o>>2],u=0|l[(P=i+(52*L|0)+16|0)>>2]){R=i+(52*L|0)+24|0,B=0,t=u;do{if(I=0|l[R>>2],i=0|l[(C=I+(136*B|0)+24|0)>>2]){E=I+(136*B|0)+16|0,M=0,u=0|l[(T=I+(136*B|0)+20|0)>>2],t=0|l[E>>2];do{if(0|k(u,t)){S=I+(136*B|0)+28+(36*M|0)+20|0,x=0;do{if(i=0|l[S>>2],A=0|k(0|l[i+(40*x|0)+20>>2],0|l[i+(40*x|0)+16>>2])){b=i+(40*x|0)+24|0,v=0;do{if(m=(p=0|l[b>>2])+(52*v|0)|0,_=0|l[p+(52*v|0)+4>>2],w=p+(52*v|0)+44|0,a?(l[w>>2]=0,g=0):g=0|l[w>>2],g>>>0<(f=0|l[p+(52*v|0)+48>>2])>>>0){d=0|l[p+(52*v|0)+8>>2],t=g,u=g;do{i=0|l[d+(24*u|0)>>2],t?(D=t+-1|0,h=+y[d+(24*u|0)+8>>3]-+y[d+(24*D|0)+8>>3],i=i-(0|l[d+(24*D|0)>>2])|0):h=+y[d+(24*u|0)+8>>3],u=u+1|0,t=(i=i?n-h/+(i>>>0)<2.220446049250313e-16:0!=h)?u:t}while(u>>>0<f>>>0);f=t}else f=g;D=f-g|0,l[_+(24*e|0)>>2]=D,D?(i=0|l[p+(52*v|0)+8>>2],t=0|l[i+(24*(u=f+-1|0)|0)>>2],g?(D=0|l[i+(24*(g=g+-1|0)|0)>>2],l[_+(24*e|0)+16>>2]=(0|l[m>>2])+D,h=+y[i+(24*u|0)+8>>3]-+y[i+(24*g|0)+8>>3],t=t-D|0):(l[_+(24*e|0)+16>>2]=l[m>>2],h=+y[i+(24*u|0)+8>>3]),l[_+(24*e|0)+4>>2]=t,y[_+(24*e|0)+8>>3]=h,y[s>>3]=h+ +y[s>>3],r||(l[w>>2]=f)):y[_+(24*e|0)+8>>3]=0,v=v+1|0}while(v>>>0<A>>>0);u=0|l[T>>2],t=0|l[E>>2]}x=x+1|0}while(x>>>0<(0|k(u,t))>>>0);i=0|l[C>>2]}M=M+1|0}while(M>>>0<i>>>0);t=0|l[P>>2]}B=B+1|0}while(B>>>0<t>>>0);t=0|l[c>>2]}L=L+1|0}while(L>>>0<t>>>0)}}function qe(t,e,n,i,o){e|=0,n|=0,i|=0,o|=0;var s,c,u,h,f,d,p=0,g=0,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0,Y=0,X=0,J=0,Q=0,q=0,K=0,$=0,tt=0;if(d=w,w=w+800|0,h=d,f=0|l[28+(t|=0)>>2],c=0|l[l[t+20>>2]>>2],u=0|l[t+32>>2],l[(s=c+24|0)>>2]=0,q=0|l[c+16>>2]){K=t+24|0,Q=0|l[c+20>>2],J=0,b=1.7976931348623157e308,_=0,v=0,p=0;do{if(l[(Y=Q+(52*J|0)+48|0)>>2]=0,X=0|l[Q+(52*J|0)+16>>2]){j=0|l[Q+(52*J|0)+24>>2],Z=0,g=0;do{if(U=0|l[j+(136*Z|0)+24>>2]){V=0==(0|(H=0|k(0|l[j+(136*Z|0)+20>>2],0|l[j+(136*Z|0)+16>>2]))),z=0;do{if(!V){G=0|l[j+(136*Z|0)+28+(36*z|0)+20>>2],F=0;do{if(N=0|k(0|l[G+(40*F|0)+20>>2],0|l[G+(40*F|0)+16>>2])){O=G+(40*F|0)+24|0,D=0;do{if(P=0|l[O>>2],C=0|l[P+(52*D|0)+48>>2]){R=8+(B=0|l[P+(52*D|0)+8>>2])|0,E=0;do{M=0|l[B+(24*E|0)>>2],E?(tt=E+-1|0,A=+y[B+(24*E|0)+8>>3]-+y[B+(24*tt|0)+8>>3],M=M-(0|l[B+(24*tt|0)>>2])|0):A=+y[R>>3],M&&(b=(W=A/+(0|M))<b?W:b,_=W>_?W:_),E=E+1|0}while(E>>>0<C>>>0)}p=(tt=0|k((0|l[P+(52*D|0)+24>>2])-(0|l[P+(52*D|0)+16>>2])|0,(0|l[P+(52*D|0)+20>>2])-(0|l[P+(52*D|0)+12>>2])|0))+p|0,l[s>>2]=p,g=tt+g|0,l[Y>>2]=g,D=D+1|0}while(D>>>0<N>>>0)}F=F+1|0}while(F>>>0<H>>>0)}z=z+1|0}while(z>>>0<U>>>0)}Z=Z+1|0}while(Z>>>0<X>>>0)}else g=0;v+=(W=+(1<<l[(0|l[24+(0|l[K>>2])>>2])+(52*J|0)+24>>2]|0)-1)*W*+(0|g),J=J+1|0}while(J>>>0<q>>>0);W=b}else W=1.7976931348623157e308,_=0,v=0,p=0;if(V=0!=(0|o)){if(q=0|l[o+88>>2],K=0|l[t+36>>2],l[q+(592*K|0)+552>>2]=p,y[q+(592*K|0)+560>>3]=+y[c+32>>3],tt=0|zt(l[(p=u+8|0)>>2]<<3),l[q+(592*K|0)>>2]=tt,!tt)return w=d,0|(tt=0)}else p=u+8|0;if(!(0|l[p>>2]))return w=d,0|(tt=1);for(D=c+32|0,N=f+93|0,O=o+88|0,F=t+36|0,G=c+40|0,z=t+24|0,U=t+8|0,H=t+16|0,P=0;;){if(C=(K=(S=+m[u+20+(P<<2)>>2])>0)&(C=~~+I(+S)>>>0)>>>0<i>>>0?C:i,S=+m[u+5184+(P<<2)>>2],L=+y[D>>3]-v/+T(10,+S/10),0==(1&(tt=0|r[N>>0]))|1^K&&!(0!=(4&tt)&S>0))b=W;else{if(!(R=0|Qn(0|l[z>>2],f))){p=0,$=56;break}if(B=P+1|0,M=h+(P+-1<<3)|0,E=c+40+(P<<3)|0,P){g=0,b=0,x=_,S=W;do{Qe(t,P,A=.5*(S+x),0);do{if(4&r[N>>0]){if(((0|a[f>>1])-3&65535)>=4){if(+y[M>>3]+ +y[E>>3]<L){b=A,x=A;break}S=A,$=47;break}0|Yn(R,0|l[F>>2],c,B,e,n,C,o,0|l[U>>2],0|l[t>>2],0|l[H>>2],0)?+y[M>>3]+ +y[E>>3]<L?(b=A,x=A):(S=A,$=47):S=A}else 0|Yn(R,0|l[F>>2],c,B,e,n,C,o,0|l[U>>2],0|l[t>>2],0|l[H>>2],0)?(b=A,x=A,$=47):S=A}while(0);47==(0|$)&&($=0),g=g+1|0}while(128!=(0|g))}else{g=0,b=0,x=_,S=W;do{Qe(t,0,A=.5*(S+x),0);do{if(4&r[N>>0]){if(((0|a[f>>1])-3&65535)>=4){if(+y[G>>3]<L){b=A,x=A;break}S=A,$=39;break}0|Yn(R,0|l[F>>2],c,B,e,n,C,o,0|l[U>>2],0|l[t>>2],0|l[H>>2],0)?+y[G>>3]<L?(b=A,x=A):(S=A,$=39):S=A}else 0|Yn(R,0|l[F>>2],c,B,e,n,C,o,0|l[U>>2],0|l[t>>2],0|l[H>>2],0)?(b=A,x=A,$=39):S=A}while(0);39==(0|$)&&($=0),g=g+1|0}while(128!=(0|g))}qn(R),b=0==b?A:b}if(V&&(y[(0|l[(0|l[O>>2])+(592*(0|l[F>>2])|0)>>2])+(P<<3)>>3]=b),Qe(t,P,b,1),b=P?+y[h+(P+-1<<3)>>3]+ +y[c+40+(P<<3)>>3]:+y[G>>3],y[h+(P<<3)>>3]=b,(P=P+1|0)>>>0>=(0|l[p>>2])>>>0){p=1,$=56;break}}return 56==(0|$)?(w=d,0|p):0}function Ke(t,e,n){e|=0,n|=0;var i,r=0,o=0;return l[24+(t|=0)>>2]=e,l[t+28>>2]=n,r=0|Ut(1,848),l[l[(i=t+20|0)>>2]>>2]=r,r?(o=0|Ut(0|l[(r=e+16|0)>>2],52),e=0|l[l[i>>2]>>2],l[e+20>>2]=o,o?(l[e+16>>2]=l[r>>2],l[t>>2]=l[n+84>>2],0|(o=1)):0|(o=0)):0|(n=0)}function $e(t){var e,n=0,i=0,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0;if(t|=0){n=0|l[(e=t+20|0)>>2];do{if(0|n){if(v=0==(1&r[t+40>>0])?3:4,i=0|l[n>>2]){if(n=0|l[(m=i+20|0)>>2],0|l[(p=i+16|0)>>2]){for(d=0;;){if(0|(i=0|l[(f=n+24|0)>>2])){if(h=((u=0|l[n+28>>2])>>>0)/136|0,u>>>0>135){for(u=0;;){if(0|(o=0|l[(c=i+48|0)>>2])){if(s=((a=0|l[i+52>>2])>>>0)/40|0,a>>>0>39){for(a=0;fn(0|l[(b=o+32|0)>>2]),l[b>>2]=0,fn(0|l[(b=o+36|0)>>2]),l[b>>2]=0,no[7&v](o),!((a=a+1|0)>>>0>=s>>>0);)o=o+40|0;o=0|l[c>>2]}Zt(o),l[c>>2]=0}if(0|(o=0|l[(c=i+84|0)>>2])){if(s=((b=0|l[i+88>>2])>>>0)/40|0,b>>>0>39){for(a=0;fn(0|l[(b=o+32|0)>>2]),l[b>>2]=0,fn(0|l[(b=o+36|0)>>2]),l[b>>2]=0,no[7&v](o),!((a=a+1|0)>>>0>=s>>>0);)o=o+40|0;o=0|l[c>>2]}Zt(o),l[c>>2]=0}if(0|(o=0|l[(c=i+120|0)>>2])){if(s=((b=0|l[i+124>>2])>>>0)/40|0,b>>>0>39){for(a=0;fn(0|l[(b=o+32|0)>>2]),l[b>>2]=0,fn(0|l[(b=o+36|0)>>2]),l[b>>2]=0,no[7&v](o),!((a=a+1|0)>>>0>=s>>>0);)o=o+40|0;o=0|l[c>>2]}Zt(o),l[c>>2]=0}if((u=u+1|0)>>>0>=h>>>0)break;i=i+136|0}i=0|l[f>>2]}Zt(i),l[f>>2]=0}if(0|l[n+36>>2]&&0|(y=0|l[(g=n+32|0)>>2])&&(Vt(y),l[g>>2]=0,l[g+4>>2]=0,l[g+8>>2]=0,l[g+12>>2]=0),(d=d+1|0)>>>0>=(0|l[p>>2])>>>0)break;n=n+52|0}n=0|l[m>>2]}if(Zt(n),l[m>>2]=0,Zt(0|l[l[e>>2]>>2]),n=0|l[e>>2],l[n>>2]=0,!n)break}Zt(n),l[e>>2]=0}}while(0);Zt(t)}}function tn(t){var e,n,i,r=0,o=0,a=0;r=0|l[(i=32+(t|=0)|0)>>2],n=0|l[(e=t+40|0)>>2];do{if(r){if(n>>>0<=(0|l[(o=t+44|0)>>2])>>>0)return 0|(a=1);if(0|l[t+36>>2]){if(Vt(r),r=0|Ht(0|l[e>>2]),l[i>>2]=r,0|r){l[o>>2]=l[e>>2];break}return l[o>>2]=0,l[e>>2]=0,l[t+36>>2]=0,0|(a=0)}a=4}else a=4}while(0);do{if(4==(0|a)){if(a=0|Ht(n),l[i>>2]=a,a){l[t+44>>2]=l[e>>2];break}return 0|(a=0)}}while(0);return l[t+36>>2]=1,0|(a=1)}function en(t,e,n){return 0|nn(t|=0,e|=0,1,1,52,n|=0)}function nn(t,e,n,i,o,a){e|=0,n|=0,i=+i,o|=0,a|=0;var s,c,u,h,f,d,p,g,y,v,b,_,A,x,M,E,T,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0,Y=0,X=0,J=0,Q=0,q=0,K=0,$=0,tt=0,et=0,nt=0,it=0,rt=0,ot=0,at=0,st=0,lt=0,ct=0,ut=0,ht=0,ft=0,dt=0,pt=0,gt=0,yt=0,vt=0,bt=0,_t=0,wt=0,At=0,xt=0,St=0,Mt=0,Et=0,Tt=0,It=0,kt=0,Ct=0,Bt=0,Rt=0,Pt=0,Lt=0,Dt=0,Nt=0,Ot=0,Ft=0,Gt=0,jt=0,Yt=0,Xt=0,Jt=0,Qt=0,qt=0,Kt=0,$t=0,te=0,ee=0,ne=0;if(T=w,w=w+112|0,x=T+104|0,A=T+96|0,_=T+88|0,b=T+80|0,v=T+72|0,y=T+64|0,g=T+56|0,p=T+48|0,ee=T+40|0,E=T+32|0,M=T+24|0,B=0|l[28+(t|=0)>>2],d=0|l[l[t+20>>2]>>2],R=0|l[(0|l[B+76>>2])+(5640*e|0)+5584>>2],P=0|l[d+20>>2],C=0|l[t+24>>2],L=0|l[C+24>>2],I=0|l[B+24>>2],O=0|l[B+12>>2],D=(te=(0|k(O,(e>>>0)%(I>>>0)|0))+(0|l[B+4>>2])|0)>>>0>(D=0|l[C>>2])>>>0?te:D,l[d>>2]=D,te=0|br(0|O,0,0|te,0),O=(te|=0-S)>>>0<(O=0|l[C+8>>2])>>>0?te:O,l[(te=d+8|0)>>2]=O,!((0|D)>-1&(0|O)>(0|D)))return mt(a,1,19655,T),w=T,0|(ee=0);if(N=0|l[B+16>>2],I=(Kt=(0|k(N,(e>>>0)/(I>>>0)|0))+(0|l[B+8>>2])|0)>>>0>(I=0|l[C+4>>2])>>>0?Kt:I,l[(f=d+4|0)>>2]=I,Kt=0|br(0|N,0,0|Kt,0),N=(Kt|=0-S)>>>0<(N=0|l[C+12>>2])>>>0?Kt:N,l[(Kt=d+12|0)>>2]=N,!((0|I)>-1&(0|N)>(0|I)))return mt(a,1,19693,T+8|0),w=T,0|(ee=0);if(!(0|l[R+4>>2]))return mt(a,1,19731,T+16|0),w=T,0|(ee=0);if(!(0|l[(h=d+16|0)>>2]))return w=T,0|(ee=1);u=B+80|0,c=t+40|0,s=0==(0|n),e=0,qt=P,C=D,B=O,t=N;t:for(;;){if(l[L+36>>2]=0,Yt=(C+-1+(Jt=0|l[L>>2])|0)/(0|Jt)|0,l[qt>>2]=Yt,C=(I+-1+(Xt=0|l[L+4>>2])|0)/(0|Xt)|0,l[(Qt=qt+4|0)>>2]=C,B=(B+-1+Jt|0)/(0|Jt)|0,l[(Jt=qt+8|0)>>2]=B,I=(t+-1+Xt|0)/(0|Xt)|0,l[(Xt=qt+12|0)>>2]=I,B=B-Yt|0){if((4294967295/(B>>>0)|0)>>>0<(I=I-C|0)>>>0){$t=12;break}}else I=I-C|0;if((I=0|k(I,B))>>>0>1073741823){$t=14;break}C=I<<2,I=0|l[R+4>>2],l[(Yt=qt+16|0)>>2]=I,B=0|l[u>>2],l[qt+20>>2]=I>>>0<B>>>0?1:I-B|0,l[(B=qt+40|0)>>2]=C;do{if(1&r[c>>0]){if(n=0|l[(t=qt+32|0)>>2]){if(C>>>0<=(0|l[(P=qt+44|0)>>2])>>>0)break;if(0|l[(I=qt+36|0)>>2]){if(Vt(n),jt=0|Ht(0|l[B>>2]),l[t>>2]=jt,!jt){$t=22;break t}l[P>>2]=l[B>>2]}else $t=19}else $t=19;if(19==(0|$t)){if($t=0,jt=0|Ht(C),l[t>>2]=jt,!jt)break t;l[qt+44>>2]=l[B>>2],I=qt+36|0}l[I>>2]=1,I=0|l[Yt>>2]}}while(0);if(B=136*I|0,I=0|l[(t=qt+24|0)>>2]){if(B>>>0>(0|l[(C=qt+28|0)>>2])>>>0){if(!(I=0|Wt(I,B))){$t=31;break}l[t>>2]=I,Cr(I+(jt=0|l[C>>2])|0,0,B-jt|0),l[C>>2]=B}}else{if(I=0|zt(B),l[t>>2]=I,!I){e=0,$t=100;break}l[qt+28>>2]=B,Cr(0|I,0,0|B)}if(jt=0==(0|l[R+20>>2])?7:8,0|(I=0|l[Yt>>2]))for(Nt=R+8|0,Ot=R+12|0,Ft=L+24|0,Gt=R+804|0,Dt=0,Lt=0|l[t>>2],N=R+28|0;;){if(It=I,I=I+-1|0,Pt=0|l[qt>>2],Pt=0|Mr(0|(Pt=0|br(0|(Bt=0|br(0|(kt=0|Tr(1,0,0|I)),0|(Ct=S),-1,-1)),0|(Rt=S),0|Pt,((0|Pt)<0)<<31>>31|0)),0|S,0|I),l[Lt>>2]=Pt,Mt=0|Mr(0|(Mt=0|br(0|Bt,0|Rt,0|(Mt=0|l[Qt>>2]),((0|Mt)<0)<<31>>31|0)),0|S,0|I),l[Lt+4>>2]=Mt,C=0|Mr(0|(C=0|br(0|Bt,0|Rt,0|(C=0|l[Jt>>2]),((0|C)<0)<<31>>31|0)),0|S,0|I),l[Lt+8>>2]=C,Et=0|Mr(0|(Et=0|br(0|Bt,0|Rt,0|(Et=0|l[Xt>>2]),((0|Et)<0)<<31>>31|0)),0|S,0|I),l[Lt+12>>2]=Et,D=Pt>>(n=0|l[R+812+(Dt<<2)>>2])<<n,P=Mt>>(t=0|l[R+944+(Dt<<2)>>2])<<t,Tt=0|Mr(0|(Tt=0|br(0|(Tt=0|br(0|(Tt=0|Tr(1,0,0|n)),0|S,-1,-1)),0|S,0|C,((0|C)<0)<<31>>31|0)),0|S,0|n),B=0|Mr(0|(B=0|br(0|(B=0|br(0|(B=0|Tr(1,0,0|t)),0|S,-1,-1)),0|S,0|Et,((0|Et)<0)<<31>>31|0)),0|S,0|t),Tt=(Tt<<n)-D>>n,C=(0|Pt)==(0|C)?0:Tt,l[(Pt=Lt+16|0)>>2]=C,B=(0|Mt)==(0|Et)?0:(B<<t)-P>>t,l[Lt+20>>2]=B,0|C&&(4294967295/(Tt>>>0)|0)>>>0<B>>>0){$t=37;break t}if((Mt=0|k(B,C))>>>0>107374182){$t=39;break t}for(Et=40*Mt|0,(Tt=0==(0|Dt))?C=1:(D=0|Er(0|(D=0|br(0|D,((0|D)<0)<<31>>31|0,1,0)),0|S,1),P=0|Er(0|(P=0|br(0|P,((0|P)<0)<<31>>31|0,1,0)),0|S,1),t=t+-1|0,n=n+-1|0,C=3),l[(St=Lt+24|0)>>2]=C,st=(st=0|l[Nt>>2])>>>0<n>>>0?st:n,lt=(lt=0|l[Ot>>2])>>>0<t>>>0?lt:t,ct=0!=(0|Mt),ut=0==(0|Mt),ht=1<<n,ft=1<<t,dt=0|br(0|(dt=0|Tr(1,0,0|st)),0|S,-1,-1),pt=S,gt=0|br(0|(gt=0|Tr(1,0,0|lt)),0|S,-1,-1),yt=S,vt=1<<st,bt=1<<lt,At=0|br(0|(_t=0|Tr(1,0,0|It)),0|(wt=S),-1,-1),xt=S,ot=0,at=Lt+28|0;;){if(Tt?(C=0|Mr(0|(C=0|br(0|Bt,0|Rt,0|(C=0|l[qt>>2]),((0|C)<0)<<31>>31|0)),0|S,0|I),B=0|Mr(0|(B=0|br(0|Bt,0|Rt,0|(B=0|l[Qt>>2]),((0|B)<0)<<31>>31|0)),0|S,0|I),O=0|Mr(0|(O=0|br(0|Bt,0|Rt,0|(O=0|l[Jt>>2]),((0|O)<0)<<31>>31|0)),0|S,0|I),V=0,F=G=0|l[Xt>>2],G=((0|G)<0)<<31>>31,z=kt,U=Ct,H=I):(V=ot+1|0,C=0|l[qt>>2],C=0|Mr(0|(C=0|br(0|(U=0|_r(0|At,0|xt,0|(U=0|Tr(1&V|0,0,0|I)),0|S)),0|(z=S),0|C,((0|C)<0)<<31>>31|0)),0|S,0|It),B=0|l[Qt>>2],B=0|Mr(0|(B=0|br(0|(O=0|_r(0|At,0|xt,0|(G=0|Tr(V>>>1|0,0,0|I)),0|(F=S))),0|S,0|B,((0|B)<0)<<31>>31|0)),0|S,0|It),O=0|Mr(0|(O=0|br(0|U,0|z,0|(O=0|l[Jt>>2]),((0|O)<0)<<31>>31|0)),0|S,0|It),F=0|_r(0|(z=0|l[Xt>>2]),((0|z)<0)<<31>>31|0,0|G,0|F),G=S,z=_t,U=wt,H=It),l[at+16>>2]=V,l[at>>2]=C,l[(rt=at+4|0)>>2]=B,l[(it=at+8|0)>>2]=O,O=0|Mr(0|(O=0|br(0|(O=0|br(0|F,0|G,-1,-1)),0|S,0|z,0|U)),0|S,0|H),l[(nt=at+12|0)>>2]=O,O=0|Xr[15&jt](V),ne=.00048828125*+(0|l[N+4>>2])+1,ne=+fr(1,(0|l[Ft>>2])+O-(0|l[N>>2])|0)*ne*i,m[at+32>>2]=ne,l[at+28>>2]=(0|l[N>>2])-1+(0|l[Gt>>2]),ct&0==(0|(B=0|l[(O=at+20|0)>>2]))){if(C=0|zt(Et),l[O>>2]=C,!C){$t=48;break t}Cr(0|C,0,0|Et),C=at+24|0,$t=54}else if((0|l[(C=at+24|0)>>2])>>>0<Et>>>0){if(!(B=0|Wt(B,Et))){$t=53;break t}l[O>>2]=B,Cr(B+($t=0|l[C>>2])|0,0,Et-$t|0),$t=54}if(54==(0|$t)&&($t=0,l[C>>2]=Et),!ut)for(et=0,j=0|l[O>>2];;){X=(q=(((et>>>0)%((Y=0|l[Pt>>2])>>>0)|0)<<n)+D|0)+ht|0,J=(Y=(((et>>>0)/(Y>>>0)|0)<<t)+P|0)+ft|0,Q=(0|q)>(0|(Q=0|l[at>>2]))?q:Q,l[j>>2]=Q,q=(0|Y)>(0|(q=0|l[rt>>2]))?Y:q,l[(Y=j+4|0)>>2]=q,O=(0|X)<(0|(O=0|l[it>>2]))?X:O,l[(X=j+8|0)>>2]=O,B=(0|J)<(0|(B=0|l[nt>>2]))?J:B,l[(J=j+12|0)>>2]=B,Q=Q>>st<<st,q=q>>lt<<lt,O=0|Mr(0|(O=0|br(0|dt,0|pt,0|O,((0|O)<0)<<31>>31|0)),0|S,0|st),B=0|Mr(0|(B=0|br(0|gt,0|yt,0|B,((0|B)<0)<<31>>31|0)),0|S,0|lt),O=(O<<st)-Q>>st,l[(K=j+16|0)>>2]=O,B=(B<<lt)-q>>lt,l[(z=j+20|0)>>2]=B,$=0|k(O,B),G=0|k($,o),F=0|l[(tt=j+24|0)>>2];do{if(0==(0|F)&0!=(0|$)){if(C=0|zt(G),l[tt>>2]=C,!C){e=0,$t=100;break t}Cr(0|C,0,0|G),C=j+28|0,$t=64}else{if(G>>>0<=(0|l[(C=j+28|0)>>2])>>>0)break;if(!(B=0|Wt(F,G))){$t=63;break t}l[tt>>2]=B,Cr(B+($t=0|l[C>>2])|0,0,G-$t|0),$t=64}}while(0);if(64==(0|$t)&&($t=0,l[C>>2]=G,O=0|l[K>>2],B=0|l[z>>2]),C=(C=0|l[(F=j+32|0)>>2])?0|hn(C,O,B,a):0|cn(O,B,a),l[F>>2]=C,C||mt(a,2,19944,A),B=0|l[(F=j+36|0)>>2],O=0|l[K>>2],C=0|l[z>>2],C=B?0|hn(B,O,C,a):0|cn(O,C,a),l[F>>2]=C,C||mt(a,2,19966,x),0|$){Z=0;do{V=(U=(((Z>>>0)%((H=0|l[K>>2])>>>0)|0)<<st)+Q|0)+vt|0,W=(H=(((Z>>>0)/(H>>>0)|0)<<lt)+q|0)+bt|0;do{if(s){if(z=0|l[tt>>2],0|l[(C=z+(56*Z|0)|0)>>2]){O=0|l[(B=z+(56*Z|0)+32|0)>>2],G=44+(F=C=z+(56*Z|0)+8|0)|0;do{l[F>>2]=0,F=F+4|0}while((0|F)<(0|G));l[B>>2]=O}else{if(G=0|zt(8192),l[C>>2]=G,!G){e=0,$t=100;break t}if(l[z+(56*Z|0)+32>>2]=8192,G=0|Ut(10,32),l[z+(56*Z|0)+4>>2]=G,!G){e=0,$t=100;break t}l[z+(56*Z|0)+52>>2]=10,C=z+(56*Z|0)+8|0}G=0|l[j>>2],l[C>>2]=(0|U)>(0|G)?U:G,U=0|l[Y>>2],l[z+(56*Z|0)+12>>2]=(0|H)>(0|U)?H:U,H=0|l[X>>2],l[z+(56*Z|0)+16>>2]=(0|V)<(0|H)?V:H,V=0|l[J>>2],l[z+(56*Z|0)+20>>2]=(0|W)<(0|V)?W:V}else{if(B=0|l[tt>>2],0==(0|l[(C=B+(52*Z|0)+4|0)>>2])&&(z=0|Ut(100,24),l[C>>2]=z,0==(0|z))){e=0,$t=100;break t}if(0==(0|l[(C=B+(52*Z|0)+8|0)>>2])&&(z=0|Ut(100,24),l[C>>2]=z,0==(0|z))){e=0,$t=100;break t}if(O=(0|U)>(0|(O=0|l[j>>2]))?U:O,l[B+(52*Z|0)+12>>2]=O,H=(0|H)>(0|(F=0|l[Y>>2]))?H:F,l[B+(52*Z|0)+16>>2]=H,F=(0|V)<(0|(F=0|l[X>>2]))?V:F,l[B+(52*Z|0)+20>>2]=F,W=(0|W)<(0|(V=0|l[J>>2]))?W:V,l[B+(52*Z|0)+24>>2]=W,(O=0|k(W-H|0,F-O<<2))>>>0<=(0|l[(F=B+(52*Z|0)+36|0)>>2])>>>0)break;if(0|(C=0|l[(B=B+(52*Z|0)|0)>>2])&&Zt(C+-1|0),C=0|zt(1|O),l[B>>2]=C,!C){$t=87;break t}l[F>>2]=O,r[C>>0]=0,l[B>>2]=1+(0|l[B>>2])}}while(0);Z=Z+1|0}while(Z>>>0<$>>>0)}if((et=et+1|0)>>>0>=Mt>>>0)break;j=j+40|0}if(N=N+8|0,(ot=ot+1|0)>>>0>=(0|l[St>>2])>>>0)break;at=at+36|0}if((Dt=Dt+1|0)>>>0>=(0|l[Yt>>2])>>>0)break;Lt=Lt+136|0}if((e=e+1|0)>>>0>=(0|l[h>>2])>>>0){e=1,$t=100;break}R=R+1080|0,qt=qt+52|0,L=L+52|0,C=0|l[d>>2],I=0|l[f>>2],B=0|l[te>>2],t=0|l[Kt>>2]}switch(0|$t){case 12:return mt(a,1,19770,M),w=T,0|(ee=0);case 14:return mt(a,1,19770,E),w=T,0|(ee=0);case 22:l[P>>2]=0,l[B>>2]=0,l[I>>2]=0;break;case 31:return mt(a,1,19803,p),Zt(0|l[t>>2]),l[t>>2]=0,l[C>>2]=0,w=T,0|(ee=0);case 37:return mt(a,1,19770,g),w=T,0|(ee=0);case 39:return mt(a,1,19770,y),w=T,0|(ee=0);case 48:return mt(a,1,19843,v),w=T,0|(ee=0);case 53:return mt(a,1,19843,b),Zt(0|l[O>>2]),l[O>>2]=0,l[C>>2]=0,w=T,0|(ee=0);case 63:return Zt(0|l[tt>>2]),l[tt>>2]=0,l[C>>2]=0,mt(a,1,19886,_),w=T,0|(ee=0);case 87:return l[F>>2]=0,w=T,0|(ee=0);case 100:return w=T,0|e}return mt(a,1,19770,ee),w=T,0|(ee=0)}function rn(t,e,n,i,o,a){e|=0,n|=0,i|=0,o|=0,a|=0;var s,c,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,S=0;if(c=w,w=w+16|0,s=c,!(0|l[8+(t|=0)>>2])){if(l[t+36>>2]=e,u=0|l[76+(0|l[(A=t+28|0)>>2])>>2],l[(S=t+32|0)>>2]=u+(5640*e|0),_=t+20|0,!(x=0==(0|a))){if(h=0|l[20+(0|l[l[_>>2]>>2])>>2],m=0|l[u+(5640*e|0)+5584>>2],0|l[(g=h+16|0)>>2]){d=0|l[h+24>>2],p=0|l[(u=a+88|0)>>2],h=0,f=0;do{b=d+(136*f|0)+16|0,l[p+(592*e|0)+20+(f<<2)>>2]=l[b>>2],v=d+(136*f|0)+20|0,l[p+(592*e|0)+152+(f<<2)>>2]=l[v>>2],h=(0|k(0|l[v>>2],0|l[b>>2]))+h|0,l[p+(592*e|0)+284+(f<<2)>>2]=l[m+812+(f<<2)>>2],l[p+(592*e|0)+416+(f<<2)>>2]=l[m+944+(f<<2)>>2],f=f+1|0}while(f>>>0<(0|l[g>>2])>>>0)}else h=0,u=a+88|0;if(b=0|Ut(0|k(0|k(0|l[a+52>>2],h),0|l[a+56>>2]),32),l[(0|l[u>>2])+(592*e|0)+548>>2]=b,!b)return w=c,0|(a=0)}if(u=0|l[l[_>>2]>>2],0|l[(b=u+16|0)>>2])for(p=0|l[S>>2],e=0,y=h=0|l[u+20>>2],v=0|l[p+5584>>2];;){if(m=0|l[y+32>>2],u=0!=(0|(g=0|k((0|l[y+12>>2])-(0|l[y+4>>2])|0,(0|l[y+8>>2])-(0|l[y>>2])|0))),1==(0|l[v+20>>2])){if(u)for(d=v+1076|0,f=0,u=m;l[u>>2]=(0|l[u>>2])-(0|l[d>>2]),(0|(f=f+1|0))!=(0|g);)u=u+4|0}else if(u)for(d=v+1076|0,u=m,f=0;l[u>>2]=(0|l[u>>2])-(0|l[d>>2])<<11,(0|(f=f+1|0))!=(0|g);)u=u+4|0;if((e=e+1|0)>>>0>=(u=0|l[b>>2])>>>0)break;y=y+52|0,v=v+1080|0}else h=0|l[u+20>>2],p=0|l[S>>2],u=0;m=0|k((0|l[h+12>>2])-(0|l[h+4>>2])|0,(0|l[h+8>>2])-(0|l[h>>2])|0);t:do{switch(0|l[p+16>>2]){case 0:break;case 2:if(0|l[p+5608>>2]){if(!(d=0|zt(u<<2)))return w=c,0|(a=0);if(u=0|l[b>>2])for(f=0;l[d+(f<<2)>>2]=l[h+32>>2],(0|(f=f+1|0))!=(0|u);)h=h+52|0;else u=0;if(b=0==(0|De(0|l[5608+(0|l[S>>2])>>2],m,d,u,0|l[32+(0|l[24+(0|l[t+24>>2])>>2])>>2])),Zt(d),b)return w=c,0|(a=0)}break;default:if(f=0|l[h+32>>2],d=0|l[h+84>>2],u=0|l[h+136>>2],0|l[20+(0|l[p+5584>>2])>>2]){Be(f,d,u,m);break t}Pe(f,d,u,m);break t}}while(0);d=16+(u=0|l[l[_>>2]>>2])|0;t:do{if(0|l[d>>2]){f=0|l[5584+(0|l[S>>2])>>2],u=0|l[u+20>>2],h=0;e:for(;;){switch(0|l[f+20>>2]){case 1:if(!(0|In(u))){u=0,h=53;break e}break;case 0:if(!(0|Pn(u))){u=0,h=53;break e}}if((h=h+1|0)>>>0>=(0|l[d>>2])>>>0)break t;f=f+1080|0,u=u+52|0}if(53==(0|h))return w=c,0|u}}while(0);if(f=0|l[S>>2],!(d=0|Un(1)))return w=c,0|(a=0);do{if(1==(0|l[f+16>>2])){if(0|l[20+(0|l[f+5584>>2])>>2]){u=3,h=8;break}u=3,h=32;break}u=0|l[16+(0|l[t+24>>2])>>2],h=0|l[f+5600>>2]}while(0);if(_=0==(0|jn(d,0|l[l[_>>2]>>2],f,h,u)),Hn(d),_)return w=c,0|(a=0);if(u=0|l[A>>2],l[s>>2]=0,x||(l[a+12>>2]=0),5&r[u+93>>0]){if(!(0|qe(t,n,s,o,a)))return w=c,0|(a=0)}else if(0|l[8+(0|l[S>>2])>>2]){u=0;do{Je(t,u,1),u=u+1|0}while(u>>>0<(0|l[8+(0|l[S>>2])>>2])>>>0)}}return 0|a&&(l[a+12>>2]=1),(u=0|Qn(0|l[t+24>>2],0|l[t+28>>2]))?(a=0!=(0|Yn(u,0|l[t+36>>2],0|l[l[t+20>>2]>>2],0|l[8+(0|l[t+32>>2])>>2],n,i,o,a,0|l[t+4>>2],0|l[t>>2],0|l[t+16>>2],1)),qn(u),w=c,0|(a&=1)):(w=c,0|(a=0))}function on(t,e,n,i,r,o){e|=0,n|=0,i|=0,r|=0,o|=0;var a,s,c=0,u=0,h=0,f=0,d=0,p=0,g=0,y=0,v=0,b=0,_=0;if(s=w,w=w+16|0,f=s+8|0,h=s,c=s+12|0,l[(u=36+(t|=0)|0)>>2]=i,y=0|l[t+28>>2],l[(a=t+32|0)>>2]=(0|l[y+76>>2])+(5640*i|0),l[c>>2]=0,!(i=0|Qn(0|l[(v=t+24|0)>>2],y)))return w=s,0|(_=0);if(d=t+20|0,y=0==(0|function(t,e,n,i,r,o,a,s){e|=0,n|=0,i|=0,r|=0,o|=0,a|=0,s|=0;var c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0,Y=0,X=0,J=0,Q=0,q=0,K=0,$=0,tt=0;if(K=w,w=w+112|0,q=K+64|0,Y=K+32|0,j=K,W=K+96|0,Z=K+92|0,c=0|l[(t|=0)>>2],V=0|l[(F=t+4|0)>>2],a=0|l[V+76>>2],G=a+(5640*e|0)|0,H=1+(0|l[(z=a+(5640*e|0)+420|0)>>2])|0,!(V=0|Fe(c,V,e)))return w=K,0|($=0);U=c+16|0,O=a+(5640*e|0)+12|0,N=n+20|0,L=c+24|0,P=V,t=o,a=i,R=0;t:for(;;){if(-1==(0|l[P+80>>2])){$=4;break}if(!(D=0|zt(l[U>>2]<<2))){$=6;break}if(Cr(0|D,1,l[U>>2]<<2|0),0|Ye(P))for(T=P+24|0,I=P+28|0,C=P+36|0,B=P+32|0,E=a;;){if((0|l[O>>2])>>>0>(0|l[C>>2])>>>0)if(a=0|l[N>>2],e=0|l[T>>2],(0|l[I>>2])>>>0<(0|l[a+(52*e|0)+20>>2])>>>0){if(l[D+(e<<2)>>2]=0,M=0|l[F>>2],l[Z>>2]=0,!(0|Jn(M,a,G,P,W,E,Z,t,s))){$=45;break t}if(a=0|l[Z>>2],0|l[W>>2]){S=t-a|0,M=E+a|0,l[Z>>2]=0,e=0|l[(0|l[N>>2])+(52*(0|l[T>>2])|0)+24>>2],n=0|l[I>>2],o=0|l[(A=e+(136*n|0)+24|0)>>2];e:do{if(o){x=E+t|0,c=0,_=e+(136*n|0)+28|0,e=M,n=o;n:for(;;){if(o=0|l[_+20>>2],u=0|l[B>>2],(0|l[_+8>>2])!=(0|l[_>>2])&&(0|l[_+12>>2])!=(0|l[_+4>>2])&&0!=(0|(Q=0|k(0|l[o+(40*u|0)+20>>2],0|l[o+(40*u|0)+16>>2])))){for(n=0,b=0|l[o+(40*u|0)+24>>2];;){if(0|l[(y=b+40|0)>>2]){o=0|l[(v=b+44|0)>>2],u=0|l[b+4>>2];do{if(o){if((0|l[u+((h=o+-1|0)<<5)+8>>2])!=(0|l[u+(h<<5)+20>>2])){u=u+(h<<5)|0;break}l[v>>2]=o+1,u=u+(o<<5)|0}else l[v>>2]=1,l[b+36>>2]=0}while(0);if(m=b+36|0,g=b+32|0,p=e,((o=0|l[(d=u+28|0)>>2])+p|0)>>>0<p>>>0|(e+o|0)>>>0>x>>>0){e=o;break n}for(h=o,f=0|l[m>>2],p=d;;){if((d=h+f|0)>>>0<f>>>0){$=29;break t}if(o=0|l[b>>2],d>>>0>(0|l[g>>2])>>>0){if(!(o=0|Wt(o,d))){$=33;break t}f=0|l[m>>2],h=0|l[p>>2],l[g>>2]=h+f,l[b>>2]=o}if(kr(o+f|0,0|e,0|h),(h=0|l[(o=u+8|0)>>2])?f=0|l[m>>2]:(l[u>>2]=b,f=0|l[m>>2],l[u+4>>2]=f),tt=0|l[p>>2],e=e+tt|0,p=0|l[u+24>>2],d=p+h|0,l[o>>2]=d,p=(0|l[y>>2])-p|0,l[y>>2]=p,l[u+12>>2]=d,f=tt+f|0,l[m>>2]=f,l[(d=u+16|0)>>2]=(0|l[d>>2])+tt,!p)break;if(l[v>>2]=1+(0|l[v>>2]),tt=e,((o=0|l[(p=u+60|0)>>2])+tt|0)>>>0<tt>>>0|(e+o|0)>>>0>x>>>0){e=o;break n}u=u+32|0,h=o}l[b+48>>2]=l[v>>2]}if(!((n=n+1|0)>>>0<Q>>>0))break;b=b+56|0}n=0|l[A>>2]}if(!((c=c+1|0)>>>0<n>>>0)){$=43;break e}_=_+36|0}x=0|l[B>>2],M=0|l[I>>2],tt=0|l[T>>2],l[j>>2]=e,l[j+4>>2]=S,l[j+8>>2]=n,l[j+12>>2]=x,l[j+16>>2]=c,l[j+20>>2]=M,l[j+24>>2]=tt,mt(s,2,21892,j),e=0}else e=M,$=43}while(0);43==(0|$)&&($=0,e=e-M|0,l[Z>>2]=e),a=e+a|0}tt=0|l[T>>2],S=0|l[I>>2],e=(0|l[L>>2])+(52*tt|0)+36|0,M=0|l[e>>2],l[e>>2]=S>>>0>M>>>0?S:M,e=a,a=tt}else $=47;else a=0|l[N>>2],$=47;if(47==(0|$)){if($=0,tt=0|l[F>>2],l[Z>>2]=0,!(0|Jn(tt,a,G,P,W,E,Z,t,s)))break t;if(e=0|l[Z>>2],0|l[W>>2]){if(_=t-e|0,x=0|l[T>>2],a=0|l[(0|l[N>>2])+(52*x|0)+24>>2],A=0|l[I>>2],l[Z>>2]=0,v=0|l[a+(136*A|0)+24>>2]){for(b=0|l[B>>2],c=0,y=a+(136*A|0)+28|0,a=0;;){if(n=0|l[y+20>>2],(0|l[y+8>>2])!=(0|l[y>>2])&&(0|l[y+12>>2])!=(0|l[y+4>>2])&&0!=(0|(X=0|k(0|l[n+(40*b|0)+20>>2],0|l[n+(40*b|0)+16>>2]))))for(g=0|l[n+(40*b|0)+24>>2],n=0,d=a;;){if(f=0|l[(p=g+40|0)>>2]){u=0|l[(m=g+44|0)>>2],a=0|l[g+4>>2];do{if(u){if(h=u+1|0,(0|l[a+((o=u+-1|0)<<5)+8>>2])!=(0|l[a+(o<<5)+20>>2])){o=a+(o<<5)|0,h=u;break}l[m>>2]=h,o=a+(u<<5)|0}else l[m>>2]=1,l[g+36>>2]=0,o=a,h=1}while(0);if(a=0|l[o+28>>2],(u=a+d|0)>>>0<d>>>0|u>>>0>_>>>0){$=67;break t}for(d=o;tt=0|l[d+24>>2],l[(M=d+8|0)>>2]=(0|l[M>>2])+tt,f=f-tt|0;){if(h=h+1|0,l[m>>2]=h,a=0|l[d+60>>2],(o=a+u|0)>>>0<u>>>0|o>>>0>_>>>0){$=68;break t}d=d+32|0,u=o}l[p>>2]=0,a=u}else a=d;if(!((n=n+1|0)>>>0<X>>>0))break;g=g+56|0,d=a}if(!((c=c+1|0)>>>0<v>>>0))break;y=y+36|0}l[Z>>2]=a}else a=0;e=a+e|0,a=x}else a=0|l[T>>2]}if(0|l[D+(a<<2)>>2]&&(J=(0|l[L>>2])+(52*a|0)+36|0,0==(0|l[J>>2]))&&(l[J>>2]=(0|l[(0|l[N>>2])+(52*a|0)+20>>2])-1),a=E+e|0,t=t-e|0,!(0|Ye(P)))break;E=a}if(Zt(D),(R=R+1|0)>>>0>(0|l[z>>2])>>>0){$=79;break}P=P+232|0}if(4==(0|$))return Ue(V,H),w=K,0|(tt=0);if(6==(0|$))return Ue(V,H),w=K,0|(tt=0);if(29==(0|$))Q=0|l[B>>2],q=0|l[I>>2],tt=0|l[T>>2],l[Y>>2]=h,l[Y+4>>2]=f,l[Y+8>>2]=~h,l[Y+12>>2]=n,l[Y+16>>2]=Q,l[Y+20>>2]=c,l[Y+24>>2]=q,l[Y+28>>2]=tt,mt(s,1,21977,Y),$=45;else if(33==(0|$))Zt(0|l[b>>2]),l[b>>2]=0,l[g>>2]=0,$=45;else if(67==(0|$))l[Z>>2]=d,$=69;else if(68==(0|$))l[Z>>2]=u,l[p>>2]=f,$=69;else if(79==(0|$))return Ue(V,H),l[r>>2]=a-i,w=K,0|(tt=1);return 45==(0|$)?(Ue(V,H),Zt(D),w=K,0|(tt=0)):(69==(0|$)&&(l[q>>2]=a,l[q+4>>2]=_,l[q+8>>2]=n,l[q+12>>2]=b,l[q+16>>2]=c,l[q+20>>2]=A,l[q+24>>2]=x,mt(s,1,22076,q)),Ue(V,H),Zt(D),w=K,0|(tt=0))}(i,0|l[u>>2],0|l[l[d>>2]>>2],e,c,n,r,o)),qn(i),y)return w=s,0|(_=0);if(i=0|l[l[d>>2]>>2],n=0|l[5584+(0|l[a>>2])>>2],t=0|l[i+20>>2],!(c=0|Un(0)))return w=s,0|(_=0);r=i+16|0;t:do{if(0|l[r>>2]){for(e=0,i=n;0|Vn(c,t,i);){if((e=e+1|0)>>>0>=(0|l[r>>2])>>>0)break t;t=t+52|0,i=i+1080|0}return Hn(c),w=s,0|(_=0)}}while(0);Hn(c),c=16+(i=0|l[l[d>>2]>>2])|0;do{if(0|l[c>>2]){for(r=0|l[5584+(0|l[a>>2])>>2],i=0|l[i+20>>2],t=0,e=0|l[24+(0|l[v>>2])>>2];;){if(n=1+(0|l[e+36>>2])|0,1==(0|l[r+20>>2])){if(!(0|Cn(i,n))){i=0,t=47;break}}else if(!(0|Nn(i,n))){i=0,t=47;break}if((t=t+1|0)>>>0>=(0|l[c>>2])>>>0){t=14;break}r=r+1080|0,i=i+52|0,e=e+52|0}if(14==(0|t)){i=0|l[l[d>>2]>>2];break}if(47==(0|t))return w=s,0|i}}while(0);n=0|l[a>>2],t=0|l[i+20>>2],e=0|l[n+16>>2];do{if(0|e){if(u=0|k((0|l[t+12>>2])-(0|l[t+4>>2])|0,(0|l[t+8>>2])-(0|l[t>>2])|0),(i=0|l[(c=i+16|0)>>2])>>>0<=2){l[f>>2]=i,mt(o,1,20049,f);break}if((0|k((0|l[t+64>>2])-(0|l[t+56>>2])|0,(0|l[t+60>>2])-(0|l[t+52>>2])|0))>=(0|u)&&(0|k((0|l[t+116>>2])-(0|l[t+108>>2])|0,(0|l[t+112>>2])-(0|l[t+104>>2])|0))>=(0|u)){if(2!=(0|e)){if(i=0|l[t+32>>2],1==(0|l[20+(0|l[n+5584>>2])>>2])){Re(i,0|l[t+84>>2],0|l[t+136>>2],u);break}Le(i,0|l[t+84>>2],0|l[t+136>>2],u);break}if(!(0|l[(r=n+5604|0)>>2]))break;if(!(n=0|zt(i<<2)))return w=s,0|(_=0);if(i=0|l[c>>2])for(e=0;l[n+(e<<2)>>2]=l[t+32>>2],(0|(e=e+1|0))!=(0|i);)t=t+52|0;else i=0;if(y=0==(0|Ne(0|l[r>>2],u,n,i,0|l[32+(0|l[24+(0|l[v>>2])>>2])>>2])),Zt(n),!y)break;return w=s,0|(i=0)}return mt(o,1,19988,h),w=s,0|(_=0)}}while(0);if(i=0|l[l[d>>2]>>2],!(0|l[(y=i+16|0)>>2]))return w=s,0|(_=1);for(g=0,p=0|l[i+20>>2],d=0|l[5584+(0|l[a>>2])>>2],u=0|l[24+(0|l[v>>2])>>2];;){if(f=0|l[p+24>>2],h=0|l[u+36>>2],o=(0|l[f+(136*h|0)+8>>2])-(0|l[f+(136*h|0)>>2])|0,h=(0|l[f+(136*h|0)+12>>2])-(0|l[f+(136*h|0)+4>>2])|0,f=(0|l[p+8>>2])-(0|l[p>>2])|0,i=0|l[u+24>>2],0|l[u+32>>2]?(i=c=1<<i+-1,c=0-c|0):(i=1<<i,c=0),r=i+-1|0,t=0|l[p+32>>2],i=0!=(0|h),1==(0|l[d+20>>2])){if(i&&(_=d+1076|0,0|o))for(i=0;;){for(e=0,n=t;v=(0|l[_>>2])+(0|l[n>>2])|0,l[n>>2]=(0|v)<(0|c)?c:(0|v)>(0|r)?r:v,(0|(e=e+1|0))!=(0|o);)n=n+4|0;if((0|(i=i+1|0))==(0|h))break;t=t+(f<<2)|0}}else if(i&&(b=d+1076|0,0|o))for(n=0;;){for(i=0,e=t;v=0|dr(+m[e>>2]),v=(0|l[b>>2])+v|0,l[e>>2]=(0|v)<(0|c)?c:(0|v)>(0|r)?r:v,(0|(i=i+1|0))!=(0|o);)e=e+4|0;if((0|(n=n+1|0))==(0|h))break;t=t+(f<<2)|0}if((g=g+1|0)>>>0>=(0|l[y>>2])>>>0){i=1;break}p=p+52|0,d=d+1080|0,u=u+52|0}return w=s,0|i}function an(t,e,n){e|=0,n|=0;var i=0,o=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0;if(i=0|l[(y=24+(t|=0)|0)>>2],h=0==(0|(c=0|l[i+16>>2])))return 0|(y=1);for(f=0|l[i+24>>2],i=u=0|l[20+(0|l[l[t+20>>2]>>2])>>2],t=f,o=0,s=0;m=((m=0|l[t+24>>2])>>>3)+(0!=(7&m|0)&1)|0,g=(0|l[i+24>>2])+(136*(0|l[i+20>>2])|0)-136|0,o=(0|k(0|k(3==(0|m)?4:m,(0|l[g+8>>2])-(0|l[g>>2])|0),(0|l[g+12>>2])-(0|l[g+4>>2])|0))+o|0,(0|(s=s+1|0))!=(0|c);)i=i+52|0,t=t+52|0;if((i=o>>>0>n>>>0)|h)return 0|(y=1&(1^i));for(g=0;;){h=0|l[f+24>>2],p=0|l[u+24>>2],c=0|l[f+36>>2],d=(o=0|l[p+(136*c|0)+8>>2])-(s=0|l[p+(136*c|0)>>2])|0,p=(n=0|l[p+(136*c|0)+12>>2])-(c=0|l[p+(136*c|0)+4>>2])|0,m=(0|l[u+8>>2])-(0|l[u>>2])|0,h=(h>>>3)+(0!=(7&h|0)&1)|0;t:do{switch(1073741823&(3==(0|h)?4:h)|0){case 1:if(t=0|l[u+32>>2],i=0==(0|p)|0==(0|d),0|l[f+32>>2]){if(i)break t;for(h=o+(0|k(n+-1-c|0,d))-s|0,i=t,t=e,o=0;;){for(s=0,n=i,c=t;r[c>>0]=l[n>>2],(0|(s=s+1|0))!=(0|d);)n=n+4|0,c=c+1|0;if((0|(o=o+1|0))==(0|p))break;i=i+(m<<2)|0,t=t+d|0}e=e+h|0;break t}if(i)break t;for(h=o+(0|k(n+-1-c|0,d))-s|0,c=0,o=e;;){for(i=0,s=t,n=o;r[n>>0]=l[s>>2],(0|(i=i+1|0))!=(0|d);)s=s+4|0,n=n+1|0;if((0|(c=c+1|0))==(0|p))break;t=t+(m<<2)|0,o=o+d|0}e=e+h|0;break t;case 2:if(i=0|l[u+32>>2],t=0==(0|p)|0==(0|d),0|l[f+32>>2]){if(t)break t;for(c=e+((0|k(n+-1-c|0,(h=o<<1)-(s<<=1)|0))+h-s)|0,s=0;;){for(t=e,o=i,n=0;a[t>>1]=l[o>>2],(0|(n=n+1|0))!=(0|d);)t=t+2|0,o=o+4|0;if((0|(s=s+1|0))==(0|p)){e=c;break}e=e+(d<<1)|0,i=i+(m<<2)|0}}else{if(t)break t;for(c=e+((0|k(n+-1-c|0,(h=o<<1)-(o=s<<1)|0))+h-o)|0,o=0;;){for(t=i,s=0,n=e;a[n>>1]=l[t>>2],(0|(s=s+1|0))!=(0|d);)t=t+4|0,n=n+2|0;if((0|(o=o+1|0))==(0|p)){e=c;break}i=i+(m<<2)|0,e=e+(d<<1)|0}}break;case 4:if(!(0==(0|p)|0==(0|d)))for(c=e+((0|k(n+-1-c|0,(h=o<<2)-(i=s<<2)|0))+h-i)|0,i=0|l[u+32>>2],s=0;;){for(t=e,o=i,n=0;l[t>>2]=l[o>>2],(0|(n=n+1|0))!=(0|d);)t=t+4|0,o=o+4|0;if((0|(s=s+1|0))==(0|p)){e=c;break}e=e+(d<<2)|0,i=i+(m<<2)|0}}}while(0);if((g=g+1|0)>>>0>=(0|l[16+(0|l[y>>2])>>2])>>>0){e=1;break}u=u+52|0,f=f+52|0}return 0|e}function sn(t){var e=0,n=0,i=0,r=0,o=0;if(e=0|l[24+(t|=0)>>2],!(r=0|l[e+16>>2]))return 0|(r=0);for(i=0|l[20+(0|l[l[t+20>>2]>>2])>>2],e=0|l[e+24>>2],t=0,n=0;o=((o=0|l[e+24>>2])>>>3)+(0!=(7&o|0)&1)|0,t=(0|k(0|k((0|l[i+12>>2])-(0|l[i+4>>2])|0,(0|l[i+8>>2])-(0|l[i>>2])|0),3==(0|o)?4:o))+t|0,!((n=n+1|0)>>>0>=r>>>0);)i=i+52|0,e=e+52|0;return 0|t}function ln(t,e,n){e|=0,n|=0;var i,o,s=0,c=0,h=0,d=0,p=0,m=0,g=0;if(i=0|l[24+(t|=0)>>2],m=0==(0|(p=0|l[(o=i+16|0)>>2])))s=0;else for(c=0|l[20+(0|l[l[t+20>>2]>>2])>>2],h=0|l[i+24>>2],s=0,d=0;g=((g=0|l[h+24>>2])>>>3)+(0!=(7&g|0)&1)|0,s=(0|k(0|k((0|l[c+12>>2])-(0|l[c+4>>2])|0,(0|l[c+8>>2])-(0|l[c>>2])|0),3==(0|g)?4:g))+s|0,(0|(d=d+1|0))!=(0|p);)c=c+52|0,h=h+52|0;if((s=(0|s)!=(0|n))|m)return 0|(g=1&(1^s));for(t=0|l[20+(0|l[l[t+20>>2]>>2])>>2],n=0|l[i+24>>2],m=0;;){g=0|l[n+24>>2],c=(0|l[t+8>>2])-(0|l[t>>2])|0,h=(0|l[t+12>>2])-(0|l[t+4>>2])|0,p=0|k(h,c),g=(g>>>3)+(0!=(7&g|0)&1)|0;t:do{switch(1073741823&(3==(0|g)?4:g)|0){case 1:if(c=0|l[t+32>>2],s=0!=(0|p),0|l[n+32>>2]){if(!s)break t;for(s=c,c=e,h=0;l[s>>2]=r[c>>0],(0|(h=h+1|0))!=(0|p);)s=s+4|0,c=c+1|0;e=e+p|0;break t}if(!s)break t;for(h=0,s=c,c=e;l[s>>2]=u[c>>0],(0|(h=h+1|0))!=(0|p);)s=s+4|0,c=c+1|0;e=e+p|0;break t;case 2:if(s=0|l[t+32>>2],d=0!=(0|p),0|l[n+32>>2]){if(!d)break t;for(h=e+(0|k(h<<1,c))|0,c=0;;){if(l[s>>2]=a[e>>1],(0|(c=c+1|0))==(0|p)){e=h;break}e=e+2|0,s=s+4|0}}else{if(!d)break t;for(h=e+(0|k(h<<1,c))|0,c=0;;){if(l[s>>2]=f[e>>1],(0|(c=c+1|0))==(0|p)){e=h;break}e=e+2|0,s=s+4|0}}break;case 4:if(p)for(h=e+(0|k(h<<2,c))|0,c=0|l[t+32>>2],s=0;;){if(l[c>>2]=l[e>>2],(0|(s=s+1|0))==(0|p)){e=h;break}c=c+4|0,e=e+4|0}}}while(0);if((m=m+1|0)>>>0>=(0|l[o>>2])>>>0){e=1;break}t=t+52|0,n=n+52|0}return 0|e}function cn(t,e,n){t|=0,e|=0,n|=0;var i,r,o,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0;if(o=w,w=w+288|0,h=o+16|0,c=o+8|0,r=o+152|0,b=o+24|0,!(i=0|Ut(1,20)))return mt(n,1,20123,o),w=o,0|(b=0);for(l[i>>2]=t,l[(f=i+4|0)>>2]=e,l[r>>2]=t,l[b>>2]=e,l[(u=i+8|0)>>2]=0,v=0,s=0;y=0|k(e,t),t=(t+1|0)/2|0,l[r+((a=v+1|0)<<2)>>2]=t,e=(e+1|0)/2|0,l[b+(a<<2)>>2]=e,s=s+y|0,!(y>>>0<=1);)v=a;if(l[u>>2]=s,!s)return Zt(i),mt(n,2,20161,c),w=o,0|(b=0);if(e=0|Ut(s,16),l[i+12>>2]=e,!e)return mt(n,1,20211,h),Zt(i),w=o,0|(b=0);if(y=0|l[u>>2],l[i+16>>2]=y<<4,t=e+((0|k(0|l[f>>2],0|l[i>>2]))<<4)|0,v){g=0,s=t,a=t,t=e;do{p=0|l[b+(g<<2)>>2];t:do{if((0|p)>0){if((0|(m=0|l[r+(g<<2)>>2]))<=0)for(u=p+-1|0,n=0;;){if(c=(d=0!=(1&n|0)|(0|n)==(0|u))?a:s,s=d?a:s+(m<<4)|0,(0|(n=n+1|0))>=(0|p)){a=c;break t}a=c}f=(m+2+((0|(f=~m))>-3?f:-3)|0)>>>1,d=p+-1|0,h=0;do{for(u=a+16|0,n=m;;){if(l[t>>2]=a,c=t+16|0,1==(0|n)){t=c;break}if(l[c>>2]=a,t=t+32|0,!((0|n)>2))break;n=n+-2|0,a=a+16|0}u=u+(f<<4)|0,a=(n=0!=(1&h|0)|(0|h)==(0|d))?u:s,s=n?u:s+(m<<4)|0,h=h+1|0}while((0|h)<(0|p))}}while(0);g=g+1|0}while((0|g)!=(0|v))}else t=e;if(l[t>>2]=0,!y)return w=o,0|(b=i);for(t=0;l[e+4>>2]=999,l[e+8>>2]=0,l[e+12>>2]=0,(0|(t=t+1|0))!=(0|y);)e=e+16|0;return w=o,0|i}function un(t){var e,n=0;if((t|=0)&&(e=0|l[t+8>>2]))for(n=0,t=0|l[t+12>>2];l[t+4>>2]=999,l[t+8>>2]=0,l[t+12>>2]=0,!((n=n+1|0)>>>0>=e>>>0);)t=t+16|0}function hn(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0;if(o=w,w=w+272|0,d=o,r=o+136|0,v=o+8|0,!(t|=0))return w=o,0|(v=0);if(f=t+4|0,(0|l[t>>2])==(0|e)&&(0|l[f>>2])==(0|n))a=t+8|0;else{for(l[t>>2]=e,l[f>>2]=n,l[r>>2]=e,l[v>>2]=n,l[(a=t+8|0)>>2]=0,y=0,s=n,c=e,h=0;g=0|k(s,c),c=(c+1|0)/2|0,l[r+((u=y+1|0)<<2)>>2]=c,s=(s+1|0)/2|0,l[v+(u<<2)>>2]=s,h=h+g|0,!(g>>>0<=1);)y=u;if(l[a>>2]=h,!h)return 0|(s=0|l[(a=t+12|0)>>2])&&(Zt(s),l[a>>2]=0),Zt(t),w=o,0|(v=0);c=h<<4,u=t+16|0,h=t+12|0;do{if(c>>>0>(0|l[u>>2])>>>0){if(0|(s=0|Wt(0|l[h>>2],c))){l[h>>2]=s,Cr(s+(n=0|l[u>>2])|0,0,c-n|0),l[u>>2]=c,n=0|l[f>>2],e=0|l[t>>2];break}return mt(i,1,20255,d),0|(a=0|l[h>>2])&&(Zt(a),l[h>>2]=0),Zt(t),w=o,0|(v=0)}}while(0);if(e=(s=0|l[h>>2])+((0|k(n,e))<<4)|0,y){n=e,g=0;do{p=0|l[v+(g<<2)>>2];t:do{if((0|p)>0){if((0|(m=0|l[r+(g<<2)>>2]))<=0)for(h=p+-1|0,u=0;;){if(c=(d=0!=(1&u|0)|(0|u)==(0|h))?e:n+(m<<4)|0,e=d?e:n,(0|(u=u+1|0))>=(0|p)){n=c;break t}n=c}for(f=(m+2+((0|(f=~m))>-3?f:-3)|0)>>>1,d=p+-1|0,i=0;;){for(h=e+16|0,u=m;;){if(l[s>>2]=e,c=s+16|0,1==(0|u)){s=c;break}if(l[c>>2]=e,s=s+32|0,!((0|u)>2))break;u=u+-2|0,e=e+16|0}if(e=h+(f<<4)|0,c=(h=0!=(1&i|0)|(0|i)==(0|d))?e:n+(m<<4)|0,e=h?e:n,(0|(i=i+1|0))>=(0|p)){n=c;break}n=c}}}while(0);g=g+1|0}while((0|g)!=(0|y))}l[s>>2]=0}if(!(e=0|l[a>>2]))return w=o,0|(v=t);for(a=0,s=0|l[t+12>>2];l[s+4>>2]=999,l[s+8>>2]=0,l[s+12>>2]=0,(0|(a=a+1|0))!=(0|e);)s=s+16|0;return w=o,0|t}function fn(t){var e,n;(t|=0)&&(0|(n=0|l[(e=t+12|0)>>2])&&(Zt(n),l[e>>2]=0),Zt(t))}function dn(t,e,n){if(e|=0,n|=0,t=(0|l[12+(t|=0)>>2])+(e<<4)|0)for(;;){if((0|l[(e=t+4|0)>>2])<=(0|n)){t=4;break}if(l[e>>2]=n,!(t=0|l[t>>2])){t=4;break}}}function pn(t,e,n,i){t|=0,n|=0,i|=0;var r,o,a=0,s=0,c=0;if(o=w,w=w+128|0,r=o,n=(0|l[12+(e|=0)>>2])+(n<<4)|0,e=0|l[n>>2])for(a=0,s=e;;){if(c=a+1|0,l[r+(a<<2)>>2]=n,!(e=0|l[s>>2])){e=0,n=s;break}n=s,a=c,s=e}else e=0,c=0;for(;;){(0|e)>(0|(a=0|l[(s=n+8|0)>>2]))?l[s>>2]=e:e=a;t:do{if((0|e)<(0|i)){for(a=n+4|0;!((0|e)>=(0|l[a>>2]));)if(Mn(t,0,1),(0|(e=e+1|0))>=(0|i))break t;0|l[(n=n+12|0)>>2]||(Mn(t,1,1),l[n>>2]=1)}}while(0);if(l[s>>2]=e,!c)break;n=0|l[r+((s=c+-1|0)<<2)>>2],c=s}w=o}function mn(t,e,n,i){t|=0,n|=0,i|=0;var r,o,a=0,s=0,c=0;if(o=w,w=w+128|0,r=o,e=(0|l[12+(e|=0)>>2])+(n<<4)|0,n=0|l[e>>2])for(a=0;;){if(s=a+1|0,l[r+(a<<2)>>2]=e,!(e=0|l[n>>2])){a=0,e=n;break}c=n,a=s,n=e,e=c}else a=0,s=0;for(;;){(0|a)>(0|(n=0|l[(c=e+8|0)>>2]))&&(l[c>>2]=a,n=a),a=e+4|0;t:do{if((0|n)<(0|i)){for(e=n;;){if((0|e)>=(0|l[a>>2]))break t;if(0|En(t,1))break;if((0|(e=e+1|0))>=(0|i))break t}l[a>>2]=e}else e=n}while(0);if(l[c>>2]=e,!s)break;a=e,e=0|l[r+((c=s+-1|0)<<2)>>2],s=c}return w=o,(0|l[a>>2])<(0|i)|0}function gn(){var t=0,e=0;return(t=0|Ut(1,12))?(l[t+4>>2]=10,e=0|Ut(10,4),l[t+8>>2]=e,0|e?0|(e=t):(Zt(t),0|(e=0))):0|(t=0)}function yn(t){var e;(t|=0)&&(0|(e=0|l[t+8>>2])&&Zt(e),Zt(t))}function vn(t,e,n){e|=0,n|=0;var i,r,o,a=0,s=0;o=w,w=w+16|0,r=o,s=0|l[(i=4+(t|=0)|0)>>2],a=0|l[t>>2];do{if((0|s)==(0|a)){if(s=s+10|0,l[i>>2]=s,0|(s=0|Wt(0|l[(a=t+8|0)>>2],s<<2))){l[a>>2]=s,a=0|l[t>>2];break}return Zt(0|l[a>>2]),l[i>>2]=0,l[t>>2]=0,mt(n,1,20303,r),w=o,0|(e=0)}s=0|l[t+8>>2]}while(0);return l[s+(a<<2)>>2]=e,l[t>>2]=a+1,w=o,0|(e=1)}function bn(t){return 0|l[(t|=0)>>2]}function _n(t){return 0|l[8+(t|=0)>>2]}function wn(t){l[(t|=0)>>2]=0}function An(){return 0|zt(20)}function xn(t){(t|=0)&&Zt(t)}function Sn(t){return(0|l[8+(t|=0)>>2])-(0|l[t>>2])|0}function Mn(t,e,n){t|=0,e|=0;var i,o,a,s,c=0,u=0,h=0,f=0;if(n|=0){a=t+12|0,s=t+8|0,i=t+4|0,h=n+-1|0,t=0|l[(o=t+16|0)>>2];do{f=e>>>h&1,t||(t=(c=0|l[a>>2])<<8&65280,l[a>>2]=t,t=65280==(0|t)?7:8,l[o>>2]=t,u=0|l[s>>2],(0|l[i>>2])>>>0>u>>>0&&(l[s>>2]=u+1,r[u>>0]=c,t=0|l[o>>2])),t=t+-1|0,l[o>>2]=t,l[a>>2]=l[a>>2]|f<<t,h=h+-1|0}while(h>>>0<n>>>0)}}function En(t,e){t|=0;var n,i,r,o=0,a=0,s=0,c=0,h=0;if(!(e|=0))return 0|(h=0);i=t+16|0,r=t+12|0,h=t+8|0,n=t+4|0,c=e+-1|0,t=0,o=0|l[r>>2],a=0|l[i>>2];do{a||(o=o<<8&65280,l[r>>2]=o,a=65280==(0|o)?7:8,l[i>>2]=a,s=0|l[h>>2],(0|l[n>>2])>>>0>s>>>0&&(l[h>>2]=s+1,o=0|o|u[s>>0],l[r>>2]=o)),a=a+-1|0,l[i>>2]=a,t|=(o>>>a&1)<<c,c=c+-1|0}while(c>>>0<e>>>0);return 0|t}function Tn(t){var e=0,n=0,i=0,r=0,o=0;e=0|l[(o=12+(t|=0)|0)>>2];do{if(255==(255&e|0)){if(r=e<<8&65280,l[o>>2]=r,l[(e=t+16|0)>>2]=65280==(0|r)?7:8,i=0|l[(n=t+8|0)>>2],(0|l[t+4>>2])>>>0>i>>>0){l[n>>2]=i+1,l[o>>2]=0|r|u[i>>0];break}return 0|(o=0)}e=t+16|0}while(0);return l[e>>2]=0,0|(o=1)}function In(t){return 0|kn(t|=0,1)}function kn(t,e){e|=0;var n,i=0,r=0,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,w=0,A=0,x=0,S=0,M=0;if(M=(0|l[8+(t|=0)>>2])-(0|l[t>>2])|0,i=(s=0|l[t+16>>2])-1|0,n=0|l[t+32>>2],a=(t=0|l[t+24>>2])+(136*i|0)|0,o=0==(0|i))t=0;else{r=0;do{x=t,t=t+136|0,r=(S=r>>>0<(S=(0|l[x+144>>2])-(0|l[t>>2])|0)>>>0?S:r)>>>0<(x=(0|l[x+148>>2])-(0|l[x+140>>2])|0)>>>0?x:S,i=i+-1|0}while(0!=(0|i));t=r<<2}if(!(0==(0|t)|0!=(0|(S=0|zt(t)))))return 0|(M=0);if(!o)for(x=S+4|0,b=s+-2|0;;){u=a,a=a+-136|0,A=0|l[u>>2],v=(0|l[u+8>>2])-A|0,f=0|l[u+4>>2],_=(0|l[u+12>>2])-f|0,w=(0|l[u+-128>>2])-(0|l[a>>2])|0,A&=1,f&=1,d=_-(u=(0|l[u+-124>>2])-(0|l[u+-132>>2])|0)|0,y=(0|v)>0;t:do{if(y){if(c=0==(0|u),p=0==(0|d),m=x+(0-f<<2)|0,g=0|k(u,M),h=S+(f<<2)|0,(0|_)>0)for(s=0;;){o=n+(s<<2)|0,t=0;do{r=o+((0|k(t,M))<<2)|0,l[S+(t<<2)>>2]=l[r>>2],t=t+1|0}while((0|t)!=(0|_));if(oo[3&e](S,d,u,f),!c)for(t=o,i=u,r=h;i=i+-1|0,l[t>>2]=l[r>>2],i;)t=t+(M<<2)|0,r=r+8|0;if(!p)for(t=o+(g<<2)|0,i=d,r=m;i=i+-1|0,l[t>>2]=l[r>>2],i;)t=t+(M<<2)|0,r=r+8|0;if((0|(s=s+1|0))==(0|v))break t}if(c)for(t=0;;){if(oo[3&e](S,d,0,f),!p)for(i=n+(t<<2)+(g<<2)|0,r=d,o=m;r=r+-1|0,l[i>>2]=l[o>>2],r;)i=i+(M<<2)|0,o=o+8|0;if((0|(t=t+1|0))==(0|v))break t}else s=0;do{for(o=n+(s<<2)|0,oo[3&e](S,d,u,f),t=o,i=u,r=h;i=i+-1|0,l[t>>2]=l[r>>2],i;)t=t+(M<<2)|0,r=r+8|0;if(!p)for(t=o+(g<<2)|0,i=d,r=m;i=i+-1|0,l[t>>2]=l[r>>2],i;)t=t+(M<<2)|0,r=r+8|0;s=s+1|0}while((0|s)!=(0|v))}}while(0);h=v-w|0;t:do{if((0|_)>0){if(c=(0|w)>0,u=S+(A<<2)|0,f=(0|h)>0,d=x+(0-A<<2)|0,y)for(s=0;;){o=n+((0|k(s,M))<<2)|0,t=0;do{l[S+(t<<2)>>2]=l[o+(t<<2)>>2],t=t+1|0}while((0|t)!=(0|v));if(oo[3&e](S,h,w,A),c)for(t=o,i=0,r=u;l[t>>2]=l[r>>2],(0|(i=i+1|0))!=(0|w);)t=t+4|0,r=r+8|0;if(f)for(t=o+(w<<2)|0,i=0,r=d;l[t>>2]=l[r>>2],(0|(i=i+1|0))!=(0|h);)t=t+4|0,r=r+8|0;if((0|(s=s+1|0))==(0|_))break t}if(c)s=0;else for(t=0;;){if(oo[3&e](S,h,w,A),f)for(i=n+((0|k(t,M))<<2)+(w<<2)|0,r=0,o=d;l[i>>2]=l[o>>2],(0|(r=r+1|0))!=(0|h);)i=i+4|0,o=o+8|0;if((0|(t=t+1|0))==(0|_))break t}do{for(o=n+((0|k(s,M))<<2)|0,oo[3&e](S,h,w,A),t=o,i=0,r=u;l[t>>2]=l[r>>2],(0|(i=i+1|0))!=(0|w);)t=t+4|0,r=r+8|0;if(f)for(t=o+(w<<2)|0,i=0,r=d;l[t>>2]=l[r>>2],(0|(i=i+1|0))!=(0|h);)t=t+4|0,r=r+8|0;s=s+1|0}while((0|s)!=(0|_))}}while(0);if(!b)break;b=b+-1|0}return Zt(S),0|(M=1)}function Cn(t,e){e|=0;var n,i,r,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0;if(r=w,w=w+32|0,i=r+16|0,P=r,u=0|l[24+(t|=0)>>2],c=(0|l[u+8>>2])-(0|l[u>>2])|0,h=(0|l[u+12>>2])-(0|l[u+4>>2])|0,n=(0|l[t+8>>2])-(0|l[t>>2])|0,1==(0|e))return w=r,0|(P=1);if(s=0==(0|(f=e+-1|0)))e=0;else{e=u,o=0,a=f;do{B=e,e=e+136|0,o=(R=o>>>0<(R=(0|l[B+144>>2])-(0|l[e>>2])|0)>>>0?R:o)>>>0<(B=(0|l[B+148>>2])-(0|l[B+140>>2])|0)>>>0?B:R,a=a+-1|0}while(0!=(0|a));e=o<<2}if(R=0|Ht(e),l[i>>2]=R,!R)return w=r,0|(P=0);if(l[P>>2]=R,!s){x=t+32|0,S=i+8|0,M=P+8|0,E=i+4|0,T=i+12|0,I=P+4|0,C=P+12|0,B=R+4|0;do{if(A=0|l[x>>2],v=u,u=u+136|0,l[S>>2]=c,l[M>>2]=h,o=0|l[u>>2],g=c,c=(0|l[v+144>>2])-o|0,e=0|l[(y=v+140|0)>>2],_=h,h=(0|l[v+148>>2])-e|0,v=c-g|0,l[E>>2]=v,o=(0|o)%2|0,l[T>>2]=o,!(b=0==(0|h))){for(d=c<<2,p=0==(0|g),m=0==(0|v),e=0;;){if(t=A+((0|k(e,n))<<2)|0,p)a=0;else{for(o=R+(o<<2)|0,a=t,s=g;s=s+-1|0,l[o>>2]=l[a>>2],s;)o=o+8|0,a=a+4|0;o=0|l[T>>2],a=g}if(!m)for(s=B+(0-o<<2)|0,o=t+(a<<2)|0,a=v;a=a+-1|0,l[s>>2]=l[o>>2],a;)s=s+8|0,o=o+4|0;if(Bn(i),kr(0|t,0|R,0|d),(0|(e=e+1|0))==(0|h))break;o=0|l[T>>2]}e=0|l[y>>2]}m=h-_|0,l[I>>2]=m,o=(0|e)%2|0,l[C>>2]=o;t:do{if(0|c){if(d=0==(0|_),p=0==(0|m),b)for(e=0;;){if(t=A+(e<<2)|0,d)a=0;else{for(o=R+(o<<2)|0,a=t,s=_;s=s+-1|0,l[o>>2]=l[a>>2],s;)o=o+8|0,a=a+(n<<2)|0;o=0|l[C>>2],a=_}if(!p)for(s=B+(0-o<<2)|0,o=t+((0|k(a,n))<<2)|0,a=m;a=a+-1|0,l[s>>2]=l[o>>2],a;)s=s+8|0,o=o+(n<<2)|0;if(Bn(P),(0|(e=e+1|0))==(0|c))break t;o=0|l[C>>2]}else e=0;for(;;){if(t=A+(e<<2)|0,d)a=0;else{for(o=R+(o<<2)|0,a=t,s=_;s=s+-1|0,l[o>>2]=l[a>>2],s;)o=o+8|0,a=a+(n<<2)|0;o=0|l[C>>2],a=_}if(!p)for(s=B+(0-o<<2)|0,o=t+((0|k(a,n))<<2)|0,a=m;a=a+-1|0,l[s>>2]=l[o>>2],a;)s=s+8|0,o=o+(n<<2)|0;Bn(P),o=0;do{b=A+((0|k(o,n))+e<<2)|0,l[b>>2]=l[R+(o<<2)>>2],o=o+1|0}while((0|o)!=(0|h));if((0|(e=e+1|0))==(0|c))break t;o=0|l[C>>2]}}}while(0);f=f+-1|0}while(0!=(0|f))}return Vt(R),w=r,0|(P=1)}function Bn(t){var e,n,i,r=0,o=0,a=0;if(e=0|l[(t|=0)>>2],n=0|l[t+4>>2],i=0|l[t+8>>2],0|l[t+12>>2])if(1==(0|n)&0==(0|i))l[e>>2]=(0|l[e>>2])/2|0;else{if((0|i)>0){r=n+-1|0,t=0;do{o=t,t=t+1|0,l[(a=e+((o<<1|1)<<2)|0)>>2]=(0|l[a>>2])-(2+(0|l[e+(((0|o)>=(0|n)?r:o)<<1<<2)>>2])+(0|l[e+(((0|t)>=(0|n)?r:t)<<1<<2)>>2])>>2)}while((0|t)!=(0|i))}if(!((0|n)<=0)){r=i+-1|0,t=0;do{l[(a=e+(t<<1<<2)|0)>>2]=((0|l[e+(((0|t)<1?1:(((0|t)>(0|i)?i:t)<<1)-1|0)<<2)>>2])+(0|l[e+((((0|t)>=(0|i)?r:t)<<1|1)<<2)>>2])>>1)+(0|l[a>>2]),t=t+1|0}while((0|t)!=(0|n))}}else{if(!((o=(0|n)>0)|(0|i)>1))return;if((0|i)>0){r=n+-1|0,t=0;do{l[(a=e+(t<<1<<2)|0)>>2]=(0|l[a>>2])-(2+(0|l[e+(((0|t)<1?1:(((0|t)>(0|n)?n:t)<<1)-1|0)<<2)>>2])+(0|l[e+((((0|t)>=(0|n)?r:t)<<1|1)<<2)>>2])>>2),t=t+1|0}while((0|t)!=(0|i))}if(!o)return;r=i+-1|0,t=0;do{o=t,t=t+1|0,l[(a=e+((o<<1|1)<<2)|0)>>2]=((0|l[e+(((0|t)>=(0|i)?r:t)<<1<<2)>>2])+(0|l[e+(((0|o)>=(0|i)?r:o)<<1<<2)>>2])>>1)+(0|l[a>>2])}while((0|t)!=(0|n))}}function Rn(t,e){return+ +y[56+(80*(e|=0)|0)+((t|=0)<<3)>>3]}function Pn(t){return 0|kn(t|=0,2)}function Ln(t,e){return+ +y[376+(80*(e|=0)|0)+((t|=0)<<3)>>3]}function Dn(t,e){e|=0;var n,i,r,o,a=0,s=0,c=0,u=0,h=0,f=0,d=0;if(i=(3*(0|l[(n=4+(t|=0)|0)>>2])|0)-2|0){r=t+20|0,o=t+24|0,d=0;do{if(d?(s=1+(((c=d+-1|0)>>>0)%3|0)|0,c=1+((c>>>0)/3|0)|0):(s=0,c=0),u=0==(0|s)|0==(0|l[r>>2])?0:(s+-1|0)>>>0<2?1:2,a=0|l[o>>2]?+(1<<u|0)/+y[376+(80*s|0)+((0|l[n>>2])+~c<<3)>>3]:1,h=u+e|0,(0|(f=~~+M(8192*a)))>1){for(s=f,u=0;;){if(!(s>>>0>3)){s=f,c=0;break}s>>>=1,u=u+1|0}for(;s>>>0>3;)s>>>=1,c=c+1|0;c=10-c|0,s=u+-12|0}else c=11,s=-13;l[t+28+(d<<3)+4>>2]=2047&((0|c)<0?f>>0-c:f<<c),l[t+28+(d<<3)>>2]=h-s,d=d+1|0}while((0|d)!=(0|i))}}function Nn(t,e){e|=0;var n,i,r,o,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0;if(o=w,w=w+32|0,r=o+16|0,Z=o,d=0|l[24+(t|=0)>>2],u=0|l[d+8>>2],h=0|l[d>>2],y=0|l[d+12>>2],v=0|l[d+4>>2],i=(m=0|l[(n=t+8|0)>>2])-(g=0|l[t>>2])|0,c=0==(0|(f=e+-1|0)))e=80;else{e=d,a=0,s=f;do{H=e,e=e+136|0,a=(V=a>>>0<(V=(0|l[H+144>>2])-(0|l[e>>2])|0)>>>0?V:a)>>>0<(H=(0|l[H+148>>2])-(0|l[H+140>>2])|0)>>>0?H:V,s=s+-1|0}while(0!=(0|s));e=80+(a<<4)|0}if(p=0|Ht(e),l[r>>2]=p,!p)return w=o,0|(Z=0);l[Z>>2]=p;t:do{if(c)e=p;else for(C=t+32|0,B=t+12|0,R=t+4|0,P=r+8|0,L=Z+8|0,D=r+4|0,N=r+12|0,O=i<<2,F=i<<1,G=3*i|0,z=Z+4|0,U=Z+12|0,H=m-g<<2,V=g-m<<2,b=u-h|0,a=f,e=p,s=p,u=m,c=g,S=y-v|0,y=p;;){M=0|l[C>>2],c=0|k((0|l[B>>2])-(0|l[R>>2])|0,u-c|0),l[P>>2]=b,l[L>>2]=S,E=d+136|0,T=(v=0|l[d+144>>2])-(_=0|l[E>>2])|0,I=(h=0|l[d+148>>2])-(u=0|l[(g=d+140|0)>>2])|0,l[D>>2]=T-b,l[N>>2]=(0|_)%2|0;do{if((0|I)>3){if(m=M+(O<<2)+((0|k(H,p=(h+4+((0|(p=u+-1-h|0))>-8?p:-8)-u|0)>>>2))<<2)|0,p=0|k(V,p),!((0|T)>0)){for(u=I,h=c,f=M;On(r,f,i,h),Fn(r),(0|u)>7;)u=u+-4|0,h=h-O|0,f=f+(O<<2)|0;c=V+c+p|0,h=m;break}for(u=I,h=c,f=M;;){On(r,f,i,h),Fn(r),d=T;do{x=d,l[f+((d=d+-1|0)<<2)>>2]=l[y+(d<<4)>>2],l[f+(d+i<<2)>>2]=l[y+(d<<4)+4>>2],l[f+(d+F<<2)>>2]=l[y+(d<<4)+8>>2],l[f+(d+G<<2)>>2]=l[y+(d<<4)+12>>2]}while((0|x)>1);if(!((0|u)>7))break;u=u+-4|0,h=h-O|0,f=f+(O<<2)|0}c=V+c+p|0,h=m}else h=M}while(0);e:do{if(3&I){if(On(r,h,i,c),Fn(r),c=T+-1|0,(0|T)<=0){m=I-S|0,l[z>>2]=m,p=(0|l[g>>2])%2|0,l[U>>2]=p,g=M;break}switch(u=0|l[r>>2],3&I){case 3:for(e=c;;){if(l[h+(e+F<<2)>>2]=l[u+(e<<4)+8>>2],l[h+(e+i<<2)>>2]=l[u+(e<<4)+4>>2],l[h+(e<<2)>>2]=l[u+(e<<4)>>2],!((0|e)>0)){e=u,x=u,W=22;break}e=e+-1|0}break;case 2:for(e=c;;){if(l[h+(e+i<<2)>>2]=l[u+(e<<4)+4>>2],l[h+(e<<2)>>2]=l[u+(e<<4)>>2],!((0|e)>0)){e=u,x=u,W=22;break}e=e+-1|0}break;case 1:for(e=c;;){if(l[h+(e<<2)>>2]=l[u+(e<<4)>>2],!((0|e)>0)){e=u,x=u,W=22;break}e=e+-1|0}break;default:e=u,x=u,W=22;break e}}else x=y,W=22}while(0);do{if(22==(0|W))if(W=0,A=I-S|0,l[z>>2]=A,b=(0|l[g>>2])%2|0,l[U>>2]=b,(0|T)>3){if(v=v+4+((0|(y=_+-1-v|0))>-8?y:-8)-_&-4,!I){for(p=(0|S)>0,m=0|k(S,i),g=0-b|0,y=(0|A)>0,f=M,d=T;;){if(u=(s=0|l[Z>>2])+(b<<4)|0,p){c=0;do{_=u+(c<<1<<4)|0,h=f+((0|k(c,i))<<2)|0,l[_>>2]=l[h>>2],l[_+4>>2]=l[h+4>>2],l[_+8>>2]=l[h+8>>2],l[_+12>>2]=l[h+12>>2],c=c+1|0}while((0|c)!=(0|S))}if(u=f+(m<<2)|0,h=s+16+(g<<4)|0,y){c=0;do{_=h+(c<<1<<4)|0,j=u+((0|k(c,i))<<2)|0,l[_>>2]=l[j>>2],l[_+4>>2]=l[j+4>>2],l[_+8>>2]=l[j+8>>2],l[_+12>>2]=l[j+12>>2],c=c+1|0}while((0|c)!=(0|A))}if(Fn(Z),!((0|d)>7))break;f=f+16|0,d=d+-4|0}g=M+16+(v<<2)|0,p=b,m=A,y=x;break}for(p=(0|(d=0|l[L>>2]))>0,m=0|k(d,i),g=0-b|0,y=(0|A)>0,h=M,f=T;;){if(u=s+(b<<4)|0,p){c=0;do{j=u+(c<<1<<4)|0,S=h+((0|k(c,i))<<2)|0,l[j>>2]=l[S>>2],l[j+4>>2]=l[S+4>>2],l[j+8>>2]=l[S+8>>2],l[j+12>>2]=l[S+12>>2],c=c+1|0}while((0|c)!=(0|d))}if(u=h+(m<<2)|0,c=s+16+(g<<4)|0,y){s=0;do{j=c+(s<<1<<4)|0,S=u+((0|k(s,i))<<2)|0,l[j>>2]=l[S>>2],l[j+4>>2]=l[S+4>>2],l[j+8>>2]=l[S+8>>2],l[j+12>>2]=l[S+12>>2],s=s+1|0}while((0|s)!=(0|A))}Fn(Z),c=0;do{j=h+((0|k(c,i))<<2)|0,S=(s=0|l[Z>>2])+(c<<4)|0,l[j>>2]=l[S>>2],l[j+4>>2]=l[S+4>>2],l[j+8>>2]=l[S+8>>2],l[j+12>>2]=l[S+12>>2],c=c+1|0}while((0|c)!=(0|I));if(!((0|f)>7))break;h=h+16|0,f=f+-4|0}g=M+16+(v<<2)|0,p=b,m=A,y=x}else g=M,p=b,m=A,y=x}while(0);if(f=3&T){if(c=(d=0|l[Z>>2])+(p<<4)|0,(0|(u=0|l[L>>2]))>0){h=f<<2,s=0;do{kr(c+(s<<1<<4)|0,g+((0|k(s,i))<<2)|0,0|h),s=s+1|0}while((0|s)!=(0|u))}if(h=g+((0|k(u,i))<<2)|0,c=d+16+(0-p<<4)|0,(0|m)>0){u=f<<2,s=0;do{kr(c+(s<<1<<4)|0,h+((0|k(s,i))<<2)|0,0|u),s=s+1|0}while((0|s)!=(0|m))}if(Fn(Z),I){c=f<<2,s=0;do{kr(g+((0|k(s,i))<<2)|0,d+(s<<4)|0,0|c),s=s+1|0}while((0|s)!=(0|I));s=d}else s=d}if(!(a=a+-1|0))break t;b=T,d=E,u=0|l[n>>2],c=0|l[t>>2],S=I}}while(0);return Vt(e),w=o,0|(j=1)}function On(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s,c,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0;if(h=(f=0|l[(t|=0)>>2])+((r=0|l[t+12>>2])<<4)|0,o=0|l[t+8>>2],a=3*n|0,c=f+16+(0-r<<4)|0,s=0|l[t+4>>2],(o+a|0)<(0|i)&&0==(15&e|0)&&0==(15&(h|n)|0)){if((0|o)>0){t=0;do{l[f+(r<<4)+((h=t<<3)<<2)>>2]=l[e+(t<<2)>>2],y=t+n|0,l[f+(r<<4)+((1|h)<<2)>>2]=l[e+(y<<2)>>2],y=y+n|0,l[f+(r<<4)+((2|h)<<2)>>2]=l[e+(y<<2)>>2],l[f+(r<<4)+((3|h)<<2)>>2]=l[e+(y+n<<2)>>2],t=t+1|0}while((0|t)!=(0|o))}}else u=2;if(2==(0|u)&&(0|o)>0){t=0;do{l[f+(r<<4)+((u=t<<3)<<2)>>2]=l[e+(t<<2)>>2],(0|(h=t+n|0))<(0|i)&&(l[f+(r<<4)+((1|u)<<2)>>2]=l[e+(h<<2)>>2],(0|(d=h+n|0))<(0|i))&&(l[f+(r<<4)+((2|u)<<2)>>2]=l[e+(d<<2)>>2],(0|(p=d+n|0))<(0|i))&&(l[f+(r<<4)+((3|u)<<2)>>2]=l[e+(p<<2)>>2]),t=t+1|0}while((0|t)!=(0|o))}if(f=e+(o<<2)|0,(s+a|0)<(0|(e=i-o|0))&&0==(15&f|0)&&0==(15&(c|n)|0)){if(!((0|s)>0))return;t=0;do{l[c+((y=t<<3)<<2)>>2]=l[f+(t<<2)>>2],g=t+n|0,l[c+((1|y)<<2)>>2]=l[f+(g<<2)>>2],g=g+n|0,l[c+((2|y)<<2)>>2]=l[f+(g<<2)>>2],l[c+((3|y)<<2)>>2]=l[f+(g+n<<2)>>2],t=t+1|0}while((0|t)!=(0|s))}else if((0|s)>0){t=0;do{l[c+((u=t<<3)<<2)>>2]=l[f+(t<<2)>>2],(0|(h=t+n|0))<(0|e)&&(l[c+((1|u)<<2)>>2]=l[f+(h<<2)>>2],(0|(m=h+n|0))<(0|e))&&(l[c+((2|u)<<2)>>2]=l[f+(m<<2)>>2],(0|(g=m+n|0))<(0|e))&&(l[c+((3|u)<<2)>>2]=l[f+(g<<2)>>2]),t=t+1|0}while((0|t)!=(0|s))}}function Fn(t){t|=0;var e=0,n=0,i=0,r=0,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0;do{if(0|l[t+12>>2]){if((0|(i=0|l[t+8>>2]))<=0){if((0|l[t+4>>2])>1){r=1,a=0,o=0|l[t>>2];break}return}n=0,e=1,s=7}else{if(i=0|l[t+8>>2],(0|l[t+4>>2])>0){if(e=0|l[t>>2],(0|i)>0){r=0,n=1,o=e,s=9;break}r=0,a=1,o=e;break}if(!((0|i)>1))return;n=1,e=0,s=7}}while(0);if(7==(0|s)&&(r=e,o=0|l[t>>2],s=9),9==(0|s)){e=0;do{d=o+(r<<4)+((s=e<<3)<<2)|0,f=+m[(h=o+(r<<4)+((1|s)<<2)|0)>>2],u=+m[(a=o+(r<<4)+((2|s)<<2)|0)>>2],c=+m[(s=o+(r<<4)+((3|s)<<2)|0)>>2],m[d>>2]=1.2301740646362305*+m[d>>2],m[h>>2]=1.2301740646362305*f,m[a>>2]=1.2301740646362305*u,m[s>>2]=1.2301740646362305*c,e=e+1|0}while((0|e)!=(0|i));a=n}if((0|(n=0|l[t+4>>2]))>0){e=0;do{s=o+(a<<4)+((d=e<<3)<<2)|0,c=+m[(t=o+(a<<4)+((1|d)<<2)|0)>>2],u=+m[(h=o+(a<<4)+((2|d)<<2)|0)>>2],f=+m[(d=o+(a<<4)+((3|d)<<2)|0)>>2],m[s>>2]=1.625732421875*+m[s>>2],m[t>>2]=1.625732421875*c,m[h>>2]=1.625732421875*u,m[d>>2]=1.625732421875*f,e=e+1|0}while((0|e)!=(0|n))}Gn(e=o+(a<<4)|0,o=16+(t=o+(r<<4)|0)|0,i,s=(0|i)<(0|(s=n-r|0))?i:s,-.4435068666934967),Gn(t,h=e+16|0,n,d=(0|n)<(0|(d=i-a|0))?n:d,-.8829110860824585),Gn(e,o,i,s,.05298011749982834),Gn(t,h,n,d,1.5861343145370483)}function Gn(t,e,n,i,r){t|=0,e|=0,n|=0,r=+r;var o=0,a=0,s=0,l=0,c=0,u=0,h=0,f=0,d=0,p=0,g=0,y=0,v=0,b=0,_=0,w=0,A=0,x=0;if((0|(i|=0))>0){for(h=(f=i<<1)-2|0,c=e,u=0,a=+m[t>>2],s=+m[t+4>>2],l=+m[t+8>>2],o=+m[t+12>>2];A=c+-16|0,w=+m[(b=c+-12|0)>>2],v=+m[(g=c+-8|0)>>2],p=+m[(t=c+-4|0)>>2],x=a,a=+m[c>>2],_=s,s=+m[c+4>>2],y=l,l=+m[c+8>>2],d=o,o=+m[c+12>>2],m[A>>2]=+m[A>>2]+(x+a)*r,m[b>>2]=w+(_+s)*r,m[g>>2]=v+(y+l)*r,m[t>>2]=p+(d+o)*r,(0|(u=u+1|0))!=(0|i);)c=c+32|0;t=e+(h<<4)|0,e=e+(f<<4)|0}if(!((0|i)>=(0|n)))for(a=(o=r+r)*+m[t>>2],s=o*+m[t+4>>2],l=o*+m[t+8>>2],o*=+m[t+12>>2];f=e+-16|0,_=+m[(g=e+-12|0)>>2],w=+m[(b=e+-8|0)>>2],x=+m[(A=e+-4|0)>>2],m[f>>2]=a+ +m[f>>2],m[g>>2]=s+_,m[b>>2]=l+w,m[A>>2]=o+x,(0|(i=i+1|0))!=(0|n);)e=e+32|0}function zn(t,e,n){t|=0,e|=0;var i,r,o,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,g=0,y=0,v=0,b=0,_=0,w=0,A=0,x=0,S=0,M=0;if(r=(n|=0)<<2,!(o=0|zt(n<<4)))return 0|(M=0);if(M=o+r|0,Cr(0|o,0,0|r),A=n+-1|0,!(i=0==(0|n)))for(a=o,s=0;l[a>>2]=s,(0|(s=s+1|0))!=(0|n);)a=a+4|0;t:do{if(0|A){for(g=1,y=t,v=0,a=0,b=o,w=n;_=y+(v<<2)|0,v>>>0<n>>>0;){for(s=_,c=0,u=v;a=(S=(p=(p=+m[s>>2])>0?p:-p)>c)?u:a,c=S?p:c,(0|(u=u+1|0))!=(0|n);)s=s+(n<<2)|0;if(0==c)break;if((0|a)!=(0|v)&&(S=b+(a<<2)+(0-v<<2)|0,x=0|l[b>>2],l[b>>2]=l[S>>2],l[S>>2]=x,kr(0|M,0|(S=y+((0|k(a-v|0,n))<<2)|0),0|r),kr(0|S,0|y,0|r),kr(0|y,0|M,0|r)),c=+m[_>>2],g>>>0<n>>>0)for(u=_+(n<<2)|0,f=g;;){p=+m[u>>2]/c,m[u>>2]=p,s=g,h=u,d=_;do{d=d+4|0,m[(h=h+4|0)>>2]=+m[h>>2]-p*+m[d>>2],s=s+1|0}while((0|s)!=(0|n));if((0|(f=f+1|0))==(0|n))break;u=u+(w<<2)+(v<<2)|0}if((v=v+1|0)>>>0>=A>>>0)break t;g=g+1|0,y=y+(n<<2)|0,b=b+4|0,w=w+-1|0}return Zt(o),0|(M=0)}}while(0);if(x=M+(n<<2)|0,S=M+(n<<1<<2)|0,!i)for(b=x+(n<<2)|0,_=S+(n<<2)|0,w=t+((0|k(n,n))<<2)+-4|0,A=~n,v=0;;){for(Cr(0|M,0,0|r),m[M+(v<<2)>>2]=1,h=o,f=t,d=S,g=0,y=1;;){if(g)for(a=f,s=S,c=0,u=1;c+=+m[a>>2]*+m[s>>2],(0|(u=u+1|0))!=(0|y);)a=a+4|0,s=s+4|0;else c=0;if(m[d>>2]=+m[M+(l[h>>2]<<2)>>2]-c,(0|(g=g+1|0))==(0|n)){h=n,f=w,d=b,g=_;break}h=h+4|0,f=f+(n<<2)|0,d=d+4|0,y=y+1|0}for(;;){if(g=g+-4|0,p=+m[f>>2],h>>>0<n>>>0)for(a=f,s=d,c=0,u=h;c+=+m[(a=a+4|0)>>2]*+m[s>>2],(0|(u=u+1|0))!=(0|n);)s=s+4|0;else c=0;if(h=h+-1|0,m[(d=d+-4|0)>>2]=(+m[g>>2]-c)/p,!h){a=e,s=0;break}f=f+(A<<2)|0}for(;l[a>>2]=l[x+(s<<2)>>2],(0|(s=s+1|0))!=(0|n);)a=a+(n<<2)|0;if((0|(v=v+1|0))==(0|n))break;e=e+4|0}return Zt(o),0|(M=1)}function Un(t){t|=0;var e=0,n=0,i=0,r=0,o=0,a=0;return(o=0|Ut(1,44))?(a=0|zt(104),l[o>>2]=a,a?(a=0|zt(28),l[(e=o+4|0)>>2]=a,0|a?(l[o+40>>2]=t,0|(a=o)):(Kn(0|l[o>>2]),l[o>>2]=0,di(0|l[e>>2]),l[e>>2]=0,0==(0|l[o+40>>2])&&0|(r=0|l[(i=o+8|0)>>2])&&(Vt(r),l[i>>2]=0),0|(n=0|l[(e=o+12|0)>>2])&&(Vt(n),l[e>>2]=0),Zt(o),0|(a=0))):(Kn(0),l[o>>2]=0,di(0|l[(a=o+4|0)>>2]),l[a>>2]=0,0==(0|l[o+40>>2])&&0|(n=0|l[(e=o+8|0)>>2])&&(Vt(n),l[e>>2]=0),0|(n=0|l[(e=o+12|0)>>2])&&(Vt(n),l[e>>2]=0),Zt(o),0|(a=0))):0|(o=0)}function Hn(t){var e,n=0,i=0;(t|=0)&&(Kn(0|l[t>>2]),l[t>>2]=0,di(0|l[(e=t+4|0)>>2]),l[e>>2]=0,0==(0|l[t+40>>2])&&0|(i=0|l[(n=t+8|0)>>2])&&(Vt(i),l[n>>2]=0),0|(i=0|l[(n=t+12|0)>>2])&&(Vt(i),l[n>>2]=0),Zt(t))}function Vn(t,e,n){t|=0,n|=0;var i,r,o,s,c,h,d,p,g,y,v,b,_=0,w=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0,Y=0,X=0,J=0,Q=0,q=0,K=0,$=0,tt=0,et=0,nt=0,it=0,rt=0,ot=0,at=0,st=0,lt=0,ct=0,ut=0,ht=0,ft=0,dt=0,pt=0,mt=0,gt=0,yt=0,vt=0,bt=0,_t=0,wt=0,At=0,xt=0,St=0,Mt=0,Et=0,Tt=0,It=0;if(b=(0|l[8+(e|=0)>>2])-(0|l[e>>2])|0,!(_=0|l[(Tt=e+20|0)>>2]))return 0|(Tt=1);c=e+24|0,h=n+808|0,d=n+16|0,p=t+4|0,g=t+8|0,y=t+16|0,v=t+20|0,s=n+20|0,i=e+32|0,r=t+12|0,o=t+32|0,Mt=0,n=_;t:for(;;){if(xt=0|l[c>>2],e=0|l[(St=xt+(136*Mt|0)+24|0)>>2]){_t=xt+(136*Mt|0)+16|0,At=Mt+-1|0,bt=0,_=0|l[(wt=xt+(136*Mt|0)+20|0)>>2],n=0|l[_t>>2];do{if(0|k(_,n)){pt=xt+(136*Mt|0)+28+(36*bt|0)+20|0,mt=xt+(136*Mt|0)+28+(36*bt|0)+16|0,gt=xt+(136*Mt|0)+28+(36*bt|0)|0,yt=xt+(136*Mt|0)+28+(36*bt|0)+4|0,vt=xt+(136*Mt|0)+28+(36*bt|0)+32|0,dt=0;do{if(ht=(e=0|l[pt>>2])+(40*dt|0)+16|0,0|k(0|l[(ft=e+(40*dt|0)+20|0)>>2],0|l[ht>>2])){ut=e+(40*dt|0)+24|0,ct=0;do{if(n=0|l[ut>>2],nt=0|l[mt>>2],_=0|l[h>>2],e=0|l[d>>2],it=0|l[p>>2],rt=0|l[t>>2],ot=n+(56*ct|0)+8|0,lt=n+(56*ct|0)+12|0,!(0|Wn(t,(0|l[n+(56*ct|0)+16>>2])-(0|l[ot>>2])|0,(0|l[n+(56*ct|0)+20>>2])-(0|l[lt>>2])|0))){n=0,W=219;break t}if(w=0|l[(at=n+(56*ct|0)+24|0)>>2],ai(rt),si(rt,18,0,46),si(rt,17,0,3),si(rt,0,0,4),0|l[(st=n+(56*ct|0)+48|0)>>2]){q=n+(56*ct|0)+4|0,K=0!=(1&e|0),$=0==(2&e|0),tt=0==(8&e|0),et=nt<<8,Q=0==(32&e|0),J=0,e=2,n=w+_|0;do{A=0|l[q>>2],X=K&(e>>>0<2?(0|n)<=((0|l[at>>2])-4|0):0),_=0|l[A+(J<<5)>>2];e:do{if(_){if(_=(0|l[_>>2])+(0|l[A+(J<<5)+4>>2])|0,w=0|l[A+(J<<5)+16>>2],X)pi(it,_,w);else if(!(0|hi(rt,_,w))){n=0,W=219;break t}if((0|n)>0&0!=(0|l[(j=A+(J<<5)+12|0)>>2]))for(Y=$|X,Z=0;;){n:do{switch(0|e){case 0:if(X){if(L=1<<n,L|=L>>1,!(_=0|l[v>>2]))break n;for(P=0-L|0,R=0,w=0|l[y>>2];;){if(B=R,R=R+4|0,w){I=-4==(0|B),C=3|B,T=0;do{i:do{if(!I)if(tt){_=B;do{if(_>>>0>=(0|l[v>>2])>>>0)break i;S=_,_=_+1|0,x=(w=0|l[r>>2])+(1+(A=(0|k(0|l[o>>2],_))+T|0)<<1)|0,S=(0|l[g>>2])+((0|k(0|l[y>>2],S))+T<<2)|0,M=0|l[p>>2],0!=(255&(W=0|a[x>>1])|0)&0==(20480&W|0)&&(0|mi(M)&&(V=0|mi(M),l[S>>2]=0|V?P:L,H=x+(0-(W=0|l[o>>2])<<1)|0,W=x+(W<<1)|0,a[(U=H+-2|0)>>1]=2|a[U>>1],a[H>>1]=a[H>>1]|a[3160+(V<<1)>>1],a[(H=H+2|0)>>1]=4|a[H>>1],a[(H=w+(A<<1)|0)>>1]=a[H>>1]|a[3160+(V+2<<1)>>1],a[x>>1]=4096|a[x>>1],a[(H=x+2|0)>>1]=a[H>>1]|a[3160+(V+4<<1)>>1],a[(H=W+-2|0)>>1]=1|a[H>>1],a[W>>1]=a[W>>1]|a[3160+(V+6<<1)>>1],a[(W=W+2|0)>>1]=8|a[W>>1]),a[x>>1]=16384|a[x>>1])}while(_>>>0<R>>>0)}else{_=B;do{if(_>>>0>=(w=0|l[v>>2])>>>0)break i;V=_,_=_+1|0,S=(A=0|l[r>>2])+(1+(x=(0|k(0|l[o>>2],_))+T|0)<<1)|0,M=(0|l[g>>2])+((0|k(0|l[y>>2],V))+T<<2)|0,E=0|l[p>>2],W=0|a[S>>1],0!=(255&(W=(0|V)==(0|C)|(0|V)==(w+-1|0)?-1095&W:W)|0)&0==(20480&W|0)&&(0|mi(E)&&(V=0|mi(E),l[M>>2]=0|V?P:L,H=S+(0-(W=0|l[o>>2])<<1)|0,W=S+(W<<1)|0,a[(U=H+-2|0)>>1]=2|a[U>>1],a[H>>1]=a[H>>1]|a[3160+(V<<1)>>1],a[(H=H+2|0)>>1]=4|a[H>>1],a[(H=A+(x<<1)|0)>>1]=a[H>>1]|a[3160+(V+2<<1)>>1],a[S>>1]=4096|a[S>>1],a[(H=S+2|0)>>1]=a[H>>1]|a[3160+(V+4<<1)>>1],a[(H=W+-2|0)>>1]=1|a[H>>1],a[W>>1]=a[W>>1]|a[3160+(V+6<<1)>>1],a[(W=W+2|0)>>1]=8|a[W>>1]),a[S>>1]=16384|a[S>>1])}while(_>>>0<R>>>0)}}while(0);T=T+1|0,w=0|l[y>>2]}while(T>>>0<w>>>0);_=0|l[v>>2]}else w=0;if(R>>>0>=_>>>0){W=187;break n}}}if(!tt){if(D=1<<n,D|=D>>1,!(_=0|l[v>>2])){W=187;break n}for(N=0-D|0,L=0,A=w=0|l[y>>2];;){if(P=L,L=L+4|0,w){for(B=-4==(0|P),R=3|P,C=0;;){if(B)_=A;else{x=P;do{if(x>>>0>=(_=0|l[v>>2])>>>0)break;W=x,x=x+1|0,E=(S=0|l[r>>2])+(1+(M=(0|k(0|l[o>>2],x))+C|0)<<1)|0,T=(0|l[g>>2])+((0|k(0|l[y>>2],W))+C<<2)|0,I=0|l[t>>2],w=0|a[E>>1],0!=(0|(w=255&(_=(0|W)==(0|R)|(0|W)==(_+-1|0)?-1095&w:w)))&0==(20480&_|0)&&(l[(A=I+100|0)>>2]=I+24+(u[20356+(w|et)>>0]<<2),0|fi(I)&&(V=_>>>4&255,l[A>>2]=I+24+(u[21380+V>>0]<<2),V=(W=0|fi(I))^u[21636+V>>0],l[T>>2]=0|V?N:D,H=E+(0-(W=0|l[o>>2])<<1)|0,W=E+(W<<1)|0,a[(U=H+-2|0)>>1]=2|a[U>>1],a[H>>1]=a[H>>1]|a[3160+(V<<1)>>1],a[(H=H+2|0)>>1]=4|a[H>>1],a[(H=S+(M<<1)|0)>>1]=a[H>>1]|a[3160+(V+2<<1)>>1],a[E>>1]=4096|a[E>>1],a[(H=E+2|0)>>1]=a[H>>1]|a[3160+(V+4<<1)>>1],a[(H=W+-2|0)>>1]=1|a[H>>1],a[W>>1]=a[W>>1]|a[3160+(V+6<<1)>>1],a[(W=W+2|0)>>1]=8|a[W>>1]),a[E>>1]=16384|a[E>>1])}while(x>>>0<L>>>0);_=0|l[y>>2]}if((C=C+1|0)>>>0>=_>>>0)break;A=_}A=_,w=_,_=0|l[v>>2]}else w=0;if(L>>>0>=_>>>0){W=187;break n}}}if(w=0|l[g>>2],_=2+(0|l[r>>2])|0,L=1<<n,L|=L>>1,(x=0|l[v>>2])>>>0>3){P=0-L|0,M=0,S=A=0|l[y>>2];do{if(A){R=0,A=S;do{I=w+(R<<2)|0,C=_+(R<<1)+((x=0|l[o>>2])<<1)|0,T=0|l[t>>2],0!=(0|(E=255&(S=0|a[C>>1])))&0==(20480&S|0)&&(l[(A=T+100|0)>>2]=T+24+(u[20356+(E|et)>>0]<<2),0|fi(T)?(V=S>>>4&255,l[A>>2]=T+24+(u[21380+V>>0]<<2),V=(x=0|fi(T))^u[21636+V>>0],l[I>>2]=0|V?P:L,W=C+((x=0|l[o>>2])<<1)|0,a[(U=(H=C+(0-x<<1)|0)-2|0)>>1]=2|a[U>>1],a[H>>1]=a[H>>1]|a[3160+(V<<1)>>1],a[(H=H+2|0)>>1]=4|a[H>>1],a[(H=C+-2|0)>>1]=a[H>>1]|a[3160+(V+2<<1)>>1],a[C>>1]=4096|a[C>>1],a[(H=C+2|0)>>1]=a[H>>1]|a[3160+(V+4<<1)>>1],a[(H=W+-2|0)>>1]=1|a[H>>1],a[W>>1]=a[W>>1]|a[3160+(V+6<<1)>>1],a[(W=W+2|0)>>1]=8|a[W>>1]):x=0|l[o>>2],a[C>>1]=16384|a[C>>1],A=0|l[y>>2],T=0|l[t>>2]),I=I+(A<<2)|0,0!=(0|(E=255&(S=0|a[(C=C+(x<<1)|0)>>1])))&0==(20480&S|0)&&(l[(A=T+100|0)>>2]=T+24+(u[20356+(E|et)>>0]<<2),0|fi(T)?(V=S>>>4&255,l[A>>2]=T+24+(u[21380+V>>0]<<2),V=(x=0|fi(T))^u[21636+V>>0],l[I>>2]=0|V?P:L,W=C+((x=0|l[o>>2])<<1)|0,a[(U=(H=C+(0-x<<1)|0)-2|0)>>1]=2|a[U>>1],a[H>>1]=a[H>>1]|a[3160+(V<<1)>>1],a[(H=H+2|0)>>1]=4|a[H>>1],a[(H=C+-2|0)>>1]=a[H>>1]|a[3160+(V+2<<1)>>1],a[C>>1]=4096|a[C>>1],a[(H=C+2|0)>>1]=a[H>>1]|a[3160+(V+4<<1)>>1],a[(H=W+-2|0)>>1]=1|a[H>>1],a[W>>1]=a[W>>1]|a[3160+(V+6<<1)>>1],a[(W=W+2|0)>>1]=8|a[W>>1]):x=0|l[o>>2],a[C>>1]=16384|a[C>>1],A=0|l[y>>2],T=0|l[t>>2]),B=I+(A<<2)|0,0!=(0|(E=255&(S=0|a[(C=C+(x<<1)|0)>>1])))&0==(20480&S|0)?(l[(A=T+100|0)>>2]=T+24+(u[20356+(E|et)>>0]<<2),0|fi(T)?(V=S>>>4&255,l[A>>2]=T+24+(u[21380+V>>0]<<2),V=(x=0|fi(T))^u[21636+V>>0],l[B>>2]=0|V?P:L,W=C+((x=0|l[o>>2])<<1)|0,a[(U=(H=C+(0-x<<1)|0)-2|0)>>1]=2|a[U>>1],a[H>>1]=a[H>>1]|a[3160+(V<<1)>>1],a[(H=H+2|0)>>1]=4|a[H>>1],a[(H=C+-2|0)>>1]=a[H>>1]|a[3160+(V+2<<1)>>1],a[C>>1]=4096|a[C>>1],a[(H=C+2|0)>>1]=a[H>>1]|a[3160+(V+4<<1)>>1],a[(H=W+-2|0)>>1]=1|a[H>>1],a[W>>1]=a[W>>1]|a[3160+(V+6<<1)>>1],a[(W=W+2|0)>>1]=8|a[W>>1]):x=0|l[o>>2],a[C>>1]=16384|a[C>>1],A=0|l[y>>2],I=0|l[t>>2]):I=T,T=B+(A<<2)|0,0!=(0|(E=255&(S=0|a[(x=C+(x<<1)|0)>>1])))&0==(20480&S|0)&&(l[(A=I+100|0)>>2]=I+24+(u[20356+(E|et)>>0]<<2),0|fi(I)&&(V=S>>>4&255,l[A>>2]=I+24+(u[21380+V>>0]<<2),V=(W=0|fi(I))^u[21636+V>>0],l[T>>2]=0|V?P:L,H=x+(0-(W=0|l[o>>2])<<1)|0,W=x+(W<<1)|0,a[(U=H+-2|0)>>1]=2|a[U>>1],a[H>>1]=a[H>>1]|a[3160+(V<<1)>>1],a[(H=H+2|0)>>1]=4|a[H>>1],a[(H=x+-2|0)>>1]=a[H>>1]|a[3160+(V+2<<1)>>1],a[x>>1]=4096|a[x>>1],a[(H=x+2|0)>>1]=a[H>>1]|a[3160+(V+4<<1)>>1],a[(H=W+-2|0)>>1]=1|a[H>>1],a[W>>1]=a[W>>1]|a[3160+(V+6<<1)>>1],a[(W=W+2|0)>>1]=8|a[W>>1]),a[x>>1]=16384|a[x>>1],A=0|l[y>>2]),R=R+1|0}while(R>>>0<A>>>0);S=A,x=0|l[v>>2]}else A=0;w=w+(A<<2<<2)|0,_=_+(l[o>>2]<<2<<1)|0,M=M+4|0}while(M>>>0<(-4&x)>>>0);A=S}else M=0,A=0|l[y>>2];if(!A){W=187;break n}P=0-L|0,R=0;do{if(M>>>0<x>>>0)for(I=M,C=_+(R<<1)|0,B=w+(R<<2)|0;C=C+(l[o>>2]<<1)|0,S=0|l[t>>2],0!=(0|(T=255&(E=0|a[C>>1])))&0==(20480&E|0)&&(l[(A=S+100|0)>>2]=S+24+(u[20356+(T|et)>>0]<<2),0|fi(S)&&(V=E>>>4&255,l[A>>2]=S+24+(u[21380+V>>0]<<2),V=(W=0|fi(S))^u[21636+V>>0],l[B>>2]=0|V?P:L,H=C+(0-(W=0|l[o>>2])<<1)|0,W=C+(W<<1)|0,a[(U=H+-2|0)>>1]=2|a[U>>1],a[H>>1]=a[H>>1]|a[3160+(V<<1)>>1],a[(H=H+2|0)>>1]=4|a[H>>1],a[(H=C+-2|0)>>1]=a[H>>1]|a[3160+(V+2<<1)>>1],a[C>>1]=4096|a[C>>1],a[(H=C+2|0)>>1]=a[H>>1]|a[3160+(V+4<<1)>>1],a[(H=W+-2|0)>>1]=1|a[H>>1],a[W>>1]=a[W>>1]|a[3160+(V+6<<1)>>1],a[(W=W+2|0)>>1]=8|a[W>>1]),a[C>>1]=16384|a[C>>1],A=0|l[y>>2],x=0|l[v>>2]),!((I=I+1|0)>>>0>=x>>>0);)B=B+(A<<2)|0;R=R+1|0}while(R>>>0<A>>>0);W=187;break;case 1:if(X){if(I=0-(T=1<<n>>1)|0,!(_=0|l[v>>2]))break n;for(E=0,A=w=0|l[y>>2];;){M=E,E=E+4|0;do{if(w){if(-4==(0|M)){x=A,w=A;break}S=0;do{w=S,S=S+1|0,_=M;do{if(_>>>0>=(0|l[v>>2])>>>0)break;x=_,_=_+1|0,A=(0|l[r>>2])+((0|k(0|l[o>>2],_))+S<<1)|0,x=(0|l[g>>2])+((0|k(0|l[y>>2],x))+w<<2)|0,4096==(20480&a[A>>1])&&(V=(V=0!=(0|mi(0|l[p>>2])))?T:I,W=0|l[x>>2],l[x>>2]=((0|W)<0?0-V|0:V)+W,a[A>>1]=8192|a[A>>1])}while(_>>>0<E>>>0);_=0|l[y>>2]}while(S>>>0<_>>>0);x=_,w=_,_=0|l[v>>2]}else x=A,w=0}while(0);if(E>>>0>=_>>>0){W=187;break n}A=x}}if(!tt){if(R=0-(B=1<<n>>1)|0,!(_=0|l[v>>2])){W=187;break n}for(C=0,x=w=0|l[y>>2];;){I=C,C=C+4|0;do{if(w){if(T=3|I,-4==(0|I)){A=x,w=x;break}E=0;do{A=E,E=E+1|0,w=I;do{if(w>>>0>=(_=0|l[v>>2])>>>0)break;V=w,w=w+1|0,S=(0|l[r>>2])+((0|k(0|l[o>>2],w))+E<<1)|0,M=(0|l[g>>2])+((0|k(0|l[y>>2],V))+A<<2)|0,x=0|l[t>>2],W=0|a[S>>1],4096==(20480&(_=(0|V)==(0|T)|(0|V)==(_+-1|0)?-1095&W:W)|0)&&(l[x+100>>2]=x+24+((8192&_|0?16:255&_|0?15:14)<<2),V=(V=0!=(0|fi(x)))?B:R,W=0|l[M>>2],l[M>>2]=((0|W)<0?0-V|0:V)+W,a[S>>1]=8192|a[S>>1])}while(w>>>0<C>>>0);_=0|l[y>>2]}while(E>>>0<_>>>0);A=_,w=_,_=0|l[v>>2]}else A=x,w=0}while(0);if(C>>>0>=_>>>0){W=187;break n}x=A}}if(w=0|l[g>>2],_=2+(0|l[r>>2])|0,P=0-(R=1<<n>>1)|0,x=0|l[v>>2],A=0|l[y>>2],x>>>0>3){M=0,S=A;do{if(A){B=0,A=S;do{T=w+(B<<2)|0,I=_+(B<<1)+((E=0|l[o>>2])<<1)|0,x=0|l[t>>2],4096==(20480&(S=0|a[I>>1])|0)&&(l[x+100>>2]=x+24+((8192&S|0?16:255&S|0?15:14)<<2),A=(A=0!=(0|fi(x)))?R:P,x=0|l[T>>2],l[T>>2]=((0|x)<0?0-A|0:A)+x,a[I>>1]=8192|a[I>>1],x=0|l[t>>2],A=0|l[y>>2],E=0|l[o>>2]),T=T+(A<<2)|0,4096==(20480&(S=0|a[(I=I+(E<<1)|0)>>1])|0)&&(l[x+100>>2]=x+24+((8192&S|0?16:255&S|0?15:14)<<2),A=(A=0!=(0|fi(x)))?R:P,x=0|l[T>>2],l[T>>2]=((0|x)<0?0-A|0:A)+x,a[I>>1]=8192|a[I>>1],x=0|l[t>>2],A=0|l[y>>2],E=0|l[o>>2]),C=T+(A<<2)|0,4096==(20480&(S=0|a[(I=I+(E<<1)|0)>>1])|0)?(l[x+100>>2]=x+24+((8192&S|0?16:255&S|0?15:14)<<2),A=(A=0!=(0|fi(x)))?R:P,T=0|l[C>>2],l[C>>2]=((0|T)<0?0-A|0:A)+T,a[I>>1]=8192|a[I>>1],T=0|l[t>>2],A=0|l[y>>2],x=0|l[o>>2]):(T=x,x=E),E=C+(A<<2)|0,4096==(20480&(S=0|a[(x=I+(x<<1)|0)>>1])|0)&&(l[T+100>>2]=T+24+((8192&S|0?16:255&S|0?15:14)<<2),W=(W=0!=(0|fi(T)))?R:P,A=0|l[E>>2],l[E>>2]=((0|A)<0?0-W|0:W)+A,a[x>>1]=8192|a[x>>1],A=0|l[y>>2]),B=B+1|0}while(B>>>0<A>>>0);S=A,x=0|l[v>>2]}else A=0;w=w+(A<<2<<2)|0,_=_+(l[o>>2]<<2<<1)|0,M=M+4|0}while(M>>>0<(-4&x)>>>0);A=S}else M=0;if(!A){W=187;break n}B=0;do{if(M>>>0<x>>>0)for(T=M,I=_+(B<<1)|0,C=w+(B<<2)|0;I=I+(l[o>>2]<<1)|0,S=0|l[t>>2],4096==(20480&(E=0|a[I>>1])|0)&&(l[S+100>>2]=S+24+((8192&E|0?16:255&E|0?15:14)<<2),x=(x=0!=(0|fi(S)))?R:P,A=0|l[C>>2],l[C>>2]=((0|A)<0?0-x|0:x)+A,a[I>>1]=8192|a[I>>1],A=0|l[y>>2],x=0|l[v>>2]),!((T=T+1|0)>>>0>=x>>>0);)C=C+(A<<2)|0;B=B+1|0}while(B>>>0<A>>>0);W=187;break;case 2:H=0|l[t>>2],V=1<<n,V|=V>>1;do{if(tt){if(A=0|l[g>>2],w=2+(0|l[r>>2])|0,(_=0|l[v>>2])>>>0>3)for(P=H+92|0,L=H+100|0,D=H+96|0,N=0-V|0,x=w,M=0,S=W=0|l[y>>2],w=W;;){if(S){C=1+(I=1|M)|0,B=3|M,R=I+3|0,T=0;do{w=A+(T<<2)|0,S=x+(T<<1)|0,W=0|l[r>>2],_=0|l[o>>2],T=T+1|0,z=W+((0|k(_,I))+T<<1)|0,G=W+((0|k(_,C))+T<<1)|0,U=W+((0|k(_,B))+T<<1)|0,W=W+((0|k(_,R))+T<<1)|0;i:do{if(20735&(a[G>>1]|a[z>>1]|a[U>>1]|a[W>>1]))Zn(t,U=S+(_<<1)|0,w,nt,V),W=w+(l[y>>2]<<2)|0,Zn(t,U=U+(l[o>>2]<<1)|0,W,nt,V),W=W+(l[y>>2]<<2)|0,Zn(t,U=U+(l[o>>2]<<1)|0,W,nt,V),Zn(t,U+(l[o>>2]<<1)|0,W+(l[y>>2]<<2)|0,nt,V);else{if(l[L>>2]=P,!(0|fi(H)))break;if(l[L>>2]=D,(E=0|(E=(0|fi(H))<<1)|fi(H))>>>0>=4)break;for(w=w+((0|k(0|l[y>>2],E))<<2)|0,_=S+((0|k(0|l[o>>2],E))<<1)|0,S=E;;){if(S>>>0>=(0|l[v>>2])>>>0)break i;if(_=_+(l[o>>2]<<1)|0,(0|S)==(0|E)?(W=0|l[t>>2],U=(0|f[_>>1])>>>4&255,l[W+100>>2]=W+24+(u[21380+U>>0]<<2),U=(W=0|fi(W))^u[21636+U>>0],l[w>>2]=0|U?N:V,z=_+(0-(W=0|l[o>>2])<<1)|0,W=_+(W<<1)|0,a[(G=z+-2|0)>>1]=2|a[G>>1],a[z>>1]=a[z>>1]|a[3160+(U<<1)>>1],a[(z=z+2|0)>>1]=4|a[z>>1],a[(z=_+-2|0)>>1]=a[z>>1]|a[3160+(U+2<<1)>>1],a[_>>1]=4096|a[_>>1],a[(z=_+2|0)>>1]=a[z>>1]|a[3160+(U+4<<1)>>1],a[(z=W+-2|0)>>1]=1|a[z>>1],a[W>>1]=a[W>>1]|a[3160+(U+6<<1)>>1],a[(W=W+2|0)>>1]=8|a[W>>1],a[_>>1]=-16385&a[_>>1]):Zn(t,_,w,nt,V),(S=S+1|0)>>>0>=4)break;w=w+(l[y>>2]<<2)|0}}}while(0);w=0|l[y>>2]}while(T>>>0<w>>>0);S=w,_=0|l[v>>2]}else S=0;if(A=A+(S<<2<<2)|0,x=x+(l[o>>2]<<2<<1)|0,(M=M+4|0)>>>0>=(-4&_)>>>0){I=x,T=A;break}}else I=w,T=A,M=0,w=0|l[y>>2];if(!w)break;E=0;do{if(M>>>0<_>>>0)for(A=I+(E<<1)|0,x=T+(E<<2)|0,S=M;Zn(t,A=A+(l[o>>2]<<1)|0,x,nt,V),w=0|l[y>>2],!((S=S+1|0)>>>0>=(_=0|l[v>>2])>>>0);)x=x+(w<<2)|0;E=E+1|0}while(E>>>0<w>>>0)}else{if(!(_=0|l[v>>2]))break;F=H+92|0,G=H+100|0,z=H+96|0,U=0-V|0,A=0,w=0|l[y>>2];do{if(w)for(P=3|A,D=1+(L=1|A)|0,N=L+3|0,O=A+4|0,R=0;;){do{if(P>>>0<_>>>0){if(_=0|l[r>>2],w=0|l[o>>2],x=R+1|0,B=_+((0|k(w,L))+x<<1)|0,20735&a[B>>1]){_=0,B=0,W=152;break}if(B=_+((0|k(w,D))+x<<1)|0,20735&a[B>>1]){_=0,B=0,W=152;break}if(B=_+((0|k(w,P))+x<<1)|0,20735&a[B>>1]){_=0,B=0,W=152;break}if(B=_+((0|k(w,N))+x<<1)|0,20665&a[B>>1]){_=0,B=0,W=152;break}if(l[G>>2]=F,!(0|fi(H)))break;l[G>>2]=z,_=0|(_=(0|fi(H))<<1)|fi(H),B=1,W=152}else _=0,B=0,W=152}while(0);i:do{if(152==(0|W)){if(W=0,!((S=_+A|0)>>>0<O>>>0))break;x=S;do{if(x>>>0>=(_=0|l[v>>2])>>>0)break i;It=x,x=x+1|0,T=(M=0|l[r>>2])+(1+(E=(0|k(0|l[o>>2],x))+R|0)<<1)|0,I=(0|l[g>>2])+((0|k(0|l[y>>2],It))+R<<2)|0,C=0|l[t>>2],w=0|a[T>>1],w=(0|It)==(0|P)|(0|It)==(_+-1|0)?-1095&w:w;do{if(B&(0|It)==(0|S))_=C+100|0,W=158;else{if(20480&w|0)break;l[(_=C+100|0)>>2]=C+24+(u[20356+(255&w|et)>>0]<<2),0|fi(C)&&(W=158)}}while(0);158==(0|W)&&(W=0,It=w>>>4&255,l[_>>2]=C+24+(u[21380+It>>0]<<2),C=0|fi(C),C^=u[21636+It>>0],l[I>>2]=0|C?U:V,I=T+(0-(It=0|l[o>>2])<<1)|0,It=T+(It<<1)|0,a[(w=I+-2|0)>>1]=2|a[w>>1],a[I>>1]=a[I>>1]|a[3160+(C<<1)>>1],a[(I=I+2|0)>>1]=4|a[I>>1],a[(I=M+(E<<1)|0)>>1]=a[I>>1]|a[3160+(C+2<<1)>>1],a[T>>1]=4096|a[T>>1],a[(I=T+2|0)>>1]=a[I>>1]|a[3160+(C+4<<1)>>1],a[(I=It+-2|0)>>1]=1|a[I>>1],a[It>>1]=a[It>>1]|a[3160+(C+6<<1)>>1],a[(It=It+2|0)>>1]=8|a[It>>1]),a[T>>1]=-16385&a[T>>1]}while(x>>>0<O>>>0)}}while(0);if(R=R+1|0,w=0|l[y>>2],_=0|l[v>>2],R>>>0>=w>>>0){A=O;break}}else A=A+4|0,w=0}while(A>>>0<_>>>0)}}while(0);if(Q){W=187;break n}l[H+100>>2]=H+96,fi(H),fi(H),fi(H),fi(H),W=187;break;default:W=187}}while(0);do{if(187==(0|W)){if(W=0,Y)break;ai(rt),si(rt,18,0,46),si(rt,17,0,3),si(rt,0,0,4)}}while(0);if(n=n+((It=3==(0|(e=e+1|0)))<<31>>31)|0,e=It?0:e,Z=Z+1|0,!((0|n)>0&&Z>>>0<(0|l[j>>2])>>>0))break e}}}while(0);J=J+1|0}while(J>>>0<(0|l[st>>2])>>>0)}if(n=(0|l[ot>>2])-(0|l[gt>>2])|0,e=(0|l[lt>>2])-(0|l[yt>>2])|0,1&(_=0|l[mt>>2])&&(It=0|l[c>>2],n=(0|l[It+(136*At|0)+8>>2])+n-(0|l[It+(136*At|0)>>2])|0),2&_&&(It=0|l[c>>2],e=(0|l[It+(136*At|0)+12>>2])+e-(0|l[It+(136*At|0)+4>>2])|0),E=0|l[g>>2],T=0|l[y>>2],I=0|l[v>>2],0|(_=0|l[h>>2])&&(Et=1<<_,!(0==(0|I)|0==(0|T)))){_=0;do{A=0|k(_,T),w=0;do{(0|(M=(0|(S=0|l[(x=E+(w+A<<2)|0)>>2]))>-1?S:0-S|0))>=(0|Et)&&(It=M>>l[h>>2],l[x>>2]=(0|S)<0?0-It|0:It),w=w+1|0}while((0|w)!=(0|T));_=_+1|0}while((0|_)!=(0|I))}if(x=(0|l[i>>2])+((0|k(e,b))+n<<2)|0,n=0==(0|I)|0==(0|T),1==(0|l[s>>2])){if(!n){n=0;do{_=0|k(n,T),w=0|k(n,b),e=0;do{l[x+(e+w<<2)>>2]=(0|l[E+(e+_<<2)>>2])/2|0,e=e+1|0}while((0|e)!=(0|T));n=n+1|0}while((0|n)!=(0|I))}}else if(!n)for(e=E,w=0;;){for(n=x,_=e,A=0;m[n>>2]=+m[vt>>2]*+(0|l[_>>2]),(0|(A=A+1|0))!=(0|T);)n=n+4|0,_=_+4|0;if((0|(w=w+1|0))==(0|I))break;x=x+(b<<2)|0,e=e+(T<<2)|0}ct=ct+1|0}while(ct>>>0<(0|k(0|l[ft>>2],0|l[ht>>2]))>>>0);_=0|l[wt>>2],n=0|l[_t>>2]}dt=dt+1|0}while(dt>>>0<(0|k(_,n))>>>0);e=0|l[St>>2]}bt=bt+1|0}while(bt>>>0<e>>>0);n=0|l[Tt>>2]}if((Mt=Mt+1|0)>>>0>=n>>>0){n=1,W=219;break}}return 219==(0|W)?0|n:0}function Wn(t,e,n){t|=0;var i,r=0,o=0,a=0,s=0;if(s=0|k(n|=0,e|=0),!(0|l[t+40>>2])){o=t+24|0,r=t+8|0;do{if(s>>>0>(0|l[o>>2])>>>0){if(Vt(0|l[r>>2]),a=0|Ht(s<<2),l[r>>2]=a,a){l[o>>2]=s,o=a,r=a;break}return 0|(n=0)}o=r=0|l[r>>2]}while(0);0|o&&Cr(0|r,0,s<<2|0)}a=e+2|0,l[t+32>>2]=a,a=0|k(n+2|0,a),s=t+28|0,r=0|l[(i=t+12|0)>>2];do{if(a>>>0>(0|l[s>>2])>>>0){if(Vt(r),r=0|Ht(o=a<<1),l[i>>2]=r,r){l[s>>2]=a;break}return 0|(n=0)}o=a<<1}while(0);return Cr(0|r,0,0|o),l[t+16>>2]=e,l[t+20>>2]=n,0|(n=1)}function Zn(t,e,n,i,r){e|=0,n|=0,i|=0,r|=0;var o,s=0,c=0;return s=0|l[(t|=0)>>2],20480&(c=0|a[e>>1])|0?(c=0|a[e>>1],c&=-16385,void(a[e>>1]=c)):(l[(o=s+100|0)>>2]=s+24+(u[20356+(255&c|i<<8)>>0]<<2),0|fi(s)?(c=c>>>4&255,l[o>>2]=s+24+(u[21380+c>>0]<<2),s=0|fi(s),s^=u[21636+c>>0],l[n>>2]=0|s?0-r|0:r,r=e+(0-(c=0|l[t+32>>2])<<1)|0,c=e+(c<<1)|0,a[(i=r+-2|0)>>1]=2|a[i>>1],a[r>>1]=a[r>>1]|a[3160+(s<<1)>>1],a[(r=r+2|0)>>1]=4|a[r>>1],a[(r=e+-2|0)>>1]=a[r>>1]|a[3160+(s+2<<1)>>1],a[e>>1]=4096|a[e>>1],a[(r=e+2|0)>>1]=a[r>>1]|a[3160+(s+4<<1)>>1],a[(r=c+-2|0)>>1]=1|a[r>>1],a[c>>1]=a[c>>1]|a[3160+(s+6<<1)>>1],a[(c=c+2|0)>>1]=8|a[c>>1],c=0|a[e>>1],c&=-16385,void(a[e>>1]=c)):(c=0|a[e>>1],c&=-16385,void(a[e>>1]=c)))}function jn(t,e,n,i,o){t|=0,n|=0,i|=0,o|=0;var s,c,h,f,d,p,g,v,b,_,w=0,A=0,x=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0,Y=0,X=0,J=0,Q=0,q=0,K=0,$=0,tt=0,et=0,nt=0,it=0,rt=0,ot=0,at=0,st=0,lt=0,ct=0,ut=0,ht=0,ft=0,dt=0,pt=0,mt=0,gt=0,yt=0,vt=0,bt=0,_t=0,wt=0,At=0,xt=0,St=0,Mt=0,Et=0,Tt=0,It=0,kt=0,Ct=0,Bt=0,Rt=0,Pt=0,Lt=0,Dt=0,Nt=0,Ot=0,Ft=0,Gt=0,zt=0,Ut=0,Ht=0,Vt=0,Wt=0,Zt=0,jt=0,Yt=0,Xt=0,Jt=0,Qt=0,qt=0,Kt=0;if(y[(_=32+(e|=0)|0)>>3]=0,!(w=0|l[(qt=e+16|0)>>2]))return 0|(qt=1);b=e+20|0,s=n+5584|0,c=t+16|0,h=t+20|0,f=t+8|0,d=t+36|0,p=0!=(0|i),g=t+12|0,v=t+32|0,Qt=0,e=w;t:for(;;){if(n=0|l[b>>2],w=0|l[s>>2],Xt=(0|l[n+(52*Qt|0)+8>>2])-(0|l[n+(52*Qt|0)>>2])|0,A=0|l[(Jt=n+(52*Qt|0)+16|0)>>2]){Yt=n+(52*Qt|0)+24|0,Zt=n+(52*Qt|0)+32|0,jt=w+(1080*Qt|0)+20|0,Ht=w+(1080*Qt|0)+16|0,Wt=p&Qt>>>0<o>>>0,Vt=i+(Qt<<3)|0,Ut=0,e=A;do{if(Ft=0|l[Yt>>2],n=0|l[(Gt=Ft+(136*Ut|0)+24|0)>>2]){Lt=Ft+(136*Ut|0)+16|0,Nt=~Ut,Ot=Ut+-1|0,Pt=0,w=0|l[(Dt=Ft+(136*Ut|0)+20|0)>>2],e=0|l[Lt>>2];do{if(Rt=Ft+(136*Ut|0)+28+(36*Pt|0)+32|0,0|k(w,e)){Tt=Ft+(136*Ut|0)+28+(36*Pt|0)+20|0,It=Ft+(136*Ut|0)+28+(36*Pt|0)|0,kt=Ft+(136*Ut|0)+28+(36*Pt|0)+4|0,Ct=Ft+(136*Ut|0)+28+(36*Pt|0)+16|0,Bt=((0|(Et=67108864/(0|~~+M(8192*+m[Rt>>2]))|0))<0)<<31>>31,Mt=0;do{if(xt=(n=0|l[Tt>>2])+(40*Mt|0)+16|0,0|k(0|l[(St=n+(40*Mt|0)+20|0)>>2],0|l[xt>>2])){At=n+(40*Mt|0)+24|0,wt=0;do{if(_t=0|l[At>>2],e=(A=0|l[_t+(52*wt|0)+12>>2])-(0|l[It>>2])|0,n=(x=0|l[_t+(52*wt|0)+16>>2])-(0|l[kt>>2])|0,1&(w=0|l[Ct>>2])&&(bt=0|l[Yt>>2],e=(0|l[bt+(136*Ot|0)+8>>2])+e-(0|l[bt+(136*Ot|0)>>2])|0),2&w&&(bt=0|l[Yt>>2],n=(0|l[bt+(136*Ot|0)+12>>2])+n-(0|l[bt+(136*Ot|0)+4>>2])|0),!(0|Wn(t,(0|l[_t+(52*wt|0)+20>>2])-A|0,(0|l[_t+(52*wt|0)+24>>2])-x|0))){e=0,zt=163;break t}x=0|l[c>>2],E=0|l[h>>2],C=(0|l[Zt>>2])+((0|k(n,Xt))+e<<2)|0,l[f>>2]=C,l[d>>2]=Xt,e=0|l[jt>>2],n=0!=(0|E);do{if(1==(0|e))if(n){if(!x){zt=27;break}for(e=0,n=0;;){for(w=0,A=e;l[(zt=C+(A<<2)|0)>>2]=l[zt>>2]<<6,(0|(w=w+1|0))!=(0|x);)A=A+1|0;if((0|(n=n+1|0))==(0|E)){zt=27;break}e=Xt+e|0}}else e=1;else if(n){if(!x){zt=27;break}for(e=0,w=0;;){for(n=0,A=w;bt=0|Er(0|(bt=0|br(0|(bt=0|vr(0|(bt=0|l[(zt=C+(A<<2)|0)>>2]),((0|bt)<0)<<31>>31|0,0|Et,0|Bt)),0|S,4096,0)),0|S,18),l[zt>>2]=bt,(0|(n=n+1|0))!=(0|x);)A=A+1|0;if((0|(e=e+1|0))==(0|E)){zt=27;break}w=Xt+w|0}}}while(0);27==(0|zt)&&(zt=0,e=0|l[jt>>2]),mt=0|l[Ct>>2],gt=(0|l[Jt>>2])+Nt|0,yt=+m[Rt>>2],vt=0|l[Ht>>2],bt=0|l[t>>2],E=0|l[c>>2];do{if(E){if(!(T=0|l[h>>2])){n=0;break}x=0|l[d>>2],A=0,w=0;do{n=0;do{pt=C+((0|k(n,x))+A<<2)|0,w=(0|w)>(0|(pt=(0|(pt=0|l[pt>>2]))>-1?pt:0-pt|0))?w:pt,n=n+1|0}while((0|n)!=(0|T));A=A+1|0}while((0|A)!=(0|E));if(!w){n=0;break}if((0|w)>1)for(n=0;n=n+1|0,w>>>0>3;)w>>>=1;else n=0;n=n+-5|0}else n=0}while(0);l[(dt=_t+(52*wt|0)+28|0)>>2]=n,n=n+-1|0,ai(bt),si(bt,18,0,46),si(bt,17,0,3),si(bt,0,0,4),ti(bt,0|l[(pt=_t+(52*wt|0)|0)>>2]);e:do{if((0|n)>-1)for(ht=_t+(52*wt|0)+8|0,ft=0!=(0|(nt=1&vt)),it=1==(0|e),rt=0==(4&vt|0),nt=0==(0|nt),ot=0==(2&vt|0),at=0!=(0|(lt=8&vt)),st=mt<<8,ct=0==(32&vt|0),ut=1^(lt=0==(0|lt)),e=0,tt=2,w=0,et=0;;){$=0|l[ht>>2],W=ft&(tt>>>0<2?(0|n)<((0|l[dt>>2])-4|0):0);n:do{switch(0|tt){case 0:if(H=1<<n+6,!(A=0|l[h>>2])){w=0;break n}V=0==(0|n)?3176:3432,U=0,w=0,x=E=0|l[c>>2];do{if(z=U,U=U+4|0,x){for(F=-4==(0|z),G=3|z,O=0;;){if(F)x=E;else{N=z;do{if(N>>>0>=(A=0|l[h>>2])>>>0)break;K=N,N=N+1|0,D=(R=0|l[g>>2])+(1+(P=(0|k(0|l[v>>2],N))+O|0)<<1)|0,T=(0|l[f>>2])+((0|k(0|l[d>>2],K))+O<<2)|0,L=0|l[t>>2],C=0|a[D>>1],0!=(0|(A=255&(C=at&((0|K)==(0|G)|(0|K)==(A+-1|0))?-1095&C:C)))&0==(20480&C|0)&&(E=1&(x=0!=(((0|(x=0|l[T>>2]))<0?0-x|0:x)&H|0)),l[(B=L+100|0)>>2]=L+24+(u[20356+(A|st)>>0]<<2),W?ri(L,E):ei(L,E),x&&(x=(A=0|l[T>>2])>>>31,w=w+(0|a[V+((((0|A)<0?0-A|0:A)>>>n&127)<<1)>>1])|0,A=C>>>4&255,l[B>>2]=L+24+(u[21380+A>>0]<<2),W?ri(L,x):ei(L,x^u[21636+A>>0]),q=D+(0-(K=0|l[v>>2])<<1)|0,K=D+(K<<1)|0,a[(Q=q+-2|0)>>1]=2|a[Q>>1],a[q>>1]=a[q>>1]|a[3160+(x<<1)>>1],a[(q=q+2|0)>>1]=4|a[q>>1],a[(q=R+(P<<1)|0)>>1]=a[q>>1]|a[3160+((2|x)<<1)>>1],a[D>>1]=4096|a[D>>1],a[(q=D+2|0)>>1]=a[q>>1]|a[3160+((4|x)<<1)>>1],a[(q=K+-2|0)>>1]=1|a[q>>1],a[K>>1]=a[K>>1]|a[3160+((6|x)<<1)>>1],a[(K=K+2|0)>>1]=8|a[K>>1]),a[D>>1]=16384|a[D>>1])}while(N>>>0<U>>>0);x=0|l[c>>2]}if((O=O+1|0)>>>0>=x>>>0)break;E=x}A=0|l[h>>2],E=x}else x=0}while(U>>>0<A>>>0);break;case 1:if(O=1<<n+6,!(A=0|l[h>>2])){w=0;break n}F=0==(0|n)?3688:3944,N=0,w=0,x=0|l[c>>2];do{if(D=N,N=N+4|0,x){P=-4==(0|D),L=3|D,R=0;do{B=R,R=R+1|0;i:do{if(!P)if(lt)if(W){C=D;do{if(C>>>0>=(0|l[h>>2])>>>0)break i;A=C,C=C+1|0,E=(0|l[g>>2])+((0|k(0|l[v>>2],C))+R<<1)|0,x=0|l[t>>2],4096==(20480&(T=0|a[E>>1])|0)&&(K=(0|l[f>>2])+((0|k(0|l[d>>2],A))+B<<2)|0,K=0|l[K>>2],w=w+(0|a[F+(((K=(0|K)<0?0-K|0:K)>>>n&127)<<1)>>1])|0,l[x+100>>2]=x+24+((8192&T|0?16:255&T|0?15:14)<<2),ri(x,0!=(K&O|0)&1),a[E>>1]=8192|a[E>>1])}while(C>>>0<N>>>0)}else{C=D;do{if(C>>>0>=(0|l[h>>2])>>>0)break i;A=C,C=C+1|0,E=(0|l[g>>2])+((0|k(0|l[v>>2],C))+R<<1)|0,x=0|l[t>>2],4096==(20480&(T=0|a[E>>1])|0)&&(K=(0|l[f>>2])+((0|k(0|l[d>>2],A))+B<<2)|0,K=0|l[K>>2],w=w+(0|a[F+(((K=(0|K)<0?0-K|0:K)>>>n&127)<<1)>>1])|0,l[x+100>>2]=x+24+((8192&T|0?16:255&T|0?15:14)<<2),ei(x,0!=(K&O|0)&1),a[E>>1]=8192|a[E>>1])}while(C>>>0<N>>>0)}else if(W){C=D;do{if(C>>>0>=(A=0|l[h>>2])>>>0)break i;x=C,C=C+1|0,T=(0|l[g>>2])+((0|k(0|l[v>>2],C))+R<<1)|0,E=0|l[t>>2],K=0|a[T>>1],4096==(20480&(A=(0|x)==(0|L)|(0|x)==(A+-1|0)?-1095&K:K)|0)&&(K=(0|l[f>>2])+((0|k(0|l[d>>2],x))+B<<2)|0,K=0|l[K>>2],w=w+(0|a[F+(((K=(0|K)<0?0-K|0:K)>>>n&127)<<1)>>1])|0,l[E+100>>2]=E+24+((8192&A|0?16:255&A|0?15:14)<<2),ri(E,0!=(K&O|0)&1),a[T>>1]=8192|a[T>>1])}while(C>>>0<N>>>0)}else{C=D;do{if(C>>>0>=(A=0|l[h>>2])>>>0)break i;x=C,C=C+1|0,T=(0|l[g>>2])+((0|k(0|l[v>>2],C))+R<<1)|0,E=0|l[t>>2],K=0|a[T>>1],4096==(20480&(A=(0|x)==(0|L)|(0|x)==(A+-1|0)?-1095&K:K)|0)&&(K=(0|l[f>>2])+((0|k(0|l[d>>2],x))+B<<2)|0,K=0|l[K>>2],w=w+(0|a[F+(((K=(0|K)<0?0-K|0:K)>>>n&127)<<1)>>1])|0,l[E+100>>2]=E+24+((8192&A|0?16:255&A|0?15:14)<<2),ei(E,0!=(K&O|0)&1),a[T>>1]=8192|a[T>>1])}while(C>>>0<N>>>0)}}while(0);x=0|l[c>>2]}while(R>>>0<x>>>0);A=0|l[h>>2]}else x=0}while(N>>>0<A>>>0);break;case 2:if(Y=0|l[t>>2],X=1<<n+6,A=0|l[h>>2]){J=Y+92|0,Q=Y+100|0,q=Y+96|0,K=0==(0|n)?3176:3432,E=0,w=0,x=0|l[c>>2];do{if(x)for(G=3|E,U=1+(z=1|E)|0,H=z+3|0,j=E+4|0,V=E+1|0,W=E+2|0,Z=E+3|0,F=0;;){do{if(G>>>0<A>>>0){if(A=0|l[g>>2],x=0|l[v>>2],T=F+1|0,C=A+((0|k(x,z))+T<<1)|0,C=0|a[C>>1],lt){if(D=A+((0|k(x,U))+T<<1)|0,N=A+((0|k(x,G))+T<<1)|0,O=A+((0|k(x,H))+T<<1)|0,20735&(a[D>>1]|C|a[N>>1]|a[O>>1])){O=0,A=0,zt=105;break}}else{if(20735&C){O=0,A=0,zt=105;break}if(O=A+((0|k(x,U))+T<<1)|0,20735&a[O>>1]){O=0,A=0,zt=105;break}if(O=A+((0|k(x,G))+T<<1)|0,20735&a[O>>1]){O=0,A=0,zt=105;break}if(O=A+((0|k(x,H))+T<<1)|0,20665&a[O>>1]){O=0,A=0,zt=105;break}}A=0|l[f>>2],x=0|l[d>>2],O=A+((0|k(x,E))+F<<2)|0,O=0|l[O>>2];do{if(((0|O)<0?0-O|0:O)&X)A=0;else{if(O=A+((0|k(x,V))+F<<2)|0,((0|(O=0|l[O>>2]))<0?0-O|0:O)&X|0){A=1;break}if(O=A+((0|k(x,W))+F<<2)|0,((0|(O=0|l[O>>2]))<0?0-O|0:O)&X|0){A=2;break}A=A+((0|k(x,Z))+F<<2)|0,A=0==(((0|(A=0|l[A>>2]))<0?0-A|0:A)&X|0)?4:3}}while(0);if(l[Q>>2]=J,ei(Y,4!=(0|A)&1),4==(0|A))break;l[Q>>2]=q,ei(Y,A>>>1),ei(Y,1&A),O=1,zt=105}else O=0,A=0,zt=105}while(0);i:do{if(105==(0|zt)){if(zt=0,!((N=A+E|0)>>>0<j>>>0))break;D=N;do{if(D>>>0>=(A=0|l[h>>2])>>>0)break i;Kt=D,D=D+1|0,L=(C=0|l[g>>2])+(1+(B=(0|k(0|l[v>>2],D))+F|0)<<1)|0,R=(0|l[f>>2])+((0|k(0|l[d>>2],Kt))+F<<2)|0,P=0|l[t>>2],x=0|a[L>>1],T=((0|Kt)==(0|G)|(0|Kt)==(A+-1|0))&ut?-1095&x:x;do{if(O&(0|Kt)==(0|N))A=P+100|0,zt=111;else{if(20480&x|0)break;l[(A=P+100|0)>>2]=P+24+(u[20356+(255&T|st)>>0]<<2),ei(P,1&(Kt=0!=(((0|(Kt=0|l[R>>2]))<0?0-Kt|0:Kt)&X|0))),Kt&&(zt=111)}}while(0);111==(0|zt)&&(zt=0,R=0|l[R>>2],w=w+(0|a[K+((((0|R)<0?0-R|0:R)>>>n&127)<<1)>>1])|0,Kt=T>>>4&255,l[A>>2]=P+24+(u[21380+Kt>>0]<<2),ei(P,(R>>>=31)^u[21636+Kt>>0]),P=L+(0-(Kt=0|l[v>>2])<<1)|0,Kt=L+(Kt<<1)|0,a[(T=P+-2|0)>>1]=2|a[T>>1],a[P>>1]=a[P>>1]|a[3160+(R<<1)>>1],a[(P=P+2|0)>>1]=4|a[P>>1],a[(P=C+(B<<1)|0)>>1]=a[P>>1]|a[3160+((2|R)<<1)>>1],a[L>>1]=4096|a[L>>1],a[(P=L+2|0)>>1]=a[P>>1]|a[3160+((4|R)<<1)>>1],a[(P=Kt+-2|0)>>1]=1|a[P>>1],a[Kt>>1]=a[Kt>>1]|a[3160+((6|R)<<1)>>1],a[(Kt=Kt+2|0)>>1]=8|a[Kt>>1]),a[L>>1]=-16385&a[L>>1]}while(D>>>0<j>>>0)}}while(0);if(F=F+1|0,x=0|l[c>>2],A=0|l[h>>2],F>>>0>=x>>>0){E=j;break}}else E=E+4|0,x=0}while(E>>>0<A>>>0)}else w=0;if(ct)break n;ui(bt)}}while(0);I=(Wt?+y[Vt>>3]:1)*(I=it?+Rn(gt,mt):+Ln(gt,mt))*yt*+(1<<n|0),et+=I*=I*+(0|w)*.0001220703125,y[_>>3]=+y[_>>3]+I;do{if(rt)zt=127;else{if((0|n)<1&2==(0|tt)){zt=127;break}ni(bt),x=1|r[(A=$+(24*e|0)+20|0)>>0],r[A>>0]=x,A=1}}while(0);do{if(127==(0|zt)){if(130==(0|(zt=0!=(0|tt)&(0|n)<(0|(A=(0|l[dt>>2])-4|0))?nt?131:130:nt|2!=(0|tt)|(0|n)!=(0|A)?131:130))){zt=0,ni(bt),x=1|r[(A=$+(24*e|0)+20|0)>>0],r[A>>0]=x,A=1;break}if(131==(0|zt)){zt=0,x=-2&r[(A=$+(24*e|0)+20|0)>>0],r[A>>0]=x,A=3;break}}}while(0);tt=(Kt=3==(0|(K=tt+1|0)))?0:K,n=n+(Kt<<31>>31)|0;do{if((0|n)>0&0!=(1&x)){if(ft&(tt>>>0<2?(0|n)<((0|l[dt>>2])-4|0):0)){ii(bt);break}li(bt);break}}while(0);if(y[$+(24*e|0)+8>>3]=et,Kt=(0|$n(bt))+A|0,l[$+(24*e|0)>>2]=Kt,ot||oi(bt),e=e+1|0,(0|n)<=-1)break e}else e=0}while(0);do{if(16&vt)ci(bt);else{if(1&vt|0)break;ni(bt)}}while(0);if(l[(T=_t+(52*wt|0)+48|0)>>2]=e,0|e){x=_t+(52*wt|0)+8|0,A=0;do{E=0|l[x>>2],(Kt=0|l[(n=E+(24*A|0)|0)>>2])>>>0>(0|$n(bt))>>>0?(e=0|$n(bt),l[n>>2]=e):e=0|l[n>>2];do{if(e>>>0>1){if(w=e+-1|0,-1!=(0|r[(0|l[pt>>2])+w>>0]))break;l[n>>2]=w,e=w}}while(0);n=A?0|l[(0|l[x>>2])+(24*(A+-1|0)|0)>>2]:0,l[E+(24*A|0)+16>>2]=e-n,A=A+1|0}while(A>>>0<(0|l[T>>2])>>>0)}wt=wt+1|0}while(wt>>>0<(0|k(0|l[St>>2],0|l[xt>>2]))>>>0);w=0|l[Dt>>2],e=0|l[Lt>>2]}Mt=Mt+1|0}while(Mt>>>0<(0|k(w,e))>>>0);n=0|l[Gt>>2]}Pt=Pt+1|0}while(Pt>>>0<n>>>0);e=0|l[Jt>>2]}Ut=Ut+1|0}while(Ut>>>0<e>>>0);e=0|l[qt>>2]}if((Qt=Qt+1|0)>>>0>=e>>>0){e=1,zt=163;break}}return 163==(0|zt)?0|e:0}function Yn(t,e,n,i,r,o,s,c,h,f,d,p){t|=0,e|=0,n|=0,i|=0,r|=0,o|=0,s|=0,c|=0,h|=0,f|=0,d|=0,p|=0;var m,g,y,v,b,_=0,A=0,x=0,M=0,E=0,T=0,I=0,k=0,C=0,B=0,R=0,P=0;if(b=w,w=w+16|0,l[(y=b)>>2]=0,_=0|l[t>>2],B=0|l[t+4>>2],m=(t=0|l[B+76>>2])+(5640*e|0)|0,A=4==(0|a[B>>1])?2:1,M=0|l[(x=B+80|0)>>2]?0|l[_+16>>2]:1,v=1+(0|l[t+(5640*e|0)+420>>2])|0,!(g=0|He(_,B,e,p)))return w=b,0|(o=0);l[o>>2]=0;t:do{if(p){if(We(g,B,e,d,h,f,p),C=g+(232*d|0)|0,-1==(0|l[g+(232*d|0)+80>>2]))return Ue(g,v),w=b,0|(o=0);I=g+(232*d|0)+36|0,k=n+840|0,f=c+12|0,E=c+8|0,T=c+88|0,M=B+93|0,x=t+(5640*e|0)+5636|0;e:do{if(c)for(;;){do{if(!(0|Ye(C)))break t}while((0|l[I>>2])>>>0>=i>>>0);if(l[y>>2]=0,!(0|Xn(e,n,m,C,r,y,s,c)))break e;if(r=r+(A=0|l[y>>2])|0,s=s-A|0,l[o>>2]=(0|l[o>>2])+A,0|l[f>>2]){_=0|l[T>>2],h=(d=0|l[_+(592*e|0)+548>>2])+((t=0|l[E>>2])<<5)|0;do{if(t){if(1&((0|u[x>>0])>>>2|(0|u[M>>0])>>>3)&&!(0==(0|(R=0|l[(P=h)>>2]))&0==(0|(P=0|l[P+4>>2])))){_=R,p=P;break}_=0|br(0|l[(_=d+(t+-1<<5)+16|0)>>2],0|l[_+4>>2],1,0),p=S}else _=p=1+(0|l[_+(592*e|0)+12>>2])|0,p=((0|p)<0)<<31>>31}while(0);l[h>>2]=_,l[h+4>>2]=p,A=0|br(0|(p=0|br(0|_,0|p,-1,-1)),0|(h=S),0|A,0),l[(B=d+(t<<5)+16|0)>>2]=A,l[B+4>>2]=S,A=0|br(0|p,0|h,0|l[(A=B=d+(t<<5)+8|0)>>2],0|l[A+4>>2]),l[B>>2]=A,l[B+4>>2]=S}else t=0|l[E>>2];l[E>>2]=t+1,l[k>>2]=1+(0|l[k>>2])}else for(;;){do{if(!(0|Ye(C)))break t}while((0|l[I>>2])>>>0>=i>>>0);if(l[y>>2]=0,!(0|Xn(e,n,m,C,r,y,s,0)))break e;c=0|l[y>>2],l[o>>2]=(0|l[o>>2])+c,l[k>>2]=1+(0|l[k>>2]),s=s-c|0,r=r+c|0}}while(0);return Ue(g,v),w=b,0|(o=0)}if(0|M){p=0;e:for(;;){for(t=0,h=0,d=g;;){if(We(g,B,e,h,p,f,0),-1==(0|l[d+80>>2])){r=9;break e}_=d+36|0;n:for(;;){do{if(!(0|Ye(d)))break n}while((0|l[_>>2])>>>0>=i>>>0);if(l[y>>2]=0,!(0|Xn(e,n,m,d,r,y,s,c))){r=13;break e}P=0|l[y>>2],l[o>>2]=(0|l[o>>2])+P,t=P+t|0,s=s-P|0,r=r+P|0}if(0!=(0|(P=0|l[x>>2]))&t>>>0>P>>>0){r=17;break e}if((h=h+1|0)>>>0>=A>>>0)break;d=d+232|0}if((p=p+1|0)>>>0>=M>>>0)break t}if(9==(0|r))return Ue(g,v),w=b,0|(o=0);if(13==(0|r))return Ue(g,v),w=b,0|(o=0);if(17==(0|r))return Ue(g,v),w=b,0|(o=0)}}while(0);return Ue(g,v),w=b,0|(o=1)}function Xn(t,e,n,i,o,a,s,c){t|=0,e|=0,n|=0,o|=0,a|=0,s|=0,c|=0;var u,h,f,d,p=0,m=0,g=0,v=0,b=0,_=0,w=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0;if(x=0|l[28+(i|=0)>>2],f=0|l[i+32>>2],d=0|l[i+36>>2],A=0|l[(0|l[e+20>>2])+(52*(0|l[i+24>>2])|0)+24>>2],2&l[n>>2]?(r[o>>0]=-1,r[o+1>>0]=-111,r[o+2>>0]=0,r[o+3>>0]=4,N=e+840|0,r[o+4>>0]=(0|l[N>>2])>>>8,r[o+5>>0]=l[N>>2],s=s+-6|0,N=o+6|0):N=o,0==(0|d)&&0|l[(w=A+(136*x|0)+24|0)>>2])for(g=0,v=A+(136*x|0)+28|0;;){if(i=0|l[v+20>>2],un(0|l[i+(40*f|0)+32>>2]),un(0|l[(b=i+(40*f|0)+36|0)>>2]),0|(_=0|k(0|l[i+(40*f|0)+20>>2],0|l[i+(40*f|0)+16>>2]))){e=i+(40*f|0)+24|0,m=v+28|0,i=0;do{O=0|l[e>>2],l[O+(52*i|0)+40>>2]=0,dn(0|l[b>>2],i,(0|l[m>>2])-(0|l[O+(52*i|0)+28>>2])|0),i=i+1|0}while((0|i)!=(0|_))}if((g=g+1|0)>>>0>=(0|l[w>>2])>>>0)break;v=v+36|0}if(!(u=0|An()))return 0|(a=0);if(function(t,e,n){e|=0,n|=0,l[(t|=0)>>2]=e,l[t+4>>2]=e+n,l[t+8>>2]=e,l[t+12>>2]=0,l[t+16>>2]=8}(u,N,s),Mn(u,1,1),h=A+(136*x|0)+28|0,0|l[(O=A+(136*x|0)+24|0)>>2])for(L=d+1|0,R=0,P=h;;){if(b=(v=0|l[P+20>>2])+(40*f|0)+24|0,!(m=0==(0|(D=0|k(0|l[v+(40*f|0)+20>>2],0|l[v+(40*f|0)+16>>2]))))){for(g=v+(40*f|0)+32|0,i=0|l[b>>2],e=0;0==(0|l[i+40>>2])&&0|l[(0|l[i+4>>2])+(24*d|0)>>2]&&dn(0|l[g>>2],e,d),(0|(e=e+1|0))!=(0|D);)i=i+52|0;if(!m)for(B=v+(40*f|0)+32|0,C=v+(40*f|0)+36|0,E=0|l[b>>2],T=0;;){if(i=(0|l[E+4>>2])+(24*d|0)|0,0|l[(I=E+40|0)>>2]?Mn(u,0!=(0|l[i>>2])&1,1):pn(u,0|l[B>>2],T,L),0|(e=0|l[i>>2])){0|l[I>>2]||(l[E+32>>2]=3,pn(u,0|l[C>>2],T,999),e=0|l[i>>2]);t:do{switch(0|e){case 1:Mn(u,0,1);break;case 2:Mn(u,2,2);break;default:if(e>>>0<6){Mn(u,e+-3|12,4);break t}if(e>>>0<37){Mn(u,e+-6|480,9);break t}e>>>0<165&&Mn(u,e+-37|65408,16)}}while(0);if(S=E+8|0,(g=0|l[I>>2])>>>0<(M=(e=0|l[i>>2])+g|0)>>>0){for(x=E+32|0,A=g+-1+e|0,w=g,m=0,e=0,v=0,_=(0|l[S>>2])+(24*g|0)|0;;){if(g=e+1|0,m=(0|l[_+16>>2])+m|0,0!=(1&r[_+20>>0])|(0|w)==(0|A)){if((0|m)>1)for(e=0;;){if(e=e+1|0,!(m>>>0>3)){m=e;break}m>>>=1}else m=0;if(b=0|l[x>>2],(0|g)>1)for(e=0;e=e+1|0,g>>>0>3;)g>>>=1;else e=0;b=m+1-b-e|0,m=0,g=0,v=(0|v)>(0|b)?v:b}if((0|(w=w+1|0))==(0|M))break;e=g,_=_+24|0}if((0|v)>0)for(e=v;;){if(Mn(u,1,1),!((0|e)>1)){e=v;break}e=e+-1|0}else e=v}else m=0,g=0,e=0;if(Mn(u,0,1),l[(w=E+32|0)>>2]=(0|l[w>>2])+e,(e=0|l[I>>2])>>>0<M>>>0)for(_=e,b=(0|l[S>>2])+(24*e|0)|0,e=g;;){if(e=e+1|0,m=(0|l[b+16>>2])+m|0,0!=(1&r[b+20>>0])||(0|_)==((0|l[I>>2])-1+(0|l[i>>2])|0)){if(v=0|l[w>>2],(0|e)>1)for(g=0;;){if(g=g+1|0,!(e>>>0>3)){e=g;break}e>>>=1}else e=0;Mn(u,m,e+v|0),m=0,e=0}if((0|(_=_+1|0))==(0|M))break;b=b+24|0}}if((0|(T=T+1|0))==(0|D))break;E=E+52|0}}if((R=R+1|0)>>>0>=(0|l[O>>2])>>>0)break;P=P+36|0}if(!(0|function(t){var e,n,i,o,a=0,s=0;return s=(a=0|l[(n=12+(t|=0)|0)>>2])<<8&65280,l[n>>2]=s,l[(o=t+16|0)>>2]=65280==(0|s)?7:8,e=0|l[(s=t+8|0)>>2],(0|l[(i=t+4|0)>>2])>>>0<=e>>>0?0|(s=0):(l[s>>2]=e+1,r[e>>0]=a,7!=(0|l[o>>2])?0|(s=1):(t=(a=0|l[n>>2])<<8&65280,l[n>>2]=t,l[o>>2]=65280==(0|t)?7:8,t=0|l[s>>2],(0|l[i>>2])>>>0<=t>>>0?0|(s=0):(l[s>>2]=t+1,r[t>>0]=a,0|(s=1))))}(u)))return xn(u),0|(a=0);i=N+(e=0|Sn(u))|0,e=s-e|0,xn(u),4&l[n>>2]&&(r[i>>0]=-1,r[i+1>>0]=-110,e=e+-2|0,i=i+2|0),(S=0!=(0|c))&&0|l[c+12>>2]&&(N=i-o|0,n=(0|l[(0|l[c+88>>2])+(592*t|0)+548>>2])+(l[c+8>>2]<<5)+8|0,l[n>>2]=N,l[n+4>>2]=((0|N)<0)<<31>>31);t:do{if(0|l[O>>2]){M=c+12|0,E=c+88|0,T=c+8|0,x=0,A=h;e:for(;;){m=0|l[A+20>>2],w=0|k(0|l[m+(40*f|0)+20>>2],0|l[m+(40*f|0)+16>>2]),m=0|l[m+(40*f|0)+24>>2];n:do{if(w){i:do{if(S)for(_=0;;){if(b=0|l[m+4>>2],0|l[(s=b+(24*d|0)|0)>>2])if((v=0|l[(g=b+(24*d|0)+4|0)>>2])>>>0>e>>>0)s=1;else{kr(0|i,0|l[b+(24*d|0)+16>>2],0|v),l[(n=m+40|0)>>2]=(0|l[n>>2])+(0|l[s>>2]),i=i+(n=0|l[g>>2])|0,e=e-n|0;do{if(0|l[M>>2]){if(n=(0|l[(0|l[E>>2])+(592*t|0)+548>>2])+(l[T>>2]<<5)+24|0,p=+y[b+(24*d|0)+8>>3]+ +y[n>>3],y[n>>3]=p,!(+y[c>>3]<p))break;y[c>>3]=p}}while(0);s=0,m=m+52|0}else s=28,m=m+52|0;switch(31&s){case 28:case 0:break;default:break i}if((_=_+1|0)>>>0>=w>>>0){F=83;break n}}else for(_=0;;){switch(s=0|l[m+4>>2],0|l[(g=s+(24*d|0)|0)>>2]?(b=0|l[(v=s+(24*d|0)+4|0)>>2])>>>0>e>>>0?s=1:(kr(0|i,0|l[s+(24*d|0)+16>>2],0|b),l[(n=m+40|0)>>2]=(0|l[n>>2])+(0|l[g>>2]),s=0,e=e-(n=0|l[v>>2])|0,i=i+n|0,m=m+52|0):(s=28,m=m+52|0),31&s){case 28:case 0:break;default:break i}if((_=_+1|0)>>>0>=w>>>0){F=83;break n}}}while(0);if(s){i=0;break e}s=A}else F=83}while(0);if(83==(0|F)&&(F=0,s=A+36|0),(x=x+1|0)>>>0>=(0|l[O>>2])>>>0)break t;A=s}return 0|i}}while(0);return l[a>>2]=i-o+(0|l[a>>2]),0|(a=1)}function Jn(t,e,n,i,o,a,s,c,u){t|=0,e|=0,n|=0,i|=0,o|=0,s|=0,c|=0,u|=0;var h,f,d,p,m,g,y,v,b,_,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0;_=w,w=w+64|0,y=_+48|0,v=_+40|0,D=_+32|0,L=_+24|0,R=_+16|0,B=_+8|0,C=_,P=_+56|0,U=a|=0,l[(b=_+52|0)>>2]=U,h=0|l[e+(52*(0|l[(g=i+24|0)>>2])|0)+24>>2],f=0|l[i+28>>2],m=i+36|0;t:do{if(0==(0|l[m>>2])&&(I=h+(136*f|0)+24|0,0|l[I>>2])){for(E=i+32|0,x=0,M=h+(136*f|0)+28|0;;){if((0|l[M+8>>2])!=(0|l[M>>2])&&(0|l[M+12>>2])!=(0|l[M+4>>2])){if(e=0|l[M+20>>2],(A=0|l[E>>2])>>>0>=(((0|l[M+24>>2])>>>0)/40|0)>>>0)break;if(un(0|l[e+(40*A|0)+32>>2]),un(0|l[e+(40*A|0)+36>>2]),0|(T=0|k(0|l[e+(40*A|0)+20>>2],0|l[e+(40*A|0)+16>>2])))for(S=0,e=0|l[e+(40*A|0)+24>>2];l[e+44>>2]=0,l[e+48>>2]=0,(0|(S=S+1|0))!=(0|T);)e=e+56|0}if((x=x+1|0)>>>0>=(0|l[I>>2])>>>0)break t;M=M+36|0}return mt(u,1,22161,C),w=_,0|(U=0)}}while(0);do{if(2&l[n>>2]){if(c>>>0<6){mt(u,2,22179,B),e=U;break}if(-1==(0|r[a>>0])&&-111==(0|r[a+1>>0])){e=a+6|0,l[b>>2]=e;break}mt(u,2,22221,R),e=U}else e=U}while(0);if(!(p=0|An()))return w=_,0|(U=0);do{if(!(1&r[t+96>>0])){if(2&r[n+5636>>0]){z=G=n+5168|0,G=0|l[G>>2],P=n+5180|0;break}l[P>>2]=a+c-e,z=b,G=e;break}z=G=t+40|0,G=0|l[G>>2],P=t+44|0}while(0);if(function(t,e,n){e|=0,n|=0,l[(t|=0)>>2]=e,l[t+4>>2]=e+n,l[t+8>>2]=e,l[t+12>>2]=0,l[t+16>>2]=0}(p,G,0|l[P>>2]),!(0|En(p,1))){Tn(p),e=G+(0|Sn(p))|0,xn(p);do{if(4&l[n>>2]){if(((0|l[P>>2])-e+(0|l[z>>2])|0)>>>0<2){mt(u,2,22242,L),A=z;break}if(-1==(0|r[e>>0])&&-110==(0|r[e+1>>0])){e=e+2|0,A=z;break}mt(u,2,22284,D),A=z}else A=z}while(0);return u=e-(n=0|l[A>>2])|0,l[P>>2]=(0|l[P>>2])-u,l[z>>2]=n+u,l[o>>2]=0,l[s>>2]=(0|l[b>>2])-U,w=_,0|(U=1)}d=h+(136*f|0)+24|0;t:do{if(0|l[d>>2]){O=i+32|0,F=n+5584|0,D=0,e=h+(136*f|0)+28|0;e:for(;;){A=0|l[e+20>>2],x=0|l[O>>2];n:do{if((0|l[e+8>>2])!=(0|l[e>>2])&&(0|l[e+12>>2])!=(0|l[e+4>>2])){c=0|k(0|l[A+(40*x|0)+20>>2],0|l[A+(40*x|0)+16>>2]);i:do{if(0|c){t=A+(40*x|0)+32|0,i=A+(40*x|0)+36|0,L=e+28|0,a=0,A=0|l[A+(40*x|0)+24>>2];r:for(;;){x=0|l[(S=A+44|0)>>2]?0|En(p,1):0|mn(p,0|l[t>>2],a,1+(0|l[m>>2])|0);o:do{if(x){if(!(0|l[S>>2])){for(x=0;!(0|mn(p,0|l[i>>2],a,x));)x=x+1|0;l[A+24>>2]=1-x+(0|l[L>>2]),l[A+28>>2]=3}do{if(0|En(p,1)){if(!(0|En(p,1))){x=2;break}if(3!=(0|(x=0|En(p,2)))){x=x+3|0;break}if(31==(0|(x=0|En(p,5)))){x=37+(0|En(p,7))|0;break}x=x+6|0;break}x=1}while(0);for(l[(C=A+40|0)>>2]=x,x=0;0|En(p,1);)x=x+1|0;l[(R=A+28|0)>>2]=(0|l[R>>2])+x,T=0|l[S>>2];do{if(T){if(x=T+-1|0,S=0|l[(I=A+4|0)>>2],(0|l[S+(x<<5)+8>>2])!=(0|l[S+(x<<5)+20>>2]))break;E=0|l[(0|l[F>>2])+(1080*(0|l[g>>2])|0)+16>>2],x=0|l[(M=A+52|0)>>2];do{if((T+1|0)>>>0>x>>>0){if(x=x+10|0,l[M>>2]=x,x=0|Wt(S,x<<5)){l[I>>2]=x,S=x;break}Zt(0|l[I>>2]),l[I>>2]=0,l[M>>2]=0,xn(p),x=1;break o}}while(0);l[(x=S+(T<<5)|0)>>2]=0,l[x+4>>2]=0,l[x+8>>2]=0,l[x+12>>2]=0,l[x+16>>2]=0,l[x+20>>2]=0,l[x+24>>2]=0,l[x+28>>2]=0;do{if(4&E)x=1;else{if(!(1&E)){x=109;break}x=1==(0|(x=0|l[x+-32+20>>2]))|10==(0|x)?2:1}}while(0);M=T,E=I,S=S+(T<<5)+20|0,N=77}else{E=0|l[(0|l[F>>2])+(1080*(0|l[g>>2])|0)+16>>2],x=A+52|0;do{if(!(0|l[x>>2])){if(l[x>>2]=10,M=0|Wt(0|l[(S=A+4|0)>>2],320)){l[S>>2]=M,x=M,S=M;break}Zt(0|l[S>>2]),l[S>>2]=0,l[x>>2]=0,xn(p),x=1;break o}x=S=0|l[A+4>>2]}while(0);l[x>>2]=0,l[x+4>>2]=0,l[x+8>>2]=0,l[x+12>>2]=0,l[x+16>>2]=0,l[x+20>>2]=0,l[x+24>>2]=0,l[x+28>>2]=0,x=4&E?1:0==(1&E|0)?109:10,M=0,E=A+4|0,S=S+20|0,N=77}}while(0);for(77==(0|N)&&(l[S>>2]=x,x=M,I=E),B=A+52|0,E=0|l[C>>2],C=x;;){if(M=0|l[I>>2],x=(0|(x=(0|l[M+(C<<5)+20>>2])-(0|l[M+(C<<5)+8>>2])|0))<(0|E)?x:E,l[M+(C<<5)+24>>2]=x,M=0|l[R>>2],x>>>0>1)for(S=x,x=0;x=x+1|0,S>>>0>3;)S>>>=1;else x=0;if(N=0|En(p,x+M|0),S=0|l[I>>2],l[S+(C<<5)+28>>2]=N,(0|(E=E-(0|l[S+(C<<5)+24>>2])|0))<=0){N=90;break}if(T=C+1|0,M=0|l[(0|l[F>>2])+(1080*(0|l[g>>2])|0)+16>>2],(C+2|0)>>>0>(x=0|l[B>>2])>>>0){if(x=x+10|0,l[B>>2]=x,!(x=0|Wt(S,x<<5))){N=89;break}l[I>>2]=x,S=x}l[(N=S+(T<<5)|0)>>2]=0,l[N+4>>2]=0,l[N+8>>2]=0,l[N+12>>2]=0,l[N+16>>2]=0,l[N+20>>2]=0,l[N+24>>2]=0,l[N+28>>2]=0;do{if(4&M)x=1;else{if(!(1&M)){x=109;break}x=1==(0|(x=0|l[S+(C<<5)+20>>2]))|10==(0|x)?2:1}}while(0);l[S+(T<<5)+20>>2]=x,C=T}if(89==(0|N)){N=0,Zt(0|l[I>>2]),l[I>>2]=0,l[B>>2]=0,xn(p),x=1;break}if(90==(0|N)){N=0,x=0,A=A+56|0;break}}else l[A+40>>2]=0,x=13,A=A+56|0}while(0);switch(15&x){case 13:case 0:break;default:break r}if((a=a+1|0)>>>0>=c>>>0)break i}if(x){e=0;break e}break n}}while(0);e=e+36|0}else N=39}while(0);if(39==(0|N)&&(N=0,e=e+36|0),(D=D+1|0)>>>0>=(0|l[d>>2])>>>0)break t}return w=_,0|e}}while(0);if(!(0|Tn(p)))return xn(p),w=_,0|(U=0);e=G+(0|Sn(p))|0,xn(p);do{if(4&l[n>>2]){if(((0|l[P>>2])-e+(0|l[z>>2])|0)>>>0<2){mt(u,2,22242,v),A=z;break}if(-1==(0|r[e>>0])&&-110==(0|r[e+1>>0])){e=e+2|0,A=z;break}mt(u,2,22284,y),A=z}else A=z}while(0);return u=e-(n=0|l[A>>2])|0,l[P>>2]=(0|l[P>>2])-u,l[z>>2]=n+u,l[o>>2]=1,l[s>>2]=(0|l[b>>2])-U,w=_,0|(U=1)}function Qn(t,e){t|=0,e|=0;var n=0;return(n=0|Ut(1,8))?(l[n>>2]=t,l[n+4>>2]=e,0|n):0|(n=0)}function qn(t){(t|=0)&&Zt(t)}function Kn(t){(t|=0)&&Zt(t)}function $n(t){return(0|l[12+(t|=0)>>2])-(0|l[t+16>>2])|0}function ti(t,e){e|=0,l[100+(t|=0)>>2]=t+24,l[t+4>>2]=32768,l[t>>2]=0,l[t+12>>2]=e+-1,l[t+8>>2]=12,l[t+16>>2]=e}function ei(t,e){e|=0;var n,i=0,o=0,a=0,s=0,c=0,u=0,h=0;if(o=0|l[100+(t|=0)>>2],a=0|l[o>>2],h=(0|l[a+4>>2])==(0|e),i=0|l[a>>2],e=(0|l[(n=t+4|0)>>2])-i|0,l[n>>2]=e,h)if(32768&e|0)l[t>>2]=(0|l[t>>2])+i;else for(e>>>0<i>>>0?(l[n>>2]=i,e=i,h=t,i=0|l[t>>2]):(i=(0|l[t>>2])+i|0,l[t>>2]=i,h=t),l[o>>2]=l[a+8>>2],c=t+8|0,u=t+12|0,s=t+16|0,t=i,i=0|l[c>>2];;){if(e<<=1,l[n>>2]=e,o=t<<1,l[h>>2]=o,i=i+-1|0,l[c>>2]=i,!i){e=0|l[u>>2];do{if((0|e)!=((0|l[s>>2])-1|0)){if((i=0|r[e>>0])<<24>>24==-1){a=e+1|0,l[u>>2]=a,i=7,o=1048575,e=t>>>19&4095;break}if(!(134217728&o)){a=e+1|0,l[u>>2]=a,i=8,o=524287,e=t>>>18&8191;break}if(r[e>>0]=i+1<<24>>24,e=0|l[u>>2],-1==(0|r[e>>0])){t=134217727&l[h>>2],l[h>>2]=t,a=e+1|0,l[u>>2]=a,i=7,o=1048575,e=t>>>20;break}a=e+1|0,l[u>>2]=a,i=8,o=524287,e=(0|l[h>>2])>>>19;break}a=e+1|0,l[u>>2]=a,i=8,o=524287,e=t>>>18&8191}while(0);r[a>>0]=e,o=l[h>>2]&o,l[h>>2]=o,l[c>>2]=i,e=0|l[n>>2]}if(32768&e)break;t=o}else for(e>>>0<i>>>0?(i=(0|l[t>>2])+i|0,l[t>>2]=i,h=t):(l[n>>2]=i,e=i,h=t,i=0|l[t>>2]),l[o>>2]=l[a+12>>2],c=t+8|0,u=t+12|0,s=t+16|0,t=i,o=0|l[c>>2];;){if(e<<=1,l[n>>2]=e,i=t<<1,l[h>>2]=i,o=o+-1|0,l[c>>2]=o,!o){e=0|l[u>>2];do{if((0|e)!=((0|l[s>>2])-1|0)){if((o=0|r[e>>0])<<24>>24==-1){o=e+1|0,l[u>>2]=o,a=7,i=1048575,e=t>>>19&4095;break}if(!(134217728&i)){o=e+1|0,l[u>>2]=o,a=8,i=524287,e=t>>>18&8191;break}if(r[e>>0]=o+1<<24>>24,e=0|l[u>>2],-1==(0|r[e>>0])){t=134217727&l[h>>2],l[h>>2]=t,o=e+1|0,l[u>>2]=o,a=7,i=1048575,e=t>>>20;break}o=e+1|0,l[u>>2]=o,a=8,i=524287,e=(0|l[h>>2])>>>19;break}o=e+1|0,l[u>>2]=o,a=8,i=524287,e=t>>>18&8191}while(0);r[o>>0]=e,i=l[h>>2]&i,l[h>>2]=i,l[c>>2]=a,e=0|l[n>>2],o=a}if(32768&e)break;t=i}}function ni(t){var e,n=0,i=0,o=0,a=0,s=0,c=0,u=0;e=8+(t|=0)|0,s=((s=65535|(u=0|l[t>>2]))>>>0<((0|l[t+4>>2])+u|0)>>>0?s:s+-32768|0)<<l[e>>2],l[t>>2]=s,n=0|l[(u=t+12|0)>>2],c=t+16|0;do{if((0|n)!=((0|l[c>>2])-1|0)){if((i=0|r[n>>0])<<24>>24==-1){a=n+1|0,l[u>>2]=a,i=7,o=1048575,n=s>>>20;break}if(!(134217728&s)){a=n+1|0,l[u>>2]=a,i=8,o=524287,n=s>>>19;break}if(r[n>>0]=i+1<<24>>24,n=0|l[u>>2],-1==(0|r[n>>0])){s=134217727&l[t>>2],l[t>>2]=s,a=n+1|0,l[u>>2]=a,i=7,o=1048575,n=s>>>20;break}a=n+1|0,l[u>>2]=a,i=8,o=524287,n=(0|l[t>>2])>>>19;break}a=n+1|0,l[u>>2]=a,i=8,o=524287,n=s>>>19}while(0);r[a>>0]=n,s=l[t>>2]&o,l[e>>2]=i,s<<=i,l[t>>2]=s,i=0|l[u>>2];do{if((0|i)!=((0|l[c>>2])-1|0)){if((n=0|r[i>>0])<<24>>24==-1){a=i+1|0,l[u>>2]=a,i=7,o=1048575,n=s>>>20;break}if(!(134217728&s)){a=i+1|0,l[u>>2]=a,i=8,o=524287,n=s>>>19;break}if(r[i>>0]=n+1<<24>>24,n=0|l[u>>2],-1==(0|r[n>>0])){c=134217727&l[t>>2],l[t>>2]=c,a=n+1|0,l[u>>2]=a,i=7,o=1048575,n=c>>>20;break}a=n+1|0,l[u>>2]=a,i=8,o=524287,n=(0|l[t>>2])>>>19;break}a=i+1|0,l[u>>2]=a,i=8,o=524287,n=s>>>19}while(0);r[a>>0]=n,l[t>>2]=l[t>>2]&o,l[e>>2]=i,n=0|l[u>>2],-1!=(0|r[n>>0])&&(l[u>>2]=n+1)}function ii(t){l[(t|=0)>>2]=0,l[t+8>>2]=8}function ri(t,e){e|=0;var n,i,o=0;o=(0|l[(n=8+(t|=0)|0)>>2])-1|0,l[n>>2]=o,e=(0|l[t>>2])+(e<<o)|0,l[t>>2]=e,0|o||(i=1+(0|l[(o=t+12|0)>>2])|0,l[o>>2]=i,r[i>>0]=e,l[n>>2]=8,l[n>>2]=-1==(0|r[l[o>>2]>>0])?7:8,l[t>>2]=0)}function oi(t){l[28+(t|=0)>>2]=1156,l[t+32>>2]=1156,l[t+36>>2]=1156,l[t+40>>2]=1156,l[t+44>>2]=1156,l[t+48>>2]=1156,l[t+52>>2]=1156,l[t+56>>2]=1156,l[t+60>>2]=1156,l[t+64>>2]=1156,l[t+68>>2]=1156,l[t+72>>2]=1156,l[t+76>>2]=1156,l[t+80>>2]=1156,l[t+84>>2]=1156,l[t+88>>2]=1156,l[t+96>>2]=2628,l[t+92>>2]=1252,l[t+24>>2]=1284}function ai(t){l[24+(t|=0)>>2]=1156,l[t+28>>2]=1156,l[t+32>>2]=1156,l[t+36>>2]=1156,l[t+40>>2]=1156,l[t+44>>2]=1156,l[t+48>>2]=1156,l[t+52>>2]=1156,l[t+56>>2]=1156,l[t+60>>2]=1156,l[t+64>>2]=1156,l[t+68>>2]=1156,l[t+72>>2]=1156,l[t+76>>2]=1156,l[t+80>>2]=1156,l[t+84>>2]=1156,l[t+88>>2]=1156,l[t+92>>2]=1156,l[t+96>>2]=1156}function si(t,e,n,i){n|=0,i|=0,l[24+(t|=0)+((e|=0)<<2)>>2]=1156+((i<<1)+n<<4)}function li(t){var e,n;l[100+(t|=0)>>2]=t+24,l[t+4>>2]=32768,l[t>>2]=0,l[(e=t+8|0)>>2]=12,t=(0|l[(n=t+12|0)>>2])-1|0,l[n>>2]=t,-1==(0|r[t>>0])&&(l[e>>2]=13)}function ci(t){var e,n=0,i=0,o=0,a=0,s=0,c=0,u=0,h=0;if((0|(n=12-(i=0|l[(e=8+(t|=0)|0)>>2])|0))>0){o=t+12|0,h=t+16|0,u=n,a=0|l[t>>2],n=i;do{c=a<<n,l[t>>2]=c,l[e>>2]=0,n=0|l[o>>2];do{if((0|n)!=((0|l[h>>2])-1|0)){if((i=0|r[n>>0])<<24>>24==-1){s=n+1|0,l[o>>2]=s,n=7,a=1048575,i=c>>>20;break}if(!(134217728&c)){s=n+1|0,l[o>>2]=s,n=8,a=524287,i=c>>>19;break}if(r[n>>0]=i+1<<24>>24,n=0|l[o>>2],-1==(0|r[n>>0])){i=134217727&l[t>>2],l[t>>2]=i,s=n+1|0,l[o>>2]=s,n=7,a=1048575,i>>>=20;break}s=n+1|0,l[o>>2]=s,n=8,a=524287,i=(0|l[t>>2])>>>19;break}s=n+1|0,l[o>>2]=s,n=8,a=524287,i=c>>>19}while(0);r[s>>0]=i,a=l[t>>2]&a,l[t>>2]=a,l[e>>2]=n,u=u-n|0}while((0|u)>0)}else o=t+12|0;if(n=0|l[o>>2],(i=0|r[n>>0])<<24>>24!=-1){do{if((0|n)!=((0|l[t+16>>2])-1|0)){if(!(134217728&(c=0|l[t>>2]))){s=n+1|0,l[o>>2]=s,i=t,o=8,a=524287,n=c>>>19;break}if(r[n>>0]=i+1<<24>>24,n=0|l[o>>2],-1==(0|r[n>>0])){h=134217727&l[t>>2],l[t>>2]=h,s=n+1|0,l[o>>2]=s,i=t,o=7,a=1048575,n=h>>>20;break}s=n+1|0,l[o>>2]=s,i=t,o=8,a=524287,n=(0|l[t>>2])>>>19;break}s=n+1|0,l[o>>2]=s,i=t,o=8,a=524287,n=(0|l[t>>2])>>>19}while(0);r[s>>0]=n,l[i>>2]=l[i>>2]&a,l[e>>2]=o}}function ui(t){l[100+(t|=0)>>2]=t+96,ei(t,1),ei(t,0),ei(t,1),ei(t,0)}function hi(t,e,n){e|=0,n|=0;var i,o=0,a=0,s=0;l[100+(t|=0)>>2]=t+24,l[t+16>>2]=e,l[t+20>>2]=e+n,l[(i=t+12|0)>>2]=e;do{if(n){if(o=u[e>>0]<<16,l[t>>2]=o,a=e+1|0,s=1==(0|n)?255:0|u[a>>0],-1==(0|r[e>>0])){if(s>>>0>143){a=8,e=65280,n=t;break}e=9,n=7}else e=8,n=8;l[i>>2]=a,a=n,e=s<<e,n=t}else l[t>>2]=16711680,a=8,e=65280,o=16711680,n=t}while(0);return l[n>>2]=o+e<<7,l[t+8>>2]=a+-7,l[t+4>>2]=32768,1}function fi(t){var e=0,n=0,i=0,o=0,a=0,s=0,c=0,h=0,f=0,d=0,p=0,m=0;if(e=0|l[100+(t|=0)>>2],n=0|l[e>>2],o=0|l[n>>2],a=(0|l[(m=t+4|0)>>2])-o|0,l[m>>2]=a,(i=0|l[t>>2])>>>16>>>0<o>>>0){d=a>>>0<o>>>0,l[m>>2]=o,p=0|l[n+4>>2],l[e>>2]=l[(d?n+8|0:n+12|0)>>2],h=t+12|0,f=t+20|0,e=0|l[(c=t+8|0)>>2],n=i,s=o;do{if(!e){i=0|l[h>>2],e=0|l[f>>2];do{if((0|i)==(0|e))o=8,e=65280;else{if(a=(0|(o=i+1|0))==(0|e)?255:0|u[o>>0],-1==(0|r[i>>0])){if(a>>>0>143){o=8,e=65280;break}i=9,e=7}else i=8,e=8;l[h>>2]=o,o=e,e=a<<i}}while(0);n=n+e|0,l[t>>2]=n,l[c>>2]=o,e=o}s<<=1,l[m>>2]=s,n<<=1,l[t>>2]=n,e=e+-1|0,l[c>>2]=e}while(s>>>0<32768);return 0|(m=d?p:1-p|0)}if(i=i-(o<<16)|0,l[t>>2]=i,32768&a|0)return 0|(m=0|l[n+4>>2]);d=a>>>0<o>>>0,p=0|l[n+4>>2],l[e>>2]=l[(d?n+12|0:n+8|0)>>2],h=t+12|0,f=t+20|0,e=0|l[(c=t+8|0)>>2],n=i,s=a;do{if(!e){i=0|l[h>>2],e=0|l[f>>2];do{if((0|i)==(0|e))o=8,e=65280;else{if(a=(0|(o=i+1|0))==(0|e)?255:0|u[o>>0],-1==(0|r[i>>0])){if(a>>>0>143){o=8,e=65280;break}i=9,e=7}else i=8,e=8;l[h>>2]=o,o=e,e=a<<i}}while(0);n=n+e|0,l[t>>2]=n,l[c>>2]=o,e=o}s<<=1,l[m>>2]=s,n<<=1,l[t>>2]=n,e=e+-1|0,l[c>>2]=e}while(s>>>0<32768);return 0|(m=d?1-p|0:p)}function di(t){(t|=0)&&Zt(t)}function pi(t,e,n){e|=0,n|=0,l[20+(t|=0)>>2]=e,l[t+8>>2]=n,l[t+12>>2]=0,r[t>>0]=0,l[t+4>>2]=0}function mi(t){var e,n=0,i=0,o=0,a=0;n=0|l[(e=4+(t|=0)|0)>>2];do{if(n)i=n,n=0|r[t>>0];else{if(l[e>>2]=8,(0|(o=0|l[(n=t+12|0)>>2]))==(0|l[t+8>>2])){r[t>>0]=-1,i=8,n=-1;break}-1==(0|r[t>>0])?(l[e>>2]=7,i=7):i=8,a=0|r[(0|l[t+20>>2])+o>>0],r[t>>0]=a,l[n>>2]=o+1,n=a}}while(0);return a=i+-1|0,l[e>>2]=a,(255&n)>>>a&1|0}function gi(t){t|=0;var e,n=0,i=0,r=0,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0;e=w,w=w+16|0,m=e;do{if(t>>>0<245){if(t=(f=t>>>0<11?16:t+11&-8)>>>3,3&(i=(p=0|l[6184])>>>t)|0)return r=0|l[(i=8+(t=24776+((n=(1&i^1)+t|0)<<1<<2)|0)|0)>>2],(0|(a=0|l[(o=r+8|0)>>2]))==(0|t)?l[6184]=p&~(1<<n):(l[a+12>>2]=t,l[i>>2]=a),x=n<<3,l[r+4>>2]=3|x,l[(x=r+x+4|0)>>2]=1|l[x>>2],w=e,0|(x=o);if(f>>>0>(d=0|l[6186])>>>0){if(0|i)return n=((n=i<<t&((n=2<<t)|0-n))&0-n)-1|0,a=0|l[(t=8+(n=24776+((r=((i=(n>>>=c=n>>>12&16)>>>5&8)|c|(a=(n>>>=i)>>>2&4)|(t=(n>>>=a)>>>1&2)|(r=(n>>>=t)>>>1&1))+(n>>>r)|0)<<1<<2)|0)|0)>>2],(0|(i=0|l[(c=a+8|0)>>2]))==(0|n)?(t=p&~(1<<r),l[6184]=t):(l[i+12>>2]=n,l[t>>2]=i,t=p),s=(x=r<<3)-f|0,l[a+4>>2]=3|f,l[4+(o=a+f|0)>>2]=1|s,l[a+x>>2]=s,0|d&&(r=0|l[6189],i=24776+((n=d>>>3)<<1<<2)|0,t&(n=1<<n)?n=0|l[(t=i+8|0)>>2]:(l[6184]=t|n,n=i,t=i+8|0),l[t>>2]=r,l[n+12>>2]=r,l[r+8>>2]=n,l[r+12>>2]=i),l[6186]=s,l[6189]=o,w=e,0|(x=c);if(u=0|l[6185]){if(i=(u&0-u)-1|0,t=0|l[25040+(((s=(i>>>=c=i>>>12&16)>>>5&8)|c|(h=(i>>>=s)>>>2&4)|(r=(i>>>=h)>>>1&2)|(t=(i>>>=r)>>>1&1))+(i>>>t)<<2)>>2],i=(-8&l[t+4>>2])-f|0,r=0|l[t+16+((0==(0|l[t+16>>2])&1)<<2)>>2]){do{i=(h=(c=(-8&l[r+4>>2])-f|0)>>>0<i>>>0)?c:i,t=h?r:t,r=0|l[r+16+((0==(0|l[r+16>>2])&1)<<2)>>2]}while(0!=(0|r));h=t,s=i}else h=t,s=i;if((c=h+f|0)>>>0>h>>>0){o=0|l[h+24>>2],n=0|l[h+12>>2];do{if((0|n)==(0|h)){if(!(n=0|l[(t=h+20|0)>>2])&&!(n=0|l[(t=h+16|0)>>2])){i=0;break}for(;;)if(0|(r=0|l[(i=n+20|0)>>2]))n=r,t=i;else{if(!(r=0|l[(i=n+16|0)>>2]))break;n=r,t=i}l[t>>2]=0,i=n}else i=0|l[h+8>>2],l[i+12>>2]=n,l[n+8>>2]=i,i=n}while(0);do{if(0|o){if(n=0|l[h+28>>2],(0|h)==(0|l[(t=25040+(n<<2)|0)>>2])){if(l[t>>2]=i,!i){l[6185]=u&~(1<<n);break}}else if(l[o+16+(((0|l[o+16>>2])!=(0|h)&1)<<2)>>2]=i,!i)break;l[i+24>>2]=o,0|(n=0|l[h+16>>2])&&(l[i+16>>2]=n,l[n+24>>2]=i),0|(n=0|l[h+20>>2])&&(l[i+20>>2]=n,l[n+24>>2]=i)}}while(0);return s>>>0<16?(x=s+f|0,l[h+4>>2]=3|x,l[(x=h+x+4|0)>>2]=1|l[x>>2]):(l[h+4>>2]=3|f,l[c+4>>2]=1|s,l[c+s>>2]=s,0|d&&(r=0|l[6189],i=24776+((n=d>>>3)<<1<<2)|0,p&(n=1<<n)?n=0|l[(t=i+8|0)>>2]:(l[6184]=p|n,n=i,t=i+8|0),l[t>>2]=r,l[n+12>>2]=r,l[r+8>>2]=n,l[r+12>>2]=i),l[6186]=s,l[6189]=c),w=e,0|(x=h+8|0)}d=f}else d=f}else d=f}else if(t>>>0<=4294967231)if(f=-8&(t=t+11|0),h=0|l[6185]){r=0-f|0,u=(t>>>=8)?f>>>0>16777215?31:f>>>(7+(u=14-((d=(520192+(A=t<<(p=(t+1048320|0)>>>16&8))|0)>>>16&4)|p|(u=(245760+(A<<=d)|0)>>>16&2))+(A<<u>>>15)|0)|0)&1|u<<1:0,i=0|l[25040+(u<<2)>>2];t:do{if(i)for(t=0,c=i,s=f<<(31==(0|u)?0:25-(u>>>1)|0),i=0;;){if((o=(-8&l[c+4>>2])-f|0)>>>0<r>>>0){if(!o){r=0,i=c,t=c,A=61;break t}t=c,r=o}if(i=0==(0|(o=0|l[c+20>>2]))|(0|o)==(0|(c=0|l[c+16+(s>>>31<<2)>>2]))?i:o,o=0==(0|c)){A=57;break}s<<=1&(1^o)}else i=0,t=0,A=57}while(0);if(57==(0|A)){if(0==(0|i)&0==(0|t)){if(!(t=h&((t=2<<u)|0-t))){d=f;break}p=(t&0-t)-1|0,t=0,i=0|l[25040+(((s=(p>>>=c=p>>>12&16)>>>5&8)|c|(u=(p>>>=s)>>>2&4)|(d=(p>>>=u)>>>1&2)|(i=(p>>>=d)>>>1&1))+(p>>>i)<<2)>>2]}i?A=61:(c=t,s=r)}if(61==(0|A))for(;;){if(A=0,r=(p=(d=(-8&l[i+4>>2])-f|0)>>>0<r>>>0)?d:r,t=p?i:t,!(i=0|l[i+16+((0==(0|l[i+16>>2])&1)<<2)>>2])){c=t,s=r;break}A=61}if(0!=(0|c)&&s>>>0<((0|l[6186])-f|0)>>>0){if((a=c+f|0)>>>0<=c>>>0)return w=e,0|(x=0);o=0|l[c+24>>2],n=0|l[c+12>>2];do{if((0|n)==(0|c)){if(!(n=0|l[(t=c+20|0)>>2])&&!(n=0|l[(t=c+16|0)>>2])){n=0;break}for(;;)if(0|(r=0|l[(i=n+20|0)>>2]))n=r,t=i;else{if(!(r=0|l[(i=n+16|0)>>2]))break;n=r,t=i}l[t>>2]=0}else x=0|l[c+8>>2],l[x+12>>2]=n,l[n+8>>2]=x}while(0);do{if(o){if(t=0|l[c+28>>2],(0|c)==(0|l[(i=25040+(t<<2)|0)>>2])){if(l[i>>2]=n,!n){r=h&~(1<<t),l[6185]=r;break}}else if(l[o+16+(((0|l[o+16>>2])!=(0|c)&1)<<2)>>2]=n,!n){r=h;break}l[n+24>>2]=o,0|(t=0|l[c+16>>2])&&(l[n+16>>2]=t,l[t+24>>2]=n),(t=0|l[c+20>>2])?(l[n+20>>2]=t,l[t+24>>2]=n,r=h):r=h}else r=h}while(0);do{if(s>>>0>=16){if(l[c+4>>2]=3|f,l[a+4>>2]=1|s,l[a+s>>2]=s,n=s>>>3,s>>>0<256){i=24776+(n<<1<<2)|0,(t=0|l[6184])&(n=1<<n)?n=0|l[(t=i+8|0)>>2]:(l[6184]=t|n,n=i,t=i+8|0),l[t>>2]=a,l[n+12>>2]=a,l[a+8>>2]=n,l[a+12>>2]=i;break}if(i=25040+((n=(n=s>>>8)?s>>>0>16777215?31:s>>>(7+(n=14-((_=(520192+(x=n<<(A=(n+1048320|0)>>>16&8))|0)>>>16&4)|A|(n=(245760+(x<<=_)|0)>>>16&2))+(x<<n>>>15)|0)|0)&1|n<<1:0)<<2)|0,l[a+28>>2]=n,l[4+(t=a+16|0)>>2]=0,l[t>>2]=0,!(r&(t=1<<n))){l[6185]=r|t,l[i>>2]=a,l[a+24>>2]=i,l[a+12>>2]=a,l[a+8>>2]=a;break}for(t=s<<(31==(0|n)?0:25-(n>>>1)|0),i=0|l[i>>2];;){if((-8&l[i+4>>2]|0)==(0|s)){A=97;break}if(!(n=0|l[(r=i+16+(t>>>31<<2)|0)>>2])){A=96;break}t<<=1,i=n}if(96==(0|A)){l[r>>2]=a,l[a+24>>2]=i,l[a+12>>2]=a,l[a+8>>2]=a;break}if(97==(0|A)){x=0|l[(A=i+8|0)>>2],l[x+12>>2]=a,l[A>>2]=a,l[a+8>>2]=x,l[a+12>>2]=i,l[a+24>>2]=0;break}}else x=s+f|0,l[c+4>>2]=3|x,l[(x=c+x+4|0)>>2]=1|l[x>>2]}while(0);return w=e,0|(x=c+8|0)}d=f}else d=f;else d=-1}while(0);if((i=0|l[6186])>>>0>=d>>>0)return n=i-d|0,t=0|l[6189],n>>>0>15?(x=t+d|0,l[6189]=x,l[6186]=n,l[x+4>>2]=1|n,l[t+i>>2]=n,l[t+4>>2]=3|d):(l[6186]=0,l[6189]=0,l[t+4>>2]=3|i,l[(x=t+i+4|0)>>2]=1|l[x>>2]),w=e,0|(x=t+8|0);if((c=0|l[6187])>>>0>d>>>0)return _=c-d|0,l[6187]=_,A=(x=0|l[6190])+d|0,l[6190]=A,l[A+4>>2]=1|_,l[x+4>>2]=3|d,w=e,0|(x=x+8|0);if(0|l[6302]?t=0|l[6304]:(l[6304]=4096,l[6303]=4096,l[6305]=-1,l[6306]=-1,l[6307]=0,l[6295]=0,l[6302]=-16&m^1431655768,t=4096),u=d+48|0,(f=(s=t+(h=d+47|0)|0)&(o=0-t|0))>>>0<=d>>>0)return w=e,0|(x=0);if(0|(t=0|l[6294])&&(m=(p=0|l[6292])+f|0)>>>0<=p>>>0|m>>>0>t>>>0)return w=e,0|(x=0);t:do{if(4&l[6295])n=0,A=133;else{i=0|l[6190];e:do{if(i){for(r=25184;!((t=0|l[r>>2])>>>0<=i>>>0&&(t+(0|l[(v=r+4|0)>>2])|0)>>>0>i>>>0);){if(!(t=0|l[r+8>>2])){A=118;break e}r=t}if((n=s-c&o)>>>0<2147483647)if((0|(t=0|Pr(0|n)))==((0|l[r>>2])+(0|l[v>>2])|0)){if(-1!=(0|t)){s=n,a=t,A=135;break t}}else r=t,A=126;else n=0}else A=118}while(0);do{if(118==(0|A))if(-1!=(0|(i=0|Pr(0)))&&(n=i,y=(n=(0==((y=(g=0|l[6303])-1|0)&n|0)?0:(y+n&0-g)-n|0)+f|0)+(g=0|l[6292])|0,n>>>0>d>>>0&n>>>0<2147483647)){if(0|(v=0|l[6294])&&y>>>0<=g>>>0|y>>>0>v>>>0){n=0;break}if((0|(t=0|Pr(0|n)))==(0|i)){s=n,a=i,A=135;break t}r=t,A=126}else n=0}while(0);do{if(126==(0|A)){if(i=0-n|0,!(u>>>0>n>>>0&n>>>0<2147483647&-1!=(0|r))){if(-1==(0|r)){n=0;break}s=n,a=r,A=135;break t}if((t=h-n+(t=0|l[6304])&0-t)>>>0>=2147483647){s=n,a=r,A=135;break t}if(-1==(0|Pr(0|t))){Pr(0|i),n=0;break}s=t+n|0,a=r,A=135;break t}}while(0);l[6295]=4|l[6295],A=133}}while(0);if(133==(0|A)&&f>>>0<2147483647&&!(-1==(0|(a=0|Pr(0|f)))|1^(_=(b=(v=0|Pr(0))-a|0)>>>0>(d+40|0)>>>0)|a>>>0<v>>>0&-1!=(0|a)&-1!=(0|v)^1)&&(s=_?b:n,A=135),135==(0|A)){n=(0|l[6292])+s|0,l[6292]=n,n>>>0>(0|l[6293])>>>0&&(l[6293]=n),u=0|l[6190];do{if(u){for(n=25184;;){if((0|a)==((t=0|l[n>>2])+(r=0|l[(i=n+4|0)>>2])|0)){A=143;break}if(!(o=0|l[n+8>>2]))break;n=o}if(143==(0|A)&&0==(8&l[n+12>>2]|0)&&a>>>0>u>>>0&t>>>0<=u>>>0){l[i>>2]=r+s,x=(0|l[6187])+s|0,A=u+(_=0==(7&(_=u+8|0)|0)?0:0-_&7)|0,_=x-_|0,l[6190]=A,l[6187]=_,l[A+4>>2]=1|_,l[u+x+4>>2]=40,l[6191]=l[6306];break}for(a>>>0<(0|l[6188])>>>0&&(l[6188]=a),t=a+s|0,n=25184;;){if((0|l[n>>2])==(0|t)){A=151;break}if(!(n=0|l[n+8>>2])){t=25184;break}}if(151==(0|A)){if(!(8&l[n+12>>2])){l[n>>2]=a,l[(f=n+4|0)>>2]=(0|l[f>>2])+s,h=(f=a+(0==(7&(f=a+8|0)|0)?0:0-f&7)|0)+d|0,c=(n=t+(0==(7&(n=t+8|0)|0)?0:0-n&7)|0)-f-d|0,l[f+4>>2]=3|d;do{if((0|u)!=(0|n)){if((0|l[6189])==(0|n)){x=(0|l[6186])+c|0,l[6186]=x,l[6189]=h,l[h+4>>2]=1|x,l[h+x>>2]=x;break}if(1==(3&(t=0|l[n+4>>2])|0)){s=-8&t,r=t>>>3;t:do{if(t>>>0<256){if(t=0|l[n+8>>2],(0|(i=0|l[n+12>>2]))==(0|t)){l[6184]=l[6184]&~(1<<r);break}l[t+12>>2]=i,l[i+8>>2]=t;break}a=0|l[n+24>>2],t=0|l[n+12>>2];do{if((0|t)==(0|n)){if(!(t=0|l[(i=4+(r=n+16|0)|0)>>2])){if(!(t=0|l[r>>2])){t=0;break}i=r}for(;;)if(0|(o=0|l[(r=t+20|0)>>2]))t=o,i=r;else{if(!(o=0|l[(r=t+16|0)>>2]))break;t=o,i=r}l[i>>2]=0}else x=0|l[n+8>>2],l[x+12>>2]=t,l[t+8>>2]=x}while(0);if(!a)break;r=25040+((i=0|l[n+28>>2])<<2)|0;do{if((0|l[r>>2])==(0|n)){if(l[r>>2]=t,0|t)break;l[6185]=l[6185]&~(1<<i);break t}if(l[a+16+(((0|l[a+16>>2])!=(0|n)&1)<<2)>>2]=t,!t)break t}while(0);if(l[t+24>>2]=a,0|(r=0|l[(i=n+16|0)>>2])&&(l[t+16>>2]=r,l[r+24>>2]=t),!(i=0|l[i+4>>2]))break;l[t+20>>2]=i,l[i+24>>2]=t}while(0);n=n+s|0,o=s+c|0}else o=c;if(l[(n=n+4|0)>>2]=-2&l[n>>2],l[h+4>>2]=1|o,l[h+o>>2]=o,n=o>>>3,o>>>0<256){i=24776+(n<<1<<2)|0,(t=0|l[6184])&(n=1<<n)?n=0|l[(t=i+8|0)>>2]:(l[6184]=t|n,n=i,t=i+8|0),l[t>>2]=h,l[n+12>>2]=h,l[h+8>>2]=n,l[h+12>>2]=i;break}n=o>>>8;do{if(n){if(o>>>0>16777215){n=31;break}n=o>>>(7+(n=14-((_=(520192+(x=n<<(A=(n+1048320|0)>>>16&8))|0)>>>16&4)|A|(n=(245760+(x<<=_)|0)>>>16&2))+(x<<n>>>15)|0)|0)&1|n<<1}else n=0}while(0);if(r=25040+(n<<2)|0,l[h+28>>2]=n,l[4+(t=h+16|0)>>2]=0,l[t>>2]=0,!((t=0|l[6185])&(i=1<<n))){l[6185]=t|i,l[r>>2]=h,l[h+24>>2]=r,l[h+12>>2]=h,l[h+8>>2]=h;break}for(t=o<<(31==(0|n)?0:25-(n>>>1)|0),i=0|l[r>>2];;){if((-8&l[i+4>>2]|0)==(0|o)){A=192;break}if(!(n=0|l[(r=i+16+(t>>>31<<2)|0)>>2])){A=191;break}t<<=1,i=n}if(191==(0|A)){l[r>>2]=h,l[h+24>>2]=i,l[h+12>>2]=h,l[h+8>>2]=h;break}if(192==(0|A)){x=0|l[(A=i+8|0)>>2],l[x+12>>2]=h,l[A>>2]=h,l[h+8>>2]=x,l[h+12>>2]=i,l[h+24>>2]=0;break}}else x=(0|l[6187])+c|0,l[6187]=x,l[6190]=h,l[h+4>>2]=1|x}while(0);return w=e,0|(x=f+8|0)}t=25184}for(;!((n=0|l[t>>2])>>>0<=u>>>0&&(x=n+(0|l[t+4>>2])|0)>>>0>u>>>0);)t=0|l[t+8>>2];n=(t=(t=(o=x+-47|0)+(0==(7&(t=o+8|0)|0)?0:0-t&7)|0)>>>0<(o=u+16|0)>>>0?u:t)+8|0,i=s+-40|0,A=a+(_=0==(7&(_=a+8|0)|0)?0:0-_&7)|0,_=i-_|0,l[6190]=A,l[6187]=_,l[A+4>>2]=1|_,l[a+i+4>>2]=40,l[6191]=l[6306],l[(i=t+4|0)>>2]=27,l[n>>2]=l[6296],l[n+4>>2]=l[6297],l[n+8>>2]=l[6298],l[n+12>>2]=l[6299],l[6296]=a,l[6297]=s,l[6299]=0,l[6298]=n,n=t+24|0;do{A=n,l[(n=n+4|0)>>2]=7}while((A+8|0)>>>0<x>>>0);if((0|t)!=(0|u)){if(a=t-u|0,l[i>>2]=-2&l[i>>2],l[u+4>>2]=1|a,l[t>>2]=a,n=a>>>3,a>>>0<256){i=24776+(n<<1<<2)|0,(t=0|l[6184])&(n=1<<n)?n=0|l[(t=i+8|0)>>2]:(l[6184]=t|n,n=i,t=i+8|0),l[t>>2]=u,l[n+12>>2]=u,l[u+8>>2]=n,l[u+12>>2]=i;break}if(r=25040+((i=(n=a>>>8)?a>>>0>16777215?31:a>>>(7+(i=14-((_=(520192+(x=n<<(A=(n+1048320|0)>>>16&8))|0)>>>16&4)|A|(i=(245760+(x<<=_)|0)>>>16&2))+(x<<i>>>15)|0)|0)&1|i<<1:0)<<2)|0,l[u+28>>2]=i,l[u+20>>2]=0,l[o>>2]=0,!((n=0|l[6185])&(t=1<<i))){l[6185]=n|t,l[r>>2]=u,l[u+24>>2]=r,l[u+12>>2]=u,l[u+8>>2]=u;break}for(t=a<<(31==(0|i)?0:25-(i>>>1)|0),i=0|l[r>>2];;){if((-8&l[i+4>>2]|0)==(0|a)){A=213;break}if(!(n=0|l[(r=i+16+(t>>>31<<2)|0)>>2])){A=212;break}t<<=1,i=n}if(212==(0|A)){l[r>>2]=u,l[u+24>>2]=i,l[u+12>>2]=u,l[u+8>>2]=u;break}if(213==(0|A)){x=0|l[(A=i+8|0)>>2],l[x+12>>2]=u,l[A>>2]=u,l[u+8>>2]=x,l[u+12>>2]=i,l[u+24>>2]=0;break}}}else 0==(0|(x=0|l[6188]))|a>>>0<x>>>0&&(l[6188]=a),l[6296]=a,l[6297]=s,l[6299]=0,l[6193]=l[6302],l[6192]=-1,l[6197]=24776,l[6196]=24776,l[6199]=24784,l[6198]=24784,l[6201]=24792,l[6200]=24792,l[6203]=24800,l[6202]=24800,l[6205]=24808,l[6204]=24808,l[6207]=24816,l[6206]=24816,l[6209]=24824,l[6208]=24824,l[6211]=24832,l[6210]=24832,l[6213]=24840,l[6212]=24840,l[6215]=24848,l[6214]=24848,l[6217]=24856,l[6216]=24856,l[6219]=24864,l[6218]=24864,l[6221]=24872,l[6220]=24872,l[6223]=24880,l[6222]=24880,l[6225]=24888,l[6224]=24888,l[6227]=24896,l[6226]=24896,l[6229]=24904,l[6228]=24904,l[6231]=24912,l[6230]=24912,l[6233]=24920,l[6232]=24920,l[6235]=24928,l[6234]=24928,l[6237]=24936,l[6236]=24936,l[6239]=24944,l[6238]=24944,l[6241]=24952,l[6240]=24952,l[6243]=24960,l[6242]=24960,l[6245]=24968,l[6244]=24968,l[6247]=24976,l[6246]=24976,l[6249]=24984,l[6248]=24984,l[6251]=24992,l[6250]=24992,l[6253]=25e3,l[6252]=25e3,l[6255]=25008,l[6254]=25008,l[6257]=25016,l[6256]=25016,l[6259]=25024,l[6258]=25024,x=s+-40|0,A=a+(_=0==(7&(_=a+8|0)|0)?0:0-_&7)|0,_=x-_|0,l[6190]=A,l[6187]=_,l[A+4>>2]=1|_,l[a+x+4>>2]=40,l[6191]=l[6306]}while(0);if((n=0|l[6187])>>>0>d>>>0)return _=n-d|0,l[6187]=_,A=(x=0|l[6190])+d|0,l[6190]=A,l[A+4>>2]=1|_,l[x+4>>2]=3|d,w=e,0|(x=x+8|0)}return l[(x=25296)>>2]=12,w=e,0|(x=0)}function yi(t){var e=0,n=0,i=0,r=0,o=0,a=0,s=0,c=0;if(t|=0){n=t+-8|0,r=0|l[6188],c=n+(e=-8&(t=0|l[t+-4>>2]))|0;do{if(1&t)s=n,a=n;else{if(i=0|l[n>>2],!(3&t))return;if(o=i+e|0,(a=n+(0-i)|0)>>>0<r>>>0)return;if((0|l[6189])==(0|a)){if(3!=(3&(e=0|l[(t=c+4|0)>>2])|0)){s=a,e=o;break}return l[6186]=o,l[t>>2]=-2&e,l[a+4>>2]=1|o,void(l[a+o>>2]=o)}if(n=i>>>3,i>>>0<256){if(t=0|l[a+8>>2],(0|(e=0|l[a+12>>2]))==(0|t)){l[6184]=l[6184]&~(1<<n),s=a,e=o;break}l[t+12>>2]=e,l[e+8>>2]=t,s=a,e=o;break}r=0|l[a+24>>2],t=0|l[a+12>>2];do{if((0|t)==(0|a)){if(!(t=0|l[(e=4+(n=a+16|0)|0)>>2])){if(!(t=0|l[n>>2])){t=0;break}e=n}for(;;)if(0|(i=0|l[(n=t+20|0)>>2]))t=i,e=n;else{if(!(i=0|l[(n=t+16|0)>>2]))break;t=i,e=n}l[e>>2]=0}else s=0|l[a+8>>2],l[s+12>>2]=t,l[t+8>>2]=s}while(0);if(r){if(e=0|l[a+28>>2],(0|l[(n=25040+(e<<2)|0)>>2])==(0|a)){if(l[n>>2]=t,!t){l[6185]=l[6185]&~(1<<e),s=a,e=o;break}}else if(l[r+16+(((0|l[r+16>>2])!=(0|a)&1)<<2)>>2]=t,!t){s=a,e=o;break}l[t+24>>2]=r,0|(n=0|l[(e=a+16|0)>>2])&&(l[t+16>>2]=n,l[n+24>>2]=t),(e=0|l[e+4>>2])?(l[t+20>>2]=e,l[e+24>>2]=t,s=a,e=o):(s=a,e=o)}else s=a,e=o}}while(0);if(!(a>>>0>=c>>>0)&&1&(i=0|l[(t=c+4|0)>>2])){if(2&i)l[t>>2]=-2&i,l[s+4>>2]=1|e,l[a+e>>2]=e,r=e;else{if((0|l[6190])==(0|c)){if(c=(0|l[6187])+e|0,l[6187]=c,l[6190]=s,l[s+4>>2]=1|c,(0|s)!=(0|l[6189]))return;return l[6189]=0,void(l[6186]=0)}if((0|l[6189])==(0|c))return c=(0|l[6186])+e|0,l[6186]=c,l[6189]=a,l[s+4>>2]=1|c,void(l[a+c>>2]=c);r=(-8&i)+e|0,n=i>>>3;do{if(i>>>0<256){if(e=0|l[c+8>>2],(0|(t=0|l[c+12>>2]))==(0|e)){l[6184]=l[6184]&~(1<<n);break}l[e+12>>2]=t,l[t+8>>2]=e;break}o=0|l[c+24>>2],t=0|l[c+12>>2];do{if((0|t)==(0|c)){if(!(t=0|l[(e=4+(n=c+16|0)|0)>>2])){if(!(t=0|l[n>>2])){n=0;break}e=n}for(;;)if(0|(i=0|l[(n=t+20|0)>>2]))t=i,e=n;else{if(!(i=0|l[(n=t+16|0)>>2]))break;t=i,e=n}l[e>>2]=0,n=t}else n=0|l[c+8>>2],l[n+12>>2]=t,l[t+8>>2]=n,n=t}while(0);if(0|o){if(t=0|l[c+28>>2],(0|l[(e=25040+(t<<2)|0)>>2])==(0|c)){if(l[e>>2]=n,!n){l[6185]=l[6185]&~(1<<t);break}}else if(l[o+16+(((0|l[o+16>>2])!=(0|c)&1)<<2)>>2]=n,!n)break;l[n+24>>2]=o,0|(e=0|l[(t=c+16|0)>>2])&&(l[n+16>>2]=e,l[e+24>>2]=n),0|(t=0|l[t+4>>2])&&(l[n+20>>2]=t,l[t+24>>2]=n)}}while(0);if(l[s+4>>2]=1|r,l[a+r>>2]=r,(0|s)==(0|l[6189]))return void(l[6186]=r)}if(t=r>>>3,r>>>0<256)return n=24776+(t<<1<<2)|0,(e=0|l[6184])&(t=1<<t)?t=0|l[(e=n+8|0)>>2]:(l[6184]=e|t,t=n,e=n+8|0),l[e>>2]=s,l[t+12>>2]=s,l[s+8>>2]=t,void(l[s+12>>2]=n);i=25040+((t=(t=r>>>8)?r>>>0>16777215?31:r>>>(7+(t=14-((o=(520192+(c=t<<(a=(t+1048320|0)>>>16&8))|0)>>>16&4)|a|(t=(245760+(c<<=o)|0)>>>16&2))+(c<<t>>>15)|0)|0)&1|t<<1:0)<<2)|0,l[s+28>>2]=t,l[s+20>>2]=0,l[s+16>>2]=0,e=0|l[6185],n=1<<t;do{if(e&n){for(e=r<<(31==(0|t)?0:25-(t>>>1)|0),n=0|l[i>>2];;){if((-8&l[n+4>>2]|0)==(0|r)){t=73;break}if(!(t=0|l[(i=n+16+(e>>>31<<2)|0)>>2])){t=72;break}e<<=1,n=t}if(72==(0|t)){l[i>>2]=s,l[s+24>>2]=n,l[s+12>>2]=s,l[s+8>>2]=s;break}if(73==(0|t)){c=0|l[(a=n+8|0)>>2],l[c+12>>2]=s,l[a>>2]=s,l[s+8>>2]=c,l[s+12>>2]=n,l[s+24>>2]=0;break}}else l[6185]=e|n,l[i>>2]=s,l[s+24>>2]=i,l[s+12>>2]=s,l[s+8>>2]=s}while(0);if(c=(0|l[6192])-1|0,l[6192]=c,!c){for(t=25192;t=0|l[t>>2];)t=t+8|0;l[6192]=-1}}}}function vi(t,e){var n=0,i=0,r=0,o=0,a=0,s=0;s=(t|=0)+(e|=0)|0,n=0|l[t+4>>2];do{if(1&n)a=t;else{if(r=0|l[t>>2],!(3&n))return;if(a=t+(0-r)|0,e=r+e|0,(0|l[6189])==(0|a)){if(3!=(3&(n=0|l[(t=s+4|0)>>2])|0))break;return l[6186]=e,l[t>>2]=-2&n,l[a+4>>2]=1|e,void(l[s>>2]=e)}if(i=r>>>3,r>>>0<256){if(t=0|l[a+8>>2],(0|(n=0|l[a+12>>2]))==(0|t)){l[6184]=l[6184]&~(1<<i);break}l[t+12>>2]=n,l[n+8>>2]=t;break}o=0|l[a+24>>2],t=0|l[a+12>>2];do{if((0|t)==(0|a)){if(!(t=0|l[(n=4+(i=a+16|0)|0)>>2])){if(!(t=0|l[i>>2])){t=0;break}n=i}for(;;)if(0|(r=0|l[(i=t+20|0)>>2]))t=r,n=i;else{if(!(r=0|l[(i=t+16|0)>>2]))break;t=r,n=i}l[n>>2]=0}else r=0|l[a+8>>2],l[r+12>>2]=t,l[t+8>>2]=r}while(0);if(o){if(n=0|l[a+28>>2],(0|l[(i=25040+(n<<2)|0)>>2])==(0|a)){if(l[i>>2]=t,!t){l[6185]=l[6185]&~(1<<n);break}}else if(l[o+16+(((0|l[o+16>>2])!=(0|a)&1)<<2)>>2]=t,!t)break;l[t+24>>2]=o,0|(i=0|l[(n=a+16|0)>>2])&&(l[t+16>>2]=i,l[i+24>>2]=t),(n=0|l[n+4>>2])&&(l[t+20>>2]=n,l[n+24>>2]=t)}}}while(0);if(2&(i=0|l[(t=s+4|0)>>2]))l[t>>2]=-2&i,l[a+4>>2]=1|e,l[a+e>>2]=e,r=e;else{if((0|l[6190])==(0|s)){if(s=(0|l[6187])+e|0,l[6187]=s,l[6190]=a,l[a+4>>2]=1|s,(0|a)!=(0|l[6189]))return;return l[6189]=0,void(l[6186]=0)}if((0|l[6189])==(0|s))return s=(0|l[6186])+e|0,l[6186]=s,l[6189]=a,l[a+4>>2]=1|s,void(l[a+s>>2]=s);r=(-8&i)+e|0,n=i>>>3;do{if(i>>>0<256){if(t=0|l[s+8>>2],(0|(e=0|l[s+12>>2]))==(0|t)){l[6184]=l[6184]&~(1<<n);break}l[t+12>>2]=e,l[e+8>>2]=t;break}o=0|l[s+24>>2],e=0|l[s+12>>2];do{if((0|e)==(0|s)){if(!(e=0|l[(t=4+(n=s+16|0)|0)>>2])){if(!(e=0|l[n>>2])){n=0;break}t=n}for(;;)if(0|(i=0|l[(n=e+20|0)>>2]))e=i,t=n;else{if(!(i=0|l[(n=e+16|0)>>2]))break;e=i,t=n}l[t>>2]=0,n=e}else n=0|l[s+8>>2],l[n+12>>2]=e,l[e+8>>2]=n,n=e}while(0);if(0|o){if(e=0|l[s+28>>2],(0|l[(t=25040+(e<<2)|0)>>2])==(0|s)){if(l[t>>2]=n,!n){l[6185]=l[6185]&~(1<<e);break}}else if(l[o+16+(((0|l[o+16>>2])!=(0|s)&1)<<2)>>2]=n,!n)break;l[n+24>>2]=o,0|(t=0|l[(e=s+16|0)>>2])&&(l[n+16>>2]=t,l[t+24>>2]=n),0|(e=0|l[e+4>>2])&&(l[n+20>>2]=e,l[e+24>>2]=n)}}while(0);if(l[a+4>>2]=1|r,l[a+r>>2]=r,(0|a)==(0|l[6189]))return void(l[6186]=r)}if(e=r>>>3,r>>>0<256)return n=24776+(e<<1<<2)|0,(t=0|l[6184])&(e=1<<e)?e=0|l[(t=n+8|0)>>2]:(l[6184]=t|e,e=n,t=n+8|0),l[t>>2]=a,l[e+12>>2]=a,l[a+8>>2]=e,void(l[a+12>>2]=n);if(e=(e=r>>>8)?r>>>0>16777215?31:r>>>(7+(e=14-((i=(520192+(s=e<<(o=(e+1048320|0)>>>16&8))|0)>>>16&4)|o|(e=(245760+(s<<=i)|0)>>>16&2))+(s<<e>>>15)|0)|0)&1|e<<1:0,i=25040+(e<<2)|0,l[a+28>>2]=e,l[a+20>>2]=0,l[a+16>>2]=0,!((t=0|l[6185])&(n=1<<e)))return l[6185]=t|n,l[i>>2]=a,l[a+24>>2]=i,l[a+12>>2]=a,void(l[a+8>>2]=a);for(t=r<<(31==(0|e)?0:25-(e>>>1)|0),n=0|l[i>>2];;){if((-8&l[n+4>>2]|0)==(0|r)){e=69;break}if(!(e=0|l[(i=n+16+(t>>>31<<2)|0)>>2])){e=68;break}t<<=1,n=e}return 68==(0|e)?(l[i>>2]=a,l[a+24>>2]=n,l[a+12>>2]=a,void(l[a+8>>2]=a)):69==(0|e)?(s=0|l[(o=n+8|0)>>2],l[s+12>>2]=a,l[o>>2]=a,l[a+8>>2]=s,l[a+12>>2]=n,void(l[a+24>>2]=0)):void 0}function bi(t,e){e|=0;var n,i=0,r=0,o=0,a=0,s=0;if((t=(t|=0)>>>0>16?t:16)+-1&t)for(i=16;;){if(!(i>>>0<t>>>0)){t=i;break}i<<=1}if((-64-t|0)>>>0<=e>>>0)return l[(a=25296)>>2]=12,0|(a=0);if(!(i=0|gi(12+(n=e>>>0<11?16:e+11&-8)+t|0)))return 0|(a=0);o=i+-8|0;do{if(t+-1&i){if(e=(r=((r=(i+t+-1&0-t)-8|0)-(e=o)|0)>>>0>15?r:r+t|0)-e|0,i=(-8&(s=0|l[(t=i+-4|0)>>2]))-e|0,3&s){l[(s=r+4|0)>>2]=i|1&l[s>>2]|2,l[(i=r+i+4|0)>>2]=1|l[i>>2],l[t>>2]=e|1&l[t>>2]|2,l[s>>2]=1|l[s>>2],vi(o,e),t=r,e=r;break}l[r>>2]=(0|l[o>>2])+e,l[r+4>>2]=i,t=r,e=r;break}t=o,e=o}while(0);return 3&(i=0|l[(t=t+4|0)>>2])|0&&(a=-8&i)>>>0>(n+16|0)>>>0&&(s=a-n|0,o=e+n|0,l[t>>2]=n|1&i|2,l[o+4>>2]=3|s,l[(a=e+a+4|0)>>2]=1|l[a>>2],vi(o,s)),0|(s=e+8|0)}function _i(t,e,n){t|=0,e|=0,n|=0;var i=0;do{if(8!=(0|e)){if(0!=(3&e|0)|0==(0|(i=e>>>2)))return 0|(t=22);if(i+1073741823&i|0)return 0|(t=22);if((-64-e|0)>>>0<n>>>0)return 0|(t=12);e=0|bi(e>>>0>16?e:16,n);break}e=0|gi(n)}while(0);return e?(l[t>>2]=e,0|(t=0)):0|(t=12)}function wi(t,e,n){e|=0,n|=0;var i,r,o,a,s,c=0,u=0,h=0,f=0,d=0,p=0;s=w,w=w+48|0,a=s+16|0,h=s,u=s+32|0,c=0|l[(r=28+(t|=0)|0)>>2],l[u>>2]=c,c=(0|l[(o=t+20|0)>>2])-c|0,l[u+4>>2]=c,l[u+8>>2]=e,l[u+12>>2]=n,c=c+n|0,i=t+60|0,l[h>>2]=l[i>>2],l[h+4>>2]=u,l[h+8>>2]=2,h=0|Ai(0|G(146,0|h));t:do{if((0|c)!=(0|h)){for(e=2;!((0|h)<0);)if(c=c-h|0,u=(d=h>>>0>(p=0|l[u+4>>2])>>>0)?u+8|0:u,e=e+(d<<31>>31)|0,p=h-(d?p:0)|0,l[u>>2]=(0|l[u>>2])+p,l[(d=u+4|0)>>2]=(0|l[d>>2])-p,l[a>>2]=l[i>>2],l[a+4>>2]=u,l[a+8>>2]=e,(0|c)==(0|(h=0|Ai(0|G(146,0|a))))){f=3;break t}l[t+16>>2]=0,l[r>>2]=0,l[o>>2]=0,l[t>>2]=32|l[t>>2],n=2==(0|e)?0:n-(0|l[u+4>>2])|0}else f=3}while(0);return 3==(0|f)&&(p=0|l[t+44>>2],l[t+16>>2]=p+(0|l[t+48>>2]),l[r>>2]=p,l[o>>2]=p),w=s,0|n}function Ai(t){return(t|=0)>>>0>4294963200&&(l[6324]=0-t,t=-1),0|t}function xi(t,e){e|=0;var n=0,i=0;if(n=0|r[(t|=0)>>0],i=0|r[e>>0],n<<24>>24==0||n<<24>>24!=i<<24>>24)t=i;else{do{e=e+1|0,n=0|r[(t=t+1|0)>>0],i=0|r[e>>0]}while(n<<24>>24!=0&&n<<24>>24==i<<24>>24);t=i}return(255&n)-(255&t)|0}function Si(t){var e,n=0,i=0;e=t|=0;t:do{if(3&e)for(n=e;;){if(!(0|r[t>>0])){t=n;break t}if(!(3&(n=t=t+1|0))){i=4;break}}else i=4}while(0);if(4==(0|i)){for(;!((-2139062144&(n=0|l[t>>2])^-2139062144)&n+-16843009);)t=t+4|0;if((255&n)<<24>>24)do{t=t+1|0}while(0!=(0|r[t>>0]))}return t-e|0}function Mi(t,e){var n;return e|=0,((0|Ei(t|=0,1,n=0|Si(t),e))!=(0|n))<<31>>31|0}function Ei(t,e,n,i){t|=0,i|=0;var r,o=0;return r=0|k(n|=0,e|=0),n=0==(0|e)?0:n,(0|l[i+76>>2])>-1?(o=0==(0|ki()),t=0|Ri(t,r,i),o||Ii()):t=0|Ri(t,r,i),(0|t)!=(0|r)&&(n=(t>>>0)/(e>>>0)|0),0|n}function Ti(t){var e=0;0|l[68+(t|=0)>>2]&&(e=0|l[t+116>>2],t=t+112|0,0|e&&(l[e+112>>2]=l[t>>2]),t=0|l[t>>2],l[(t=t?t+116|0:3024)>>2]=e)}function Ii(t){}function ki(t){return 0}function Ci(t,e){t|=0;var n,i,o,a=0,s=0,c=0,h=0;o=w,w=w+16|0,i=255&(e|=0),r[(n=o)>>0]=i,(c=0|l[(s=t+16|0)>>2])?h=4:0|Bi(t)?a=-1:(c=0|l[s>>2],h=4);do{if(4==(0|h)){if((s=0|l[(h=t+20|0)>>2])>>>0<c>>>0&&(0|(a=255&e))!=(0|r[t+75>>0])){l[h>>2]=s+1,r[s>>0]=i;break}a=1==(0|Qr[63&l[t+36>>2]](t,n,1))?0|u[n>>0]:-1}}while(0);return w=o,0|a}function Bi(t){var e=0,n=0;return n=0|r[(e=74+(t|=0)|0)>>0],r[e>>0]=n+255|n,8&(e=0|l[t>>2])?(l[t>>2]=32|e,t=-1):(l[t+8>>2]=0,l[t+4>>2]=0,n=0|l[t+44>>2],l[t+28>>2]=n,l[t+20>>2]=n,l[t+16>>2]=n+(0|l[t+48>>2]),t=0),0|t}function Ri(t,e,n){t|=0,e|=0;var i=0,o=0,a=0,s=0,c=0;(o=0|l[(i=16+(n|=0)|0)>>2])?a=5:0|Bi(n)?i=0:(o=0|l[i>>2],a=5);t:do{if(5==(0|a)){if(i=s=0|l[(c=n+20|0)>>2],(o-s|0)>>>0<e>>>0){i=0|Qr[63&l[n+36>>2]](n,t,e);break}e:do{if((0|r[n+75>>0])>-1){for(s=e;;){if(!s){a=0,o=t;break e}if(10==(0|r[t+(o=s+-1|0)>>0]))break;s=o}if((i=0|Qr[63&l[n+36>>2]](n,t,s))>>>0<s>>>0)break t;a=s,o=t+s|0,e=e-s|0,i=0|l[c>>2]}else a=0,o=t}while(0);kr(0|i,0|o,0|e),l[c>>2]=(0|l[c>>2])+e,i=a+e|0}}while(0);return 0|i}function Pi(t,e,n){e|=0,n|=0;var i,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0;i=1794895138+(0|l[(t|=0)>>2])|0,s=0|Li(0|l[t+8>>2],i),o=0|Li(0|l[t+12>>2],i),a=0|Li(0|l[t+16>>2],i);t:do{if(s>>>0<e>>>2>>>0&&(p=e-(s<<2)|0,o>>>0<p>>>0&a>>>0<p>>>0)&&0==(3&(a|o)|0)){for(p=o>>>2,d=a>>>2,f=0;;){if(o=0|Li(0|l[t+((a=(c=(h=f+(u=s>>>1)|0)<<1)+p|0)<<2)>>2],i),!((a=0|Li(0|l[t+(a+1<<2)>>2],i))>>>0<e>>>0&o>>>0<(e-a|0)>>>0)){o=0;break t}if(0|r[t+(a+o)>>0]){o=0;break t}if(!(o=0|xi(n,t+a|0)))break;if(o=(0|o)<0,1==(0|s)){o=0;break t}f=o?f:h,s=o?u:s-u|0}a=0|Li(0|l[t+((o=c+d|0)<<2)>>2],i),o=(o=0|Li(0|l[t+(o+1<<2)>>2],i))>>>0<e>>>0&a>>>0<(e-o|0)>>>0&&0==(0|r[t+(o+a)>>0])?t+o|0:0}else o=0}while(0);return 0|o}function Li(t,e){var n;return e|=0,n=0|Ir(0|(t|=0)),0|(0==(0|e)?t:n)}function Di(t,e){t|=0;var n,i,o,a=0,s=0;return o=w,w=w+48|0,i=o+32|0,n=o+16|0,a=o,0|Ni(22305,0|r[(e|=0)>>0],4)?(s=0|function(t){var e=0,n=0,i=0;return n=0==(0|Oi(t|=0,43)),e=0|r[t>>0],n=n?e<<24>>24!=114&1:2,i=0==(0|Oi(t,120)),n=i?n:128|n,t=(t=0==(0|Oi(t,101)))?n:524288|n,t=e<<24>>24==114?t:64|t,t=e<<24>>24==119?512|t:t,0|(e<<24>>24==97?1024|t:t)}(e),l[a>>2]=t,l[a+4>>2]=32768|s,l[a+8>>2]=438,(0|(a=0|Ai(0|U(5,0|a))))>=0?(524288&s|0&&(l[n>>2]=a,l[n+4>>2]=2,l[n+8>>2]=1,z(221,0|n)),(t=0|function(t,e){t|=0;var n=0,i=0,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0;if(d=w,w=w+64|0,f=d+40|0,u=d+24|0,c=d+16|0,o=d,h=d+56|0,0|Ni(22305,(i=0|r[(e|=0)>>0])<<24>>24,4))if(n=0|gi(1156)){s=(a=n)+124|0;do{l[a>>2]=0,a=a+4|0}while((0|a)<(0|s));0|Oi(e,43)||(l[n>>2]=i<<24>>24==114?8:4),0|Oi(e,101)&&(l[o>>2]=t,l[o+4>>2]=2,l[o+8>>2]=1,z(221,0|o),i=0|r[e>>0]),i<<24>>24==97?(l[c>>2]=t,l[c+4>>2]=3,1024&(i=0|z(221,0|c))||(l[u>>2]=t,l[u+4>>2]=4,l[u+8>>2]=1024|i,z(221,0|u)),e=128|l[n>>2],l[n>>2]=e):e=0|l[n>>2],l[n+60>>2]=t,l[n+44>>2]=n+132,l[n+48>>2]=1024,r[(i=n+75|0)>>0]=-1,0==(8&e|0)&&(l[f>>2]=t,l[f+4>>2]=21523,l[f+8>>2]=h,0==(0|H(54,0|f)))&&(r[i>>0]=10),l[n+32>>2]=62,l[n+36>>2]=61,l[n+40>>2]=2,l[n+12>>2]=1,0|l[6309]||(l[n+76>>2]=-1),function(t){t|=0;var e=0,n=0;e=0|Fi(),l[t+56>>2]=l[e>>2],0|(n=0|l[e>>2])&&(l[n+52>>2]=t),l[e>>2]=t,Gi()}(n)}else n=0;else l[(n=25296)>>2]=22,n=0;return w=d,0|n}(a,e))||(l[i>>2]=a,V(6,0|i),t=0)):t=0):(l[(t=25296)>>2]=22,t=0),w=o,0|t}function Ni(t,e,n){t|=0;var i=0,o=0,a=0,s=0;a=255&(e|=0),i=0!=(0|(n|=0));t:do{if(i&0!=(3&t|0))for(o=255&e;;){if((0|r[t>>0])==o<<24>>24){s=6;break t}if(!((i=0!=(0|(n=n+-1|0)))&0!=(3&(t=t+1|0)|0))){s=5;break}}else s=5}while(0);5==(0|s)&&(i?s=6:n=0);t:do{if(6==(0|s)&&(o=255&e,(0|r[t>>0])!=o<<24>>24)){i=0|k(a,16843009);e:do{if(n>>>0>3){for(;!((-2139062144&(a=l[t>>2]^i)^-2139062144)&a+-16843009|0);)if(t=t+4|0,(n=n+-4|0)>>>0<=3){s=11;break e}}else s=11}while(0);if(11==(0|s)&&!n){n=0;break}for(;;){if((0|r[t>>0])==o<<24>>24)break t;if(t=t+1|0,!(n=n+-1|0)){n=0;break}}}}while(0);return 0|(0|n?t:0)}function Oi(t,e){return t=0|function(t,e){t|=0;var n=0,i=0,o=0;i=255&(e|=0);t:do{if(i){if(3&t){n=255&e;do{if((o=0|r[t>>0])<<24>>24==0||o<<24>>24==n<<24>>24)break t;t=t+1|0}while(0!=(3&t|0))}i=0|k(i,16843009),n=0|l[t>>2];e:do{if(!((-2139062144&n^-2139062144)&n+-16843009))do{if((-2139062144&(o=n^i)^-2139062144)&o+-16843009|0)break e;n=0|l[(t=t+4|0)>>2]}while(!((-2139062144&n^-2139062144)&n+-16843009|0))}while(0);for(n=255&e;(o=0|r[t>>0])<<24>>24!=0&&o<<24>>24!=n<<24>>24;)t=t+1|0}else t=t+(0|Si(t))|0}while(0);return 0|t}(t|=0,e|=0),0|((0|r[t>>0])==(255&e)<<24>>24?t:0)}function Fi(){return D(25300),25308}function Gi(){W(25300)}function zi(t){var e,n=0,i=0,r=0,o=0;return o=(0|l[76+(t|=0)>>2])>-1?0|ki():0,Ti(t),(e=0!=(1&l[t>>2]|0))||(r=0|Fi(),n=t+56|0,0|(i=0|l[t+52>>2])&&(l[i+56>>2]=l[n>>2]),0|(n=0|l[n>>2])&&(l[n+52>>2]=i),(0|l[r>>2])==(0|t)&&(l[r>>2]=n),Gi()),n=0|function t(e){e|=0;var n=0,i=0;do{if(e){if((0|l[e+76>>2])<=-1){n=0|Ui(e);break}i=0==(0|ki()),n=0|Ui(e),i||Ii()}else{if(n=0|l[697]?0|t(0|l[697]):0,e=0|Fi(),e=0|l[e>>2])do{i=(0|l[e+76>>2])>-1?0|ki():0,(0|l[e+20>>2])>>>0>(0|l[e+28>>2])>>>0&&(n=0|Ui(e)|n),0|i&&Ii(),e=0|l[e+56>>2]}while(0!=(0|e));Gi()}}while(0);return 0|n}(t),n=0|Xr[15&l[t+12>>2]](t)|n,0|(i=0|l[t+92>>2])&&yi(i),e?0|o&&Ii():yi(t),0|n}function Ui(t){var e,n,i=0,r=0,o=0,a=0;return n=28+(t|=0)|0,(0|l[(e=t+20|0)>>2])>>>0>(0|l[n>>2])>>>0&&(Qr[63&l[t+36>>2]](t,0,0),0==(0|l[e>>2]))?t=-1:((r=0|l[(i=t+4|0)>>2])>>>0<(a=0|l[(o=t+8|0)>>2])>>>0&&Qr[63&l[t+40>>2]](t,r-a|0,1),l[t+16>>2]=0,l[n>>2]=0,l[e>>2]=0,l[o>>2]=0,l[i>>2]=0,t=0),0|t}function Hi(t){var e=0,n=0;return n=0|r[(e=74+(t|=0)|0)>>0],r[e>>0]=n+255|n,n=t+28|0,(0|l[(e=t+20|0)>>2])>>>0>(0|l[n>>2])>>>0&&Qr[63&l[t+36>>2]](t,0,0),l[t+16>>2]=0,l[n>>2]=0,l[e>>2]=0,4&(e=0|l[t>>2])?(l[t>>2]=32|e,e=-1):(n=(0|l[t+44>>2])+(0|l[t+48>>2])|0,l[t+8>>2]=n,l[t+4>>2]=n,e=e<<27>>31),0|e}function Vi(t,e,n){return 0|function(t,e,n){e|=0,n|=0;var i=0;return(0|l[76+(t|=0)>>2])>-1?(i=0==(0|ki()),e=0|sr(t,e,n),i||Ii()):e=0|sr(t,e,n),0|e}(t|=0,e|=0,n|=0)}function Wi(t,e,n){var i,r;return t|=0,e|=0,n|=0,i=w,w=w+16|0,l[(r=i)>>2]=n,n=0|Zi(t,e,r),w=i,0|n}function Zi(t,e,n){t|=0,e|=0,n|=0;var i,o,a,s,c,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0;c=w,w=w+224|0,i=c+120|0,a=c,s=c+136|0,h=40+(u=o=c+80|0)|0;do{l[u>>2]=0,u=u+4|0}while((0|u)<(0|h));return l[i>>2]=l[n>>2],(0|ji(0,e,i,a,o))<0?n=-1:(y=(0|l[t+76>>2])>-1?0|ki():0,g=32&(n=0|l[t>>2]),(0|r[t+74>>0])<1&&(l[t>>2]=-33&n),0|l[(u=t+48|0)>>2]?n=0|ji(t,e,i,a,o):(f=0|l[(h=t+44|0)>>2],l[h>>2]=s,l[(d=t+28|0)>>2]=s,l[(p=t+20|0)>>2]=s,l[u>>2]=80,l[(m=t+16|0)>>2]=s+80,n=0|ji(t,e,i,a,o),f&&(Qr[63&l[t+36>>2]](t,0,0),n=0==(0|l[p>>2])?-1:n,l[h>>2]=f,l[u>>2]=0,l[m>>2]=0,l[d>>2]=0,l[p>>2]=0)),u=0|l[t>>2],l[t>>2]=u|g,0|y&&Ii(),n=0==(32&u|0)?n:-1),w=c,0|n}function ji(t,e,n,i,o){t|=0,e|=0,n|=0,i|=0,o|=0;var s,c,u,h,f,d,p,m,g,v=0,b=0,_=0,A=0,x=0,M=0,E=0,T=0,I=0,k=0,C=0,B=0,R=0,P=0;g=w,w=w+64|0,d=g,P=g+24|0,p=g+8|0,m=g+20|0,l[(f=g+16|0)>>2]=e,s=0!=(0|t),u=c=P+40|0,P=P+39|0,h=p+4|0,b=0,v=0,M=0;t:for(;;){do{if((0|v)>-1){if((0|b)>(2147483647-v|0)){l[(v=25296)>>2]=75,v=-1;break}v=b+v|0;break}}while(0);if(!((b=0|r[e>>0])<<24>>24)){R=86;break}_=e;e:for(;;){switch(b<<24>>24){case 37:b=_,R=9;break e;case 0:b=_;break e}B=_+1|0,l[f>>2]=B,b=0|r[B>>0],_=B}e:do{if(9==(0|R))for(;;){if(R=0,37!=(0|r[_+1>>0]))break e;if(b=b+1|0,_=_+2|0,l[f>>2]=_,37!=(0|r[_>>0]))break;R=9}}while(0);if(b=b-e|0,s&&Yi(t,e,b),0|b)e=_;else{if((b=(0|r[(A=_+1|0)>>0])-48|0)>>>0<10?(k=(B=36==(0|r[_+2>>0]))?b:-1,M=B?1:M,A=B?_+3|0:A):k=-1,l[f>>2]=A,(B=((b=0|r[A>>0])<<24>>24)-32|0)>>>0>31|0==(1<<B&75913|0))_=0;else{_=0;do{_|=1<<(b<<24>>24)-32,A=A+1|0,l[f>>2]=A,B=((b=0|r[A>>0])<<24>>24)-32|0}while(!(B>>>0>31|0==(1<<B&75913|0)))}if(b<<24>>24==42){if((b=(0|r[(x=A+1|0)>>0])-48|0)>>>0<10&&36==(0|r[A+2>>0]))l[o+(b<<2)>>2]=10,b=0|l[i+((0|r[x>>0])-48<<3)>>2],M=1,A=A+3|0;else{if(0|M){v=-1;break}s?(M=3+(0|l[n>>2])&-4,b=0|l[M>>2],l[n>>2]=M+4,M=0,A=x):(b=0,M=0,A=x)}l[f>>2]=A,b=(C=(0|b)<0)?0-b|0:b,C=C?8192|_:_}else{if((0|(b=0|Xi(f)))<0){v=-1;break}C=_,A=0|l[f>>2]}do{if(46==(0|r[A>>0])){if(42!=(0|r[A+1>>0])){l[f>>2]=A+1,_=0|Xi(f),A=0|l[f>>2];break}if((_=(0|r[(x=A+2|0)>>0])-48|0)>>>0<10&&36==(0|r[A+3>>0])){l[o+(_<<2)>>2]=10,_=0|l[i+((0|r[x>>0])-48<<3)>>2],A=A+4|0,l[f>>2]=A;break}if(0|M){v=-1;break t}s?(B=3+(0|l[n>>2])&-4,_=0|l[B>>2],l[n>>2]=B+4):_=0,l[f>>2]=x,A=x}else _=-1}while(0);for(I=0;;){if(((0|r[A>>0])-65|0)>>>0>57){v=-1;break t}if(B=A+1|0,l[f>>2]=B,!(((E=255&(x=0|r[(0|r[A>>0])-65+(22309+(58*I|0))>>0]))-1|0)>>>0<8))break;I=E,A=B}if(!(x<<24>>24)){v=-1;break}T=(0|k)>-1;do{if(x<<24>>24==19){if(T){v=-1;break t}R=48}else{if(T){l[o+(k<<2)>>2]=E,k=0|l[4+(T=i+(k<<3)|0)>>2],l[(R=d)>>2]=l[T>>2],l[R+4>>2]=k,R=48;break}if(!s){v=0;break t}Ji(d,E,n)}}while(0);if(48!=(0|R)||(R=0,s)){A=0!=(0|I)&3==(15&(A=0|r[A>>0])|0)?-33&A:A,k=-65537&C,C=0==(8192&C|0)?C:k;e:do{switch(0|A){case 110:switch((255&I)<<24>>24){case 0:case 1:l[l[d>>2]>>2]=v,b=0,e=B;continue t;case 2:b=0|l[d>>2],l[b>>2]=v,l[b+4>>2]=((0|v)<0)<<31>>31,b=0,e=B;continue t;case 3:a[l[d>>2]>>1]=v,b=0,e=B;continue t;case 4:r[l[d>>2]>>0]=v,b=0,e=B;continue t;case 6:l[l[d>>2]>>2]=v,b=0,e=B;continue t;case 7:b=0|l[d>>2],l[b>>2]=v,l[b+4>>2]=((0|v)<0)<<31>>31,b=0,e=B;continue t;default:b=0,e=B;continue t}case 112:A=120,_=_>>>0>8?_:8,e=8|C,R=60;break;case 88:case 120:e=C,R=60;break;case 111:x=0,E=22773,_=0==(8&C|0)|(0|_)>(0|(I=u-(T=0|qi(e=0|l[(A=d)>>2],A=0|l[A+4>>2],c))|0))?_:I+1|0,I=C,R=66;break;case 105:case 100:if(e=0|l[(A=d)>>2],(0|(A=0|l[A+4>>2]))<0){e=0|_r(0,0,0|e,0|A),A=S,l[(x=d)>>2]=e,l[x+4>>2]=A,x=1,E=22773,R=65;break e}x=0!=(2049&C|0)&1,E=0==(2048&C|0)?0==(1&C|0)?22773:22775:22774,R=65;break e;case 117:x=0,E=22773,e=0|l[(A=d)>>2],A=0|l[A+4>>2],R=65;break;case 99:r[P>>0]=l[d>>2],e=P,x=0,E=22773,T=c,A=1,_=k;break;case 109:A=0|$i(0|l[(A=25296)>>2]),R=70;break;case 115:A=0|(A=0|l[d>>2])?A:22783,R=70;break;case 67:l[p>>2]=l[d>>2],l[h>>2]=0,l[d>>2]=p,T=-1,A=p,R=74;break;case 83:e=0|l[d>>2],_?(T=_,A=e,R=74):(tr(t,32,b,0,C),e=0,R=83);break;case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:b=0|nr(t,+y[d>>3],b,_,C,A),e=B;continue t;default:x=0,E=22773,T=c,A=_,_=C}}while(0);e:do{if(60==(0|R))T=0|Qi(k=0|l[(C=d)>>2],C=0|l[C+4>>2],c,32&A),x=(E=0==(8&e|0)|0==(0|k)&0==(0|C))?0:2,E=E?22773:22773+(A>>4)|0,I=e,e=k,A=C,R=66;else if(65==(0|R))T=0|Ki(e,A,c),I=C,R=66;else if(70==(0|R))R=0,e=A,x=0,E=22773,T=(I=0==(0|(C=0|Ni(A,0,_))))?A+_|0:C,A=I?_:C-A|0,_=k;else if(74==(0|R)){for(R=0,E=A,e=0,_=0;(x=0|l[E>>2])&&!((0|(_=0|er(m,x)))<0|_>>>0>(T-e|0)>>>0)&&T>>>0>(e=_+e|0)>>>0;)E=E+4|0;if((0|_)<0){v=-1;break t}if(tr(t,32,b,e,C),e)for(x=0;;){if(!(_=0|l[A>>2])){R=83;break e}if((0|(x=(_=0|er(m,_))+x|0))>(0|e)){R=83;break e}if(Yi(t,m,_),x>>>0>=e>>>0){R=83;break}A=A+4|0}else e=0,R=83}}while(0);if(66==(0|R))R=0,C=0!=(0|_)|(A=0!=(0|e)|0!=(0|A)),A=u-T+(1&(1^A))|0,e=C?T:c,T=c,A=C?(0|_)>(0|A)?_:A:_,_=(0|_)>-1?-65537&I:I;else if(83==(0|R)){R=0,tr(t,32,b,e,8192^C),b=(0|b)>(0|e)?b:e,e=B;continue}tr(t,32,b=(0|b)<(0|(C=(I=(0|A)<(0|(k=T-e|0))?k:A)+x|0))?C:b,C,_),Yi(t,E,x),tr(t,48,b,C,65536^_),tr(t,48,I,k,0),Yi(t,e,k),tr(t,32,b,C,8192^_),e=B}else b=0,e=B}}t:do{if(86==(0|R)&&!t)if(M){for(v=1;e=0|l[o+(v<<2)>>2];){if(Ji(i+(v<<3)|0,e,n),e=v+1|0,!((0|v)<9)){v=e;break}v=e}if((0|v)<10)for(;;){if(0|l[o+(v<<2)>>2]){v=-1;break t}if(!((0|v)<9)){v=1;break}v=v+1|0}else v=1}else v=0}while(0);return w=g,0|v}function Yi(t,e,n){e|=0,n|=0,32&l[(t|=0)>>2]||Ri(e,n,t)}function Xi(t){var e=0,n=0,i=0;if(n=0|l[(t|=0)>>2],(i=(0|r[n>>0])-48|0)>>>0<10){e=0;do{e=i+(10*e|0)|0,n=n+1|0,l[t>>2]=n,i=(0|r[n>>0])-48|0}while(i>>>0<10)}else e=0;return 0|e}function Ji(t,e,n){t|=0,e|=0,n|=0;var i=0,r=0,o=0;t:do{if(e>>>0<=20)switch(0|e){case 9:i=3+(0|l[n>>2])&-4,e=0|l[i>>2],l[n>>2]=i+4,l[t>>2]=e;break t;case 10:i=3+(0|l[n>>2])&-4,e=0|l[i>>2],l[n>>2]=i+4,l[(i=t)>>2]=e,l[i+4>>2]=((0|e)<0)<<31>>31;break t;case 11:i=3+(0|l[n>>2])&-4,e=0|l[i>>2],l[n>>2]=i+4,l[(i=t)>>2]=e,l[i+4>>2]=0;break t;case 12:i=7+(0|l[n>>2])&-8,r=0|l[(e=i)>>2],e=0|l[e+4>>2],l[n>>2]=i+8,l[(i=t)>>2]=r,l[i+4>>2]=e;break t;case 13:r=3+(0|l[n>>2])&-4,i=0|l[r>>2],l[n>>2]=r+4,i=(65535&i)<<16>>16,l[(r=t)>>2]=i,l[r+4>>2]=((0|i)<0)<<31>>31;break t;case 14:r=3+(0|l[n>>2])&-4,i=0|l[r>>2],l[n>>2]=r+4,l[(r=t)>>2]=65535&i,l[r+4>>2]=0;break t;case 15:r=3+(0|l[n>>2])&-4,i=0|l[r>>2],l[n>>2]=r+4,i=(255&i)<<24>>24,l[(r=t)>>2]=i,l[r+4>>2]=((0|i)<0)<<31>>31;break t;case 16:r=3+(0|l[n>>2])&-4,i=0|l[r>>2],l[n>>2]=r+4,l[(r=t)>>2]=255&i,l[r+4>>2]=0;break t;case 17:case 18:r=7+(0|l[n>>2])&-8,o=+y[r>>3],l[n>>2]=r+8,y[t>>3]=o;break t;default:break t}}while(0)}function Qi(t,e,n,i){if(n|=0,i|=0,!(0==(0|(t|=0))&0==(0|(e|=0))))do{r[(n=n+-1|0)>>0]=0|u[22825+(15&t)>>0]|i,t=0|Er(0|t,0|e,4),e=S}while(!(0==(0|t)&0==(0|e)));return 0|n}function qi(t,e,n){if(n|=0,!(0==(0|(t|=0))&0==(0|(e|=0))))do{r[(n=n+-1|0)>>0]=7&t|48,t=0|Er(0|t,0|e,3),e=S}while(!(0==(0|t)&0==(0|e)));return 0|n}function Ki(t,e,n){n|=0;var i=0;if((e|=0)>>>0>0|0==(0|e)&(t|=0)>>>0>4294967295){for(;i=0|Sr(0|t,0|e,10,0),r[(n=n+-1|0)>>0]=255&i|48,i=t,t=0|xr(0|t,0|e,10,0),e>>>0>9|9==(0|e)&i>>>0>4294967295;)e=S;e=t}else e=t;if(e)for(;r[(n=n+-1|0)>>0]=48|(e>>>0)%10,!(e>>>0<10);)e=(e>>>0)/10|0;return 0|n}function $i(t){return 0|ar(t|=0,0|l[745])}function tr(t,e,n,i,r){var o,a;if(t|=0,e|=0,a=w,w=w+256|0,o=a,(0|(n|=0))>(0|(i|=0))&0==(73728&(r|=0)|0)){if(Cr(0|o,0|e,0|((r=n-i|0)>>>0<256?r:256)),r>>>0>255){e=n-i|0;do{Yi(t,o,256),r=r+-256|0}while(r>>>0>255);r=255&e}Yi(t,o,r)}w=a}function er(t,e){return e|=0,0|(t=(t|=0)?0|or(t,e):0)}function nr(t,e,n,i,o,a){t|=0,e=+e,n|=0,i|=0,o|=0,a|=0;var s,c=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0;s=w,w=w+560|0,f=s+8|0,P=L=s+524|0,d=s+512|0,l[(_=s)>>2]=0,R=d+12|0,ir(e),(0|S)<0?(e=-e,C=1,I=22790):(C=0!=(2049&o|0)&1,I=0==(2048&o|0)?0==(1&o|0)?22791:22796:22793),ir(e);do{if(!0&2146435072==(2146435072&S|0))L=0!=(32&a|0),tr(t,32,n,c=C+3|0,-65537&o),Yi(t,I,C),Yi(t,e!=e|!1?L?22817:22821:L?22809:22813,3),tr(t,32,n,c,8192^o);else{if((c=0!=(y=2*+rr(e,_)))&&(l[_>>2]=(0|l[_>>2])-1),97==(0|(x=32|a))){v=0==(0|(m=32&a))?I:I+9|0,g=2|C,c=12-i|0;do{if(!(i>>>0>11|0==(0|c))){e=8;do{c=c+-1|0,e*=16}while(0!=(0|c));if(45==(0|r[v>>0])){e=-(e+(-y-e));break}e=y+e-e;break}e=y}while(0);(0|(c=0|Ki(c=(0|(h=0|l[_>>2]))<0?0-h|0:h,((0|c)<0)<<31>>31,R)))==(0|R)&&(r[(c=d+11|0)>>0]=48),r[c+-1>>0]=43+(h>>31&2),r[(p=c+-2|0)>>0]=a+15,f=(0|i)<1,d=0==(8&o|0),c=L;do{B=~~e,h=c+1|0,r[c>>0]=m|u[22825+B>>0],e=16*(e-+(0|B)),1!=(h-P|0)||d&f&0==e?c=h:(r[h>>0]=46,c=c+2|0)}while(0!=e);0!=(0|i)&&(-2-P+c|0)<(0|i)?(h=c-P|0,c=i+2|0):h=c=c-P|0,tr(t,32,n,P=(R=R-p|0)+g+c|0,o),Yi(t,v,g),tr(t,48,n,P,65536^o),Yi(t,L,h),tr(t,48,c-h|0,0,0),Yi(t,p,R),tr(t,32,n,P,8192^o),c=P;break}h=(0|i)<0?6:i,c?(c=(0|l[_>>2])-28|0,l[_>>2]=c,e=268435456*y):(e=y,c=0|l[_>>2]),f=B=(0|c)<0?f:f+288|0;do{E=~~e>>>0,l[f>>2]=E,f=f+4|0,e=1e9*(e-+(E>>>0))}while(0!=e);if((0|c)>0)for(d=B,m=f;;){if(p=(0|c)<29?c:29,(c=m+-4|0)>>>0>=d>>>0){f=0;do{A=0|Sr(0|(M=0|br(0|(M=0|Tr(0|l[c>>2],0,0|p)),0|S,0|f,0)),0|(E=S),1e9,0),l[c>>2]=A,f=0|xr(0|M,0|E,1e9,0),c=c+-4|0}while(c>>>0>=d>>>0);f&&(l[(d=d+-4|0)>>2]=f)}for(f=m;!(f>>>0<=d>>>0||0|l[(c=f+-4|0)>>2]);)f=c;if(c=(0|l[_>>2])-p|0,l[_>>2]=c,!((0|c)>0))break;m=f}else d=B;if((0|c)<0){i=1+((h+25|0)/9|0)|0,b=102==(0|x);do{if(v=(0|(v=0-c|0))<9?v:9,d>>>0<f>>>0){p=(1<<v)-1|0,m=1e9>>>v,g=0,c=d;do{E=0|l[c>>2],l[c>>2]=(E>>>v)+g,g=0|k(E&p,m),c=c+4|0}while(c>>>0<f>>>0);c=0==(0|l[d>>2])?d+4|0:d,g?(l[f>>2]=g,d=c,c=f+4|0):(d=c,c=f)}else d=0==(0|l[d>>2])?d+4|0:d,c=f;f=(c-(f=b?B:d)>>2|0)>(0|i)?f+(i<<2)|0:c,c=(0|l[_>>2])+v|0,l[_>>2]=c}while((0|c)<0);c=d,i=f}else c=d,i=f;if(E=B,c>>>0<i>>>0){if(f=9*(E-c>>2)|0,(p=0|l[c>>2])>>>0>=10){d=10;do{d=10*d|0,f=f+1|0}while(p>>>0>=d>>>0)}}else f=0;if(b=103==(0|x),A=0!=(0|h),(0|(d=h-(102!=(0|x)?f:0)+((A&b)<<31>>31)|0))<((9*(i-E>>2)|0)-9|0)){if(v=B+4+(((0|(d=d+9216|0))/9|0)-1024<<2)|0,(0|(d=(0|d)%9|0))<8)for(p=10;p=10*p|0,(0|d)<7;)d=d+1|0;else p=10;if((d=(v+4|0)==(0|i))&0==(0|(g=((m=0|l[v>>2])>>>0)%(p>>>0)|0)))d=v;else if(y=0==(1&((m>>>0)/(p>>>0)|0)|0)?9007199254740992:9007199254740994,e=g>>>0<(M=(0|p)/2|0)>>>0?.5:d&(0|g)==(0|M)?1:1.5,C&&(e=(M=45==(0|r[I>>0]))?-e:e,y=M?-y:y),d=m-g|0,l[v>>2]=d,y+e!=y){if(M=d+p|0,l[v>>2]=M,M>>>0>999999999)for(f=v;d=f+-4|0,l[f>>2]=0,d>>>0<c>>>0&&(l[(c=c+-4|0)>>2]=0),M=1+(0|l[d>>2])|0,l[d>>2]=M,M>>>0>999999999;)f=d;else d=v;if(f=9*(E-c>>2)|0,(m=0|l[c>>2])>>>0>=10){p=10;do{p=10*p|0,f=f+1|0}while(m>>>0>=p>>>0)}}else d=v;d=i>>>0>(d=d+4|0)>>>0?d:i,M=c}else d=i,M=c;for(x=d;;){if(x>>>0<=M>>>0){_=0;break}if(0|l[(c=x+-4|0)>>2]){_=1;break}x=c}i=0-f|0;do{if(b){if((0|(c=h+(1&(1^A))|0))>(0|f)&(0|f)>-5?(p=a+-1|0,h=c+-1-f|0):(p=a+-2|0,h=c+-1|0),!(c=8&o)){if(_&&0!=(0|(T=0|l[x+-4>>2])))if((T>>>0)%10|0)d=0;else{d=0,c=10;do{c=10*c|0,d=d+1|0}while(!(0|(T>>>0)%(c>>>0)))}else d=9;if(c=(9*(x-E>>2)|0)-9|0,102==(32|p)){h=(0|h)<(0|(v=(0|(v=c-d|0))>0?v:0))?h:v,v=0;break}h=(0|h)<(0|(v=(0|(v=c+f-d|0))>0?v:0))?h:v,v=0;break}v=c}else p=a,v=8&o}while(0);if(m=0!=(0|(b=h|v))&1,g=102==(32|p))A=0,c=(0|f)>0?f:0;else{if(((d=R)-(c=0|Ki(c=(0|f)<0?i:f,((0|c)<0)<<31>>31,R))|0)<2)do{r[(c=c+-1|0)>>0]=48}while((d-c|0)<2);r[c+-1>>0]=43+(f>>31&2),r[(c=c+-2|0)>>0]=p,A=c,c=d-c|0}if(tr(t,32,n,c=C+1+h+m+c|0,o),Yi(t,I,C),tr(t,48,n,c,65536^o),g){m=v=L+9|0,g=L+8|0,d=p=M>>>0>B>>>0?B:M;do{if(f=0|Ki(0|l[d>>2],0,v),(0|d)==(0|p))(0|f)==(0|v)&&(r[g>>0]=48,f=g);else if(f>>>0>L>>>0){Cr(0|L,48,f-P|0);do{f=f+-1|0}while(f>>>0>L>>>0)}Yi(t,f,m-f|0),d=d+4|0}while(d>>>0<=B>>>0);if(0|b&&Yi(t,22841,1),d>>>0<x>>>0&(0|h)>0)for(;;){if((f=0|Ki(0|l[d>>2],0,v))>>>0>L>>>0){Cr(0|L,48,f-P|0);do{f=f+-1|0}while(f>>>0>L>>>0)}if(Yi(t,f,(0|h)<9?h:9),f=h+-9|0,!((d=d+4|0)>>>0<x>>>0&(0|h)>9)){h=f;break}h=f}tr(t,48,h+9|0,9,0)}else{if(b=_?x:M+4|0,(0|h)>-1){v=0==(0|v),i=_=L+9|0,m=0-P|0,g=L+8|0,p=M;do{(0|(f=0|Ki(0|l[p>>2],0,_)))==(0|_)&&(r[g>>0]=48,f=g);do{if((0|p)==(0|M)){if(d=f+1|0,Yi(t,f,1),v&(0|h)<1){f=d;break}Yi(t,22841,1),f=d}else{if(f>>>0<=L>>>0)break;Cr(0|L,48,f+m|0);do{f=f+-1|0}while(f>>>0>L>>>0)}}while(0);Yi(t,f,(0|h)>(0|(P=i-f|0))?P:h),h=h-P|0,p=p+4|0}while(p>>>0<b>>>0&(0|h)>-1)}tr(t,48,h+18|0,18,0),Yi(t,A,R-A|0)}tr(t,32,n,c,8192^o)}}while(0);return w=s,0|((0|c)<(0|n)?n:c)}function ir(t){var e;return t=+t,y[_>>3]=t,e=0|l[_>>2],S=0|l[_+4>>2],0|e}function rr(t,e){return+ +function t(e,n){e=+e,n|=0;var i=0,r=0,o=0;switch(y[_>>3]=e,i=0|l[_>>2],r=0|l[_+4>>2],2047&(o=0|Er(0|i,0|r,52))){case 0:0!=e?(e=+t(0x10000000000000000*e,n),i=(0|l[n>>2])-64|0):i=0,l[n>>2]=i;break;case 2047:break;default:l[n>>2]=(2047&o)-1022,l[_>>2]=i,l[_+4>>2]=-2146435073&r|1071644672,e=+y[_>>3]}return+e}(t=+t,e|=0)}function or(t,e,n){t|=0,e|=0;do{if(t){if(e>>>0<128){r[t>>0]=e,t=1;break}if(!(0|l[l[745]>>2])){if(57216==(-128&e|0)){r[t>>0]=e,t=1;break}l[(t=25296)>>2]=84,t=-1;break}if(e>>>0<2048){r[t>>0]=e>>>6|192,r[t+1>>0]=63&e|128,t=2;break}if(e>>>0<55296|57344==(-8192&e|0)){r[t>>0]=e>>>12|224,r[t+1>>0]=e>>>6&63|128,r[t+2>>0]=63&e|128,t=3;break}if((e+-65536|0)>>>0<1048576){r[t>>0]=e>>>18|240,r[t+1>>0]=e>>>12&63|128,r[t+2>>0]=e>>>6&63|128,r[t+3>>0]=63&e|128,t=4;break}l[(t=25296)>>2]=84,t=-1;break}t=1}while(0);return 0|t}function ar(t,e){t|=0,e|=0;var n=0,i=0;for(i=0;;){if((0|u[22843+i>>0])==(0|t)){t=2;break}if(87==(0|(n=i+1|0))){n=22931,i=87,t=5;break}i=n}if(2==(0|t)&&(i?(n=22931,t=5):n=22931),5==(0|t))for(;;){do{t=n,n=n+1|0}while(0!=(0|r[t>>0]));if(!(i=i+-1|0))break;t=5}return 0|function(t,e){return 0|function(t,e){return t|=0,0|(0|(e=(e|=0)?0|Pi(0|l[e>>2],0|l[e+4>>2],t):0)?e:t)}(t|=0,e|=0)}(n,0|l[e+20>>2])}function sr(t,e,n){var i,r;return t|=0,e|=0,1==(0|(n|=0))&&(e=e-(0|l[t+8>>2])+(0|l[t+4>>2])|0),r=t+28|0,(0|l[(i=t+20|0)>>2])>>>0>(0|l[r>>2])>>>0&&(Qr[63&l[t+36>>2]](t,0,0),0==(0|l[i>>2]))?e=-1:(l[t+16>>2]=0,l[r>>2]=0,l[i>>2]=0,(0|Qr[63&l[t+40>>2]](t,e,n))<0?e=-1:(l[t+8>>2]=0,l[t+4>>2]=0,l[t>>2]=-17&l[t>>2],e=0)),0|e}function lr(t,e,n,i){t|=0,e|=0,n|=0,i|=0;var o,a,s=0,c=0,u=0,h=0,f=0;a=w,w=w+128|0,s=a+124|0,u=3036,o=(c=f=a)+124|0;do{l[c>>2]=l[u>>2],c=c+4|0,u=u+4|0}while((0|c)<(0|o));return(e+-1|0)>>>0>2147483646?e?(l[(e=25296)>>2]=75,e=-1):(t=s,e=1,h=4):h=4,4==(0|h)&&(h=e>>>0>(h=-2-t|0)>>>0?h:e,l[f+48>>2]=h,l[(s=f+20|0)>>2]=t,l[f+44>>2]=t,e=t+h|0,l[(t=f+16|0)>>2]=e,l[f+28>>2]=e,e=0|Zi(f,n,i),h&&(f=0|l[s>>2],r[f+(((0|f)==(0|l[t>>2]))<<31>>31)>>0]=0)),w=a,0|e}function cr(t,e){return ur(t|=0,e|=0),0|t}function ur(t,e){t|=0;var n=0,i=0;n=e|=0;t:do{if(3&(n^t))i=8;else{if(3&n)do{if(n=0|r[e>>0],r[t>>0]=n,!(n<<24>>24))break t;e=e+1|0,t=t+1|0}while(0!=(3&e|0));if(!((-2139062144&(n=0|l[e>>2])^-2139062144)&n+-16843009))for(i=t;e=e+4|0,t=i+4|0,l[i>>2]=n,!((-2139062144&(n=0|l[e>>2])^-2139062144)&n+-16843009|0);)i=t;i=8}}while(0);if(8==(0|i)&&(i=0|r[e>>0],r[t>>0]=i,i<<24>>24))do{t=t+1|0,i=0|r[(e=e+1|0)>>0],r[t>>0]=i}while(i<<24>>24!=0);return 0|t}function hr(t,e,n){var i,r;return t|=0,e|=0,n|=0,i=w,w=w+16|0,l[(r=i)>>2]=n,n=0|function(t,e,n){return 0|lr(t|=0,2147483647,e|=0,n|=0)}(t,e,r),w=i,0|n}function fr(t,e){return+ +function(t,e){t=+t;var n=0,i=0;return(0|(e|=0))<=1023?(0|e)<-1022&&(t*=2.2250738585072014e-308,n=e+2044|0,t=(i=(0|e)<-2044)?2.2250738585072014e-308*t:t,e=i?(0|n)>-1022?n:-1022:e+1022|0):(t*=8.98846567431158e307,i=e+-2046|0,t=(n=(0|e)>2046)?8.98846567431158e307*t:t,e=n?(0|i)<1023?i:1023:e+-1023|0),n=0|Tr(e+1023|0,0,52),i=S,l[_>>2]=n,l[_+4>>2]=i,+t*+y[_>>3]}(t=+t,e|=0)}function dr(t){return 0|~~+Rr(+(t=+t))}function pr(t,e,n,i){t|=0,i|=0;var o,a,s=0,c=0,u=0,h=0,f=0;o=0|k(n|=0,e|=0),n=0==(0|e)?0:n,h=(0|l[i+76>>2])>-1?0|ki():0,c=0|r[(s=i+74|0)>>0],r[s>>0]=c+255|c,c=0|l[(s=i+4|0)>>2],u=(a=(0|l[i+8>>2])-c|0)>>>0<o>>>0?a:o,(0|a)>0?(kr(0|t,0|c,0|u),l[s>>2]=c+u,s=o-u|0,t=t+u|0):s=o;t:do{if(s){for(u=i+32|0;!(0|Hi(i)||(1+(c=0|Qr[63&l[u>>2]](i,t,s))|0)>>>0<2);){if(!(s=s-c|0)){f=13;break t}t=t+c|0}0|h&&Ii(),n=((o-s|0)>>>0)/(e>>>0)|0}else f=13}while(0);return 13==(0|f)&&h&&Ii(),0|n}function mr(t,e){t|=0;var n=0,i=0,o=0,a=0,s=0,c=0,u=0;(0|l[76+(e|=0)>>2])>=0&&0!=(0|ki())?(i=255&t,(0|(n=255&t))!=(0|r[e+75>>0])&&(c=0|l[(s=e+20|0)>>2])>>>0<(0|l[e+16>>2])>>>0?(l[s>>2]=c+1,r[c>>0]=i):n=0|Ci(e,t),Ii()):u=3;do{if(3==(0|u)){if(i=255&t,(0|(n=255&t))!=(0|r[e+75>>0])&&(a=0|l[(o=e+20|0)>>2])>>>0<(0|l[e+16>>2])>>>0){l[o>>2]=a+1,r[a>>0]=i;break}n=0|Ci(e,t)}}while(0);return 0|n}function gr(t){t|=0;var e,n=0,i=0,o=0;e=0|l[665],o=(0|l[e+76>>2])>-1?0|ki():0;do{if((0|Mi(t,e))<0)t=-1;else{if(10!=(0|r[e+75>>0])&&(i=0|l[(n=e+20|0)>>2])>>>0<(0|l[e+16>>2])>>>0){l[n>>2]=i+1,r[i>>0]=10,t=0;break}t=(0|Ci(e,10))>>31}}while(0);return 0|o&&Ii(),0|t}function yr(t){var e=0;return e=128&l[(t|=0)>>2]&&(0|l[t+20>>2])>>>0>(0|l[t+28>>2])>>>0?2:1,(0|(e=0|Qr[63&l[t+40>>2]](t,0,e)))>=0&&(e=e-(0|l[t+8>>2])+(0|l[t+4>>2])+(0|l[t+20>>2])-(0|l[t+28>>2])|0),0|e}function vr(t,e,n,i){var r,o;return e|=0,i|=0,n=0|function(t,e){var n,i,r,o=0;return t=((n=0|k(o=65535&(e|=0),r=65535&(t|=0)))>>>16)+(0|k(o,i=t>>>16))|0,e=0|k(o=e>>>16,r),0|(S=(t>>>16)+(0|k(o,i))+(((65535&t)+e|0)>>>16)|0,t+e<<16|65535&n|0)}(r=t|=0,o=n|=0),t=S,0|(S=(0|k(e,o))+(0|k(i,r))+t|0&t,0|n)}function br(t,e,n,i){return 0|(S=(e|=0)+(i|=0)+((n=(t|=0)+(n|=0)>>>0)>>>0<t>>>0|0)>>>0,0|n)}function _r(t,e,n,i){return 0|(S=i=(e|=0)-(i|=0)-((n|=0)>>>0>(t|=0)>>>0|0)>>>0,t-n>>>0|0)}function wr(t){var e=0;return(0|(e=0|r[A+(255&(t|=0))>>0]))<8?0|e:(0|(e=0|r[A+(t>>8&255)>>0]))<8?e+8|0:(0|(e=0|r[A+(t>>16&255)>>0]))<8?e+16|0:24+(0|r[A+(t>>>24)>>0])|0}function Ar(t,e,n,i,r){r|=0;var o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0;if(h=t|=0,a=n|=0,s=d=i|=0,!(u=c=e|=0))return o=0!=(0|r),s?o?(l[r>>2]=0|t,l[r+4>>2]=0&e,0|(S=d=0,r=0)):0|(S=d=0,r=0):(o&&(l[r>>2]=(h>>>0)%(a>>>0),l[r+4>>2]=0),0|(S=d=0,r=(h>>>0)/(a>>>0)>>>0));o=0==(0|s);do{if(a){if(!o){if((o=(0|C(0|s))-(0|C(0|u))|0)>>>0<=31){a=f=o+1|0,t=h>>>(f>>>0)&(e=o-31>>31)|u<<(s=31-o|0),e&=u>>>(f>>>0),o=0,s=h<<s;break}return r?(l[r>>2]=0|t,l[r+4>>2]=c|0&e,0|(S=d=0,r=0)):0|(S=d=0,r=0)}if((o=a-1|0)&a|0){a=s=33+(0|C(0|a))-(0|C(0|u))|0,t=(f=32-s|0)-1>>31&u>>>((p=s-32|0)>>>0)|(u<<f|h>>>(s>>>0))&(e=p>>31),e&=u>>>(s>>>0),o=h<<(m=64-s|0)&(c=f>>31),s=(u<<m|h>>>(p>>>0))&c|h<<f&s-33>>31;break}return 0|r&&(l[r>>2]=o&h,l[r+4>>2]=0),1==(0|a)?0|(S=p=c|0&e,m=0|t):(m=0|wr(0|a),0|(S=p=u>>>(m>>>0)|0,m=u<<32-m|h>>>(m>>>0)|0))}if(o)return 0|r&&(l[r>>2]=(u>>>0)%(a>>>0),l[r+4>>2]=0),0|(S=p=0,m=(u>>>0)/(a>>>0)>>>0);if(!h)return 0|r&&(l[r>>2]=0,l[r+4>>2]=(u>>>0)%(s>>>0)),0|(S=p=0,m=(u>>>0)/(s>>>0)>>>0);if(!((o=s-1|0)&s))return 0|r&&(l[r>>2]=0|t,l[r+4>>2]=o&u|0&e),p=0,m=u>>>((0|wr(0|s))>>>0),0|(S=p,m);if((o=(0|C(0|s))-(0|C(0|u))|0)>>>0<=30){a=e=o+1|0,t=u<<(s=31-o|0)|h>>>(e>>>0),e=u>>>(e>>>0),o=0,s=h<<s;break}return r?(l[r>>2]=0|t,l[r+4>>2]=c|0&e,0|(S=p=0,m=0)):0|(S=p=0,m=0)}while(0);if(a){u=0|br(0|(f=0|n),0|(h=d|0&i),-1,-1),n=S,c=s,s=0;do{i=c,c=o>>>31|c<<1,o=s|o<<1,_r(0|u,0|n,0|(i=t<<1|i>>>31|0),0|(d=t>>>31|e<<1|0)),s=1&(p=(m=S)>>31|((0|m)<0?-1:0)<<1),t=0|_r(0|i,0|d,p&f|0,(((0|m)<0?-1:0)>>31|((0|m)<0?-1:0)<<1)&h|0),e=S,a=a-1|0}while(0!=(0|a));u=c,c=0}else u=s,c=0,s=0;return a=0,0|r&&(l[r>>2]=t,l[r+4>>2]=e),0|(S=p=(0|o)>>>31|(u|a)<<1|0&(a<<1|o>>>31)|c,m=-2&(o<<1|0)|s)}function xr(t,e,n,i){return 0|Ar(t|=0,e|=0,n|=0,i|=0,0)}function Sr(t,e,n,i){var r,o;return o=w,w=w+16|0,Ar(t|=0,e|=0,n|=0,i|=0,r=0|o),w=o,0|(S=0|l[r+4>>2],0|l[r>>2])}function Mr(t,e,n){return t|=0,e|=0,(0|(n|=0))<32?(S=e>>n,t>>>n|(e&(1<<n)-1)<<32-n):(S=(0|e)<0?-1:0,e>>n-32|0)}function Er(t,e,n){return t|=0,e|=0,(0|(n|=0))<32?(S=e>>>n,t>>>n|(e&(1<<n)-1)<<32-n):(S=0,e>>>n-32|0)}function Tr(t,e,n){return t|=0,e|=0,(0|(n|=0))<32?(S=e<<n|(t&(1<<n)-1<<32-n)>>>32-n,t<<n):(S=t<<n-32,0)}function Ir(t){return(255&(t|=0))<<24|(t>>8&255)<<16|(t>>16&255)<<8|t>>>24|0}function kr(t,e,n){t|=0,e|=0;var i,o,a=0;if((0|(n|=0))>=8192)return 0|Z(0|t,0|e,0|n);if(o=0|t,i=t+n|0,(3&t)==(3&e)){for(;3&t;){if(!n)return 0|o;r[t>>0]=0|r[e>>0],t=t+1|0,e=e+1|0,n=n-1|0}for(a=(n=-4&i|0)-64|0;(0|t)<=(0|a);)l[t>>2]=l[e>>2],l[t+4>>2]=l[e+4>>2],l[t+8>>2]=l[e+8>>2],l[t+12>>2]=l[e+12>>2],l[t+16>>2]=l[e+16>>2],l[t+20>>2]=l[e+20>>2],l[t+24>>2]=l[e+24>>2],l[t+28>>2]=l[e+28>>2],l[t+32>>2]=l[e+32>>2],l[t+36>>2]=l[e+36>>2],l[t+40>>2]=l[e+40>>2],l[t+44>>2]=l[e+44>>2],l[t+48>>2]=l[e+48>>2],l[t+52>>2]=l[e+52>>2],l[t+56>>2]=l[e+56>>2],l[t+60>>2]=l[e+60>>2],t=t+64|0,e=e+64|0;for(;(0|t)<(0|n);)l[t>>2]=l[e>>2],t=t+4|0,e=e+4|0}else for(n=i-4|0;(0|t)<(0|n);)r[t>>0]=0|r[e>>0],r[t+1>>0]=0|r[e+1>>0],r[t+2>>0]=0|r[e+2>>0],r[t+3>>0]=0|r[e+3>>0],t=t+4|0,e=e+4|0;for(;(0|t)<(0|i);)r[t>>0]=0|r[e>>0],t=t+1|0,e=e+1|0;return 0|o}function Cr(t,e,n){e|=0;var i,o=0,a=0,s=0;if(i=(t|=0)+(n|=0)|0,e&=255,(0|n)>=67){for(;3&t;)r[t>>0]=e,t=t+1|0;for(a=(o=-4&i|0)-64|0,s=e|e<<8|e<<16|e<<24;(0|t)<=(0|a);)l[t>>2]=s,l[t+4>>2]=s,l[t+8>>2]=s,l[t+12>>2]=s,l[t+16>>2]=s,l[t+20>>2]=s,l[t+24>>2]=s,l[t+28>>2]=s,l[t+32>>2]=s,l[t+36>>2]=s,l[t+40>>2]=s,l[t+44>>2]=s,l[t+48>>2]=s,l[t+52>>2]=s,l[t+56>>2]=s,l[t+60>>2]=s,t=t+64|0;for(;(0|t)<(0|o);)l[t>>2]=s,t=t+4|0}for(;(0|t)<(0|i);)r[t>>0]=e,t=t+1|0;return i-n|0}function Br(t){return(t=+t)>=0?+M(t+.5):+I(t-.5)}function Rr(t){return(t=+t)-+M(t)!=.5?+Br(t):2*+Br(t/2)}function Pr(t){var e,n;return(0|(n=15+(t|=0)&-16|0))>0&(0|(t=(e=0|l[b>>2])+n|0))<(0|e)|(0|t)<0?(L(),N(12),-1):(l[b>>2]=t,(0|t)>(0|P())&&0==(0|R())?(l[b>>2]=e,N(12),-1):0|e)}function Lr(t){return B(0),0}function Dr(t){return B(1),0}function Nr(t,e){return B(2),0}function Or(t,e,n){return B(3),0}function Fr(t,e,n,i){return B(4),0}function Gr(t,e,n,i,r){return B(5),0}function zr(t,e,n,i,r,o){return B(6),0}function Ur(t,e,n,i,r,o,a){return B(7),0}function Hr(t,e,n,i,r,o,a,s,l,c,u){return B(8),0}function Vr(t){B(9)}function Wr(t,e){B(10)}function Zr(t,e,n){B(11)}function jr(t,e,n,i){B(12)}e._llvm_ceil_f32,e._llvm_floor_f32,e._llvm_floor_f64,e._llvm_pow_f64,e.flush_NO_FILESYSTEM;var Yr=[Lr,function(t){return 0},function(t){return+ +(((14*(0|l[5588+(t|=0)>>2])|0)-14|0)>>>0)},Lr],Xr=[Dr,function(t){var e,n;return e=w,w=w+16|0,n=e,t=0|function(t){return 0|(t|=0)}(0|l[60+(t|=0)>>2]),l[n>>2]=t,t=0|Ai(0|V(6,0|n)),w=e,0|t},he,fe,function(t){return 0|he(0|l[(t|=0)>>2])},function(t){return 0|fe(0|l[(t|=0)>>2])},zi,function(t){return 0},function(t){return 0|(0==(0|(t|=0))?0:(t+-1|0)>>>0<2?1:2)},Dr,Dr,Dr,Dr,Dr,Dr,Dr],Jr=[Nr,function(t,e){t|=0,e|=0;var n=0;return(n=0|Ut(1,22))?(nt(n,22,4),nt(n+4|0,1768449138,4),nt(n+8|0,0|l[t+16>>2],4),nt(n+12|0,0|l[t+12>>2],4),nt(n+16|0,0|l[t+20>>2],2),nt(n+18|0,0|l[t+24>>2],1),nt(n+19|0,0|l[t+28>>2],1),nt(n+20|0,0|l[t+32>>2],1),nt(n+21|0,0|l[t+36>>2],1),l[e>>2]=22,0|n):0|(n=0)},function(t,e){e|=0;var n,i=0,r=0,o=0,a=0,s=0;switch(0|l[(i=40+(t|=0)|0)>>2]){case 1:a=15;break;case 2:a=11+(0|l[t+112>>2])|0;break;default:return 0|(s=0)}if(!(s=0|Ut(1,a)))return 0|(s=0);switch(nt(s,a,4),nt(s+4|0,1668246642,4),nt(s+8|0,0|l[i>>2],1),nt(s+9|0,0|l[t+52>>2],1),nt(s+10|0,0|l[t+44>>2],1),n=s+11|0,0|l[i>>2]){case 1:nt(n,0|l[t+48>>2],4);break;case 2:if(0|l[(o=t+112|0)>>2])for(r=t+108|0,i=n,t=0;nt(i,0|u[(0|l[r>>2])+t>>0],1),!((t=t+1|0)>>>0>=(0|l[o>>2])>>>0);)i=i+1|0}return l[e>>2]=a,0|s},function(t,e){e|=0;var n,i,r,o=0,s=0,c=0;if(!(r=0|zt(i=10+(6*(0|f[4+(0|l[(n=116+(t|=0)|0)>>2])>>1])|0)|0)))return 0|(e=0);if(nt(r,i,4),nt(r+4|0,1667523942,4),nt(r+8|0,0|f[4+(0|l[n>>2])>>1],2),t=0|l[n>>2],0|a[t+4>>1])for(s=r+10|0,c=0,o=0;nt(s,0|f[(0|l[t>>2])+(6*o|0)>>1],2),nt(s+2|0,0|f[(0|l[l[n>>2]>>2])+(6*o|0)+2>>1],2),nt(s+4|0,0|f[(0|l[l[n>>2]>>2])+(6*o|0)+4>>1],2),o=c+1<<16>>16,t=0|l[n>>2],!((65535&o)>=(0|f[t+4>>1]));)s=s+6|0,c=o,o&=65535;return l[e>>2]=i,0|(e=r)},function(t,e){e|=0;var n,i,r=0,o=0,a=0;if(!(a=0|Ut(1,i=8+(0|l[(n=20+(t|=0)|0)>>2])|0)))return 0|(a=0);if(nt(a,i,4),nt(a+4|0,1651532643,4),0|l[n>>2])for(o=t+72|0,t=0,r=a+8|0;nt(r,0|l[(0|l[o>>2])+(12*t|0)+8>>2],1),!((t=t+1|0)>>>0>=(0|l[n>>2])>>>0);)r=r+1|0;return l[e>>2]=i,0|a},Nr,Nr,Nr],Qr=[Or,function(t,e,n){e|=0,n|=0;var i,o=0;return i=w,w=w+32|0,o=i,l[36+(t|=0)>>2]=61,0==(64&l[t>>2]|0)&&(l[o>>2]=l[t+60>>2],l[o+4>>2]=21523,l[o+8>>2]=i+16,0|H(54,0|o))&&(r[t+75>>0]=-1),o=0|wi(t,e,n),w=i,0|o},function(t,e,n){var i,r,o;return t|=0,e|=0,n|=0,r=w,w=w+32|0,i=r+20|0,l[(o=r)>>2]=l[t+60>>2],l[o+4>>2]=0,l[o+8>>2]=e,l[o+12>>2]=i,l[o+16>>2]=n,(0|Ai(0|O(140,0|o)))<0?(l[i>>2]=-1,t=-1):t=0|l[i>>2],w=r,0|t},function(t,e,n){var i,r;return e|=0,n|=0,kr(0|(r=0|l[(i=20+(t|=0)|0)>>2]),0|e,0|(t=(t=(0|l[t+16>>2])-r|0)>>>0>n>>>0?n:t)),l[i>>2]=(0|l[i>>2])+t,0|n},function(t,e,n){return-1},function(t,e,n){return-1},function(t,e,n){return S=-1,-1},function(t,e,n){return 0},ye,we,function(t,e,n){return e|=0,n|=0,0|ye(0|l[(t|=0)>>2],e,n)},function(t,e,n){e|=0,n|=0;var i,r=0,o=0,a=0,s=0;if(!(0|vn(0|l[(r=8+(t|=0)|0)>>2],54,n)))return 0|(s=0);if(!(0|we(0|l[t>>2],e,n)))return 0|(s=0);if(i=0|bn(s=0|l[r>>2]),r=0|_n(s),i)for(o=r,r=1,a=0;r=r?0!=(0|Qr[63&l[o>>2]](t,e,n)):0,r&=1,(0|(a=a+1|0))!=(0|i);)o=o+4|0;else r=1;return wn(s),0|(s=r)},$t,ge,function(t,e,n){e|=0,n|=0;var i,r,o=0,a=0,s=0;if(!(0|vn(0|l[(o=8+(t|=0)|0)>>2],53,n)))return 0|(n=0);if(r=0|bn(i=0|l[o>>2]),o=0|_n(i),r){for(a=1,s=0;a=a?0!=(0|Qr[63&l[o>>2]](t,e,n)):0,(0|(s=s+1|0))!=(0|r);)o=o+4|0,a&=1;if(wn(i),!a)return 0|(n=0)}else wn(i);return 0|(n=0|$t(l[t>>2]))},function(t,e,n){return e|=0,n|=0,0|ge(0|l[(t|=0)>>2],e,n)},function(t,e,n){t|=0,e|=0;var i,r=0;return r=0|l[(i=4+(n|=0)|0)>>2],(n=(0|l[n>>2])+(0|l[n+8>>2])-r|0)?(kr(0|t,0|r,0|(e=n>>>0>e>>>0?e:n)),l[i>>2]=(0|l[i>>2])+e,0|(r=e)):0|(r=-1)},function(t,e,n){t|=0,e|=0;var i,r,o=0,a=0,s=0,c=0;for(o=0|l[(c=4+(n|=0)|0)>>2],a=0|l[(i=n+8|0)>>2],r=o-(0|l[n>>2])|0,s=0==(0|a)?1:a;(s-r|0)>>>0<e>>>0;)s<<=1;if((0|s)!=(0|a)){if(!(o=0|zt(s)))return 0|(c=-1);0|(a=0|l[n>>2])&&(kr(0|o,0|a,0|r),Zt(0|l[n>>2])),l[n>>2]=o,o=o+r|0,l[c>>2]=o,l[i>>2]=s}return kr(0|o,0|t,0|e),l[c>>2]=(0|l[c>>2])+e,0|(c=e)},function(t,e,n){t|=0,e|=0;var i,r,o=0,a=0;return a=0|l[(o=4+(n|=0)|0)>>2],i=((0|(n=(0|l[n>>2])+(0|l[n+8>>2])-a|0))<0)<<31>>31,n?(r=(0|i)>(0|e)|(0|i)==(0|e)&n>>>0>t>>>0,l[o>>2]=a+t,S=o=r?e:i,0|(a=r?t:n)):(S=o=-1,0|(a=-1))},function(t,e,n){var i;return t|=0,e|=0,i=0|l[8+(n|=0)>>2],l[n+4>>2]=(0|l[n>>2])+(0>(0|e)|0==(0|e)&i>>>0>t>>>0?t:i),1},function(t,e,n){return 0|(0|(n=0|pr(t|=0,1,e|=0,n|=0))?n:-1)},function(t,e,n){return 0|Ei(t|=0,1,e|=0,n|=0)},function(t,e,n){return e|=0,n=0==(0|Vi(n|=0,t|=0,1)),S=n?e:-1,0|(n?t:-1)},function(t,e,n){return 0==(0|Vi(n|=0,t|=0,0))|0},function(t,e,n){return 1},function(t,e,n){return 0==(0|l[8+(t|=0)>>2])&0!=(0|l[t+188>>2])&0!=(0|l[t+192>>2])&1|0},function(t,e,n){e|=0,n|=0;var i,o,s,c,u,h,f,d,p,m,g,y,v,b,_,A,x,M,E,T,I,k,C,B,R,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0,j=0,Y=0,X=0,J=0;R=w,w=w+224|0,J=R+200|0,C=R+192|0,k=R+184|0,T=R+176|0,E=R+168|0,M=R+160|0,j=R+152|0,x=R+144|0,A=R+136|0,b=R+128|0,v=R+120|0,y=R+112|0,g=R+104|0,m=R+96|0,p=R+88|0,d=R+80|0,f=R+72|0,h=R+64|0,u=R+56|0,c=R+48|0,s=R+40|0,_=R+32|0,U=R+24|0,z=R+16|0,G=R+8|0,I=R,P=R+216|0,L=R+212|0,i=R+208|0,o=R+204|0,l[(B=8+(t|=0)|0)>>2]=1;t:do{if(2==(0|lt(e,P,2,n))&&(it(P,L,2),65359==(0|l[L>>2]))){l[B>>2]=2,F=0|br(0|(F=0|ut(e)),0|S,-2,-1),O=S,L=0|l[(X=t+196|0)>>2],l[L>>2]=F,l[L+4>>2]=O,l[(L=I)>>2]=F,l[L+4>>2]=O,mt(n,4,8053,I),L=0|l[X>>2],O=0|l[L>>2],P=0|l[(F=L+24|0)>>2],D=0|l[(N=L+32|0)>>2];do{if((P+1|0)>>>0>D>>>0){if(Z=~~(+(D>>>0)+100)>>>0,l[N>>2]=Z,L=0|Wt(0|l[(P=L+28|0)>>2],24*Z|0)){l[P>>2]=L,P=0|l[F>>2];break}Zt(0|l[P>>2]),l[P>>2]=0,l[N>>2]=0,l[F>>2]=0,mt(n,1,8090,G);break t}L=0|l[L+28>>2]}while(0);if(a[L+(24*P|0)>>1]=-177,W=0|Mr(0,0|O,32),l[(Z=L+(24*P|0)+8|0)>>2]=W,l[Z+4>>2]=S,l[L+(24*P|0)+16>>2]=2,l[F>>2]=P+1,2!=(0|lt(e,0|l[(Z=t+16|0)>>2],2,n)))return mt(n,1,8150,U),w=R,0|(J=0);if(it(0|l[Z>>2],i,2),65424!=(0|(N=0|l[i>>2]))){W=t+20|0,D=0,L=0,P=0;e:do{if(N>>>0<65280){Y=14;break}for(O=784;!((G=0==(0|(F=0|l[O>>2])))|(0|F)==(0|N));)O=O+12|0;if(G){mt(n,2,8219,s),V=2;n:for(;;){for(;;){if(2!=(0|lt(e,0|l[Z>>2],2,n))){Y=20;break e}if(it(0|l[Z>>2],I,2),(N=0|l[I>>2])>>>0>=65280){H=784;break}}for(;!(0==(0|(O=0|l[H>>2]))|(0|O)==(0|N));)H=H+12|0;if(!(l[H+4>>2]&l[B>>2])){Y=24;break e}if((0|O)>=65424){Y=99;break}switch(0|O){case 0:break;default:break n}V=V+2|0}if(99==(0|Y))switch(Y=0,0|O){case 65424:Y=26;break e}if(O=0|l[X>>2],z=(z=0|ut(e))-V|0,(1+(N=0|l[(U=O+24|0)>>2])|0)>>>0>(F=0|l[(G=O+32|0)>>2])>>>0){if(F=~~(+(F>>>0)+100)>>>0,l[G>>2]=F,!(O=0|Wt(0|l[(N=O+28|0)>>2],24*F|0))){Y=31;break}l[N>>2]=O,N=0|l[U>>2]}else O=0|l[O+28>>2];if(a[O+(24*N|0)>>1]=0,l[(G=O+(24*N|0)+8|0)>>2]=z,l[G+4>>2]=((0|z)<0)<<31>>31,l[O+(24*N|0)+16>>2]=V,l[U>>2]=N+1,O=0|l[H>>2],l[i>>2]=O,65424==(0|O))break;for(N=784;;){if(0==(0|(F=0|l[N>>2]))|(0|F)==(0|O)){G=N;break}N=N+12|0}}else G=O;if(P=65361==(0|F)?1:P,L=65362==(0|F)?1:L,D=65372==(0|F)?1:D,!(l[G+4>>2]&l[B>>2])){Y=37;break}if(2!=(0|lt(e,0|l[Z>>2],2,n))){Y=39;break}if(it(0|l[Z>>2],o,2),O=(0|l[o>>2])-2|0,l[o>>2]=O,N=0|l[Z>>2],O>>>0>(0|l[W>>2])>>>0){if(!(N=0|Wt(N,O))){Y=42;break}l[Z>>2]=N,O=0|l[o>>2],l[W>>2]=O}if((0|(N=0|lt(e,N,O,n)))!=(0|l[o>>2])){Y=45;break}if(!(0|qr[63&l[G+8>>2]](t,0|l[Z>>2],N,n))){Y=47;break}if(F=0|l[X>>2],z=0|l[G>>2],U=0|ut(e),U=-4-(H=0|l[o>>2])+U|0,H=H+4|0,(1+(N=0|l[(V=F+24|0)>>2])|0)>>>0>(O=0|l[(G=F+32|0)>>2])>>>0){if(O=~~(+(O>>>0)+100)>>>0,l[G>>2]=O,!(O=0|Wt(0|l[(N=F+28|0)>>2],24*O|0))){Y=52;break}l[N>>2]=O,N=0|l[V>>2]}else O=0|l[F+28>>2];if(a[O+(24*N|0)>>1]=z,l[(z=O+(24*N|0)+8|0)>>2]=U,l[z+4>>2]=((0|U)<0)<<31>>31,l[O+(24*N|0)+16>>2]=H,l[V>>2]=N+1,2!=(0|lt(e,0|l[Z>>2],2,n))){Y=54;break}it(0|l[Z>>2],i,2),N=0|l[i>>2]}while(65424!=(0|N));switch(0|Y){case 14:return l[_>>2]=N,mt(n,1,8168,_),w=R,0|(J=0);case 20:mt(n,1,8150,c),Y=33;break;case 24:mt(n,1,8235,u),Y=33;break;case 26:l[i>>2]=65424;break;case 31:Zt(0|l[N>>2]),l[N>>2]=0,l[G>>2]=0,l[U>>2]=0,mt(n,1,8090,h),Y=33;break;case 37:return mt(n,1,8235,d),w=R,0|(J=0);case 39:return mt(n,1,8150,p),w=R,0|(J=0);case 42:return Zt(0|l[Z>>2]),l[Z>>2]=0,l[W>>2]=0,mt(n,1,8333,m),w=R,0|(J=0);case 45:return mt(n,1,8150,g),w=R,0|(J=0);case 47:return mt(n,1,8367,y),w=R,0|(J=0);case 52:return Zt(0|l[N>>2]),l[N>>2]=0,l[G>>2]=0,l[V>>2]=0,mt(n,1,8090,v),w=R,0|(J=0);case 54:return mt(n,1,8150,b),w=R,0|(J=0)}if(33==(0|Y))return mt(n,1,8278,f),w=R,0|(J=0);if(0|P){if(!L)return mt(n,1,8472,x),w=R,0|(J=0);if(!D)return mt(n,1,8518,j),w=R,0|(J=0);e:do{if(1&r[t+184>>0]){P=0|l[(W=t+120|0)>>2];do{if(P){U=t+124|0,G=0,L=0,z=0;n:for(;;){if(D=0|l[U>>2],O=0|l[D+(z<<3)>>2]){if(F=(D=0|l[D+(z<<3)+4>>2])-G|0,D=(N=G>>>0<D>>>0)?0:G-D|0,!(0==(0|F)|1^N)){for(P=N?O+G|0:O;;){if(F>>>0<4){Y=72;break n}if(it(P,I,4),P=P+4|0,j=F+-4|0,L=(N=0|l[I>>2])+L|0,D=(O=j>>>0<N>>>0)?N-j|0:D,!(F=O?0:j-N|0))break;P=O?P:P+N|0}P=0|l[W>>2]}}else D=G;if((z=z+1|0)>>>0>=P>>>0)break;G=D}if(72==(0|Y)){mt(n,1,8564,M);break}D?mt(n,1,8595,E):Y=76}else L=0,Y=76}while(0);n:do{if(76==(0|Y)){if(D=0|zt(L),l[(U=t+144|0)>>2]=D,!D){mt(n,1,8618,T);break}l[(H=t+132|0)>>2]=L,N=0|l[W>>2],V=t+124|0;do{if(N){z=0,O=0,G=0,L=P=0|l[V>>2];i:for(;;){if(F=0|l[L+(z<<3)>>2]){L=0|l[L+(z<<3)+4>>2],P=(0|l[U>>2])+O|0;r:do{if(G>>>0<L>>>0){if(kr(0|P,0|F,0|G),P=O+G|0,!(D=L-G|0)){D=0;break}for(L=F+G|0;;){if(D>>>0<4){Y=91;break i}if(it(L,I,4),O=L+4|0,N=D+-4|0,L=0|l[I>>2],D=(0|l[U>>2])+P|0,N>>>0<L>>>0)break;if(kr(0|D,0|O,0|L),P=(L=0|l[I>>2])+P|0,!(D=N-L|0)){D=0;break r}L=O+L|0}kr(0|D,0|O,0|N),D=(0|l[I>>2])-N|0,P=N+P|0}else kr(0|P,0|F,0|L),D=G-L|0,P=L+O|0}while(0);Zt(0|l[(0|l[V>>2])+(z<<3)>>2]),L=0|l[V>>2],l[L+(z<<3)>>2]=0,l[L+(z<<3)+4>>2]=0,O=P,N=0|l[W>>2],P=L}else D=G;if((z=z+1|0)>>>0>=N>>>0){Y=93;break}G=D}if(91==(0|Y)){mt(n,1,8564,k);break n}if(93==(0|Y)){D=0|l[U>>2],L=0|l[H>>2];break}}else P=0|l[V>>2]}while(0);l[t+128>>2]=D,l[t+152>>2]=L,l[W>>2]=0,Zt(P),l[V>>2]=0;break e}}while(0);return mt(n,1,8656,C),w=R,0|(J=0)}}while(0);return mt(n,4,8682,J),n=0|ut(e),J=8+(0|l[X>>2])|0,l[J>>2]=n+-2,l[J+4>>2]=0,l[B>>2]=8,w=R,0|(J=1)}}return mt(n,1,8426,A),w=R,0|(J=0)}}while(0);return mt(n,1,8126,z),w=R,0|(J=0)},function(t,e,n){e|=0,n|=0;var i,o,a,s,c,u,h,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0;h=w,w=w+16|0,u=h,s=0|l[80+(t|=0)>>2],c=t+88|0,i=0|k(0|l[t+112>>2],0|l[t+116>>2]),o=1080*(x=0|l[s+16>>2])|0,a=0|l[t+12>>2],x=0|k(x<<2,x);t:do{if(0|i){S=a+5604|0,M=a+5620|0,E=a+5612|0,T=a+5616|0,I=a+5632|0,C=a+5624|0,B=a+5584|0,_=0|l[t+164>>2],A=0;e:for(;;){if(R=0|l[(g=_+5584|0)>>2],kr(0|_,0|a,5640),r[(e=_+5636|0)>>0]=-4&r[e>>0],l[_+5168>>2]=0,l[(e=_+5604|0)>>2]=0,l[(y=_+5620|0)>>2]=0,l[(P=_+5612|0)>>2]=0,l[(v=_+5632|0)>>2]=0,l[(b=_+5624|0)>>2]=0,l[g>>2]=R,0|l[S>>2]){if(f=0|zt(x),l[e>>2]=f,!f){e=0,f=25;break}kr(0|f,0|l[S>>2],0|x)}if(f=0|zt(e=20*(0|l[M>>2])|0),l[P>>2]=f,!f){e=0,f=25;break}if(kr(0|f,0|l[E>>2],0|e),0|(e=0|l[T>>2]))for(p=0|l[P>>2],m=0|l[E>>2],g=0;;){if(0|l[(d=m+12|0)>>2]){if(f=0|zt(0|l[(e=m+16|0)>>2]),l[p+12>>2]=f,!f){e=0,f=25;break e}kr(0|f,0|l[d>>2],0|l[e>>2]),e=0|l[T>>2]}if(l[y>>2]=1+(0|l[y>>2]),(g=g+1|0)>>>0>=e>>>0)break;p=p+20|0,m=m+20|0}if(f=0|zt(e=20*(0|l[I>>2])|0),l[b>>2]=f,!f){e=0,f=25;break}if(kr(0|f,0|l[C>>2],0|e),l[v>>2]=l[I>>2],0|(m=0|l[I>>2]))for(p=0|l[C>>2],f=0|l[b>>2],d=0;0|(e=0|l[p+8>>2])&&(l[f+8>>2]=(0|l[P>>2])+(20*((e-(0|l[E>>2])|0)/20|0)|0)),0|(e=0|l[p+12>>2])&&(l[f+12>>2]=(0|l[P>>2])+(20*((e-(0|l[E>>2])|0)/20|0)|0)),!((d=d+1|0)>>>0>=m>>>0);)p=p+20|0,f=f+20|0;if(kr(0|R,0|l[B>>2],0|o),(A=A+1|0)>>>0>=i>>>0)break t;_=_+5640|0}if(25==(0|f))return w=h,0|e}}while(0);return f=0|Xe(1),l[(e=t+204|0)>>2]=f,f?0|Ke(f,s,c)?(w=h,0|(n=1)):($e(0|l[e>>2]),l[e>>2]=0,mt(n,1,8019,u),w=h,0|(n=0)):(w=h,0|(n=0))},function(t,e,n){t|=0,e|=0,n|=0;var i,r,o,a,s,c,u,h,f,d,p,m,g,y,v,b,_=0,A=0,x=0,M=0,E=0,T=0,I=0,C=0;if(b=w,w=w+80|0,p=b+32|0,m=b+24|0,C=b+16|0,I=b+8|0,v=b+60|0,c=b+56|0,u=b+52|0,h=b+48|0,f=b+44|0,d=b+40|0,i=b+36|0,l[(s=b+64|0)>>2]=1,!(_=0|zt(1e3)))return mt(n,1,14664,b),w=b,0|(C=0);for(g=t+116|0,y=t+112|0,r=t+204|0,o=t+84|0,a=t+8|0,T=0,A=1e3;;){if(!(0|ie(t,v,c,u,h,f,d,i,s,e,n))){A=5;break}if(!(0|l[s>>2])){A=17;break}if((E=0|l[c>>2])>>>0>A>>>0){if(!(A=0|Wt(_,E))){A=9;break}_=A,M=E}else M=A;if(!(0|re(t,x=0|l[v>>2],_,E,e,n))){A=11;break}if(A=x+1|0,E=0|k(0|l[y>>2],0|l[g>>2]),l[m>>2]=A,l[m+4>>2]=E,mt(n,4,14768,m),E=0|l[r>>2],!(0|pe(0|l[20+(0|l[l[E+20>>2]>>2])>>2],0|l[E+24>>2],_,0|l[24+(0|l[o>>2])>>2]))){A=13;break}if(l[p>>2]=A,mt(n,4,14798,p),0==(0|(E=0|ht(e)))&0==(0|S)&&64==(0|l[a>>2])){A=17;break}if((0|(T=T+1|0))==(0|k(0|l[y>>2],0|l[g>>2]))){A=17;break}A=M}return 5==(0|A)?(Zt(_),w=b,0|(C=0)):9==(0|A)?(Zt(_),C=0|k(0|l[y>>2],0|l[g>>2]),l[I>>2]=1+(0|l[v>>2]),l[I+4>>2]=C,mt(n,1,14699,I),w=b,0|(C=0)):11==(0|A)?(Zt(_),I=0|k(0|l[y>>2],0|l[g>>2]),l[C>>2]=x+1,l[C+4>>2]=I,mt(n,1,14739,C),w=b,0|(C=0)):13==(0|A)?(Zt(_),w=b,0|(C=0)):17==(0|A)?(Zt(_),w=b,0|(C=1)):0},function(t,e,n){t|=0,e|=0,n|=0;var i,r,o,a,s,c,u,h,f,d,p,m,g,y,v,b=0,_=0,A=0,x=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0;if(v=w,w=w+96|0,m=v+56|0,p=v+48|0,d=v+40|0,y=v+32|0,g=v+24|0,E=v+16|0,M=v+8|0,a=v+88|0,s=v+84|0,c=v+80|0,u=v+76|0,h=v+72|0,f=v+68|0,i=v+64|0,l[(o=v+92|0)>>2]=1,!(b=0|zt(1e3)))return mt(n,1,14941,v),w=v,0|(R=0);_=0|l[(r=t+196|0)>>2],A=0|l[_+40>>2];t:do{if(!A){A=0|k(0|l[t+116>>2],0|l[t+112>>2]),l[_+36>>2]=A,A=0|Ut(A,40),_=0|l[r>>2],l[_+40>>2]=A;e:do{if(0|A){if(0|l[_+36>>2]){x=0;do{if(l[A+(40*x|0)+28>>2]=100,l[A+(40*x|0)+20>>2]=0,B=0|Ut(100,24),_=0|l[r>>2],A=0|l[_+40>>2],l[A+(40*x|0)+24>>2]=B,x=x+1|0,!B)break e}while(x>>>0<(0|l[_+36>>2])>>>0)}if(_=0|l[t+60>>2],A){x=_,R=11;break t}break t}}while(0);return Zt(b),w=v,0|(R=0)}x=0|l[t+60>>2],R=11}while(0);if(11==(0|R))if(0|l[A+16>>2]){if(0|l[A+(40*x|0)+4>>2]){if(B=0|l[A+(40*x|0)+16>>2],!(0|et(e,B=0|br(0|l[B>>2],0|l[B+4>>2],2,0),S,n)))return mt(n,1,14979,E),Zt(b),w=v,0|(R=0)}else if(!(0|et(e,B=0|br(0|l[(B=t+64|0)>>2],0|l[B+4>>2],2,0),S,n)))return mt(n,1,14979,M),Zt(b),w=v,0|(R=0);256==(0|l[(_=t+8|0)>>2])?(l[_>>2]=8,_=x):_=x}else _=x;t:do{if(0|ie(t,a,s,c,u,h,f,i,o,e,n)){for(E=t+116|0,T=t+112|0,I=t+204|0,C=t+84|0,B=_+1|0,A=1e3;0|l[o>>2];){if((x=0|l[s>>2])>>>0>A>>>0){if(!(A=0|Wt(b,x))){R=25;break}b=A,A=x}if(!(0|re(t,M=0|l[a>>2],b,x,e,n))){R=27;break}if(x=M+1|0,P=0|k(0|l[T>>2],0|l[E>>2]),l[y>>2]=x,l[y+4>>2]=P,mt(n,4,14768,y),P=0|l[I>>2],!(0|pe(0|l[20+(0|l[l[P+20>>2]>>2])>>2],0|l[P+24>>2],b,0|l[24+(0|l[C>>2])>>2]))){R=29;break}if(l[d>>2]=x,mt(n,4,14798,d),(0|M)==(0|_)){R=31;break}if(l[m>>2]=x,l[m+4>>2]=B,mt(n,2,15007,m),!(0|ie(t,a,s,c,u,h,f,i,o,e,n)))break t}return 25==(0|R)?(Zt(b),P=0|k(0|l[T>>2],0|l[E>>2]),l[g>>2]=1+(0|l[a>>2]),l[g+4>>2]=P,mt(n,1,14699,g),w=v,0|(P=0)):27==(0|R)?(Zt(b),w=v,0|(P=0)):29==(0|R)?(Zt(b),w=v,0|(P=0)):31!=(0|R)||(P=8+(0|l[r>>2])|0,0|et(e,P=0|br(0|l[P>>2],0|l[P+4>>2],2,0),S,n))?(Zt(b),w=v,0|(P=1)):(mt(n,1,14979,p),Zt(b),w=v,0|(P=0))}}while(0);return Zt(b),w=v,0|(P=0)},function(t,e,n){return e|=0,n|=0,nt(0|l[(t=44+(t|=0)|0)>>2],65497,2),2!=(0|ct(e,0|l[t>>2],2,n))?0|(n=0):0|(n=0!=(0|function(t,e){e|=0;var n,i,r,o,a=0,s=0,c=0,u=0,h=0;o=w,w=w+16|0,r=o,a=0|l[(n=32+(t|=0)|0)>>2],l[(h=t+36|0)>>2]=a,s=0|l[(i=t+48|0)>>2];do{if(s){for(c=t+20|0;-1!=(0|(s=0|Qr[63&l[c>>2]](a,s,0|l[t>>2])));)if(a=(0|l[h>>2])+s|0,l[h>>2]=a,s=(0|l[i>>2])-s|0,l[i>>2]=s,!s){u=6;break}if(6==(0|u)){a=0|l[n>>2];break}return l[(h=t+68|0)>>2]=8|l[h>>2],mt(e,4,4360,r),w=o,0|(h=0)}}while(0);return l[h>>2]=a,w=o,0|(h=1)}(e,n))&1)},function(t,e,n){e|=0,n|=0;var i,r,o,a,s=0;return o=5*(0|l[32+(t|=0)>>2])|0,s=0|br(0|l[(s=t+16|0)>>2],0|l[s+4>>2],6,0),a=S,i=0|ut(e),r=S,0|dt(e,s,a,n)?(0|ct(e,0|l[t+24>>2],o,n))!=(0|o)?0|(s=0):0|(s=0!=(0|dt(e,i,r,n))&1):0|(s=0)},function(t,e,n){return e|=0,n|=0,(t=0|l[196+(t|=0)>>2])?(n=0|_r(0|(e=0|ut(e)),0|S,0|l[(n=t)>>2],0|l[n+4>>2]),l[(e=t+16|0)>>2]=n,l[e+4>>2]=S,1):1},function(t,e,n){return e|=0,n|=0,$e(0|l[(e=204+(t|=0)|0)>>2]),l[e>>2]=0,0|(n=0|l[(e=t+24|0)>>2])&&(Zt(n),l[e>>2]=0,l[t+28>>2]=0),(e=0|l[(n=t+36|0)>>2])?(Zt(e),l[n>>2]=0,l[(t=t+40|0)>>2]=0,1):(l[(t=t+40|0)>>2]=0,1)},function(t,e,n){return e|=0,n|=0,0|(n=0|l[(e=44+(t|=0)|0)>>2])&&(Zt(n),l[e>>2]=0),l[t+48>>2]=0,1},function(t,e,n){return 1},function(t,e,n){var i,r;return e|=0,n|=0,r=w,w=w+32|0,i=0==(0|l[8+(t|=0)>>2])&0!=(0|l[t+188>>2])&0!=(0|l[t+192>>2])&1,(e=(0|l[4+(0|l[5584+(0|l[t+164>>2])>>2])>>2])-1|0)>>>0>31?(mt(n,1,16016,r),w=r,0|(n=0)):(e=1<<e,(0|l[t+100>>2])>>>0<e>>>0?(mt(n,1,16016,r+8|0),w=r,0|(n=0)):(0|l[t+104>>2])>>>0>=e>>>0?(w=r,0|(n=i)):(mt(n,1,16016,r+16|0),w=r,0|(n=0)))},function(t,e,n){e|=0,n|=0;var i,r=0,o=0,s=0,c=0;if((-32256&a[88+(t|=0)>>1])<<16>>16!=-32256)return 0|(c=1);if(!(i=0|k(0|l[t+112>>2],0|l[t+116>>2])))return 0|(c=1);for(c=t+80|0,o=0|l[t+164>>2],e=1,s=0;;){if(2==(0|l[o+16>>2])&&(e&=0!=(0|l[o+5608>>2]),r=0|l[16+(0|l[c>>2])>>2]))for(n=0,t=0|l[o+5584>>2];e=(1&l[t+20>>2]^1)&e,!((n=n+1|0)>>>0>=r>>>0);)t=t+1080|0;if((0|(s=s+1|0))==(0|i))break;o=o+5640|0}return 0|e},function(t,e,n){e|=0,n|=0;var i,r,o,a,s=0,c=0,u=0;if(r=88+(t|=0)|0,o=t+32|0,a=0|l[t+80>>2],i=0|k(0|l[t+116>>2],0|l[t+112>>2]),l[o>>2]=0,!i)return 1;for(t=0|l[t+164>>2],s=0;;){je(a,r,s),c=t+420|0,e=0,n=0;do{u=0|_e(r,e,s),l[o>>2]=(0|l[o>>2])+u,n=u+n|0,e=e+1|0}while(e>>>0<=(0|l[c>>2])>>>0);if(l[t+5588>>2]=n,(0|(s=s+1|0))==(0|i))break;t=t+5640|0}return 1},function(t,e,n){return e|=0,n|=0,nt(t=0|l[44+(t|=0)>>2],65359,2),2==(0|ct(e,t,2,n))|0},function(t,e,n){e|=0,n|=0;var i,r,o,a,s,c,u=0,h=0,d=0,p=0;c=w,w=w+16|0,i=c,r=0|l[80+(t|=0)>>2],p=40+(o=3*(0|l[(s=r+16|0)>>2])|0)|0,d=0|l[r+24>>2],h=t+48|0,u=0|l[(a=t+44|0)>>2];do{if(p>>>0>(0|l[h>>2])>>>0){if(0|(u=0|Wt(u,p))){l[a>>2]=u,l[h>>2]=p;break}return Zt(0|l[a>>2]),l[a>>2]=0,l[h>>2]=0,mt(n,1,15978,i),w=c,0|(p=0)}}while(0);if(nt(u,65361,2),nt(u+2|0,o+38|0,2),nt(u+4|0,0|f[t+88>>1],2),nt(u+6|0,0|l[r+8>>2],4),nt(u+10|0,0|l[r+12>>2],4),nt(u+14|0,0|l[r>>2],4),nt(u+18|0,0|l[r+4>>2],4),nt(u+22|0,0|l[t+100>>2],4),nt(u+26|0,0|l[t+104>>2],4),nt(u+30|0,0|l[t+92>>2],4),nt(u+34|0,0|l[t+96>>2],4),nt(u+38|0,0|l[s>>2],2),0|l[s>>2])for(u=u+40|0,h=0;nt(u,(0|l[d+24>>2])-1+(l[d+32>>2]<<7)|0,1),nt(u+1|0,0|l[d>>2],1),nt(u+2|0,0|l[d+4>>2],1),!((h=h+1|0)>>>0>=(0|l[s>>2])>>>0);)d=d+52|0,u=u+3|0;return p=(0|ct(e,0|l[a>>2],p,n))==(0|p)&1,w=c,0|p},function(t,e,n){e|=0,n|=0;var i,r,o,a,s,c,u,h,f,d,p=0,m=0,g=0;d=w,w=w+32|0,g=d+16|0,f=d+8|0,o=d,a=d+20|0,c=0|l[(s=164+(t|=0)|0)>>2],h=0|l[(u=t+200|0)>>2],p=0|l[c+(5640*h|0)+5584>>2],r=9+(m=1&l[p>>2]?5+(0|l[p+4>>2])|0:5)|0,l[a>>2]=r,i=t+48|0,p=0|l[(t=t+44|0)>>2];do{if(r>>>0>(0|l[i>>2])>>>0){if(0|(p=0|Wt(p,r))){l[t>>2]=p,l[i>>2]=r;break}return Zt(0|l[t>>2]),l[t>>2]=0,l[i>>2]=0,mt(n,1,15913,o),w=d,0|(g=0)}}while(0);return nt(p,65362,2),nt(p+2|0,m+7|0,2),nt(p+4|0,0|l[c+(5640*h|0)>>2],1),nt(p+5|0,0|l[c+(5640*h|0)+4>>2],1),nt(p+6|0,0|l[c+(5640*h|0)+8>>2],2),nt(p+8|0,0|l[c+(5640*h|0)+16>>2],1),l[a>>2]=m,0|Se(0|l[s>>2],0|l[u>>2],p+9|0,a,n)?0|l[a>>2]?(mt(n,1,15952,g),w=d,0|(g=0)):(g=(0|ct(e,0|l[t>>2],r,n))==(0|r)&1,w=d,0|g):(mt(n,1,15952,f),w=d,0|(g=0))},function(t,e,n){e|=0,n|=0;var i,r,o,a,s,c,u,h,f=0,d=0,p=0;h=w,w=w+32|0,p=h+16|0,u=h+8|0,o=h,s=h+20|0,c=200+(t|=0)|0,f=0|l[(0|l[(a=t+164|0)>>2])+(5640*(0|l[c>>2])|0)+5584>>2],f=1==(0|(d=0|l[f+24>>2]))?1:(3*(0|l[f+4>>2])|0)-2|0,r=4+(i=0==(0|d)?f+1|0:f<<1|1)|0,l[s>>2]=r,d=t+48|0,f=0|l[(t=t+44|0)>>2];do{if(r>>>0>(0|l[d>>2])>>>0){if(0|(f=0|Wt(f,r))){l[t>>2]=f,l[d>>2]=r;break}return Zt(0|l[t>>2]),l[t>>2]=0,l[d>>2]=0,mt(n,1,15848,o),w=h,0|(p=0)}}while(0);return nt(f,65372,2),nt(f+2|0,i+2|0,2),l[s>>2]=i,0|xe(0|l[a>>2],0|l[c>>2],0,f+4|0,s,n)?0|l[s>>2]?(mt(n,1,15887,p),w=h,0|(p=0)):(p=(0|ct(e,0|l[t>>2],r,n))==(0|r)&1,w=h,0|p):(mt(n,1,15887,u),w=h,0|(p=0))},function(t,e,n){e|=0,n|=0;var i,r,o,a,s,c,u,h,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0;if(h=w,w=w+16|0,u=h,a=h+4|0,(f=0|l[16+(0|l[(s=80+(t|=0)|0)>>2])>>2])>>>0<=1)return w=h,0|(A=1);for(r=t+164|0,o=t+200|0,c=t+48|0,i=t+44|0,b=1,t=f;;){d=0|l[r>>2],m=0|l[o>>2],p=0|l[d+(5640*m|0)+5584>>2],g=0|l[p+(1080*b|0)>>2];t:do{if((0|l[p>>2])==(0|g)&&(_=0|l[p+4>>2],(0|_)==(0|l[p+(1080*b|0)+4>>2]))&&(0|l[p+8>>2])==(0|l[p+(1080*b|0)+8>>2])&&(0|l[p+12>>2])==(0|l[p+(1080*b|0)+12>>2])&&(0|l[p+16>>2])==(0|l[p+(1080*b|0)+16>>2])&&(0|l[p+20>>2])==(0|l[p+(1080*b|0)+20>>2])){if(_){f=0;do{if((0|l[p+812+(f<<2)>>2])!=(0|l[p+(1080*b|0)+812+(f<<2)>>2])){A=13;break t}if((0|l[p+944+(f<<2)>>2])!=(0|l[p+(1080*b|0)+944+(f<<2)>>2])){A=13;break t}f=f+1|0}while(f>>>0<_>>>0)}}else A=13}while(0);if(13==(0|A)){if(A=0,v=(f=1&g?5+(0|l[p+(1080*b|0)+4>>2])|0:5)+(t>>>0<257?6:7)|0,f=0|l[i>>2],v>>>0>(0|l[c>>2])>>>0){if(!(f=0|Wt(f,v))){A=17;break}l[i>>2]=f,l[c>>2]=v,y=0|l[r>>2],m=0|l[o>>2],p=0|l[y+(5640*m|0)+5584>>2],t=0|l[16+(0|l[s>>2])>>2],g=0|l[p+(1080*b|0)>>2]}else y=d;if(d=t>>>0<257?1:2,t=1&g?5+(0|l[p+(1080*b|0)+4>>2])|0:5,nt(f,65363,2),nt(f+2|0,d+3+t|0,2),nt(g=f+4|0,b,d),nt(g=g+d|0,0|l[(0|l[y+(5640*m|0)+5584>>2])+(1080*b|0)>>2],1),l[a>>2]=t,Se(0|l[r>>2],0|l[o>>2],g+1|0,a,n),(0|ct(e,0|l[i>>2],v,n))!=(0|v)){t=0,A=24;break}t=0|l[16+(0|l[s>>2])>>2]}if((b=b+1|0)>>>0>=t>>>0){t=1,A=24;break}}return 17==(0|A)?(Zt(0|l[i>>2]),l[i>>2]=0,l[c>>2]=0,mt(n,1,15774,u),w=h,0|(A=0)):24==(0|A)?(w=h,0|t):0},function(t,e,n){e|=0,n|=0;var i,r,o,a,s,c,u,h,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0;if(h=w,w=w+16|0,u=h,a=h+4|0,(f=0|l[16+(0|l[(s=80+(t|=0)|0)>>2])>>2])>>>0<=1)return w=h,0|(b=1);for(r=t+164|0,o=t+200|0,c=t+48|0,i=t+44|0,v=1,t=f;;){g=0|l[(0|l[r>>2])+(5640*(0|l[o>>2])|0)+5584>>2],p=0|l[g+24>>2],m=0|l[g+(1080*v|0)+24>>2];t:do{if((0|p)==(0|m)&&(0|l[g+804>>2])==(0|l[g+(1080*v|0)+804>>2])){if(1!=(0|p)){if(f=(y=3*(0|l[g+4>>2])|0)-2|0,(0|y)!=(3*(0|l[g+(1080*v|0)+4>>2])|0)){b=14;break}if(!f)break;d=f}else d=1;f=0;do{if((0|l[g+28+(f<<3)>>2])!=(0|l[g+(1080*v|0)+28+(f<<3)>>2])){b=14;break t}f=f+1|0}while(f>>>0<d>>>0);if(p){f=0;do{if((0|l[g+28+(f<<3)+4>>2])!=(0|l[g+(1080*v|0)+28+(f<<3)+4>>2])){b=14;break t}f=f+1|0}while(f>>>0<d>>>0)}}else b=14}while(0);if(14==(0|b)){if(b=0,f=1==(0|m)?1:(3*(0|l[g+(1080*v|0)+4>>2])|0)-2|0,y=5+(0==(0|m)?f+1|0:f<<1|1)+(t>>>0>256&1)|0,t=0|l[i>>2],y>>>0>(0|l[c>>2])>>>0){if(!(t=0|Wt(t,y))){b=18;break}l[i>>2]=t,l[c>>2]=y,f=0|l[(0|l[r>>2])+(5640*(0|l[o>>2])|0)+5584>>2],d=0|l[f+(1080*v|0)+24>>2],p=t}else d=m,f=g,p=t;if(t=1==(0|d)?1:(3*(0|l[f+(1080*v|0)+4>>2])|0)-2|0,f=0==(0|d)?t+1|0:t<<1|1,l[a>>2]=f+6,nt(p,65373,2),t=p+2|0,(0|l[16+(0|l[s>>2])>>2])>>>0<257?(nt(t,f+3|0,2),nt(p+4|0,v,1),t=5):(nt(t,f+4|0,2),nt(p+4|0,v,2),t=6),l[a>>2]=f,xe(0|l[r>>2],0|l[o>>2],v,p+t|0,a,n),(0|ct(e,0|l[i>>2],y,n))!=(0|y)){t=0,b=28;break}t=0|l[16+(0|l[s>>2])>>2]}if((v=v+1|0)>>>0>=t>>>0){t=1,b=28;break}}return 18==(0|b)?(Zt(0|l[i>>2]),l[i>>2]=0,l[c>>2]=0,mt(n,1,15702,u),w=h,0|(b=0)):28==(0|b)?(w=h,0|t):0},function(t,e,n){e|=0,n|=0;var i,r,o,a,s=0,c=0,u=0;a=w,w=w+16|0,c=a,u=6+(o=5*(0|l[32+(t|=0)>>2])|0)|0,i=t+48|0,s=0|l[(r=t+44|0)>>2];do{if(u>>>0>(0|l[i>>2])>>>0){if(0|(s=0|Wt(s,u))){l[r>>2]=s,l[i>>2]=u;break}return Zt(0|l[r>>2]),l[r>>2]=0,l[i>>2]=0,mt(n,1,15663,c),w=a,0|(u=0)}}while(0);return c=0|ut(e),l[(t=t+16|0)>>2]=c,l[t+4>>2]=S,nt(s,65365,2),nt(s+2|0,o+4|0,2),nt(s+4|0,0,1),nt(s+5|0,80,1),u=(0|ct(e,0|l[r>>2],u,n))==(0|u)&1,w=a,0|u},function(t,e,n){t|=0,e|=0,n|=0;var i,r,o,a,s,c,u,h,f=0,d=0,p=0,m=0;h=w,w=w+16|0,o=h,l[(m=h+4|0)>>2]=0,d=0|l[(a=t+164|0)>>2],f=0|l[(s=t+200|0)>>2],p=0|l[16+(0|l[(r=t+80|0)>>2])>>2],u=4+(0|k(p>>>0<257?7:9,1+(0|l[d+(5640*f|0)+420>>2])|0))|0,i=t+48|0,t=0|l[(c=t+44|0)>>2];do{if(u>>>0>(0|l[i>>2])>>>0){if(0|(t=0|Wt(t,u))){l[c>>2]=t,l[i>>2]=u,p=0|l[16+(0|l[r>>2])>>2],d=0|l[a>>2],f=0|l[s>>2];break}return Zt(0|l[c>>2]),l[c>>2]=0,l[i>>2]=0,mt(n,1,15624,o),w=h,0|(m=0)}}while(0);return be(p,d,f,t,m),m=(0|ct(e,0|l[c>>2],u,n))==(0|u)&1,w=h,0|m},function(t,e,n){e|=0,n|=0;var i,r,o=0,a=0,s=0,c=0,u=0,h=0;if(r=164+(t|=0)|0,a=0|l[(u=t+80|0)>>2],!(o=0|l[a+16>>2]))return 0|(u=1);for(i=t+44|0,s=0,c=0|l[5584+(0|l[r>>2])>>2],t=a;;){if(0|l[c+808>>2]){if(t=0|l[5584+(0|l[r>>2])>>2],a=6+(o=o>>>0<257?1:2)|0,nt(h=0|l[i>>2],65374,2),nt(h+2|0,4|o,2),nt(h=h+4|0,s,o),nt(o=h+o|0,0,1),nt(o+1|0,0|l[t+(1080*s|0)+808>>2],1),(0|ct(e,0|l[i>>2],a,n))!=(0|a)){t=0,o=7;break}t=0|l[u>>2]}if((s=s+1|0)>>>0>=(o=0|l[t+16>>2])>>>0){t=1,o=7;break}c=c+1080|0}return 7==(0|o)?0|t:0},function(t,e,n){e|=0,n|=0;var i,r,o,a,s,c,u=0;c=w,w=w+16|0,o=c,u=6+(s=0|Si(a=0|l[108+(t|=0)>>2]))|0,r=t+48|0,t=0|l[(i=t+44|0)>>2];do{if(u>>>0>(0|l[r>>2])>>>0){if(0|(t=0|Wt(t,u))){l[i>>2]=t,l[r>>2]=u;break}return Zt(0|l[i>>2]),l[i>>2]=0,l[r>>2]=0,mt(n,1,15581,o),w=c,0|(u=0)}}while(0);return nt(t,65380,2),nt(t+2|0,s+4|0,2),nt(t+4|0,1,2),kr(t+6|0,0|a,0|s),u=(0|ct(e,0|l[i>>2],u,n))==(0|u)&1,w=c,0|u},function(t,e,n){e|=0,n|=0;var i,o,a,s,c,u,h,f=0,d=0,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0;h=w,w=w+32|0,c=h+24|0,a=h+16|0,_=h+8|0,d=h,p=0|l[80+(t|=0)>>2],y=6+(m=0|l[(g=p+16|0)>>2])|0,s=t+48|0,f=0|l[(u=t+44|0)>>2];do{if(y>>>0>(0|l[s>>2])>>>0){if(0|(f=0|Wt(f,y))){l[u>>2]=f,l[s>>2]=y;break}return Zt(0|l[u>>2]),l[u>>2]=0,l[s>>2]=0,mt(n,1,15425,d),w=h,0|(n=0)}}while(0);if(nt(f,65400,2),nt(f+2|0,m+4|0,2),nt(f+4|0,0|l[g>>2],2),0|l[g>>2])for(p=0|l[p+24>>2],f=f+6|0,d=0;nt(f,(0|l[p+24>>2])-1|l[p+32>>2]<<7,1),!((d=d+1|0)>>>0>=(0|l[g>>2])>>>0);)p=p+52|0,f=f+1|0;if((0|ct(e,0|l[u>>2],y,n))!=(0|y))return w=h,0|(n=0);m=(b=0|l[(i=t+164|0)>>2])+(5640*(v=0|l[(o=t+200|0)>>2])|0)+5616|0;t:do{if(0|l[m>>2]){for(d=0|l[b+(5640*v|0)+5612>>2],p=0;;){if(t=10+(y=0|l[(g=d+16|0)>>2])|0,f=0|l[u>>2],t>>>0>(0|l[s>>2])>>>0){if(!(f=0|Wt(f,t)))break;l[u>>2]=f,l[s>>2]=t}if(nt(f,65396,2),nt(f+2|0,y+8|0,2),nt(f+4|0,0,2),nt(f+6|0,l[d+4>>2]<<8|255&l[d+8>>2]|l[d>>2]<<10,2),nt(f+8|0,0,2),kr(f+10|0,0|l[d+12>>2],0|l[g>>2]),(0|ct(e,0|l[u>>2],t,n))!=(0|t)){A=0,x=41;break}if((p=p+1|0)>>>0>=(0|l[m>>2])>>>0)break t;d=d+20|0}return 41==(0|x)?(w=h,0|A):(Zt(0|l[u>>2]),l[u>>2]=0,l[s>>2]=0,mt(n,1,15464,_),w=h,0|(n=0))}}while(0);_=b+(5640*v|0)+5628|0;t:do{if(0|l[_>>2]){for(t=0|l[b+(5640*v|0)+5624>>2],v=0;;){if(g=(m=(d=0|l[(y=t+4|0)>>2])>>>0>255)?2:1,m=m?32768:0,b=19+(d=0|k(g,d<<1))|0,f=0|l[u>>2],b>>>0>(0|l[s>>2])>>>0){if(!(f=0|Wt(f,b)))break;l[u>>2]=f,l[s>>2]=b}if(nt(f,65397,2),nt(f+2|0,d+17|0,2),nt(f+4|0,0,2),nt(f+6|0,0|l[t>>2],1),nt(f+7|0,0,2),nt(f+9|0,1,2),nt(f+11|0,1,1),nt(f+12|0,l[y>>2]|m,2),f=f+14|0,0|l[y>>2]){p=0;do{nt(f,p,g),f=f+g|0,p=p+1|0,d=0|l[y>>2]}while(p>>>0<d>>>0)}else d=0;if(nt(f,d|m,2),f=f+2|0,0|l[y>>2]){d=0;do{nt(f,d,g),f=f+g|0,d=d+1|0}while(d>>>0<(0|l[y>>2])>>>0);p=f}else p=f;if(f=(255&(1&r[t+16>>0]^1))<<16,(d=0|l[t+8>>2])&&(f=l[d+8>>2]|f),(d=0|l[t+12>>2])&&(f=l[d+8>>2]<<8|f),nt(p,f,3),(0|ct(e,0|l[u>>2],b,n))!=(0|b)){A=0,x=41;break}if((v=v+1|0)>>>0>=(0|l[_>>2])>>>0)break t;t=t+20|0}return 41==(0|x)?(w=h,0|A):(Zt(0|l[u>>2]),l[u>>2]=0,l[s>>2]=0,mt(n,1,15503,a),w=h,0|(n=0))}}while(0);g=0|l[i>>2],m=0|l[o>>2],t=5+(d=0|l[(y=g+(5640*m|0)+5628|0)>>2])|0,f=0|l[u>>2];do{if(t>>>0>(0|l[s>>2])>>>0){if(0|(f=0|Wt(f,t))){l[u>>2]=f,l[s>>2]=t;break}return Zt(0|l[u>>2]),l[u>>2]=0,l[s>>2]=0,mt(n,1,15542,c),w=h,0|(n=0)}}while(0);if(nt(f,65399,2),nt(f+2|0,d+3|0,2),nt(f+4|0,0|l[y>>2],1),0|l[y>>2])for(p=0,d=0|l[g+(5640*m|0)+5624>>2],f=f+5|0;nt(f,0|l[d>>2],1),!((p=p+1|0)>>>0>=(0|l[y>>2])>>>0);)d=d+20|0,f=f+1|0;return n=(0|ct(e,0|l[u>>2],t,n))==(0|t)&1,w=h,0|n},function(t,e,n){return t|=0,n|=0,e=0|ut(e|=0),n=8+(0|l[t+196>>2])|0,l[n>>2]=e,l[n+4>>2]=S,1},function(t,e,n){var i,r;return t|=0,e|=0,n|=0,r=w,w=w+16|0,e=0|Xe(0),l[(i=t+204|0)>>2]=e,e?0|Ke(e,0|l[t+80>>2],t+88|0)?(w=r,0|(n=1)):($e(0|l[i>>2]),l[i>>2]=0,w=r,0|(n=0)):(mt(n,1,15385,r),w=r,0|(n=0))},function(t,e,n){e|=0,n|=0;var i,o,s,c,u,h,f=0,d=0,p=0,g=0,y=0,v=0,b=0,_=0,w=0,A=0,x=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0,U=0,H=0,V=0,W=0,Z=0;if(i=0|l[(c=80+(t|=0)|0)>>2],d=0|l[(Z=t+164|0)>>2],O=0|l[(W=i+24|0)>>2],f=0|l[O>>2],n=0|l[O+4>>2],s=i+16|0,O=0|k(0|l[O+24>>2],0|l[s>>2]),N=0|ut(e),e=0|l[(u=t+116|0)>>2],p=0|l[(h=t+112|0)>>2],o=(+(N>>>0)+4294967296*+(0|S))/+((0|k(p,e))>>>0),N=0==(8&r[t+181>>0])?1:2,0|e){for(M=t+92|0,T=t+100|0,B=t+96|0,R=t+104|0,P=i+4|0,L=i+8|0,D=i+12|0,C=+((0|k(f<<3,n))>>>0),w=0,f=p,n=p;;){if(_=w,w=w+1|0,n){v=0;do{if(I=+Yr[3&N](d),I/=+((y=0|l[d+8>>2])>>>0),x=0|l[M>>2],f=0|l[T>>2],n=(0|(g=(0|k(f,v))+x|0))>(0|(n=0|l[i>>2]))?g:n,g=0|l[B>>2],p=0|l[R>>2],e=(0|(A=(0|k(p,_))+g|0))>(0|(e=0|l[P>>2]))?A:e,f=(0|(x=(0|k(f,v=v+1|0))+x|0))<(0|(f=0|l[L>>2]))?x:f,p=(0|(g=(0|k(p,w))+g|0))<(0|(p=0|l[D>>2]))?g:p,(b=+m[(g=d+20|0)>>2])>0&&(E=+((0|k(0|k(f-n|0,O),p-e|0))>>>0)/(b*C)-I,m[g>>2]=E),y>>>0>1)for(b=+((0|k(0|k(f-n|0,O),p-e|0))>>>0),n=d+24|0,e=1;(E=+m[n>>2])>0&&(m[n>>2]=b/(E*C)-I),!((e=e+1|0)>>>0>=y>>>0);)n=n+4|0;d=d+5640|0,n=0|l[h>>2]}while(v>>>0<n>>>0);x=0|l[u>>2],A=n}else x=e,A=f,n=0;if(w>>>0>=x>>>0)break;f=A,e=x}if(0|x&&(z=o+2,0|A))for(v=0,n=0|l[Z>>2];;){for(_=0,w=n,y=n+16|0;;){if((b=+m[(n=w+20|0)>>2])>0&&(C=b-o,m[n>>2]=C,C<30)&&(m[n>>2]=30),e=w+24|0,g=(n=0|l[w+8>>2])-1|0,d=(b=+m[e>>2])>0,g>>>0>1){p=y+(n<<2)|0,f=1,n=d;do{n&&(C=b-o,m[e>>2]=C,C<10+(H=+m[e+-4>>2]))&&(m[e>>2]=H+20),f=f+1|0,n=(b=+m[(e=e+4|0)>>2])>0}while((0|f)!=(0|g));n&&(F=p,G=b,V=25)}else d&&(F=e,G=b,V=25);if(25==(0|V)&&(V=0,C=G-z,m[F>>2]=C,C<10+(U=+m[F+-4>>2]))&&(m[F>>2]=U+20),w=w+5640|0,(_=_+1|0)>>>0>=A>>>0)break;y=y+5640|0}if((v=v+1|0)>>>0>=x>>>0)break;n=w}}if(d=0|l[s>>2]){for(p=(0|l[t+100>>2])-1|0,g=(0|l[t+104>>2])-1|0,f=0,n=0|l[W>>2],e=0;W=0|l[n>>2],V=0|l[n+4>>2],W=0|k(((g+V|0)>>>0)/(V>>>0)|0,((p+W|0)>>>0)/(W>>>0)|0),f=(0|k(W,0|l[n+24>>2]))+f|0,!((e=e+1|0)>>>0>=d>>>0);)n=n+52|0;T=~~(.1625*+(f>>>0))>>>0}else T=0;if(x=(_=0|l[16+(0|l[c>>2])>>2])-1|0,n=0|l[Z>>2],w=0==(0|(M=0|k(0|l[u>>2],0|l[h>>2]))))d=0;else{for(e=0,f=0,d=n;e=e>>>0>(Z=0|l[d+5588>>2])>>>0?e:Z,(0|(f=f+1|0))!=(0|M);)d=d+5640|0;d=12*e|0}if(((0|a[(A=t+88|0)>>1])-3&65535)>=4){if(0==(0|_)|w)f=6,e=6;else{p=0,e=0;do{y=0|l[n+(5640*p|0)+5584>>2],g=0;do{e=e>>>0>(f=1&l[y+(1080*g|0)>>2]?5+(0|l[y+(1080*g|0)+4>>2])|0:5)>>>0?e:f,g=g+1|0}while((0|g)!=(0|_));p=p+1|0}while((0|p)!=(0|M));e=e+6|0,g=0,f=0;do{v=0|l[n+(5640*g|0)+5584>>2],y=0;do{f=f>>>0>(p=1&l[v+(1080*y|0)>>2]?5+(0|l[v+(1080*y|0)+4>>2])|0:5)>>>0?f:p,y=y+1|0}while((0|y)!=(0|_));g=g+1|0}while((0|g)!=(0|M));f=f+6|0}d=(0|k(f+e|0,x))+d|0}if(w)n=13;else{for(f=0,e=0;f=f>>>0>(Z=0|l[n+420>>2])>>>0?f:Z,(0|(e=e+1|0))!=(0|M);)n=n+5640|0;n=13+(9*f|0)|0}return Z=d+T+n|0,l[t+40>>2]=Z,Z=0|zt(Z),l[t+36>>2]=Z,Z?((0|a[A>>1])-3&65535)>=4?0|(t=1):(n=0|zt(5*(0|l[t+32>>2])|0),l[t+24>>2]=n,n?(l[t+28>>2]=n,0|(t=1)):0|(t=0)):0|(t=0)},function(t,e,n){t|=0,e|=0,n|=0;var i,r,o,a,s,c,u,h,f,d,p,m,g,y,v,b,_,A,x=0,M=0,E=0,T=0,I=0,k=0,C=0,B=0,R=0,P=0,L=0,D=0;if(A=w,w=w+192|0,b=A+152|0,v=A+144|0,y=A+136|0,g=A+128|0,m=A+120|0,d=A+88|0,f=A+80|0,h=A+64|0,u=A+48|0,P=A+40|0,_=A+32|0,D=A+24|0,p=A+16|0,c=A+8|0,i=A+176|0,r=A+168|0,o=A+156|0,!(x=0|Ut(1,1024)))return mt(n,1,17104,A),w=A,0|(D=0);a=i+4|0,s=o+4|0,L=t+100|0,B=x,C=1024;t:for(;8==(0|lt(e,i,8,n));){e:for(;;){switch(it(i,o,4),it(a,s,4),0|l[o>>2]){case 0:if(x=0|ht(e),(0|(R=S))>0|0==(0|R)&x>>>0>4294967287){R=6;break t}l[o>>2]=x+8,T=8;break;case 1:if(8!=(0|lt(e,i,8,n))){R=12;break t}if(it(i,r,4),0|l[r>>2]){R=10;break t}it(a,o,4),T=16;break;default:T=8}if(1785737827==(0|(E=0|l[s>>2]))){R=14;break t}if(!(I=0|l[o>>2])){R=18;break t}if(I>>>0<T>>>0){R=20;break t}n:do{if((0|E)<1718909296){if((0|E)<1668112752){if((0|E)<1667523942){switch(0|E){case 1651532643:break;default:R=43;break n}M=1124,R=30;break}switch(0|E){case 1667523942:break;default:R=43;break n}M=1148,R=30;break}if((0|E)<1668246642){switch(0|E){case 1668112752:break;default:R=43;break n}M=1140,R=30;break}switch(0|E){case 1668246642:break;default:R=43;break n}M=1116,R=30;break}if((0|E)<1783636e3)if((0|E)<1768449138)switch(0|E){case 1718909296:R=27;break e;default:R=43;break n}else switch(0|E){case 1768449138:M=1108,R=30;break n;default:R=43;break n}if((0|E)<1785737832)switch(0|E){case 1783636e3:x=1084,R=29;break e;default:R=43;break n}if((0|E)<1885564018)switch(0|E){case 1785737832:R=28;break e;default:R=43;break n}switch(0|E){case 1885564018:break;default:R=43;break n}M=1132,R=30}while(0);if(30==(0|R)){if(R=0,x=I-T|0,l[u>>2]=E>>>24,l[u+4>>2]=E>>>16&255,l[u+8>>2]=E>>>8&255,l[u+12>>2]=255&E,mt(n,2,17288,u),4&l[L>>2]|0){k=M,E=x;break}if(k=0|l[s>>2],l[h>>2]=k>>>24,l[h+4>>2]=k>>>16&255,l[h+8>>2]=k>>>8&255,l[h+12>>2]=255&k,mt(n,2,17339,h),l[L>>2]=2147483647|l[L>>2],!((0|(k=0|ft(e,x,0,n)))==(0|x)&0==(0|S))){R=32;break t}}else if(43==(0|R)){if(R=0,x=I-T|0,!(1&(M=0|l[L>>2]))){R=44;break t}if(!(2&M)){R=46;break t}if(l[L>>2]=2147483647|M,!((0|(k=0|ft(e,x,0,n)))==(0|x)&0==(0|S))){R=49;break t}}if(8!=(0|lt(e,i,8,n)))break t}if(27==(0|R)?(x=1092,R=29):28==(0|R)&&(x=1100,R=29),29==(0|R)&&(R=0,k=x,E=I-T|0),I=0|ht(e),(0|(T=S))<0|0==(0|T)&I>>>0<E>>>0){R=34;break}if(E>>>0>C>>>0){if(!(x=0|Wt(B,E))){R=37;break}M=E}else x=B,M=C;if((0|lt(e,x,E,n))!=(0|E)){R=39;break}if(!(0|qr[63&l[k+4>>2]](t,x,E,n))){R=42;break}B=x,C=M}switch(0|R){case 6:mt(n,1,17154,c);break;case 10:mt(n,1,17154,p);break;case 12:break;case 14:return 4&(x=0|l[L>>2])?(l[L>>2]=8|x,Zt(B),w=A,0|(D=1)):(mt(n,1,17196,D),Zt(B),w=A,0|(D=0));case 18:return mt(n,1,17224,_),Zt(B),w=A,0|(D=0);case 20:return l[P>>2]=I,l[P+4>>2]=E,mt(n,1,17262,P),Zt(B),w=A,0|(D=0);case 32:return mt(n,1,17405,f),Zt(B),w=A,0|(D=0);case 34:return P=0|l[o>>2],L=0|l[s>>2],D=0|ht(e),l[d>>2]=P,l[d+4>>2]=L>>>24,l[d+8>>2]=L>>>16&255,l[d+12>>2]=L>>>8&255,l[d+16>>2]=255&L,l[d+20>>2]=E,l[d+24>>2]=D,mt(n,1,17455,d),Zt(B),w=A,0|(D=0);case 37:return Zt(B),mt(n,1,17531,m),w=A,0|(D=0);case 39:return mt(n,1,17573,g),Zt(x),w=A,0|(D=0);case 42:return Zt(x),w=A,0|(D=0);case 44:return mt(n,1,17622,y),Zt(B),w=A,0|(D=0);case 46:return mt(n,1,17692,v),Zt(B),w=A,0|(D=0);case 49:return mt(n,1,17405,b),Zt(B),w=A,0|(D=0)}return Zt(B),w=A,0|(D=1)},function(t,e,n){t|=0,n|=0;var i,r,o,a,s=0;return a=w,w=w+32|0,nt(i=a+24|0,s=0|_r(0|(r=0|ut(e|=0)),0|(o=S),0|l[(s=t=t+80|0)>>2],0|l[s+4>>2]),4),nt(i+4|0,1785737827,4),0|dt(e,0|l[t>>2],0|l[t+4>>2],n)?8!=(0|ct(e,i,8,n))?(mt(n,1,19383,a+8|0),w=a,0|(s=0)):0|dt(e,r,o,n)?(w=a,0|(s=1)):(mt(n,1,19383,a+16|0),w=a,0|(s=0)):(mt(n,1,19383,a),w=a,0|(s=0))},function(t,e,n){e|=0,n|=0;var i,r=0,o=0;if(n=(0|l[(t|=0)>>2]?0==(l[t+104>>2]|l[t+100>>2]|0):0)&0!=(0|l[t+8>>2])&0!=(0|l[t+4>>2])&0!=(0|l[t+64>>2])&0!=(0|l[t+16>>2])&0!=(0|l[t+12>>2])&1,!(i=0|l[t+20>>2]))return o=n,t=(t=(t=0|l[(t=t+40|0)>>2])-1|0)>>>0<2,t&=1,e=0|pt(e),e&=o,0|(e&=t);o=0|l[t+72>>2],r=0;do{n&=(126&l[o+(12*r|0)+8>>2])>>>0<38,r=r+1|0}while(r>>>0<i>>>0);return t=(t=(t=0|l[(t=t+40|0)>>2])-1|0)>>>0<2,t&=1,e=0|pt(e),e&=n,0|(e&=t)},function(t,e,n){var i;return t|=0,e|=0,n|=0,t=w,w=w+16|0,nt(i=t,12,4),nt(i+4|0,1783636e3,4),nt(i+8|0,218793738,4),n=12==(0|ct(e,i,12,n))&1,w=t,0|n},function(t,e,n){e|=0,n|=0;var i,r,o,a,s,c=0,u=0;if(s=w,w=w+16|0,u=s+8|0,!(a=0|Ut(1,o=16+(l[(r=64+(t|=0)|0)>>2]<<2)|0)))return mt(n,1,19500,s),w=s,0|(u=0);if(nt(a,o,4),nt(a+4|0,1718909296,4),nt(a+8|0,0|l[t+56>>2],4),nt(a+12|0,0|l[t+60>>2],4),i=a+16|0,0|l[r>>2]){c=t+68|0,t=0;do{nt(i,0|l[(0|l[c>>2])+(t<<2)>>2],4),t=t+1|0}while(t>>>0<(0|l[r>>2])>>>0)}return(t=(0|ct(e,a,o,n))==(0|o))||mt(n,1,19539,u),Zt(a),w=s,0|(u=1&t)},function(t,e,n){t|=0,e|=0,n|=0;var i,r,o,a,s,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0;s=w,w=w+80|0,a=s+16|0,o=s+8|0,r=s,i=s+72|0,h=48+(c=u=s+24|0)|0;do{l[c>>2]=0,c=c+4|0}while((0|c)<(0|h));for(255==(0|l[t+24>>2])?(l[u>>2]=1,c=3,h=2,f=1,d=4):(c=2,h=1,f=0,d=1),l[u+(12*f|0)>>2]=d,l[u+(12*h|0)>>2]=2,0|l[t+116>>2]?(l[u+(12*c|0)>>2]=3,m=c+1|0):m=c,nt(i+4|0,1785737832,4),c=8,h=0,f=u;;){if(d=f+8|0,g=0|Jr[7&l[f>>2]](t,d),l[f+4>>2]=g,!g){p=7;break}if(c=(0|l[d>>2])+c|0,(0|(h=h+1|0))>=(0|m))break;f=f+12|0}if(7==(0|p)){for(mt(n,1,19414,r),h=0,c=u;;){if(0|(u=0|l[c+4>>2])&&Zt(u),(0|(h=h+1|0))>=(0|m)){c=0;break}c=c+12|0}return w=s,0|c}nt(i,c,4);t:do{if(8==(0|ct(e,i,8,n))){for(c=0,h=u;g=h+8|0,(0|(p=0|ct(e,0|l[h+4>>2],0|l[g>>2],n)))==(0|l[g>>2]);){if((0|(c=c+1|0))>=(0|m)){c=1;break t}h=h+12|0}mt(n,1,19457,a),c=0}else mt(n,1,19457,o),c=0}while(0);for(h=0;0|(f=0|l[u+4>>2])&&Zt(f),!((0|(h=h+1|0))>=(0|m));)u=u+12|0;return w=s,0|c},function(t,e,n){var i;return t|=0,n|=0,i=0|ut(e|=0),l[(t=t+88|0)>>2]=i,l[t+4>>2]=S,24==(0|(n=0|ft(e,24,0,n)))&0==(0|S)&1|0},function(t,e,n){var i;return t|=0,n|=0,i=0|ut(e|=0),l[(t=t+80|0)>>2]=i,l[t+4>>2]=S,8==(0|(n=0|ft(e,8,0,n)))&0==(0|S)&1|0},wi,function(t,e,n){t|=0,e|=0,n|=0;var i,o,a,s=0,c=0,u=0,h=0;return o=w,w=w+32|0,s=o,l[(h=o+16|0)>>2]=e,c=h+4|0,a=0|l[(i=t+48|0)>>2],l[c>>2]=n-(0!=(0|a)&1),u=t+44|0,l[h+8>>2]=l[u>>2],l[h+12>>2]=a,l[s>>2]=l[t+60>>2],l[s+4>>2]=h,l[s+8>>2]=2,(0|(s=0|Ai(0|F(145,0|s))))>=1?s>>>0>(h=0|l[c>>2])>>>0&&(c=0|l[u>>2],l[(u=t+4|0)>>2]=c,l[t+8>>2]=c+(s-h),0|l[i>>2]?(l[u>>2]=c+1,r[e+(n+-1)>>0]=0|r[c>>0],s=n):s=n):l[t>>2]=l[t>>2]|48&s^16,w=o,0|s},Or],qr=[Fr,function(t,e,n,i){t|=0,e|=0,n|=0,i|=0;var o,a,s,c,h,f,d,p,m,g,y,v=0,b=0,_=0,A=0,x=0,S=0,M=0,E=0,T=0;if(y=w,w=w+112|0,E=y+88|0,g=y+80|0,S=y+72|0,m=y+64|0,x=y+56|0,f=y+48|0,s=y+40|0,o=y+32|0,_=y+24|0,v=y+16|0,d=y+100|0,M=y+92|0,l[(p=y+96|0)>>2]=0,T=t+200|0,8!=(0|n))return mt(i,1,11669,y),mt(i,1,11669,y+8|0),w=y,0|(T=0);if(it(e,T,2),it(e+2|0,d,4),it(e+6|0,M,1),it(e+7|0,p,1),a=0|l[T>>2],e=0|l[t+112>>2],a>>>0>=(0|k(0|l[t+116>>2],e))>>>0)return l[v>>2]=a,mt(i,1,11695,v),w=y,0|(T=0);n=0|l[t+164>>2],h=(a>>>0)%(e>>>0)|0,c=(a>>>0)/(e>>>0)|0,e=0|l[d>>2];do{if((e+-1|0)>>>0<13){if(12==(0|e)){l[_>>2]=12,mt(i,2,11719,_),e=0|l[d>>2];break}return l[o>>2]=e,mt(i,1,11756,o),w=y,0|(T=0)}}while(0);e||(mt(i,4,11817,s),l[t+72>>2]=1),e=0|l[p>>2];do{if(e){if(b=e+((0|u[t+76>>0])>>>4&1)|0,l[p>>2]=b,((v=0|l[(n=n+(5640*a|0)+5588|0)>>2])-1|0)>>>0<(e=0|l[M>>2])>>>0)return l[f>>2]=e,l[f+4>>2]=v,mt(i,1,11928,f),l[t+72>>2]=1,w=y,0|(T=0);if(e>>>0<b>>>0){l[n>>2]=b,A=18;break}return l[x>>2]=e,l[x+4>>2]=b,mt(i,1,12027,x),l[t+72>>2]=1,w=y,0|(T=0)}0|(e=0|l[n+(5640*a|0)+5588>>2])&&(b=e,A=18)}while(0);if(18==(0|A)&&(0|b)==(1+(0|l[M>>2])|0)&&(r[(x=t+76|0)>>0]=1|r[x>>0]),l[t+24>>2]=0==(0|l[t+72>>2])?(0|l[d>>2])-12|0:0,l[t+8>>2]=16,e=-1==(0|(e=0|l[t+60>>2]))?h>>>0>=(0|l[t+28>>2])>>>0&&h>>>0<(0|l[t+36>>2])>>>0&&c>>>0>=(0|l[t+32>>2])>>>0?(c>>>0>=(0|l[t+40>>2])>>>0&1)<<2&255:4:((0|l[T>>2])!=(0|e)&1)<<2&255,r[(_=t+76|0)>>0]=-5&r[_>>0]|e,!(e=0|l[(_=t+196|0)>>2]))return w=y,0|(T=1);if(b=0|l[T>>2],e=0|l[e+40>>2],l[e+(40*b|0)>>2]=b,v=0|l[M>>2],l[e+(40*b|0)+12>>2]=v,0|(n=0|l[p>>2]))return l[e+(40*b|0)+4>>2]=n,l[e+(40*b|0)+8>>2]=n,(e=0|l[e+(40*b|0)+16>>2])?(e=0|Wt(e,24*n|0),n=(0|l[40+(0|l[_>>2])>>2])+(40*(0|l[T>>2])|0)+16|0,e?(l[n>>2]=e,w=y,0|(T=1)):(Zt(0|l[n>>2]),l[(0|l[40+(0|l[_>>2])>>2])+(40*(0|l[T>>2])|0)+16>>2]=0,mt(i,1,12135,S),w=y,0|(T=0))):(E=0|Ut(n,24),l[(0|l[40+(0|l[_>>2])>>2])+(40*(0|l[T>>2])|0)+16>>2]=E,0|E?(w=y,0|(T=1)):(mt(i,1,12135,m),w=y,0|(T=0)));do{if(!(0|l[e+(40*b|0)+16>>2])){if(l[e+(40*b|0)+8>>2]=10,S=0|Ut(10,24),e=0|l[40+(0|l[_>>2])>>2],n=0|l[T>>2],l[e+(40*n|0)+16>>2]=S,0|S){b=n,v=0|l[M>>2];break}return l[e+(40*n|0)+8>>2]=0,mt(i,1,12135,g),w=y,0|(T=0)}}while(0);return v>>>0<(0|l[(n=e+(40*b|0)+8|0)>>2])>>>0?(w=y,0|(T=1)):(M=v+1|0,l[n>>2]=M,e=0|Wt(0|l[e+(40*b|0)+16>>2],24*M|0),n=(0|l[40+(0|l[_>>2])>>2])+(40*(0|l[T>>2])|0)+16|0,e?(l[n>>2]=e,w=y,0|(T=1)):(Zt(0|l[n>>2]),M=0|l[40+(0|l[_>>2])>>2],T=0|l[T>>2],l[M+(40*T|0)+16>>2]=0,l[M+(40*T|0)+8>>2]=0,mt(i,1,12135,E),w=y,0|(T=0)))},function(t,e,n,i){t|=0,e|=0,n|=0,i|=0;var o,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0;if(o=w,w=w+64|0,m=o+48|0,g=o+40|0,u=o+32|0,c=o+56|0,l[(d=o+52|0)>>2]=n,h=0|l[(y=t+80|0)>>2],f=16==(0|l[(p=t+8|0)>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],1&(s=0|r[(a=f+5636|0)>>0]))return mt(i,1,11436,o),w=o,0|(y=0);if(r[a>>0]=1|s,n>>>0<5)return mt(i,1,11500,o+8|0),w=o,0|(y=0);if(it(e,f,1),(0|l[f>>2])>>>0>7)return mt(i,1,11526,o+16|0),w=o,0|(y=0);if(it(e+1|0,c,1),c=0|l[c>>2],l[(a=f+4|0)>>2]=c,(0|c)>4&&(mt(i,1,11560,o+24|0),l[a>>2]=-1),it(e+2|0,a=f+8|0,2),((a=0|l[a>>2])-1|0)>>>0>65534)return l[u>>2]=a,mt(i,1,11601,u),w=o,0|(y=0);if(u=0|l[t+172>>2],l[f+12>>2]=0==(0|u)?a:u,it(e+4|0,f+16|0,1),u=e+5|0,l[d>>2]=n+-5,0|(c=0|l[h+16>>2])){e=1&l[f>>2],s=0|l[f+5584>>2],a=0;do{l[s+(1080*a|0)>>2]=e,a=a+1|0}while(a>>>0<c>>>0)}if(!(0|ne(t,0,u,d,i)))return mt(i,1,11500,g),w=o,0|(y=0);if(0|l[d>>2])return mt(i,1,11500,m),w=o,0|(y=0);if(a=16==(0|l[p>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],a=0|l[a+5584>>2],f=(s=0|l[(h=a+4|0)>>2])<<2,(0|l[16+(0|l[y>>2])>>2])>>>0<=1)return w=o,0|(y=1);if(t=a+8|0,i=a+12|0,d=a+16|0,p=a+20|0,m=a+812|0,g=a+944|0,l[a+1084>>2]=s,c=0|l[t>>2],l[a+1088>>2]=c,e=0|l[i>>2],l[a+1092>>2]=e,u=0|l[d>>2],l[a+1096>>2]=u,n=0|l[p>>2],l[a+1100>>2]=n,kr(a+1892|0,0|m,0|f),kr(a+2024|0,0|g,0|f),(0|l[16+(0|l[y>>2])>>2])>>>0<=2)return w=o,0|(y=1);if(l[a+2164>>2]=s,l[a+2168>>2]=c,l[a+2172>>2]=e,l[a+2176>>2]=u,l[a+2180>>2]=n,kr(a+2972|0,0|m,0|f),kr(a+3104|0,0|g,0|f),!((0|l[16+(0|l[y>>2])>>2])>>>0>3))return w=o,0|(y=1);for(s=3;;){if(c=0|l[t>>2],e=0|l[i>>2],u=0|l[d>>2],n=0|l[p>>2],l[a+3244>>2]=l[h>>2],l[a+3248>>2]=c,l[a+3252>>2]=e,l[a+3256>>2]=u,l[a+3260>>2]=n,kr(a+4052|0,0|m,0|f),kr(a+4184|0,0|g,0|f),(s=s+1|0)>>>0>=(0|l[16+(0|l[y>>2])>>2])>>>0){a=1;break}a=a+1080|0}return w=o,0|a},function(t,e,n,i){t|=0,e|=0,n|=0,i|=0;var r,o,a,s,c=0,u=0;return s=w,w=w+48|0,u=s+32|0,l[(a=s+28|0)>>2]=n,c=16==(0|l[t+8>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],o=16+(0|l[t+80>>2])|0,(r=(0|l[o>>2])>>>0<257?1:2)>>>0>=n>>>0?(mt(i,1,10929,s),w=s,0|(u=0)):(l[a>>2]=n+-1-r,it(e,u,r),e=e+r|0,(n=0|l[u>>2])>>>0>=(0|l[o>>2])>>>0?(mt(i,1,10955,s+8|0),w=s,0|(u=0)):(it(e,(0|l[c+5584>>2])+(1080*n|0)|0,1),0|ne(t,0|l[u>>2],e+1|0,a,i)?0|l[a>>2]?(mt(i,1,10929,s+24|0),w=s,0|(u=0)):(w=s,0|(u=1)):(mt(i,1,10929,s+16|0),w=s,0|(u=0))))},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s,c=0,u=0;return s=w,w=w+32|0,u=s+8|0,o=s+20|0,(2+(r=(a=0|l[16+(0|l[80+(t|=0)>>2])>>2])>>>0<257?1:2)|0)!=(0|n)?(mt(i,1,10846,s),w=s,0|(u=0)):(c=16==(0|l[t+8>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],it(e,o,r),it(n=e+r|0,s+16|0,1),(t=0|l[o>>2])>>>0<a>>>0?(it(n+1|0,(0|l[c+5584>>2])+(1080*t|0)+808|0,1),w=s,0|(u=1)):(l[u>>2]=t,l[u+4>>2]=a,mt(i,1,10872,u),w=s,0|(u=0)))},function(t,e,n,i){t|=0,e|=0,n|=0,i|=0;var r,o=0,a=0;if(r=w,w=w+16|0,l[(o=r+12|0)>>2]=n,!(0|ee(t,0,e,o,i)))return mt(i,1,10820,r),w=r,0|(a=0);if(0|l[o>>2])return mt(i,1,10820,r+8|0),w=r,0|(a=0);if(e=16==(0|l[t+8>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],e=0|l[e+5584>>2],(0|l[16+(0|l[(i=t+80|0)>>2])>>2])>>>0<=1)return w=r,0|(a=1);for(o=e+24|0,t=e+804|0,a=e+28|0,n=1;;){if(l[e+1104>>2]=l[o>>2],l[e+1884>>2]=l[t>>2],kr(e+1108|0,0|a,776),(n=n+1|0)>>>0>=(0|l[16+(0|l[i>>2])>>2])>>>0){e=1;break}e=e+1080|0}return w=r,0|e},function(t,e,n,i){t|=0,e|=0,n|=0,i|=0;var r,o,a,s,c,u,h=0,f=0,d=0,p=0;u=w,w=w+48|0,p=u+32|0,c=u+24|0,s=u+16|0,f=u+8|0,h=u,r=u+40|0,l[(a=u+36|0)>>2]=n,o=t+80|0;do{if((0|l[16+(0|l[o>>2])>>2])>>>0<257){if(0|n){it(e,r,1),h=-1,d=1;break}return mt(i,1,10473,h),w=u,0|(p=0)}if(n>>>0>=2){it(e,r,2),h=-2,d=2;break}return mt(i,1,10473,f),w=u,0|(p=0)}while(0);return l[a>>2]=h+n,(f=0|l[r>>2])>>>0>=(h=0|l[16+(0|l[o>>2])>>2])>>>0?(l[s>>2]=f,l[s+4>>2]=h,mt(i,1,10499,s),w=u,0|(p=0)):0|ee(t,f,e+d|0,a,i)?0|l[a>>2]?(mt(i,1,10473,p),w=u,0|(p=0)):(w=u,0|(p=1)):(mt(i,1,10473,c),w=u,0|(p=0))},function(t,e,n,i){e|=0,i|=0;var o,a,s,c,u=0,h=0,f=0,d=0,p=0,m=0;if(c=w,w=w+16|0,f=c+8|0,s=c+12|0,0!=(0|((n|=0)>>>0)%((u=5+((a=(m=0|l[16+(0|l[80+(t|=0)>>2])>>2])>>>0<257?1:2)<<1)|0)>>>0))|u>>>0>n>>>0)return mt(i,1,10429,c),w=c,0|(m=0);if(p=16==(0|l[t+8>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],(o=(d=4&(h=0|r[(t=p+5636|0)>>0])?1+(0|l[p+420>>2])|0:0)+((n>>>0)/(u>>>0)|0)|0)>>>0>31)return l[f>>2]=o,mt(i,1,10455,f),w=c,0|(m=0);if(r[t>>0]=4|h,d>>>0<o>>>0)for(h=p+8|0,t=e,n=d,u=p+424+(148*d|0)|0;it(t,u,1),it(t=t+1|0,u+4|0,a),it(t=t+a|0,d=u+8|0,2),f=0|l[d>>2],e=0|l[h>>2],l[d>>2]=f>>>0<e>>>0?f:e,it(t=t+2|0,u+12|0,1),it(t=t+1|0,d=u+16|0,a),it(t=t+a|0,s,1),l[u+36>>2]=l[s>>2],e=0|l[d>>2],l[d>>2]=e>>>0<m>>>0?e:m,!((n=n+1|0)>>>0>=o>>>0);)t=t+1|0,u=u+148|0;return l[p+420>>2]=o+-1,w=c,0|(m=1)},function(t,e,n,i){e|=0,n|=0,i|=0;var o,s,c,u,h,f,d,p,m,g,y,v,b,_,A=0,x=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0,F=0,G=0,z=0;if(_=w,w=w+160|0,z=_+144|0,N=_+136|0,b=_+128|0,v=_+120|0,D=_+112|0,L=_+104|0,p=_+96|0,d=_+80|0,s=_+72|0,o=_+64|0,B=_+56|0,P=_+48|0,R=_+32|0,E=_+24|0,M=_+16|0,A=_+152|0,h=_+148|0,F=0|l[80+(t|=0)>>2],G=t+88|0,n>>>0<36)return mt(i,1,9677,_),w=_,0|(i=0);if(C=((O=n+-36|0)>>>0)/3|0,0|(O>>>0)%3)return mt(i,1,9677,_+8|0),w=_,0|(i=0);if(it(e,A,2),a[G>>1]=l[A>>2],it(e+2|0,f=F+8|0,4),it(e+6|0,y=F+12|0,4),it(e+10|0,F,4),it(e+14|0,I=F+4|0,4),it(e+18|0,u=t+100|0,4),it(e+22|0,g=t+104|0,4),it(e+26|0,c=t+92|0,4),it(e+30|0,m=t+96|0,4),it(e+34|0,A,2),x=e+36|0,(n=0|l[A>>2])>>>0>=16385)return l[M>>2]=n,mt(i,1,9705,M),w=_,0|(i=0);if(n&=65535,l[(O=F+16|0)>>2]=n,(0|n)!=(0|C))return l[E>>2]=n,l[E+4>>2]=C,mt(i,1,9766,E),w=_,0|(i=0);if((E=0|l[F>>2])>>>0<(T=0|l[f>>2])>>>0){if((M=0|l[I>>2])>>>0<(e=0|l[y>>2])>>>0){if(A=0|l[u>>2],n=0|l[g>>2],A){if(n){if((4294967295/(T>>>0)|0)>>>0<e>>>0)return l[B>>2]=T,l[B+4>>2]=e,mt(i,1,10007,B),w=_,0|(i=0);if(R=0|br(0|(T=0|l[c>>2]),0,0|A,0),B=S,P=0|br(0|(I=0|l[m>>2]),0,0|n,0),T>>>0<=E>>>0&&I>>>0<=M>>>0&(0-B|R)>>>0>E>>>0&(0-S|P)>>>0>M>>>0){if(n=0|Ut(C,52),l[(C=F+24|0)>>2]=n,!n)return l[O>>2]=0,mt(i,1,10093,s),w=_,0|(i=0);t:do{if(0|l[O>>2]){for(T=t+168|0,E=n,M=0;;){if(it(x,h,1),e=0|l[h>>2],l[(n=E+24|0)>>2]=1+(127&e),l[E+32>>2]=e>>>7,it(x+1|0,h,1),l[E>>2]=l[h>>2],it(x+2|0,h,1),e=0|l[h>>2],l[E+4>>2]=e,(e+-1|0)>>>0>254|((A=0|l[E>>2])-1|0)>>>0>254){n=26;break}if((e=0|l[n>>2])>>>0>38){n=28;break}if(l[E+36>>2]=0,l[E+40>>2]=l[T>>2],!((n=M+1|0)>>>0<(0|l[O>>2])>>>0))break t;E=E+52|0,x=x+3|0,M=n}return 26==(0|n)?(l[d>>2]=M,l[d+4>>2]=A,l[d+8>>2]=e,mt(i,1,10141,d)):28==(0|n)&&(l[p>>2]=M,l[p+4>>2]=e,mt(i,1,10246,p)),w=_,0|(i=0)}}while(0);if(T=0|l[c>>2],E=0|l[u>>2],x=((0|l[f>>2])-1-T+E|0)/(0|E)|0,l[t+112>>2]=x,M=0|l[m>>2],A=0|l[g>>2],n=((0|l[y>>2])-1-M+A|0)/(0|A)|0,l[t+116>>2]=n,!(0==(0|n)|0==(0|x))&&x>>>0<=(65535/(n>>>0)|0)>>>0){if(I=0|k(x,n),e=t+28|0,2&r[t+76>>0]?(l[e>>2]=(((0|l[e>>2])-T|0)>>>0)/(E>>>0)|0,l[(n=t+32|0)>>2]=(((0|l[n>>2])-M|0)>>>0)/(A>>>0)|0,l[(n=t+36|0)>>2]=((0|l[n>>2])-1-T+E|0)/(0|E)|0,e=n=t+40|0,n=((0|l[n>>2])-1-M+A|0)/(0|A)|0):(l[e>>2]=0,l[t+32>>2]=0,l[t+36>>2]=x,e=t+40|0),l[e>>2]=n,L=0|Ut(I,5640),l[(M=t+164|0)>>2]=L,!L)return mt(i,1,10093,D),w=_,0|(i=0);if(D=0|Ut(0|l[O>>2],1080),l[5584+(0|l[(x=t+12|0)>>2])>>2]=D,!(0|l[5584+(0|l[x>>2])>>2]))return mt(i,1,10093,v),w=_,0|(i=0);if(n=0|Ut(10,20),l[5612+(0|l[x>>2])>>2]=n,n=0|l[x>>2],!(0|l[n+5612>>2]))return mt(i,1,10093,b),w=_,0|(i=0);if(l[n+5620>>2]=10,n=0|Ut(10,20),l[5624+(0|l[x>>2])>>2]=n,n=0|l[x>>2],!(0|l[n+5624>>2]))return mt(i,1,10093,N),w=_,0|(i=0);if(l[n+5632>>2]=10,0|(A=0|l[O>>2])){e=0|l[C>>2],n=0;do{0|l[e+(52*n|0)+32>>2]||(l[(0|l[5584+(0|l[x>>2])>>2])+(1080*n|0)+1076>>2]=1<<(0|l[e+(52*n|0)+24>>2])-1),n=n+1|0}while(n>>>0<A>>>0)}t:do{if(0|I){if(n=0|l[M>>2],N=0|Ut(A,1080),l[n+5584>>2]=N,0|N)for(e=0;;){if((e=e+1|0)>>>0>=I>>>0)break t;if(N=0|Ut(0|l[O>>2],1080),l[n+11224>>2]=N,!N)break;n=n+5640|0}return mt(i,1,10093,z),w=_,0|(i=0)}}while(0);return l[t+8>>2]=4,function(t,e){t|=0;var n,i=0,r=0,o=0,a=0,s=0,c=0,u=0,h=0,f=0,d=0,p=0;if(i=0|l[4+(e|=0)>>2],r=0|l[t>>2],a=0|l[e+8>>2],s=0|l[t+4>>2],o=0|l[e+12>>2],h=(0|k((0|l[e+24>>2])-1|0,o))+i|0,c=0|l[e+16>>2],u=(0|k((0|l[e+28>>2])-1|0,c))+a|0,e=0|br(0|h,0,0|o,0),e|=0-S,o=0|l[t+8>>2],c=0|br(0|u,0,0|c,0),c|=0-S,u=0|l[t+12>>2],h=0|l[t+16>>2])for(n=(i>>>0>r>>>0?i:r)+-1|0,a=(a>>>0>s>>>0?a:s)+-1|0,o=(e>>>0<o>>>0?e:o)+-1|0,r=(c>>>0<u>>>0?c:u)+-1|0,i=0,e=0|l[t+24>>2];u=((n+(s=0|l[e>>2])|0)>>>0)/(s>>>0)|0,t=((a+(p=0|l[e+4>>2])|0)>>>0)/(p>>>0)|0,d=0|Tr(1,0,0|(c=0|l[e+40>>2])),f=S,s=0|Er(0|(s=0|br(0|(s=0|br((((o+s|0)>>>0)/(s>>>0)|0)-u|0,0,-1,-1)),0|S,0|d,0|f)),0|S,0|c),c=0|Er(0|(f=0|br(0|(p=0|br((((r+p|0)>>>0)/(p>>>0)|0)-t|0,0,-1,-1)),0|S,0|d,0|f)),0|S,0|c),l[e+8>>2]=s,l[e+12>>2]=c,l[e+16>>2]=u,l[e+20>>2]=t,!((i=i+1|0)>>>0>=h>>>0);)e=e+52|0}(F,G),w=_,0|(i=1)}return l[L>>2]=x,l[L+4>>2]=n,mt(i,1,10346,L),w=_,0|(i=0)}return mt(i,1,10049,o),w=_,0|(i=0)}n=0}return l[P>>2]=A,l[P+4>>2]=n,mt(i,1,9946,P),w=_,0|(i=0)}n=M}else e=0|l[y>>2],n=0|l[I>>2];return t=0|_r(0|T,0,0|E,0),F=S,G=0|_r(0|e,0,0|n,0),l[(z=R)>>2]=t,l[z+4>>2]=F,l[(z=R+8|0)>>2]=G,l[z+4>>2]=S,mt(i,1,9880,R),w=_,0|(i=0)},function(t,e,n,i){var r;return t|=0,e|=0,i|=0,r=w,w=w+32|0,t=r+12|0,(n|=0)>>>0<2?(mt(i,1,9651,r),w=r,0|(i=0)):(it(e,r+16|0,1),it(e+1|0,t,1),((n+-2|0)>>>0)%((2+((e=0|l[t>>2])>>>5&2)+(e>>>4&3)|0)>>>0)|0?(mt(i,1,9651,r+8|0),w=r,0|(i=0)):(w=r,0|(i=1)))},function(t,e,n,i){return t|=0,e|=0,i|=0,e=w,w=w+16|0,(n|=0)?t=1:(mt(i,1,9625,e),t=0),w=e,0|t},function(t,e,n,i){t|=0,e|=0,i|=0;var r,o,a,s,c=0;if(s=w,w=w+32|0,a=s+8|0,o=s+12|0,!(n|=0))return mt(i,1,9599,s),w=s,0|(i=0);if(it(e,s+16|0,1),!(r=n+-1|0))return w=s,0|(i=1);c=0,t=e,n=0;do{it(t=t+1|0,o,1),c=0==(128&(e=0|l[o>>2])|0)?0:(127&e|c)<<7,n=n+1|0}while((0|n)!=(0|r));return c?(mt(i,1,9599,a),w=s,0|(i=0)):(w=s,0|(i=1))},function(t,e,n,i){t|=0,e|=0,i|=0;var o,a,s,c,u,h,f=0,d=0,p=0;if(h=w,w=w+48|0,p=h+32|0,s=h+24|0,o=h+16|0,f=h+8|0,u=h+36|0,(n|=0)>>>0<2)return mt(i,1,9551,h),w=h,0|(p=0);r[(d=t+184|0)>>0]=1|r[d>>0],it(e,u,1),d=e+1|0,c=n+-1|0,n=0|l[(a=t+124|0)>>2];do{if(!n){if(n=0|Ut(e=1+(0|l[u>>2])|0,8),l[a>>2]=n,0|n){l[t+120>>2]=e;break}return mt(i,1,8618,f),w=h,0|(p=0)}if(f=t+120|0,e=0|l[u>>2],(0|l[f>>2])>>>0<=e>>>0){if(0|(e=0|Wt(n,(t=e+1|0)<<3))){l[a>>2]=e,Cr(e+((n=0|l[f>>2])<<3)|0,0,t-n<<3|0),l[f>>2]=t,n=0|l[a>>2];break}return mt(i,1,8618,o),w=h,0|(p=0)}}while(0);return e=0|l[u>>2],0|l[n+(e<<3)>>2]?(l[s>>2]=e,mt(i,1,9577,s),w=h,0|(p=0)):(t=0|zt(c),n=0|l[a>>2],e=0|l[u>>2],l[n+(e<<3)>>2]=t,t?(l[n+(e<<3)+4>>2]=c,kr(0|t,0|d,0|c),w=h,0|(p=1)):(mt(i,1,8618,p),w=h,0|(p=0)))},function(t,e,n,i){t|=0,e|=0,i|=0;var o,a,s,c,u,h,f,d,p=0,m=0,g=0;if(d=w,w=w+48|0,g=d+40|0,h=d+32|0,s=d+24|0,a=d+16|0,f=d+44|0,(n|=0)>>>0<2)return mt(i,1,9364,d),w=d,0|(g=0);if(1&r[t+184>>0])return mt(i,1,9390,d+8|0),w=d,0|(g=0);o=0|l[t+164>>2],p=0|l[t+200>>2],r[(m=o+(5640*p|0)+5636|0)>>0]=2|r[m>>0],it(e,f,1),m=e+1|0,u=n+-1|0,e=0|l[(c=o+(5640*p|0)+5164|0)>>2];do{if(!e){if(e=0|Ut(t=1+(0|l[f>>2])|0,8),l[c>>2]=e,0|e){l[o+(5640*p|0)+5160>>2]=t;break}return mt(i,1,9491,a),w=d,0|(g=0)}if(p=o+(5640*p|0)+5160|0,t=0|l[f>>2],(0|l[p>>2])>>>0<=t>>>0){if(0|(t=0|Wt(e,(n=t+1|0)<<3))){l[c>>2]=t,Cr(t+((e=0|l[p>>2])<<3)|0,0,n-e<<3|0),l[p>>2]=n,e=0|l[c>>2];break}return mt(i,1,9491,s),w=d,0|(g=0)}}while(0);return t=0|l[f>>2],0|l[e+(t<<3)>>2]?(l[h>>2]=t,mt(i,1,9529,h),w=d,0|(g=0)):(n=0|zt(u),e=0|l[c>>2],t=0|l[f>>2],l[e+(t<<3)>>2]=n,n?(l[e+(t<<3)+4>>2]=u,kr(0|n,0|m,0|u),w=d,0|(g=1)):(mt(i,1,9491,g),w=d,0|(g=0)))},function(t,e,n,i){return e|=0,n|=0,i|=0,e=w,w=w+16|0,(l[16+(0|l[80+(t|=0)>>2])>>2]<<2|0)==(0|n)?(w=e,0|(i=1)):(mt(i,1,9338,e),w=e,0|(i=0))},function(t,e,n,i){return 1},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s,c,u,h,f=0,d=0,p=0,m=0,g=0,y=0;if(h=w,w=w+48|0,y=h+40|0,u=h+32|0,o=h+24|0,c=h+44|0,m=16==(0|l[8+(t|=0)>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],n>>>0<2)return mt(i,1,9170,h),w=h,0|(y=0);if(it(e,c,2),0|l[c>>2])return mt(i,2,9196,h+8|0),w=h,0|(y=1);if(n>>>0<7)return mt(i,1,9170,h+16|0),w=h,0|(y=0);it(e+2|0,c,2),s=e+4|0,g=255&l[c>>2],f=0|l[(r=m+5612|0)>>2],t=0|l[(a=m+5616|0)>>2];t:do{if(t){d=f,p=0;do{if((0|l[d+8>>2])==(0|g))break t;d=d+20|0,p=p+1|0}while(p>>>0<t>>>0)}else d=f,p=0}while(0);if((0|p)==(0|t)){d=m+5620|0;do{if((0|t)==(0|l[d>>2])){if(t=t+10|0,l[d>>2]=t,0|(t=0|Wt(f,20*t|0))){l[r>>2]=t,Cr(t+(20*(f=0|l[a>>2])|0)|0,0,20*((0|l[d>>2])-f|0)|0),f=0|l[r>>2],t=0|l[a>>2];break}return Zt(0|l[r>>2]),l[r>>2]=0,l[d>>2]=0,l[a>>2]=0,mt(i,1,9256,o),w=h,0|(y=0)}}while(0);l[a>>2]=t+1,d=f+(20*t|0)|0}return 0|(t=0|l[(p=d+12|0)>>2])&&(Zt(t),l[p>>2]=0),l[d+8>>2]=g,g=0|l[c>>2],l[d+4>>2]=g>>>8&3,l[d>>2]=g>>>10&3,it(s,c,2),0|l[c>>2]?(mt(i,2,9294,u),w=h,0|(y=1)):(f=0|zt(t=n+-6|0),l[p>>2]=f,f?(kr(0|f,e+6|0,0|t),l[d+16>>2]=t,w=h,0|(y=1)):(mt(i,1,9170,y),w=h,0|(y=0)))},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s=0;if(a=w,w=w+32|0,r=a+16|0,s=a+12|0,(2+(o=0|l[16+(0|l[(t=80+(t|=0)|0)>>2])>>2])|0)!=(0|n))return mt(i,1,9144,a),w=a,0|(s=0);if(it(e,r,2),(0|l[r>>2])!=(0|o))return mt(i,1,9144,a+8|0),w=a,0|(s=0);if(!o)return w=a,0|(s=1);for(i=0,n=e+2|0,t=0|l[24+(0|l[t>>2])>>2];;){if(it(n,s,1),e=0|l[s>>2],l[t+32>>2]=e>>>7&1,l[t+24>>2]=1+(127&e),(0|(i=i+1|0))==(0|o)){t=1;break}n=n+1|0,t=t+52|0}return w=a,0|t},function(t,e,n,i){e|=0,n|=0,i|=0;var o,a,s,c,u,h,f,d,p,m,g,y,v,b,_,A=0,x=0,S=0,M=0,E=0,T=0,I=0,C=0,B=0,R=0,P=0,L=0,D=0,N=0,O=0;if(_=w,w=w+144|0,O=_+120|0,b=_+112|0,v=_+104|0,y=_+96|0,g=_+88|0,m=_+80|0,p=_+72|0,d=_+64|0,f=_+56|0,h=_+48|0,B=_+40|0,C=_+32|0,T=_+24|0,o=_+136|0,a=_+132|0,s=_+128|0,c=_+124|0,R=16==(0|l[8+(t|=0)>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],n>>>0<2)return mt(i,1,8804,_),w=_,0|(O=0);if(it(e,o,2),0|l[o>>2])return mt(i,2,8830,_+8|0),w=_,0|(O=1);if(n>>>0<7)return mt(i,1,8804,_+16|0),w=_,0|(O=0);it(e+2|0,a,1),I=e+3|0,A=0|l[(E=R+5624|0)>>2],t=0|l[(u=R+5628|0)>>2];t:do{if(t){M=0|l[a>>2],S=A,x=0;do{if((0|l[S>>2])==(0|M))break t;S=S+20|0,x=x+1|0}while(x>>>0<t>>>0)}else S=A,x=0}while(0);if((0|x)==(0|t)){x=R+5632|0;do{if((0|t)==(0|l[x>>2])){if(t=t+10|0,l[x>>2]=t,0|(t=0|Wt(A,20*t|0))){l[E>>2]=t,Cr(t+(20*(A=0|l[u>>2])|0)|0,0,20*((0|l[x>>2])-A|0)|0),A=0|l[E>>2],t=0|l[u>>2];break}return Zt(0|l[E>>2]),l[E>>2]=0,l[x>>2]=0,l[u>>2]=0,mt(i,1,8876,T),w=_,0|(O=0)}}while(0);N=1,x=A+(20*t|0)|0}else N=0,x=S;if(l[x>>2]=l[a>>2],it(I,o,2),0|l[o>>2])return mt(i,2,8830,C),w=_,0|(O=1);if(it(e+5|0,s,2),(A=0|l[s>>2])>>>0>1)return mt(i,2,8914,B),w=_,0|(O=1);t=n+-7|0;t:do{if(A){P=x+4|0,L=x+16|0,D=x+8|0,n=x+12|0,B=R+5612|0,C=R+5616|0,T=e+7|0,I=0;e:for(;;){if(t>>>0<3){A=27;break}if(it(T,o,1),1!=(0|l[o>>2])){A=29;break}if(it(T+1|0,c,2),A=t+-3|0,M=1+((S=0|l[c>>2])>>>15)|0,S&=32767,l[P>>2]=S,A>>>0<(x=2+(0|k(M,S))|0)>>>0){A=31;break}if(t=T+3|0,E=A-x|0,S){A=0;do{if(it(t,o,M),(0|l[o>>2])!=(0|A)){A=34;break e}t=t+M|0,A=A+1|0}while(A>>>0<(0|l[P>>2])>>>0)}if(it(t,c,2),A=t+2|0,S=1+((x=0|l[c>>2])>>>15)|0,x&=32767,l[c>>2]=x,(0|x)!=(0|l[P>>2])){A=37;break}if(E>>>0<(t=3+(0|k(S,x))|0)>>>0){A=39;break}if(t=E-t|0,x){x=0;do{if(it(A,o,S),(0|l[o>>2])!=(0|x)){A=42;break e}A=A+S|0,x=x+1|0}while(x>>>0<(0|l[P>>2])>>>0)}if(it(A,o,3),T=A+3|0,S=0|l[o>>2],r[L>>0]=1&(S>>>16^1)|-2&r[L>>0],l[D>>2]=0,l[n>>2]=0,M=255&S,l[a>>2]=M,0|M){if(!(E=0|l[C>>2])){A=50;break}for(A=0|l[B>>2],x=0;(0|l[A+8>>2])!=(0|M);){if((x=x+1|0)>>>0>=E>>>0){A=50;break e}A=A+20|0}l[D>>2]=A}if(S=S>>>8&255,l[a>>2]=S,0|S){if(!(M=0|l[C>>2])){A=57;break}for(A=0|l[B>>2],x=0;(0|l[A+8>>2])!=(0|S);){if((x=x+1|0)>>>0>=M>>>0){A=57;break e}A=A+20|0}l[n>>2]=A}if((I=I+1|0)>>>0>=(0|l[s>>2])>>>0)break t}if(27==(0|A))return mt(i,1,8804,h),w=_,0|(O=0);if(29==(0|A))return mt(i,2,8958,f),w=_,0|(O=1);if(31==(0|A))return mt(i,1,8804,d),w=_,0|(O=0);if(34==(0|A))return mt(i,2,9024,p),w=_,0|(O=1);if(37==(0|A))return mt(i,2,9078,m),w=_,0|(O=1);if(39==(0|A))return mt(i,1,8804,g),w=_,0|(O=0);if(42==(0|A))return mt(i,2,9024,y),w=_,0|(O=1);if(50==(0|A))return mt(i,1,8804,v),w=_,0|(O=0);if(57==(0|A))return mt(i,1,8804,b),w=_,0|(O=0)}}while(0);return 0|t?(mt(i,1,8804,O),w=_,0|(O=0)):N?(l[u>>2]=1+(0|l[u>>2]),w=_,0|(O=1)):(w=_,0|(O=1))},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s,c,u,h,f=0,d=0,p=0,m=0,g=0,y=0;if(h=w,w=w+32|0,c=h+24|0,u=h+20|0,f=0|l[(y=80+(t|=0)|0)>>2],d=16==(0|l[t+8>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],!n)return mt(i,1,8723,h),w=h,0|(y=0);if(it(e,u,1),(t=0|l[u>>2])>>>0>1)return mt(i,2,8749,h+8|0),w=h,0|(y=1);if((t+1|0)!=(0|n))return mt(i,2,8723,h+16|0),w=h,0|(y=0);if(s=d+5584|0,0|(f=0|l[f+16>>2]))for(n=0|l[s>>2],i=0;l[n+1076>>2]=0,!((i=i+1|0)>>>0>=f>>>0);)n=n+1080|0;if((n=0|l[(a=d+5604|0)>>2])&&(Zt(n),l[a>>2]=0,t=0|l[u>>2]),!t)return w=h,0|(y=1);for(o=d+5624|0,r=d+5628|0,p=0;;){if(it(e=e+1|0,c,1),t=0|l[y>>2],f=0|l[o>>2],0|l[r>>2]&&(0|l[f>>2])==(0|l[c>>2])&&(0|(m=0|l[f+4>>2]))==(0|l[(g=t+16|0)>>2])){if(0|(t=0|l[f+8>>2])){if(n=0|k(m,m),d=0|k(0|l[1036+(l[t>>2]<<2)>>2],n),(0|l[t+16>>2])!=(0|d)){t=0,n=32;break}if(i=0|zt(n<<2),l[a>>2]=i,!i){t=0,n=32;break}ro[15&l[1052+(l[t>>2]<<2)>>2]](0|l[t+12>>2],i,n)}if(0|(t=0|l[f+12>>2])){if(n=0|l[g>>2],d=0|k(n,0|l[1036+(l[t>>2]<<2)>>2]),(0|l[t+16>>2])!=(0|d)){t=0,n=32;break}if(!(d=0|zt(n<<2))){t=0,n=32;break}if(ro[15&l[1068+(l[t>>2]<<2)>>2]](0|l[t+12>>2],d,n),0|(f=0|l[g>>2]))for(t=d,n=0|l[s>>2],i=0;l[n+1076>>2]=l[t>>2],(0|(i=i+1|0))!=(0|f);)t=t+4|0,n=n+1080|0;Zt(d)}}if((p=p+1|0)>>>0>=(0|l[u>>2])>>>0){t=1,n=32;break}}return 32==(0|n)?(w=h,0|t):0},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o=0;return r=w,w=w+32|0,o=r+20|0,0|l[(t=100+(t|=0)|0)>>2]?(mt(i,1,19251,r),w=r,0|(o=0)):4!=(0|n)?(mt(i,1,19305,r+8|0),w=r,0|(o=0)):(it(e,o,4),218793738==(0|l[o>>2])?(l[t>>2]=1|l[t>>2],w=r,0|(o=1)):(mt(i,1,19339,r+16|0),w=r,0|(o=0)))},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s=0;if(a=w,w=w+32|0,o=a+24|0,1!=(0|l[(s=100+(t|=0)|0)>>2]))return mt(i,1,19132,a),w=a,0|(s=0);if(n>>>0<8)return mt(i,1,19182,a+8|0),w=a,0|(s=0);if(it(e,t+56|0,4),it(e+4|0,t+60|0,4),e=e+8|0,3&(n=n+-8|0)|0)return mt(i,1,19182,a+16|0),w=a,0|(s=0);if(n>>>=2,l[(r=t+64|0)>>2]=n,0|n){if(n=0|Ut(n,4),l[t+68>>2]=n,!n)return mt(i,1,19218,o),w=a,0|(s=0);if(0|l[r>>2])for(t=t+68|0,n=0;it(e,(0|l[t>>2])+(n<<2)|0,4),!((n=n+1|0)>>>0>=(0|l[r>>2])>>>0);)e=e+4|0}return l[s>>2]=2|l[s>>2],w=a,0|(s=1)},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s,c,u,h,f,d,p,m,g,y,v=0,b=0,_=0,A=0,x=0,S=0,M=0;if(y=w,w=w+96|0,d=y+72|0,f=y+64|0,h=y+56|0,u=y+48|0,M=y+40|0,g=y+32|0,m=y+24|0,p=y+16|0,c=y+8|0,o=y+80|0,a=y+76|0,!(2&l[(s=100+(t|=0)|0)>>2]))return mt(i,1,18800,y),w=y,0|(M=0);l[(r=t+104|0)>>2]=0;do{if(0|n){A=0;t:for(;;){if(n>>>0<8){_=6;break}switch(it(e,o,4),v=0|l[o>>2],it(e+4|0,o,4),S=0|l[o>>2],0|v){case 0:_=15;break t;case 1:if(n>>>0<16){_=9;break t}if(it(e+8|0,a,4),0|l[a>>2]){_=11;break t}if(it(e+12|0,o,4),!(v=0|l[o>>2])){_=13;break t}x=16;break;default:x=8}if(v>>>0<x>>>0){_=17;break}if(n>>>0<v>>>0){_=20;break}e:do{if((0|S)<1668246642){if((0|S)<1667523942){switch(0|S){case 1651532643:break;default:_=28;break e}b=1124,_=27;break}if((0|S)<1668112752){switch(0|S){case 1667523942:break;default:_=28;break e}b=1148,_=27;break}switch(0|S){case 1668112752:break;default:_=28;break e}b=1140,_=27;break}if((0|S)<1768449138){switch(0|S){case 1668246642:break;default:_=28;break e}b=1116,_=27;break}if((0|S)<1885564018)switch(0|S){case 1768449138:b=1108,_=27;break e;default:_=28;break e}switch(0|S){case 1885564018:break;default:_=28;break e}b=1132,_=27}while(0);if(27==(0|_)){if(!(0|qr[63&l[b+4>>2]](t,e+x|0,v-x|0,i))){e=0,_=33;break}}else 28==(0|_)&&(l[r>>2]=2147483647|l[r>>2]);if(A=1768449138==(0|S)?1:A,!(n=n-v|0)){_=30;break}e=e+v|0}if(6==(0|_))mt(i,1,18845,c);else if(9==(0|_))mt(i,1,18885,p);else if(11==(0|_))mt(i,1,17154,m);else if(13==(0|_))mt(i,1,17224,g);else if(15==(0|_))mt(i,1,17224,M);else if(17==(0|_))mt(i,1,18929,u);else{if(20==(0|_))return mt(i,1,19001,f),w=y,0|(M=0);if(30==(0|_)){if(!A)break;return l[s>>2]=4|l[s>>2],w=y,0|(M=1)}if(33==(0|_))return w=y,0|e}return mt(i,1,18958,h),w=y,0|(M=0)}}while(0);return mt(i,1,19073,d),w=y,0|(M=0)},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a=0;return o=w,w=w+48|0,a=o+32|0,0|l[(r=72+(t|=0)|0)>>2]?(mt(i,2,18543,o),w=o,0|(a=1)):14!=(0|n)?(mt(i,1,18591,o+8|0),w=o,0|(a=0)):(it(e,t+16|0,4),it(e+4|0,t+12|0,4),it(e+8|0,n=t+20|0,2),((n=0|l[n>>2])-1|0)>>>0>16383?(mt(i,1,18624,o+16|0),w=o,0|(a=0)):(n=0|Ut(n,12),l[r>>2]=n,n?(it(e+10|0,t+24|0,1),it(e+11|0,n=t+28|0,1),7!=(0|(n=0|l[n>>2]))&&(l[a>>2]=n,mt(i,4,18710,a)),it(e+12|0,t+32|0,1),it(e+13|0,t+36|0,1),w=o,0|(a=1)):(mt(i,1,18661,o+24|0),w=o,0|(a=0))))},function(t,e,n,i){t|=0,e|=0,i|=0;var o,a,s,c,u,h,f,d,p,m,g=0,y=0,v=0,b=0,_=0,A=0,x=0,S=0;if(m=w,w=w+96|0,v=m+48|0,a=m+40|0,A=m+32|0,_=m+24|0,b=m+16|0,x=m+80|0,o=m+76|0,u=m+72|0,s=m+68|0,h=m+64|0,c=m+60|0,f=m+56|0,d=m+52|0,(n|=0)>>>0<3)return mt(i,1,18186,m),w=m,0|(S=0);if(p=t+108|0,0|r[(S=t+124|0)>>0])return mt(i,4,18218,m+8|0),w=m,0|(S=1);switch(it(e,y=t+40|0,1),it(e+1|0,t+52|0,1),it(e+2|0,t+44|0,1),g=e+3|0,0|(y=0|l[y>>2])){case 1:if(n>>>0<7)return l[b>>2]=n,mt(i,1,18327,b),w=m,0|(S=0);if(y=t+48|0,7!=(0|n)&&14!=(0|l[y>>2])&&(l[_>>2]=n,mt(i,2,18327,_)),it(g,y,4),v=e+7|0,14==(0|l[y>>2])){if(!(x=0|zt(36)))return mt(i,1,18363,A),w=m,0|(S=0);switch(l[x>>2]=14,l[f>>2]=0,l[h>>2]=0,l[u>>2]=0,l[c>>2]=0,l[s>>2]=0,l[o>>2]=0,l[d>>2]=4470064,l[(g=x+4|0)>>2]=1145390592,0|n){case 35:it(v,o,4),it(e+11|0,u,4),it(e+15|0,s,4),it(e+19|0,h,4),it(e+23|0,c,4),it(e+27|0,f,4),it(e+31|0,d,4),l[g>>2]=0,e=0|l[o>>2],A=0|l[s>>2],_=0|l[c>>2],b=0|l[u>>2],v=0|l[h>>2],y=0|l[f>>2],g=0|l[d>>2];break;case 7:e=0,A=0,_=0,b=0,v=0,y=0,g=4470064;break;default:l[a>>2]=n,mt(i,2,18393,a),e=0,A=0,_=0,b=0,v=0,y=0,g=4470064}l[x+8>>2]=e,l[x+16>>2]=A,l[x+24>>2]=_,l[x+12>>2]=b,l[x+20>>2]=v,l[x+28>>2]=y,l[x+32>>2]=g,l[p>>2]=x,l[t+112>>2]=0}return r[S>>0]=1,w=m,0|(S=1);case 2:if(v=n+-3|0,l[(y=t+112|0)>>2]=v,t=0|Ut(1,v),l[p>>2]=t,!t)return l[y>>2]=0,w=m,0|(S=0);if((0|n)>3)for(y=0;it(g,x,1),r[(0|l[p>>2])+y>>0]=l[x>>2],(0|(y=y+1|0))!=(0|v);)g=g+1|0;return r[S>>0]=1,w=m,0|(S=1);default:return y>>>0<=2?(w=m,0|(S=1)):(l[v>>2]=y,mt(i,4,18437,v),w=m,0|(S=1))}return 0},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o=0,a=0,s=0;if(r=w,w=w+16|0,a=r,255!=(0|(o=0|l[24+(t|=0)>>2]))&&(l[a>>2]=o,mt(i,2,18040,a)),(0|l[(s=t+20|0)>>2])!=(0|n))return mt(i,1,18154,r+8|0),w=r,0|(s=0);if(!n)return w=r,0|(s=1);for(a=t+72|0,o=0;;){if(it(e,(0|l[a>>2])+(12*o|0)+8|0,1),(o=o+1|0)>>>0>=(0|l[s>>2])>>>0){e=1;break}e=e+1|0}return w=r,0|e},function(t,e,n,i){e|=0,i|=0;var o,s,c,h,f,d=0,p=0,m=0,g=0,y=0;if(f=w,w=w+16|0,d=f,y=f+12|0,(n|=0)>>>0<3|0!=(0|l[(p=120+(t|=0)|0)>>2]))return w=f,0|(y=0);if(it(e,y,2),((h=65535&(m=0|l[y>>2]))-1|0)>>>0>1023)return l[d>>2]=h,mt(i,1,17957,d),w=f,0|(y=0);if(it(e+2|0,y,1),!(c=65535&l[y>>2]))return mt(i,1,17995,f+8|0),w=f,0|(y=0);if((c+3|0)>>>0>n>>>0)return w=f,0|(y=0);if(!(o=0|zt(0|k(h<<2,c))))return w=f,0|(y=0);if(!(s=0|zt(c)))return Zt(o),w=f,0|(y=0);if(!(g=0|zt(c)))return Zt(o),Zt(s),w=f,0|(y=0);if(!(t=0|zt(20)))return Zt(o),Zt(s),Zt(g),w=f,0|(y=0);l[t+4>>2]=g,l[t+8>>2]=s,l[t>>2]=o,a[t+16>>1]=m,r[t+18>>0]=l[y>>2],l[t+12>>2]=0,l[p>>2]=t,t=0,i=e+3|0,d=0;do{it(i,y,1),i=i+1|0,r[s+d>>0]=1+(127&l[y>>2]),r[g+d>>0]=(0|l[y>>2])>>>7&1,d=65535&(t=t+1<<16>>16)}while(c>>>0>d>>>0);if(!h)return w=f,0|(y=1);g=e,m=0,d=o,t=i;t:for(;;){p=0,i=t,t=0;do{if((i-g+(t=(t=(7+(0|u[s+t>>0])|0)>>>3)>>>0<4?t:4)|0)>(0|n)){t=0,d=22;break t}it(i,y,t),i=i+t|0,l[d>>2]=l[y>>2],d=d+4|0,t=65535&(p=p+1<<16>>16)}while(c>>>0>t>>>0);if(h>>>0<=(65535&(m=m+1<<16>>16))>>>0){t=1,d=22;break}t=i}return 22==(0|d)?(w=f,0|t):0},function(t,e,n,i){e|=0,n|=0,i|=0;var o,s,c,u=0,h=0;if(c=w,w=w+32|0,h=c+20|0,!(t=0|l[(s=120+(t|=0)|0)>>2]))return mt(i,1,17847,c),w=c,0|(h=0);if(0|l[t+12>>2])return mt(i,1,17893,c+8|0),w=c,0|(h=0);if((t=(o=255&(u=0|r[t+18>>0]))<<2)>>>0>n>>>0)return mt(i,1,17924,c+16|0),w=c,0|(h=0);if(!(n=0|zt(t)))return w=c,0|(h=0);if(u<<24>>24)for(t=e,u=0;it(t,h,2),a[n+(u<<2)>>1]=l[h>>2],it(t+2|0,h,1),r[n+(u<<2)+2>>0]=l[h>>2],it(t+3|0,h,1),r[n+(u<<2)+3>>0]=l[h>>2],(0|(u=u+1|0))!=(0|o);)t=t+4|0;return l[12+(0|l[s>>2])>>2]=n,w=c,0|(h=1)},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,s=0,c=0;if(o=w,w=w+32|0,c=o+20|0,0|l[(r=116+(t|=0)|0)>>2])return w=o,0|(c=0);if(n>>>0<2)return mt(i,1,17753,o),w=o,0|(c=0);if(it(e,c,2),!(t=65535&(s=0|l[c>>2])))return mt(i,1,17786,o+8|0),w=o,0|(c=0);if((2+(6*t|0)|0)>>>0>n>>>0)return mt(i,1,17753,o+16|0),w=o,0|(c=0);if(!(s=0|zt(6*s|0)))return w=o,0|(c=0);if(t=0|zt(8),l[r>>2]=t,!t)return Zt(s),w=o,0|(c=0);if(l[t>>2]=s,i=65535&l[c>>2],a[t+4>>1]=i,!(i<<16>>16))return w=o,0|(c=1);t=0;do{i=65535&t,it(e+2|0,c,2),a[s+(6*i|0)>>1]=l[c>>2],it(e+4|0,c,2),e=e+6|0,a[s+(6*i|0)+2>>1]=l[c>>2],it(e,c,2),a[s+(6*i|0)+4>>1]=l[c>>2],t=t+1<<16>>16}while((65535&t)<(0|f[4+(0|l[r>>2])>>1]));return w=o,0|(e=1)},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s,c=0,u=0,h=0,f=0,d=0,p=0,m=0;if(s=w,w=w+16|0,m=s+8|0,r=s,8&l[(a=68+(t|=0)|0)>>2]|0)return S=m=-1,w=s,0|(t=-1);c=0|l[(d=t+32|0)>>2],l[(o=t+36|0)>>2]=c,u=0|l[(h=t+48|0)>>2];do{if(u){for(f=t+20|0;-1!=(0|(u=0|Qr[63&l[f>>2]](c,u,0|l[t>>2])));)if(c=(0|l[o>>2])+u|0,l[o>>2]=c,u=(0|l[h>>2])-u|0,l[h>>2]=u,!u){p=6;break}if(6==(0|p)){c=0|l[d>>2];break}return l[a>>2]=8|l[a>>2],mt(i,4,4360,r),l[a>>2]=8|l[a>>2],l[h>>2]=0,S=m=-1,w=s,0|(t=-1)}}while(0);l[o>>2]=c;t:do{if((0|n)>0|0==(0|n)&e>>>0>0){for(d=t+24|0,u=0,c=0;!(-1==(0|(h=0|Qr[63&l[d>>2]](e,n,0|l[t>>2])))&-1==(0|(f=S)));)if(e=0|_r(0|e,0|n,0|h,0|f),n=S,u=0|br(0|h,0|f,0|u,0|c),c=S,!((0|n)>0|0==(0|n)&e>>>0>0))break t;return mt(i,4,4412,m),l[a>>2]=8|l[a>>2],m=0|br(0|l[(m=t=t+56|0)>>2],0|l[m+4>>2],0|u,0|c),l[t>>2]=m,l[t+4>>2]=S,S=m=(t=0!=(0|u)|0!=(0|c))?c:-1,w=s,0|(t=t?u:-1)}u=0,c=0}while(0);return t=0|br(0|l[(t=m=t+56|0)>>2],0|l[t+4>>2],0|u,0|c),l[m>>2]=t,l[m+4>>2]=S,S=m=c,w=s,0|(t=u)},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a=0,s=0,c=0,u=0,h=0,f=0;if(o=w,w=w+16|0,f=o,(s=0|l[(a=48+(t|=0)|0)>>2])>>>0>=e>>>0)return l[(f=t+36|0)>>2]=(0|l[f>>2])+e,l[a>>2]=s-e,t=0|br(0|l[(t=f=t+56|0)>>2],0|l[t+4>>2],0|e,0|n),l[f>>2]=t,l[f+4>>2]=S,S=f=n,w=o,0|(t=e);if(4&l[(r=t+68|0)>>2]|0)return l[(f=t+36|0)>>2]=(0|l[f>>2])+s,l[a>>2]=0,f=0|br(0|l[(f=t=t+56|0)>>2],0|l[f+4>>2],0|s,0),l[t>>2]=f,l[t+4>>2]=S,S=f=(t=0!=(0|s))?0:-1,w=o,0|(t=t?s:-1);s?(l[t+36>>2]=l[t+32>>2],e=0|_r(0|e,0|n,0|s,0),l[a>>2]=0,a=0,n=S):(s=0,a=0);t:do{if((0|n)>0|0==(0|n)&e>>>0>0){for(h=t+24|0;!(-1==(0|(c=0|Qr[63&l[h>>2]](e,n,0|l[t>>2])))&-1==(0|(u=S)));)if(e=0|_r(0|e,0|n,0|c,0|u),n=S,s=0|br(0|c,0|u,0|s,0|a),a=S,!((0|n)>0|0==(0|n)&e>>>0>0))break t;return mt(i,4,4386,f),l[r>>2]=4|l[r>>2],f=0|br(0|l[(f=t=t+56|0)>>2],0|l[f+4>>2],0|s,0|a),l[t>>2]=f,l[t+4>>2]=S,S=f=(t=0!=(0|s)|0!=(0|a))?a:-1,w=o,0|(t=t?s:-1)}}while(0);return t=0|br(0|l[(t=f=t+56|0)>>2],0|l[t+4>>2],0|s,0|a),l[f>>2]=t,l[f+4>>2]=S,S=f=a,w=o,0|(t=s)},function(t,e,n,i){e|=0,n|=0,i|=0;var r,o,a,s,c=0,u=0,h=0,f=0,d=0;s=w,w=w+16|0,r=s,c=0|l[(o=32+(t|=0)|0)>>2],l[(a=t+36|0)>>2]=c,u=0|l[(d=t+48|0)>>2];do{if(u){for(h=t+20|0;-1!=(0|(u=0|Qr[63&l[h>>2]](c,u,0|l[t>>2])));)if(c=(0|l[a>>2])+u|0,l[a>>2]=c,u=(0|l[d>>2])-u|0,l[d>>2]=u,!u){f=6;break}if(6==(0|f)){u=t,c=0|l[o>>2];break}return l[(d=t+68|0)>>2]=8|l[d>>2],mt(i,4,4360,r),l[d>>2]=8|l[d>>2],w=s,0|(d=0)}u=t}while(0);return l[a>>2]=c,l[d>>2]=0,0|Qr[63&l[t+28>>2]](e,n,0|l[u>>2])?(l[(d=t+56|0)>>2]=e,l[d+4>>2]=n,w=s,0|(d=1)):(l[(d=t+68|0)>>2]=8|l[d>>2],w=s,0|(d=0))},et,Ae,qt,function(t,e,n,i){e|=0,n|=0,i|=0;var r=0,o=0,a=0,s=0,c=0;if(!(0|vn(0|l[(r=4+(t|=0)|0)>>2],55,i)))return 0|(i=0);if(c=0|bn(s=0|l[r>>2]),r=0|_n(s),c){for(o=1,a=0;o=o?0!=(0|Qr[63&l[r>>2]](t,e,i)):0,(0|(a=a+1|0))!=(0|c);)r=r+4|0,o&=1;if(wn(s),!o)return 0|(i=0)}else wn(s);if(!(0|vn(0|l[(r=t+8|0)>>2],56,i)))return 0|(i=0);if(!(0|vn(0|l[r>>2],57,i)))return 0|(i=0);if(!(0|vn(0|l[r>>2],58,i)))return 0|(i=0);if(0|l[t+96>>2]&&0==(0|vn(0|l[r>>2],59,i)))return 0|(i=0);if(!(0|vn(0|l[r>>2],60,i)))return 0|(i=0);if(c=0|bn(s=0|l[r>>2]),r=0|_n(s),c){for(o=1,a=0;o=o?0!=(0|Qr[63&l[r>>2]](t,e,i)):0,(0|(a=a+1|0))!=(0|c);)r=r+4|0,o&=1;if(wn(s),!o)return 0|(i=0)}else wn(s);return 0|(i=0|Ae(0|l[t>>2],e,n,i))},function(t,e,n,i){i|=0;var o,s,c,u,h,f,d,p=0,m=0,g=0,y=0,v=0,b=0,_=0,A=0,x=0;if(d=w,w=w+80|0,A=d+64|0,h=d+56|0,s=d+48|0,_=d+40|0,u=d+32|0,c=d+24|0,!(0!=(0|(t|=0))&0!=(0|(e|=0))&0!=(0|(n|=0))))return w=d,0|(e=0);if(((0|l[(f=n+16|0)>>2])-1|0)>>>0>16383)return mt(i,1,16630,d),w=d,0|(e=0);if(!(0|qt(0|l[t>>2],e,n,i)))return w=d,0|(e=0);if(l[t+56>>2]=1785737760,l[t+60>>2]=0,l[t+64>>2]=1,p=0|zt(4),l[t+68>>2]=p,!p)return mt(i,1,16699,d+8|0),w=d,0|(e=0);if(l[p>>2]=1785737760,b=0|l[f>>2],l[t+20>>2]=b,b=0|zt(12*b|0),l[t+72>>2]=b,!b)return mt(i,1,16699,d+16|0),w=d,0|(e=0);if(l[t+16>>2]=(0|l[n+12>>2])-(0|l[n+4>>2]),l[t+12>>2]=(0|l[n+8>>2])-(0|l[n>>2]),o=0|l[(x=n+24|0)>>2],m=0|l[o+24>>2],g=0|l[o+32>>2],l[(y=t+24|0)>>2]=m+-1+(g<<7),(v=0|l[f>>2])>>>0>1){p=1;do{(0|m)!=(0|l[o+(52*p|0)+24>>2])&&(l[y>>2]=255),p=p+1|0}while(p>>>0<v>>>0)}if(l[t+28>>2]=7,l[t+32>>2]=0,l[t+36>>2]=0,0|v&&(l[b+8>>2]=m+-1+(g<<7),1!=(0|v))){p=1;do{l[b+(12*p|0)+8>>2]=(0|l[o+(52*p|0)+24>>2])-1+(l[o+(52*p|0)+32>>2]<<7),p=p+1|0}while(p>>>0<v>>>0)}m=0|l[(p=n+32|0)>>2],g=t+40|0;t:do{if(m)l[g>>2]=2,l[t+48>>2]=0,l[t+112>>2]=m,v=0|Ut(1,m),l[t+108>>2]=v,kr(0|v,0|l[n+28>>2],0|l[p>>2]),r[t+124>>0]=1,v=0|l[f>>2];else switch(l[g>>2]=1,0|l[n+20>>2]){case 1:l[t+48>>2]=16;break t;case 2:l[t+48>>2]=17;break t;case 3:l[t+48>>2]=18;break t;default:break t}}while(0);t:do{if(0|v){g=0|l[x>>2],y=0,p=0,m=0;do{p=p+(1&(1^(n=0==(0|a[g+(52*m|0)+48>>1]))))|0,y=n?y:m,m=m+1|0}while(m>>>0<v>>>0);switch(0|p){case 0:break t;case 1:break;default:mt(i,2,16995,s);break t}switch(0|l[t+48>>2]){case 18:case 16:p=3;break;case 17:p=1;break;default:mt(i,2,16745,c);break t}if(v>>>0<=p>>>0){mt(i,2,16819,u);break}if(y>>>0<p>>>0){mt(i,2,16912,_);break}if(_=0|zt(8),l[(m=t+116|0)>>2]=_,!_)return mt(i,1,17060,h),w=d,0|(e=0);if(y=0|zt(6*(0|l[f>>2])|0),m=0|l[m>>2],l[m>>2]=y,!y)return mt(i,1,17060,A),w=d,0|(e=0);g=0|l[f>>2],a[m+4>>1]=g,m=0;do{a[y+(6*m|0)>>1]=m,a[y+(6*m|0)+2>>1]=0,A=m,m=m+1|0,a[y+(6*A|0)+4>>1]=m}while((0|m)!=(0|p));if(p>>>0<g>>>0){m=0|l[x>>2];do{x=0==(0|a[m+(52*p|0)+48>>1]),a[y+(6*p|0)>>1]=p,a[y+(6*p|0)+2>>1]=x?-1:1,a[y+(6*p|0)+4>>1]=x<<31>>31,p=p+1|0}while(p>>>0<g>>>0)}}}while(0);return l[t+52>>2]=0,l[t+44>>2]=0,l[t+96>>2]=l[e+18692>>2],w=d,0|(e=1)},de,te,function(t,e,n,i){t|=0,e|=0,i|=0;var r,o,a,s=0;if(a=w,w=w+16|0,!(n|=0))return w=a,0|(n=0);if(!(0|de(0|l[t>>2],e,n,i)))return mt(i,1,16201,a),w=a,0|(n=0);if(0|l[t+128>>2])return w=a,0|(n=1);if(!(0|Ee(n,o=t+108|0,i)))return w=a,0|(n=0);switch(0|(e=0|l[t+48>>2])){case 16:l[n+20>>2]=1;break;case 17:l[n+20>>2]=2;break;case 18:l[n+20>>2]=3;break;case 24:l[n+20>>2]=4;break;default:l[n+20>>2]=12==(0|e)?5:-1}e=0|l[(r=t+120|0)>>2];do{if(0|e){if(0|l[e+12>>2]){Te(n,o);break}Zt(0|l[e+4>>2]),Zt(0|l[8+(0|l[r>>2])>>2]),Zt(0|l[l[r>>2]>>2]),e=0|l[r>>2],(s=0|l[e+12>>2])&&(Zt(s),e=0|l[r>>2]),Zt(e),l[r>>2]=0}}while(0);return 0|l[t+116>>2]&&Ie(n,o,i),(e=0|l[o>>2])?(l[n+28>>2]=e,l[n+32>>2]=l[t+112>>2],l[o>>2]=0,w=a,0|(n=1)):(w=a,0|(n=1))},function(t,e,n,i){t|=0,n|=0,i|=0;var r,o=0,a=0,s=0,c=0,u=0;if(!(0|vn(0|l[(c=8+(e|=0)|0)>>2],53,i)))return 0|(i=0);if(r=0|bn(u=0|l[e+4>>2]),o=0|_n(u),r){for(a=1,s=0;a=a?0!=(0|Qr[63&l[o>>2]](e,t,i)):0,(0|(s=s+1|0))!=(0|r);)o=o+4|0,a&=1;if(wn(u),!a)return 0|(i=0)}else wn(u);if(u=0|bn(c=0|l[c>>2]),o=0|_n(c),u){for(a=1,s=0;a=a?0!=(0|Qr[63&l[o>>2]](e,t,i)):0,(0|(s=s+1|0))!=(0|u);)o=o+4|0,a&=1;if(wn(c),!a)return 0|(i=0)}else wn(c);return 0|(i=0|te(t,0|l[e>>2],n,i))},Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr],Kr=[Gr,me,function(t,e,n,i,r){var o,a,s;if(t|=0,e|=0,i|=0,r|=0,s=w,w=w+16|0,!(n|=0))return w=s,0|(n=0);if(mt(i,2,19580,s),!(0|me(0|l[t>>2],e,n,i,r)))return mt(i,1,16201,s+8|0),w=s,0|(n=0);if(!(0|Ee(n,a=t+108|0,i)))return w=s,0|(n=0);switch(0|(e=0|l[t+48>>2])){case 16:l[n+20>>2]=1;break;case 17:l[n+20>>2]=2;break;case 18:l[n+20>>2]=3;break;case 24:l[n+20>>2]=4;break;default:l[n+20>>2]=12==(0|e)?5:-1}e=0|l[(o=t+120|0)>>2];do{if(0|e){if(0|l[e+12>>2]){Te(n,a);break}Zt(0|l[e+4>>2]),Zt(0|l[8+(0|l[o>>2])>>2]),Zt(0|l[l[o>>2]>>2]),e=0|l[o>>2],(r=0|l[e+12>>2])&&(Zt(r),e=0|l[o>>2]),Zt(e),l[o>>2]=0}}while(0);return 0|l[t+116>>2]&&Ie(n,a,i),(e=0|l[a>>2])?(l[n+28>>2]=e,l[n+32>>2]=l[t+112>>2],l[a>>2]=0,w=s,0|(n=1)):(w=s,0|(n=1))},Gr],$r=[zr,Me,function(t,e,n,i,r,o){return e|=0,n|=0,i|=0,r|=0,o|=0,0|Me(0|l[(t|=0)>>2],e,n,i,r,o)},re,function(t,e,n,i,r,o){return e|=0,n|=0,i|=0,r|=0,o|=0,0|re(0|l[(t|=0)>>2],e,n,i,r,o)},zr,zr,zr],to=[Ur,oe,function(t,e,n,i,r,o,a){return e|=0,n|=0,i|=0,r|=0,o|=0,a|=0,0|oe(0|l[(t|=0)>>2],e,n,i,r,o,a)},Ur],eo=[Hr,ie,function(t,e,n,i,r,o,a,s,c,u,h){return e|=0,n|=0,i|=0,r|=0,o|=0,a|=0,s|=0,c|=0,u|=0,h|=0,0|ie(0|l[(t|=0)>>2],e,n,i,r,o,a,s,c,u,h)},Hr],no=[Vr,Xt,ke,function(t){var e,n,i=0,r=0,o=0;if(i=0|l[(n=24+(t|=0)|0)>>2]){if(e=((o=0|l[t+28>>2])>>>0)/52|0,o>>>0>51){for(o=0;0|(t=0|l[i>>2])&&(Zt(t+-1|0),l[i>>2]=0),0|(r=0|l[(t=i+4|0)>>2])&&(Zt(r),l[t>>2]=0),0|(r=0|l[(t=i+8|0)>>2])&&(Zt(r),l[t>>2]=0),!((o=o+1|0)>>>0>=e>>>0);)i=i+52|0;i=0|l[n>>2]}Zt(i),l[n>>2]=0}},function(t){var e,n,i=0,r=0,o=0;if(i=0|l[(n=24+(t|=0)|0)>>2]){if(e=((o=0|l[t+28>>2])>>>0)/56|0,o>>>0>55){for(o=0;0|(t=0|l[i>>2])&&(Zt(t),l[i>>2]=0),0|(r=0|l[(t=i+4|0)>>2])&&(Zt(r),l[t>>2]=0),!((o=o+1|0)>>>0>=e>>>0);)i=i+56|0;i=0|l[n>>2]}Zt(i),l[n>>2]=0}},Vr,Vr,Vr],io=[Wr,function(t,e){},function(t,e){},function(t,e){var n;t|=0,e|=0,e=w,w=w+16|0,l[(n=e)>>2]=t,function(t,e){t|=0,e|=0;var n=0,i=0;n=w,w=w+16|0,l[(i=n)>>2]=e,e=0|Zi(0|l[665],t,i),w=n}(4200,n),w=e},function(t,e){},jt,function(t,e){e|=0,jt(0|l[(t|=0)>>2],e),r[t+124>>0]=0,l[t+128>>2]=1&l[e+8248>>2]},Wr],ro=[Zr,function(t,e,n){t|=0,e|=0;var i=0;if(n|=0)for(i=0;nt(e,~~+m[t>>2]>>>0,2),(0|(i=i+1|0))!=(0|n);)t=t+4|0,e=e+2|0},function(t,e,n){t|=0,e|=0;var i=0;if(n|=0)for(i=0;nt(e,~~+m[t>>2]>>>0,4),(0|(i=i+1|0))!=(0|n);)t=t+4|0,e=e+4|0},function(t,e,n){t|=0,e|=0;var i=0;if(n|=0)for(i=0;at(e,+m[t>>2]),(0|(i=i+1|0))!=(0|n);)t=t+4|0,e=e+4|0},function(t,e,n){t|=0,e|=0;var i=0;if(n|=0)for(i=0;rt(e,+m[t>>2]),(0|(i=i+1|0))!=(0|n);)t=t+4|0,e=e+8|0},function(t,e,n){t|=0,e|=0;var i,r,o=0;if(r=w,w=w+16|0,i=r,n|=0){for(o=0;it(t,i,2),m[e>>2]=+((0|l[i>>2])>>>0),(0|(o=o+1|0))!=(0|n);)e=e+4|0,t=t+2|0;w=r}else w=r},function(t,e,n){t|=0,e|=0;var i,r,o=0;if(r=w,w=w+16|0,i=r,n|=0){for(o=0;it(t,i,4),m[e>>2]=+((0|l[i>>2])>>>0),(0|(o=o+1|0))!=(0|n);)e=e+4|0,t=t+4|0;w=r}else w=r},function(t,e,n){t|=0,e|=0;var i,r,o=0;if(r=w,w=w+16|0,i=r,n|=0){for(o=0;st(t,i),l[e>>2]=l[i>>2],(0|(o=o+1|0))!=(0|n);)e=e+4|0,t=t+4|0;w=r}else w=r},function(t,e,n){t|=0,e|=0;var i,r,o=0;if(r=w,w=w+16|0,i=r,n|=0){for(o=0;ot(t,i),m[e>>2]=+y[i>>3],(0|(o=o+1|0))!=(0|n);)e=e+4|0,t=t+8|0;w=r}else w=r},function(t,e,n){t|=0,e|=0;var i,r,o=0;if(r=w,w=w+16|0,i=r,n|=0){for(o=0;it(t,i,2),l[e>>2]=l[i>>2],(0|(o=o+1|0))!=(0|n);)e=e+4|0,t=t+2|0;w=r}else w=r},function(t,e,n){t|=0,e|=0;var i,r,o=0;if(r=w,w=w+16|0,i=r,n|=0){for(o=0;it(t,i,4),l[e>>2]=l[i>>2],(0|(o=o+1|0))!=(0|n);)e=e+4|0,t=t+4|0;w=r}else w=r},function(t,e,n){t|=0,e|=0;var i,r,o=0;if(r=w,w=w+16|0,i=r,n|=0){for(o=0;st(t,i),l[e>>2]=~~+m[i>>2],(0|(o=o+1|0))!=(0|n);)e=e+4|0,t=t+4|0;w=r}else w=r},function(t,e,n){t|=0,e|=0;var i,r,o=0;if(r=w,w=w+16|0,i=r,n|=0){for(o=0;ot(t,i),l[e>>2]=~~+y[i>>3],(0|(o=o+1|0))!=(0|n);)e=e+4|0,t=t+8|0;w=r}else w=r},se,function(t,e,n){e|=0,n|=0,se(0|l[(t|=0)>>2],e,n)},Zr],oo=[jr,function(t,e,n,i){t|=0,e|=0,n|=0;var r=0,o=0,a=0;if(i|=0)if(1==(0|e)&0==(0|n))l[t>>2]=l[t>>2]<<1;else{if((0|e)>0){r=n+-1|0,i=0;do{l[(a=t+(i<<1<<2)|0)>>2]=(0|l[a>>2])-((0|l[t+(((0|i)<1?1:(((0|i)>(0|n)?n:i)<<1)-1|0)<<2)>>2])+(0|l[t+((((0|i)>=(0|n)?r:i)<<1|1)<<2)>>2])>>1),i=i+1|0}while((0|i)!=(0|e))}if(!((0|n)<=0)){r=e+-1|0,i=0;do{o=i,i=i+1|0,l[(a=t+((o<<1|1)<<2)|0)>>2]=(2+(0|l[t+(((0|o)>=(0|e)?r:o)<<1<<2)>>2])+(0|l[t+(((0|i)>=(0|e)?r:i)<<1<<2)>>2])>>2)+(0|l[a>>2])}while((0|i)!=(0|n))}}else{if(!((i=(0|e)>0)|(0|n)>1))return;if(i){r=n+-1|0,i=0;do{a=i,i=i+1|0,l[(o=t+((a<<1|1)<<2)|0)>>2]=(0|l[o>>2])-((0|l[t+(((0|i)>=(0|n)?r:i)<<1<<2)>>2])+(0|l[t+(((0|a)>=(0|n)?r:a)<<1<<2)>>2])>>1)}while((0|i)!=(0|e))}if((0|n)<=0)return;r=e+-1|0,i=0;do{l[(a=t+(i<<1<<2)|0)>>2]=(2+(0|l[t+(((0|i)<1?1:(((0|i)>(0|e)?e:i)<<1)-1|0)<<2)>>2])+(0|l[t+((((0|i)>=(0|e)?r:i)<<1|1)<<2)>>2])>>2)+(0|l[a>>2]),i=i+1|0}while((0|i)!=(0|n))}},function(t,e,n,i){t|=0,e|=0,n|=0;var r=0,o=0,a=0,s=0,c=0;if(i|=0){if(!((0|e)>1|(a=(0|n)>0)))return;if(o=(0|e)>0){r=n+-1|0,i=0;do{s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=(0|l[t+(((0|i)<1?1:(((0|i)>(0|n)?n:i)<<1)-1|0)<<2)>>2])+(0|l[t+((((0|i)>=(0|n)?r:i)<<1|1)<<2)>>2])|0),((0|s)<0)<<31>>31|0,12993,0)),0|S,4096,0)),0|S,13),l[(c=t+(i<<1<<2)|0)>>2]=(0|l[c>>2])-s,i=i+1|0}while((0|i)!=(0|e))}if(a){r=e+-1|0,i=0;do{c=i,s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=(0|l[t+(((0|(i=i+1|0))>=(0|e)?r:i)<<1<<2)>>2])+(0|l[t+(((0|c)>=(0|e)?r:c)<<1<<2)>>2])|0),((0|s)<0)<<31>>31|0,434,0)),0|S,4096,0)),0|S,13),l[(c=t+((c<<1|1)<<2)|0)>>2]=(0|l[c>>2])-s}while((0|i)!=(0|n))}if(o){r=n+-1|0,i=0;do{s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=(0|l[t+(((0|i)<1?1:(((0|i)>(0|n)?n:i)<<1)-1|0)<<2)>>2])+(0|l[t+((((0|i)>=(0|n)?r:i)<<1|1)<<2)>>2])|0),((0|s)<0)<<31>>31|0,7233,0)),0|S,4096,0)),0|S,13),l[(c=t+(i<<1<<2)|0)>>2]=(0|l[c>>2])+s,i=i+1|0}while((0|i)!=(0|e))}if(a){r=e+-1|0,i=0;do{c=i,s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=(0|l[t+(((0|(i=i+1|0))>=(0|e)?r:i)<<1<<2)>>2])+(0|l[t+(((0|c)>=(0|e)?r:c)<<1<<2)>>2])|0),((0|s)<0)<<31>>31|0,3633,0)),0|S,4096,0)),0|S,13),l[(c=t+((c<<1|1)<<2)|0)>>2]=(0|l[c>>2])+s}while((0|i)!=(0|n))}if(o){i=0;do{s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=0|l[(c=t+(i<<1<<2)|0)>>2]),((0|s)<0)<<31>>31|0,5038,0)),0|S,4096,0)),0|S,13),l[c>>2]=s,i=i+1|0}while((0|i)!=(0|e))}if(!a)return;i=0;do{s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=0|l[(c=t+((i<<1|1)<<2)|0)>>2]),((0|s)<0)<<31>>31|0,6659,0)),0|S,4096,0)),0|S,13),l[c>>2]=s,i=i+1|0}while((0|i)!=(0|n))}else if((a=(0|e)>0)|(0|n)>1){if(a){r=n+-1|0,i=0;do{o=i,s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=(0|l[t+(((0|(i=i+1|0))>=(0|n)?r:i)<<1<<2)>>2])+(0|l[t+(((0|o)>=(0|n)?r:o)<<1<<2)>>2])|0),((0|s)<0)<<31>>31|0,12993,0)),0|S,4096,0)),0|S,13),l[(o=t+((o<<1|1)<<2)|0)>>2]=(0|l[o>>2])-s}while((0|i)!=(0|e))}if(o=(0|n)>0){r=e+-1|0,i=0;do{c=0|Er(0|(c=0|br(0|(c=0|vr(0|(c=(0|l[t+((((0|i)>=(0|e)?r:i)<<1|1)<<2)>>2])+(0|l[t+(((0|i)<1?1:(((0|i)>(0|e)?e:i)<<1)-1|0)<<2)>>2])|0),((0|c)<0)<<31>>31|0,434,0)),0|S,4096,0)),0|S,13),l[(s=t+(i<<1<<2)|0)>>2]=(0|l[s>>2])-c,i=i+1|0}while((0|i)!=(0|n))}if(a){r=n+-1|0,i=0;do{c=i,s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=(0|l[t+(((0|(i=i+1|0))>=(0|n)?r:i)<<1<<2)>>2])+(0|l[t+(((0|c)>=(0|n)?r:c)<<1<<2)>>2])|0),((0|s)<0)<<31>>31|0,7233,0)),0|S,4096,0)),0|S,13),l[(c=t+((c<<1|1)<<2)|0)>>2]=(0|l[c>>2])+s}while((0|i)!=(0|e))}if(o){r=e+-1|0,i=0;do{s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=(0|l[t+((((0|i)>=(0|e)?r:i)<<1|1)<<2)>>2])+(0|l[t+(((0|i)<1?1:(((0|i)>(0|e)?e:i)<<1)-1|0)<<2)>>2])|0),((0|s)<0)<<31>>31|0,3633,0)),0|S,4096,0)),0|S,13),l[(c=t+(i<<1<<2)|0)>>2]=(0|l[c>>2])+s,i=i+1|0}while((0|i)!=(0|n))}if(a){i=0;do{s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=0|l[(c=t+((i<<1|1)<<2)|0)>>2]),((0|s)<0)<<31>>31|0,5038,0)),0|S,4096,0)),0|S,13),l[c>>2]=s,i=i+1|0}while((0|i)!=(0|e))}if(o){i=0;do{s=0|Er(0|(s=0|br(0|(s=0|vr(0|(s=0|l[(c=t+(i<<1<<2)|0)>>2]),((0|s)<0)<<31>>31|0,6659,0)),0|S,4096,0)),0|S,13),l[c>>2]=s,i=i+1|0}while((0|i)!=(0|n))}}},jr];return{___muldi3:vr,___udivdi3:xr,___uremdi3:Sr,_bitshift64Ashr:Mr,_bitshift64Lshr:Er,_bitshift64Shl:Tr,_emscripten_replace_memory:function(t){return!(16777215&v(t)||v(t)<=16777215||v(t)>2147483648||(r=new i(t),a=new o(t),l=new s(t),u=new c(t),f=new h(t),new d(t),m=new p(t),y=new g(t),n=t,0))},_free:yi,_i64Add:br,_i64Subtract:_r,_jp2_decode:function(t,e,n,i,r,o,a,s,c,u,h){t|=0,e|=0,n|=0,i|=0,r|=0,o|=0,a|=0,s|=0,c|=0,u|=0,h|=0;var f,d,p,m=0,g=0;if(p=w,w=w+8272|0,g=p+16|0,m=p,l[(f=p+12|0)>>2]=0,Rt(d=0|At(1375686655==(0|l[t>>2])?0:2),1,0),Pt(d,2,0),Bt(d,3,0),kt(g),l[m>>2]=t,l[m+4>>2]=t,l[m+8>>2]=e,m=0|Ot(m,1),!(0|Lt(d,g)))return gr(4211),X(m),St(d),w=p,0|(g=1);if(!(0|It(m,d,f)))return gr(4263),X(m),St(d),vt(0|l[f>>2]),w=p,0|(g=1);if(!(0|xt(d,m,0|l[f>>2])))return gr(4313),St(d),X(m),vt(0|l[f>>2]),w=p,0|(g=1);switch(t=0|l[f>>2],l[r>>2]=l[t+8>>2],l[o>>2]=l[t+12>>2],l[a>>2]=l[t+16>>2],g=0|l[(e=t+24|0)>>2],l[c>>2]=l[g+24>>2],l[u>>2]=l[g+32>>2],l[s>>2]=l[g+28>>2],l[h>>2]=l[t+20>>2],t=0|k(0|k(l[r>>2]<<2,0|l[o>>2]),0|l[a>>2]),l[i>>2]=t,u=0|gi(t),l[n>>2]=u,0|l[a>>2]){case 1:kr(0|u,0|l[44+(0|l[e>>2])>>2],0|t);break;case 3:if((0|(c=0|k(0|l[o>>2],0|l[r>>2])))>0){s=0|l[e>>2],e=0|l[s+44>>2],h=0|l[s+96>>2],s=0|l[s+148>>2],t=0;do{l[u+((g=3*t|0)<<2)>>2]=l[e+(t<<2)>>2],l[u+(g+1<<2)>>2]=l[h+(t<<2)>>2],l[u+(g+2<<2)>>2]=l[s+(t<<2)>>2],t=t+1|0}while((0|t)<(0|c))}}return X(m),St(d),vt(0|l[f>>2]),w=p,0|(g=0)},_jp2_encode:function(t,e,n,i,r,o,a,s,c,h){t|=0,e|=0,n|=0,i|=0,r|=0,o|=0,a|=0,s|=0,c|=0,h|=0;var d,p,g,y=0,v=0,b=0,_=0,A=0,x=0,S=0;g=w,w=w+18880|0,y=g+16|0,A=g,Ct(p=g+160|0),l[p+18200>>2]=0,l[p+4788>>2]=1,l[p+20>>2]=1;t:do{if(r)m[p+4792>>2]=+(0|r);else switch(0|i){case 0:case 100:m[p+4792>>2]=0;break t;default:m[p+5192>>2]=+(0|i),l[p+28>>2]=1;break t}}while(0);if(l[y+24>>2]=n,l[y+28>>2]=n,l[y+32>>2]=0,l[y>>2]=1,l[y+4>>2]=1,l[y+8>>2]=t,l[y+12>>2]=e,l[y+60>>2]=n,l[y+64>>2]=n,l[y+68>>2]=0,l[y+36>>2]=1,l[y+40>>2]=1,l[y+44>>2]=t,l[y+48>>2]=e,l[y+96>>2]=n,l[y+100>>2]=n,l[y+104>>2]=0,l[y+72>>2]=1,l[y+76>>2]=1,l[y+80>>2]=t,l[y+84>>2]=e,l[y+132>>2]=n,l[y+136>>2]=n,l[y+140>>2]=0,l[y+108>>2]=1,l[y+112>>2]=1,l[y+116>>2]=t,l[y+120>>2]=e,!(d=0|yt(4,y,1)))return w=g,0|(h=0);if(16==(0|n)){if((0|e)>0&(0|t)>0){b=0|l[d+24>>2],r=0|l[b+200>>2],n=0|l[b+44>>2],v=0|l[b+96>>2],b=0|l[b+148>>2],y=0;do{_=0|k(y,t),i=0;do{S=(x=i+_|0)<<2,l[n+(x<<2)>>2]=f[o+(S<<1)>>1],l[v+(x<<2)>>2]=f[o+((1|S)<<1)>>1],l[b+(x<<2)>>2]=f[o+((2|S)<<1)>>1],l[r+(x<<2)>>2]=f[o+((3|S)<<1)>>1],i=i+1|0}while((0|i)!=(0|t));y=y+1|0}while((0|y)!=(0|e))}}else if((0|e)>0&(0|t)>0){b=0|l[d+24>>2],r=0|l[b+200>>2],n=0|l[b+44>>2],v=0|l[b+96>>2],b=0|l[b+148>>2],y=0;do{_=0|k(y,t),i=0;do{x=(S=i+_|0)<<2,l[n+(S<<2)>>2]=u[o+x>>0],l[v+(S<<2)>>2]=u[o+(1|x)>>0],l[b+(S<<2)>>2]=u[o+(2|x)>>0],l[r+(S<<2)>>2]=u[o+(3|x)>>0],i=i+1|0}while((0|i)!=(0|t));y=y+1|0}while((0|y)!=(0|e))}return l[d>>2]=0,l[d+4>>2]=0,l[d+8>>2]=t,l[d+12>>2]=e,(0|s)>0&&(l[d+28>>2]=a,l[d+32>>2]=s),Rt(0,1,0),Pt(0,2,0),Bt(0,3,0),Rt(r=0|wt(2),1,0),Pt(r,2,0),Bt(r,3,0),Dt(r,p,d),i=0|gi(67108864),l[A>>2]=i,l[(y=A+4|0)>>2]=i,l[A+8>>2]=67108864,(i=0|Ot(A,0))?0|Nt(r,d,i)&&0|Et(r,i)&&0|Tt(r,i)?(x=0|l[A>>2],A=0|gi(S=(0|l[y>>2])-x|0),l[c>>2]=A,kr(0|A,0|x,0|S),l[h>>2]=S,X(i),St(r),vt(d),w=g,0|(S=1)):(X(i),St(r),vt(d),w=g,0|(S=0)):(w=g,0|(S=0))},_jp2_version:function(){return 4427},_llvm_bswap_i32:Ir,_malloc:gi,_memcpy:kr,_memset:Cr,_opj_create_compress:wt,_opj_create_decompress:At,_opj_decode:xt,_opj_decode_tile_data:function(t,e,n,i,r){return e|=0,i|=0,0!=(0|(t|=0))&0!=(0|(n|=0))&0!=(0|(r|=0))&&0|l[t+68>>2]?0|(r=0|$r[7&l[t+12>>2]](0|l[t+40>>2],e,n,i,r,t+44|0)):0|(r=0)},_opj_destroy_codec:St,_opj_destroy_cstr_index:function(t){var e;(e=0|l[(t|=0)>>2])&&(Qt(e),l[t>>2]=0)},_opj_destroy_cstr_info:Mt,_opj_dump_codec:function(t,e,n){e|=0,n|=0,(t|=0)&&ro[15&l[t+72>>2]](0|l[t+40>>2],e,n)},_opj_encode:Et,_opj_end_compress:Tt,_opj_end_decompress:function(t,e){return 0!=(0|(t|=0))&0!=(0|(e|=0))&&0|l[t+68>>2]?0|(e=0|Qr[63&l[t+16>>2]](0|l[t+40>>2],e,t+44|0)):0|(e=0)},_opj_get_cstr_index:function(t){return(t|=0)?0|(t=0|Xr[15&l[t+80>>2]](0|l[t+40>>2])):0|(t=0)},_opj_get_cstr_info:function(t){return(t|=0)?0|(t=0|Xr[15&l[t+76>>2]](0|l[t+40>>2])):0|(t=0)},_opj_get_decoded_tile:function(t,e,n,i){return n|=0,i|=0,0!=(0|(t|=0))&0!=(0|(e|=0))&&0|l[t+68>>2]?0|(i=0|Kr[3&l[t+32>>2]](0|l[t+40>>2],e,n,t+44|0,i)):0|(i=0)},_opj_image_create:yt,_opj_image_destroy:vt,_opj_image_tile_create:function(t,e,n){var i,r;if(t|=0,e|=0,n|=0,!(i=0|Ut(1,36)))return 0|(e=i);if(l[i+20>>2]=n,l[i+16>>2]=t,r=0|Ut(t,52),l[i+24>>2]=r,r){if(!t)return 0|(e=i);n=0;do{l[r+(52*n|0)>>2]=l[e+(36*n|0)>>2],l[r+(52*n|0)+4>>2]=l[e+(36*n|0)+4>>2],l[r+(52*n|0)+8>>2]=l[e+(36*n|0)+8>>2],l[r+(52*n|0)+12>>2]=l[e+(36*n|0)+12>>2],l[r+(52*n|0)+16>>2]=l[e+(36*n|0)+16>>2],l[r+(52*n|0)+20>>2]=l[e+(36*n|0)+20>>2],l[r+(52*n|0)+24>>2]=l[e+(36*n|0)+24>>2],l[r+(52*n|0)+32>>2]=l[e+(36*n|0)+32>>2],l[r+(52*n|0)+44>>2]=0,n=n+1|0}while((0|n)!=(0|t));return 0|i}return 0|(n=0|l[i+28>>2])&&Zt(n),Zt(i),0|(e=0)},_opj_read_header:It,_opj_read_tile_header:function(t,e,n,i,r,o,a,s,c,u){return r|=0,o|=0,a|=0,s|=0,c|=0,u|=0,0!=(0|(n|=0))&0!=(0|(t|=0))&0!=(0|(e|=0))&0!=(0|(i|=0))&&0|l[t+68>>2]?0|(u=0|eo[3&l[t+8>>2]](0|l[t+40>>2],n,i,r,o,a,s,c,u,e,t+44|0)):0|(u=0)},_opj_set_MCT:function(t,e,n,i){t|=0,e|=0,n|=0;var o,s=0,c=0;return o=0|k(c=(i|=0)<<2,i),i=0|f[(s=t+18704|0)>>1],a[s>>1]=0==(32768&i|0)?-32512:65535&(256|i),l[t+5608>>2]=1,r[t+18690>>0]=2,s=0|zt(o+c|0),l[(i=t+18696|0)>>2]=s,s?(kr(0|s,0|e,0|o),kr((0|l[i>>2])+o|0,0|n,0|c),0|(c=1)):0|(c=0)},_opj_set_decode_area:function(t,e,n,i,r,o){return e|=0,n|=0,i|=0,r|=0,o|=0,(t|=0)&&0|l[t+68>>2]?0|(o=0|to[3&l[t+28>>2]](0|l[t+40>>2],e,n,i,r,o,t+44|0)):0|(o=0)},_opj_set_decoded_resolution_factor:function(t,e){return e|=0,(t|=0)?0|(e=0|Qr[63&l[t+36>>2]](0|l[t+40>>2],e,t+44|0)):0|(e=0)},_opj_set_default_decoder_parameters:kt,_opj_set_default_encoder_parameters:Ct,_opj_set_error_handler:Bt,_opj_set_info_handler:Rt,_opj_set_warning_handler:Pt,_opj_setup_decoder:Lt,_opj_setup_encoder:Dt,_opj_start_compress:Nt,_opj_stream_create:j,_opj_stream_create_buffer_stream:Ot,_opj_stream_create_default_file_stream:function(t,e){return 0|Ft(t|=0,1048576,e|=0)},_opj_stream_create_file_stream:Ft,_opj_stream_default_create:Y,_opj_stream_destroy:X,_opj_stream_set_read_function:J,_opj_stream_set_seek_function:Q,_opj_stream_set_skip_function:q,_opj_stream_set_user_data:K,_opj_stream_set_user_data_length:$,_opj_stream_set_write_function:tt,_opj_version:Gt,_opj_write_tile:function(t,e,n,i,r){return e|=0,i|=0,0!=(0|(n|=0))&0!=(0|(t|=0))&0!=(0|(r|=0))?0|l[t+68>>2]?0|(r=0):0|(r=0|$r[7&l[t+8>>2]](0|l[t+40>>2],e,n,i,r,t+44|0)):0|(r=0)},_rintf:Rr,_sbrk:Pr,dynCall_di:function(t,e){return e|=0,+Yr[3&(t|=0)](0|e)},dynCall_ii:function(t,e){return e|=0,0|Xr[15&(t|=0)](0|e)},dynCall_iii:function(t,e,n){return e|=0,n|=0,0|Jr[7&(t|=0)](0|e,0|n)},dynCall_iiii:function(t,e,n,i){return e|=0,n|=0,i|=0,0|Qr[63&(t|=0)](0|e,0|n,0|i)},dynCall_iiiii:function(t,e,n,i,r){return e|=0,n|=0,i|=0,r|=0,0|qr[63&(t|=0)](0|e,0|n,0|i,0|r)},dynCall_iiiiii:function(t,e,n,i,r,o){return e|=0,n|=0,i|=0,r|=0,o|=0,0|Kr[3&(t|=0)](0|e,0|n,0|i,0|r,0|o)},dynCall_iiiiiii:function(t,e,n,i,r,o,a){return e|=0,n|=0,i|=0,r|=0,o|=0,a|=0,0|$r[7&(t|=0)](0|e,0|n,0|i,0|r,0|o,0|a)},dynCall_iiiiiiii:function(t,e,n,i,r,o,a,s){return e|=0,n|=0,i|=0,r|=0,o|=0,a|=0,s|=0,0|to[3&(t|=0)](0|e,0|n,0|i,0|r,0|o,0|a,0|s)},dynCall_iiiiiiiiiiii:function(t,e,n,i,r,o,a,s,l,c,u,h){return e|=0,n|=0,i|=0,r|=0,o|=0,a|=0,s|=0,l|=0,c|=0,u|=0,h|=0,0|eo[3&(t|=0)](0|e,0|n,0|i,0|r,0|o,0|a,0|s,0|l,0|c,0|u,0|h)},dynCall_vi:function(t,e){e|=0,no[7&(t|=0)](0|e)},dynCall_vii:function(t,e,n){e|=0,n|=0,io[7&(t|=0)](0|e,0|n)},dynCall_viii:function(t,e,n,i){e|=0,n|=0,i|=0,ro[15&(t|=0)](0|e,0|n,0|i)},dynCall_viiii:function(t,e,n,i,r){e|=0,n|=0,i|=0,r|=0,oo[3&(t|=0)](0|e,0|n,0|i,0|r)},establishStackSpace:function(t,e){w=t|=0,0},getTempRet0:function(){return 0|S},runPostSets:function(){},setTempRet0:function(t){S=t|=0},setThrew:function(t,e){t|=0,0,x||(x=t)},stackAlloc:function(t){var e;return e=w,w=15+(w=w+(t|=0)|0)&-16,0|e},stackRestore:function(t){w=t|=0},stackSave:function(){return 0|w}}}(o.asmGlobalArg,o.asmLibraryArg,T),Ct=(o.___muldi3=kt.___muldi3,o.___udivdi3=kt.___udivdi3,o.___uremdi3=kt.___uremdi3,o._bitshift64Ashr=kt._bitshift64Ashr,o._bitshift64Lshr=kt._bitshift64Lshr,o._bitshift64Shl=kt._bitshift64Shl,o._emscripten_replace_memory=kt._emscripten_replace_memory),Bt=(o._free=kt._free,o._i64Add=kt._i64Add,o._i64Subtract=kt._i64Subtract,o._jp2_decode=kt._jp2_decode,o._jp2_encode=kt._jp2_encode,o._jp2_version=kt._jp2_version,o._llvm_bswap_i32=kt._llvm_bswap_i32,o._malloc=kt._malloc),Rt=(o._memcpy=kt._memcpy,o._memset=kt._memset,o._opj_create_compress=kt._opj_create_compress,o._opj_create_decompress=kt._opj_create_decompress,o._opj_decode=kt._opj_decode,o._opj_decode_tile_data=kt._opj_decode_tile_data,o._opj_destroy_codec=kt._opj_destroy_codec,o._opj_destroy_cstr_index=kt._opj_destroy_cstr_index,o._opj_destroy_cstr_info=kt._opj_destroy_cstr_info,o._opj_dump_codec=kt._opj_dump_codec,o._opj_encode=kt._opj_encode,o._opj_end_compress=kt._opj_end_compress,o._opj_end_decompress=kt._opj_end_decompress,o._opj_get_cstr_index=kt._opj_get_cstr_index,o._opj_get_cstr_info=kt._opj_get_cstr_info,o._opj_get_decoded_tile=kt._opj_get_decoded_tile,o._opj_image_create=kt._opj_image_create,o._opj_image_destroy=kt._opj_image_destroy,o._opj_image_tile_create=kt._opj_image_tile_create,o._opj_read_header=kt._opj_read_header,o._opj_read_tile_header=kt._opj_read_tile_header,o._opj_set_MCT=kt._opj_set_MCT,o._opj_set_decode_area=kt._opj_set_decode_area,o._opj_set_decoded_resolution_factor=kt._opj_set_decoded_resolution_factor,o._opj_set_default_decoder_parameters=kt._opj_set_default_decoder_parameters,o._opj_set_default_encoder_parameters=kt._opj_set_default_encoder_parameters,o._opj_set_error_handler=kt._opj_set_error_handler,o._opj_set_info_handler=kt._opj_set_info_handler,o._opj_set_warning_handler=kt._opj_set_warning_handler,o._opj_setup_decoder=kt._opj_setup_decoder,o._opj_setup_encoder=kt._opj_setup_encoder,o._opj_start_compress=kt._opj_start_compress,o._opj_stream_create=kt._opj_stream_create,o._opj_stream_create_buffer_stream=kt._opj_stream_create_buffer_stream,o._opj_stream_create_default_file_stream=kt._opj_stream_create_default_file_stream,o._opj_stream_create_file_stream=kt._opj_stream_create_file_stream,o._opj_stream_default_create=kt._opj_stream_default_create,o._opj_stream_destroy=kt._opj_stream_destroy,o._opj_stream_set_read_function=kt._opj_stream_set_read_function,o._opj_stream_set_seek_function=kt._opj_stream_set_seek_function,o._opj_stream_set_skip_function=kt._opj_stream_set_skip_function,o._opj_stream_set_user_data=kt._opj_stream_set_user_data,o._opj_stream_set_user_data_length=kt._opj_stream_set_user_data_length,o._opj_stream_set_write_function=kt._opj_stream_set_write_function,o._opj_version=kt._opj_version,o._opj_write_tile=kt._opj_write_tile,o._rintf=kt._rintf,o._sbrk=kt._sbrk,o.establishStackSpace=kt.establishStackSpace,o.getTempRet0=kt.getTempRet0,o.runPostSets=kt.runPostSets,o.setTempRet0=kt.setTempRet0,o.setThrew=kt.setThrew,o.stackAlloc=kt.stackAlloc),Pt=o.stackRestore=kt.stackRestore,Lt=o.stackSave=kt.stackSave;o.dynCall_di=kt.dynCall_di,o.dynCall_ii=kt.dynCall_ii,o.dynCall_iii=kt.dynCall_iii,o.dynCall_iiii=kt.dynCall_iiii,o.dynCall_iiiii=kt.dynCall_iiiii,o.dynCall_iiiiii=kt.dynCall_iiiiii,o.dynCall_iiiiiii=kt.dynCall_iiiiiii,o.dynCall_iiiiiiii=kt.dynCall_iiiiiiii,o.dynCall_iiiiiiiiiiii=kt.dynCall_iiiiiiiiiiii,o.dynCall_vi=kt.dynCall_vi,o.dynCall_vii=kt.dynCall_vii,o.dynCall_viii=kt.dynCall_viii,o.dynCall_viiii=kt.dynCall_viiii;if(o.asm=kt,o.ccall=function(t,e,n,i,r){var a=function(t){var e=o["_"+t];return v(e,"Cannot call unknown function "+t+", make sure it is exported"),e}(t),s=[],l=0;if(i)for(var c=0;c<i.length;c++){var u=_[n[c]];u?(0===l&&(l=Lt()),s[c]=u(i[c])):s[c]=i[c]}var h=a.apply(null,s);return"string"===e&&(h=S(h)),0!==l&&Pt(l),h},o.getValue=function(t,e,n){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return I[t>>0];case"i16":return C[t>>1];case"i32":case"i64":return B[t>>2];case"float":return R[t>>2];case"double":return P[t>>3];default:Ht("invalid type for getValue: "+e)}return null},o.writeArrayToMemory=rt,dt)if(mt(dt)||("function"==typeof o.locateFile?dt=o.locateFile(dt):o.memoryInitializerPrefixURL&&(dt=o.memoryInitializerPrefixURL+dt)),h||f){var Dt=o.readBinary(dt);k.set(Dt,8)}else{ut++,o.monitorRunDependencies&&o.monitorRunDependencies(ut);var Nt=function(t){t.byteLength&&(t=new Uint8Array(t)),k.set(t,8),o.memoryInitializerRequest&&delete o.memoryInitializerRequest.response,function(t){if(ut--,o.monitorRunDependencies&&o.monitorRunDependencies(ut),0==ut&&(null!==ht&&(clearInterval(ht),ht=null),ft)){var e=ft;ft=null,e()}}()};function Ot(){o.readAsync(dt,Nt,function(){throw"could not load memory initializer "+dt})}var Ft=Tt(dt);if(Ft)Nt(Ft.buffer);else if(o.memoryInitializerRequest){function Gt(){var t=o.memoryInitializerRequest,e=t.response;if(200!==t.status&&0!==t.status){var n=Tt(o.memoryInitializerRequestURL);if(!n)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+t.status+", retrying "+dt),void Ot();e=n.buffer}Nt(e)}o.memoryInitializerRequest.response?setTimeout(Gt,0):o.memoryInitializerRequest.addEventListener("load",Gt)}else Ot()}function zt(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Ut(t){function e(){o.calledRun||(o.calledRun=!0,y||(et||(et=!0,J(q)),J(K),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)it(o.postRun.shift());J(tt)}()))}t=t||o.arguments,ut>0||(function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)nt(o.preRun.shift());J(Q)}(),ut>0||o.calledRun||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e()))}function Ht(t){throw o.onAbort&&o.onAbort(t),void 0!==t?(o.print(t),o.printErr(t),t=JSON.stringify(t)):t="",y=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}if(o.then=function(t){if(o.calledRun)t(o);else{var e=o.onRuntimeInitialized;o.onRuntimeInitialized=function(){e&&e(),t(o)}}return o},zt.prototype=new Error,zt.prototype.constructor=zt,ft=function t(){o.calledRun||Ut(),o.calledRun||(ft=t)},o.run=Ut,o.exit=function(t,n){n&&o.noExitRuntime&&0===t||(o.noExitRuntime||(y=!0,N=It,J($),o.onExit&&o.onExit(t)),h&&e.exit(t),o.quit(t,new zt(t)))},o.abort=Ht,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return o.noExitRuntime=!0,Ut(),t}}).call(this,n(21),n(99).Buffer)},function(t,e,n){"use strict";t.exports=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(r=r+e[i++]|0)|0}while(--a);r%=65521,o%=65521}return r|o<<16|0}},function(t,e,n){"use strict";var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,r){var o=i,a=r+n;t^=-1;for(var s=r;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},function(t,e,n){"use strict";var i=n(7),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new i.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,e.string2buf=function(t){var e,n,r,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,i,r,o,s=e||t.length,c=new Array(2*s);for(i=0,n=0;n<s;)if((r=t[n++])<128)c[i++]=r;else if((o=a[r])>4)c[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&n<s;)r=r<<6|63&t[n++],o--;o>1?c[i++]=65533:r<65536?c[i++]=r:(r-=65536,c[i++]=55296|r>>10&1023,c[i++]=56320|1023&r)}return l(c,i)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+a[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";t.exports=Math.floor},function(t,e,n){"use strict";t.exports=Math.ceil},function(t,e,n){"use strict";var i=i||{};i.Utils=i.Utils||n(20),i.NIFTI1=i.NIFTI1||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.isHDR=!1,this.extensionFlag=[0,0,0,0],this.extensionSize=0,this.extensionCode=0},i.NIFTI1.TYPE_NONE=0,i.NIFTI1.TYPE_BINARY=1,i.NIFTI1.TYPE_UINT8=2,i.NIFTI1.TYPE_INT16=4,i.NIFTI1.TYPE_INT32=8,i.NIFTI1.TYPE_FLOAT32=16,i.NIFTI1.TYPE_COMPLEX64=32,i.NIFTI1.TYPE_FLOAT64=64,i.NIFTI1.TYPE_RGB24=128,i.NIFTI1.TYPE_INT8=256,i.NIFTI1.TYPE_UINT16=512,i.NIFTI1.TYPE_UINT32=768,i.NIFTI1.TYPE_INT64=1024,i.NIFTI1.TYPE_UINT64=1280,i.NIFTI1.TYPE_FLOAT128=1536,i.NIFTI1.TYPE_COMPLEX128=1792,i.NIFTI1.TYPE_COMPLEX256=2048,i.NIFTI1.XFORM_UNKNOWN=0,i.NIFTI1.XFORM_SCANNER_ANAT=1,i.NIFTI1.XFORM_ALIGNED_ANAT=2,i.NIFTI1.XFORM_TALAIRACH=3,i.NIFTI1.XFORM_MNI_152=4,i.NIFTI1.SPATIAL_UNITS_MASK=7,i.NIFTI1.TEMPORAL_UNITS_MASK=56,i.NIFTI1.UNITS_UNKNOWN=0,i.NIFTI1.UNITS_METER=1,i.NIFTI1.UNITS_MM=2,i.NIFTI1.UNITS_MICRON=3,i.NIFTI1.UNITS_SEC=8,i.NIFTI1.UNITS_MSEC=16,i.NIFTI1.UNITS_USEC=24,i.NIFTI1.UNITS_HZ=32,i.NIFTI1.UNITS_PPM=40,i.NIFTI1.UNITS_RADS=48,i.NIFTI1.MAGIC_COOKIE=348,i.NIFTI1.MAGIC_NUMBER_LOCATION=344,i.NIFTI1.MAGIC_NUMBER=[110,43,49],i.NIFTI1.MAGIC_NUMBER2=[110,105,49],i.NIFTI1.EXTENSION_HEADER_SIZE=8,i.NIFTI1.prototype.readHeader=function(t){var e,n,r,o,a=new DataView(t),s=i.Utils.getIntAt(a,0,this.littleEndian);if(s!==i.NIFTI1.MAGIC_COOKIE&&(this.littleEndian=!0,s=i.Utils.getIntAt(a,0,this.littleEndian)),s!==i.NIFTI1.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=i.Utils.getByteAt(a,39),e=0;e<8;e+=1)o=40+2*e,this.dims[e]=i.Utils.getShortAt(a,o,this.littleEndian);for(this.intent_p1=i.Utils.getFloatAt(a,56,this.littleEndian),this.intent_p2=i.Utils.getFloatAt(a,60,this.littleEndian),this.intent_p3=i.Utils.getFloatAt(a,64,this.littleEndian),this.intent_code=i.Utils.getShortAt(a,68,this.littleEndian),this.datatypeCode=i.Utils.getShortAt(a,70,this.littleEndian),this.numBitsPerVoxel=i.Utils.getShortAt(a,72,this.littleEndian),this.slice_start=i.Utils.getShortAt(a,74,this.littleEndian),e=0;e<8;e+=1)o=76+4*e,this.pixDims[e]=i.Utils.getFloatAt(a,o,this.littleEndian);for(this.vox_offset=i.Utils.getFloatAt(a,108,this.littleEndian),this.scl_slope=i.Utils.getFloatAt(a,112,this.littleEndian),this.scl_inter=i.Utils.getFloatAt(a,116,this.littleEndian),this.slice_end=i.Utils.getShortAt(a,120,this.littleEndian),this.slice_code=i.Utils.getByteAt(a,122),this.xyzt_units=i.Utils.getByteAt(a,123),this.cal_max=i.Utils.getFloatAt(a,124,this.littleEndian),this.cal_min=i.Utils.getFloatAt(a,128,this.littleEndian),this.slice_duration=i.Utils.getFloatAt(a,132,this.littleEndian),this.toffset=i.Utils.getFloatAt(a,136,this.littleEndian),this.description=i.Utils.getStringAt(a,148,228),this.aux_file=i.Utils.getStringAt(a,228,252),this.qform_code=i.Utils.getShortAt(a,252,this.littleEndian),this.sform_code=i.Utils.getShortAt(a,254,this.littleEndian),this.quatern_b=i.Utils.getFloatAt(a,256,this.littleEndian),this.quatern_c=i.Utils.getFloatAt(a,260,this.littleEndian),this.quatern_d=i.Utils.getFloatAt(a,264,this.littleEndian),this.qoffset_x=i.Utils.getFloatAt(a,268,this.littleEndian),this.qoffset_y=i.Utils.getFloatAt(a,272,this.littleEndian),this.qoffset_z=i.Utils.getFloatAt(a,276,this.littleEndian),n=0;n<3;n+=1)for(r=0;r<4;r+=1)o=280+4*(4*n+r),this.affine[n][r]=i.Utils.getFloatAt(a,o,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=i.Utils.getStringAt(a,328,344),this.magic=i.Utils.getStringAt(a,344,348),this.isHDR=this.magic===i.NIFTI1.MAGIC_NUMBER2,a.byteLength>i.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=i.Utils.getByteAt(a,348),this.extensionFlag[1]=i.Utils.getByteAt(a,349),this.extensionFlag[2]=i.Utils.getByteAt(a,350),this.extensionFlag[3]=i.Utils.getByteAt(a,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(a),this.extensionCode=this.getExtensionCode(a)))},i.NIFTI1.prototype.toFormattedString=function(){var t=i.Utils.formatNumber,e="";return e+="Dim Info = "+this.dim_info+"\n",e+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",e+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",e+="Intent Code = "+this.intent_code+"\n",e+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",e+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n",e+="Slice Start = "+this.slice_start+"\n",e+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+"\n",e+="Image Offset = "+this.vox_offset+"\n",e+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+"\n",e+="Slice End = "+this.slice_end+"\n",e+="Slice Code = "+this.slice_code+"\n",e+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(i.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(i.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",e+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+"\n",e+="Slice Duration = "+this.slice_duration+"\n",e+="Time Axis Shift = "+this.toffset+"\n",e+='Description: "'+this.description+'"\n',e+='Auxiliary File: "'+this.aux_file+'"\n',e+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",e+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",e+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+"\n",e+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",e+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+"\n",e+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+"\n",e+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+"\n",e+='Intent Name: "'+this.intent_name+'"\n',this.extensionFlag[0]&&(e+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n"),e},i.NIFTI1.prototype.getDatatypeCodeString=function(t){return t===i.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":t===i.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":t===i.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":t===i.NIFTI1.TYPE_FLOAT32?"4-Byte Float":t===i.NIFTI1.TYPE_FLOAT64?"8-Byte Float":t===i.NIFTI1.TYPE_RGB24?"RGB":t===i.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":t===i.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":t===i.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":t===i.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":t===i.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"},i.NIFTI1.prototype.getTransformCodeString=function(t){return t===i.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":t===i.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":t===i.NIFTI1.XFORM_TALAIRACH?"Talairach":t===i.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"},i.NIFTI1.prototype.getUnitsCodeString=function(t){return t===i.NIFTI1.UNITS_METER?"Meters":t===i.NIFTI1.UNITS_MM?"Millimeters":t===i.NIFTI1.UNITS_MICRON?"Microns":t===i.NIFTI1.UNITS_SEC?"Seconds":t===i.NIFTI1.UNITS_MSEC?"Milliseconds":t===i.NIFTI1.UNITS_USEC?"Microseconds":t===i.NIFTI1.UNITS_HZ?"Hz":t===i.NIFTI1.UNITS_PPM?"PPM":t===i.NIFTI1.UNITS_RADS?"Rads":"Unknown"},i.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])},i.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=function(t,e,n,i,r,o,a,s,l,c){var u,h,f,d,p=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],m=t,g=e,y=n;return p[3][0]=p[3][1]=p[3][2]=0,p[3][3]=1,(u=1-(m*m+g*g+y*y))<1e-7?(m*=u=1/Math.sqrt(m*m+g*g+y*y),g*=u,y*=u,u=0):u=Math.sqrt(u),h=a>0?a:1,f=s>0?s:1,d=l>0?l:1,c<0&&(d=-d),p[0][0]=(u*u+m*m-g*g-y*y)*h,p[0][1]=2*(m*g-u*y)*f,p[0][2]=2*(m*y+u*g)*d,p[1][0]=2*(m*g+u*y)*h,p[1][1]=(u*u+g*g-m*m-y*y)*f,p[1][2]=2*(g*y-u*m)*d,p[2][0]=2*(m*y-u*g)*h,p[2][1]=2*(g*y+u*m)*f,p[2][2]=(u*u+y*y-g*g-m*m)*d,p[0][3]=i,p[1][3]=r,p[2][3]=o,p},i.NIFTI1.prototype.convertNiftiSFormToNEMA=function(t){var e,n,i,r,o,a,s,l,c,u,h,f,d,p,m,g,y,v,b,_,w,A,x,S,M,E,T,I,k,C,B,R,P;if(p=0,E=[[0,0,0],[0,0,0],[0,0,0]],T=[[0,0,0],[0,0,0],[0,0,0]],e=t[0][0],n=t[0][1],i=t[0][2],r=t[1][0],o=t[1][1],a=t[1][2],s=t[2][0],l=t[2][1],c=t[2][2],0===(u=Math.sqrt(e*e+r*r+s*s)))return null;if(e/=u,r/=u,s/=u,0===(u=Math.sqrt(n*n+o*o+l*l)))return null;if(u=e*(n/=u)+r*(o/=u)+s*(l/=u),Math.abs(u)>1e-4){if(n-=u*e,o-=u*r,l-=u*s,0===(u=Math.sqrt(n*n+o*o+l*l)))return null;n/=u,o/=u,l/=u}if(0===(u=Math.sqrt(i*i+a*a+c*c))?(i=r*l-s*o,a=s*n-l*e,c=e*o-r*n):(i/=u,a/=u,c/=u),u=e*i+r*a+s*c,Math.abs(u)>1e-4){if(i-=u*e,a-=u*r,c-=u*s,0===(u=Math.sqrt(i*i+a*a+c*c)))return null;i/=u,a/=u,c/=u}if(u=n*i+o*a+l*c,Math.abs(u)>1e-4){if(i-=u*n,a-=u*o,c-=u*l,0===(u=Math.sqrt(i*i+a*a+c*c)))return null;i/=u,a/=u,c/=u}if(E[0][0]=e,E[0][1]=n,E[0][2]=i,E[1][0]=r,E[1][1]=o,E[1][2]=a,E[2][0]=s,E[2][1]=l,E[2][2]=c,0===(h=this.nifti_mat33_determ(E)))return null;for(M=-666,v=w=A=x=1,b=2,_=3,f=1;f<=3;f+=1)for(d=1;d<=3;d+=1)if(f!==d)for(p=1;p<=3;p+=1)if(f!==p&&d!==p)for(T[0][0]=T[0][1]=T[0][2]=T[1][0]=T[1][1]=T[1][2]=T[2][0]=T[2][1]=T[2][2]=0,m=-1;m<=1;m+=2)for(g=-1;g<=1;g+=2)for(y=-1;y<=1;y+=2)T[0][f-1]=m,T[1][d-1]=g,T[2][p-1]=y,this.nifti_mat33_determ(T)*h>0&&(u=(S=this.nifti_mat33_mul(T,E))[0][0]+S[1][1]+S[2][2])>M&&(M=u,v=f,b=d,_=p,w=m,A=g,x=y);switch(I=k=C=B=R=P=0,v*w){case 1:I="X",B="+";break;case-1:I="X",B="-";break;case 2:I="Y",B="+";break;case-2:I="Y",B="-";break;case 3:I="Z",B="+";break;case-3:I="Z",B="-"}switch(b*A){case 1:k="X",R="+";break;case-1:k="X",R="-";break;case 2:k="Y",R="+";break;case-2:k="Y",R="-";break;case 3:k="Z",R="+";break;case-3:k="Z",R="-"}switch(_*x){case 1:C="X",P="+";break;case-1:C="X",P="-";break;case 2:C="Y",P="+";break;case-2:C="Y",P="-";break;case 3:C="Z",P="+";break;case-3:C="Z",P="-"}return I+k+C+B+R+P},i.NIFTI1.prototype.nifti_mat33_mul=function(t,e){var n,i,r=[[0,0,0],[0,0,0],[0,0,0]];for(n=0;n<3;n+=1)for(i=0;i<3;i+=1)r[n][i]=t[n][0]*e[0][i]+t[n][1]*e[1][i]+t[n][2]*e[2][i];return r},i.NIFTI1.prototype.nifti_mat33_determ=function(t){var e,n,i,r,o,a,s,l,c;return e=t[0][0],n=t[0][1],i=t[0][2],r=t[1][0],o=t[1][1],a=t[1][2],s=t[2][0],l=t[2][1],e*o*(c=t[2][2])-e*l*a-r*n*c+r*l*i+s*n*a-s*o*i},i.NIFTI1.prototype.getExtensionLocation=function(){return i.NIFTI1.MAGIC_COOKIE+4},i.NIFTI1.prototype.getExtensionSize=function(t){return i.Utils.getIntAt(t,this.getExtensionLocation(),this.littleEndian)},i.NIFTI1.prototype.getExtensionCode=function(t){return i.Utils.getIntAt(t,this.getExtensionLocation()+4,this.littleEndian)},"undefined"!==typeof t&&t.exports&&(t.exports=i.NIFTI1)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.ComponentSpec=i.lossless.ComponentSpec||function(){this.hSamp=0,this.quantTableSel=0,this.vSamp=0},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.ComponentSpec)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.DataStream=i.lossless.DataStream||n(9),i.lossless.Utils=i.lossless.Utils||n(12),i.lossless.HuffmanTable=i.lossless.HuffmanTable||function(){this.l=i.lossless.Utils.createArray(4,2,16),this.th=[],this.v=i.lossless.Utils.createArray(4,2,16,200),this.tc=i.lossless.Utils.createArray(4,2),this.tc[0][0]=0,this.tc[1][0]=0,this.tc[2][0]=0,this.tc[3][0]=0,this.tc[0][1]=0,this.tc[1][1]=0,this.tc[2][1]=0,this.tc[3][1]=0,this.th[0]=0,this.th[1]=0,this.th[2]=0,this.th[3]=0},i.lossless.HuffmanTable.MSB=2147483648,i.lossless.HuffmanTable.prototype.read=function(t,e){var n,i,r,o,a,s,l=0;for(n=t.get16(),l+=2;l<n;){if(l+=1,(r=15&(i=t.get8()))>3)throw new Error("ERROR: Huffman table ID > 3");if((o=i>>4)>2)throw new Error("ERROR: Huffman table [Table class > 2 ]");for(this.th[r]=1,this.tc[r][o]=1,a=0;a<16;a+=1)this.l[r][o][a]=t.get8(),l+=1;for(a=0;a<16;a+=1)for(s=0;s<this.l[r][o][a];s+=1){if(l>n)throw new Error("ERROR: Huffman table format error [count>Lh]");this.v[r][o][a][s]=t.get8(),l+=1}}if(l!==n)throw new Error("ERROR: Huffman table format error [count!=Lf]");for(a=0;a<4;a+=1)for(s=0;s<2;s+=1)0!==this.tc[a][s]&&this.buildHuffTable(e[a][s],this.l[a][s],this.v[a][s]);return 1},i.lossless.HuffmanTable.prototype.buildHuffTable=function(t,e,n){var r,o,a,s,l;for(256,o=0,a=0;a<8;a+=1)for(s=0;s<e[a];s+=1)for(l=0;l<256>>a+1;l+=1)t[o]=n[a][s]|a+1<<8,o+=1;for(a=1;o<256;a+=1,o+=1)t[o]=a|i.lossless.HuffmanTable.MSB;for(r=1,o=0,a=8;a<16;a+=1)for(s=0;s<e[a];s+=1){for(l=0;l<256>>a-7;l+=1)t[256*r+o]=n[a][s]|a+1<<8,o+=1;if(o>=256){if(o>256)throw new Error("ERROR: Huffman table error(1)!");o=0,r+=1}}},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.HuffmanTable)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.DataStream=i.lossless.DataStream||n(9),i.lossless.Utils=i.lossless.Utils||n(12),i.lossless.QuantizationTable=i.lossless.QuantizationTable||function(){this.precision=[],this.tq=[],this.quantTables=i.lossless.Utils.createArray(4,64),this.tq[0]=0,this.tq[1]=0,this.tq[2]=0,this.tq[3]=0},i.lossless.QuantizationTable.enhanceQuantizationTable=function(t,e){var n;for(n=0;n<8;n+=1)t[e[0+n]]*=90,t[e[32+n]]*=90,t[e[16+n]]*=118,t[e[48+n]]*=49,t[e[40+n]]*=71,t[e[8+n]]*=126,t[e[56+n]]*=25,t[e[24+n]]*=106;for(n=0;n<8;n+=1)t[e[0+8*n]]*=90,t[e[4+8*n]]*=90,t[e[2+8*n]]*=118,t[e[6+8*n]]*=49,t[e[5+8*n]]*=71,t[e[1+8*n]]*=126,t[e[7+8*n]]*=25,t[e[3+8*n]]*=106;for(n=0;n<64;n+=1)t[n]>>=6},i.lossless.QuantizationTable.prototype.read=function(t,e){var n,r,o,a,s=0;for(n=t.get16(),s+=2;s<n;){if(s+=1,(o=15&(r=t.get8()))>3)throw new Error("ERROR: Quantization table ID > 3");if(this.precision[o]=r>>4,0===this.precision[o])this.precision[o]=8;else{if(1!==this.precision[o])throw new Error("ERROR: Quantization table precision error");this.precision[o]=16}if(this.tq[o]=1,8===this.precision[o]){for(a=0;a<64;a+=1){if(s>n)throw new Error("ERROR: Quantization table format error");this.quantTables[o][a]=t.get8(),s+=1}i.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[o],e)}else{for(a=0;a<64;a+=1){if(s>n)throw new Error("ERROR: Quantization table format error");this.quantTables[o][a]=t.get16(),s+=2}i.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[o],e)}}if(s!==n)throw new Error("ERROR: Quantization table error [count!=Lq]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.QuantizationTable)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.DataStream=i.lossless.DataStream||n(9),i.lossless.ScanComponent=i.lossless.ScanComponent||n(38),i.lossless.ScanHeader=i.lossless.ScanHeader||function(){this.ah=0,this.al=0,this.numComp=0,this.selection=0,this.spectralEnd=0,this.components=[]},i.lossless.ScanHeader.prototype.read=function(t){var e,n,r,o=0;for(e=t.get16(),o+=2,this.numComp=t.get8(),o+=1,n=0;n<this.numComp;n+=1){if(this.components[n]=new i.lossless.ScanComponent,o>e)throw new Error("ERROR: scan header format error");this.components[n].scanCompSel=t.get8(),o+=1,r=t.get8(),o+=1,this.components[n].dcTabSel=r>>4,this.components[n].acTabSel=15&r}if(this.selection=t.get8(),o+=1,this.spectralEnd=t.get8(),o+=1,r=t.get8(),this.ah=r>>4,this.al=15&r,(o+=1)!==e)throw new Error("ERROR: scan header format error [count!=Ns]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.ScanHeader)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.ScanComponent=i.lossless.ScanComponent||function(){this.acTabSel=0,this.dcTabSel=0,this.scanCompSel=0},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.ScanComponent)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.ComponentSpec=i.lossless.ComponentSpec||n(34),i.lossless.DataStream=i.lossless.DataStream||n(9),i.lossless.FrameHeader=i.lossless.FrameHeader||function(){this.components=[],this.dimX=0,this.dimY=0,this.numComp=0,this.precision=0},i.lossless.FrameHeader.prototype.read=function(t){var e,n,r,o,a=0;for(e=t.get16(),a+=2,this.precision=t.get8(),a+=1,this.dimY=t.get16(),a+=2,this.dimX=t.get16(),a+=2,this.numComp=t.get8(),a+=1,n=1;n<=this.numComp;n+=1){if(a>e)throw new Error("ERROR: frame format error");if(r=t.get8(),(a+=1)>=e)throw new Error("ERROR: frame format error [c>=Lf]");o=t.get8(),a+=1,this.components[r]||(this.components[r]=new i.lossless.ComponentSpec),this.components[r].hSamp=o>>4,this.components[r].vSamp=15&o,this.components[r].quantTableSel=t.get8(),a+=1}if(a!==e)throw new Error("ERROR: frame format error [Lf!=count]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.FrameHeader)},function(t,e,n){"use strict";var i=n(41),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"r3d";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=null,this._renderer=null,this._camera=null,this._controls=null,this._scene=null,this._initRenderer(e),this._initCamera(),this._initScene(),this._initControls(),this._onWindowResize=this._onWindowResize.bind(this),this.addEventListeners()}return t.prototype.add=function(t){this._scene.add(t)},t.prototype.addEventListeners=function(){window.addEventListener("resize",this._onWindowResize,!1)},t.prototype.removeEventListeners=function(){window.removeEventListener("resize",this._onWindowResize,!1)},t.prototype.center=function(t){this._camera.lookAt(t.x,t.y,t.z),this._camera.updateProjectionMatrix(),this._controls.target.set(t.x,t.y,t.z)},t.prototype.render=function(){this._controls.update(),this._renderer.render(this._scene,this._camera)},t.prototype.animate=function(){this.render(),requestAnimationFrame(this.animate.bind(this))},t.prototype._onWindowResize=function(){this._camera.aspect=this._container.clientWidth/this._container.clientHeight,this._camera.updateProjectionMatrix(),this._renderer.setSize(this._container.clientWidth,this._container.clientHeight)},t.prototype._initRenderer=function(t){this._container=document.getElementById(t),this._renderer=new THREE.WebGLRenderer({antialias:!0}),this._renderer.setSize(this._container.clientWidth,this._container.clientHeight),this._renderer.setClearColor(4342338,1),this._renderer.setPixelRatio(window.devicePixelRatio),this._container.appendChild(this._renderer.domElement)},t.prototype._initCamera=function(){this._camera=new THREE.PerspectiveCamera(45,this._container.clientWidth/this._container.clientHeight,1,1e7),this._camera.position.x=250,this._camera.position.y=250,this._camera.position.z=250},t.prototype._initScene=function(){this._scene=new THREE.Scene,this._scene.add(new THREE.AmbientLight(3487029));var t=new THREE.DirectionalLight(16777215,1);t.position.set(200,200,1e3).normalize(),this._scene.add(t);var e=new THREE.DirectionalLight(16777215,1);e.position.set(-200,-200,-1e3).normalize(),this._scene.add(e)},t.prototype._initControls=function(){this._controls=new i.a(this._camera,this._container),this._controls.rotateSpeed=1.4,this._controls.zoomSpeed=1.2,this._controls.panSpeed=.8},r(t,[{key:"container",set:function(t){this._container=t},get:function(){return this._container}}]),t}();e.a=o},function(t,e,n){"use strict";var i=n(2);e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return void 0===t||void 0===t.EventDispatcher?null:function(e){function n(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this)),a=o,s={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM:4,TOUCH_PAN:5,CUSTOM:99};o.object=i,o.domElement=void 0!==r?r:document,o.enabled=!0,o.screen={left:0,top:0,width:0,height:0},o.rotateSpeed=1,o.zoomSpeed=1.2,o.panSpeed=.3,o.noRotate=!1,o.noZoom=!1,o.noPan=!1,o.noCustom=!1,o.forceState=-1,o.staticMoving=!1,o.dynamicDampingFactor=.2,o.minDistance=0,o.maxDistance=1/0,o.keys=[65,83,68],o.target=new t.Vector3;var l=new t.Vector3,c=s.NONE,u=s.NONE,h=new t.Vector3,f=new t.Vector2,d=new t.Vector2,p=new t.Vector3,m=0,g=new t.Vector2,y=new t.Vector2,v=0,b=0,_=new t.Vector2,w=new t.Vector2,A=new t.Vector2,x=new t.Vector2;o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.up0=o.object.up.clone();var S={type:"change"},M={type:"start"},E={type:"end"};o.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}},o.handleEvent=function(t){"function"==typeof this[t.type]&&this[t.type](t)};var T=function(){var e=new t.Vector2;return function(t,n){return e.set((t-a.screen.left)/a.screen.width,(n-a.screen.top)/a.screen.height),e}}(),I=function(){var e=new t.Vector2;return function(t,n){return e.set((t-.5*a.screen.width-a.screen.left)/(.5*a.screen.width),(a.screen.height+2*(a.screen.top-n))/a.screen.width),e}}();function k(t){!1!==a.enabled&&(window.removeEventListener("keydown",k),u=c,c===s.NONE&&(t.keyCode!==a.keys[s.ROTATE]||a.noRotate?t.keyCode!==a.keys[s.ZOOM]||a.noZoom?t.keyCode!==a.keys[s.PAN]||a.noPan||(c=s.PAN):c=s.ZOOM:c=s.ROTATE))}function C(t){!1!==a.enabled&&(c=u,window.addEventListener("keydown",k,!1))}function B(t){!1!==a.enabled&&(t.preventDefault(),t.stopPropagation(),c===s.NONE&&(c=t.button),c!==s.ROTATE||a.noRotate?c!==s.ZOOM||a.noZoom?c!==s.PAN||a.noPan?c!==s.CUSTOM||a.noCustom||(A.copy(T(t.pageX,t.pageY)),x.copy(_)):(_.copy(T(t.pageX,t.pageY)),w.copy(_)):(g.copy(T(t.pageX,t.pageY)),y.copy(g)):(d.copy(I(t.pageX,t.pageY)),f.copy(d)),document.addEventListener("mousemove",R,!1),document.addEventListener("mouseup",P,!1),a.dispatchEvent(M))}function R(t){!1!==a.enabled&&(t.preventDefault(),t.stopPropagation(),c!==s.ROTATE||a.noRotate?c!==s.ZOOM||a.noZoom?c!==s.PAN||a.noPan?c!==s.CUSTOM||a.noCustom||x.copy(T(t.pageX,t.pageY)):w.copy(T(t.pageX,t.pageY)):y.copy(T(t.pageX,t.pageY)):(f.copy(d),d.copy(I(t.pageX,t.pageY))))}function P(t){!1!==a.enabled&&(t.preventDefault(),t.stopPropagation(),-1===a.forceState&&(c=s.NONE),document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",P),a.dispatchEvent(E))}function L(t){if(!1!==a.enabled&&!0!==a.noZoom){switch(t.preventDefault(),t.stopPropagation(),t.deltaMode){case 2:g.y-=.025*t.deltaY;break;case 1:g.y-=.01*t.deltaY;break;default:g.y-=25e-5*t.deltaY}a.dispatchEvent(M),a.dispatchEvent(E)}}function D(t){if(!1!==a.enabled){if(-1===a.forceState)switch(t.touches.length){case 1:c=s.TOUCH_ROTATE,d.copy(I(t.touches[0].pageX,t.touches[0].pageY)),f.copy(d);break;case 2:c=s.TOUCH_ZOOM;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;b=v=Math.sqrt(e*e+n*n);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;_.copy(T(i,r)),w.copy(_);break;default:c=s.NONE}else switch(c){case 0:c=s.TOUCH_ROTATE,d.copy(I(t.touches[0].pageX,t.touches[0].pageY)),f.copy(d);break;case 1:case 4:t.touches.length>=2?(c=s.TOUCH_ZOOM,e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,b=v=Math.sqrt(e*e+n*n)):(c=s.ZOOM,g.copy(T(t.touches[0].pageX,t.touches[0].pageY)),y.copy(g));break;case 2:case 5:t.touches.length>=2?(c=s.TOUCH_PAN,i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2,_.copy(T(i,r)),w.copy(_)):(c=s.PAN,_.copy(T(t.touches[0].pageX,t.touches[0].pageY)),w.copy(_));break;case 99:c=s.CUSTOM,i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2,A.copy(T(i,r)),x.copy(A);break;default:c=s.NONE}a.dispatchEvent(M)}}function N(t){if(!1!==a.enabled)if(t.preventDefault(),t.stopPropagation(),-1===a.forceState)switch(t.touches.length){case 1:f.copy(d),d.copy(I(t.touches[0].pageX,t.touches[0].pageY));break;case 2:var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY;b=Math.sqrt(e*e+n*n);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2;w.copy(T(i,r));break;default:c=s.NONE}else switch(c){case 0:f.copy(d),d.copy(I(t.touches[0].pageX,t.touches[0].pageY));break;case 1:y.copy(T(t.touches[0].pageX,t.touches[0].pageY));break;case 2:w.copy(T(t.touches[0].pageX,t.touches[0].pageY));break;case 4:e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,b=Math.sqrt(e*e+n*n);break;case 5:i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2,w.copy(T(i,r));break;case 99:i=(t.touches[0].pageX+t.touches[1].pageX)/2,r=(t.touches[0].pageY+t.touches[1].pageY)/2,x.copy(T(i,r));break;default:c=s.NONE}}function O(t){if(!1!==a.enabled){if(-1===a.forceState){switch(t.touches.length){case 1:f.copy(d),d.copy(I(t.touches[0].pageX,t.touches[0].pageY));break;case 2:v=b=0;var e=(t.touches[0].pageX+t.touches[1].pageX)/2,n=(t.touches[0].pageY+t.touches[1].pageY)/2;w.copy(T(e,n)),_.copy(w)}c=s.NONE}else switch(c){case 0:f.copy(d),d.copy(I(t.touches[0].pageX,t.touches[0].pageY));break;case 1:case 2:break;case 4:v=b=0,c=s.ZOOM;break;case 5:t.touches.length>=2&&(e=(t.touches[0].pageX+t.touches[1].pageX)/2,n=(t.touches[0].pageY+t.touches[1].pageY)/2,w.copy(T(e,n)),_.copy(w)),c=s.PAN;break;case 99:e=(t.touches[0].pageX+t.touches[1].pageX)/2,n=(t.touches[0].pageY+t.touches[1].pageY)/2,x.copy(T(e,n)),A.copy(x);break;default:c=s.NONE}a.dispatchEvent(E)}}function F(t){t.preventDefault()}return o.rotateCamera=function(){var e=new t.Vector3,n=new t.Quaternion,i=new t.Vector3,r=new t.Vector3,o=new t.Vector3,s=new t.Vector3,l=void 0;return function(){s.set(d.x-f.x,d.y-f.y,0),(l=s.length())?(h.copy(a.object.position).sub(a.target),i.copy(h).normalize(),r.copy(a.object.up).normalize(),o.crossVectors(r,i).normalize(),r.setLength(d.y-f.y),o.setLength(d.x-f.x),s.copy(r.add(o)),e.crossVectors(s,h).normalize(),l*=a.rotateSpeed,n.setFromAxisAngle(e,l),h.applyQuaternion(n),a.object.up.applyQuaternion(n),p.copy(e),m=l):!a.staticMoving&&m&&(m*=Math.sqrt(1-a.dynamicDampingFactor),h.copy(a.object.position).sub(a.target),n.setFromAxisAngle(p,m),h.applyQuaternion(n),a.object.up.applyQuaternion(n)),f.copy(d)}}(),o.zoomCamera=function(){var t=void 0;c===s.TOUCH_ZOOM?(t=v/b,v=b,h.multiplyScalar(t)):1!=(t=1+(y.y-g.y)*a.zoomSpeed)&&t>0&&(h.multiplyScalar(t),a.staticMoving?g.copy(y):g.y+=(y.y-g.y)*this.dynamicDampingFactor)},o.panCamera=function(){var e=new t.Vector2,n=new t.Vector3,i=new t.Vector3;return function(){e.copy(w).sub(_),e.lengthSq()&&(e.multiplyScalar(h.length()*a.panSpeed),i.copy(h).cross(a.object.up).setLength(e.x),i.add(n.copy(a.object.up).setLength(e.y)),a.object.position.add(i),a.target.add(i),a.staticMoving?_.copy(w):_.add(e.subVectors(w,_).multiplyScalar(a.dynamicDampingFactor)))}}(),o.checkDistances=function(){a.noZoom&&a.noPan||(h.lengthSq()>a.maxDistance*a.maxDistance&&a.object.position.addVectors(a.target,h.setLength(a.maxDistance)),h.lengthSq()<a.minDistance*a.minDistance&&a.object.position.addVectors(a.target,h.setLength(a.minDistance)))},o.update=function(){h.subVectors(a.object.position,a.target),a.noRotate||a.rotateCamera(),a.noZoom||a.zoomCamera(),a.noPan||a.panCamera(),a.noCustom||a.custom(A,x),a.object.position.addVectors(a.target,h),a.checkDistances(),a.object.lookAt(a.target),l.distanceToSquared(a.object.position)>1e-6&&(a.dispatchEvent(S),l.copy(a.object.position))},o.reset=function(){c=s.NONE,u=s.NONE,a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.up.copy(a.up0),h.subVectors(a.object.position,a.target),a.object.lookAt(a.target),a.dispatchEvent(S),l.copy(a.object.position)},o.setState=function(t){a.forceState=t,u=t,c=t},o.custom=function(t,e){},o.dispose=function(){this.domElement.removeEventListener("contextmenu",F,!1),this.domElement.removeEventListener("mousedown",B,!1),this.domElement.removeEventListener("wheel",L,!1),this.domElement.removeEventListener("touchstart",D,!1),this.domElement.removeEventListener("touchend",O,!1),this.domElement.removeEventListener("touchmove",N,!1),window.removeEventListener("keydown",k,!1),window.removeEventListener("keyup",C,!1)},o.domElement.addEventListener("contextmenu",F,!1),o.domElement.addEventListener("mousedown",B,!1),o.domElement.addEventListener("wheel",L,!1),o.domElement.addEventListener("touchstart",D,!1),o.domElement.addEventListener("touchend",O,!1),o.domElement.addEventListener("touchmove",N,!1),window.addEventListener("keydown",k,!1),window.addEventListener("keyup",C,!1),o.handleResize(),o.update(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),n}(t.EventDispatcher)}()},function(t,e,n){"use strict";var i=n(3),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._file=null,this._3jsVTK_loader=new THREE.VTKLoader,this._mesh=null,this._materialColor=15277667,this._RAStoLPS=null,this._material=new THREE.MeshLambertMaterial({shading:THREE.SmoothShading,color:this._materialColor,side:THREE.DoubleSide})}return t.prototype.load=function(){var t=this;return this.file?new Promise(function(e,n){t._3jsVTK_loader.load(t.file,function(n){n.computeVertexNormals(),t._mesh=new THREE.Mesh(n,t._material),t._RAStoLPS=new i.a,t._RAStoLPS.set(-1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1),t._mesh.applyMatrix4(t._RAStoLPS),e(t._mesh)},function(){},function(e){console.log(e),n({message:"Couldn't load file: "+t.file+".",error:e})})}):Promise.reject({message:"File is not defined: "+this.file+"."})},r(t,[{key:"file",get:function(){return this._file},set:function(t){this._file=t}},{key:"materialColor",get:function(){return this._materialColor},set:function(t){this._materialColor=t}}]),t}();e.a=o},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(13);class r{constructor(t=0,e=0,n=0,i=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return n.copy(t).slerp(e,i)}static slerpFlat(t,e,n,i,r,o,a){let s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[o+0],f=r[o+1],d=r[o+2],p=r[o+3];if(u!==p||s!==h||l!==f||c!==d){let t=1-a;const e=s*h+l*f+c*d+u*p,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,e*n);t=Math.sin(t*o)/r,a=Math.sin(a*o)/r}const r=a*n;if(s=s*t+h*r,l=l*t+f*r,c=c*t+d*r,u=u*t+p*r,t===1-a){const t=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=t,l*=t,c*=t,u*=t}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,r,o){const a=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[o],h=r[o+1],f=r[o+2],d=r[o+3];return t[e]=a*d+c*u+s*f-l*h,t[e+1]=s*d+c*h+l*u-a*f,t[e+2]=l*d+c*f+a*h-s*u,t[e+3]=c*d-a*u-s*h-l*f,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=s(n/2),f=s(i/2),d=s(r/2);switch(o){case"XYZ":this._x=h*c*u+l*f*d,this._y=l*f*u-h*c*d,this._z=l*c*d+h*f*u,this._w=l*c*u-h*f*d;break;case"YXZ":this._x=h*c*u+l*f*d,this._y=l*f*u-h*c*d,this._z=l*c*d-h*f*u,this._w=l*c*u+h*f*d;break;case"ZXY":this._x=h*c*u-l*f*d,this._y=l*f*u+h*c*d,this._z=l*c*d+h*f*u,this._w=l*c*u-h*f*d;break;case"ZYX":this._x=h*c*u-l*f*d,this._y=l*f*u+h*c*d,this._z=l*c*d-h*f*u,this._w=l*c*u+h*f*d;break;case"YZX":this._x=h*c*u+l*f*d,this._y=l*f*u+h*c*d,this._z=l*c*d-h*f*u,this._w=l*c*u-h*f*d;break;case"XZY":this._x=h*c*u-l*f*d,this._y=l*f*u-h*c*d,this._z=l*c*d+h*f*u,this._w=l*c*u+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],o=e[1],a=e[5],s=e[9],l=e[2],c=e[6],u=e[10],h=n+a+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-s)*t,this._y=(r-l)*t,this._z=(o-i)*t}else if(n>a&&n>u){const t=2*Math.sqrt(1+n-a-u);this._w=(c-s)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(r+l)/t}else if(a>u){const t=2*Math.sqrt(1+a-n-u);this._w=(r-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(s+c)/t}else{const t=2*Math.sqrt(1+u-n-a);this._w=(o-i)/t,this._x=(r+l)/t,this._y=(s+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(i.a.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,o=this._w;let a=o*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}},function(t,e,n){"use strict";var i=n(45),r=n(65),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n._file=null,n._progressbarContainer=null,n._stack=null,n._centerLPS=null,n._xSlice=null,n._ySlice=null,n._zSlice=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._createSlice=function(t){if(this._stack){var e=new i.a(this._stack);e.orientation=t,0===t?(e.border.color=16007990,this._xSlice=e):1===t?(e.bbox.visible=!1,e.border.color=5025616,this._ySlice=e):(e.bbox.visible=!1,e.border.color=2201331,this._zSlice=e),this._centerLPS=e.stack.worldCenter()}},e.prototype.load=function(){var t=this;if(this.file){var e=new r.a(this._progressbarContainer);return e.load(this.file).then(function(){return new Promise(function(n,i){if(e.data.length<=0)return i({message:"No data loaded: "+e.data+"."});var r=e.data[0].mergeSeries(e.data)[0];return e.free(),t._stack=r.stack[0],t._createSlice(0),t.add(t._xSlice),t._createSlice(1),t.add(t._ySlice),t._createSlice(2),t.add(t._zSlice),n(t)})}).catch(function(t){e.free(),window.console.log("Something went wrong loading the volume..."),window.console.log(t)})}return Promise.reject({message:"File not defined: "+this.file+"."})},o(e,[{key:"file",get:function(){return this._file},set:function(t){this._file=t}},{key:"progressbarContainer",set:function(t){this._progressbarContainer=t}},{key:"centerLPS",get:function(){return this._centerLPS}},{key:"stack",get:function(){return this._stack}}]),e}(THREE.Object3D);e.a=a},function(t,e,n){"use strict";var i=n(47),r=n(46),o=n(48),a=n(2),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return void 0===t||void 0===t.Object3D?null:function(e){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this));return i._stack=t,i._bBox=null,i._slice=null,i._border=null,i._dummy=null,i._orientation=0,i._index=0,i._uniforms=null,i._autoWindowLevel=!1,i._outOfBounds=!1,i._orientationMaxIndex=0,i._orientationSpacing=0,i._canvasWidth=0,i._canvasHeight=0,i._borderColor=null,i._create(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),n.prototype._create=function(){this._stack?(this._prepareStack(),this._prepareBBox(),this._prepareSlice(),this._prepareBorder()):window.console.log("no stack to be prepared...")},n.prototype._computeOrientationSpacing=function(){var t=this._stack._spacing;switch(this._orientation){case 0:this._orientationSpacing=t.z;break;case 1:this._orientationSpacing=t.x;break;case 2:this._orientationSpacing=t.y;break;default:this._orientationSpacing=0}},n.prototype._computeOrientationMaxIndex=function(){var t=this._stack.dimensionsIJK;switch(this._orientationMaxIndex=0,this._orientation){case 0:this._orientationMaxIndex=t.z-1;break;case 1:this._orientationMaxIndex=t.x-1;break;case 2:this._orientationMaxIndex=t.y-1}},n.prototype._isIndexOutOfBounds=function(){this._computeOrientationMaxIndex(),this._index>=this._orientationMaxIndex||this._index<0?this._outOfBounds=!0:this._outOfBounds=!1},n.prototype._prepareStack=function(){this._stack.prepared||this._stack.prepare(),this._stack.packed||this._stack.pack()},n.prototype._prepareBBox=function(){var e=Object(r.a)(t);this._bBox=new e(this._stack),this.add(this._bBox)},n.prototype._prepareBorder=function(){var e=Object(i.a)(t);this._border=new e(this._slice),this.add(this._border)},n.prototype._prepareSlice=function(){var e=this._stack.halfDimensionsIJK;this._index=this._prepareSliceIndex(e);var n=this._prepareSlicePosition(e,this._index),i=this._prepareDirection(this._orientation),r=Object(o.a)(t);this._slice=new r(this._stack,this._index,n,i),this.add(this._slice)},n.prototype._prepareSliceIndex=function(t){var e=0;switch(this._orientation){case 0:e=Math.floor(t.z);break;case 1:e=Math.floor(t.x);break;case 2:e=Math.floor(t.y)}return e},n.prototype._prepareSlicePosition=function(e,n){var i=new t.Vector3(0,0,0);switch(this._orientation){case 0:i=new t.Vector3(Math.floor(e.x),Math.floor(e.y),n);break;case 1:i=new t.Vector3(n,Math.floor(e.y),Math.floor(e.z));break;case 2:i=new t.Vector3(Math.floor(e.x),n,Math.floor(e.z))}return i},n.prototype._prepareDirection=function(e){var n=new t.Vector3(0,0,1);switch(e){case 0:n=new t.Vector3(0,0,1);break;case 1:n=new t.Vector3(1,0,0);break;case 2:n=new t.Vector3(0,1,0)}return n},n.prototype.dispose=function(){this.remove(this._slice),this._slice.dispose(),this._slice=null,this._bBox.dispose(),this._bBox=null,this._border.dispose(),this._border=null},s(n,[{key:"stack",get:function(){return this._stack},set:function(t){this._stack=t}},{key:"bbox",get:function(){return this._bBox}},{key:"slice",get:function(){return this._slice}},{key:"border",get:function(){return this._border}},{key:"index",get:function(){return this._index},set:function(t){this._index=t,this._slice.index=t;var e=this._stack.halfDimensionsIJK;this._slice.planePosition=this._prepareSlicePosition(e,this._index),this._border.helpersSlice=this._slice,this._isIndexOutOfBounds()}},{key:"orientation",set:function(t){this._orientation=t,this._computeOrientationMaxIndex(),this._computeOrientationSpacing(),this._slice.spacing=Math.abs(this._orientationSpacing),this._slice.thickness=this._slice.spacing,this._slice.planeDirection=this._prepareDirection(this._orientation),this._border.helpersSlice=this._slice},get:function(){return this._orientation}},{key:"outOfBounds",set:function(t){this._outOfBounds=t},get:function(){return this._outOfBounds}},{key:"orientationMaxIndex",set:function(t){this._orientationMaxIndex=t},get:function(){return this._orientationMaxIndex}},{key:"orientationSpacing",set:function(t){this._orientationSpacing=t},get:function(){return this._orientationSpacing}},{key:"canvasWidth",set:function(t){this._canvasWidth=t,this._slice.canvasWidth=this._canvasWidth},get:function(){return this._canvasWidth}},{key:"canvasHeight",set:function(t){this._canvasHeight=t,this._slice.canvasHeight=this._canvasHeight},get:function(){return this._canvasHeight}},{key:"borderColor",set:function(t){this._borderColor=t,this._border.color=t,this._slice.borderColor=this._borderColor},get:function(){return this._borderColor}}]),n}(t.Object3D)}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(2),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return void 0===t||void 0===t.Object3D?null:function(e){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this));return i._stack=t,i._visible=!0,i._color=16777215,i._material=null,i._geometry=null,i._mesh=null,i._meshStack=null,i._create(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),n.prototype._create=function(){var e=this._stack.dimensionsIJK,n=this._stack.halfDimensionsIJK,i=new t.Vector3(-.5,-.5,-.5),r=new t.BoxGeometry(e.x,e.y,e.z);r.applyMatrix4((new t.Matrix4).makeTranslation(n.x+i.x,n.y+i.y,n.z+i.z)),this._geometry=r,this._material=new t.MeshBasicMaterial({wireframe:!0});var o=new t.Mesh(this._geometry,null);o.applyMatrix4(this._stack.ijk2LPS),o.visible=this._visible,this._meshStack=o,this._mesh=new t.BoxHelper(this._meshStack,this._color),this._material=this._mesh.material,this.add(this._mesh)},n.prototype._update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null),this._create()},n.prototype.dispose=function(){this._mesh.material.dispose(),this._mesh.material=null,this._geometry.dispose(),this._geometry=null,this._material.dispose(),this._material=null},r(n,[{key:"visible",set:function(t){this._visible=t,this._mesh&&(this._mesh.visible=this._visible)},get:function(){return this._visible}},{key:"color",set:function(t){this._color=t,this._material&&this._material.color.set(this._color)},get:function(){return this._color}}]),n}(t.Object3D)};o()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(2),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return void 0===t||void 0===t.Object3D?null:function(e){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this));return i._helpersSlice=t,i._visible=!0,i._color=16711680,i._material=null,i._geometry=null,i._mesh=null,i._create(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),n.prototype._create=function(){if(this._material||(this._material=new t.LineBasicMaterial({color:this._color,linewidth:1})),this._helpersSlice.geometry.vertices){this._geometry=new t.BufferGeometry;var e=this._helpersSlice.geometry.vertices.length,n=new Float32Array(3*(e+1));n.set(this._helpersSlice.geometry.attributes.position.array,0),n.set(this._helpersSlice.geometry.vertices[0].toArray(),3*e),this._geometry.setAttribute("position",new t.Float32BufferAttribute(n,3)),this._mesh=new t.Line(this._geometry,this._material),"IJK"===this._helpersSlice.aabbSpace&&this._mesh.applyMatrix4(this._helpersSlice.stack.ijk2LPS),this._mesh.visible=this._visible,this.add(this._mesh)}},n.prototype._update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh=null),this._create()},n.prototype.dispose=function(){this._mesh.material.dispose(),this._mesh.material=null,this._geometry.dispose(),this._geometry=null,this._material.dispose(),this._material=null},r(n,[{key:"helpersSlice",set:function(t){this._helpersSlice=t,this._update()},get:function(){return this._helpersSlice}},{key:"visible",set:function(t){this._visible=t,this._mesh&&(this._mesh.visible=this._visible)},get:function(){return this._visible}},{key:"color",set:function(t){this._color=t,this._material&&this._material.color.set(this._color)},get:function(){return this._color}}]),n}(t.Object3D)};o()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(56),r=n(55),o=n(54),a=n(50),s=n(49),l=n(2),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return void 0===t||void 0===t.Object3D?null:function(e){function n(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new t.Vector3(0,0,0),c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new t.Vector3(0,0,1),u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"IJK";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this));return h._stack=i,h._invert=h._stack.invert,h._lut="none",h._lutTexture=null,h._intensityAuto=!0,h._interpolation=1,h._index=s,h._windowWidth=null,h._windowCenter=null,h._opacity=1,h._rescaleSlope=null,h._rescaleIntercept=null,h._spacing=1,h._thickness=0,h._thicknessMethod=0,h._lowerThreshold=null,h._upperThreshold=null,h._canvasWidth=0,h._canvasHeight=0,h._borderColor=null,h._planePosition=l,h._planeDirection=c,h._aaBBspace=u,h._material=null,h._textures=[],h._shadersFragment=a.a,h._shadersVertex=o.a,h._uniforms=r.a.uniforms(),h._geometry=null,h._mesh=null,h._visible=!0,h._init(),h._create(),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),n.prototype._init=function(){if(this._stack&&this._stack._prepared&&this._stack._packed)if("IJK"===this._aaBBspace)this._halfDimensions=this._stack.halfDimensionsIJK,this._center=new t.Vector3(this._stack.halfDimensionsIJK.x-.5,this._stack.halfDimensionsIJK.y-.5,this._stack.halfDimensionsIJK.z-.5),this._toAABB=new t.Matrix4;else{var e=this._stack.AABBox();this._halfDimensions=e.clone().multiplyScalar(.5),this._center=this._stack.centerAABBox(),this._toAABB=this._stack.lps2AABB}},n.prototype._create=function(){if(this._stack&&this._stack.prepared&&this._stack.packed){try{var e=Object(i.a)(t);this._geometry=new e(this._halfDimensions,this._center,this._planePosition,this._planeDirection,this._toAABB)}catch(t){return window.console.log(t),void window.console.log("invalid slice geometry - exiting...")}this._geometry.vertices&&(this._material||(this._uniforms.uTextureSize.value=this._stack.textureSize,this._uniforms.uDataDimensions.value=[this._stack.dimensionsIJK.x,this._stack.dimensionsIJK.y,this._stack.dimensionsIJK.z],this._uniforms.uWorldToData.value=this._stack.lps2IJK,this._uniforms.uNumberOfChannels.value=this._stack.numberOfChannels,this._uniforms.uPixelType.value=this._stack.pixelType,this._uniforms.uBitsAllocated.value=this._stack.bitsAllocated,this._uniforms.uPackedPerPixel.value=this._stack.packedPerPixel,this._uniforms.uSpacing.value=this._spacing,this._uniforms.uThickness.value=this._thickness,this._uniforms.uThicknessMethod.value=this._thicknessMethod,this._prepareTexture(),this._uniforms.uTextureContainer.value=this._textures,this._stack.textureUnits>8&&(this._uniforms.uTextureContainer.length=14),this._createMaterial({side:t.DoubleSide})),this.updateIntensitySettings(),this.updateIntensitySettingsUniforms(),this._mesh=new t.Mesh(this._geometry,this._material),"IJK"===this._aaBBspace&&this._mesh.applyMatrix4(this._stack.ijk2LPS),this._mesh.visible=this._visible,this.add(this._mesh))}},n.prototype.updateIntensitySettings=function(){this._intensityAuto?(this.updateIntensitySetting("windowCenter"),this.updateIntensitySetting("windowWidth"),this.updateIntensitySetting("rescaleSlope"),this.updateIntensitySetting("rescaleIntercept")):(null===this._windowCenter&&(this._windowCenter=this._stack.windowCenter),null===this._windowWidth&&(this._windowWidth=this._stack.windowWidth),null===this._rescaleSlope&&(this._rescaleSlope=this._stack.rescaleSlope),null===this._rescaleIntercept&&(this._rescaleIntercept=this._stack.rescaleIntercept)),null===this._upperThreshold&&(this._upperThreshold=this._stack._minMax[1]),null===this._lowerThreshold&&(this._lowerThreshold=this._stack._minMax[0])},n.prototype.updateIntensitySettingsUniforms=function(){var t=0;this._stack._minMax[0]<0&&(t-=this._stack._minMax[0]),this._uniforms.uRescaleSlopeIntercept.value=[this._rescaleSlope,this._rescaleIntercept],this._uniforms.uWindowCenterWidth.value=[t+this._windowCenter,this._windowWidth],this._uniforms.uOpacity.value=this._opacity,this._uniforms.uLowerUpperThreshold.value=[t+this._lowerThreshold,t+this._upperThreshold],this._uniforms.uInvert.value=!0===this._invert?1:0,this._uniforms.uInterpolation.value=this._interpolation,"none"===this._lut?this._uniforms.uLut.value=0:(this._uniforms.uLut.value=1,this._uniforms.uTextureLUT.value=this._lutTexture)},n.prototype.updateIntensitySetting=function(t){this._stack.frame[this._index]&&this._stack.frame[this._index][t]?this["_"+t]=this._stack.frame[this._index][t]:this["_"+t]=this._stack[t]},n.prototype._update=function(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()},n.prototype.dispose=function(){for(var t=0;t<this._textures.length;t++)this._textures[t].dispose(),this._textures[t]=null;this._textures=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null},n.prototype.cartesianEquation=function(){if(!this._geometry||!this._geometry.vertices||this._geometry.vertices.length<3)return new t.Vector4;var e=this._geometry.vertices,n=this._stack.ijk2LPS,i=new t.Vector3(e[0].x,e[0].y,e[0].z).applyMatrix4(n),r=new t.Vector3(e[1].x,e[1].y,e[1].z).applyMatrix4(n),o=new t.Vector3(e[2].x,e[2].y,e[2].z).applyMatrix4(n),a=new t.Vector3,s=new t.Vector3,l=a.subVectors(o,r).cross(s.subVectors(i,r)).normalize();return new t.Vector4(l.x,l.y,l.z,-l.dot(i))},c(n,[{key:"stack",get:function(){return this._stack},set:function(t){this._stack=t}},{key:"spacing",get:function(){return this._spacing},set:function(t){this._spacing=t,this._uniforms.uSpacing.value=this._spacing}},{key:"thickness",get:function(){return this._thickness},set:function(t){this._thickness=t,this._uniforms.uThickness.value=this._thickness}},{key:"thicknessMethod",get:function(){return this._thicknessMethod},set:function(t){this._thicknessMethod=t,this._uniforms.uThicknessMethod.value=this._thicknessMethod}},{key:"windowWidth",get:function(){return this._windowWidth},set:function(t){this._windowWidth=t,this.updateIntensitySettingsUniforms()}},{key:"windowCenter",get:function(){return this._windowCenter},set:function(t){this._windowCenter=t,this.updateIntensitySettingsUniforms()}},{key:"opacity",get:function(){return this._opacity},set:function(t){this._opacity=t,this.updateIntensitySettingsUniforms()}},{key:"upperThreshold",get:function(){return this._upperThreshold},set:function(t){this._upperThreshold=t,this.updateIntensitySettingsUniforms()}},{key:"lowerThreshold",get:function(){return this._lowerThreshold},set:function(t){this._lowerThreshold=t,this.updateIntensitySettingsUniforms()}},{key:"rescaleSlope",get:function(){return this._rescaleSlope},set:function(t){this._rescaleSlope=t,this.updateIntensitySettingsUniforms()}},{key:"rescaleIntercept",get:function(){return this._rescaleIntercept},set:function(t){this._rescaleIntercept=t,this.updateIntensitySettingsUniforms()}},{key:"invert",get:function(){return this._invert},set:function(t){this._invert=t,this.updateIntensitySettingsUniforms()}},{key:"lut",get:function(){return this._lut},set:function(t){this._lut=t}},{key:"lutTexture",get:function(){return this._lutTexture},set:function(t){this._lutTexture=t,this.updateIntensitySettingsUniforms()}},{key:"intensityAuto",get:function(){return this._intensityAuto},set:function(t){this._intensityAuto=t,this.updateIntensitySettings(),this.updateIntensitySettingsUniforms()}},{key:"interpolation",get:function(){return this._interpolation},set:function(t){this._interpolation=t,this.updateIntensitySettingsUniforms(),this._updateMaterial()}},{key:"index",get:function(){return this._index},set:function(t){this._index=t,this._update()}},{key:"planePosition",set:function(t){this._planePosition=t,this._update()},get:function(){return this._planePosition}},{key:"planeDirection",set:function(t){this._planeDirection=t,this._update()},get:function(){return this._planeDirection}},{key:"halfDimensions",set:function(t){this._halfDimensions=t},get:function(){return this._halfDimensions}},{key:"center",set:function(t){this._center=t},get:function(){return this._center}},{key:"aabbSpace",set:function(t){this._aaBBspace=t,this._init()},get:function(){return this._aaBBspace}},{key:"mesh",set:function(t){this._mesh=t},get:function(){return this._mesh}},{key:"geometry",set:function(t){this._geometry=t},get:function(){return this._geometry}},{key:"canvasWidth",set:function(t){this._canvasWidth=t,this._uniforms.uCanvasWidth.value=this._canvasWidth},get:function(){return this._canvasWidth}},{key:"canvasHeight",set:function(t){this._canvasHeight=t,this._uniforms.uCanvasHeight.value=this._canvasHeight},get:function(){return this._canvasHeight}},{key:"borderColor",set:function(e){this._borderColor=e,this._uniforms.uBorderColor.value=new t.Color(e)},get:function(){return this._borderColor}}]),n}(Object(s.a)(t))};u()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(2);var r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return void 0===t||void 0===t.Object3D?null:function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),n.prototype._createMaterial=function(e){var n=new this._shadersFragment(this._uniforms),i=new this._shadersVertex,r={uniforms:this._uniforms,vertexShader:i.compute(),fragmentShader:n.compute()},o=Object.assign(e,r);this._material=new t.ShaderMaterial(o),this._material.needsUpdate=!0},n.prototype._updateMaterial=function(){var t=new this._shadersFragment(this._uniforms),e=new this._shadersVertex;this._material.vertexShader=e.compute(),this._material.fragmentShader=t.compute(),this._material.needsUpdate=!0},n.prototype._prepareTexture=function(){this._textures=[];for(var e=0;e<this._stack._rawData.length;e++){var n=new t.DataTexture(this._stack.rawData[e],this._stack.textureSize,this._stack.textureSize,this._stack.textureType,t.UnsignedByteType,t.UVMapping,t.ClampToEdgeWrapping,t.ClampToEdgeWrapping,t.NearestFilter,t.NearestFilter);n.needsUpdate=!0,n.flipY=!0,this._textures.push(n)}},n}(t.Object3D)};r()},function(t,e,n){"use strict";var i=n(23);var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uniforms=e,this._functions={},this._main=""}return t.prototype.functions=function(){""===this._main&&this.main();var t="";for(var e in this._functions)t+=this._functions[e]+"\n";return t},t.prototype.uniforms=function(){var t="";for(var e in this._uniforms){var n=this._uniforms[e];t+="uniform "+n.typeGLSL+" "+e,n&&n.length&&(t+="["+n.length+"]"),t+=";\n"}return t},t.prototype.main=function(){this._main="\nvoid main(void) {\n\n  // draw border if slice is cropped\n  // float uBorderDashLength = 10.;\n\n  if( uCanvasWidth > 0. &&\n      ((gl_FragCoord.x > uBorderMargin && (gl_FragCoord.x - uBorderMargin) < uBorderWidth) ||\n       (gl_FragCoord.x < (uCanvasWidth - uBorderMargin) && (gl_FragCoord.x + uBorderMargin) > (uCanvasWidth - uBorderWidth) ))){\n    float valueY = mod(gl_FragCoord.y, 2. * uBorderDashLength);\n    if( valueY < uBorderDashLength && gl_FragCoord.y > uBorderMargin && gl_FragCoord.y < (uCanvasHeight - uBorderMargin) ){\n      gl_FragColor = vec4(uBorderColor, 1.);\n      return;\n    }\n  }\n\n  if( uCanvasHeight > 0. &&\n      ((gl_FragCoord.y > uBorderMargin && (gl_FragCoord.y - uBorderMargin) < uBorderWidth) ||\n       (gl_FragCoord.y < (uCanvasHeight - uBorderMargin) && (gl_FragCoord.y + uBorderMargin) > (uCanvasHeight - uBorderWidth) ))){\n    float valueX = mod(gl_FragCoord.x, 2. * uBorderDashLength);\n    if( valueX < uBorderDashLength && gl_FragCoord.x > uBorderMargin && gl_FragCoord.x < (uCanvasWidth - uBorderMargin) ){\n      gl_FragColor = vec4(uBorderColor, 1.);\n      return;\n    }\n  }\n\n  // get texture coordinates of current pixel\n  vec4 dataValue = vec4(0.);\n  vec3 gradient = vec3(1.); // gradient calculations will be skipped if it is equal to vec3(1.) \n  float steps = floor(uThickness / uSpacing + 0.5);\n\n  if (steps > 1.) {\n    vec3 origin = vPos - uThickness * 0.5 * vNormal;\n    vec4 dataValueAcc = vec4(0.);\n    for (float step = 0.; step < 128.; step++) {\n      if (step >= steps) {\n        break;\n      }\n\n      vec4 dataCoordinates = uWorldToData * vec4(origin + step * uSpacing * vNormal, 1.);\n      vec3 currentVoxel = dataCoordinates.xyz;\n      "+Object(i.a)(this,"currentVoxel","dataValueAcc","gradient")+";\n\n      if (step == 0.) {\n        dataValue.r = dataValueAcc.r;\n        continue;\n      }\n\n      if (uThicknessMethod == 0) {\n        dataValue.r = max(dataValueAcc.r, dataValue.r);\n      }\n      if (uThicknessMethod == 1) {\n        dataValue.r += dataValueAcc.r;\n      }\n      if (uThicknessMethod == 2) {\n        dataValue.r = min(dataValueAcc.r, dataValue.r);\n      }\n    }\n\n    if (uThicknessMethod == 1) {\n      dataValue.r /= steps;\n    }\n  } else {\n    vec4 dataCoordinates = uWorldToData * vec4(vPos, 1.);\n    vec3 currentVoxel = dataCoordinates.xyz;\n    "+Object(i.a)(this,"currentVoxel","dataValue","gradient")+"\n  }\n\n  if(uNumberOfChannels == 1){\n    // rescale/slope\n    float realIntensity = dataValue.r * uRescaleSlopeIntercept[0] + uRescaleSlopeIntercept[1];\n  \n    // threshold\n    if (realIntensity < uLowerUpperThreshold[0] || realIntensity > uLowerUpperThreshold[1]) {\n      discard;\n    }\n  \n    // normalize\n    float windowMin = uWindowCenterWidth[0] - uWindowCenterWidth[1] * 0.5;\n    float normalizedIntensity =\n      ( realIntensity - windowMin ) / uWindowCenterWidth[1];\n    dataValue.r = dataValue.g = dataValue.b = normalizedIntensity;\n    dataValue.a = 1.;\n\n    // apply LUT\n    if(uLut == 1){\n      // should opacity be grabbed there?\n      dataValue = texture2D( uTextureLUT, vec2( normalizedIntensity , 1.0) );\n    }\n  \n    // apply segmentation\n    if(uLutSegmentation == 1){\n      // should opacity be grabbed there?\n      //\n      float textureWidth = 256.;\n      float textureHeight = 128.;\n      float min = 0.;\n      // start at 0!\n      int adjustedIntensity = int(floor(realIntensity + 0.5));\n  \n      // Get row and column in the texture\n      int colIndex = int(mod(float(adjustedIntensity), textureWidth));\n      int rowIndex = int(floor(float(adjustedIntensity)/textureWidth));\n  \n      float texWidth = 1./textureWidth;\n      float texHeight = 1./textureHeight;\n    \n      // Map row and column to uv\n      vec2 uv = vec2(0,0);\n      uv.x = 0.5 * texWidth + (texWidth * float(colIndex));\n      uv.y = 1. - (0.5 * texHeight + float(rowIndex) * texHeight);\n  \n      dataValue = texture2D( uTextureLUTSegmentation, uv );\n    }\n  }\n\n  if(uInvert == 1){\n    dataValue.xyz = vec3(1.) - dataValue.xyz;\n  }\n\n  dataValue.a = dataValue.a*uOpacity;\n\n  gl_FragColor = dataValue;\n}\n   "},t.prototype.compute=function(){return"\n// uniforms\n"+this.uniforms()+"\n\n// varying (should fetch it from vertex directly)\nvarying vec3 vPos;\nvarying vec3 vNormal;\n\n// tailored functions\n"+this.functions()+"\n\n// main loop\n"+this._main+"\n      "},t}();e.a=r},function(t,e,n){"use strict";var i=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n.name="texture3d",n._dataCoordinates="dataCoordinates",n._dataValue="dataValue",n._offset="offset",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.api=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._base,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._dataCoordinates,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._dataValue,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._offset;return this._base=t,this.compute(e,n,i)},e.prototype.compute=function(t,e,n){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+t+", "+e+", "+n+");"},e.prototype.computeDefinition=function(){var t="\n      step( abs( textureIndexF - 0.0 ), 0.0 ) * texture2D(uTextureContainer[0], uv) +\n      step( abs( textureIndexF - 1.0 ), 0.0 ) * texture2D(uTextureContainer[1], uv) +\n      step( abs( textureIndexF - 2.0 ), 0.0 ) * texture2D(uTextureContainer[2], uv) +\n      step( abs( textureIndexF - 3.0 ), 0.0 ) * texture2D(uTextureContainer[3], uv) +\n      step( abs( textureIndexF - 4.0 ), 0.0 ) * texture2D(uTextureContainer[4], uv) +\n      step( abs( textureIndexF - 5.0 ), 0.0 ) * texture2D(uTextureContainer[5], uv) +\n      step( abs( textureIndexF - 6.0 ), 0.0 ) * texture2D(uTextureContainer[6], uv)";14===this._base._uniforms.uTextureContainer.length&&(t+=" +\n      step( abs( textureIndexF - 7.0 ), 0.0 ) * texture2D(uTextureContainer[7], uv) +\n      step( abs( textureIndexF - 8.0 ), 0.0 ) * texture2D(uTextureContainer[8], uv) +\n      step( abs( textureIndexF - 9.0 ), 0.0 ) * texture2D(uTextureContainer[9], uv) +\n      step( abs( textureIndexF - 10.0 ), 0.0 ) * texture2D(uTextureContainer[10], uv) +\n      step( abs( textureIndexF - 11.0 ), 0.0 ) * texture2D(uTextureContainer[11], uv) +\n      step( abs( textureIndexF - 12.0 ), 0.0 ) * texture2D(uTextureContainer[12], uv) +\n      step( abs( textureIndexF - 13.0 ), 0.0 ) * texture2D(uTextureContainer[13], uv)"),this._definition="\nvoid "+this._name+"(in ivec3 dataCoordinates, out vec4 dataValue, out int offset){\n  float textureSizeF = float(uTextureSize);\n  int voxelsPerTexture = uTextureSize*uTextureSize;\n\n  int index = dataCoordinates.x\n            + dataCoordinates.y * uDataDimensions.x\n            + dataCoordinates.z * uDataDimensions.y * uDataDimensions.x;\n  \n  // dividing an integer by an integer will give you an integer result, rounded down\n  // can not get float numbers to work :(\n  int packedIndex = index/uPackedPerPixel;\n  offset = index - uPackedPerPixel*packedIndex;\n\n  // Map data index to right sampler2D texture\n  int textureIndex = packedIndex/voxelsPerTexture;\n  int inTextureIndex = packedIndex - voxelsPerTexture*textureIndex;\n\n  // Get row and column in the texture\n  int rowIndex = inTextureIndex/uTextureSize;\n  float rowIndexF = float(rowIndex);\n  float colIndex = float(inTextureIndex - uTextureSize * rowIndex);\n\n  // Map row and column to uv\n  vec2 uv = vec2(0,0);\n  uv.x = (0.5 + colIndex) / textureSizeF;\n  uv.y = 1. - (0.5 + rowIndexF) / textureSizeF;\n\n  float textureIndexF = float(textureIndex);\n  dataValue = vec4(0.) + "+t+";\n}\n    "},e}(n(8).a);e.a=new i},function(t,e,n){"use strict";var i=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n.name="unpack",n._packedData="packedData",n._offset="offset",n._unpackedData="unpackedData",n._base._uniforms={uNumberOfChannels:{value:1},uBitsAllocated:{value:16},uPixelType:{value:0}},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.api=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._base,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._packedData,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._offset,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._unpackedData;return this._base=t,this.compute(e,n,i)},e.prototype.compute=function(t,e,n){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+t+", "+e+", "+n+");"},e.prototype.computeDefinition=function(){var t="";if(1===this._base._uniforms.uNumberOfChannels.value)switch(this._base._uniforms.uBitsAllocated.value){case 1:case 8:t=this.upack8();break;case 16:t=this.upack16();break;case 32:t=this.upack32();break;default:t=this.upackIdentity()}else t=this.upackIdentity();this._definition="\nvoid "+this._name+"(in vec4 packedData, in int offset, out vec4 unpackedData){\n\n"+t+"\n\n}  \n    "},e.prototype.upack8=function(){return this._base._functions.uInt8=this.uInt8(),"\nfloat floatedOffset = float(offset);\nfloat floatedOffsetSquared = floatedOffset * floatedOffset;\nuInt8(\n  step( floatedOffsetSquared , 0.0 ) * packedData.r +\n  step( floatedOffsetSquared - 2. * floatedOffset + 1., 0.0 ) * packedData.g +\n  step( floatedOffsetSquared - 2. * 2. *  floatedOffset + 4., 0.0 ) * packedData.b +\n  step( floatedOffsetSquared - 2. * 3. *  floatedOffset + 9., 0.0 ) * packedData.a\n  ,\n  unpackedData.x);\n    "},e.prototype.upack16=function(){return this._base._functions.uInt16=this.uInt16(),"\nfloat floatedOffset = float(offset);\nuInt16(\n  packedData.r * (1. - floatedOffset) + packedData.b * floatedOffset,\n  packedData.g * (1. - floatedOffset) + packedData.a * floatedOffset,\n  unpackedData.x);\n    "},e.prototype.upack32=function(){return 0===this._base._uniforms.uPixelType.value?(this._base._functions.uInt32=this.uInt32(),"\nuInt32(\n  packedData.r,\n  packedData.g,\n  packedData.b,\n  packedData.a,\n  unpackedData.x);\n      "):(this._base._functions.uFloat32=this.uFloat32(),"\nuFloat32(\n  packedData.r,\n  packedData.g,\n  packedData.b,\n  packedData.a,\n  unpackedData.x);\n      ")},e.prototype.upackIdentity=function(){return"\nunpackedData = packedData;\n      "},e.prototype.uInt8=function(){return"\nvoid uInt8(in float r, out float value){\n  value = r * 255.;\n}\n    "},e.prototype.uInt16=function(){return"\nvoid uInt16(in float r, in float a, out float value){\n  value = r * 255. + a * 255. * 256.;\n}\n    "},e.prototype.uInt32=function(){return"\nvoid uInt32(in float r, in float g, in float b, in float a, out float value){\n  value = r * 255. + g * 255. * 256. + b * 255. * 256. * 256. + a * 255. * 256. * 256. * 256.;\n  // value = r * 255. + g * 65025. + b * 16581375. + a * 4228250625.;\n}\n    "},e.prototype.uFloat32=function(){return"\nvoid uFloat32(in float r, in float g, in float b, in float a, out float value){\n\n  // create arrays containing bits for rgba values\n  // value between 0 and 255\n  value = r * 255.;\n  int bytemeR[8];\n  bytemeR[0] = int(floor(value / 128.));\n  value -= float(bytemeR[0] * 128);\n  bytemeR[1] = int(floor(value / 64.));\n  value -= float(bytemeR[1] * 64);\n  bytemeR[2] = int(floor(value / 32.));\n  value -= float(bytemeR[2] * 32);\n  bytemeR[3] = int(floor(value / 16.));\n  value -= float(bytemeR[3] * 16);\n  bytemeR[4] = int(floor(value / 8.));\n  value -= float(bytemeR[4] * 8);\n  bytemeR[5] = int(floor(value / 4.));\n  value -= float(bytemeR[5] * 4);\n  bytemeR[6] = int(floor(value / 2.));\n  value -= float(bytemeR[6] * 2);\n  bytemeR[7] = int(floor(value));\n\n  value = g * 255.;\n  int bytemeG[8];\n  bytemeG[0] = int(floor(value / 128.));\n  value -= float(bytemeG[0] * 128);\n  bytemeG[1] = int(floor(value / 64.));\n  value -= float(bytemeG[1] * 64);\n  bytemeG[2] = int(floor(value / 32.));\n  value -= float(bytemeG[2] * 32);\n  bytemeG[3] = int(floor(value / 16.));\n  value -= float(bytemeG[3] * 16);\n  bytemeG[4] = int(floor(value / 8.));\n  value -= float(bytemeG[4] * 8);\n  bytemeG[5] = int(floor(value / 4.));\n  value -= float(bytemeG[5] * 4);\n  bytemeG[6] = int(floor(value / 2.));\n  value -= float(bytemeG[6] * 2);\n  bytemeG[7] = int(floor(value));\n\n  value = b * 255.;\n  int bytemeB[8];\n  bytemeB[0] = int(floor(value / 128.));\n  value -= float(bytemeB[0] * 128);\n  bytemeB[1] = int(floor(value / 64.));\n  value -= float(bytemeB[1] * 64);\n  bytemeB[2] = int(floor(value / 32.));\n  value -= float(bytemeB[2] * 32);\n  bytemeB[3] = int(floor(value / 16.));\n  value -= float(bytemeB[3] * 16);\n  bytemeB[4] = int(floor(value / 8.));\n  value -= float(bytemeB[4] * 8);\n  bytemeB[5] = int(floor(value / 4.));\n  value -= float(bytemeB[5] * 4);\n  bytemeB[6] = int(floor(value / 2.));\n  value -= float(bytemeB[6] * 2);\n  bytemeB[7] = int(floor(value));\n\n  value = a * 255.;\n  int bytemeA[8];\n  bytemeA[0] = int(floor(value / 128.));\n  value -= float(bytemeA[0] * 128);\n  bytemeA[1] = int(floor(value / 64.));\n  value -= float(bytemeA[1] * 64);\n  bytemeA[2] = int(floor(value / 32.));\n  value -= float(bytemeA[2] * 32);\n  bytemeA[3] = int(floor(value / 16.));\n  value -= float(bytemeA[3] * 16);\n  bytemeA[4] = int(floor(value / 8.));\n  value -= float(bytemeA[4] * 8);\n  bytemeA[5] = int(floor(value / 4.));\n  value -= float(bytemeA[5] * 4);\n  bytemeA[6] = int(floor(value / 2.));\n  value -= float(bytemeA[6] * 2);\n  bytemeA[7] = int(floor(value));\n\n  // compute float32 value from bit arrays\n\n  // sign\n  int issigned = 1 - 2 * bytemeR[0];\n  //   issigned = int(pow(-1., float(bytemeR[0])));\n\n  // exponent\n  int exponent = 0;\n\n  exponent += bytemeR[1] * int(pow(2., 7.));\n  exponent += bytemeR[2] * int(pow(2., 6.));\n  exponent += bytemeR[3] * int(pow(2., 5.));\n  exponent += bytemeR[4] * int(pow(2., 4.));\n  exponent += bytemeR[5] * int(pow(2., 3.));\n  exponent += bytemeR[6] * int(pow(2., 2.));\n  exponent += bytemeR[7] * int(pow(2., 1.));\n\n  exponent += bytemeG[0];\n\n\n  // fraction\n  float fraction = 0.;\n\n  fraction = float(bytemeG[1]) * pow(2., -1.);\n  fraction += float(bytemeG[2]) * pow(2., -2.);\n  fraction += float(bytemeG[3]) * pow(2., -3.);\n  fraction += float(bytemeG[4]) * pow(2., -4.);\n  fraction += float(bytemeG[5]) * pow(2., -5.);\n  fraction += float(bytemeG[6]) * pow(2., -6.);\n  fraction += float(bytemeG[7]) * pow(2., -7.);\n\n  fraction += float(bytemeB[0]) * pow(2., -8.);\n  fraction += float(bytemeB[1]) * pow(2., -9.);\n  fraction += float(bytemeB[2]) * pow(2., -10.);\n  fraction += float(bytemeB[3]) * pow(2., -11.);\n  fraction += float(bytemeB[4]) * pow(2., -12.);\n  fraction += float(bytemeB[5]) * pow(2., -13.);\n  fraction += float(bytemeB[6]) * pow(2., -14.);\n  fraction += float(bytemeB[7]) * pow(2., -15.);\n\n  fraction += float(bytemeA[0]) * pow(2., -16.);\n  fraction += float(bytemeA[1]) * pow(2., -17.);\n  fraction += float(bytemeA[2]) * pow(2., -18.);\n  fraction += float(bytemeA[3]) * pow(2., -19.);\n  fraction += float(bytemeA[4]) * pow(2., -20.);\n  fraction += float(bytemeA[5]) * pow(2., -21.);\n  fraction += float(bytemeA[6]) * pow(2., -22.);\n  fraction += float(bytemeA[7]) * pow(2., -23.);\n\n  value = float(issigned) * pow( 2., float(exponent - 127)) * (1. + fraction);\n}\n    "},e}(n(8).a);e.a=new i},function(t,e,n){"use strict";var i=n(8),r=n(4);var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n.name="interpolationTrilinear",n._currentVoxel="currentVoxel",n._dataValue="dataValue",n._gradient="gradient",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.api=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._base,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._currentVoxel,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._dataValue,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._gradient;return this._base=t,this.compute(e,n,i)},e.prototype.compute=function(t,e,n){return this.computeDefinition(),this._base._functions[this._name]=this._definition,this._name+"("+t+", "+e+", "+n+");"},e.prototype.computeDefinition=function(){this._definition="\nvoid trilinearInterpolation(\n  in vec3 normalizedPosition,\n  out vec4 interpolatedValue,\n  in vec4 v000, in vec4 v100,\n  in vec4 v001, in vec4 v101,\n  in vec4 v010, in vec4 v110,\n  in vec4 v011, in vec4 v111) {\n  // https://en.wikipedia.org/wiki/Trilinear_interpolation\n  vec4 c00 = v000 * ( 1.0 - normalizedPosition.x ) + v100 * normalizedPosition.x;\n  vec4 c01 = v001 * ( 1.0 - normalizedPosition.x ) + v101 * normalizedPosition.x;\n  vec4 c10 = v010 * ( 1.0 - normalizedPosition.x ) + v110 * normalizedPosition.x;\n  vec4 c11 = v011 * ( 1.0 - normalizedPosition.x ) + v111 * normalizedPosition.x;\n\n  // c0 and c1\n  vec4 c0 = c00 * ( 1.0 - normalizedPosition.y) + c10 * normalizedPosition.y;\n  vec4 c1 = c01 * ( 1.0 - normalizedPosition.y) + c11 * normalizedPosition.y;\n\n  // c\n  vec4 c = c0 * ( 1.0 - normalizedPosition.z) + c1 * normalizedPosition.z;\n  interpolatedValue = c;\n}\n\nvoid "+this._name+"(in vec3 currentVoxel, out vec4 dataValue, out vec3 gradient){\n\n  vec3 lower_bound = floor(currentVoxel);\n  lower_bound = max(vec3(0.), lower_bound);\n  \n  vec3 higher_bound = lower_bound + vec3(1.);\n\n  vec3 normalizedPosition = (currentVoxel - lower_bound);\n  normalizedPosition =  max(vec3(0.), normalizedPosition);\n\n  vec4 interpolatedValue = vec4(0.);\n\n  //\n  // fetch values required for interpolation\n  //\n  vec4 v000 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c000 = vec3(lower_bound.x, lower_bound.y, lower_bound.z);\n  "+r.a.api(this._base,"c000","v000")+"\n\n  //\n  vec4 v100 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c100 = vec3(higher_bound.x, lower_bound.y, lower_bound.z);\n  "+r.a.api(this._base,"c100","v100")+"\n\n  //\n  vec4 v001 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c001 = vec3(lower_bound.x, lower_bound.y, higher_bound.z);\n  "+r.a.api(this._base,"c001","v001")+"\n\n  //\n  vec4 v101 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c101 = vec3(higher_bound.x, lower_bound.y, higher_bound.z);\n  "+r.a.api(this._base,"c101","v101")+"\n  \n  //\n  vec4 v010 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c010 = vec3(lower_bound.x, higher_bound.y, lower_bound.z);\n  "+r.a.api(this._base,"c010","v010")+"\n\n  vec4 v110 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c110 = vec3(higher_bound.x, higher_bound.y, lower_bound.z);\n  "+r.a.api(this._base,"c110","v110")+"\n\n  //\n  vec4 v011 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c011 = vec3(lower_bound.x, higher_bound.y, higher_bound.z);\n  "+r.a.api(this._base,"c011","v011")+"\n\n  vec4 v111 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c111 = vec3(higher_bound.x, higher_bound.y, higher_bound.z);\n  "+r.a.api(this._base,"c111","v111")+"\n\n  // compute interpolation at position\n  trilinearInterpolation(normalizedPosition, interpolatedValue ,v000, v100, v001, v101, v010,v110, v011,v111);\n  dataValue = interpolatedValue;\n\n  // That breaks shading in volume rendering\n  // if (gradient.x == 1.) { // skip gradient calculation for slice helper\n  //  return;\n  // }\n\n  // compute gradient\n  float gradientStep = 0.005;\n\n  // x axis\n  vec3 g100 = vec3(1., 0., 0.);\n  vec3 ng100 = normalizedPosition + g100 * gradientStep;\n  ng100.x = min(1., ng100.x);\n\n  vec4 vg100 = vec4(0.);\n  trilinearInterpolation(ng100, vg100 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go100 = -g100;\n  vec3 ngo100 = normalizedPosition + go100 * gradientStep;\n  ngo100.x = max(0., ngo100.x);\n\n  vec4 vgo100 = vec4(0.);\n  trilinearInterpolation(ngo100, vgo100 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.x = (g100.x * vg100.x + go100.x * vgo100.x);\n\n  // y axis\n  vec3 g010 = vec3(0., 1., 0.);\n  vec3 ng010 = normalizedPosition + g010 * gradientStep;\n  ng010.y = min(1., ng010.y);\n\n  vec4 vg010 = vec4(0.);\n  trilinearInterpolation(ng010, vg010 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go010 = -g010;\n  vec3 ngo010 = normalizedPosition + go010 * gradientStep;\n  ngo010.y = max(0., ngo010.y);\n\n  vec4 vgo010 = vec4(0.);\n  trilinearInterpolation(ngo010, vgo010 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.y = (g010.y * vg010.x + go010.y * vgo010.x);\n\n  // z axis\n  vec3 g001 = vec3(0., 0., 1.);\n  vec3 ng001 = normalizedPosition + g001 * gradientStep;\n  ng001.z = min(1., ng001.z);\n\n  vec4 vg001 = vec4(0.);\n  trilinearInterpolation(ng001, vg001 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go001 = -g001;\n  vec3 ngo001 = normalizedPosition + go001 * gradientStep;\n  ngo001.z = max(0., ngo001.z);\n\n  vec4 vgo001 = vec4(0.);\n  trilinearInterpolation(ngo001, vgo001 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.z = (g001.z * vg001.x + go001.z * vgo001.x);\n\n  // normalize gradient\n  // +0.0001  instead of if?\n  float gradientMagnitude = length(gradient);\n  if (gradientMagnitude > 0.0) {\n    gradient = -(1. / gradientMagnitude) * gradient;\n  }\n}\n    "},e}(i.a);e.a=new o},function(t,e,n){"use strict";var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.prototype.compute=function(){return"\nvarying vec3 vPos;\nvarying vec3 vNormal;\n\nvoid main() {\n  vNormal = normal;\n  vPos = (modelMatrix * vec4(position, 1.0 )).xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "},t}();e.a=i},function(t,e,n){"use strict";var i=n(3);var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.uniforms=function(){return{uTextureSize:{type:"i",value:0,typeGLSL:"int"},uTextureContainer:{type:"tv",value:[],typeGLSL:"sampler2D",length:7},uDataDimensions:{type:"iv",value:[0,0,0],typeGLSL:"ivec3"},uWorldToData:{type:"m4",value:new i.a,typeGLSL:"mat4"},uWindowCenterWidth:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uLowerUpperThreshold:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uRescaleSlopeIntercept:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uNumberOfChannels:{type:"i",value:1,typeGLSL:"int"},uBitsAllocated:{type:"i",value:8,typeGLSL:"int"},uInvert:{type:"i",value:0,typeGLSL:"int"},uLut:{type:"i",value:0,typeGLSL:"int"},uTextureLUT:{type:"t",value:[],typeGLSL:"sampler2D"},uLutSegmentation:{type:"i",value:0,typeGLSL:"int"},uTextureLUTSegmentation:{type:"t",value:[],typeGLSL:"sampler2D"},uPixelType:{type:"i",value:0,typeGLSL:"int"},uPackedPerPixel:{type:"i",value:1,typeGLSL:"int"},uInterpolation:{type:"i",value:1,typeGLSL:"int"},uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uBorderColor:{type:"v3",value:[1,0,.5],typeGLSL:"vec3"},uBorderWidth:{type:"f",value:2,typeGLSL:"float"},uBorderMargin:{type:"f",value:2,typeGLSL:"float"},uBorderDashLength:{type:"f",value:10,typeGLSL:"float"},uOpacity:{type:"f",value:1,typeGLSL:"float"},uSpacing:{type:"f",value:0,typeGLSL:"float"},uThickness:{type:"f",value:0,typeGLSL:"float"},uThicknessMethod:{type:"i",value:0,typeGLSL:"int"}}},t}();e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(57),r=n(1),o=n(2);var a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return void 0===t||void 0===t.ShapeBufferGeometry?null:function(e){function n(o,a,s,l){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new t.Matrix4;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var u={halfDimensions:o,center:a,toAABB:c},h={position:s,direction:l},f=i.a.aabbPlane(u,h);if(f.length<3)throw window.console.log("WARNING: Less than 3 intersections between AABB and Plane."),window.console.log("AABB"),window.console.log(u),window.console.log("Plane"),window.console.log(h),window.console.log("exiting..."),new Error("geometries.slice has less than 3 intersections, can not create a valid geometry.");var d=r.a.orderIntersections(f,l),p=new t.Shape;p.moveTo(d[0].xy.x,d[0].xy.y);var m=new Float32Array(3*d.length);m.set(d[0].toArray(),0);for(var g=1;g<d.length;g++)m.set(d[g].toArray(),3*g),p.lineTo(d[g].xy.x,d[g].xy.y);p.lineTo(d[0].xy.x,d[0].xy.y),console.log("test:!!!!!!!!!!!!");var y=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.call(this,p));return y.type="SliceBufferGeometry",y.setAttribute("position",new t.Float32BufferAttribute(m,3)),y.vertices=d,y}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),n}(t.ShapeBufferGeometry)};a()},function(t,e,n){"use strict";var i=n(1),r=n(6),o=n(3),a=n(0);var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.aabbPlane=function(t,e){var n=[];if(!this.validateAabb(t)||!this.validatePlane(e))return window.console.log("Invalid aabb or plane provided."),!1;var r=new o.a;r.getInverse(t.toAABB);var s=e.direction.clone().applyMatrix4(t.toAABB),l=new a.a(0,0,0).applyMatrix4(t.toAABB),c=this.posdir(e.position.clone().applyMatrix4(t.toAABB),new a.a(s.x-l.x,s.y-l.y,s.z-l.z).normalize()),u=i.a.bbox(t.center,t.halfDimensions),h=new a.a(new a.a(1,0,0),new a.a(0,1,0),new a.a(0,0,1)),f=this.posdir(new a.a(t.center.x-t.halfDimensions.x,t.center.y-t.halfDimensions.y,t.center.z-t.halfDimensions.z),h.x);this.rayPlaneInBBox(f,c,u,n),f.direction=h.y,this.rayPlaneInBBox(f,c,u,n),f.direction=h.z,this.rayPlaneInBBox(f,c,u,n);var d=this.posdir(new a.a(t.center.x+t.halfDimensions.x,t.center.y+t.halfDimensions.y,t.center.z+t.halfDimensions.z),h.x);this.rayPlaneInBBox(d,c,u,n),d.direction=h.y,this.rayPlaneInBBox(d,c,u,n),d.direction=h.z,this.rayPlaneInBBox(d,c,u,n);var p=this.posdir(new a.a(t.center.x+t.halfDimensions.x,t.center.y-t.halfDimensions.y,t.center.z-t.halfDimensions.z),h.y);this.rayPlaneInBBox(p,c,u,n),p.direction=h.z,this.rayPlaneInBBox(p,c,u,n);var m=this.posdir(new a.a(t.center.x-t.halfDimensions.x,t.center.y+t.halfDimensions.y,t.center.z-t.halfDimensions.z),h.x);this.rayPlaneInBBox(m,c,u,n),m.direction=h.z,this.rayPlaneInBBox(m,c,u,n);var g=this.posdir(new a.a(t.center.x-t.halfDimensions.x,t.center.y-t.halfDimensions.y,t.center.z+t.halfDimensions.z),h.x);return this.rayPlaneInBBox(g,c,u,n),g.direction=h.y,this.rayPlaneInBBox(g,c,u,n),n.map(function(t){return t.applyMatrix4(r)}),n},t.rayPlane=function(t,e){if(0!==t.direction.dot(e.direction)){var n=(e.direction.x*(e.position.x-t.position.x)+e.direction.y*(e.position.y-t.position.y)+e.direction.z*(e.position.z-t.position.z))/(e.direction.x*t.direction.x+e.direction.y*t.direction.y+e.direction.z*t.direction.z);return new a.a(t.position.x+n*t.direction.x,t.position.y+n*t.direction.y,t.position.z+n*t.direction.z)}return null},t.rayBox=function(t,e){var n=[],r=i.a.bbox(e.center,e.halfDimensions),o=this.posdir(new a.a(r.min.x,e.center.y,e.center.z),new a.a(-1,0,0));return this.rayPlaneInBBox(t,o,r,n),o=this.posdir(new a.a(r.max.x,e.center.y,e.center.z),new a.a(1,0,0)),this.rayPlaneInBBox(t,o,r,n),o=this.posdir(new a.a(e.center.x,r.min.y,e.center.z),new a.a(0,-1,0)),this.rayPlaneInBBox(t,o,r,n),o=this.posdir(new a.a(e.center.x,r.max.y,e.center.z),new a.a(0,1,0)),this.rayPlaneInBBox(t,o,r,n),o=this.posdir(new a.a(e.center.x,e.center.y,r.min.z),new a.a(0,0,-1)),this.rayPlaneInBBox(t,o,r,n),o=this.posdir(new a.a(e.center.x,e.center.y,r.max.z),new a.a(0,0,1)),this.rayPlaneInBBox(t,o,r,n),n},t.rayPlaneInBBox=function(t,e,n,i){var r=this.rayPlane(t,e);r&&this.inBBox(r,n)&&(i.find(this.findIntersection(r))||i.push(r))},t.findIntersection=function(t){return function(e,n,i){return t.x===e.x&&t.y===e.y&&t.z===e.z}},t.inBBox=function(t,e){return!!(t&&t.x>=e.min.x-1e-4&&t.y>=e.min.y-1e-4&&t.z>=e.min.z-1e-4&&t.x<=e.max.x+1e-4&&t.y<=e.max.y+1e-4&&t.z<=e.max.z+1e-4)},t.posdir=function(t,e){return{position:t,direction:e}},t.validatePlane=function(t){return null===t?(window.console.log("Invalid plane."),window.console.log(t),!1):r.a.vector3(t.position)?!!r.a.vector3(t.direction)||(window.console.log("Invalid plane.direction."),window.console.log(t.direction),!1):(window.console.log("Invalid plane.position."),window.console.log(t.position),!1)},t.validateAabb=function(t){return null===t?(window.console.log("Invalid aabb."),window.console.log(t),!1):r.a.matrix4(t.toAABB)?r.a.vector3(t.center)?!!(r.a.vector3(t.halfDimensions)&&t.halfDimensions.x>=0&&t.halfDimensions.y>=0&&t.halfDimensions.z>=0)||(window.console.log("Invalid aabb.halfDimensions."),window.console.log(t.halfDimensions),!1):(window.console.log("Invalid aabb.center."),window.console.log(t.center),!1):(window.console.log("Invalid aabb.toAABB: "),window.console.log(t.toAABB),!1)},t}();e.a=s},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(0);class r{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new i.a(1/0,1/0,1/0),this.max=void 0!==e?e:new i.a(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.length;s<l;s+=3){const l=t[s],c=t[s+1],u=t[s+2];l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.count;s<l;s++){const l=t.getX(s),c=t.getY(s),u=t.getZ(s);l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=s.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new i.a),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new i.a),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),l.copy(e.boundingBox),l.applyMatrix4(t.matrixWorld),this.union(l));const n=t.children;for(let t=0,e=n.length;t<e;t++)this.expandByObject(n[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new i.a),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,s),s.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(m),g.subVectors(this.max,m),c.subVectors(t.a,m),u.subVectors(t.b,m),h.subVectors(t.c,m),f.subVectors(u,c),d.subVectors(h,u),p.subVectors(c,h);let e=[0,-f.z,f.y,0,-d.z,d.y,0,-p.z,p.y,f.z,0,-f.x,d.z,0,-d.x,p.z,0,-p.x,-f.y,f.x,0,-d.y,d.x,0,-p.y,p.x,0];return!!o(e,c,u,h,g)&&(!!o(e=[1,0,0,0,1,0,0,0,1],c,u,h,g)&&(y.crossVectors(f,d),o(e=[y.x,y.y,y.z],c,u,h,g)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new i.a),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return s.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(s).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(a),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function o(t,e,n,i,r){for(let o=0,a=t.length-3;o<=a;o+=3){v.fromArray(t,o);const a=r.x*Math.abs(v.x)+r.y*Math.abs(v.y)+r.z*Math.abs(v.z),s=e.dot(v),l=n.dot(v),c=i.dot(v);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const a=[new i.a,new i.a,new i.a,new i.a,new i.a,new i.a,new i.a,new i.a],s=new i.a,l=new r,c=new i.a,u=new i.a,h=new i.a,f=new i.a,d=new i.a,p=new i.a,m=new i.a,g=new i.a,y=new i.a,v=new i.a},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(60),r=n(61);function o(t,e,n,o){this.ray=new i.a(t,e),this.near=n||0,this.far=o||1/0,this.camera=null,this.layers=new r.a,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function a(t,e){return t.distance-e.distance}function s(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)s(i[t],e,n,!0)}}Object.assign(o.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){const i=n||[];return s(t,this,i,e),i.sort(a),i},intersectObjects:function(t,e,n){const i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let n=0,r=t.length;n<r;n++)s(t[n],this,i,e);return i.sort(a),i}})},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var i=n(0);const r=new i.a,o=new i.a,a=new i.a,s=new i.a,l=new i.a,c=new i.a,u=new i.a;class h{constructor(t,e){this.origin=void 0!==t?t:new i.a,this.direction=void 0!==e?e:new i.a(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new i.a),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,r)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new i.a),e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=r.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(r.copy(this.direction).multiplyScalar(e).add(this.origin),r.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){o.copy(t).add(e).multiplyScalar(.5),a.copy(e).sub(t).normalize(),s.copy(this.origin).sub(o);const r=.5*t.distanceTo(e),l=-this.direction.dot(a),c=s.dot(this.direction),u=-s.dot(a),h=s.lengthSq(),f=Math.abs(1-l*l);let d,p,m,g;if(f>0)if(p=l*c-u,g=r*f,(d=l*u-c)>=0)if(p>=-g)if(p<=g){const t=1/f;m=(d*=t)*(d+l*(p*=t)+2*c)+p*(l*d+p+2*u)+h}else p=r,m=-(d=Math.max(0,-(l*p+c)))*d+p*(p+2*u)+h;else p=-r,m=-(d=Math.max(0,-(l*p+c)))*d+p*(p+2*u)+h;else p<=-g?m=-(d=Math.max(0,-(-l*r+c)))*d+(p=d>0?-r:Math.min(Math.max(-r,-u),r))*(p+2*u)+h:p<=g?(d=0,m=(p=Math.min(Math.max(-r,-u),r))*(p+2*u)+h):m=-(d=Math.max(0,-(l*r+c)))*d+(p=d>0?r:Math.min(Math.max(-r,-u),r))*(p+2*u)+h;else p=l>0?-r:r,m=-(d=Math.max(0,-(l*p+c)))*d+p*(p+2*u)+h;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(a).multiplyScalar(p).add(o),m}intersectSphere(t,e){r.subVectors(t.center,this.origin);const n=r.dot(this.direction),i=r.dot(r)-n*n,o=t.radius*t.radius;if(i>o)return null;const a=Math.sqrt(o-i),s=n-a,l=n+a;return s<0&&l<0?null:s<0?this.at(l,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,r)}intersectTriangle(t,e,n,i,r){l.subVectors(e,t),c.subVectors(n,t),u.crossVectors(l,c);let o,a=this.direction.dot(u);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}s.subVectors(this.origin,t);const h=o*this.direction.dot(c.crossVectors(s,c));if(h<0)return null;const f=o*this.direction.dot(l.cross(s));if(f<0)return null;if(h+f>a)return null;const d=-o*s.dot(u);return d<0?null:this.at(d/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});class i{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return m});var i=n(0),r=n(63);const o=new i.a,a=new i.a,s=new i.a,l=new i.a,c=new i.a,u=new i.a,h=new i.a,f=new i.a,d=new i.a,p=new i.a;class m{constructor(t,e,n){this.a=void 0!==t?t:new i.a,this.b=void 0!==e?e:new i.a,this.c=void 0!==n?n:new i.a}static getNormal(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new i.a),r.subVectors(n,e),o.subVectors(t,e),r.cross(o);const a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(t,e,n,r,l){o.subVectors(r,e),a.subVectors(n,e),s.subVectors(t,e);const c=o.dot(o),u=o.dot(a),h=o.dot(s),f=a.dot(a),d=a.dot(s),p=c*f-u*u;if(void 0===l&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),l=new i.a),0===p)return l.set(-2,-1,-1);const m=1/p,g=(f*h-u*d)*m,y=(c*d-u*h)*m;return l.set(1-g-y,y,g)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,l),l.x>=0&&l.y>=0&&l.x+l.y<=1}static getUV(t,e,n,i,r,o,a,s){return this.getBarycoord(t,e,n,i,l),s.set(0,0),s.addScaledVector(r,l.x),s.addScaledVector(o,l.y),s.addScaledVector(a,l.z),s}static isFrontFacing(t,e,n,i){return o.subVectors(n,e),a.subVectors(t,e),o.cross(a).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return o.subVectors(this.c,this.b),a.subVectors(this.a,this.b),.5*o.cross(a).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new i.a),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return m.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new r.a),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return m.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return m.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return m.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return m.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new i.a);const n=this.a,r=this.b,o=this.c;let a,s;c.subVectors(r,n),u.subVectors(o,n),f.subVectors(t,n);const l=c.dot(f),m=u.dot(f);if(l<=0&&m<=0)return e.copy(n);d.subVectors(t,r);const g=c.dot(d),y=u.dot(d);if(g>=0&&y<=g)return e.copy(r);const v=l*y-g*m;if(v<=0&&l>=0&&g<=0)return a=l/(l-g),e.copy(n).addScaledVector(c,a);p.subVectors(t,o);const b=c.dot(p),_=u.dot(p);if(_>=0&&b<=_)return e.copy(o);const w=b*m-l*_;if(w<=0&&m>=0&&_<=0)return s=m/(m-_),e.copy(n).addScaledVector(u,s);const A=g*_-b*y;if(A<=0&&y-g>=0&&b-_>=0)return h.subVectors(o,r),s=(y-g)/(y-g+(b-_)),e.copy(r).addScaledVector(h,s);const x=1/(A+w+v);return a=w*x,s=v*x,e.copy(n).addScaledVector(c,a).addScaledVector(u,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n(64),r=n(0);const o=new r.a,a=new r.a,s=new i.a;class l{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new r.a(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=o.subVectors(n,e).cross(a.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new r.a),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new r.a);const n=t.delta(o),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const a=-(t.start.dot(this.normal)+this.constant)/i;return a<0||a>1?void 0:e.copy(n).multiplyScalar(a).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new r.a),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||s.getNormalMatrix(t),i=this.coplanarPoint(o).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});class i{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,o,a,s,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],f=n[5],d=n[8],p=i[0],m=i[3],g=i[6],y=i[1],v=i[4],b=i[7],_=i[2],w=i[5],A=i[8];return r[0]=o*p+a*y+s*_,r[3]=o*m+a*v+s*w,r[6]=o*g+a*b+s*A,r[1]=l*p+c*y+u*_,r[4]=l*m+c*v+u*w,r[7]=l*g+c*b+u*A,r[2]=h*p+f*y+d*_,r[5]=h*m+f*v+d*w,r[8]=h*g+f*b+d*A,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-n*r*c+n*a*s+i*r*l-i*o*s}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const n=t.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],h=n[7],f=n[8],d=f*l-c*h,p=c*u-f*s,m=h*s-l*u,g=r*d+o*p+a*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return i[0]=d*y,i[1]=(a*h-f*o)*y,i[2]=(c*o-a*l)*y,i[3]=p*y,i[4]=(f*r-a*u)*y,i[5]=(a*s-c*r)*y,i[6]=m*y,i[7]=(o*u-h*r)*y,i[8]=(l*r-o*s)*y,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,o,a){const s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-i*l,i*s,-i*(-l*o+s*a)+a+e,0,0,1)}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*o+n*l,i[6]=e*a+n*c,i[1]=-n*r+e*s,i[4]=-n*o+e*l,i[7]=-n*a+e*c,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}},function(t,e,n){"use strict";var i=n(75),r=n(1),o=n(66),a=n(67),s=n(68),l=n(70),c=n(72),u=n(69),h=n(73),f=n(74);var d=n(15),p=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.parse=function(t){var e=this;return this.emit("parse-start",{file:t.url,time:new Date}),this._progressBar&&this._progressBar.update(0,100,"parse",t.url),new Promise(function(n,i){setTimeout(function(){n(new Promise(function(n,i){var r=t;if(Array.isArray(r)||(r=[r]),r.forEach(function(t){e._preprocess(t)}),1===r.length)r=r[0];else{var s=r.filter(e._filterByExtension.bind(null,"MHD")),l=r.filter(e._filterByExtension.bind(null,"RAW"));2===r.length&&1===s.length&&1===l.length&&(r.url=s[0].url,r.extension=s[0].extension,r.mhdBuffer=s[0].buffer,r.rawBuffer=l[0].buffer)}var c=e._parser(r.extension);c||(e.emit("parse-error",{file:t.url,time:new Date,error:r.filename+"can not be parsed."}),i(r.filename+" can not be parsed."));var u=null;try{u=new c(r,0)}catch(n){console.warn(n),e.emit("parse-error",{file:t.url,time:new Date,error:n}),i(n)}var h=new o.a;h.rawHeader=u.rawHeader(),h.seriesInstanceUID=u.seriesInstanceUID(),h.transferSyntaxUID=u.transferSyntaxUID(),h.seriesDate=u.seriesDate(),h.seriesDescription=u.seriesDescription(),h.studyDate=u.studyDate(),h.studyDescription=u.studyDescription(),h.numberOfFrames=u.numberOfFrames(),h.numberOfFrames||(h.numberOfFrames=1),h.numberOfChannels=u.numberOfChannels(),h.modality=u.modality(),"SEG"===h.modality&&(h.segmentationType=u.segmentationType(),h.segmentationSegments=u.segmentationSegments()),h.patientID=u.patientID(),h.patientName=u.patientName(),h.patientAge=u.patientAge(),h.patientBirthdate=u.patientBirthdate(),h.patientSex=u.patientSex();var f=new a.a;f.numberOfChannels=u.numberOfChannels(),f.pixelRepresentation=u.pixelRepresentation(),f.pixelType=u.pixelType(),f.invert=u.invert(),f.spacingBetweenSlices=u.spacingBetweenSlices(),f.modality=h.modality,"SEG"===f.modality&&(f.segmentationType=h.segmentationType,f.segmentationSegments=h.segmentationSegments),h.stack.push(f),setTimeout(e.parseFrameClosure(h,f,t.url,0,u,n,i),0)}))},10)})},e.prototype.parseFrameClosure=function(t,e,n,i,r,o,a){var s=this;return function(){s.parseFrame(t,e,n,i,r,o,a)}},e.prototype.parseFrame=function(t,e,n,i,r,o,a){var l=new s.a;l.sopInstanceUID=r.sopInstanceUID(i),l.url=n,l.index=i,l.invert=e.invert,l.frameTime=r.frameTime(i),l.ultrasoundRegions=r.ultrasoundRegions(i),l.rows=r.rows(i),l.columns=r.columns(i),l.numberOfChannels=e.numberOfChannels,l.pixelPaddingValue=r.pixelPaddingValue(i),l.pixelRepresentation=e.pixelRepresentation,l.pixelType=e.pixelType,l.pixelData=r.extractPixelData(i),l.pixelSpacing=r.pixelSpacing(i),l.spacingBetweenSlices=r.spacingBetweenSlices(i),l.sliceThickness=r.sliceThickness(i),l.imageOrientation=r.imageOrientation(i),l.rightHanded=r.rightHanded(),e.rightHanded=l.rightHanded,null===l.imageOrientation&&(l.imageOrientation=[1,0,0,0,1,0]),l.imagePosition=r.imagePosition(i),l.dimensionIndexValues=r.dimensionIndexValues(i),l.bitsAllocated=r.bitsAllocated(i),l.instanceNumber=r.instanceNumber(i),l.windowCenter=r.windowCenter(i),l.windowWidth=r.windowWidth(i),l.rescaleSlope=r.rescaleSlope(i),l.rescaleIntercept=r.rescaleIntercept(i),l.minMax=r.minMaxPixelData(l.pixelData),"SEG"===t.modality&&(l.referencedSegmentNumber=r.referencedSegmentNumber(i)),e.frame.push(l),this._parsed=i+1,this._totalParsed=t.numberOfFrames,this._progressBar&&this._progressBar.update(this._parsed,this._totalParsed,"parse",n),this.emit("parsing",{file:n,total:this._totalParsed,parsed:this._parsed,time:new Date}),this._parsed===this._totalParsed?(this.emit("parse-success",{file:n,total:this._totalParsed,parsed:this._parsed,time:new Date}),o(t)):setTimeout(this.parseFrameClosure(t,e,n,this._parsed,r,o,a),0)},e.prototype._parser=function(t){var e=null;switch(t.toUpperCase()){case"NII":case"NII_":e=u.a;break;case"DCM":case"DIC":case"DICOM":case"IMA":case"":e=l.a;break;case"MHD":e=c.a;break;case"NRRD":e=h.a;break;case"MGH":case"MGZ":e=f.a;break;default:return console.warn("unsupported extension: "+t),!1}return e},e.prototype._preprocess=function(t){var e=r.a.parseUrl(t.url);if(t.filename=e.filename,t.extension=e.extension,t.pathname=e.pathname,t.query=e.query,"gz"===t.extension?(t.gzcompressed=!0,t.extension=t.filename.split(".gz").shift().split(".").pop()):"mgz"===t.extension?(t.gzcompressed=!0,t.extension="mgh"):"zraw"===t.extension?(t.gzcompressed=!0,t.extension="raw"):t.gzcompressed=!1,t.gzcompressed){var n=d.inflate(t.buffer);t.buffer=n.buffer}},e.prototype._filterByExtension=function(t,e){return e.extension.toUpperCase()===t.toUpperCase()},e}(i.a);e.a=p},function(t,e,n){"use strict";var i=n(10),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n._concatenationUID=-1,n._seriesInstanceUID=-1,n._transferSyntaxUID="",n._seriesNumber=-1,n._seriesDescription="",n._seriesDate="",n._studyDescription="",n._studyDate="",n._accessionNumber=-1,n._modality="Modality not set",n._dimensionIndexSequence=[],n._numberOfFrames=0,n._numberOfChannels=1,n._rawHeader=null,n._patientID="",n._patientName="",n._patientAge="",n._patientBirthdate="",n._patientSex="",n._segmentationType=null,n._segmentationSegments=[],n._stack=[],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.validate=function(e){return!!(t.prototype.validate.call(this,e)&&"function"==typeof e.mergeSeries&&e.hasOwnProperty("_seriesInstanceUID")&&e.hasOwnProperty("_numberOfFrames")&&e.hasOwnProperty("_numberOfChannels")&&e.hasOwnProperty("_stack")&&void 0!==e._stack&&Array===e._stack.constructor)},e.prototype.merge=function(t){return!!this.validate(t)&&(this._seriesInstanceUID===t.seriesInstanceUID&&(t.stack[0]&&(0===this._stack[0]._numberOfFrames&&this._stack[0].computeNumberOfFrames(),this._stack[0].computeCosines(),0===t.stack[0]._numberOfFrames&&t.stack[0].computeNumberOfFrames(),t.stack[0].computeCosines()),this.mergeModels(this._stack,t.stack)))},e.prototype.mergeSeries=function(t){var e=[this];return this.mergeModels(e,t),e},r(e,[{key:"seriesInstanceUID",set:function(t){this._seriesInstanceUID=t},get:function(){return this._seriesInstanceUID}},{key:"transferSyntaxUID",set:function(t){this._transferSyntaxUID=t},get:function(){return this._transferSyntaxUID}},{key:"transferSyntaxUIDLabel",get:function(){switch(this._transferSyntaxUID){case"1.2.840.10008.1.2.4.90":return"JPEG 2000 Lossless";case"1.2.840.10008.1.2.4.91":return"JPEG 2000 Lossy";case"1.2.840.10008.1.2.4.57":return"JPEG Lossless, Nonhierarchical (Processes 14)";case"1.2.840.10008.1.2.4.70":return"JPEG Lossless, Nonhierarchical (Processes 14 [Selection 1])";case"1.2.840.10008.1.2.4.50":return"JPEG Baseline lossy process 1 (8 bit)";case"1.2.840.10008.1.2.4.51":return"JPEG Baseline lossy process 2 & 4 (12 bit)";case"1.2.840.10008.1.2":return"Implicit VR Little Endian";case"1.2.840.10008.1.2.1":return"Explicit VR Little Endian";case"1.2.840.10008.1.2.2":return"Explicit VR Big Endian";default:return"Unknown transfersyntax: "+this._transferSyntaxUID}}},{key:"studyDate",set:function(t){this._studyDate=t},get:function(){return this._studyDate}},{key:"studyDescription",set:function(t){this._studyDescription=t},get:function(){return this._studyDescription}},{key:"seriesDate",set:function(t){this._seriesDate=t},get:function(){return this._seriesDate}},{key:"seriesDescription",set:function(t){this._seriesDescription=t},get:function(){return this._seriesDescription}},{key:"rawHeader",set:function(t){this._rawHeader=t},get:function(){return this._rawHeader}},{key:"patientID",set:function(t){this._patientID=t},get:function(){return this._patientID}},{key:"patientName",set:function(t){this._patientName=t},get:function(){return this._patientName}},{key:"patientAge",set:function(t){this._patientAge=t},get:function(){return this._patientAge}},{key:"patientBirthdate",set:function(t){this._patientBirthdate=t},get:function(){return this._patientBirthdate}},{key:"patientSex",set:function(t){this._patientSex=t},get:function(){return this._patientSex}},{key:"numberOfFrames",set:function(t){this._numberOfFrames=t},get:function(){return this._numberOfFrames}},{key:"numberOfChannels",set:function(t){this._numberOfChannels=t},get:function(){return this._numberOfChannels}},{key:"stack",set:function(t){this._stack=t},get:function(){return this._stack}},{key:"modality",set:function(t){this._modality=t},get:function(){return this._modality}},{key:"segmentationType",set:function(t){this._segmentationType=t},get:function(){return this._segmentationType}},{key:"segmentationSegments",set:function(t){this._segmentationSegments=t},get:function(){return this._segmentationSegments}}]),e}(i.a);e.a=o},function(t,e,n){"use strict";var i=n(3),r=n(0),o=n(11),a=n(24),s=n.n(a),l=n(1),c=n(10),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var h=n(88),f=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n._uid=null,n._stackID=-1,n._frame=[],n._numberOfFrames=0,n._rows=0,n._columns=0,n._numberOfChannels=1,n._bitsAllocated=8,n._pixelType=0,n._pixelRepresentation=0,n._textureSize=4096,n._textureUnits=7,n._rawData=[],n._windowCenter=0,n._windowWidth=0,n._rescaleSlope=1,n._rescaleIntercept=0,n._minMax=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],n._regMatrix=new i.a,n._ijk2LPS=null,n._lps2IJK=null,n._aabb2LPS=null,n._lps2AABB=null,n._dimensionsIJK=null,n._halfDimensionsIJK=null,n._spacing=new r.a(1,1,1),n._spacingBetweenSlices=0,n._sliceThickness=0,n._origin=null,n._rightHanded=!0,n._xCosine=new r.a(1,0,0),n._yCosine=new r.a(0,1,0),n._zCosine=new r.a(0,0,1),n._prepared=!1,n._packed=!1,n._packedPerPixel=1,n._modality="Modality not set",n._segmentationType=null,n._segmentationSegments=[],n._segmentationDefaultColor=[63,174,128],n._frameSegment=[],n._segmentationLUT=[],n._segmentationLUTO=[],n._invert=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.prepareSegmentation=function(){this._frameSegment=this._frame;var t=[];this.computeCosines(),this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame.sort(this._sortDistanceArraySort);for(var e=-1,n=0;n<this._frame.length;n++){if(t[e]&&t[e]._dist==this._frame[n]._dist)for(var i=0;i<t[e]._rows*t[e]._columns;i++)t[e]._pixelData[i]+=this._frame[n].pixelData[i]*this._frame[n]._referencedSegmentNumber;else{t.push(this._frame[n]),e++;for(var r=0;r<t[e]._rows*t[e]._columns;r++)t[e]._pixelData[r]*=this._frame[n]._referencedSegmentNumber}t[e].minMax=l.a.minMax(t[e]._pixelData)}for(var o={},a=0,c=0;c<this._segmentationSegments.length;c++){a=Math.max(a,parseInt(this._segmentationSegments[c].segmentNumber,10));var u=this._segmentationSegments[c].recommendedDisplayCIELab;o[this._segmentationSegments[c].segmentNumber]=null===u?this._segmentationDefaultColor:s.a.cielab2RGB.apply(s.a,u)}for(var h=0;h<=a;h++){var f=h/a,d=h?1:0,p=[0,0,0];o.hasOwnProperty(h.toString())&&(p=o[h.toString()]),p[0]/=255,p[1]/=255,p[2]/=255,this._segmentationLUT.push([f].concat(p)),this._segmentationLUTO.push([f,d])}this._frame=t},e.prototype.prepare=function(){"SEG"===this._modality&&this.prepareSegmentation(),this.computeNumberOfFrames(),this._rows=this._frame[0].rows,this._columns=this._frame[0].columns,this._dimensionsIJK=new r.a(this._columns,this._rows,this._numberOfFrames),this._halfDimensionsIJK=new r.a(this._dimensionsIJK.x/2,this._dimensionsIJK.y/2,this._dimensionsIJK.z/2),this._spacingBetweenSlices=this._frame[0].spacingBetweenSlices,this._sliceThickness=this._frame[0].sliceThickness,this.computeCosines(),this._numberOfFrames>1&&this.orderFrames(),this.computeSpacing(),this._frame[0].imagePosition||(this._frame[0].imagePosition=[0,0,0]),this._frame[0].imageOrientation||(this._frame[0].imageOrientation=[1,0,0,0,1,0]),this._origin=this._arrayToVector3(this._frame[0].imagePosition,0),this.computeIJK2LPS(),this.computeLPS2AABB();var t=Math.floor(this._frame.length/2),e=this._frame[t];this._rescaleSlope=e.rescaleSlope||1,this._rescaleIntercept=e.rescaleIntercept||0,this.computeMinMaxIntensities(),this._minMax[0]=l.a.rescaleSlopeIntercept(this._minMax[0],this._rescaleSlope,this._rescaleIntercept),this._minMax[1]=l.a.rescaleSlopeIntercept(this._minMax[1],this._rescaleSlope,this._rescaleIntercept),this._windowWidth=e.windowWidth||this._minMax[1]-this._minMax[0],this._windowCenter=e.windowCenter||this._minMax[0]+this._windowWidth/2,this._bitsAllocated=e.bitsAllocated,this._prepared=!0},e.prototype.packEchos=function(){for(var t=[],e=0;e<this._frame.length;e+=4){for(var n=this._frame[e],i=0;i<this._rows*this._columns;i++){for(var o=1;o<4;o++)n.pixelData[i]+=this._frame[e+o].pixelData[i];n.pixelData[i]/=4}t.push(n)}this._frame=t,this._numberOfFrames=this._frame.length,this._dimensionsIJK=new r.a(this._columns,this._rows,this._numberOfFrames),this._halfDimensionsIJK=new r.a(this._dimensionsIJK.x/2,this._dimensionsIJK.y/2,this._dimensionsIJK.z/2)},e.prototype.computeNumberOfFrames=function(){if(!(this._frame&&this._frame.length>0))return window.console.warn("_frame doesn't contain anything...."),window.console.warn(this._frame),!1;this._numberOfFrames=this._frame.length},e.prototype.computeCosines=function(){if(this._frame&&this._frame[0]){var t=this._frame[0].cosines();this._xCosine=t[0],this._yCosine=t[1],this._zCosine=t[2]}},e.prototype.orderFrames=function(){this._frame[0].dimensionIndexValues?this._frame.sort(this._orderFrameOnDimensionIndicesArraySort):this._frame[0].imagePosition&&this._frame[0].imageOrientation&&this._frame[1]&&this._frame[1].imagePosition&&this._frame[1].imageOrientation&&this._frame[0].imagePosition.join()!==this._frame[1].imagePosition.join()?(this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame.sort(this._sortDistanceArraySort)):null!==this._frame[0].instanceNumber&&this._frame[1]&&null!==this._frame[1].instanceNumber&&this._frame[0].instanceNumber!==this._frame[1].instanceNumber?this._frame.sort(this._sortInstanceNumberArraySort):this._frame[0].sopInstanceUID&&this._frame[1]&&this._frame[1].sopInstanceUID&&this._frame[0].sopInstanceUID!==this._frame[1].sopInstanceUID?this._frame.sort(this._sortSopInstanceUIDArraySort):this._frame[0].imagePosition&&window.console.warn("do not know how to order the frames...")},e.prototype.computeSpacing=function(){this.xySpacing(),this.zSpacing()},e.prototype.zSpacing=function(){this._numberOfFrames>1&&(this._frame[0].pixelSpacing&&this._frame[0].pixelSpacing[2]?this._spacing.z=this._frame[0].pixelSpacing[2]:(this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame[1].dist!==this._frame[0].dist?(this._frame.sort(this._sortDistanceArraySort),this._spacing.z=this._frame[1].dist-this._frame[0].dist):this._spacingBetweenSlices?this._spacing.z=this._spacingBetweenSlices:this._frame[0].sliceThickness&&(this._spacing.z=this._frame[0].sliceThickness))),0===this._spacing.z&&(this._spacing.z=1)},e.prototype.xySpacing=function(){if(this._frame&&this._frame[0]){var t=this._frame[0].spacingXY();this._spacing.x=t[0],this._spacing.y=t[1]}},e.prototype.computeMinMaxIntensities=function(){for(var t=0;t<this._frame.length;t++){var e=this._frame[t].minMax[0];Number.isNaN(e)||(this._minMax[0]=Math.min(this._minMax[0],e));var n=this._frame[t].minMax[1];Number.isNaN(n)||(this._minMax[1]=Math.max(this._minMax[1],n))}},e.prototype.computeIJK2LPS=function(){this._ijk2LPS=l.a.ijk2LPS(this._xCosine,this._yCosine,this._zCosine,this._spacing,this._origin,this._regMatrix),this._lps2IJK=new i.a,this._lps2IJK.getInverse(this._ijk2LPS)},e.prototype.computeLPS2AABB=function(){this._aabb2LPS=l.a.aabb2LPS(this._xCosine,this._yCosine,this._zCosine,this._origin),this._lps2AABB=new i.a,this._lps2AABB.getInverse(this._aabb2LPS)},e.prototype.merge=function(t){return!!(this._stackID===t.stackID&&1===this._numberOfFrames&&1===t._numberOfFrames&&this._frame[0].columns===t.frame[0].columns&&this._frame[0].rows===t.frame[0].rows&&this._xCosine.equals(t.xCosine)&&this._yCosine.equals(t.yCosine)&&this._zCosine.equals(t.zCosine))&&this.mergeModels(this._frame,t.frame)},e.prototype.pack=function(){var t=this._dimensionsIJK.x*this._dimensionsIJK.y*this._dimensionsIJK.z;(8===this._bitsAllocated&&1===this._numberOfChannels||1===this._bitsAllocated)&&(this._packedPerPixel=4),16===this._bitsAllocated&&1===this._numberOfChannels&&(this._packedPerPixel=2);var e=this._textureSize*this._textureSize,n=Math.ceil(t/(e*this._packedPerPixel)),i=0,r=this._packedPerPixel*e;r>t&&(r=t),this._textureUnits<n&&(console.warn("Insufficient number of supported textures. Some frames will not be packed."),n=this._textureUnits);for(var o=0;o<n;o++){var a=this._packTo8Bits(this._numberOfChannels,this._frame,this._textureSize,i,r);this._textureType=a.textureType,this._rawData.push(a.data),i+=this._packedPerPixel*e,(r+=this._packedPerPixel*e)>t&&(r=t)}this._packed=!0},e.prototype._packTo8Bits=function(t,e,n,i,r){var a={textureType:null,data:null},s=e[0].bitsAllocated,l=e[0].pixelType,c=0;this._minMax[0]<0&&(c-=this._minMax[0]);var u=0,f=0,d=0,p=e[0].rows*e[0].columns;if(8===s&&1===t||1===s){for(var m=new Uint8Array(n*n*4),g=0,y=0,v=i;v<r;v++){d=v%p;var b=e[f=~~(v/p)].pixelData[d]+c;Number.isNaN(b)||(m[4*g+y]=b),u++,g=Math.floor(u/4),y=u%4}a.textureType=o.a,a.data=m}else if(16===s&&1===t){for(var _=new Uint8Array(n*n*4),w=0,A=0,x=i;x<r;x++){d=x%p;var S=e[f=~~(x/p)].pixelData[d]+c;Number.isNaN(S)||(_[4*w+2*A]=255&S,_[4*w+2*A+1]=S>>>8&255),u++,w=Math.floor(u/2),A=u%2}a.textureType=o.a,a.data=_}else if(32===s&&1===t&&0===l){for(var M=new Uint8Array(n*n*4),E=i;E<r;E++){d=E%p;var T=e[f=~~(E/p)].pixelData[d]+c;Number.isNaN(T)||(M[4*u]=255&T,M[4*u+1]=T>>>8&255,M[4*u+2]=T>>>16&255,M[4*u+3]=T>>>24&255),u++}a.textureType=o.a,a.data=M}else if(32===s&&1===t&&1===l){for(var I=new Uint8Array(n*n*4),k=i;k<r;k++){d=k%p;var C=e[f=~~(k/p)].pixelData[d]+c;if(!Number.isNaN(C)){var B=h(C).match(/.{1,8}/g);I[4*u]=parseInt(B[0],2),I[4*u+1]=parseInt(B[1],2),I[4*u+2]=parseInt(B[2],2),I[4*u+3]=parseInt(B[3],2)}u++}a.textureType=o.a,a.data=I}else if(8===s&&3===t){for(var R=new Uint8Array(n*n*3),P=i;P<r;P++)f=~~(P/p),d=P%p,R[3*u]=e[f].pixelData[3*d],R[3*u+1]=e[f].pixelData[3*d+1],R[3*u+2]=e[f].pixelData[3*d+2],u++;a.textureType=o.b,a.data=R}return a},e.prototype.worldCenter=function(){return this._halfDimensionsIJK.clone().addScalar(-.5).applyMatrix4(this._ijk2LPS)},e.prototype.worldBoundingBox=function(){for(var t=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],e=this._dimensionsIJK,n=0;n<=e.x;n+=e.x)for(var i=0;i<=e.y;i+=e.y)for(var o=0;o<=e.z;o+=e.z){var a=new r.a(n,i,o).applyMatrix4(this._ijk2LPS);t=[Math.min(t[0],a.x),Math.max(t[1],a.x),Math.min(t[2],a.y),Math.max(t[3],a.y),Math.min(t[4],a.z),Math.max(t[5],a.z)]}return t},e.prototype.AABBox=function(){var t=(new r.a).addScalar(-.5).applyMatrix4(this._ijk2LPS).applyMatrix4(this._lps2AABB),e=this._dimensionsIJK.clone().addScalar(-.5).applyMatrix4(this._ijk2LPS).applyMatrix4(this._lps2AABB);return new r.a(Math.abs(t.x-e.x),Math.abs(t.y-e.y),Math.abs(t.z-e.z))},e.prototype.centerAABBox=function(){var t=this.worldCenter();return t.applyMatrix4(this._lps2AABB),t},e.indexInDimensions=function(t,e){return t.x>=0&&t.y>=0&&t.z>=0&&t.x<e.x&&t.y<e.y&&t.z<e.z},e.prototype._arrayToVector3=function(t,e){return new r.a(t[e],t[e+1],t[e+2])},e.prototype._orderFrameOnDimensionIndicesArraySort=function(t,e){if("dimensionIndexValues"in t&&"[object Array]"===Object.prototype.toString.call(t.dimensionIndexValues)&&"dimensionIndexValues"in e&&"[object Array]"===Object.prototype.toString.call(e.dimensionIndexValues))for(var n=0;n<t.dimensionIndexValues.length;n++){if(parseInt(t.dimensionIndexValues[n],10)>parseInt(e.dimensionIndexValues[n],10))return 1;if(parseInt(t.dimensionIndexValues[n],10)<parseInt(e.dimensionIndexValues[n],10))return-1}else window.console.warn("One of the frames doesn't have a dimensionIndexValues array."),window.console.warn(t),window.console.warn(e);return 0},e.prototype._computeDistanceArrayMap=function(t,e){return e.imagePosition&&(e.dist=e.imagePosition[0]*t.x+e.imagePosition[1]*t.y+e.imagePosition[2]*t.z),e},e.prototype._sortDistanceArraySort=function(t,e){return t.dist-e.dist},e.prototype._sortInstanceNumberArraySort=function(t,e){return t.instanceNumber-e.instanceNumber},e.prototype._sortSopInstanceUIDArraySort=function(t,e){return t.sopInstanceUID-e.sopInstanceUID},e.value=function(t,e){return window.console.warn("models.stack.value is deprecated.\n       Please use core.utils.value instead."),l.a.value(t,e)},e.valueRescaleSlopeIntercept=function(t,e,n){return window.console.warn("models.stack.valueRescaleSlopeIntercept is deprecated.\n       Please use core.utils.rescaleSlopeIntercept instead."),l.a.rescaleSlopeIntercept(t,e,n)},e.worldToData=function(t,e){return window.console.warn("models.stack.worldToData is deprecated.\n       Please use core.utils.worldToData instead."),l.a.worldToData(t._lps2IJK,e)},u(e,[{key:"numberOfChannels",set:function(t){this._numberOfChannels=t},get:function(){return this._numberOfChannels}},{key:"frame",set:function(t){this._frame=t},get:function(){return this._frame}},{key:"prepared",set:function(t){this._prepared=t},get:function(){return this._prepared}},{key:"packed",set:function(t){this._packed=t},get:function(){return this._packed}},{key:"packedPerPixel",set:function(t){this._packedPerPixel=t},get:function(){return this._packedPerPixel}},{key:"dimensionsIJK",set:function(t){this._dimensionsIJK=t},get:function(){return this._dimensionsIJK}},{key:"halfDimensionsIJK",set:function(t){this._halfDimensionsIJK=t},get:function(){return this._halfDimensionsIJK}},{key:"regMatrix",set:function(t){this._regMatrix=t},get:function(){return this._regMatrix}},{key:"ijk2LPS",set:function(t){this._ijk2LPS=t},get:function(){return this._ijk2LPS}},{key:"lps2IJK",set:function(t){this._lps2IJK=t},get:function(){return this._lps2IJK}},{key:"lps2AABB",set:function(t){this._lps2AABB=t},get:function(){return this._lps2AABB}},{key:"textureSize",set:function(t){this._textureSize=t},get:function(){return this._textureSize}},{key:"textureUnits",set:function(t){this._textureUnits=t},get:function(){return this._textureUnits}},{key:"textureType",set:function(t){this._textureType=t},get:function(){return this._textureType}},{key:"bitsAllocated",set:function(t){this._bitsAllocated=t},get:function(){return this._bitsAllocated}},{key:"rawData",set:function(t){this._rawData=t},get:function(){return this._rawData}},{key:"windowWidth",get:function(){return this._windowWidth},set:function(t){this._windowWidth=t}},{key:"windowCenter",get:function(){return this._windowCenter},set:function(t){this._windowCenter=t}},{key:"rescaleSlope",get:function(){return this._rescaleSlope},set:function(t){this._rescaleSlope=t}},{key:"rescaleIntercept",get:function(){return this._rescaleIntercept},set:function(t){this._rescaleIntercept=t}},{key:"xCosine",get:function(){return this._xCosine},set:function(t){this._xCosine=t}},{key:"yCosine",get:function(){return this._yCosine},set:function(t){this._yCosine=t}},{key:"zCosine",get:function(){return this._zCosine},set:function(t){this._zCosine=t}},{key:"minMax",get:function(){return this._minMax},set:function(t){this._minMax=t}},{key:"stackID",get:function(){return this._stackID},set:function(t){this._stackID=t}},{key:"pixelType",get:function(){return this._pixelType},set:function(t){this._pixelType=t}},{key:"pixelRepresentation",get:function(){return this._pixelRepresentation},set:function(t){this._pixelRepresentation=t}},{key:"invert",set:function(t){this._invert=t},get:function(){return this._invert}},{key:"modality",set:function(t){this._modality=t},get:function(){return this._modality}},{key:"rightHanded",get:function(){return this._rightHanded},set:function(t){this._rightHanded=t}},{key:"spacingBetweenSlices",get:function(){return this._spacingBetweenSlices},set:function(t){this._spacingBetweenSlices=t}},{key:"segmentationSegments",set:function(t){this._segmentationSegments=t},get:function(){return this._segmentationSegments}},{key:"segmentationType",set:function(t){this._segmentationType=t},get:function(){return this._segmentationType}},{key:"segmentationLUT",set:function(t){this._segmentationLUT=t},get:function(){return this._segmentationLUT}},{key:"segmentationLUTO",set:function(t){this._segmentationLUTO=t},get:function(){return this._segmentationLUTO}}]),e}(c.a);e.a=f},function(t,e,n){"use strict";var i=n(10),r=n(0),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n._sopInstanceUID=null,n._url=null,n._stackID=-1,n._invert=!1,n._frameTime=null,n._ultrasoundRegions=[],n._rows=0,n._columns=0,n._dimensionIndexValues=[],n._imagePosition=null,n._imageOrientation=null,n._rightHanded=!0,n._sliceThickness=1,n._spacingBetweenSlices=null,n._pixelPaddingValue=null,n._pixelRepresentation=0,n._pixelType=0,n._pixelSpacing=null,n._pixelAspectRatio=null,n._pixelData=null,n._instanceNumber=null,n._windowCenter=null,n._windowWidth=null,n._rescaleSlope=null,n._rescaleIntercept=null,n._bitsAllocated=8,n._numberOfChannels=1,n._minMax=null,n._dist=null,n._index=-1,n._referencedSegmentNumber=-1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.validate=function(e){return!!(t.prototype.validate.call(this,e)&&"function"==typeof e.cosines&&"function"==typeof e.spacingXY&&e.hasOwnProperty("_sopInstanceUID")&&e.hasOwnProperty("_dimensionIndexValues")&&e.hasOwnProperty("_imageOrientation")&&e.hasOwnProperty("_imagePosition"))},e.prototype.merge=function(t){return!!this.validate(t)&&!!(this._compareArrays(this._dimensionIndexValues,t.dimensionIndexValues)&&this._compareArrays(this._imageOrientation,t.imageOrientation)&&this._compareArrays(this._imagePosition,t.imagePosition)&&this._instanceNumber===t.instanceNumber&&this._sopInstanceUID===t.sopInstanceUID)},e.prototype.cosines=function(){var t=[new r.a(1,0,0),new r.a(0,1,0),new r.a(0,0,1)];if(this._imageOrientation&&6===this._imageOrientation.length){var e=new r.a(this._imageOrientation[0],this._imageOrientation[1],this._imageOrientation[2]),n=new r.a(this._imageOrientation[3],this._imageOrientation[4],this._imageOrientation[5]);e.length()>0&&n.length()>0&&(t[0]=e,t[1]=n,t[2]=new r.a(0,0,0).crossVectors(t[0],t[1]).normalize())}else window.console.log("No valid image orientation for frame"),window.console.log(this),window.console.log("Returning default orientation.");return this._rightHanded||t[2].negate(),t},e.prototype.spacingXY=function(){var t=[1,1];return this.pixelSpacing?(t[0]=this.pixelSpacing[0],t[1]=this.pixelSpacing[1]):this.pixelAspectRatio&&(t[0]=1,t[1]=1*this.pixelAspectRatio[1]/this.pixelAspectRatio[0]),t},e.prototype.getPixelData=function(t,e){return t>=0&&t<this._columns&&e>=0&&e<this._rows?this.pixelData[t+this._columns*e]:null},e.prototype.setPixelData=function(t,e,n){this.pixelData[t+this._columns*e]=n},e.prototype.getImageDataUrl=function(){var t=document.createElement("canvas");t.width=this._columns,t.height=this._rows;var e=t.getContext("2d"),n=e.createImageData(t.width,t.height);return n.data.set(this._frameToCanvas()),e.putImageData(n,0,0),t.toDataURL()},e.prototype._frameToCanvas=function(){var t=this._columns*this._rows,e={invert:this._invert,min:this._minMax[0],padding:this._pixelPaddingValue},n=new Uint8Array(4*t);if(null!==e.padding){e.min=this._minMax[1];for(var i=0,r=this._pixelData.length;i<r;i++)this._pixelData[i]!==e.padding&&(e.min=Math.min(e.min,this._pixelData[i]))}if(this._windowWidth&&null!==this._windowCenter){var o=this._rescaleIntercept||0,a=this._rescaleSlope||1;e.min=Math.max((this._windowCenter-this._windowWidth/2-o)/a,e.min),e.max=Math.min((this._windowCenter+this._windowWidth/2-o)/a,this._minMax[1])}else e.max=this._minMax[1];if(e.range=e.max-e.min||255,1===this._numberOfChannels)for(var s=0;s<t;s++){var l=this._pixelTo8Bit(this._pixelData[s],e);n[4*s]=l,n[4*s+1]=l,n[4*s+2]=l,n[4*s+3]=255}else if(3===this._numberOfChannels)for(var c=0;c<t;c++)n[4*c]=this._pixelTo8Bit(this._pixelData[3*c],e),n[4*c+1]=this._pixelTo8Bit(this._pixelData[3*c+1],e),n[4*c+2]=this._pixelTo8Bit(this._pixelData[3*c+2],e),n[4*c+3]=255;return n},e.prototype._pixelTo8Bit=function(t,e){var n=t<=e.min||t===e.padding?0:255;return t>e.min&&t<e.max&&(n=Math.round(255*(t-e.min)/e.range)),Number.isNaN(n)?0:e.invert?255-n:n},e.prototype._compareArrays=function(t,e){return t===e||!(!t||!e||t.join()!==e.join())},o(e,[{key:"frameTime",get:function(){return this._frameTime},set:function(t){this._frameTime=t}},{key:"ultrasoundRegions",get:function(){return this._ultrasoundRegions},set:function(t){this._ultrasoundRegions=t}},{key:"rows",get:function(){return this._rows},set:function(t){this._rows=t}},{key:"columns",get:function(){return this._columns},set:function(t){this._columns=t}},{key:"spacingBetweenSlices",get:function(){return this._spacingBetweenSlices},set:function(t){this._spacingBetweenSlices=t}},{key:"sliceThickness",get:function(){return this._sliceThickness},set:function(t){this._sliceThickness=t}},{key:"imagePosition",get:function(){return this._imagePosition},set:function(t){this._imagePosition=t}},{key:"imageOrientation",get:function(){return this._imageOrientation},set:function(t){this._imageOrientation=t}},{key:"windowWidth",get:function(){return this._windowWidth},set:function(t){this._windowWidth=t}},{key:"windowCenter",get:function(){return this._windowCenter},set:function(t){this._windowCenter=t}},{key:"rescaleSlope",get:function(){return this._rescaleSlope},set:function(t){this._rescaleSlope=t}},{key:"rescaleIntercept",get:function(){return this._rescaleIntercept},set:function(t){this._rescaleIntercept=t}},{key:"bitsAllocated",get:function(){return this._bitsAllocated},set:function(t){this._bitsAllocated=t}},{key:"dist",get:function(){return this._dist},set:function(t){this._dist=t}},{key:"pixelSpacing",get:function(){return this._pixelSpacing},set:function(t){this._pixelSpacing=t}},{key:"pixelAspectRatio",get:function(){return this._pixelAspectRatio},set:function(t){this._pixelAspectRatio=t}},{key:"minMax",get:function(){return this._minMax},set:function(t){this._minMax=t}},{key:"dimensionIndexValues",get:function(){return this._dimensionIndexValues},set:function(t){this._dimensionIndexValues=t}},{key:"instanceNumber",get:function(){return this._instanceNumber},set:function(t){this._instanceNumber=t}},{key:"pixelData",get:function(){return this._pixelData},set:function(t){this._pixelData=t}},{key:"sopInstanceUID",set:function(t){this._sopInstanceUID=t},get:function(){return this._sopInstanceUID}},{key:"pixelPaddingValue",get:function(){return this._pixelPaddingValue},set:function(t){this._pixelPaddingValue=t}},{key:"pixelRepresentation",get:function(){return this._pixelRepresentation},set:function(t){this._pixelRepresentation=t}},{key:"pixelType",get:function(){return this._pixelType},set:function(t){this._pixelType=t}},{key:"url",get:function(){return this._url},set:function(t){this._url=t}},{key:"referencedSegmentNumber",get:function(){return this._referencedSegmentNumber},set:function(t){this._referencedSegmentNumber=t}},{key:"rightHanded",get:function(){return this._rightHanded},set:function(t){this._rightHanded=t}},{key:"index",get:function(){return this._index},set:function(t){this._index=t}},{key:"invert",get:function(){return this._invert},set:function(t){this._invert=t}},{key:"numberOfChannels",get:function(){return this._numberOfChannels},set:function(t){this._numberOfChannels=t}}]),e}(i.a);e.a=a},function(t,e,n){"use strict";var i=n(5),r=n(14),o=n.n(r);var a=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if(r._id=i,r._arrayBuffer=n.buffer,r._url=n.url,r._dataSet=null,r._niftiHeader=null,r._niftiImage=null,r._ordered=!0,r._orderedData=null,r._qfac=1,!o.a.isNIFTI(r._arrayBuffer))throw new Error("parsers.nifti could not parse the file");return r._dataSet=o.a.readHeader(r._arrayBuffer),r._niftiImage=o.a.readImage(r._dataSet,r._arrayBuffer),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.seriesInstanceUID=function(){return this._url},e.prototype.numberOfFrames=function(){return this._dataSet.dims[3]},e.prototype.numberOfChannels=function(){var t=1;return this._dataSet.dims[0]>=5?(t=this._dataSet.dims[5],this._ordered=!1):128===this._dataSet.datatypeCode?t=3:2304===this._dataSet.datatypeCode&&(t=4),t},e.prototype.sopInstanceUID=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},e.prototype.rows=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.dims[2]},e.prototype.columns=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.dims[1]},e.prototype.pixelType=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=0;return 16!==this._dataSet.datatypeCode&&64!==this._dataSet.datatypeCode&&1536!==this._dataSet.datatypeCode||(t=1),t},e.prototype.bitsAllocated=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.numBitsPerVoxel},e.prototype.pixelSpacing=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[this._dataSet.pixDims[1],this._dataSet.pixDims[2],this._dataSet.pixDims[3]]},e.prototype.sliceThickness=function(){return null},e.prototype.imageOrientation=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._dataSet.qform_code>0){var t=0,e=this._dataSet.quatern_b,n=this._dataSet.quatern_c,i=this._dataSet.quatern_d;return(t=1-(e*e+n*n+i*i))<1e-7?(e*=t=1/Math.sqrt(e*e+n*n+i*i),n*=t,i*=t,t=0):t=Math.sqrt(t),this._dataSet.pixDims[0]<0&&(this._rightHanded=!1),[-(t*t+e*e-n*n-i*i),-2*(e*n+t*i),2*(e*i-t*n),-2*(e*n-t*i),-(t*t+n*n-e*e-i*i),2*(n*i+t*e)]}if(this._dataSet.sform_code>0){var r=[-this._dataSet.affine[0][0],-this._dataSet.affine[0][1],this._dataSet.affine[0][2]],o=[-this._dataSet.affine[1][0],-this._dataSet.affine[1][1],this._dataSet.affine[0][2]];return[].concat(r,o)}return this._dataSet.qform_code,[1,0,0,0,1,0]},e.prototype.imagePosition=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[-this._dataSet.qoffset_x,-this._dataSet.qoffset_y,this._dataSet.qoffset_z]},e.prototype.dimensionIndexValues=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null},e.prototype.instanceNumber=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},e.prototype.windowCenter=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null},e.prototype.windowWidth=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null},e.prototype.rescaleSlope=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.scl_slope},e.prototype.rescaleIntercept=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.scl_inter},e.prototype.extractPixelData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(t)},e.prototype._decompressUncompressed=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.numberOfChannels(),n=this.rows(t)*this.columns(t)*e,i=t*n,r=this._niftiImage;if(this._ordered||null!==this._orderedData||this._reorderData(),null!==this._orderedData)return this._orderedData.slice(i,i+n);if(2===this._dataSet.datatypeCode)return new Uint8Array(r,i,n);if(256===this._dataSet.datatypeCode)return new Int8Array(r,i,n);if(512===this._dataSet.datatypeCode)return i*=2,new Uint16Array(r,i,n);if(4===this._dataSet.datatypeCode)return i*=2,new Int16Array(r,i,n);if(8===this._dataSet.datatypeCode)return i*=4,new Int32Array(r,i,n);if(16===this._dataSet.datatypeCode){i*=4;for(var o=new Float32Array(r,i,n),a=0;a<o.length;a++)o[a]!==1/0&&o[a]!==-1/0||(o[a]=0);return o}window.console.warn("Unknown data type: datatypeCode : "+this._dataSet.datatypeCode)},e.prototype._reorderData=function(){var t=this.numberOfChannels(),e=this.rows()*this.columns()*t,n=this._niftiImage,i=e*this.numberOfFrames(),r=null;this._orderedData=null,2===this._dataSet.datatypeCode?(r=new Uint8Array(n,0,i),this._orderedData=new Uint8Array(r.length)):256===this._dataSet.datatypeCode?(r=new Int8Array(n,0,i),this._orderedData=new Int8Array(r.length)):512===this._dataSet.datatypeCode?(r=new Uint16Array(n,0,i),this._orderedData=new Uint16Array(r.length)):4===this._dataSet.datatypeCode?(r=new Int16Array(n,0,i),this._orderedData=new Int16Array(r.length)):16===this._dataSet.datatypeCode&&(r=new Float32Array(n,0,i),this._orderedData=new Float32Array(r.length));for(var o=r.length/3,a=0,s=0,l=o,c=2*o,u=0;u<o;u++)this._orderedData[a++]=r[s++],this._orderedData[a++]=r[l++],this._orderedData[a++]=r[c++];this._ordered=!0},e}(i.a);e.a=a},function(t,e,n){"use strict";var i=n(1),r=n(5),o=n(25),a=n(71);var s=n(105),l=n(106),c=n(108),u=n(109),h=void 0,f=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));r._id=i,r._arrayBuffer=n.buffer;var o=new Uint8Array(r._arrayBuffer);r._dataSet=null;try{r._dataSet=s.parseDicom(o)}catch(t){throw console.log(t),new Error("parsers.dicom could not parse the file")}return r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.seriesInstanceUID=function(){return this._dataSet.string("x0020000e")},e.prototype.studyInstanceUID=function(){return this._dataSet.string("x0020000d")},e.prototype.modality=function(){return this._dataSet.string("x00080060")},e.prototype.segmentationType=function(){return this._dataSet.string("x00620001")},e.prototype.segmentationSegments=function(){var t=[],e=this._dataSet.elements.x00620002;if(!e)return t;for(var n=0;n<e.items.length;n++){var i=this._recommendedDisplayCIELab(e.items[n]),r=this._segmentationCode(e.items[n]),o=e.items[n].dataSet.uint16("x00620004"),a=e.items[n].dataSet.string("x00620005"),s=e.items[n].dataSet.string("x00620008");t.push({recommendedDisplayCIELab:i,segmentationCodeDesignator:r.segmentationCodeDesignator,segmentationCodeValue:r.segmentationCodeValue,segmentationCodeMeaning:r.segmentationCodeMeaning,segmentNumber:o,segmentLabel:a,segmentAlgorithmType:s})}return t},e.prototype._segmentationCode=function(t){var e="unknown",n="unknown",i="unknown",r=t.dataSet.elements.x00082218;return r&&r.items&&r.items.length>0&&(e=r.items[0].dataSet.string("x00080102"),n=r.items[0].dataSet.string("x00080100"),i=r.items[0].dataSet.string("x00080104")),{segmentationCodeDesignator:e,segmentationCodeValue:n,segmentationCodeMeaning:i}},e.prototype._recommendedDisplayCIELab=function(t){if(!t.dataSet.elements.x0062000d)return null;for(var e=t.dataSet.elements.x0062000d.dataOffset,n=t.dataSet.elements.x0062000d.length,i=t.dataSet.byteArray.slice(e,e+n),r=new Uint16Array(n/2),o=0;o<n/2;o++)r[o]=(i[2*o+1]<<8)+i[2*o];return[r[0]/65535*100,r[1]/65535*255-128,r[2]/65535*255-128]},e.prototype.rawHeader=function(){return this._dataSet},e.prototype.sopInstanceUID=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._findStringEverywhere("x2005140f","x00080018",t);return e},e.prototype.transferSyntaxUID=function(){return this._dataSet.string("x00020010")},e.prototype.studyDate=function(){return this._dataSet.string("x00080020")},e.prototype.studyDescription=function(){return this._dataSet.string("x00081030")},e.prototype.seriesDate=function(){return this._dataSet.string("x00080021")},e.prototype.seriesDescription=function(){return this._dataSet.string("x0008103e")},e.prototype.patientName=function(){return this._dataSet.string("x00100010")},e.prototype.patientID=function(){return this._dataSet.string("x00100020")},e.prototype.patientBirthdate=function(){return this._dataSet.string("x00100030")},e.prototype.patientSex=function(){return this._dataSet.string("x00100040")},e.prototype.patientAge=function(){return this._dataSet.string("x00101010")},e.prototype.photometricInterpretation=function(){return this._dataSet.string("x00280004")},e.prototype.planarConfiguration=function(){var t=this._dataSet.uint16("x00280006");return void 0===t&&(t=null),t},e.prototype.samplesPerPixel=function(){return this._dataSet.uint16("x00280002")},e.prototype.numberOfFrames=function(){var t=this._dataSet.intString("x00280008");return void 0===t&&(t=null),t},e.prototype.numberOfChannels=function(){var t=1,e=this.photometricInterpretation();return"RGB"!==e&&"PALETTE COLOR"!==e&&"YBR_FULL"!==e&&"YBR_FULL_422"!==e&&"YBR_PARTIAL_422"!==e&&"YBR_PARTIAL_420"!==e&&"YBR_RCT"!==e||(t=3),t},e.prototype.invert=function(){return"MONOCHROME1"===this.photometricInterpretation()},e.prototype.imageOrientation=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._findStringEverywhere("x00209116","x00200037",t);return e&&(e=e.split("\\").map(i.a.stringToNumber)),e},e.prototype.referencedSegmentNumber=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=-1,n=this._findInGroupSequence("x52009230","x0062000a",t);return null!==n&&(e=n.uint16("x0062000b")),e},e.prototype.pixelAspectRatio=function(){var t=[this._dataSet.intString("x00280034",0),this._dataSet.intString("x00280034",1)];return void 0===t[0]&&(t=null),t},e.prototype.imagePosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._findStringEverywhere("x00209113","x00200032",t);return e&&(e=e.split("\\").map(i.a.stringToNumber)),e},e.prototype.instanceNumber=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=null,n=this._dataSet.elements.x52009230;void 0!==n?n.items[t].dataSet.elements.x2005140f?e=n.items[t].dataSet.elements.x2005140f.items[0].dataSet.intString("x00200013"):(e=this._dataSet.intString("x00200013"),void 0===e&&(e=null)):(e=this._dataSet.intString("x00200013"),void 0===e&&(e=null));return e},e.prototype.pixelSpacing=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._findStringEverywhere("x00289110","x00280030",t);if(null===e&&(e=this._dataSet.string("x00181164"),void 0===e&&(e=null)),e){var n=e.split("\\");2!==n.length?(console.error('DICOM spacing format is not supported (could not split string on "\\"): '+e),e=null):e=n.map(i.a.stringToNumber)}return e},e.prototype.ultrasoundRegions=function(){var t=this,e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],this._dataSet.elements.x00186011);if(!e||!e.items)return[];var n=[];return e.items.forEach(function(e){n.push({x0:e.dataSet.uint32("x00186018"),y0:e.dataSet.uint32("x0018601a"),x1:e.dataSet.uint32("x0018601c"),y1:e.dataSet.uint32("x0018601e"),axisX:e.dataSet.int32("x00186020")||null,axisY:e.dataSet.int32("x00186022")||null,unitsX:t._getUnitsName(e.dataSet.uint16("x00186024")),unitsY:t._getUnitsName(e.dataSet.uint16("x00186026")),deltaX:e.dataSet.double("x0018602c"),deltaY:e.dataSet.double("x0018602e")})}),n},e.prototype.frameTime=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280009",1),e=this._dataSet.intString("x00082144"),n=void 0;return"number"==typeof t&&(t=t.toString(16),n=this._dataSet.floatString("x0018"+t)),void 0===n&&"number"==typeof e&&(n=1e3/e),void 0===n&&(n=null),n},e.prototype.rows=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280010");return void 0===t&&(t=null),t},e.prototype.columns=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280011");return void 0===t&&(t=null),t},e.prototype.pixelType=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return 0},e.prototype.pixelRepresentation=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280103");return t},e.prototype.pixelPaddingValue=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.int16("x00280120");return void 0===t&&(t=null),t},e.prototype.bitsAllocated=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280100");return t},e.prototype.highBit=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.uint16("x00280102");return t},e.prototype.rescaleIntercept=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289145","x00281052",t)},e.prototype.rescaleSlope=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289145","x00281053",t)},e.prototype.windowCenter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289132","x00281050",t)},e.prototype.windowWidth=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289132","x00281051",t)},e.prototype.sliceThickness=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._findFloatStringInFrameGroupSequence("x00289110","x00180050",t)},e.prototype.spacingBetweenSlices=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.floatString("x00180088");return void 0===t&&(t=null),t},e.prototype.dimensionIndexValues=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=null,n=this._dataSet.elements.x52009230;if(void 0!==n){var i=n.items[t].dataSet.elements.x00209111;if(void 0!==i&&null!==i){var r=(i=i.items[0].dataSet).elements.x00209157;if(void 0!==r&&null!==r){var o=r.length/4;e=[];for(var a=0;a<o;a++)e.push(i.uint32("x00209157",a))}}}return e},e.prototype.inStackPositionNumber=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=null,n=this._dataSet.elements.x52009230;void 0!==n?e=n.items[t].dataSet.elements.x00209111.items[0].dataSet.uint32("x00209057"):e=null;return e},e.prototype.stackID=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=null,n=this._dataSet.elements.x52009230;void 0!==n?e=n.items[t].dataSet.elements.x00209111.items[0].dataSet.intString("x00209056"):e=null;return e},e.prototype.extractPixelData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._decodePixelData(t);return this.numberOfChannels()>1?this._convertColorSpace(e):e},e.prototype._findInGroupSequence=function(t,e,n){var i=this._dataSet.elements[t];if(void 0!==i){var r=i.items[n].dataSet.elements[e];if(void 0!==r)return r.items[0].dataSet}return null},e.prototype._findStringInGroupSequence=function(t,e,n,i){var r=this._findInGroupSequence(t,e,i);return null!==r?r.string(n):null},e.prototype._findStringInFrameGroupSequence=function(t,e,n){return this._findStringInGroupSequence("x52009229",t,e,0)||this._findStringInGroupSequence("x52009230",t,e,n)},e.prototype._findStringEverywhere=function(t,e,n){var i=this._findStringInFrameGroupSequence(t,e,n);if(null===i){i=this._findStringInSequence("x00540022",e)}return null===i&&(i=this._dataSet.string(e)),void 0===i&&(i=null),i},e.prototype._findStringInSequence=function(t,e,n){var i=this._dataSet.elements[t],r=void 0;return i&&(r=i.items[0].dataSet.string(e)),void 0===r&&(r=null),r},e.prototype._findFloatStringInGroupSequence=function(t,e,n,i){var r=this._dataSet.floatString(n);return void 0===r&&null!==(r=this._findInGroupSequence(t,e,i))?r.floatString(n):r},e.prototype._findFloatStringInFrameGroupSequence=function(t,e,n){return this._findFloatStringInGroupSequence("x52009229",t,e,0)||this._findFloatStringInGroupSequence("x52009230",t,e,n)},e.prototype._decodePixelData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.transferSyntaxUID();if("1.2.840.10008.1.2.4.90"===e||"1.2.840.10008.1.2.4.91"===e)return this._decodeJ2K(t);if("1.2.840.10008.1.2.5"===e)return this._decodeRLE(t);if("1.2.840.10008.1.2.4.57"===e||"1.2.840.10008.1.2.4.70"===e)return this._decodeJPEGLossless(t);if("1.2.840.10008.1.2.4.50"===e||"1.2.840.10008.1.2.4.51"===e)return this._decodeJPEGBaseline(t);if("1.2.840.10008.1.2"===e||"1.2.840.10008.1.2.1"===e)return this._decodeUncompressed(t);if("1.2.840.10008.1.2.2"===e){var n=this._decodeUncompressed(t);return this._swapFrame(n)}throw{error:"no decoder for transfer syntax "+e}},e.prototype.framesAreFragmented=function(){return this._dataSet.intString("x00280008")!==this._dataSet.elements.x7fe00010.fragments.length},e.prototype.getEncapsulatedImageFrame=function(t){return this._dataSet.elements.x7fe00010&&this._dataSet.elements.x7fe00010.basicOffsetTable.length?s.readEncapsulatedImageFrame(this._dataSet,this._dataSet.elements.x7fe00010,t):this.framesAreFragmented()?s.readEncapsulatedImageFrame(this._dataSet,this._dataSet.elements.x7fe00010,t,s.createJPEGBasicOffsetTable(this._dataSet,this._dataSet.elements.x7fe00010)):s.readEncapsulatedPixelDataFromFragments(this._dataSet,this._dataSet.elements.x7fe00010,t)},e.prototype._decodeJpx=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=new u;if(e.parse(this.getEncapsulatedImageFrame(t)),1!==e.componentsCount)throw new Error("JPEG2000 decoder returned a componentCount of ${componentsCount}, when 1 is expected");if(1!==e.tiles.length)throw new Error("JPEG2000 decoder returned a tileCount of ${tileCount}, when 1 is expected");return e.tiles[0].items},e.prototype._decodeOpenJPEG=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getEncapsulatedImageFrame(t),n=this.bitsAllocated(t)<=8?1:2,i=1===this.pixelRepresentation(t),r=h._malloc(e.length);h.writeArrayToMemory(e,r);var o=h._malloc(4),a=h._malloc(4),s=h._malloc(4),l=h._malloc(4),c=h._malloc(4),u=h.ccall("jp2_decode","number",["number","number","number","number","number","number","number"],[r,e.length,o,a,s,l,c]),f=h.getValue(o,"*");if(0!==u)return console.log("[opj_decode] decoding failed!"),h._free(r),h._free(f),h._free(s),h._free(l),h._free(a),void h._free(c);var d=h.getValue(s,"i32")*h.getValue(l,"i32")*h.getValue(c,"i32"),p=new Int32Array(h.HEAP32.buffer,f,d),m=void 0;if(1===n)if(Uint8Array.from)m=Uint8Array.from(p);else{m=new Uint8Array(d);for(var g=0;g<d;g++)m[g]=p[g]}else if(i)if(Int16Array.from)m=Int16Array.from(p);else{m=new Int16Array(d);for(var y=0;y<d;y++)m[y]=p[y]}else if(Uint16Array.from)m=Uint16Array.from(p);else{m=new Uint16Array(d);for(var v=0;v<d;v++)m[v]=p[v]}return h._free(r),h._free(o),h._free(f),h._free(a),h._free(s),h._free(l),h._free(c),m},e.prototype._decodeJ2K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return void 0===o?this._decodeJpx(t):h||(h=o())&&h._jp2_decode?this._decodeOpenJPEG(t):this._decodeJpx(t)},e.prototype._decodeRLE=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.bitsAllocated(t),n=this.planarConfiguration(),i=this.columns(),r=this.rows(),o=this.samplesPerPixel(t),l={pixelRepresentation:this.pixelRepresentation(t),bitsAllocated:e,planarConfiguration:n,columns:i,rows:r,samplesPerPixel:o},c=s.readEncapsulatedPixelDataFromFragments(this._dataSet,this._dataSet.elements.x7fe00010,t);return Object(a.a)(l,c).pixelData},e.prototype._decodeJPEGLossless=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getEncapsulatedImageFrame(t),n=this.pixelRepresentation(t),i=this.bitsAllocated(t)<=8?1:2,r=(new l.lossless.Decoder).decode(e.buffer,e.byteOffset,e.length,i);return 0===n?2===i?new Uint16Array(r.buffer):new Uint8Array(r.buffer):new Int16Array(r.buffer)},e.prototype._decodeJPEGBaseline=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getEncapsulatedImageFrame(t),n=this.rows(t),i=this.columns(t),r=this.bitsAllocated(t),o=new c;return o.parse(e),8===r?o.getData(i,n):16===r?o.getData16(i,n):void 0},e.prototype._decodeUncompressed=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.pixelRepresentation(t),n=this.bitsAllocated(t),i=this._dataSet.elements.x7fe00010.dataOffset,r=this.numberOfChannels(),o=this.rows(t)*this.columns(t)*r,a=0,s=this._dataSet.byteArray.buffer;if(0===e&&8===n)return a=i+t*o,new Uint8Array(s,a,o);if(0===e&&16===n)return a=i+t*o*2,new Uint16Array(s,a,o);if(1===e&&16===n)return a=i+t*o*2,new Int16Array(s,a,o);if(0===e&&32===n)return a=i+t*o*4,new Uint32Array(s,a,o);if(0===e&&1===n){var l=new ArrayBuffer(o),c=new Uint8Array(l);a=i+t*o;for(var u=0,h=t*o,f=t*o+o,d=Math.floor(h/8),p=h-8*d,m=Math.ceil(f/8),g=new Uint8Array(s,i),y=d;y<=m;y++){for(;p<8;){switch(p){case 0:c[u]=1&g[y];break;case 1:c[u]=g[y]>>>1&1;break;case 2:c[u]=g[y]>>>2&1;break;case 3:c[u]=g[y]>>>3&1;break;case 4:c[u]=g[y]>>>4&1;break;case 5:c[u]=g[y]>>>5&1;break;case 6:c[u]=g[y]>>>6&1;break;case 7:c[u]=g[y]>>>7&1}if(p++,++u>=o)return c}p=0}}},e.prototype._interpretAsRGB=function(t){return-1!==["RGB","YBR_RCT","YBR_ICT","YBR_FULL_422"].indexOf(t)},e.prototype._convertColorSpace=function(t){var e=null,n=this.photometricInterpretation(),i=this.planarConfiguration();null===i&&(i=0,window.console.log("Planar Configuration was not set and was defaulted to  0"));var r=this._interpretAsRGB(n);if(r&&0===i)e=t;else if(r&&1===i){if(t instanceof Int8Array)e=new Int8Array(t.length);else if(t instanceof Uint8Array)e=new Uint8Array(t.length);else if(t instanceof Int16Array)e=new Int16Array(t.length);else{if(!(t instanceof Uint16Array))throw new Error("unsuported typed array: "+t);e=new Uint16Array(t.length)}for(var o=t.length/3,a=0,s=0,l=o,c=2*o,u=0;u<o;u++)e[a++]=t[s++],e[a++]=t[l++],e[a++]=t[c++]}else{if("YBR_FULL"!==n)throw new Error("photometric interpolation not supported: "+n);if(t instanceof Int8Array)e=new Int8Array(t.length);else if(t instanceof Uint8Array)e=new Uint8Array(t.length);else if(t instanceof Int16Array)e=new Int16Array(t.length);else{if(!(t instanceof Uint16Array))throw new Error("unsuported typed array: "+t);e=new Uint16Array(t.length)}for(var h=t.length/3,f=0,d=0,p=0;p<h;p++){var m=t[f++],g=t[f++],y=t[f++];e[d++]=m+1.402*(y-128),e[d++]=m-.34414*(g-128)-.71414*(y-128),e[d++]=m+1.772*(g-128)}}return e},e.prototype._swapFrame=function(t){var e=this.bitsAllocated();if(16===e)for(var n=0;n<t.length;n++)t[n]=this._swap16(t[n]);else if(32===e)for(var i=0;i<t.length;i++)t[i]=this._swap32(t[i]);return t},e.prototype._getUnitsName=function(t){var e={0:"none",1:"percent",2:"dB",3:"cm",4:"seconds",5:"hertz",6:"dB/seconds",7:"cm/sec",8:"cm2",9:"cm2/sec",10:"cm3",11:"cm3/sec",12:"degrees"};return e.hasOwnProperty(t)?e[t]:"none"},e}(r.a);e.a=f},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(t,e){if(8===t.bitsAllocated)return t.planarConfiguration?function(t,e){for(var n=e,i=t.rows*t.columns,r=new ArrayBuffer(i*t.samplesPerPixel),o=new DataView(n.buffer,n.byteOffset),a=new Int8Array(n.buffer,n.byteOffset),s=new Int8Array(r),l=0,c=o.getInt32(0,!0),u=0;u<c;++u){l=u*i;var h=o.getInt32(4*(u+1),!0),f=o.getInt32(4*(u+2),!0);0===f&&(f=n.length);for(var d=i*c;h<f;){var p=a[h++];if(p>=0&&p<=127)for(var m=0;m<p+1&&l<d;++m)s[l]=a[h++],l++;else if(p<=-1&&p>=-127)for(var g=a[h++],y=0;y<1-p&&l<d;++y)s[l]=g,l++}}return t.pixelData=new Uint8Array(r),t}(t,e):function(t,e){for(var n=e,i=t.rows*t.columns,r=new ArrayBuffer(i*t.samplesPerPixel),o=new DataView(n.buffer,n.byteOffset),a=new Int8Array(n.buffer,n.byteOffset),s=new Int8Array(r),l=0,c=o.getInt32(0,!0),u=0;u<c;++u){l=u;var h=o.getInt32(4*(u+1),!0),f=o.getInt32(4*(u+2),!0);0===f&&(f=n.length);for(var d=i*c;h<f;){var p=a[h++];if(p>=0&&p<=127)for(var m=0;m<p+1&&l<d;++m)s[l]=a[h++],l+=t.samplesPerPixel;else if(p<=-1&&p>=-127)for(var g=a[h++],y=0;y<1-p&&l<d;++y)s[l]=g,l+=t.samplesPerPixel}}return t.pixelData=new Uint8Array(r),t}(t,e);if(16===t.bitsAllocated)return function(t,e){for(var n=e,i=t.rows*t.columns,r=new ArrayBuffer(i*t.samplesPerPixel*2),o=new DataView(n.buffer,n.byteOffset),a=new Int8Array(n.buffer,n.byteOffset),s=new Int8Array(r),l=o.getInt32(0,!0),c=0;c<l;++c){var u=0,h=0===c?1:0,f=o.getInt32(4*(c+1),!0),d=o.getInt32(4*(c+2),!0);for(0===d&&(d=n.length);f<d;){var p=a[f++];if(p>=0&&p<=127)for(var m=0;m<p+1&&u<i;++m)s[2*u+h]=a[f++],u++;else if(p<=-1&&p>=-127)for(var g=a[f++],y=0;y<1-p&&u<i;++y)s[2*u+h]=g,u++}}return 0===t.pixelRepresentation?t.pixelData=new Uint16Array(r):t.pixelData=new Int16Array(r),t}(t,e);throw new Error("unsupported pixel format for RLE")}},function(t,e,n){"use strict";var i=n(5),r=n(0);var o=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));r._id=i,r._url=n.url,r._header={},r._buffer=null;try{(new TextDecoder).decode(n.mhdBuffer).split("\n").forEach(function(t){var e=t.split("=");2===e.length&&(r._header[e[0].trim()]=e[1].trim())}),r._header.DimSize=r._header.DimSize.split(" "),r._header.ElementSpacing=r._header.ElementSpacing.split(" "),r._header.TransformMatrix=r._header.TransformMatrix.split(" "),r._header.Offset=r._header.Offset.split(" "),r._buffer=n.rawBuffer}catch(t){window.console.log("ooops... :(")}return r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.rightHanded=function(){var t=this._header.AnatomicalOrientation;return this._rightHanded="RAS"===t||"RPI"===t||"LPS"===t||"LAI"===t,this._rightHanded},e.prototype.seriesInstanceUID=function(){return this._url},e.prototype.numberOfFrames=function(){return parseInt(this._header.DimSize[2],10)},e.prototype.sopInstanceUID=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},e.prototype.rows=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return parseInt(this._header.DimSize[1],10)},e.prototype.columns=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return parseInt(this._header.DimSize[0],10)},e.prototype.pixelType=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=0;return"MET_UFLOAT"!==this._header.ElementType&&"MET_FLOAT"!==this._header.ElementType||(t=1),t},e.prototype.bitsAllocated=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=1;return"MET_UCHAR"===this._header.ElementType||"MET_CHAR"===this._header.ElementType?t=8:"MET_USHORT"===this._header.ElementType||"MET_SHORT"===this._header.ElementType?t=16:"MET_UINT"!==this._header.ElementType&&"MET_INT"!==this._header.ElementType&&"MET_UFLOAT"!==this._header.ElementType&&"MET_FLOAT"!==this._header.ElementType||(t=32),t},e.prototype.pixelSpacing=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[parseFloat(this._header.ElementSpacing[1],10),parseFloat(this._header.ElementSpacing[0],10),parseFloat(this._header.ElementSpacing[2],10)]},e.prototype.imageOrientation=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._header.AnatomicalOrientation.match(/L/)?-1:1,e=this._header.AnatomicalOrientation.match(/P/)?-1:1,n=new r.a(parseFloat(this._header.TransformMatrix[0])*t,parseFloat(this._header.TransformMatrix[1])*e,parseFloat(this._header.TransformMatrix[2]));n.normalize();var i=new r.a(parseFloat(this._header.TransformMatrix[3])*t,parseFloat(this._header.TransformMatrix[4])*e,parseFloat(this._header.TransformMatrix[5]));return i.normalize(),[n.x,n.y,n.z,i.x,i.y,i.z]},e.prototype.imagePosition=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[parseFloat(this._header.Offset[0]),parseFloat(this._header.Offset[1]),parseFloat(this._header.Offset[2])]},e.prototype.extractPixelData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(t)},e.prototype._decompressUncompressed=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._buffer,n=this.numberOfChannels(),i=this.rows(t)*this.columns(t)*n;this.rightHanded()||(t=this.numberOfFrames()-1-t);var r=t*i;return"MET_CHAR"===this._header.ElementType?new Int8Array(e,r,i):"MET_UCHAR"===this._header.ElementType?new Uint8Array(e,r,i):"MET_SHORT"===this._header.ElementType?(r*=2,new Int16Array(e,r,i)):"MET_USHORT"===this._header.ElementType?(r*=2,new Uint16Array(e,r,i)):"MET_INT"===this._header.ElementType?(r*=4,new Int32Array(e,r,i)):"MET_UINT"===this._header.ElementType?(r*=4,new Uint32Array(e,r,i)):"MET_FLOAT"===this._header.ElementType?(r*=4,new Float32Array(e,r,i)):void 0},e}(i.a);e.a=o},function(t,e,n){"use strict";var i=n(5),r=n(0);var o=n(15),a=n(110),s=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));r._id=i,r._arrayBuffer=n.buffer,r._url=n.url,r._dataSet=null,r._unpackedData=null;try{r._dataSet=a.parse(r._arrayBuffer)}catch(t){window.console.log("ooops... :(")}return r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.rightHanded=function(){return this._dataSet.space.match(/^right-anterior-superior/)||this._dataSet.space.match(/^left-posterior-superior/)?this._rightHanded=!0:this._rightHanded=!1,this._rightHanded},e.prototype.seriesInstanceUID=function(){return this._url},e.prototype.numberOfFrames=function(){return this._dataSet.sizes[2]},e.prototype.numberOfChannels=function(){return 1},e.prototype.sopInstanceUID=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},e.prototype.rows=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.sizes[1]},e.prototype.columns=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._dataSet.sizes[0]},e.prototype.pixelType=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=0;return"float"===this._dataSet.type&&(t=1),t},e.prototype.bitsAllocated=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=1;return"int8"===this._dataSet.type||"uint8"===this._dataSet.type||"char"===this._dataSet.type?t=8:"int16"===this._dataSet.type||"uint16"===this._dataSet.type||"short"===this._dataSet.type?t=16:"int32"!==this._dataSet.type&&"uint32"!==this._dataSet.type&&"float"!==this._dataSet.type||(t=32),t},e.prototype.pixelSpacing=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=new r.a(this._dataSet.spaceDirections[0][0],this._dataSet.spaceDirections[0][1],this._dataSet.spaceDirections[0][2]),e=new r.a(this._dataSet.spaceDirections[1][0],this._dataSet.spaceDirections[1][1],this._dataSet.spaceDirections[1][2]),n=new r.a(this._dataSet.spaceDirections[2][0],this._dataSet.spaceDirections[2][1],this._dataSet.spaceDirections[2][2]);return[t.length(),e.length(),n.length()]},e.prototype.imageOrientation=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this._dataSet.space.match(/right/)?-1:1,e=this._dataSet.space.match(/anterior/)?-1:1,n=new r.a(this._dataSet.spaceDirections[0][0]*t,this._dataSet.spaceDirections[0][1]*e,this._dataSet.spaceDirections[0][2]);n.normalize();var i=new r.a(this._dataSet.spaceDirections[1][0]*t,this._dataSet.spaceDirections[1][1]*e,this._dataSet.spaceDirections[1][2]);return i.normalize(),[n.x,n.y,n.z,i.x,i.y,i.z]},e.prototype.imagePosition=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[this._dataSet.spaceOrigin[0],this._dataSet.spaceOrigin[1],this._dataSet.spaceOrigin[2]]},e.prototype.extractPixelData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decompressUncompressed(t)},e.prototype._decompressUncompressed=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._dataSet.buffer,n=this.numberOfChannels(),i=this.rows(t)*this.columns(t)*n;this.rightHanded()||(t=this.numberOfFrames()-1-t);var r=t*i;if(null===this._unpackedData&&"gzip"===this._dataSet.encoding){var a=o.inflate(this._dataSet.buffer);this._unpackedData=a.buffer,e=this._unpackedData}else"gzip"===this._dataSet.encoding&&(e=this._unpackedData);return"int8"===this._dataSet.type||"char"===this._dataSet.type?new Int8Array(e,r,i):"uint8"===this._dataSet.type?new Uint8Array(e,r,i):"int16"===this._dataSet.type||"short"===this._dataSet.type?(r*=2,new Int16Array(e,r,i)):"uint16"===this._dataSet.type?(r*=2,new Uint16Array(e,r,i)):"int32"===this._dataSet.type?(r*=4,new Int32Array(e,r,i)):"uint32"===this._dataSet.type?(r*=4,new Uint32Array(e,r,i)):"float"===this._dataSet.type?(r*=4,new Float32Array(e,r,i)):void 0},e}(i.a);e.a=s},function(t,e,n){"use strict";var i=n(5),r=n(0);var o=function(t){function e(n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if(o._id=i,o._url=n.url,o._buffer=null,o._bufferPos=0,o._dataPos=0,o._pixelData=null,o._version=1,o._width=0,o._height=0,o._depth=0,o._nframes=0,o._type=e.MRI_UCHAR,o._dof=0,o._goodRASFlag=0,o._spacingXYZ=[1,1,1],o._Xras=[-1,0,0],o._Yras=[0,0,-1],o._Zras=[0,1,0],o._Cras=[0,0,0],o._tr=0,o._flipAngle=0,o._te=0,o._ti=0,o._fov=0,o._tags=[],o._origin=[0,0,0],o._imageOrient=[0,0,0,0,0,0],o._buffer=n.buffer,o._version=o._readInt(),o._swapEndian=!1,1==o._version);else{if(16777216!=o._version)throw new Error("MGH/MGZ parser: Unknown Endian.  Version reports: "+o._version);o._swapEndian=!0,o._version=o._swap32(o._version)}o._width=o._readInt(),o._height=o._readInt(),o._depth=o._readInt(),o._nframes=o._readInt(),o._type=o._readInt(),o._dof=o._readInt(),o._goodRASFlag=o._readShort(),o._spacingXYZ=o._readFloat(3),o._Xras=o._readFloat(3),o._Yras=o._readFloat(3),o._Zras=o._readFloat(3),o._Cras=o._readFloat(3),o._bufferPos=284;var a=o._width*o._height*o._depth*o._nframes;o._width,o._height,o._depth;switch(o._type){case e.MRI_UCHAR:o._pixelData=o._readUChar(a);break;case e.MRI_INT:o._pixelData=o._readInt(a);break;case e.MRI_FLOAT:o._pixelData=o._readFloat(a);break;case e.MRI_SHORT:o._pixelData=o._readShort(a);break;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+o._type)}o._tr=o._readFloat(1),o._flipAngle=o._readFloat(1),o._te=o._readFloat(1),o._ti=o._readFloat(1),o._fov=o._readFloat(1);for(var s=new TextDecoder,l=o._tagReadStart();void 0!=l[0];){var c=l[0],u=l[1],h=void 0;switch(c){case e.TAG_OLD_MGH_XFORM:case e.TAG_MGH_XFORM:h=o._readChar(u);break;default:h=o._readChar(u)}h=s.decode(h),o._tags.push({tagType:c,tagValue:h}),l=o._tagReadStart()}var f=(new r.a).fromArray(o._Xras),d=(new r.a).fromArray(o._Yras),p=(new r.a).crossVectors(f,d),m=(new r.a).fromArray(o._Zras);p.angleTo(m)>Math.PI/2&&(o._rightHanded=!1),o._imageOrient=[-o._Xras[0],-o._Xras[1],o._Xras[2],-o._Yras[0],-o._Yras[1],o._Yras[2]];for(var g=o._width/2,y=o._height/2,v=o._depth/2,b=0;b<3;++b)o._origin[b]=o._Cras[b]-(o._Xras[b]*o._spacingXYZ[0]*g+o._Yras[b]*o._spacingXYZ[1]*y+o._Zras[b]*o._spacingXYZ[2]*v);return o._origin=[-o._origin[0],-o._origin[1],o._origin[2]],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.seriesInstanceUID=function(){return this._url},e.prototype.numberOfFrames=function(){return this._depth},e.prototype.sopInstanceUID=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},e.prototype.rows=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._width},e.prototype.columns=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._height},e.prototype.pixelType=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(this._type){case e.MRI_UCHAR:case e.MRI_INT:case e.MRI_SHORT:return 0;case e.MRI_FLOAT:return 1;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type)}},e.prototype.bitsAllocated=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(this._type){case e.MRI_UCHAR:return 8;case e.MRI_SHORT:return 16;case e.MRI_INT:case e.MRI_FLOAT:return 32;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type)}},e.prototype.pixelSpacing=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._spacingXYZ},e.prototype.imageOrientation=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._imageOrient},e.prototype.imagePosition=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._origin},e.prototype.extractPixelData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._width*this._height;return this._pixelData.slice(t*e,(t+1)*e)},e.prototype._readInt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+4*t));this._bufferPos+=4*t;var n=void 0;if(1==t)n=e.getInt32(0,this._swapEndian);else{n=new Int32Array(t);for(var i=0;i<t;i++)n[i]=e.getInt32(4*i,this._swapEndian)}return n},e.prototype._readShort=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+2*t));this._bufferPos+=2*t;var n=void 0;if(1==t)n=e.getInt16(0,this._swapEndian);else{n=new Int16Array(t);for(var i=0;i<t;i++)n[i]=e.getInt16(2*i,this._swapEndian)}return n},e.prototype._readLong=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+8*t));this._bufferPos+=8*t;for(var n=new Uint16Array(t),i=0;i<t;i++){var r=0,o=0;this._swapendian?r=4:o=4;var a=e.getInt32(8*i+r,this._swapEndian),s=e.getInt32(8*i+o,this._swapEndian);0!=a&&(console.log("Unable to read Int64 with high word: "+a+"low word: "+s),s=void 0),n[i]=s}return 0==t?void 0:1==t?n[0]:n},e.prototype._readChar=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+t));this._bufferPos+=t;var n=void 0;if(1==t)n=e.getInt8(0,this._swapEndian);else{n=new Int8Array(t);for(var i=0;i<t;i++)n[i]=e.getInt8(i,this._swapEndian)}return n},e.prototype._readUChar=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+t));this._bufferPos+=t;var n=void 0;if(1==t)n=e.getUint8(0,this._swapEndian);else{n=new Uint8Array(t);for(var i=0;i<t;i++)n[i]=e.getUint8(i,this._swapEndian)}return n},e.prototype._readFloat=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+4*t));this._bufferPos+=4*t;var n=void 0;if(1==t)n=e.getFloat32(0,this._swapEndian);else{n=new Float32Array(t);for(var i=0;i<t;i++)n[i]=e.getFloat32(4*i,this._swapEndian)}return n},e.prototype._tagReadStart=function(){if(this._bufferPos>=this._buffer.byteLength)return[void 0,void 0];var t=this._readInt(),n=void 0;switch(t){case e.TAG_OLD_MGH_XFORM:n=this._readInt(),n-=1;break;case e.TAG_OLD_SURF_GEOM:case e.TAG_OLD_USEREALRAS:case e.TAG_OLD_COLORTABLE:n=0;break;default:n=this._readLong()}return void 0==n&&(t=void 0),[t,n]},e}(i.a);e.a=o,o.MRI_UCHAR=0,o.MRI_INT=1,o.MRI_LONG=2,o.MRI_FLOAT=3,o.MRI_SHORT=4,o.MRI_BITMAP=5,o.MRI_TENSOR=6,o.MRI_FLOAT_COMPLEX=7,o.MRI_DOUBLE_COMPLEX=8,o.MRI_RGB=9,o.TAG_OLD_COLORTABLE=1,o.TAG_OLD_USEREALRAS=2,o.TAG_CMDLINE=3,o.TAG_USEREALRAS=4,o.TAG_COLORTABLE=5,o.TAG_GCAMORPH_GEOM=10,o.TAG_GCAMORPH_TYPE=11,o.TAG_GCAMORPH_LABELS=12,o.TAG_OLD_SURF_GEOM=20,o.TAG_SURF_GEOM=21,o.TAG_OLD_MGH_XFORM=30,o.TAG_MGH_XFORM=31,o.TAG_GROUP_AVG_SURFACE_AREA=32,o.TAG_AUTO_ALIGN=33,o.TAG_SCALAR_DOUBLE=40,o.TAG_PEDIR=41,o.TAG_MRI_FRAME=42,o.TAG_FIELDSTRENGTH=43},function(t,e,n){"use strict";var i=n(77),r=n(76),o=n.n(r),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var s=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return o._loaded=-1,o._totalLoaded=-1,o._parsed=-1,o._totalParsed=-1,o._data=[],o._container=n,o._progressBar=null,o._container&&r&&(o._progressBar=new r(o._container)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.free=function(){this._data=[],this._container=null,this._progressBar&&(this._progressBar.free(),this._progressBar=null)},e.prototype.fetch=function(t,e){var n=this;return new Promise(function(i,r){var o=new XMLHttpRequest;o.open("GET",t),o.crossOrigin=!0,o.responseType="arraybuffer",o.onloadstart=function(e){n.emit("fetch-start",{file:t,time:new Date})},o.onload=function(e){if(200===o.status||0===o.status){n._loaded=e.loaded,n._totalLoaded=e.total,n._progressBar&&n._progressBar.update(n._loaded,n._totalLoaded,"load",t);var a=o.response,s={url:t,buffer:a};n.emit("fetch-success",{file:t,time:new Date,totalLoaded:e.total}),i(s)}else r(o.statusText)},o.onerror=function(){n.emit("fetch-error",{file:t,time:new Date}),r(o.statusText)},o.onabort=function(e){n.emit("fetch-abort",{file:t,time:new Date}),r(o.statusText||"Aborted")},o.ontimeout=function(){n.emit("fetch-timeout",{file:t,time:new Date}),r(o.statusText)},o.onprogress=function(e){n._loaded=e.loaded,n._totalLoaded=e.total,n.emit("fetch-progress",{file:t,total:e.total,loaded:e.loaded,time:new Date}),n._progressBar&&n._progressBar.update(n._loaded,n._totalLoaded,"load",t)},o.onloadend=function(e){n.emit("fetch-end",{file:t,time:new Date})},e instanceof Map&&e.set(t,o),o.send()})},e.prototype.parse=function(t){return new Promise(function(e,n){e(t)})},e.prototype.loadSequenceGroup=function(t,e){var n=this,i=[];return t.forEach(function(t){i.push(n.fetch(t,e))}),Promise.all(i).then(function(t){return n.parse(t)}).then(function(t){return n._data.push(t),t}).catch(function(t){"Aborted"!==t&&(window.console.log("oops... something went wrong..."),window.console.log(t))})},e.prototype.loadSequence=function(t,e){var n=this;return this.fetch(t,e).then(function(t){return n.parse(t)}).then(function(t){return n._data.push(t),t}).catch(function(t){"Aborted"!==t&&(window.console.log("oops... something went wrong..."),window.console.log(t))})},e.prototype.load=function(t,e){var n=this;Array.isArray(t)||(t=[t]),this._progressBar&&(this._progressBar.totalFiles=t.length,this._progressBar.requests=e),this.emit("load-start",{files:t,time:new Date});var i=[];return t.forEach(function(t){Array.isArray(t)?i.push(n.loadSequenceGroup(t,e)):i.push(n.loadSequence(t,e))}),Promise.all(i)},a(e,[{key:"data",set:function(t){this._data=t},get:function(){return this._data}}]),e}(o.a);e.a=s},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,s,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(o(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(r(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,l=0;l<a;l++)c[l].apply(this,s);return!0},n.prototype.addListener=function(t,e){var a;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,o=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._container=e,this._modes={load:{name:"load",color:"#FFF56F"},parse:{name:"parse",color:"#2196F3"}},this.requestAnimationFrameID=null,this._mode=null,this._value=null,this._total=null,this._totalFiles=null,this.init()}return t.prototype.free=function(){var t=this._container.getElementsByClassName("progress container");t.length>0&&t[0].parentNode.removeChild(t[0]),t=null,window.cancelAnimationFrame(this.requestAnimationFrameID)},t.prototype.init=function(){var t=this._domContainer();for(var e in this._modes)if(this._modes.hasOwnProperty(e)){var n=this._domBar(this._modes[e]);t.appendChild(n),n=null}this._container.appendChild(t),t=null,this.updateUI()},t.prototype.update=function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._mode=n,this._value=t,0===e?(this._total=t,this._value=Math.random()*t):this._total=e},t.prototype.updateUI=function(){var t=this;if(this.requestAnimationFrameID=requestAnimationFrame(function(){t.updateUI()}),!(this._modes.hasOwnProperty(this._mode)&&this._modes[this._mode].hasOwnProperty("name")&&this._modes[this._mode].hasOwnProperty("color")))return!1;var e=Math.round(this._value/this._total*100),n=this._modes[this._mode].color,i=this._container.getElementsByClassName("progress "+this._modes[this._mode].name);i.length>0&&(i[0].style.borderColor=n,i[0].style.width=e+"%"),i=null},t.prototype._domContainer=function(){var t=document.createElement("div");return t.classList.add("progress"),t.classList.add("container"),t.style.width="100%",t.style.height="8px",t.style.position="absolute",t.style.backgroundColor="rgba(158, 158, 158, 0.5)",t.style.top="0",t.style.zIndex="1",t},t.prototype._domBar=function(t){if(!t.hasOwnProperty("name")||!t.hasOwnProperty("color"))return window.console.log("Invalid mode provided."),window.console.log(t),!1;var e=document.createElement("div");return e.classList.add(t.name),e.classList.add("progress"),e.style.border="2px solid "+t.color,e.style.width="0%",e},i(t,[{key:"totalFiles",set:function(t){this._totalFiles=t},get:function(){return this._totalFiles}}]),t}();e.a=r},function(t,e,n){t.exports=n(79)},function(t,e,n){"use strict";n.r(e);var i=n(40),r=n(42),o=n(44);window.onload=function(){var t=new i.a;t.animate();var e=new r.a;e.file="https://cdn.rawgit.com/FNNDSC/data/master/vtk/marc_avf/avf.vtk",e.materialColor=16771899,e.load().then(function(e){t.add(e)}).catch(function(t){return console.log("ERROR: something went wrong with the mesh load.",t)});var n=new o.a;n.file="https://cdn.rawgit.com/FNNDSC/data/master/nifti/marc_avf/avf_float_32.nii.gz",n.progressbarContainer=t.container,n.load().then(function(e){t.add(e),t.center(e.centerLPS),t.render();var n=document.createElement("div");n.setAttribute("id","puppeteer"),document.body.appendChild(n)}).catch(function(t){return console.log("ERROR: something went wrong with the volume load.",t)})}},function(t,e,n){"use strict";var i=n(81),r=n(7),o=n(28),a=n(16),s=n(29),l=Object.prototype.toString,c=0,u=-1,h=0,f=8;function d(t){if(!(this instanceof d))return new d(t);this.options=r.assign({level:u,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==c)throw new Error(a[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=i.deflateSetDictionary(this.strm,p))!==c)throw new Error(a[n]);this._dict_set=!0}}function p(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}d.prototype.push=function(t,e){var n,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new r.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=i.deflate(s,a))&&n!==c)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(s.output,s.next_out))):this.onData(r.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===a?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==a||(this.onEnd(c),s.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=d,e.deflate=p,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,p(t,e)}},function(t,e,n){"use strict";var i,r=n(7),o=n(82),a=n(26),s=n(27),l=n(16),c=0,u=1,h=3,f=4,d=5,p=0,m=1,g=-2,y=-3,v=-5,b=-1,_=1,w=2,A=3,x=4,S=0,M=2,E=8,T=9,I=15,k=8,C=286,B=30,R=19,P=2*C+1,L=15,D=3,N=258,O=N+D+1,F=32,G=42,z=69,U=73,H=91,V=103,W=113,Z=666,j=1,Y=2,X=3,J=4,Q=3;function q(t,e){return t.msg=l[e],e}function K(t){return(t<<1)-(t>4?9:0)}function $(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function et(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function nt(t,e){t.pending_buf[t.pending++]=e}function it(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function rt(t,e,n,i){var o=t.avail_in;return o>i&&(o=i),0===o?0:(t.avail_in-=o,r.arraySet(e,t.input,t.next_in,o,n),1===t.state.wrap?t.adler=a(t.adler,e,o,n):2===t.state.wrap&&(t.adler=s(t.adler,e,o,n)),t.next_in+=o,t.total_in+=o,o)}function ot(t,e){var n,i,r=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-O?t.strstart-(t.w_size-O):0,c=t.window,u=t.w_mask,h=t.prev,f=t.strstart+N,d=c[o+a-1],p=c[o+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(n=e)+a]===p&&c[n+a-1]===d&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<f);if(i=N-(f-o),o=f-N,i>a){if(t.match_start=e,a=i,i>=s)break;d=c[o+a-1],p=c[o+a]}}}while((e=h[e&u])>l&&0!=--r);return a<=t.lookahead?a:t.lookahead}function at(t){var e,n,i,o,a,s=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-O)){r.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=s?i-s:0}while(--n);e=n=s;do{i=t.prev[--e],t.prev[e]=i>=s?i-s:0}while(--n);o+=s}if(0===t.strm.avail_in)break;if(n=rt(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=n,t.lookahead+t.insert>=D)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+D-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<D)););}while(t.lookahead<O&&0!==t.strm.avail_in)}function st(t,e){for(var n,i;;){if(t.lookahead<O){if(at(t),t.lookahead<O&&e===c)return j;if(0===t.lookahead)break}if(n=0,t.lookahead>=D&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-O&&(t.match_length=ot(t,n)),t.match_length>=D)if(i=o._tr_tally(t,t.strstart-t.match_start,t.match_length-D),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=D){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(et(t,!1),0===t.strm.avail_out))return j}return t.insert=t.strstart<D-1?t.strstart:D-1,e===f?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?j:Y}function lt(t,e){for(var n,i,r;;){if(t.lookahead<O){if(at(t),t.lookahead<O&&e===c)return j;if(0===t.lookahead)break}if(n=0,t.lookahead>=D&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=D-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-O&&(t.match_length=ot(t,n),t.match_length<=5&&(t.strategy===_||t.match_length===D&&t.strstart-t.match_start>4096)&&(t.match_length=D-1)),t.prev_length>=D&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-D,i=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-D),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=D-1,t.strstart++,i&&(et(t,!1),0===t.strm.avail_out))return j}else if(t.match_available){if((i=o._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return j}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<D-1?t.strstart:D-1,e===f?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?j:Y}function ct(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function ut(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=M,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?G:W,t.adler=2===e.wrap?0:1,e.last_flush=c,o._tr_init(e),p):q(t,g)}function ht(t){var e=ut(t);return e===p&&function(t){t.window_size=2*t.w_size,$(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=D-1,t.match_available=0,t.ins_h=0}(t.state),e}function ft(t,e,n,i,o,a){if(!t)return g;var s=1;if(e===b&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>T||n!==E||i<8||i>15||e<0||e>9||a<0||a>x)return q(t,g);8===i&&(i=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*P),this.dyn_dtree=new r.Buf16(2*(2*B+1)),this.bl_tree=new r.Buf16(2*(2*R+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(L+1),this.heap=new r.Buf16(2*C+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*C+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+D-1)/D),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,ht(t)}i=[new ct(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(at(t),0===t.lookahead&&e===c)return j;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,et(t,!1),0===t.strm.avail_out))return j;if(t.strstart-t.block_start>=t.w_size-O&&(et(t,!1),0===t.strm.avail_out))return j}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?X:J):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),j)}),new ct(4,4,8,4,st),new ct(4,5,16,8,st),new ct(4,6,32,32,st),new ct(4,4,16,16,lt),new ct(8,16,32,32,lt),new ct(8,16,128,128,lt),new ct(8,32,128,256,lt),new ct(32,128,258,1024,lt),new ct(32,258,258,4096,lt)],e.deflateInit=function(t,e){return ft(t,e,E,I,k,S)},e.deflateInit2=ft,e.deflateReset=ht,e.deflateResetKeep=ut,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,p):g},e.deflate=function(t,e){var n,r,a,l;if(!t||!t.state||e>d||e<0)return t?q(t,g):g;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===Z&&e!==f)return q(t,0===t.avail_out?v:g);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===G)if(2===r.wrap)t.adler=0,nt(r,31),nt(r,139),nt(r,8),r.gzhead?(nt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),nt(r,255&r.gzhead.time),nt(r,r.gzhead.time>>8&255),nt(r,r.gzhead.time>>16&255),nt(r,r.gzhead.time>>24&255),nt(r,9===r.level?2:r.strategy>=w||r.level<2?4:0),nt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(nt(r,255&r.gzhead.extra.length),nt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=s(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=z):(nt(r,0),nt(r,0),nt(r,0),nt(r,0),nt(r,0),nt(r,9===r.level?2:r.strategy>=w||r.level<2?4:0),nt(r,Q),r.status=W);else{var y=E+(r.w_bits-8<<4)<<8;y|=(r.strategy>=w||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(y|=F),y+=31-y%31,r.status=W,it(r,y),0!==r.strstart&&(it(r,t.adler>>>16),it(r,65535&t.adler)),t.adler=1}if(r.status===z)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),tt(t),a=r.pending,r.pending!==r.pending_buf_size));)nt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=U)}else r.status=U;if(r.status===U)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),tt(t),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,nt(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.gzindex=0,r.status=H)}else r.status=H;if(r.status===H)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),tt(t),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,nt(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.status=V)}else r.status=V;if(r.status===V&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&tt(t),r.pending+2<=r.pending_buf_size&&(nt(r,255&t.adler),nt(r,t.adler>>8&255),t.adler=0,r.status=W)):r.status=W),0!==r.pending){if(tt(t),0===t.avail_out)return r.last_flush=-1,p}else if(0===t.avail_in&&K(e)<=K(n)&&e!==f)return q(t,v);if(r.status===Z&&0!==t.avail_in)return q(t,v);if(0!==t.avail_in||0!==r.lookahead||e!==c&&r.status!==Z){var b=r.strategy===w?function(t,e){for(var n;;){if(0===t.lookahead&&(at(t),0===t.lookahead)){if(e===c)return j;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return j}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?j:Y}(r,e):r.strategy===A?function(t,e){for(var n,i,r,a,s=t.window;;){if(t.lookahead<=N){if(at(t),t.lookahead<=N&&e===c)return j;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=D&&t.strstart>0&&(i=s[r=t.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){a=t.strstart+N;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a);t.match_length=N-(a-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=D?(n=o._tr_tally(t,1,t.match_length-D),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(et(t,!1),0===t.strm.avail_out))return j}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?j:Y}(r,e):i[r.level].func(r,e);if(b!==X&&b!==J||(r.status=Z),b===j||b===X)return 0===t.avail_out&&(r.last_flush=-1),p;if(b===Y&&(e===u?o._tr_align(r):e!==d&&(o._tr_stored_block(r,0,0,!1),e===h&&($(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),tt(t),0===t.avail_out))return r.last_flush=-1,p}return e!==f?p:r.wrap<=0?m:(2===r.wrap?(nt(r,255&t.adler),nt(r,t.adler>>8&255),nt(r,t.adler>>16&255),nt(r,t.adler>>24&255),nt(r,255&t.total_in),nt(r,t.total_in>>8&255),nt(r,t.total_in>>16&255),nt(r,t.total_in>>24&255)):(it(r,t.adler>>>16),it(r,65535&t.adler)),tt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?p:m)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==G&&e!==z&&e!==U&&e!==H&&e!==V&&e!==W&&e!==Z?q(t,g):(t.state=null,e===W?q(t,y):p):g},e.deflateSetDictionary=function(t,e){var n,i,o,s,l,c,u,h,f=e.length;if(!t||!t.state)return g;if(2===(s=(n=t.state).wrap)||1===s&&n.status!==G||n.lookahead)return g;for(1===s&&(t.adler=a(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&($(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new r.Buf8(n.w_size),r.arraySet(h,e,f-n.w_size,n.w_size,0),e=h,f=n.w_size),l=t.avail_in,c=t.next_in,u=t.input,t.avail_in=f,t.next_in=0,t.input=e,at(n);n.lookahead>=D;){i=n.strstart,o=n.lookahead-(D-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+D-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--o);n.strstart=i,n.lookahead=D-1,at(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=D-1,n.match_available=0,t.next_in=c,t.input=u,t.avail_in=l,n.wrap=s,p},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var i=n(7),r=4,o=0,a=1,s=2;function l(t){for(var e=t.length;--e>=0;)t[e]=0}var c=0,u=1,h=2,f=29,d=256,p=d+1+f,m=30,g=19,y=2*p+1,v=15,b=16,_=7,w=256,A=16,x=17,S=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=new Array(2*(p+2));l(k);var C=new Array(2*m);l(C);var B=new Array(512);l(B);var R=new Array(256);l(R);var P=new Array(f);l(P);var L,D,N,O=new Array(m);function F(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function G(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function z(t){return t<256?B[t]:B[256+(t>>>7)]}function U(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function H(t,e,n){t.bi_valid>b-n?(t.bi_buf|=e<<t.bi_valid&65535,U(t,t.bi_buf),t.bi_buf=e>>b-t.bi_valid,t.bi_valid+=n-b):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function V(t,e,n){H(t,n[2*e],n[2*e+1])}function W(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function Z(t,e,n){var i,r,o=new Array(v+1),a=0;for(i=1;i<=v;i++)o[i]=a=a+n[i-1]<<1;for(r=0;r<=e;r++){var s=t[2*r+1];0!==s&&(t[2*r]=W(o[s]++,s))}}function j(t){var e;for(e=0;e<p;e++)t.dyn_ltree[2*e]=0;for(e=0;e<m;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Y(t){t.bi_valid>8?U(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function X(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function J(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&X(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!X(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function Q(t,e,n){var i,r,o,a,s=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],r=t.pending_buf[t.l_buf+s],s++,0===i?V(t,r,e):(V(t,(o=R[r])+d+1,e),0!==(a=M[o])&&H(t,r-=P[o],a),V(t,o=z(--i),n),0!==(a=E[o])&&H(t,i-=O[o],a))}while(s<t.last_lit);V(t,w,e)}function q(t,e){var n,i,r,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=y,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[r]=0,t.opt_len--,s&&(t.static_len-=a[2*r+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)J(t,o,n);r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],J(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,J(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,a,s,l=e.dyn_tree,c=e.max_code,u=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(o=0;o<=v;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<y;n++)(o=l[2*l[2*(i=t.heap[n])+1]+1]+1)>p&&(o=p,m++),l[2*i+1]=o,i>c||(t.bl_count[o]++,a=0,i>=d&&(a=f[i-d]),s=l[2*i],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(u[2*i+1]+a)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(i=t.bl_count[o];0!==i;)(r=t.heap[--n])>c||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(t,e),Z(o,c,t.bl_count)}function K(t,e,n){var i,r,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=e[2*(i+1)+1],++s<l&&r===a||(s<c?t.bl_tree[2*r]+=s:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*A]++):s<=10?t.bl_tree[2*x]++:t.bl_tree[2*S]++,s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4))}function $(t,e,n){var i,r,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),i=0;i<=n;i++)if(r=a,a=e[2*(i+1)+1],!(++s<l&&r===a)){if(s<c)do{V(t,r,t.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(V(t,r,t.bl_tree),s--),V(t,A,t.bl_tree),H(t,s-3,2)):s<=10?(V(t,x,t.bl_tree),H(t,s-3,3)):(V(t,S,t.bl_tree),H(t,s-11,7));s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4)}}l(O);var tt=!1;function et(t,e,n,r){H(t,(c<<1)+(r?1:0),3),function(t,e,n,r){Y(t),r&&(U(t,n),U(t,~n)),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}e._tr_init=function(t){tt||(function(){var t,e,n,i,r,o=new Array(v+1);for(n=0,i=0;i<f-1;i++)for(P[i]=n,t=0;t<1<<M[i];t++)R[n++]=i;for(R[n-1]=i,r=0,i=0;i<16;i++)for(O[i]=r,t=0;t<1<<E[i];t++)B[r++]=i;for(r>>=7;i<m;i++)for(O[i]=r<<7,t=0;t<1<<E[i]-7;t++)B[256+r++]=i;for(e=0;e<=v;e++)o[e]=0;for(t=0;t<=143;)k[2*t+1]=8,t++,o[8]++;for(;t<=255;)k[2*t+1]=9,t++,o[9]++;for(;t<=279;)k[2*t+1]=7,t++,o[7]++;for(;t<=287;)k[2*t+1]=8,t++,o[8]++;for(Z(k,p+1,o),t=0;t<m;t++)C[2*t+1]=5,C[2*t]=W(t,5);L=new F(k,M,d+1,p,v),D=new F(C,E,0,m,v),N=new F(new Array(0),T,0,g,_)}(),tt=!0),t.l_desc=new G(t.dyn_ltree,L),t.d_desc=new G(t.dyn_dtree,D),t.bl_desc=new G(t.bl_tree,N),t.bi_buf=0,t.bi_valid=0,j(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,n,i){var l,c,f=0;t.level>0?(t.strm.data_type===s&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return o;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return a;for(e=32;e<d;e++)if(0!==t.dyn_ltree[2*e])return a;return o}(t)),q(t,t.l_desc),q(t,t.d_desc),f=function(t){var e;for(K(t,t.dyn_ltree,t.l_desc.max_code),K(t,t.dyn_dtree,t.d_desc.max_code),q(t,t.bl_desc),e=g-1;e>=3&&0===t.bl_tree[2*I[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),l=t.opt_len+3+7>>>3,(c=t.static_len+3+7>>>3)<=l&&(l=c)):l=c=n+5,n+4<=l&&-1!==e?et(t,e,n,i):t.strategy===r||c===l?(H(t,(u<<1)+(i?1:0),3),Q(t,k,C)):(H(t,(h<<1)+(i?1:0),3),function(t,e,n,i){var r;for(H(t,e-257,5),H(t,n-1,5),H(t,i-4,4),r=0;r<i;r++)H(t,t.bl_tree[2*I[r]+1],3);$(t,t.dyn_ltree,e-1),$(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,f+1),Q(t,t.dyn_ltree,t.dyn_dtree)),j(t),i&&Y(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(R[n]+d+1)]++,t.dyn_dtree[2*z(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){H(t,u<<1,3),V(t,w,k),function(t){16===t.bi_valid?(U(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";var i=n(84),r=n(7),o=n(28),a=n(30),s=n(16),l=n(29),c=n(87),u=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new c,i.inflateGetHeader(this.strm,this.header)}function f(t,e){var n=new h(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}h.prototype.push=function(t,e){var n,s,l,c,h,f,d=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?d.input=o.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new r.Buf8(p),d.next_out=0,d.avail_out=p),(n=i.inflate(d,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(f="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=i.inflateSetDictionary(this.strm,f)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==a.Z_STREAM_END&&(0!==d.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(d.output,d.next_out),c=d.next_out-l,h=o.buf2string(d.output,l),d.next_out=c,d.avail_out=p-c,c&&r.arraySet(d.output,d.output,l,c,0),this.onData(h)):this.onData(r.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((d.avail_in>0||0===d.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),d.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,n){"use strict";var i=n(7),r=n(26),o=n(27),a=n(85),s=n(86),l=0,c=1,u=2,h=4,f=5,d=6,p=0,m=1,g=2,y=-2,v=-3,b=-4,_=-5,w=8,A=1,x=2,S=3,M=4,E=5,T=6,I=7,k=8,C=9,B=10,R=11,P=12,L=13,D=14,N=15,O=16,F=17,G=18,z=19,U=20,H=21,V=22,W=23,Z=24,j=25,Y=26,X=27,J=28,Q=29,q=30,K=31,$=32,tt=852,et=592,nt=15;function it(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function rt(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=A,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(tt),e.distcode=e.distdyn=new i.Buf32(et),e.sane=1,e.back=-1,p):y}function ot(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,rt(t)):y}function at(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?y:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,ot(t))):y}function st(t,e){var n,r;return t?(r=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=r,r.window=null,(n=at(t,e))!==p&&(t.state=null),n):y}var lt,ct,ut=!0;function ht(t){if(ut){var e;for(lt=new i.Buf32(512),ct=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(c,t.lens,0,288,lt,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(u,t.lens,0,32,ct,0,t.work,{bits:5}),ut=!1}t.lencode=lt,t.lenbits=9,t.distcode=ct,t.distbits=5}function ft(t,e,n,r){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),r>=a.wsize?(i.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>r&&(o=r),i.arraySet(a.window,e,n-r,o,a.wnext),(r-=o)?(i.arraySet(a.window,e,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=ot,e.inflateReset2=at,e.inflateResetKeep=rt,e.inflateInit=function(t){return st(t,nt)},e.inflateInit2=st,e.inflate=function(t,e){var n,tt,et,nt,rt,ot,at,st,lt,ct,ut,dt,pt,mt,gt,yt,vt,bt,_t,wt,At,xt,St,Mt,Et=0,Tt=new i.Buf8(4),It=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return y;(n=t.state).mode===P&&(n.mode=L),rt=t.next_out,et=t.output,at=t.avail_out,nt=t.next_in,tt=t.input,ot=t.avail_in,st=n.hold,lt=n.bits,ct=ot,ut=at,xt=p;t:for(;;)switch(n.mode){case A:if(0===n.wrap){n.mode=L;break}for(;lt<16;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(2&n.wrap&&35615===st){n.check=0,Tt[0]=255&st,Tt[1]=st>>>8&255,n.check=o(n.check,Tt,2,0),st=0,lt=0,n.mode=x;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&st)<<8)+(st>>8))%31){t.msg="incorrect header check",n.mode=q;break}if((15&st)!==w){t.msg="unknown compression method",n.mode=q;break}if(lt-=4,At=8+(15&(st>>>=4)),0===n.wbits)n.wbits=At;else if(At>n.wbits){t.msg="invalid window size",n.mode=q;break}n.dmax=1<<At,t.adler=n.check=1,n.mode=512&st?B:P,st=0,lt=0;break;case x:for(;lt<16;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(n.flags=st,(255&n.flags)!==w){t.msg="unknown compression method",n.mode=q;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=q;break}n.head&&(n.head.text=st>>8&1),512&n.flags&&(Tt[0]=255&st,Tt[1]=st>>>8&255,n.check=o(n.check,Tt,2,0)),st=0,lt=0,n.mode=S;case S:for(;lt<32;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.head&&(n.head.time=st),512&n.flags&&(Tt[0]=255&st,Tt[1]=st>>>8&255,Tt[2]=st>>>16&255,Tt[3]=st>>>24&255,n.check=o(n.check,Tt,4,0)),st=0,lt=0,n.mode=M;case M:for(;lt<16;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.head&&(n.head.xflags=255&st,n.head.os=st>>8),512&n.flags&&(Tt[0]=255&st,Tt[1]=st>>>8&255,n.check=o(n.check,Tt,2,0)),st=0,lt=0,n.mode=E;case E:if(1024&n.flags){for(;lt<16;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.length=st,n.head&&(n.head.extra_len=st),512&n.flags&&(Tt[0]=255&st,Tt[1]=st>>>8&255,n.check=o(n.check,Tt,2,0)),st=0,lt=0}else n.head&&(n.head.extra=null);n.mode=T;case T:if(1024&n.flags&&((dt=n.length)>ot&&(dt=ot),dt&&(n.head&&(At=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,tt,nt,dt,At)),512&n.flags&&(n.check=o(n.check,tt,dt,nt)),ot-=dt,nt+=dt,n.length-=dt),n.length))break t;n.length=0,n.mode=I;case I:if(2048&n.flags){if(0===ot)break t;dt=0;do{At=tt[nt+dt++],n.head&&At&&n.length<65536&&(n.head.name+=String.fromCharCode(At))}while(At&&dt<ot);if(512&n.flags&&(n.check=o(n.check,tt,dt,nt)),ot-=dt,nt+=dt,At)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=k;case k:if(4096&n.flags){if(0===ot)break t;dt=0;do{At=tt[nt+dt++],n.head&&At&&n.length<65536&&(n.head.comment+=String.fromCharCode(At))}while(At&&dt<ot);if(512&n.flags&&(n.check=o(n.check,tt,dt,nt)),ot-=dt,nt+=dt,At)break t}else n.head&&(n.head.comment=null);n.mode=C;case C:if(512&n.flags){for(;lt<16;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(st!==(65535&n.check)){t.msg="header crc mismatch",n.mode=q;break}st=0,lt=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=P;break;case B:for(;lt<32;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}t.adler=n.check=it(st),st=0,lt=0,n.mode=R;case R:if(0===n.havedict)return t.next_out=rt,t.avail_out=at,t.next_in=nt,t.avail_in=ot,n.hold=st,n.bits=lt,g;t.adler=n.check=1,n.mode=P;case P:if(e===f||e===d)break t;case L:if(n.last){st>>>=7&lt,lt-=7&lt,n.mode=X;break}for(;lt<3;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}switch(n.last=1&st,lt-=1,3&(st>>>=1)){case 0:n.mode=D;break;case 1:if(ht(n),n.mode=U,e===d){st>>>=2,lt-=2;break t}break;case 2:n.mode=F;break;case 3:t.msg="invalid block type",n.mode=q}st>>>=2,lt-=2;break;case D:for(st>>>=7&lt,lt-=7&lt;lt<32;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if((65535&st)!=(st>>>16^65535)){t.msg="invalid stored block lengths",n.mode=q;break}if(n.length=65535&st,st=0,lt=0,n.mode=N,e===d)break t;case N:n.mode=O;case O:if(dt=n.length){if(dt>ot&&(dt=ot),dt>at&&(dt=at),0===dt)break t;i.arraySet(et,tt,nt,dt,rt),ot-=dt,nt+=dt,at-=dt,rt+=dt,n.length-=dt;break}n.mode=P;break;case F:for(;lt<14;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(n.nlen=257+(31&st),st>>>=5,lt-=5,n.ndist=1+(31&st),st>>>=5,lt-=5,n.ncode=4+(15&st),st>>>=4,lt-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=q;break}n.have=0,n.mode=G;case G:for(;n.have<n.ncode;){for(;lt<3;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.lens[It[n.have++]]=7&st,st>>>=3,lt-=3}for(;n.have<19;)n.lens[It[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,St={bits:n.lenbits},xt=s(l,n.lens,0,19,n.lencode,0,n.work,St),n.lenbits=St.bits,xt){t.msg="invalid code lengths set",n.mode=q;break}n.have=0,n.mode=z;case z:for(;n.have<n.nlen+n.ndist;){for(;yt=(Et=n.lencode[st&(1<<n.lenbits)-1])>>>16&255,vt=65535&Et,!((gt=Et>>>24)<=lt);){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(vt<16)st>>>=gt,lt-=gt,n.lens[n.have++]=vt;else{if(16===vt){for(Mt=gt+2;lt<Mt;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(st>>>=gt,lt-=gt,0===n.have){t.msg="invalid bit length repeat",n.mode=q;break}At=n.lens[n.have-1],dt=3+(3&st),st>>>=2,lt-=2}else if(17===vt){for(Mt=gt+3;lt<Mt;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}lt-=gt,At=0,dt=3+(7&(st>>>=gt)),st>>>=3,lt-=3}else{for(Mt=gt+7;lt<Mt;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}lt-=gt,At=0,dt=11+(127&(st>>>=gt)),st>>>=7,lt-=7}if(n.have+dt>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=q;break}for(;dt--;)n.lens[n.have++]=At}}if(n.mode===q)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=q;break}if(n.lenbits=9,St={bits:n.lenbits},xt=s(c,n.lens,0,n.nlen,n.lencode,0,n.work,St),n.lenbits=St.bits,xt){t.msg="invalid literal/lengths set",n.mode=q;break}if(n.distbits=6,n.distcode=n.distdyn,St={bits:n.distbits},xt=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,St),n.distbits=St.bits,xt){t.msg="invalid distances set",n.mode=q;break}if(n.mode=U,e===d)break t;case U:n.mode=H;case H:if(ot>=6&&at>=258){t.next_out=rt,t.avail_out=at,t.next_in=nt,t.avail_in=ot,n.hold=st,n.bits=lt,a(t,ut),rt=t.next_out,et=t.output,at=t.avail_out,nt=t.next_in,tt=t.input,ot=t.avail_in,st=n.hold,lt=n.bits,n.mode===P&&(n.back=-1);break}for(n.back=0;yt=(Et=n.lencode[st&(1<<n.lenbits)-1])>>>16&255,vt=65535&Et,!((gt=Et>>>24)<=lt);){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(yt&&0==(240&yt)){for(bt=gt,_t=yt,wt=vt;yt=(Et=n.lencode[wt+((st&(1<<bt+_t)-1)>>bt)])>>>16&255,vt=65535&Et,!(bt+(gt=Et>>>24)<=lt);){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}st>>>=bt,lt-=bt,n.back+=bt}if(st>>>=gt,lt-=gt,n.back+=gt,n.length=vt,0===yt){n.mode=Y;break}if(32&yt){n.back=-1,n.mode=P;break}if(64&yt){t.msg="invalid literal/length code",n.mode=q;break}n.extra=15&yt,n.mode=V;case V:if(n.extra){for(Mt=n.extra;lt<Mt;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.length+=st&(1<<n.extra)-1,st>>>=n.extra,lt-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=W;case W:for(;yt=(Et=n.distcode[st&(1<<n.distbits)-1])>>>16&255,vt=65535&Et,!((gt=Et>>>24)<=lt);){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(0==(240&yt)){for(bt=gt,_t=yt,wt=vt;yt=(Et=n.distcode[wt+((st&(1<<bt+_t)-1)>>bt)])>>>16&255,vt=65535&Et,!(bt+(gt=Et>>>24)<=lt);){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}st>>>=bt,lt-=bt,n.back+=bt}if(st>>>=gt,lt-=gt,n.back+=gt,64&yt){t.msg="invalid distance code",n.mode=q;break}n.offset=vt,n.extra=15&yt,n.mode=Z;case Z:if(n.extra){for(Mt=n.extra;lt<Mt;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}n.offset+=st&(1<<n.extra)-1,st>>>=n.extra,lt-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=q;break}n.mode=j;case j:if(0===at)break t;if(dt=ut-at,n.offset>dt){if((dt=n.offset-dt)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=q;break}dt>n.wnext?(dt-=n.wnext,pt=n.wsize-dt):pt=n.wnext-dt,dt>n.length&&(dt=n.length),mt=n.window}else mt=et,pt=rt-n.offset,dt=n.length;dt>at&&(dt=at),at-=dt,n.length-=dt;do{et[rt++]=mt[pt++]}while(--dt);0===n.length&&(n.mode=H);break;case Y:if(0===at)break t;et[rt++]=n.length,at--,n.mode=H;break;case X:if(n.wrap){for(;lt<32;){if(0===ot)break t;ot--,st|=tt[nt++]<<lt,lt+=8}if(ut-=at,t.total_out+=ut,n.total+=ut,ut&&(t.adler=n.check=n.flags?o(n.check,et,ut,rt-ut):r(n.check,et,ut,rt-ut)),ut=at,(n.flags?st:it(st))!==n.check){t.msg="incorrect data check",n.mode=q;break}st=0,lt=0}n.mode=J;case J:if(n.wrap&&n.flags){for(;lt<32;){if(0===ot)break t;ot--,st+=tt[nt++]<<lt,lt+=8}if(st!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=q;break}st=0,lt=0}n.mode=Q;case Q:xt=m;break t;case q:xt=v;break t;case K:return b;case $:default:return y}return t.next_out=rt,t.avail_out=at,t.next_in=nt,t.avail_in=ot,n.hold=st,n.bits=lt,(n.wsize||ut!==t.avail_out&&n.mode<q&&(n.mode<X||e!==h))&&ft(t,t.output,t.next_out,ut-t.avail_out)?(n.mode=K,b):(ct-=t.avail_in,ut-=t.avail_out,t.total_in+=ct,t.total_out+=ut,n.total+=ut,n.wrap&&ut&&(t.adler=n.check=n.flags?o(n.check,et,ut,t.next_out-ut):r(n.check,et,ut,t.next_out-ut)),t.data_type=n.bits+(n.last?64:0)+(n.mode===P?128:0)+(n.mode===U||n.mode===N?256:0),(0===ct&&0===ut||e===h)&&xt===p&&(xt=_),xt)},e.inflateEnd=function(t){if(!t||!t.state)return y;var e=t.state;return e.window&&(e.window=null),t.state=null,p},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?y:(n.head=e,e.done=!1,p):y},e.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&n.mode!==R?y:n.mode===R&&r(1,e,i,0)!==n.check?v:ft(t,e,i,i)?(n.mode=K,b):(n.havedict=1,p):y},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,r,o,a,s,l,c,u,h,f,d,p,m,g,y,v,b,_,w,A,x,S,M,E;n=t.state,i=t.next_in,M=t.input,r=i+(t.avail_in-5),o=t.next_out,E=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,h=n.wnext,f=n.window,d=n.hold,p=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{p<15&&(d+=M[i++]<<p,p+=8,d+=M[i++]<<p,p+=8),b=m[d&y];e:for(;;){if(d>>>=_=b>>>24,p-=_,0===(_=b>>>16&255))E[o++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=m[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(d+=M[i++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=M[i++]<<p,p+=8,d+=M[i++]<<p,p+=8),b=g[d&v];n:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=g[(65535&b)+(d&(1<<_)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(A=65535&b,p<(_&=15)&&(d+=M[i++]<<p,(p+=8)<_&&(d+=M[i++]<<p,p+=8)),(A+=d&(1<<_)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=_,p-=_,A>(_=o-a)){if((_=A-_)>u&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(x=0,S=f,0===h){if(x+=c-_,_<w){w-=_;do{E[o++]=f[x++]}while(--_);x=o-A,S=E}}else if(h<_){if(x+=c+h-_,(_-=h)<w){w-=_;do{E[o++]=f[x++]}while(--_);if(x=0,h<w){w-=_=h;do{E[o++]=f[x++]}while(--_);x=o-A,S=E}}}else if(x+=h-_,_<w){w-=_;do{E[o++]=f[x++]}while(--_);x=o-A,S=E}for(;w>2;)E[o++]=S[x++],E[o++]=S[x++],E[o++]=S[x++],w-=3;w&&(E[o++]=S[x++],w>1&&(E[o++]=S[x++]))}else{x=o-A;do{E[o++]=E[x++],E[o++]=E[x++],E[o++]=E[x++],w-=3}while(w>2);w&&(E[o++]=E[x++],w>1&&(E[o++]=E[x++]))}break}}break}}while(i<r&&o<s);i-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=p}},function(t,e,n){"use strict";var i=n(7),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,c,u,h,f){var d,p,m,g,y,v,b,_,w,A=f.bits,x=0,S=0,M=0,E=0,T=0,I=0,k=0,C=0,B=0,R=0,P=null,L=0,D=new i.Buf16(16),N=new i.Buf16(16),O=null,F=0;for(x=0;x<=15;x++)D[x]=0;for(S=0;S<l;S++)D[e[n+S]]++;for(T=A,E=15;E>=1&&0===D[E];E--);if(T>E&&(T=E),0===E)return c[u++]=20971520,c[u++]=20971520,f.bits=1,0;for(M=1;M<E&&0===D[M];M++);for(T<M&&(T=M),C=1,x=1;x<=15;x++)if(C<<=1,(C-=D[x])<0)return-1;if(C>0&&(0===t||1!==E))return-1;for(N[1]=0,x=1;x<15;x++)N[x+1]=N[x]+D[x];for(S=0;S<l;S++)0!==e[n+S]&&(h[N[e[n+S]]++]=S);if(0===t?(P=O=h,v=19):1===t?(P=r,L-=257,O=o,F-=257,v=256):(P=a,O=s,v=-1),R=0,S=0,x=M,y=u,I=T,k=0,m=-1,g=(B=1<<T)-1,1===t&&B>852||2===t&&B>592)return 1;for(;;){0,b=x-k,h[S]<v?(_=0,w=h[S]):h[S]>v?(_=O[F+h[S]],w=P[L+h[S]]):(_=96,w=0),d=1<<x-k,M=p=1<<I;do{c[y+(R>>k)+(p-=d)]=b<<24|_<<16|w|0}while(0!==p);for(d=1<<x-1;R&d;)d>>=1;if(0!==d?(R&=d-1,R+=d):R=0,S++,0==--D[x]){if(x===E)break;x=e[n+h[S]]}if(x>T&&(R&g)!==m){for(0===k&&(k=T),y+=M,C=1<<(I=x-k);I+k<E&&!((C-=D[I+k])<=0);)I++,C<<=1;if(B+=1<<I,1===t&&B>852||2===t&&B>592)return 1;c[m=R&g]=T<<24|I<<16|y-u|0}}return 0!==R&&(c[y+R]=x-k<<24|64<<16|0),f.bits=T,0}},function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,n){"use strict";var i=n(89),r=n(90),o=n(91),a=n(31),s=n(92),l=n(95),c=n(19),u=n(96),h=n(97),f=127;t.exports=function(t){var e,n,d,p,m,g,y;if(n=t<0||1/t===r?"1":"0",t===i||t===r)return n+(p=c("1",8))+(d=c("0",23));if(t!=t)return n+(p=c("1",8))+(d="1"+c("0",22));if(0===t)return n+(p=c("0",8))+(d=c("0",23));if(g=(t=o(t))-(m=a(t)),m=u(m),g=h(g),m)p=m.length-1;else{for(y=0;y<g.length;y++)if("1"===g[y]){e=y+1;break}p=-e}return d=m+g,p<0?(p<=-f&&(e=f-1),d=d.substring(e)):d=d.substring(1),p=u(p+f),n+(p=l(p,8,"0"))+(d=s(d,23,"0").substring(0,23))}},function(t,e,n){"use strict";var i=new Float32Array(1);new Uint32Array(i.buffer)[0]=2139095040,t.exports=i[0]},function(t,e,n){"use strict";var i=new Float32Array(1);new Uint32Array(i.buffer)[0]=4286578688,t.exports=i[0]},function(t,e,n){"use strict";t.exports=function(t){return t<0?-t:0===t?0:t}},function(t,e,n){"use strict";var i=n(17),r=n(18),o=n(32),a=n(19),s=9007199254740991;t.exports=function(t,e,n){var l,c;if(!i(t))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+t+"`.");if(!r(e))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+e+"`.");if(arguments.length>2){if(!i(c=n))throw new TypeError("invalid input argument. Third argument must be a string. Value: `"+c+"`.");if(0===c.length)throw new RangeError("invalid input argument. Pad string must not be an empty string.")}else c=" ";if(e>s)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");return(l=(e-t.length)/c.length)<=0?t:(l=o(l),t+a(c,l))}},function(t,e,n){"use strict";var i=n(94);t.exports=function(t){return i(t)&&t%1==0}},function(t,e,n){"use strict";t.exports=function(t){return("number"==typeof t||"[object Number]"===Object.prototype.toString.call(t))&&t.valueOf()==t.valueOf()}},function(t,e,n){"use strict";var i=n(17),r=n(18),o=n(32),a=n(19),s=9007199254740991;t.exports=function(t,e,n){var l,c;if(!i(t))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+t+"`.");if(!r(e))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+e+"`.");if(arguments.length>2){if(!i(c=n))throw new TypeError("invalid input argument. Third argument must be a string. Value: `"+c+"`.");if(0===c.length)throw new RangeError("invalid input argument. Pad string must not be an empty string.")}else c=" ";if(e>s)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");return(l=(e-t.length)/c.length)<=0?t:(l=o(l),a(c,l)+t)}},function(t,e,n){"use strict";var i=n(31);t.exports=function(t){for(var e,n="";t>0;)n=(e=t/2)===(t=i(e))?"0"+n:"1"+n;return n}},function(t,e,n){"use strict";var i=149,r=24;t.exports=function(t){var e,n,o,a;if(e="",0===t)return e;for(a=i,o=0;o<i&&((n=2*t)>=1?(t=n-1,e+="1",a===i&&(a=o)):(t=n,e+="0"),!(1===n||o-a>r));o++);return e}},function(t,e,n){"use strict";var i=i||{};i.Utils=i.Utils||n(20),i.NIFTI1=i.NIFTI1||n(33),i.NIFTI2=i.NIFTI2||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.extensionFlag=[0,0,0,0]},i.NIFTI2.MAGIC_COOKIE=540,i.NIFTI2.MAGIC_NUMBER_LOCATION=4,i.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10],i.NIFTI2.prototype.readHeader=function(t){var e,n,r,o,a=new DataView(t),s=i.Utils.getIntAt(a,0,this.littleEndian);if(s!==i.NIFTI2.MAGIC_COOKIE&&(this.littleEndian=!0,s=i.Utils.getIntAt(a,0,this.littleEndian)),s!==i.NIFTI2.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.datatypeCode=i.Utils.getShortAt(a,12,this.littleEndian),this.numBitsPerVoxel=i.Utils.getShortAt(a,14,this.littleEndian),e=0;e<8;e+=1)o=16+8*e,this.dims[e]=i.Utils.getLongAt(a,o,this.littleEndian);for(this.intent_p1=i.Utils.getDoubleAt(a,80,this.littleEndian),this.intent_p2=i.Utils.getDoubleAt(a,88,this.littleEndian),this.intent_p3=i.Utils.getDoubleAt(a,96,this.littleEndian),e=0;e<8;e+=1)o=104+8*e,this.pixDims[e]=i.Utils.getDoubleAt(a,o,this.littleEndian);for(this.vox_offset=i.Utils.getLongAt(a,168,this.littleEndian),this.scl_slope=i.Utils.getDoubleAt(a,176,this.littleEndian),this.scl_inter=i.Utils.getDoubleAt(a,184,this.littleEndian),this.cal_max=i.Utils.getDoubleAt(a,192,this.littleEndian),this.cal_min=i.Utils.getDoubleAt(a,200,this.littleEndian),this.slice_duration=i.Utils.getDoubleAt(a,208,this.littleEndian),this.toffset=i.Utils.getDoubleAt(a,216,this.littleEndian),this.slice_start=i.Utils.getLongAt(a,224,this.littleEndian),this.slice_end=i.Utils.getLongAt(a,232,this.littleEndian),this.description=i.Utils.getStringAt(a,240,320),this.aux_file=i.Utils.getStringAt(a,320,344),this.qform_code=i.Utils.getIntAt(a,344,this.littleEndian),this.sform_code=i.Utils.getIntAt(a,348,this.littleEndian),this.quatern_b=i.Utils.getDoubleAt(a,352,this.littleEndian),this.quatern_c=i.Utils.getDoubleAt(a,360,this.littleEndian),this.quatern_d=i.Utils.getDoubleAt(a,368,this.littleEndian),this.qoffset_x=i.Utils.getDoubleAt(a,376,this.littleEndian),this.qoffset_y=i.Utils.getDoubleAt(a,384,this.littleEndian),this.qoffset_z=i.Utils.getDoubleAt(a,392,this.littleEndian),n=0;n<3;n+=1)for(r=0;r<4;r+=1)o=400+8*(4*n+r),this.affine[n][r]=i.Utils.getDoubleAt(a,o,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=i.Utils.getIntAt(a,496,this.littleEndian),this.xyzt_units=i.Utils.getIntAt(a,500,this.littleEndian),this.intent_code=i.Utils.getIntAt(a,504,this.littleEndian),this.intent_name=i.Utils.getStringAt(a,508,524),this.dim_info=i.Utils.getByteAt(a,524),a.byteLength>i.NIFTI2.MAGIC_COOKIE&&(this.extensionFlag[0]=i.Utils.getByteAt(a,540),this.extensionFlag[1]=i.Utils.getByteAt(a,541),this.extensionFlag[2]=i.Utils.getByteAt(a,542),this.extensionFlag[3]=i.Utils.getByteAt(a,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(a),this.extensionCode=this.getExtensionCode(a)))},i.NIFTI2.prototype.toFormattedString=function(){var t=i.Utils.formatNumber,e="";return e+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",e+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n",e+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",e+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",e+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+"\n",e+="Image Offset = "+this.vox_offset+"\n",e+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+"\n",e+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+"\n",e+="Slice Duration = "+this.slice_duration+"\n",e+="Time Axis Shift = "+this.toffset+"\n",e+="Slice Start = "+this.slice_start+"\n",e+="Slice End = "+this.slice_end+"\n",e+='Description: "'+this.description+'"\n',e+='Auxiliary File: "'+this.aux_file+'"\n',e+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",e+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",e+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+"\n",e+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",e+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+"\n",e+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+"\n",e+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+"\n",e+="Slice Code = "+this.slice_code+"\n",e+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(i.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(i.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",e+="Intent Code = "+this.intent_code+"\n",e+='Intent Name: "'+this.intent_name+'"\n',e+="Dim Info = "+this.dim_info+"\n"},i.NIFTI2.prototype.getExtensionLocation=function(){return i.NIFTI2.MAGIC_COOKIE+4},i.NIFTI2.prototype.getExtensionSize=i.NIFTI1.prototype.getExtensionSize,i.NIFTI2.prototype.getExtensionCode=i.NIFTI1.prototype.getExtensionCode,i.NIFTI2.prototype.getDatatypeCodeString=i.NIFTI1.prototype.getDatatypeCodeString,i.NIFTI2.prototype.getTransformCodeString=i.NIFTI1.prototype.getTransformCodeString,i.NIFTI2.prototype.getUnitsCodeString=i.NIFTI1.prototype.getUnitsCodeString,i.NIFTI2.prototype.getQformMat=i.NIFTI1.prototype.getQformMat,i.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=i.NIFTI1.prototype.convertNiftiQFormToNiftiSForm,i.NIFTI2.prototype.convertNiftiSFormToNEMA=i.NIFTI1.prototype.convertNiftiSFormToNEMA,i.NIFTI2.prototype.nifti_mat33_mul=i.NIFTI1.prototype.nifti_mat33_mul,i.NIFTI2.prototype.nifti_mat33_determ=i.NIFTI1.prototype.nifti_mat33_determ,"undefined"!==typeof t&&t.exports&&(t.exports=i.NIFTI2)},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=n(100),r=n(101),o=n(102);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(e,n),r=(t=s(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=s(t,e<0?0:0|d(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(i)return z(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function g(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var o,a=1,s=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var u=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var h=!0,f=0;f<l;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function v(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,i){return H(z(e,t.length-n),t,n,i)}function _(t,e,n,i){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function w(t,e,n,i){return _(t,e,n,i)}function A(t,e,n,i){return H(U(e),t,n,i)}function x(t,e,n,i){return H(function(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function S(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function M(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,a,s,l,c=t[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[r+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&(l=(15&c)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=E));return n}(i)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return c(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,i){return u(e),e<=0?s(t,e):void 0!==n?"string"==typeof i?s(t,e).fill(n,i):s(t,e).fill(n):s(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):function(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,i,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,a=n-e,s=Math.min(o,a),c=this.slice(i,r),u=t.slice(e,n),h=0;h<s;++h)if(c[h]!==u[h]){o=c[h],a=u[h];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function T(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function I(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function k(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=G(t[o]);return r}function C(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function B(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,i,r,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function P(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function L(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function D(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,i,o){return o||D(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function O(t,e,n,i,o){return o||D(t,0,n,8),r.write(t,e,n,i,52,8),n+8}l.prototype.slice=function(t,e){var n,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;n=new l(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},l.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||R(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return O(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return O(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=l.isBuffer(t)?t:z(new l(t,i).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],a=0;a<i;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(22))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){for(var e,n=c(t),i=n[0],a=n[1],s=new o(function(t,e,n){return 3*(e+n)/4-n}(0,i,a)),l=0,u=a>0?i-4:i,h=0;h<u;h+=4)e=r[t.charCodeAt(h)]<<18|r[t.charCodeAt(h+1)]<<12|r[t.charCodeAt(h+2)]<<6|r[t.charCodeAt(h+3)],s[l++]=e>>16&255,s[l++]=e>>8&255,s[l++]=255&e;2===a&&(e=r[t.charCodeAt(h)]<<2|r[t.charCodeAt(h+1)]>>4,s[l++]=255&e);1===a&&(e=r[t.charCodeAt(h)]<<10|r[t.charCodeAt(h+1)]<<4|r[t.charCodeAt(h+2)]>>2,s[l++]=e>>8&255,s[l++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],a=0,s=n-r;a<s;a+=16383)o.push(h(t,a,a+16383>s?s:a+16383));1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}function h(t,e,n){for(var i,r=[],o=e;o<n;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),r.push(u(i));return r.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+t[e+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,i),o-=c}return(d?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+d]=255&s,d+=p,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*m}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){},function(t,e,n){(function(t){function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(t){return i.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}e.resolve=function(){for(var e="",i=!1,r=arguments.length-1;r>=-1&&!i;r--){var a=r>=0?arguments[r]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return e=n(o(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),r="/"===a(t,-1);return(t=n(o(t.split("/"),function(t){return!!t}),!i).join("/"))||i||(t="."),t&&r&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var r=i(t.split("/")),o=i(n.split("/")),a=Math.min(r.length,o.length),s=a,l=0;l<a;l++)if(r[l]!==o[l]){s=l;break}var c=[];for(l=s;l<r.length;l++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=r(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},e.basename=function(t,e){var n=r(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return r(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(21))},function(t,e,n){
/*! dicom-parser - 1.8.1 - 2018-05-16 | (c) 2017 Chris Hafey | https://github.com/cornerstonejs/dicomParser */
t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=79)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=n(73),r=n(72),o=n(38);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=f(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(e,n),r=(t=s(t,i)).write(e,n);return r!==i&&(t=t.slice(0,r)),t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=s(t,e<0?0:0|d(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(i)return z(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function g(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=l.from(e,i)),l.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var o,a=1,s=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var u=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var h=!0,f=0;f<l;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function v(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,i){return H(z(e,t.length-n),t,n,i)}function _(t,e,n,i){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function w(t,e,n,i){return _(t,e,n,i)}function A(t,e,n,i){return H(U(e),t,n,i)}function x(t,e,n,i){return H(function(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function S(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function M(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,a,s,l,c=t[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[r+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&(l=(15&c)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=E));return n}(i)}e.Buffer=l,e.SlowBuffer=function(t){return+t!=t&&(t=0),l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return c(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,i){return u(e),e<=0?s(t,e):void 0!==n?"string"==typeof i?s(t,e).fill(n,i):s(t,e).fill(n):s(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return h(null,t)},l.allocUnsafeSlow=function(t){return h(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=l.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):function(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,i,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,a=n-e,s=Math.min(o,a),c=this.slice(i,r),u=t.slice(e,n),h=0;h<s;++h)if(c[h]!==u[h]){o=c[h],a=u[h];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},l.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function T(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function I(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function k(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=G(t[o]);return r}function C(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function B(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,i,r,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function P(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function L(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function D(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,i,o){return o||D(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function O(t,e,n,i,o){return o||D(t,0,n,8),r.write(t,e,n,i,52,8),n+8}l.prototype.slice=function(t,e){var n,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;n=new l(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},l.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,i){t=+t,e|=0,n|=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,i){t=+t,e|=0,n|=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return O(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return O(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},l.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=l.isBuffer(t)?t:z(new l(t,i).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],a=0;a<i;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(0))},function(t,e,n){"use strict";var i=n(10),r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=n(6);o.inherits=n(5);var a=n(35),s=n(18);o.inherits(h,a);for(var l=r(s.prototype),c=0;c<l.length;c++){var u=l[c];h.prototype[u]||(h.prototype[u]=s.prototype[u])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||i.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),i.nextTick(e,t)}},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,c=[],u=!1,h=-1;function f(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&d())}function d(){if(!u){var t=s(f);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||u||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(void 0===t)throw"dicomParser.readTag: missing required parameter 'byteStream'";var e=256*t.readUint16()*256,n=t.readUint16();return"x"+("00000000"+(e+n).toString(16)).substr(-8)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(1).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(14);function o(t,e){return void 0!==t.parser?t.parser:e}var a=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.byteArrayParser=e,this.byteArray=n,this.elements=i}return i(t,[{key:"uint16",value:function(t,e){var n=this.elements[t];if(e=void 0!==e?e:0,n&&0!==n.length)return o(n,this.byteArrayParser).readUint16(this.byteArray,n.dataOffset+2*e)}},{key:"int16",value:function(t,e){var n=this.elements[t];if(e=void 0!==e?e:0,n&&0!==n.length)return o(n,this.byteArrayParser).readInt16(this.byteArray,n.dataOffset+2*e)}},{key:"uint32",value:function(t,e){var n=this.elements[t];if(e=void 0!==e?e:0,n&&0!==n.length)return o(n,this.byteArrayParser).readUint32(this.byteArray,n.dataOffset+4*e)}},{key:"int32",value:function(t,e){var n=this.elements[t];if(e=void 0!==e?e:0,n&&0!==n.length)return o(n,this.byteArrayParser).readInt32(this.byteArray,n.dataOffset+4*e)}},{key:"float",value:function(t,e){var n=this.elements[t];if(e=void 0!==e?e:0,n&&0!==n.length)return o(n,this.byteArrayParser).readFloat(this.byteArray,n.dataOffset+4*e)}},{key:"double",value:function(t,e){var n=this.elements[t];if(e=void 0!==e?e:0,n&&0!==n.length)return o(n,this.byteArrayParser).readDouble(this.byteArray,n.dataOffset+8*e)}},{key:"numStringValues",value:function(t){var e=this.elements[t];if(e&&e.length>0){var n=(0,r.readFixedString)(this.byteArray,e.dataOffset,e.length).match(/\\/g);return null===n?1:n.length+1}}},{key:"string",value:function(t,e){var n=this.elements[t];if(n&&n.length>0){var i=(0,r.readFixedString)(this.byteArray,n.dataOffset,n.length);return e>=0?i.split("\\")[e].trim():i.trim()}}},{key:"text",value:function(t,e){var n=this.elements[t];if(n&&n.length>0){var i=(0,r.readFixedString)(this.byteArray,n.dataOffset,n.length);return e>=0?i.split("\\")[e].replace(/ +$/,""):i.replace(/ +$/,"")}}},{key:"floatString",value:function(t,e){var n=this.elements[t];if(n&&n.length>0){e=void 0!==e?e:0;var i=this.string(t,e);if(void 0!==i)return parseFloat(i)}}},{key:"intString",value:function(t,e){var n=this.elements[t];if(n&&n.length>0){e=void 0!==e?e:0;var i=this.string(t,e);if(void 0!==i)return parseInt(i)}}},{key:"attributeTag",value:function(t){var e=this.elements[t];if(e&&4===e.length){var n=o(e,this.byteArrayParser).readUint16,i=this.byteArray,r=e.dataOffset;return"x"+("00000000"+(256*n(i,r)*256+n(i,r+2)).toString(16)).substr(-8)}}}]),t}();e.default=a},function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,a;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(a=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,r),r+=o.length;return a}},a={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(i)},function(t,e,n){var i=n(1),r=i.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=i:(o(i,e),e.Buffer=a),o(r,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,i,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,i)});case 4:return e.nextTick(function(){t.call(null,n,i,r)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}}:t.exports=e}).call(this,n(3))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,n,i){if(void 0!==t&&e instanceof t)return e.slice(n,n+i);if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset+n,i);throw"dicomParser.from: unknown type for byteArray"}}).call(this,n(1).Buffer)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(11),a=(i=o)&&i.__esModule?i:{default:i},s=n(14),l=function(){function e(n,i,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===n)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===i)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(i instanceof Uint8Array==0&&i instanceof t==0)throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(r<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(r>=i.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=n,this.byteArray=i,this.position=r||0,this.warnings=[]}return r(e,[{key:"seek",value:function(t){if(this.position+t<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=t}},{key:"readByteStream",value:function(t){if(this.position+t>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var n=(0,a.default)(this.byteArray,this.position,t);return this.position+=t,new e(this.byteArrayParser,n)}},{key:"readUint16",value:function(){var t=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,t}},{key:"readUint32",value:function(){var t=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,t}},{key:"readFixedString",value:function(t){var e=(0,s.readFixedString)(this.byteArray,this.position,t);return this.position+=t,e}}]),e}();e.default=l}).call(this,n(1).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(void 0===t)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var e={tag:(0,o.default)(t),length:t.readUint32(),dataOffset:t.position};if("xfffee000"!==e.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset "+t.position;return e};var i,r=n(4),o=(i=r)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readFixedString=function(t,e,n){if(n<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(e+n>t.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var i,r="",o=0;o<n;o++){if(0===(i=t[e+o]))return e+=n,r;r+=String.fromCharCode(i)}return r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(void 0===t)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var l={tag:(0,a.default)(t),vr:t.readFixedString(2)};return 2===c(l.vr)?(l.length=t.readUint16(),l.dataOffset=t.position):(t.seek(2),l.length=t.readUint32(),l.dataOffset=t.position),4294967295===l.length&&(l.hadUndefinedLength=!0),l.tag===n?l:"SQ"===l.vr?((0,s.default)(t,l,e),l):4294967295===l.length?"x7fe00010"===l.tag?((0,i.default)(t,l,e),l):"UN"===l.vr?((0,r.default)(t,l),l):((0,o.default)(t,l),l):(t.seek(l.length),l)};var i=l(n(42)),r=l(n(41)),o=l(n(24)),a=l(n(4)),s=l(n(40));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){return"OB"===t||"OW"===t||"SQ"===t||"OF"===t||"UT"===t||"UN"===t?4:2}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseDicomDataSetExplicit=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?e.byteArray.length:n,void 0===e)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(n<e.position||n>e.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var o=t.elements;e.position<n;){var a=(0,i.default)(e,t.warnings,r.untilTag);if(o[a.tag]=a,a.tag===r.untilTag)return}if(e.position>n)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"},e.parseDicomDataSetImplicit=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?t.byteArray.length:n,void 0===e)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(n<e.position||n>e.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var o=t.elements;e.position<n;){var a=(0,r.default)(e,i.untilTag,i.vrCallback);if(o[a.tag]=a,a.tag===i.untilTag)return}};var i=o(n(15)),r=o(n(23));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,s,c){if(s=s||1,c=c||e.fragments,void 0===t)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===e)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===s)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==e.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(!0!==e.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==e.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(e.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(n>=e.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(s<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(n+s>e.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var u=new r.default(t.byteArrayParser,t.byteArray,e.dataOffset),h=(0,o.default)(u);if("xfffee000"!==h.tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";u.seek(h.length);var f=u.position;if(1===s)return(0,a.default)(u.byteArray,f+c[n].offset+8,c[n].length);for(var d=l(c,n,s),p=(0,i.default)(u.byteArray,d),m=0,g=n;g<n+s;g++)for(var y=f+c[g].offset+8,v=0;v<c[g].length;v++)p[m++]=u.byteArray[y++];return p};var i=s(n(22)),r=s(n(12)),o=s(n(13)),a=s(n(11));function s(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e,n){for(var i=0,r=e;r<e+n;r++)i+=t[r].length;return i}},function(t,e,n){"use strict";(function(e,i,r){var o=n(10);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(void 0),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var s,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?i:o.nextTick;v.WritableState=y;var c=n(6);c.inherits=n(5);var u,h={deprecate:n(61)},f=n(34),d=n(9).Buffer,p=r.Uint8Array||function(){},m=n(33);function g(){}function y(t,e){s=s||n(2),t=t||{};var i=e instanceof s;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,c=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,r=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,r){--e.pendingcb,n?(o.nextTick(r,i),o.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(r(i),t._writableState.errorEmitted=!0,t.emit("error",i),S(t,e))}(t,n,i,e,r);else{var a=A(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||w(t,n),i?l(_,t,n,a,r):_(t,n,a,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function v(t){if(s=s||n(2),!(u.call(v,this)||this instanceof s))return new v(t);this._writableState=new y(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function b(t,e,n,i,r,o,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function _(t,e,n,i){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),S(t,e)}function w(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,r=new Array(i),o=e.corkedRequestsFree;o.entry=n;for(var s=0,l=!0;n;)r[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;r.allBuffers=l,b(t,e,!0,e.length,r,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,h=n.callback;if(b(t,e,!1,e.objectMode?1:c.length,c,u,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function A(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function x(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),S(t,e)})}function S(t,e){var n=A(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(x,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(v,f),y.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(y.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!u.call(this,t)||this===v&&t&&t._writableState instanceof y}})):u=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,n){var i,r=this._writableState,a=!1,s=!r.objectMode&&(i=t,d.isBuffer(i)||i instanceof p);return s&&!d.isBuffer(t)&&(t=function(t){return d.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=g),r.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(s||function(t,e,n,i){var r=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(i,a),r=!1),r}(this,r,t,n))&&(r.pendingcb++,a=function(t,e,n,i,r,o){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=d.from(e,n)),e}(e,i,r);i!==a&&(n=!0,r="buffer",i=a)}var s=e.objectMode?1:i.length;e.length+=s;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,s,i,r,o);return l}(this,r,s,t,e,n)),a},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},v.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,n){e.ending=!0,S(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,i,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(3),n(63).setImmediate,n(0))},function(t,e,n){(e=t.exports=n(35)).Stream=e,e.Readable=e,e.Writable=n(18),e.Duplex=n(2),e.Transform=n(31),e.PassThrough=n(60)},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,s,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(o(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(r(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,l=0;l<a;l++)c[l].apply(this,s);return!0},n.prototype.addListener=function(t,e){var a;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,o=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={readUint16:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(e+2>t.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return t[e]+256*t[e+1]},readInt16:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(e+2>t.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=t[e]+(t[e+1]<<8);return 32768&n&&(n=n-65535-1),n},readUint32:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(e+4>t.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return t[e]+256*t[e+1]+256*t[e+2]*256+256*t[e+3]*256*256},readInt32:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(e+4>t.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)},readFloat:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(e+4>t.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[0]=t[e],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],new Float32Array(n.buffer)[0]},readDouble:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(e+8>t.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[0]=t[e],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],n[4]=t[e+4],n[5]=t[e+5],n[6]=t[e+6],n[7]=t[e+7],new Float64Array(n.buffer)[0]}}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,n){if(void 0!==t&&e instanceof t)return t.alloc(n);if(e instanceof Uint8Array)return new Uint8Array(n);throw"dicomParser.alloc: unknown type for byteArray"}}).call(this,n(1).Buffer)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(void 0===t)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var a={tag:(0,o.default)(t),length:t.readUint32(),dataOffset:t.position};return 4294967295===a.length&&(a.hadUndefinedLength=!0),a.tag===e?a:s(a,t,n)?((0,r.default)(t,a),a):a.hadUndefinedLength?((0,i.default)(t,a),a):(t.seek(a.length),a)};var i=a(n(24)),r=a(n(39)),o=a(n(4));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e,n){if(void 0!==n)return"SQ"===n(t.tag);if(e.position+4<=e.byteArray.length){var i=(0,o.default)(e);return e.seek(-4),"xfffee000"===i||"xfffee0dd"===i}return e.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(void 0===t)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var n=t.byteArray.length-8;t.position<=n;){var i=t.readUint16();if(65534===i){var r=t.readUint16();if(57357===r){var o=t.readUint32();return 0!==o&&t.warnings("encountered non zero length following item delimiter at position "+(t.position-4)+" while reading element of undefined length with tag "+e.tag),void(e.length=t.position-e.dataOffset)}}}e.length=t.byteArray.length-e.dataOffset,t.seek(t.byteArray.length-t.position)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0};e.isStringVr=function(t){return i[t]},e.isPrivateTag=function(t){return parseInt(t[4],10)%2==1},e.parsePN=function(t){if(void 0!==t){var e=t.split("^");return{familyName:e[0],givenName:e[1],middleName:e[2],prefix:e[3],suffix:e[4]}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,i,r){if(i=i||e.basicOffsetTable,r=r||e.fragments,void 0===t)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===e)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===i)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==e.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==e.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==e.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===e.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===i.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(n<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(n>=i.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var l=i[n],c=a(r,l);if(void 0===c)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";var u=s(n,i,r,c);return(0,o.default)(t,e,c,u,r)};var i,r=n(17),o=(i=r)&&i.__esModule?i:{default:i},a=function(t,e){for(var n=0;n<t.length;n++)if(t[n].offset===e)return n},s=function(t,e,n,i){if(t===e.length-1)return n.length-i;for(var r=e[t+1],o=i+1;o<n.length;o++)if(n[o].offset===r)return o-i;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"}},function(t,e,n){"use strict";var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,r){var o=i,a=r+n;t^=-1;for(var s=r;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},function(t,e,n){"use strict";t.exports=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(r=r+e[i++]|0)|0}while(--a);r%=65521,o%=65521}return r|o<<16|0}},function(t,e,n){(function(t,i){var r=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,o=i.length,a=String(t).replace(r,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),l=i[n];n<o;l=i[++n])m(l)||!_(l)?a+=" "+l:a+=" "+s(l);return a},e.deprecate=function(n,r){if(v(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(!0===i.noDeprecation)return n;var o=!1;return function(){if(!o){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(n)?i.showHidden=n:n&&e._extend(i,n),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),u(i,t,i.depth)}function l(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function c(t,e){return t}function u(t,n,i){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return y(r)||(r=u(t,r,i)),r}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):p(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),A(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(n);if(0===a.length){if(x(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(A(n))return h(n)}var c,_="",S=!1,M=["{","}"];return d(n)&&(S=!0,M=["[","]"]),x(n)&&(_=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(_=" "+RegExp.prototype.toString.call(n)),w(n)&&(_=" "+Date.prototype.toUTCString.call(n)),A(n)&&(_=" "+h(n)),0!==a.length||S&&0!=n.length?i<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=S?function(t,e,n,i,r){for(var o=[],a=0,s=e.length;a<s;++a)T(e,String(a))?o.push(f(t,e,n,i,String(a),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))}),o}(t,n,i,s,a):a.map(function(e){return f(t,n,i,s,e,S)}),t.seen.pop(),function(t,e,n){return t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(c,_,M)):M[0]+_+M[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,i,r,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),T(i,r)||(a="["+r+"]"),s||(t.seen.indexOf(l.value)<0?(s=m(n)?u(t,l.value,null):u(t,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),v(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function m(t){return null===t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return _(t)&&"[object RegExp]"===S(t)}function _(t){return"object"==typeof t&&null!==t}function w(t){return _(t)&&"[object Date]"===S(t)}function A(t){return _(t)&&("[object Error]"===S(t)||t instanceof Error)}function x(t){return"function"==typeof t}function S(t){return Object.prototype.toString.call(t)}function M(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(v(o)&&(o=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=i.pid;a[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=b,e.isObject=_,e.isDate=w,e.isError=A,e.isFunction=x,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(54);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,n;console.log("%s - %s",(t=new Date,n=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":"),[t.getDate(),E[t.getMonth()],n].join(" ")),e.format.apply(e,arguments))},e.inherits=n(53),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(this,n(0),n(3))},function(t,e,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function i(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0}function r(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=n(29),a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function u(t){return!r(t)&&"function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var h=t.exports=y,f=/\s*function\s+([^\(\s]*)\s*/;function d(t){if(o.isFunction(t)){if(l)return t.name;var e=t.toString().match(f);return e&&e[1]}}function p(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(l||!o.isFunction(t))return o.inspect(t);var e=d(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,n,i,r){throw new h.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:r})}function y(t,e){t||g(t,!0,e,"==",h.ok)}function v(t,e,n,a){if(t===e)return!0;if(r(t)&&r(e))return 0===i(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(u(t)&&u(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(r(t)!==r(e))return!1;var l=(a=a||{actual:[],expected:[]}).actual.indexOf(t);return-1!==l&&l===a.expected.indexOf(e)||(a.actual.push(t),a.expected.push(e),function(t,e,n,i){if(null===t||void 0===t||null===e||void 0===e)return!1;if(o.isPrimitive(t)||o.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=b(t),a=b(e);if(r&&!a||!r&&a)return!1;if(r)return t=s.call(t),e=s.call(e),v(t,e,n);var l,c,u=A(t),h=A(e);if(u.length!==h.length)return!1;for(u.sort(),h.sort(),c=u.length-1;c>=0;c--)if(u[c]!==h[c])return!1;for(c=u.length-1;c>=0;c--)if(l=u[c],!v(t[l],e[l],n,i))return!1;return!0}(t,e,n,a))}return n?t===e:t==e}function b(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function _(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function w(t,e,n,i){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=function(t){var e;try{t()}catch(t){e=t}return e}(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!r&&g(r,n,"Missing expected exception"+i);var a="string"==typeof i,s=!t&&o.isError(r),l=!t&&r&&!n;if((s&&a&&_(r,n)||l)&&g(r,n,"Got unwanted exception"+i),t&&r&&n&&!_(r,n)||!t&&r)throw r}h.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=p(m((e=this).actual),128)+" "+e.operator+" "+p(m(e.expected),128),this.generatedMessage=!0);var n=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var i=new Error;if(i.stack){var r=i.stack,o=d(n),a=r.indexOf("\n"+o);if(a>=0){var s=r.indexOf("\n",a+1);r=r.substring(s+1)}this.stack=r}}},o.inherits(h.AssertionError,Error),h.fail=g,h.ok=y,h.equal=function(t,e,n){t!=e&&g(t,e,n,"==",h.equal)},h.notEqual=function(t,e,n){t==e&&g(t,e,n,"!=",h.notEqual)},h.deepEqual=function(t,e,n){v(t,e,!1)||g(t,e,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,n){v(t,e,!0)||g(t,e,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,n){v(t,e,!1)&&g(t,e,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,n,i){v(e,n,!0)&&g(e,n,i,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,n){t!==e&&g(t,e,n,"===",h.strictEqual)},h.notStrictEqual=function(t,e,n){t===e&&g(t,e,n,"!==",h.notStrictEqual)},h.throws=function(t,e,n){w(!0,t,e,n)},h.doesNotThrow=function(t,e,n){w(!1,t,e,n)},h.ifError=function(t){if(t)throw t};var A=Object.keys||function(t){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e}}).call(this,n(0))},function(t,e,n){"use strict";t.exports=o;var i=n(2),r=n(6);function o(t){if(!(this instanceof o))return new o(t);i.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),i(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(this,null,null)}function s(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=n(5),r.inherits(o,i),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;i.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){"use strict";var i=n(9).Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=u,this.end=h,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"".repeat(n);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"".repeat(n+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"".repeat(n+2)}}(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function u(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"".repeat(this.lastTotal-this.lastNeed):e},o.prototype.text=function(t,e){var n=function(t,e,n){var i=e.length-1;if(i<n)return 0;var r=a(e[i]);return r>=0?(r>0&&(t.lastNeed=r-1),r):--i<n?0:(r=a(e[i]))>=0?(r>0&&(t.lastNeed=r-2),r):--i<n?0:(r=a(e[i]))>=0?(r>0&&(2===r?r=0:t.lastNeed=r-3),r):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";var i=n(10);function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||i.nextTick(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(i.nextTick(r,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){t.exports=n(20).EventEmitter},function(t,e,n){"use strict";(function(e,i){var r=n(10);t.exports=b;var o,a=n(38);b.ReadableState=v,n(20).EventEmitter;var s=function(t,e){return t.listeners(e).length},l=n(34),c=n(9).Buffer,u=e.Uint8Array||function(){},h=n(6);h.inherits=n(5);var f=n(66),d=void 0;d=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=n(65),g=n(33);h.inherits(b,l);var y=["error","close","destroy","pause","resume"];function v(t,e){o=o||n(2),t=t||{};var i=e instanceof o;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(32).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(o=o||n(2),!(this instanceof b))return new b(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function _(t,e,n,i,r){var o,a=t._readableState;return null===e?(a.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}}(t,a)):(r||(o=function(t,e){var n,i;return i=e,c.isBuffer(i)||i instanceof u||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),i?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):E(t,a)):w(t,a,e,!1))):i||(a.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function w(t,e,n,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),E(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=c.from(t,e),e=""),n=!0),_(this,t,e,!1,n)},b.prototype.unshift=function(t){return _(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=n(32).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var A=8388608;function x(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=A?t=A:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(d("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r.nextTick(M,t):M(t))}function M(t){d("emit readable"),t.emit("readable"),C(t)}function E(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(T,t,e))}function T(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(d("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function I(t){d("readable nexttick read 0"),t.read(0)}function k(t,e){e.reading||(d("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),C(t),e.flowing&&!e.reading&&t.read(0)}function C(t){var e=t._readableState;for(d("flow",e.flowing);e.flowing&&null!==t.read(););}function B(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var i;return t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,i=1,r=n.data;for(t-=r.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?r+=o:r+=o.slice(0,t),0==(t-=a)){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i}return e.length-=i,r}(t,e):function(t,e){var n=c.allocUnsafe(t),i=e.head,r=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var o=i.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0==(t-=a)){a===o.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=o.slice(a));break}++r}return e.length-=r,n}(t,e),i}(t,e.buffer,e.decoder),n);var n}function R(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r.nextTick(P,e,t))}function P(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function L(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}b.prototype.read=function(t){d("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return d("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):S(this),null;if(0===(t=x(t,e))&&e.ended)return 0===e.length&&R(this),null;var i,r=e.needReadable;return d("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&d("length less than watermark",r=!0),e.ended||e.reading?d("reading or ended",r=!1):r&&(d("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=x(n,e))),null===(i=t>0?B(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&R(this)),null!==i&&this.emit("data",i),i},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,d("pipe count=%d opts=%j",o.pipesCount,e);var l=e&&!1===e.end||t===i.stdout||t===i.stderr?v:c;function c(){d("onend"),t.end()}o.endEmitted?r.nextTick(l):n.once("end",l),t.on("unpipe",function e(i,r){d("onunpipe"),i===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,d("cleanup"),t.removeListener("close",g),t.removeListener("finish",y),t.removeListener("drain",u),t.removeListener("error",m),t.removeListener("unpipe",e),n.removeListener("end",c),n.removeListener("end",v),n.removeListener("data",p),h=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||u())});var u=function(t){return function(){var e=t._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,C(t))}}(n);t.on("drain",u);var h=!1,f=!1;function p(e){d("ondata"),f=!1,!1!==t.write(e)||f||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==L(o.pipes,t))&&!h&&(d("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function m(e){d("onerror",e),v(),t.removeListener("error",m),0===s(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",y),v()}function y(){d("onfinish"),t.removeListener("close",g),v()}function v(){d("unpipe"),n.unpipe(t)}return n.on("data",p),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",m),t.once("close",g),t.once("finish",y),t.emit("pipe",n),o.flowing||(d("pipe resume"),n.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var i=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,n);return this}var a=L(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},b.prototype.on=function(t,e){var n=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&S(this):r.nextTick(I,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(k,t,e))}(this,t)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,n=this._readableState,i=!1;for(var r in t.on("end",function(){if(d("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(r){d("wrapped data"),n.decoder&&(r=n.decoder.write(r)),(!n.objectMode||null!==r&&void 0!==r)&&(n.objectMode||r&&r.length)&&(e.push(r)||(i=!0,t.pause()))}),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var o=0;o<y.length;o++)t.on(y[o],this.emit.bind(this,y[o]));return this._read=function(e){d("wrapped _read",e),i&&(i=!1,t.resume())},this},b._fromList=B}).call(this,n(0),n(3))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(void 0===t)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var n=new i.default(o.default,t);return function(){!function(){if(n.seek(128),"DICM"!==n.readFixedString(4))throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file."}();for(var t=[],e={};n.position<n.byteArray.length;){var i=n.position,s=(0,a.default)(n,t);if(s.tag>"x0002ffff"){n.position=i;break}s.parser=o.default,e[s.tag]=s}var l=new r.default(n.byteArrayParser,n.byteArray,e);return l.warnings=n.warnings,l.position=n.position,l}()};var i=s(n(12)),r=s(n(7)),o=s(n(21)),a=s(n(15));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={readUint16:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(e+2>t.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(t[e]<<8)+t[e+1]},readInt16:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(e+2>t.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=(t[e]<<8)+t[e+1];return 32768&n&&(n=n-65535-1),n},readUint32:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(e+4>t.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*t[e]+t[e+1])+t[e+2])+t[e+3]},readInt32:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(e+4>t.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(t[e]<<24)+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3]},readFloat:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(e+4>t.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[3]=t[e],n[2]=t[e+1],n[1]=t[e+2],n[0]=t[e+3],new Float32Array(n.buffer)[0]},readDouble:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(e+8>t.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[7]=t[e],n[6]=t[e+1],n[5]=t[e+2],n[4]=t[e+3],n[3]=t[e+4],n[2]=t[e+5],n[1]=t[e+6],n[0]=t[e+7],new Float64Array(n.buffer)[0]}}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===e)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";e.items=[],4294967295===e.length?function(t,e,n){for(;t.position+4<=t.byteArray.length;){var i=(0,a.default)(t);if(t.seek(-4),"xfffee0dd"===i)return e.length=t.position-e.dataOffset,t.seek(8),e;var r=c(t,n);e.items.push(r)}t.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),e.length=t.byteArray.length-e.dataOffset}(t,e,n):function(t,e,n){for(var i=e.dataOffset+e.length;t.position<i;){var r=c(t,n);e.items.push(r)}}(t,e,n)};var i=l(n(7)),r=l(n(23)),o=l(n(13)),a=l(n(4)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(16));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var n=(0,o.default)(t);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=function(t,e){for(var n={};t.position<t.byteArray.length;){var o=(0,r.default)(t,void 0,e);if(n[o.tag]=o,"xfffee00d"===o.tag)return new i.default(t.byteArrayParser,t.byteArray,n)}return t.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new i.default(t.byteArrayParser,t.byteArray,n)}(t,e),n.length=t.position-n.dataOffset):(n.dataSet=new i.default(t.byteArrayParser,t.byteArray,{}),s.parseDicomDataSetImplicit(n.dataSet,t,t.position+n.length,{vrCallback:e})),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===e)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";e.items=[],4294967295===e.length?function(t,e,n){for(;t.position+4<=t.byteArray.length;){var i=(0,a.default)(t);if(t.seek(-4),"xfffee0dd"===i)return e.length=t.position-e.dataOffset,t.seek(8),e;var r=c(t,n);e.items.push(r)}n.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),e.length=t.position-e.dataOffset}(t,e,n):function(t,e,n){for(var i=e.dataOffset+e.length;t.position<i;){var r=c(t,n);e.items.push(r)}}(t,e,n)};var i=l(n(7)),r=l(n(15)),o=l(n(13)),a=l(n(4)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(16));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var n=(0,o.default)(t);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=function(t,e){for(var n={};t.position<t.byteArray.length;){var o=(0,r.default)(t,e);if(n[o.tag]=o,"xfffee00d"===o.tag)return new i.default(t.byteArrayParser,t.byteArray,n)}return e.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new i.default(t.byteArrayParser,t.byteArray,n)}(t,e),n.length=t.position-n.dataOffset):(n.dataSet=new i.default(t.byteArrayParser,t.byteArray,{}),s.parseDicomDataSetExplicit(n.dataSet,t,t.position+n.length)),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(void 0===t)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var n=t.byteArray.length-8;t.position<=n;){var i=t.readUint16();if(65534===i){var r=t.readUint16();if(57565===r){var o=t.readUint32();return 0!==o&&t.warnings("encountered non zero length following item delimiter at position "+(t.position-4)+" while reading element of undefined length with tag "+e.tag),void(e.length=t.position-e.dataOffset)}}}e.length=t.byteArray.length-e.dataOffset,t.seek(t.byteArray.length-t.position)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(void 0===t)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===e)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(e.encapsulatedPixelData=!0,e.basicOffsetTable=[],e.fragments=[],"xfffee000"!==(0,o.default)(t))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var i=t.readUint32()/4,r=0;r<i;r++){var a=t.readUint32();e.basicOffsetTable.push(a)}for(var s=t.position;t.position<t.byteArray.length;){var l=(0,o.default)(t),c=t.readUint32();if("xfffee0dd"===l)return t.seek(c),void(e.length=t.position-e.dataOffset);if("xfffee000"!==l)return n&&n.push("unexpected tag "+l+" while searching for end of pixel data element with undefined length"),c>t.byteArray.length-t.position&&(c=t.byteArray.length-t.position),e.fragments.push({offset:t.position-s-8,position:t.position,length:c}),t.seek(c),void(e.length=t.position-e.dataOffset);e.fragments.push({offset:t.position-s-8,position:t.position,length:c}),t.seek(c)}n&&n.push("pixel data element "+e.tag+" missing sequence delimiter tag xfffee0dd")};var i,r=n(4),o=(i=r)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(void 0===t||void 0===e)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===e.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var n,r=e.vr,o=e.tag;function a(e,n){for(var i="",r=0;r<e;r++)0!==r&&(i+="/"),i+=n.call(t,o,r).toString();return i}if(!0===i.isStringVr(r))n=t.string(o);else{if("AT"===r){var s=t.uint32(o);if(void 0===s)return;return s<0&&(s=4294967295+s+1),"x"+s.toString(16).toUpperCase()}"US"===r?n=a(e.length/2,t.uint16):"SS"===r?n=a(e.length/2,t.int16):"UL"===r?n=a(e.length/4,t.uint32):"SL"===r?n=a(e.length/4,t.int32):"FD"===r?n=a(e.length/8,t.double):"FL"===r&&(n=a(e.length/4,t.float))}return n};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(25))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(a||(a=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),void 0===t)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===e)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==e.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==e.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==e.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==e.basicOffsetTable.length?(0,i.default)(t,e,n):(0,r.default)(t,e,0,e.fragments.length)};var i=o(n(26)),r=o(n(17));function o(t){return t&&t.__esModule?t:{default:t}}var a=!1},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";var i=n(8),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,l,c,u,h,f){var d,p,m,g,y,v,b,_,w,A=f.bits,x=0,S=0,M=0,E=0,T=0,I=0,k=0,C=0,B=0,R=0,P=null,L=0,D=new i.Buf16(16),N=new i.Buf16(16),O=null,F=0;for(x=0;x<=15;x++)D[x]=0;for(S=0;S<l;S++)D[e[n+S]]++;for(T=A,E=15;E>=1&&0===D[E];E--);if(T>E&&(T=E),0===E)return c[u++]=20971520,c[u++]=20971520,f.bits=1,0;for(M=1;M<E&&0===D[M];M++);for(T<M&&(T=M),C=1,x=1;x<=15;x++)if(C<<=1,(C-=D[x])<0)return-1;if(C>0&&(0===t||1!==E))return-1;for(N[1]=0,x=1;x<15;x++)N[x+1]=N[x]+D[x];for(S=0;S<l;S++)0!==e[n+S]&&(h[N[e[n+S]]++]=S);if(0===t?(P=O=h,v=19):1===t?(P=r,L-=257,O=o,F-=257,v=256):(P=a,O=s,v=-1),R=0,S=0,x=M,y=u,I=T,k=0,m=-1,g=(B=1<<T)-1,1===t&&B>852||2===t&&B>592)return 1;for(;;){b=x-k,h[S]<v?(_=0,w=h[S]):h[S]>v?(_=O[F+h[S]],w=P[L+h[S]]):(_=96,w=0),d=1<<x-k,M=p=1<<I;do{c[y+(R>>k)+(p-=d)]=b<<24|_<<16|w|0}while(0!==p);for(d=1<<x-1;R&d;)d>>=1;if(0!==d?(R&=d-1,R+=d):R=0,S++,0==--D[x]){if(x===E)break;x=e[n+h[S]]}if(x>T&&(R&g)!==m){for(0===k&&(k=T),y+=M,C=1<<(I=x-k);I+k<E&&!((C-=D[I+k])<=0);)I++,C<<=1;if(B+=1<<I,1===t&&B>852||2===t&&B>592)return 1;c[m=R&g]=T<<24|I<<16|y-u|0}}return 0!==R&&(c[y+R]=x-k<<24|64<<16|0),f.bits=T,0}},function(t,e,n){"use strict";t.exports=function(t,e){var n,i,r,o,a,s,l,c,u,h,f,d,p,m,g,y,v,b,_,w,A,x,S,M,E;n=t.state,i=t.next_in,M=t.input,r=i+(t.avail_in-5),o=t.next_out,E=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,h=n.wnext,f=n.window,d=n.hold,p=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{p<15&&(d+=M[i++]<<p,p+=8,d+=M[i++]<<p,p+=8),b=m[d&y];e:for(;;){if(d>>>=_=b>>>24,p-=_,0==(_=b>>>16&255))E[o++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=m[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(d+=M[i++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=M[i++]<<p,p+=8,d+=M[i++]<<p,p+=8),b=g[d&v];n:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=g[(65535&b)+(d&(1<<_)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(A=65535&b,p<(_&=15)&&(d+=M[i++]<<p,(p+=8)<_&&(d+=M[i++]<<p,p+=8)),(A+=d&(1<<_)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=_,p-=_,A>(_=o-a)){if((_=A-_)>u&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(x=0,S=f,0===h){if(x+=c-_,_<w){w-=_;do{E[o++]=f[x++]}while(--_);x=o-A,S=E}}else if(h<_){if(x+=c+h-_,(_-=h)<w){w-=_;do{E[o++]=f[x++]}while(--_);if(x=0,h<w){w-=_=h;do{E[o++]=f[x++]}while(--_);x=o-A,S=E}}}else if(x+=h-_,_<w){w-=_;do{E[o++]=f[x++]}while(--_);x=o-A,S=E}for(;w>2;)E[o++]=S[x++],E[o++]=S[x++],E[o++]=S[x++],w-=3;w&&(E[o++]=S[x++],w>1&&(E[o++]=S[x++]))}else{x=o-A;do{E[o++]=E[x++],E[o++]=E[x++],E[o++]=E[x++],w-=3}while(w>2);w&&(E[o++]=E[x++],w>1&&(E[o++]=E[x++]))}break}}break}}while(i<r&&o<s);i-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=d,n.bits=p}},function(t,e,n){"use strict";var i=n(8),r=n(28),o=n(27),a=n(47),s=n(46),l=1,c=2,u=0,h=-2,f=1,d=12,p=30,m=852,g=592;function y(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function v(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=f,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(m),e.distcode=e.distdyn=new i.Buf32(g),e.sane=1,e.back=-1,u):h}function b(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,v(t)):h}function _(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?h:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,b(t))):h}function w(t,e){var n,r;return t?(r=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=r,r.window=null,(n=_(t,e))!==u&&(t.state=null),n):h}var A,x,S=!0;function M(t){if(S){var e;for(A=new i.Buf32(512),x=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(l,t.lens,0,288,A,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(c,t.lens,0,32,x,0,t.work,{bits:5}),S=!1}t.lencode=A,t.lenbits=9,t.distcode=x,t.distbits=5}function E(t,e,n,r){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),r>=a.wsize?(i.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>r&&(o=r),i.arraySet(a.window,e,n-r,o,a.wnext),(r-=o)?(i.arraySet(a.window,e,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=b,e.inflateReset2=_,e.inflateResetKeep=v,e.inflateInit=function(t){return w(t,15)},e.inflateInit2=w,e.inflate=function(t,e){var n,m,g,v,b,_,w,A,x,S,T,I,k,C,B,R,P,L,D,N,O,F,G,z,U=0,H=new i.Buf8(4),V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return h;(n=t.state).mode===d&&(n.mode=13),b=t.next_out,g=t.output,w=t.avail_out,v=t.next_in,m=t.input,_=t.avail_in,A=n.hold,x=n.bits,S=_,T=w,F=u;t:for(;;)switch(n.mode){case f:if(0===n.wrap){n.mode=13;break}for(;x<16;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}if(2&n.wrap&&35615===A){n.check=0,H[0]=255&A,H[1]=A>>>8&255,n.check=o(n.check,H,2,0),A=0,x=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&A)<<8)+(A>>8))%31){t.msg="incorrect header check",n.mode=p;break}if(8!=(15&A)){t.msg="unknown compression method",n.mode=p;break}if(x-=4,O=8+(15&(A>>>=4)),0===n.wbits)n.wbits=O;else if(O>n.wbits){t.msg="invalid window size",n.mode=p;break}n.dmax=1<<O,t.adler=n.check=1,n.mode=512&A?10:d,A=0,x=0;break;case 2:for(;x<16;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}if(n.flags=A,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=p;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=p;break}n.head&&(n.head.text=A>>8&1),512&n.flags&&(H[0]=255&A,H[1]=A>>>8&255,n.check=o(n.check,H,2,0)),A=0,x=0,n.mode=3;case 3:for(;x<32;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}n.head&&(n.head.time=A),512&n.flags&&(H[0]=255&A,H[1]=A>>>8&255,H[2]=A>>>16&255,H[3]=A>>>24&255,n.check=o(n.check,H,4,0)),A=0,x=0,n.mode=4;case 4:for(;x<16;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}n.head&&(n.head.xflags=255&A,n.head.os=A>>8),512&n.flags&&(H[0]=255&A,H[1]=A>>>8&255,n.check=o(n.check,H,2,0)),A=0,x=0,n.mode=5;case 5:if(1024&n.flags){for(;x<16;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}n.length=A,n.head&&(n.head.extra_len=A),512&n.flags&&(H[0]=255&A,H[1]=A>>>8&255,n.check=o(n.check,H,2,0)),A=0,x=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((I=n.length)>_&&(I=_),I&&(n.head&&(O=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,m,v,I,O)),512&n.flags&&(n.check=o(n.check,m,I,v)),_-=I,v+=I,n.length-=I),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===_)break t;I=0;do{O=m[v+I++],n.head&&O&&n.length<65536&&(n.head.name+=String.fromCharCode(O))}while(O&&I<_);if(512&n.flags&&(n.check=o(n.check,m,I,v)),_-=I,v+=I,O)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===_)break t;I=0;do{O=m[v+I++],n.head&&O&&n.length<65536&&(n.head.comment+=String.fromCharCode(O))}while(O&&I<_);if(512&n.flags&&(n.check=o(n.check,m,I,v)),_-=I,v+=I,O)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;x<16;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}if(A!==(65535&n.check)){t.msg="header crc mismatch",n.mode=p;break}A=0,x=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=d;break;case 10:for(;x<32;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}t.adler=n.check=y(A),A=0,x=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=b,t.avail_out=w,t.next_in=v,t.avail_in=_,n.hold=A,n.bits=x,2;t.adler=n.check=1,n.mode=d;case d:if(5===e||6===e)break t;case 13:if(n.last){A>>>=7&x,x-=7&x,n.mode=27;break}for(;x<3;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}switch(n.last=1&A,x-=1,3&(A>>>=1)){case 0:n.mode=14;break;case 1:if(M(n),n.mode=20,6===e){A>>>=2,x-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=p}A>>>=2,x-=2;break;case 14:for(A>>>=7&x,x-=7&x;x<32;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}if((65535&A)!=(A>>>16^65535)){t.msg="invalid stored block lengths",n.mode=p;break}if(n.length=65535&A,A=0,x=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(I=n.length){if(I>_&&(I=_),I>w&&(I=w),0===I)break t;i.arraySet(g,m,v,I,b),_-=I,v+=I,w-=I,b+=I,n.length-=I;break}n.mode=d;break;case 17:for(;x<14;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}if(n.nlen=257+(31&A),A>>>=5,x-=5,n.ndist=1+(31&A),A>>>=5,x-=5,n.ncode=4+(15&A),A>>>=4,x-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=p;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;x<3;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}n.lens[V[n.have++]]=7&A,A>>>=3,x-=3}for(;n.have<19;)n.lens[V[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,G={bits:n.lenbits},F=s(0,n.lens,0,19,n.lencode,0,n.work,G),n.lenbits=G.bits,F){t.msg="invalid code lengths set",n.mode=p;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;R=(U=n.lencode[A&(1<<n.lenbits)-1])>>>16&255,P=65535&U,!((B=U>>>24)<=x);){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}if(P<16)A>>>=B,x-=B,n.lens[n.have++]=P;else{if(16===P){for(z=B+2;x<z;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}if(A>>>=B,x-=B,0===n.have){t.msg="invalid bit length repeat",n.mode=p;break}O=n.lens[n.have-1],I=3+(3&A),A>>>=2,x-=2}else if(17===P){for(z=B+3;x<z;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}x-=B,O=0,I=3+(7&(A>>>=B)),A>>>=3,x-=3}else{for(z=B+7;x<z;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}x-=B,O=0,I=11+(127&(A>>>=B)),A>>>=7,x-=7}if(n.have+I>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=p;break}for(;I--;)n.lens[n.have++]=O}}if(n.mode===p)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=p;break}if(n.lenbits=9,G={bits:n.lenbits},F=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,G),n.lenbits=G.bits,F){t.msg="invalid literal/lengths set",n.mode=p;break}if(n.distbits=6,n.distcode=n.distdyn,G={bits:n.distbits},F=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,G),n.distbits=G.bits,F){t.msg="invalid distances set",n.mode=p;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(_>=6&&w>=258){t.next_out=b,t.avail_out=w,t.next_in=v,t.avail_in=_,n.hold=A,n.bits=x,a(t,T),b=t.next_out,g=t.output,w=t.avail_out,v=t.next_in,m=t.input,_=t.avail_in,A=n.hold,x=n.bits,n.mode===d&&(n.back=-1);break}for(n.back=0;R=(U=n.lencode[A&(1<<n.lenbits)-1])>>>16&255,P=65535&U,!((B=U>>>24)<=x);){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}if(R&&0==(240&R)){for(L=B,D=R,N=P;R=(U=n.lencode[N+((A&(1<<L+D)-1)>>L)])>>>16&255,P=65535&U,!(L+(B=U>>>24)<=x);){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}A>>>=L,x-=L,n.back+=L}if(A>>>=B,x-=B,n.back+=B,n.length=P,0===R){n.mode=26;break}if(32&R){n.back=-1,n.mode=d;break}if(64&R){t.msg="invalid literal/length code",n.mode=p;break}n.extra=15&R,n.mode=22;case 22:if(n.extra){for(z=n.extra;x<z;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}n.length+=A&(1<<n.extra)-1,A>>>=n.extra,x-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;R=(U=n.distcode[A&(1<<n.distbits)-1])>>>16&255,P=65535&U,!((B=U>>>24)<=x);){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}if(0==(240&R)){for(L=B,D=R,N=P;R=(U=n.distcode[N+((A&(1<<L+D)-1)>>L)])>>>16&255,P=65535&U,!(L+(B=U>>>24)<=x);){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}A>>>=L,x-=L,n.back+=L}if(A>>>=B,x-=B,n.back+=B,64&R){t.msg="invalid distance code",n.mode=p;break}n.offset=P,n.extra=15&R,n.mode=24;case 24:if(n.extra){for(z=n.extra;x<z;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}n.offset+=A&(1<<n.extra)-1,A>>>=n.extra,x-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=p;break}n.mode=25;case 25:if(0===w)break t;if(I=T-w,n.offset>I){if((I=n.offset-I)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=p;break}I>n.wnext?(I-=n.wnext,k=n.wsize-I):k=n.wnext-I,I>n.length&&(I=n.length),C=n.window}else C=g,k=b-n.offset,I=n.length;I>w&&(I=w),w-=I,n.length-=I;do{g[b++]=C[k++]}while(--I);0===n.length&&(n.mode=21);break;case 26:if(0===w)break t;g[b++]=n.length,w--,n.mode=21;break;case 27:if(n.wrap){for(;x<32;){if(0===_)break t;_--,A|=m[v++]<<x,x+=8}if(T-=w,t.total_out+=T,n.total+=T,T&&(t.adler=n.check=n.flags?o(n.check,g,T,b-T):r(n.check,g,T,b-T)),T=w,(n.flags?A:y(A))!==n.check){t.msg="incorrect data check",n.mode=p;break}A=0,x=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;x<32;){if(0===_)break t;_--,A+=m[v++]<<x,x+=8}if(A!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=p;break}A=0,x=0}n.mode=29;case 29:F=1;break t;case p:F=-3;break t;case 31:return-4;case 32:default:return h}return t.next_out=b,t.avail_out=w,t.next_in=v,t.avail_in=_,n.hold=A,n.bits=x,(n.wsize||T!==t.avail_out&&n.mode<p&&(n.mode<27||4!==e))&&E(t,t.output,t.next_out,T-t.avail_out)?(n.mode=31,-4):(S-=t.avail_in,T-=t.avail_out,t.total_in+=S,t.total_out+=T,n.total+=T,n.wrap&&T&&(t.adler=n.check=n.flags?o(n.check,g,T,t.next_out-T):r(n.check,g,T,t.next_out-T)),t.data_type=n.bits+(n.last?64:0)+(n.mode===d?128:0)+(20===n.mode||15===n.mode?256:0),(0===S&&0===T||4===e)&&F===u&&(F=-5),F)},e.inflateEnd=function(t){if(!t||!t.state)return h;var e=t.state;return e.window&&(e.window=null),t.state=null,u},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?h:(n.head=e,e.done=!1,u):h},e.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?h:11===n.mode&&r(1,e,i,0)!==n.check?-3:E(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,u):h},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";var i=n(8);function r(t){for(var e=t.length;--e>=0;)t[e]=0}var o=0,a=256,s=a+1+29,l=30,c=19,u=2*s+1,h=15,f=16,d=256,p=16,m=17,g=18,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],v=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],w=new Array(2*(s+2));r(w);var A=new Array(2*l);r(A);var x=new Array(512);r(x);var S=new Array(256);r(S);var M=new Array(29);r(M);var E,T,I,k=new Array(l);function C(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function B(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function R(t){return t<256?x[t]:x[256+(t>>>7)]}function P(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function L(t,e,n){t.bi_valid>f-n?(t.bi_buf|=e<<t.bi_valid&65535,P(t,t.bi_buf),t.bi_buf=e>>f-t.bi_valid,t.bi_valid+=n-f):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function D(t,e,n){L(t,n[2*e],n[2*e+1])}function N(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function O(t,e,n){var i,r,o=new Array(h+1),a=0;for(i=1;i<=h;i++)o[i]=a=a+n[i-1]<<1;for(r=0;r<=e;r++){var s=t[2*r+1];0!==s&&(t[2*r]=N(o[s]++,s))}}function F(t){var e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<l;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*d]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function G(t){t.bi_valid>8?P(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function z(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function U(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&z(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!z(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function H(t,e,n){var i,r,o,s,l=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],r=t.pending_buf[t.l_buf+l],l++,0===i?D(t,r,e):(D(t,(o=S[r])+a+1,e),0!==(s=y[o])&&L(t,r-=M[o],s),D(t,o=R(--i),n),0!==(s=v[o])&&L(t,i-=k[o],s))}while(l<t.last_lit);D(t,d,e)}function V(t,e){var n,i,r,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=u,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[r]=0,t.opt_len--,s&&(t.static_len-=a[2*r+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)U(t,o,n);r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],U(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,U(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,a,s,l=e.dyn_tree,c=e.max_code,f=e.stat_desc.static_tree,d=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,m=e.stat_desc.extra_base,g=e.stat_desc.max_length,y=0;for(o=0;o<=h;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<u;n++)(o=l[2*l[2*(i=t.heap[n])+1]+1]+1)>g&&(o=g,y++),l[2*i+1]=o,i>c||(t.bl_count[o]++,a=0,i>=m&&(a=p[i-m]),s=l[2*i],t.opt_len+=s*(o+a),d&&(t.static_len+=s*(f[2*i+1]+a)));if(0!==y){do{for(o=g-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[g]--,y-=2}while(y>0);for(o=g;0!==o;o--)for(i=t.bl_count[o];0!==i;)(r=t.heap[--n])>c||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(t,e),O(o,c,t.bl_count)}function W(t,e,n){var i,r,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=e[2*(i+1)+1],++s<l&&r===a||(s<c?t.bl_tree[2*r]+=s:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*p]++):s<=10?t.bl_tree[2*m]++:t.bl_tree[2*g]++,s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4))}function Z(t,e,n){var i,r,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),i=0;i<=n;i++)if(r=a,a=e[2*(i+1)+1],!(++s<l&&r===a)){if(s<c)do{D(t,r,t.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(D(t,r,t.bl_tree),s--),D(t,p,t.bl_tree),L(t,s-3,2)):s<=10?(D(t,m,t.bl_tree),L(t,s-3,3)):(D(t,g,t.bl_tree),L(t,s-11,7));s=0,o=r,0===a?(l=138,c=3):r===a?(l=6,c=3):(l=7,c=4)}}r(k);var j=!1;function Y(t,e,n,r){L(t,(o<<1)+(r?1:0),3),function(t,e,n,r){G(t),P(t,n),P(t,~n),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}e._tr_init=function(t){j||(function(){var t,e,n,i,r,o=new Array(h+1);for(n=0,i=0;i<28;i++)for(M[i]=n,t=0;t<1<<y[i];t++)S[n++]=i;for(S[n-1]=i,r=0,i=0;i<16;i++)for(k[i]=r,t=0;t<1<<v[i];t++)x[r++]=i;for(r>>=7;i<l;i++)for(k[i]=r<<7,t=0;t<1<<v[i]-7;t++)x[256+r++]=i;for(e=0;e<=h;e++)o[e]=0;for(t=0;t<=143;)w[2*t+1]=8,t++,o[8]++;for(;t<=255;)w[2*t+1]=9,t++,o[9]++;for(;t<=279;)w[2*t+1]=7,t++,o[7]++;for(;t<=287;)w[2*t+1]=8,t++,o[8]++;for(O(w,s+1,o),t=0;t<l;t++)A[2*t+1]=5,A[2*t]=N(t,5);E=new C(w,y,a+1,s,h),T=new C(A,v,0,l,h),I=new C(new Array(0),b,0,c,7)}(),j=!0),t.l_desc=new B(t.dyn_ltree,E),t.d_desc=new B(t.dyn_dtree,T),t.bl_desc=new B(t.bl_tree,I),t.bi_buf=0,t.bi_valid=0,F(t)},e._tr_stored_block=Y,e._tr_flush_block=function(t,e,n,i){var r,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),V(t,t.l_desc),V(t,t.d_desc),s=function(t){var e;for(W(t,t.dyn_ltree,t.l_desc.max_code),W(t,t.dyn_dtree,t.d_desc.max_code),V(t,t.bl_desc),e=c-1;e>=3&&0===t.bl_tree[2*_[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?Y(t,e,n,i):4===t.strategy||o===r?(L(t,2+(i?1:0),3),H(t,w,A)):(L(t,4+(i?1:0),3),function(t,e,n,i){var r;for(L(t,e-257,5),L(t,n-1,5),L(t,i-4,4),r=0;r<i;r++)L(t,t.bl_tree[2*_[r]+1],3);Z(t,t.dyn_ltree,e-1),Z(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),H(t,t.dyn_ltree,t.dyn_dtree)),F(t),i&&G(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(S[n]+a+1)]++,t.dyn_dtree[2*R(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){L(t,2,3),D(t,d,w),function(t){16===t.bi_valid?(P(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";var i,r=n(8),o=n(50),a=n(28),s=n(27),l=n(49),c=0,u=4,h=0,f=-2,d=-1,p=1,m=4,g=2,y=8,v=9,b=286,_=30,w=19,A=2*b+1,x=15,S=3,M=258,E=M+S+1,T=42,I=103,k=113,C=666,B=1,R=2,P=3,L=4;function D(t,e){return t.msg=l[e],e}function N(t){return(t<<1)-(t>4?9:0)}function O(t){for(var e=t.length;--e>=0;)t[e]=0}function F(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function G(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,F(t.strm)}function z(t,e){t.pending_buf[t.pending++]=e}function U(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function H(t,e){var n,i,r=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-E?t.strstart-(t.w_size-E):0,c=t.window,u=t.w_mask,h=t.prev,f=t.strstart+M,d=c[o+a-1],p=c[o+a];t.prev_length>=t.good_match&&(r>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(n=e)+a]===p&&c[n+a-1]===d&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<f);if(i=M-(f-o),o=f-M,i>a){if(t.match_start=e,a=i,i>=s)break;d=c[o+a-1],p=c[o+a]}}}while((e=h[e&u])>l&&0!=--r);return a<=t.lookahead?a:t.lookahead}function V(t){var e,n,i,o,l,c,u,h,f,d,p=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-E)){r.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=p?i-p:0}while(--n);e=n=p;do{i=t.prev[--e],t.prev[e]=i>=p?i-p:0}while(--n);o+=p}if(0===t.strm.avail_in)break;if(c=t.strm,u=t.window,h=t.strstart+t.lookahead,f=o,d=void 0,(d=c.avail_in)>f&&(d=f),n=0===d?0:(c.avail_in-=d,r.arraySet(u,c.input,c.next_in,d,h),1===c.state.wrap?c.adler=a(c.adler,u,d,h):2===c.state.wrap&&(c.adler=s(c.adler,u,d,h)),c.next_in+=d,c.total_in+=d,d),t.lookahead+=n,t.lookahead+t.insert>=S)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+S-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<S)););}while(t.lookahead<E&&0!==t.strm.avail_in)}function W(t,e){for(var n,i;;){if(t.lookahead<E){if(V(t),t.lookahead<E&&e===c)return B;if(0===t.lookahead)break}if(n=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-E&&(t.match_length=H(t,n)),t.match_length>=S)if(i=o._tr_tally(t,t.strstart-t.match_start,t.match_length-S),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=S){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(G(t,!1),0===t.strm.avail_out))return B}return t.insert=t.strstart<S-1?t.strstart:S-1,e===u?(G(t,!0),0===t.strm.avail_out?P:L):t.last_lit&&(G(t,!1),0===t.strm.avail_out)?B:R}function Z(t,e){for(var n,i,r;;){if(t.lookahead<E){if(V(t),t.lookahead<E&&e===c)return B;if(0===t.lookahead)break}if(n=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=S-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-E&&(t.match_length=H(t,n),t.match_length<=5&&(t.strategy===p||t.match_length===S&&t.strstart-t.match_start>4096)&&(t.match_length=S-1)),t.prev_length>=S&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-S,i=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-S),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=S-1,t.strstart++,i&&(G(t,!1),0===t.strm.avail_out))return B}else if(t.match_available){if((i=o._tr_tally(t,0,t.window[t.strstart-1]))&&G(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return B}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<S-1?t.strstart:S-1,e===u?(G(t,!0),0===t.strm.avail_out?P:L):t.last_lit&&(G(t,!1),0===t.strm.avail_out)?B:R}function j(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function Y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=g,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?T:k,t.adler=2===e.wrap?0:1,e.last_flush=c,o._tr_init(e),h):D(t,f)}function X(t){var e,n=Y(t);return n===h&&((e=t.state).window_size=2*e.w_size,O(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=S-1,e.match_available=0,e.ins_h=0),n}function J(t,e,n,i,o,a){if(!t)return f;var s=1;if(e===d&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>v||n!==y||i<8||i>15||e<0||e>9||a<0||a>m)return D(t,f);8===i&&(i=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*A),this.dyn_dtree=new r.Buf16(2*(2*_+1)),this.bl_tree=new r.Buf16(2*(2*w+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(x+1),this.heap=new r.Buf16(2*b+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*b+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=l,l.strm=t,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+S-1)/S),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,X(t)}i=[new j(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(V(t),0===t.lookahead&&e===c)return B;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,G(t,!1),0===t.strm.avail_out))return B;if(t.strstart-t.block_start>=t.w_size-E&&(G(t,!1),0===t.strm.avail_out))return B}return t.insert=0,e===u?(G(t,!0),0===t.strm.avail_out?P:L):(t.strstart>t.block_start&&(G(t,!1),t.strm.avail_out),B)}),new j(4,4,8,4,W),new j(4,5,16,8,W),new j(4,6,32,32,W),new j(4,4,16,16,Z),new j(8,16,32,32,Z),new j(8,16,128,128,Z),new j(8,32,128,256,Z),new j(32,128,258,1024,Z),new j(32,258,258,4096,Z)],e.deflateInit=function(t,e){return J(t,e,y,15,8,0)},e.deflateInit2=J,e.deflateReset=X,e.deflateResetKeep=Y,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?f:(t.state.gzhead=e,h):f},e.deflate=function(t,e){var n,r,a,l;if(!t||!t.state||e>5||e<0)return t?D(t,f):f;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===C&&e!==u)return D(t,0===t.avail_out?-5:f);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===T)if(2===r.wrap)t.adler=0,z(r,31),z(r,139),z(r,8),r.gzhead?(z(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),z(r,255&r.gzhead.time),z(r,r.gzhead.time>>8&255),z(r,r.gzhead.time>>16&255),z(r,r.gzhead.time>>24&255),z(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),z(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(z(r,255&r.gzhead.extra.length),z(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=s(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(z(r,0),z(r,0),z(r,0),z(r,0),z(r,0),z(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),z(r,3),r.status=k);else{var d=y+(r.w_bits-8<<4)<<8;d|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(d|=32),d+=31-d%31,r.status=k,U(r,d),0!==r.strstart&&(U(r,t.adler>>>16),U(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),F(t),a=r.pending,r.pending!==r.pending_buf_size));)z(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),F(t),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,z(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),F(t),a=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,z(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>a&&(t.adler=s(t.adler,r.pending_buf,r.pending-a,a)),0===l&&(r.status=I)}else r.status=I;if(r.status===I&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&F(t),r.pending+2<=r.pending_buf_size&&(z(r,255&t.adler),z(r,t.adler>>8&255),t.adler=0,r.status=k)):r.status=k),0!==r.pending){if(F(t),0===t.avail_out)return r.last_flush=-1,h}else if(0===t.avail_in&&N(e)<=N(n)&&e!==u)return D(t,-5);if(r.status===C&&0!==t.avail_in)return D(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==c&&r.status!==C){var p=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(V(t),0===t.lookahead)){if(e===c)return B;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(G(t,!1),0===t.strm.avail_out))return B}return t.insert=0,e===u?(G(t,!0),0===t.strm.avail_out?P:L):t.last_lit&&(G(t,!1),0===t.strm.avail_out)?B:R}(r,e):3===r.strategy?function(t,e){for(var n,i,r,a,s=t.window;;){if(t.lookahead<=M){if(V(t),t.lookahead<=M&&e===c)return B;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=S&&t.strstart>0&&(i=s[r=t.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){a=t.strstart+M;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a);t.match_length=M-(a-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=S?(n=o._tr_tally(t,1,t.match_length-S),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(G(t,!1),0===t.strm.avail_out))return B}return t.insert=0,e===u?(G(t,!0),0===t.strm.avail_out?P:L):t.last_lit&&(G(t,!1),0===t.strm.avail_out)?B:R}(r,e):i[r.level].func(r,e);if(p!==P&&p!==L||(r.status=C),p===B||p===P)return 0===t.avail_out&&(r.last_flush=-1),h;if(p===R&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(O(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),F(t),0===t.avail_out))return r.last_flush=-1,h}return e!==u?h:r.wrap<=0?1:(2===r.wrap?(z(r,255&t.adler),z(r,t.adler>>8&255),z(r,t.adler>>16&255),z(r,t.adler>>24&255),z(r,255&t.total_in),z(r,t.total_in>>8&255),z(r,t.total_in>>16&255),z(r,t.total_in>>24&255)):(U(r,t.adler>>>16),U(r,65535&t.adler)),F(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?h:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==T&&69!==e&&73!==e&&91!==e&&e!==I&&e!==k&&e!==C?D(t,f):(t.state=null,e===k?D(t,-3):h):f},e.deflateSetDictionary=function(t,e){var n,i,o,s,l,c,u,d,p=e.length;if(!t||!t.state)return f;if(2===(s=(n=t.state).wrap)||1===s&&n.status!==T||n.lookahead)return f;for(1===s&&(t.adler=a(t.adler,e,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(O(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new r.Buf8(n.w_size),r.arraySet(d,e,p-n.w_size,n.w_size,0),e=d,p=n.w_size),l=t.avail_in,c=t.next_in,u=t.input,t.avail_in=p,t.next_in=0,t.input=e,V(n);n.lookahead>=S;){i=n.strstart,o=n.lookahead-(S-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+S-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--o);n.strstart=i,n.lookahead=S-1,V(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=S-1,n.match_available=0,t.next_in=c,t.input=u,t.avail_in=l,n.wrap=s,h},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,n){"use strict";(function(t,i){var r=n(30),o=n(52),a=n(51),s=n(48),l=n(45);for(var c in l)e[c]=l[c];function u(t){if("number"!=typeof t||t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7,u.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,r(this.init_done,"close before init"),r(this.mode<=e.UNZIP),this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==e.INFLATE&&this.mode!==e.GUNZIP&&this.mode!==e.INFLATERAW&&this.mode!==e.UNZIP||s.inflateEnd(this.strm),this.mode=e.NONE,this.dictionary=null)},u.prototype.write=function(t,e,n,i,r,o,a){return this._write(!0,t,e,n,i,r,o,a)},u.prototype.writeSync=function(t,e,n,i,r,o,a){return this._write(!1,t,e,n,i,r,o,a)},u.prototype._write=function(n,o,a,s,l,c,u,h){if(r.equal(arguments.length,8),r(this.init_done,"write before init"),r(this.mode!==e.NONE,"already finalized"),r.equal(!1,this.write_in_progress,"write already in progress"),r.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,r.equal(!1,void 0===o,"must provide flush value"),this.write_in_progress=!0,o!==e.Z_NO_FLUSH&&o!==e.Z_PARTIAL_FLUSH&&o!==e.Z_SYNC_FLUSH&&o!==e.Z_FULL_FLUSH&&o!==e.Z_FINISH&&o!==e.Z_BLOCK)throw new Error("Invalid flush value");if(null==a&&(a=t.alloc(0),l=0,s=0),this.strm.avail_in=l,this.strm.input=a,this.strm.next_in=s,this.strm.avail_out=h,this.strm.output=c,this.strm.next_out=u,this.flush=o,!n)return this._process(),this._checkError()?this._afterSync():void 0;var f=this;return i.nextTick(function(){f._process(),f._after()}),this},u.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},u.prototype._process=function(){var t=null;switch(this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case e.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=e.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=e.GUNZIP):this.mode=e.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===e.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===e.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===e.Z_DATA_ERROR&&(this.err=e.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===e.GUNZIP&&this.err===e.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},u.prototype._checkError=function(){switch(this.err){case e.Z_OK:case e.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===e.Z_FINISH)return this._error("unexpected end of file"),!1;break;case e.Z_STREAM_END:break;case e.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},u.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},u.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},u.prototype.init=function(t,n,i,o,a){r(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),r(t>=8&&t<=15,"invalid windowBits"),r(n>=-1&&n<=9,"invalid compression level"),r(i>=1&&i<=9,"invalid memlevel"),r(o===e.Z_FILTERED||o===e.Z_HUFFMAN_ONLY||o===e.Z_RLE||o===e.Z_FIXED||o===e.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,t,i,o,a),this._setDictionary()},u.prototype.params=function(){throw new Error("deflateParams Not supported")},u.prototype.reset=function(){this._reset(),this._setDictionary()},u.prototype._init=function(t,n,i,r,l){switch(this.level=t,this.windowBits=n,this.memLevel=i,this.strategy=r,this.flush=e.Z_NO_FLUSH,this.err=e.Z_OK,this.mode!==e.GZIP&&this.mode!==e.GUNZIP||(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),this.mode!==e.DEFLATERAW&&this.mode!==e.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new o,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==e.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},u.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==e.Z_OK&&this._error("Failed to set dictionary")}},u.prototype._reset=function(){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:case e.GZIP:this.err=a.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:case e.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==e.Z_OK&&this._error("Failed to reset stream")},e.Zlib=u}).call(this,n(1).Buffer,n(3))},function(t,e,n){t.exports=n(19).PassThrough},function(t,e,n){t.exports=n(19).Transform},function(t,e,n){t.exports=n(2)},function(t,e,n){t.exports=n(18)},function(t,e,n){"use strict";t.exports=o;var i=n(31),r=n(6);function o(t){if(!(this instanceof o))return new o(t);i.call(this,t)}r.inherits=n(5),r.inherits(o,i),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}}).call(this,n(0))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o,a,s,l=1,c={},u=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){p(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),i=function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,i=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(p,0,t)},f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[l]=r,i(l),l++},f.clearImmediate=d}function d(t){delete c[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=c[t];if(e){u=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{d(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(0),n(3))},function(t,e,n){(function(t){var i=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(62),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(t,e){},function(t,e,n){"use strict";var i=n(9).Buffer,r=n(64);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e,n,r,o=i.allocUnsafe(t>>>0),a=this.head,s=0;a;)e=a.data,n=o,r=s,e.copy(n,r),s+=a.data.length,a=a.next;return o},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){t.exports=r;var i=n(20).EventEmitter;function r(){i.call(this)}n(5)(r,i),r.Readable=n(19),r.Writable=n(59),r.Duplex=n(58),r.Transform=n(57),r.PassThrough=n(56),r.Stream=r,r.prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",l));var a=!1;function s(){a||(a=!0,t.end())}function l(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){n.removeListener("data",r),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",l),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",u),n.removeListener("close",u),t.removeListener("close",u)}return n.on("error",c),t.on("error",c),n.on("end",u),n.on("close",u),t.on("close",u),t.emit("pipe",n),t}},function(t,e,n){"use strict";(function(t){var i=n(1).Buffer,r=n(67).Transform,o=n(55),a=n(29),s=n(30).ok,l=n(1).kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";o.Z_MIN_WINDOWBITS=8,o.Z_MAX_WINDOWBITS=15,o.Z_DEFAULT_WINDOWBITS=15,o.Z_MIN_CHUNK=64,o.Z_MAX_CHUNK=1/0,o.Z_DEFAULT_CHUNK=16384,o.Z_MIN_MEMLEVEL=1,o.Z_MAX_MEMLEVEL=9,o.Z_DEFAULT_MEMLEVEL=8,o.Z_MIN_LEVEL=-1,o.Z_MAX_LEVEL=9,o.Z_DEFAULT_LEVEL=o.Z_DEFAULT_COMPRESSION;for(var u=Object.keys(o),h=0;h<u.length;h++){var f=u[h];f.match(/^Z/)&&Object.defineProperty(e,f,{enumerable:!0,value:o[f],writable:!1})}for(var d={Z_OK:o.Z_OK,Z_STREAM_END:o.Z_STREAM_END,Z_NEED_DICT:o.Z_NEED_DICT,Z_ERRNO:o.Z_ERRNO,Z_STREAM_ERROR:o.Z_STREAM_ERROR,Z_DATA_ERROR:o.Z_DATA_ERROR,Z_MEM_ERROR:o.Z_MEM_ERROR,Z_BUF_ERROR:o.Z_BUF_ERROR,Z_VERSION_ERROR:o.Z_VERSION_ERROR},p=Object.keys(d),m=0;m<p.length;m++){var g=p[m];d[d[g]]=g}function y(t,e,n){var r=[],o=0;function a(){for(var e;null!==(e=t.read());)r.push(e),o+=e.length;t.once("readable",a)}function s(){var e,a=null;o>=l?a=new RangeError(c):e=i.concat(r,o),r=[],t.close(),n(a,e)}t.on("error",function(e){t.removeListener("end",s),t.removeListener("readable",a),n(e)}),t.on("end",s),t.end(e),a()}function v(t,e){if("string"==typeof e&&(e=i.from(e)),!i.isBuffer(e))throw new TypeError("Not a string or buffer");var n=t._finishFlushFlag;return t._processChunk(e,n)}function b(t){if(!(this instanceof b))return new b(t);T.call(this,t,o.DEFLATE)}function _(t){if(!(this instanceof _))return new _(t);T.call(this,t,o.INFLATE)}function w(t){if(!(this instanceof w))return new w(t);T.call(this,t,o.GZIP)}function A(t){if(!(this instanceof A))return new A(t);T.call(this,t,o.GUNZIP)}function x(t){if(!(this instanceof x))return new x(t);T.call(this,t,o.DEFLATERAW)}function S(t){if(!(this instanceof S))return new S(t);T.call(this,t,o.INFLATERAW)}function M(t){if(!(this instanceof M))return new M(t);T.call(this,t,o.UNZIP)}function E(t){return t===o.Z_NO_FLUSH||t===o.Z_PARTIAL_FLUSH||t===o.Z_SYNC_FLUSH||t===o.Z_FULL_FLUSH||t===o.Z_FINISH||t===o.Z_BLOCK}function T(t,n){var a=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||e.Z_DEFAULT_CHUNK,r.call(this,t),t.flush&&!E(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!E(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||o.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:o.Z_FINISH,t.chunkSize&&(t.chunkSize<e.Z_MIN_CHUNK||t.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<e.Z_MIN_WINDOWBITS||t.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<e.Z_MIN_LEVEL||t.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<e.Z_MIN_MEMLEVEL||t.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=e.Z_FILTERED&&t.strategy!=e.Z_HUFFMAN_ONLY&&t.strategy!=e.Z_RLE&&t.strategy!=e.Z_FIXED&&t.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!i.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new o.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(t,n){I(s),s._hadError=!0;var i=new Error(t);i.errno=n,i.code=e.codes[n],s.emit("error",i)};var l=e.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(l=t.level);var c=e.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(c=t.strategy),this._handle.init(t.windowBits||e.Z_DEFAULT_WINDOWBITS,l,t.memLevel||e.Z_DEFAULT_MEMLEVEL,c,t.dictionary),this._buffer=i.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!a._handle},configurable:!0,enumerable:!0})}function I(e,n){n&&t.nextTick(n),e._handle&&(e._handle.close(),e._handle=null)}function k(t){t.emit("close")}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(d),writable:!1}),e.Deflate=b,e.Inflate=_,e.Gzip=w,e.Gunzip=A,e.DeflateRaw=x,e.InflateRaw=S,e.Unzip=M,e.createDeflate=function(t){return new b(t)},e.createInflate=function(t){return new _(t)},e.createDeflateRaw=function(t){return new x(t)},e.createInflateRaw=function(t){return new S(t)},e.createGzip=function(t){return new w(t)},e.createGunzip=function(t){return new A(t)},e.createUnzip=function(t){return new M(t)},e.deflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),y(new b(e),t,n)},e.deflateSync=function(t,e){return v(new b(e),t)},e.gzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),y(new w(e),t,n)},e.gzipSync=function(t,e){return v(new w(e),t)},e.deflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),y(new x(e),t,n)},e.deflateRawSync=function(t,e){return v(new x(e),t)},e.unzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),y(new M(e),t,n)},e.unzipSync=function(t,e){return v(new M(e),t)},e.inflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),y(new _(e),t,n)},e.inflateSync=function(t,e){return v(new _(e),t)},e.gunzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),y(new A(e),t,n)},e.gunzipSync=function(t,e){return v(new A(e),t)},e.inflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),y(new S(e),t,n)},e.inflateRawSync=function(t,e){return v(new S(e),t)},a.inherits(T,r),T.prototype.params=function(n,i,r){if(n<e.Z_MIN_LEVEL||n>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+n);if(i!=e.Z_FILTERED&&i!=e.Z_HUFFMAN_ONLY&&i!=e.Z_RLE&&i!=e.Z_FIXED&&i!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+i);if(this._level!==n||this._strategy!==i){var a=this;this.flush(o.Z_SYNC_FLUSH,function(){s(a._handle,"zlib binding closed"),a._handle.params(n,i),a._hadError||(a._level=n,a._strategy=i,r&&r())})}else t.nextTick(r)},T.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},T.prototype._flush=function(t){this._transform(i.alloc(0),"",t)},T.prototype.flush=function(e,n){var r=this,a=this._writableState;("function"==typeof e||void 0===e&&!n)&&(n=e,e=o.Z_FULL_FLUSH),a.ended?n&&t.nextTick(n):a.ending?n&&this.once("end",n):a.needDrain?n&&this.once("drain",function(){return r.flush(e,n)}):(this._flushFlag=e,this.write(i.alloc(0),"",n))},T.prototype.close=function(e){I(this,e),t.nextTick(k,this)},T.prototype._transform=function(t,e,n){var r,a=this._writableState,s=(a.ending||a.ended)&&(!t||a.length===t.length);return null===t||i.isBuffer(t)?this._handle?(s?r=this._finishFlushFlag:(r=this._flushFlag,t.length>=a.length&&(this._flushFlag=this._opts.flush||o.Z_NO_FLUSH)),void this._processChunk(t,r,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},T.prototype._processChunk=function(t,e,n){var r=t&&t.length,o=this._chunkSize-this._offset,a=0,u=this,h="function"==typeof n;if(!h){var f,d=[],p=0;this.on("error",function(t){f=t}),s(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(e,t,a,r,this._buffer,this._offset,o)}while(!this._hadError&&v(m[0],m[1]));if(this._hadError)throw f;if(p>=l)throw I(this),new RangeError(c);var g=i.concat(d,p);return I(this),g}s(this._handle,"zlib binding closed");var y=this._handle.write(e,t,a,r,this._buffer,this._offset,o);function v(l,c){if(this&&(this.buffer=null,this.callback=null),!u._hadError){var f=o-c;if(s(f>=0,"have should not go down"),f>0){var m=u._buffer.slice(u._offset,u._offset+f);u._offset+=f,h?u.push(m):(d.push(m),p+=m.length)}if((0===c||u._offset>=u._chunkSize)&&(o=u._chunkSize,u._offset=0,u._buffer=i.allocUnsafe(u._chunkSize)),0===c){if(a+=r-l,r=l,!h)return!0;var g=u._handle.write(e,t,a,r,u._buffer,u._offset,u._chunkSize);return g.callback=v,void(g.buffer=t)}if(!h)return!1;n()}}y.buffer=t,y.callback=v},a.inherits(b,T),a.inherits(_,T),a.inherits(w,T),a.inherits(A,T),a.inherits(x,T),a.inherits(S,T),a.inherits(M,T)}).call(this,n(3))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,f){if(void 0===e)throw"dicomParser.parseDicom: missing required parameter 'byteArray'";return d=(0,l.default)(e,f),p=function(l){var d=function(t){if(void 0===t.elements.x00020010)throw"dicomParser.parseDicom: missing required meta header attribute 0002,0010";var n=t.elements.x00020010;return u.readFixedString(e,n.dataOffset,n.length)}(l),p=function(t){return"1.2.840.10008.1.2"!==t}(d),m=function(a,l){if("1.2.840.10008.1.2.1.99"===a){if(f&&f.inflater){var u=f.inflater(e,l);return new o.default(s.default,u,0)}if(void 0!==t&&this.module!==t){var h=n(68),d=(0,c.default)(e,l,e.length-l),p=h.inflateRawSync(d),m=(0,i.default)(e,p.length+l);return e.copy(m,0,0,l),p.copy(m,l),new o.default(s.default,m,0)}if("undefined"!=typeof pako){var g=e.slice(l),y=pako.inflateRaw(g),v=(0,i.default)(e,y.length+l);return v.set(e.slice(0,l),0),v.set(y,l),new o.default(s.default,v,0)}throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax"}return"1.2.840.10008.1.2.2"===a?new o.default(r.default,e,l):new o.default(s.default,e,l)}(d,l.position),g=new a.default(m.byteArrayParser,m.byteArray,{});g.warnings=m.warnings;try{p?h.parseDicomDataSetExplicit(g,m,m.byteArray.length,f):h.parseDicomDataSetImplicit(g,m,m.byteArray.length,f)}catch(t){var y={exception:t,dataSet:g};throw y}return g}(d),function(t,e){for(var n in t.elements)t.elements.hasOwnProperty(n)&&(e.elements[n]=t.elements[n]);return void 0!==t.warnings&&(e.warnings=t.warnings.concat(e.warnings)),e}(d,p);var d,p};var i=d(n(22)),r=d(n(37)),o=d(n(12)),a=d(n(7)),s=d(n(21)),l=d(n(36)),c=d(n(11)),u=f(n(14)),h=f(n(16));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}}).call(this,n(69)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="1.8.1"},function(t,e){e.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+t[e+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,i),o-=c}return(d?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+d]=255&s,d+=p,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*m}},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,n,i,a,s,l=t.length;a=c(t),s=new o(3*l/4-a),n=a>0?l-4:l;var u=0;for(e=0;e<n;e+=4)i=r[t.charCodeAt(e)]<<18|r[t.charCodeAt(e+1)]<<12|r[t.charCodeAt(e+2)]<<6|r[t.charCodeAt(e+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===a?(i=r[t.charCodeAt(e)]<<2|r[t.charCodeAt(e+1)]>>4,s[u++]=255&i):1===a&&(i=r[t.charCodeAt(e)]<<10|r[t.charCodeAt(e+1)]<<4|r[t.charCodeAt(e+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o="",a=[],s=0,l=n-r;s<l;s+=16383)a.push(u(t,s,s+16383>l?l:s+16383));return 1===r?(e=t[n-1],o+=i[e>>2],o+=i[e<<4&63],o+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],o+=i[e>>10],o+=i[e>>4&63],o+=i[e<<2&63],o+="="),a.push(o),a.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function u(t,e,n){for(var r,o,a=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e,n){"use strict";function i(t,e){return 255===t.byteArray[e]&&217===t.byteArray[e+1]}function r(t,e,n){var r=e.fragments[n];return!(!i(t,r.position+r.length-2)&&!i(t,r.position+r.length-3))}function o(t,e,n){for(var i=n;i<e.fragments.length;i++)if(r(t,e,i))return i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===e)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==e.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==e.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==e.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(e.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n&&n.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";n=n||e.fragments;for(var i=[],r=0;;){i.push(e.fragments[r].offset);var a=o(t,e,r);if(void 0===a||a===e.fragments.length-1)return i;r=a+1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){if(void 0===e)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";n=n||{omitPrivateAttibutes:!0,maxElementLength:128};var i={};for(var r in e.elements){var s=e.elements[r];if(!0!==n.omitPrivateAttibutes||!a.isPrivateTag(r))if(s.items){for(var l=[],c=0;c<s.items.length;c++)l.push(t(s.items[c].dataSet,n));i[r]=l}else{var u;u=void 0,s.length<n.maxElementLength&&(u=(0,o.default)(e,s)),i[r]=void 0!==u?u:{dataOffset:s.dataOffset,length:s.length}}}return i};var i,r=n(43),o=(i=r)&&i.__esModule?i:{default:i},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(25))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(t&&8===t.length){var n=parseInt(t.substring(0,4),10),i=parseInt(t.substring(4,6),10),r=parseInt(t.substring(6,8),10);if(e&&!0!==function(t,e,n){return!isNaN(n)&&e>0&&e<=12&&t>0&&t<=function(t,e){switch(t){case 2:return e%4==0&&e%100||e%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}(e,n)}(r,i,n))throw"invalid DA '"+t+"'";return{year:n,month:i,day:r}}if(e)throw"invalid DA '"+t+"'"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(t.length>=2){var n=parseInt(t.substring(0,2),10),i=t.length>=4?parseInt(t.substring(2,4),10):void 0,r=t.length>=6?parseInt(t.substring(4,6),10):void 0,o=t.length>=8?parseInt(t.substring(7,13),10):void 0;if(e&&(isNaN(n)||void 0!==i&&isNaN(i)||void 0!==r&&isNaN(r)||void 0!==o&&isNaN(o)||n<0||n>23||i&&(i<0||i>59)||r&&(r<0||r>59)||o&&(o<0||o>999999)))throw"invalid TM '"+t+"'";return{hours:n,minutes:i,seconds:r,fractionalSeconds:o}}if(e)throw"invalid TM '"+t+"'"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(25);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var r=n(77);Object.defineProperty(e,"parseTM",{enumerable:!0,get:function(){return c(r).default}});var o=n(76);Object.defineProperty(e,"parseDA",{enumerable:!0,get:function(){return c(o).default}});var a=n(43);Object.defineProperty(e,"explicitElementToString",{enumerable:!0,get:function(){return c(a).default}});var s=n(75);Object.defineProperty(e,"explicitDataSetToJS",{enumerable:!0,get:function(){return c(s).default}});var l=n(74);function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"createJPEGBasicOffsetTable",{enumerable:!0,get:function(){return c(l).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(78);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var r=n(16);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var o=n(14);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=n(22);Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return T(a).default}});var s=n(71);Object.defineProperty(e,"version",{enumerable:!0,get:function(){return T(s).default}});var l=n(37);Object.defineProperty(e,"bigEndianByteArrayParser",{enumerable:!0,get:function(){return T(l).default}});var c=n(12);Object.defineProperty(e,"ByteStream",{enumerable:!0,get:function(){return T(c).default}});var u=n(11);Object.defineProperty(e,"sharedCopy",{enumerable:!0,get:function(){return T(u).default}});var h=n(7);Object.defineProperty(e,"DataSet",{enumerable:!0,get:function(){return T(h).default}});var f=n(41);Object.defineProperty(e,"findAndSetUNElementLength",{enumerable:!0,get:function(){return T(f).default}});var d=n(42);Object.defineProperty(e,"findEndOfEncapsulatedElement",{enumerable:!0,get:function(){return T(d).default}});var p=n(24);Object.defineProperty(e,"findItemDelimitationItemAndSetElementLength",{enumerable:!0,get:function(){return T(p).default}});var m=n(21);Object.defineProperty(e,"littleEndianByteArrayParser",{enumerable:!0,get:function(){return T(m).default}});var g=n(70);Object.defineProperty(e,"parseDicom",{enumerable:!0,get:function(){return T(g).default}});var y=n(15);Object.defineProperty(e,"readDicomElementExplicit",{enumerable:!0,get:function(){return T(y).default}});var v=n(23);Object.defineProperty(e,"readDicomElementImplicit",{enumerable:!0,get:function(){return T(v).default}});var b=n(26);Object.defineProperty(e,"readEncapsulatedImageFrame",{enumerable:!0,get:function(){return T(b).default}});var _=n(44);Object.defineProperty(e,"readEncapsulatedPixelData",{enumerable:!0,get:function(){return T(_).default}});var w=n(17);Object.defineProperty(e,"readEncapsulatedPixelDataFromFragments",{enumerable:!0,get:function(){return T(w).default}});var A=n(36);Object.defineProperty(e,"readPart10Header",{enumerable:!0,get:function(){return T(A).default}});var x=n(40);Object.defineProperty(e,"readSequenceItemsExplicit",{enumerable:!0,get:function(){return T(x).default}});var S=n(39);Object.defineProperty(e,"readSequenceItemsImplicit",{enumerable:!0,get:function(){return T(S).default}});var M=n(13);Object.defineProperty(e,"readSequenceItem",{enumerable:!0,get:function(){return T(M).default}});var E=n(4);function T(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"readTag",{enumerable:!0,get:function(){return T(E).default}})}])},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.ComponentSpec=i.lossless.ComponentSpec||n(34),i.lossless.DataStream=i.lossless.DataStream||n(9),i.lossless.Decoder=i.lossless.Decoder||n(107),i.lossless.FrameHeader=i.lossless.FrameHeader||n(39),i.lossless.HuffmanTable=i.lossless.HuffmanTable||n(35),i.lossless.QuantizationTable=i.lossless.QuantizationTable||n(36),i.lossless.ScanComponent=i.lossless.ScanComponent||n(38),i.lossless.ScanHeader=i.lossless.ScanHeader||n(37),i.lossless.Utils=i.lossless.Utils||n(12),"undefined"!==typeof t&&t.exports&&(t.exports=i)},function(t,e,n){"use strict";var i=i||{};i.lossless=i.lossless||{},i.lossless.DataStream=i.lossless.DataStream||n(9),i.lossless.HuffmanTable=i.lossless.HuffmanTable||n(35),i.lossless.QuantizationTable=i.lossless.QuantizationTable||n(36),i.lossless.ScanHeader=i.lossless.ScanHeader||n(37),i.lossless.FrameHeader=i.lossless.FrameHeader||n(39),i.lossless.Utils=i.lossless.Utils||n(12),i.lossless.Decoder=i.lossless.Decoder||function(t,e){this.buffer=t,this.frame=new i.lossless.FrameHeader,this.huffTable=new i.lossless.HuffmanTable,this.quantTable=new i.lossless.QuantizationTable,this.scan=new i.lossless.ScanHeader,this.DU=i.lossless.Utils.createArray(10,4,64),this.HuffTab=i.lossless.Utils.createArray(4,2,12800),this.IDCT_Source=[],this.nBlock=[],this.acTab=i.lossless.Utils.createArray(10,1),this.dcTab=i.lossless.Utils.createArray(10,1),this.qTab=i.lossless.Utils.createArray(10,1),this.marker=0,this.markerIndex=0,this.numComp=0,this.restartInterval=0,this.selection=0,this.xDim=0,this.yDim=0,this.xLoc=0,this.yLoc=0,this.numBytes=0,this.outputData=null,this.restarting=!1,this.mask=0,void 0!==e&&(this.numBytes=e)},i.lossless.Decoder.IDCT_P=[0,5,40,16,45,2,7,42,21,56,8,61,18,47,1,4,41,23,58,13,32,24,37,10,63,17,44,3,6,43,20,57,15,34,29,48,53,26,39,9,60,19,46,22,59,12,33,31,50,55,25,36,11,62,14,35,28,49,52,27,38,30,51,54],i.lossless.Decoder.TABLE=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],i.lossless.Decoder.MAX_HUFFMAN_SUBTREE=50,i.lossless.Decoder.MSB=2147483648,i.lossless.Decoder.RESTART_MARKER_BEGIN=65488,i.lossless.Decoder.RESTART_MARKER_END=65495,i.lossless.Decoder.prototype.decompress=function(t,e,n){return this.decode(t,e,n).buffer},i.lossless.Decoder.prototype.decode=function(t,e,n,r){var o,a,s,l,c=0,u=[],h=[],f=[];if(void 0!==t&&(this.buffer=t),void 0!==r&&(this.numBytes=r),this.stream=new i.lossless.DataStream(this.buffer,e,n),this.buffer=null,this.xLoc=0,this.yLoc=0,65496!==(o=this.stream.get16()))throw new Error("Not a JPEG file");for(o=this.stream.get16();o>>4!=4092||65476===o;){switch(o){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,i.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(o>>8!=255)throw new Error("ERROR: format throw new IOException! (decode)")}o=this.stream.get16()}if(o<65472||o>65479)throw new Error("ERROR: could not handle arithmetic code!");this.frame.read(this.stream),o=this.stream.get16();do{for(;65498!==o;){switch(o){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,i.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(o>>8!=255)throw new Error("ERROR: format throw new IOException! (Parser.decode)")}o=this.stream.get16()}switch(this.precision=this.frame.precision,this.components=this.frame.components,this.numBytes||(this.numBytes=parseInt(Math.ceil(this.precision/8))),1==this.numBytes?this.mask=255:this.mask=65535,this.scan.read(this.stream),this.numComp=this.scan.numComp,this.selection=this.scan.selection,1===this.numBytes?3===this.numComp?(this.getter=this.getValueRGB,this.setter=this.setValueRGB,this.output=this.outputRGB):(this.getter=this.getValue8,this.setter=this.setValue8,this.output=this.outputSingle):(this.getter=this.getValue16,this.setter=this.setValue16,this.output=this.outputSingle),this.selection){case 2:this.selector=this.select2;break;case 3:this.selector=this.select3;break;case 4:this.selector=this.select4;break;case 5:this.selector=this.select5;break;case 6:this.selector=this.select6;break;case 7:this.selector=this.select7;break;default:this.selector=this.select1}for(this.scanComps=this.scan.components,this.quantTables=this.quantTable.quantTables,a=0;a<this.numComp;a+=1)s=this.scanComps[a].scanCompSel,this.qTab[a]=this.quantTables[this.components[s].quantTableSel],this.nBlock[a]=this.components[s].vSamp*this.components[s].hSamp,this.dcTab[a]=this.HuffTab[this.scanComps[a].dcTabSel][0],this.acTab[a]=this.HuffTab[this.scanComps[a].acTabSel][1];for(this.xDim=this.frame.dimX,this.yDim=this.frame.dimY,this.outputData=new DataView(new ArrayBuffer(this.xDim*this.yDim*this.numBytes*this.numComp)),c+=1;;){for(h[0]=0,f[0]=0,a=0;a<10;a+=1)u[a]=1<<this.precision-1;if(0===this.restartInterval){for(o=this.decodeUnit(u,h,f);0===o&&this.xLoc<this.xDim&&this.yLoc<this.yDim;)this.output(u),o=this.decodeUnit(u,h,f);break}for(l=0;l<this.restartInterval&&(this.restarting=0==l,o=this.decodeUnit(u,h,f),this.output(u),0===o);l+=1);if(0===o&&(0!==this.markerIndex?(o=65280|this.marker,this.markerIndex=0):o=this.stream.get16()),!(o>=i.lossless.Decoder.RESTART_MARKER_BEGIN&&o<=i.lossless.Decoder.RESTART_MARKER_END))break}65500===o&&1===c&&(this.readNumber(),o=this.stream.get16())}while(65497!==o&&this.xLoc<this.xDim&&this.yLoc<this.yDim&&0===c);return this.outputData},i.lossless.Decoder.prototype.decodeUnit=function(t,e,n){return 1==this.numComp?this.decodeSingle(t,e,n):3==this.numComp?this.decodeRGB(t,e,n):-1},i.lossless.Decoder.prototype.select1=function(t){return this.getPreviousX(t)},i.lossless.Decoder.prototype.select2=function(t){return this.getPreviousY(t)},i.lossless.Decoder.prototype.select3=function(t){return this.getPreviousXY(t)},i.lossless.Decoder.prototype.select4=function(t){return this.getPreviousX(t)+this.getPreviousY(t)-this.getPreviousXY(t)},i.lossless.Decoder.prototype.select5=function(t){return this.getPreviousX(t)+(this.getPreviousY(t)-this.getPreviousXY(t)>>1)},i.lossless.Decoder.prototype.select6=function(t){return this.getPreviousY(t)+(this.getPreviousX(t)-this.getPreviousXY(t)>>1)},i.lossless.Decoder.prototype.select7=function(t){return(this.getPreviousX(t)+this.getPreviousY(t))/2},i.lossless.Decoder.prototype.decodeRGB=function(t,e,n){var r,o,a,s,l,c,u,h;for(t[0]=this.selector(0),t[1]=this.selector(1),t[2]=this.selector(2),l=0;l<this.numComp;l+=1)for(s=this.qTab[l],o=this.acTab[l],a=this.dcTab[l],c=0;c<this.nBlock[l];c+=1){for(u=0;u<this.IDCT_Source.length;u+=1)this.IDCT_Source[u]=0;if((r=this.getHuffmanValue(a,e,n))>=65280)return r;for(t[l]=this.IDCT_Source[0]=t[l]+this.getn(n,r,e,n),this.IDCT_Source[0]*=s[0],h=1;h<64;h+=1){if((r=this.getHuffmanValue(o,e,n))>=65280)return r;if(h+=r>>4,0==(15&r)){if(r>>4==0)break}else this.IDCT_Source[i.lossless.Decoder.IDCT_P[h]]=this.getn(n,15&r,e,n)*s[h]}}return 0},i.lossless.Decoder.prototype.decodeSingle=function(t,e,n){var r,o,a,s;for(this.restarting?(this.restarting=!1,t[0]=1<<this.frame.precision-1):t[0]=this.selector(),o=0;o<this.nBlock[0];o+=1){if((r=this.getHuffmanValue(this.dcTab[0],e,n))>=65280)return r;if((s=(a=this.getn(t,r,e,n))>>8)>=i.lossless.Decoder.RESTART_MARKER_BEGIN&&s<=i.lossless.Decoder.RESTART_MARKER_END)return s;t[0]+=a}return 0},i.lossless.Decoder.prototype.getHuffmanValue=function(t,e,n){var r,o;if(65535,n[0]<8?(e[0]<<=8,255===(o=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),e[0]|=o):n[0]-=8,0!=((r=t[e[0]>>n[0]])&i.lossless.Decoder.MSB)){if(0!==this.markerIndex)return this.markerIndex=0,65280|this.marker;e[0]&=65535>>16-n[0],e[0]<<=8,255===(o=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),e[0]|=o,r=t[256*(255&r)+(e[0]>>n[0])],n[0]+=8}if(n[0]+=8-(r>>8),n[0]<0)throw new Error("index="+n[0]+" temp="+e[0]+" code="+r+" in HuffmanValue()");return n[0]<this.markerIndex?(this.markerIndex=0,65280|this.marker):(e[0]&=65535>>16-n[0],255&r)},i.lossless.Decoder.prototype.getn=function(t,e,n,i){var r,o;if(1,-1,65535,0===e)return 0;if(16===e)return t[0]>=0?-32768:32768;if(i[0]-=e,i[0]>=0){if(i[0]<this.markerIndex&&!this.isLastPixel())return this.markerIndex=0,(65280|this.marker)<<8;r=n[0]>>i[0],n[0]&=65535>>16-i[0]}else{if(n[0]<<=8,255===(o=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),n[0]|=o,i[0]+=8,i[0]<0){if(0!==this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;n[0]<<=8,255===(o=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),n[0]|=o,i[0]+=8}if(i[0]<0)throw new Error("index="+i[0]+" in getn()");if(i[0]<this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;r=n[0]>>i[0],n[0]&=65535>>16-i[0]}return r<1<<e-1&&(r+=1+(-1<<e)),r},i.lossless.Decoder.prototype.getPreviousX=function(t){return this.xLoc>0?this.getter(this.yLoc*this.xDim+this.xLoc-1,t):this.yLoc>0?this.getPreviousY(t):1<<this.frame.precision-1},i.lossless.Decoder.prototype.getPreviousXY=function(t){return this.xLoc>0&&this.yLoc>0?this.getter((this.yLoc-1)*this.xDim+this.xLoc-1,t):this.getPreviousY(t)},i.lossless.Decoder.prototype.getPreviousY=function(t){return this.yLoc>0?this.getter((this.yLoc-1)*this.xDim+this.xLoc,t):this.getPreviousX(t)},i.lossless.Decoder.prototype.isLastPixel=function(){return this.xLoc===this.xDim-1&&this.yLoc===this.yDim-1},i.lossless.Decoder.prototype.outputSingle=function(t){this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(this.yLoc*this.xDim+this.xLoc,this.mask&t[0]),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},i.lossless.Decoder.prototype.outputRGB=function(t){var e=this.yLoc*this.xDim+this.xLoc;this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(e,t[0],0),this.setter(e,t[1],1),this.setter(e,t[2],2),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},i.lossless.Decoder.prototype.setValue16=function(t,e){this.outputData.setInt16(2*t,e,!0)},i.lossless.Decoder.prototype.getValue16=function(t){return this.outputData.getInt16(2*t,!0)},i.lossless.Decoder.prototype.setValue8=function(t,e){this.outputData.setInt8(t,e)},i.lossless.Decoder.prototype.getValue8=function(t){return this.outputData.getInt8(t)},i.lossless.Decoder.prototype.setValueRGB=function(t,e,n){this.outputData.setUint8(3*t+n,e)},i.lossless.Decoder.prototype.getValueRGB=function(t,e){return this.outputData.getUint8(3*t+e)},i.lossless.Decoder.prototype.readApp=function(){var t=0,e=this.stream.get16();for(t+=2;t<e;)this.stream.get8(),t+=1;return e},i.lossless.Decoder.prototype.readComment=function(){var t,e="",n=0;for(t=this.stream.get16(),n+=2;n<t;)e+=this.stream.get8(),n+=1;return e},i.lossless.Decoder.prototype.readNumber=function(){if(4!==this.stream.get16())throw new Error("ERROR: Define number format throw new IOException [Ld!=4]");return this.stream.get16()},"undefined"!==typeof t&&t.exports&&(t.exports=i.lossless.Decoder)},function(t,e){var n={Unkown:0,Grayscale:1,AdobeRGB:2,RGB:3,CYMK:4},i=function(){"use strict";var t=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),e=4017,i=799,r=3406,o=2276,a=1567,s=3784,l=5793,c=2896;function u(){}function h(t,e){for(var n,i,r=0,o=[],a=16;a>0&&!t[a-1];)a--;o.push({children:[],index:0});var s,l=o[0];for(n=0;n<a;n++){for(i=0;i<t[n];i++){for((l=o.pop()).children[l.index]=e[r];l.index>0;)l=o.pop();for(l.index++,o.push(l);o.length<=n;)o.push(s={children:[],index:0}),l.children[l.index]=s.children,l=s;r++}n+1<a&&(o.push(s={children:[],index:0}),l.children[l.index]=s.children,l=s)}return o[0].children}function f(t,e,n){return 64*((t.blocksPerLine+1)*e+n)}function d(e,n,i,r,o,a,s,l,c){i.precision,i.samplesPerLine,i.scanLines;var u=i.mcusPerLine,h=i.progressive,d=(i.maxH,i.maxV,n),p=0,m=0;function g(){if(m>0)return p>>--m&1;if(255==(p=e[n++])){var t=e[n++];if(t)throw"unexpected marker: "+(p<<8|t).toString(16)}return m=7,p>>>7}function y(t){for(var e,n=t;null!==(e=g());){if("number"==typeof(n=n[e]))return n;if("object"!=typeof n)throw"invalid huffman sequence"}return null}function v(t){for(var e=0;t>0;){var n=g();if(null===n)return;e=e<<1|n,t--}return e}function b(t){var e=v(t);return e>=1<<t-1?e:e+(-1<<t)+1}var _=0;var w,A=0;function x(t,e,n,i,r){var o=n%u;e(t,f(t,(n/u|0)*t.v+i,o*t.h+r))}function S(t,e,n){e(t,f(t,n/t.blocksPerLine|0,n%t.blocksPerLine))}var M,E,T,I,k,C,B=r.length;C=h?0===a?0===l?function(t,e){var n=y(t.huffmanTableDC),i=0===n?0:b(n)<<c;t.blockData[e]=t.pred+=i}:function(t,e){t.blockData[e]|=g()<<c}:0===l?function(e,n){if(_>0)_--;else for(var i=a,r=s;i<=r;){var o=y(e.huffmanTableAC),l=15&o,u=o>>4;if(0!==l){var h=t[i+=u];e.blockData[n+h]=b(l)*(1<<c),i++}else{if(u<15){_=v(u)+(1<<u)-1;break}i+=16}}}:function(e,n){for(var i=a,r=s,o=0;i<=r;){var l=t[i];switch(A){case 0:var u=y(e.huffmanTableAC),h=15&u;if(o=u>>4,0===h)o<15?(_=v(o)+(1<<o),A=4):(o=16,A=1);else{if(1!==h)throw"invalid ACn encoding";w=b(h),A=o?2:3}continue;case 1:case 2:e.blockData[n+l]?e.blockData[n+l]+=g()<<c:0==--o&&(A=2==A?3:0);break;case 3:e.blockData[n+l]?e.blockData[n+l]+=g()<<c:(e.blockData[n+l]=w<<c,A=0);break;case 4:e.blockData[n+l]&&(e.blockData[n+l]+=g()<<c)}i++}4===A&&0==--_&&(A=0)}:function(e,n){var i=y(e.huffmanTableDC),r=0===i?0:b(i);e.blockData[n]=e.pred+=r;for(var o=1;o<64;){var a=y(e.huffmanTableAC),s=15&a,l=a>>4;if(0!==s){var c=t[o+=l];e.blockData[n+c]=b(s),o++}else{if(l<15)break;o+=16}}};var R,P,L,D,N=0;for(P=1==B?r[0].blocksPerLine*r[0].blocksPerColumn:u*i.mcusPerColumn,o||(o=P);N<P;){for(E=0;E<B;E++)r[E].pred=0;if(_=0,1==B)for(M=r[0],k=0;k<o;k++)S(M,C,N),N++;else for(k=0;k<o;k++){for(E=0;E<B;E++)for(L=(M=r[E]).h,D=M.v,T=0;T<D;T++)for(I=0;I<L;I++)x(M,C,N,T,I);N++}if(m=0,(R=e[n]<<8|e[n+1])<=65280)throw"marker was not found";if(!(R>=65488&&R<=65495))break;n+=2}return n-d}function p(t,n,u){var h,f,d,p,m,g,y,v,b,_,w=t.quantizationTable;for(_=0;_<64;_++)u[_]=t.blockData[n+_]*w[_];for(_=0;_<8;++_){var A=8*_;0!==u[1+A]||0!==u[2+A]||0!==u[3+A]||0!==u[4+A]||0!==u[5+A]||0!==u[6+A]||0!==u[7+A]?(h=l*u[0+A]+128>>8,f=l*u[4+A]+128>>8,d=u[2+A],p=u[6+A],m=c*(u[1+A]-u[7+A])+128>>8,v=c*(u[1+A]+u[7+A])+128>>8,g=u[3+A]<<4,y=u[5+A]<<4,b=h-f+1>>1,h=h+f+1>>1,f=b,b=d*s+p*a+128>>8,d=d*a-p*s+128>>8,p=b,b=m-y+1>>1,m=m+y+1>>1,y=b,b=v+g+1>>1,g=v-g+1>>1,v=b,b=h-p+1>>1,h=h+p+1>>1,p=b,b=f-d+1>>1,f=f+d+1>>1,d=b,b=m*o+v*r+2048>>12,m=m*r-v*o+2048>>12,v=b,b=g*i+y*e+2048>>12,g=g*e-y*i+2048>>12,y=b,u[0+A]=h+v,u[7+A]=h-v,u[1+A]=f+y,u[6+A]=f-y,u[2+A]=d+g,u[5+A]=d-g,u[3+A]=p+m,u[4+A]=p-m):(b=l*u[0+A]+512>>10,u[0+A]=b,u[1+A]=b,u[2+A]=b,u[3+A]=b,u[4+A]=b,u[5+A]=b,u[6+A]=b,u[7+A]=b)}for(_=0;_<8;++_){var x=_;0!==u[8+x]||0!==u[16+x]||0!==u[24+x]||0!==u[32+x]||0!==u[40+x]||0!==u[48+x]||0!==u[56+x]?(h=l*u[0+x]+2048>>12,f=l*u[32+x]+2048>>12,d=u[16+x],p=u[48+x],m=c*(u[8+x]-u[56+x])+2048>>12,v=c*(u[8+x]+u[56+x])+2048>>12,g=u[24+x],y=u[40+x],b=h-f+1>>1,h=h+f+1>>1,f=b,b=d*s+p*a+2048>>12,d=d*a-p*s+2048>>12,p=b,b=m-y+1>>1,m=m+y+1>>1,y=b,b=v+g+1>>1,g=v-g+1>>1,v=b,b=h-p+1>>1,h=h+p+1>>1,p=b,b=f-d+1>>1,f=f+d+1>>1,d=b,b=m*o+v*r+2048>>12,m=m*r-v*o+2048>>12,v=b,b=g*i+y*e+2048>>12,g=g*e-y*i+2048>>12,y=b,u[0+x]=h+v,u[56+x]=h-v,u[8+x]=f+y,u[48+x]=f-y,u[16+x]=d+g,u[40+x]=d-g,u[24+x]=p+m,u[32+x]=p-m):(b=l*u[_+0]+8192>>14,u[0+x]=b,u[8+x]=b,u[16+x]=b,u[24+x]=b,u[32+x]=b,u[40+x]=b,u[48+x]=b,u[56+x]=b)}for(_=0;_<64;++_){var S=n+_,M=u[_];M=M<=-2056/t.bitConversion?0:M>=2024/t.bitConversion?255/t.bitConversion:M+2056/t.bitConversion>>4,t.blockData[S]=M}}function m(t,e){for(var n=e.blocksPerLine,i=e.blocksPerColumn,r=new Int32Array(64),o=0;o<i;o++)for(var a=0;a<n;a++){p(e,f(e,o,a),r)}return e.blockData}function g(t){return t<=0?0:t>=255?255:0|t}return u.prototype={load:function(t){var e=function(t){this.parse(t),this.onload&&this.onload()}.bind(this);if(t.indexOf("data:")>-1){for(var n=t.indexOf("base64,")+7,i=atob(t.substring(n)),r=new Uint8Array(i.length),o=i.length-1;o>=0;o--)r[o]=i.charCodeAt(o);e(i)}else{var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){var t=new Uint8Array(a.response);e(t)}.bind(this),a.send(null)}},parse:function(e){function i(){var t=e[l]<<8|e[l+1];return l+=2,t}function r(){var t=i(),n=e.subarray(l,l+t-2);return l+=n.length,n}function o(t){for(var e=Math.ceil(t.samplesPerLine/8/t.maxH),n=Math.ceil(t.scanLines/8/t.maxV),i=0;i<t.components.length;i++){Z=t.components[i];var r=Math.ceil(Math.ceil(t.samplesPerLine/8)*Z.h/t.maxH),o=Math.ceil(Math.ceil(t.scanLines/8)*Z.v/t.maxV),a=e*Z.h,s=64*(n*Z.v)*(a+1);Z.blockData=new Int16Array(s),Z.blocksPerLine=r,Z.blocksPerColumn=o}t.mcusPerLine=e,t.mcusPerColumn=n}var a,s,l=0,c=(e.length,null),u=null,f=[],p=[],g=[],y=i();if(65496!=y)throw"SOI not found";for(y=i();65497!=y;){var v,b;switch(y){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var _=r();65504===y&&74===_[0]&&70===_[1]&&73===_[2]&&70===_[3]&&0===_[4]&&(c={version:{major:_[5],minor:_[6]},densityUnits:_[7],xDensity:_[8]<<8|_[9],yDensity:_[10]<<8|_[11],thumbWidth:_[12],thumbHeight:_[13],thumbData:_.subarray(14,14+3*_[12]*_[13])}),65518===y&&65===_[0]&&100===_[1]&&111===_[2]&&98===_[3]&&101===_[4]&&0===_[5]&&(u={version:_[6],flags0:_[7]<<8|_[8],flags1:_[9]<<8|_[10],transformCode:_[11]});break;case 65499:for(var w=i()+l-2;l<w;){var A=e[l++],x=new Int32Array(64);if(A>>4==0)for(v=0;v<64;v++){x[t[v]]=e[l++]}else{if(A>>4!=1)throw"DQT: invalid table spec";for(v=0;v<64;v++){x[t[v]]=i()}}f[15&A]=x}break;case 65472:case 65473:case 65474:if(a)throw"Only single frame JPEGs supported";i(),(a={}).extended=65473===y,a.progressive=65474===y,a.precision=e[l++],a.scanLines=i(),a.samplesPerLine=i(),a.components=[],a.componentIds={};var S,M=e[l++],E=0,T=0;for(W=0;W<M;W++){S=e[l];var I=e[l+1]>>4,k=15&e[l+1];E<I&&(E=I),T<k&&(T=k);var C=e[l+2];b=a.components.push({h:I,v:k,quantizationTable:f[C],quantizationTableId:C,bitConversion:255/((1<<a.precision)-1)}),a.componentIds[S]=b-1,l+=3}a.maxH=E,a.maxV=T,o(a);break;case 65476:var B=i();for(W=2;W<B;){var R=e[l++],P=new Uint8Array(16),L=0;for(v=0;v<16;v++,l++)L+=P[v]=e[l];var D=new Uint8Array(L);for(v=0;v<L;v++,l++)D[v]=e[l];W+=17+L,(R>>4==0?g:p)[15&R]=h(P,D)}break;case 65501:i(),s=i();break;case 65498:i();var N=e[l++],O=[];for(W=0;W<N;W++){var F=a.componentIds[e[l++]];Z=a.components[F];var G=e[l++];Z.huffmanTableDC=g[G>>4],Z.huffmanTableAC=p[15&G],O.push(Z)}var z=e[l++],U=e[l++],H=e[l++],V=d(e,l,a,O,s,z,U,H>>4,15&H);l+=V;break;default:if(255==e[l-3]&&e[l-2]>=192&&e[l-2]<=254){l-=3;break}throw"unknown JPEG marker "+y.toString(16)}y=i()}switch(this.width=a.samplesPerLine,this.height=a.scanLines,this.jfif=c,this.adobe=u,this.components=[],a.components.length){case 1:this.colorspace=n.Grayscale;break;case 3:this.adobe?this.colorspace=n.AdobeRGB:this.colorspace=n.RGB;break;case 4:this.colorspace=n.CYMK;break;default:this.colorspace=n.Unknown}for(var W=0;W<a.components.length;W++){var Z;(Z=a.components[W]).quantizationTable||null===Z.quantizationTableId||(Z.quantizationTable=f[Z.quantizationTableId]),this.components.push({output:m(0,Z),scaleX:Z.h/a.maxH,scaleY:Z.v/a.maxV,blocksPerLine:Z.blocksPerLine,blocksPerColumn:Z.blocksPerColumn,bitConversion:Z.bitConversion})}},getData16:function(t,e){if(1!==this.components.length)throw"Unsupported color mode";var n,i,r,o,a,s,l=this.width/t,c=this.height/e,u=0,h=this.components.length,d=new Uint16Array(t*e*h),p=new Uint16Array((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn*8);for(s=0;s<h;s++){for(var m,g,y,v=(n=this.components[s]).blocksPerLine,b=n.blocksPerColumn,_=v<<3,w=0,A=0;A<b;A++)for(var x=A<<3,S=0;S<v;S++){var M=f(n,A,S),E=(u=0,S<<3);for(m=0;m<8;m++){w=(x+m)*_;for(g=0;g<8;g++)p[w+E+g]=n.output[M+u++]}}for(i=n.scaleX*l,r=n.scaleY*c,u=s,a=0;a<e;a++)for(o=0;o<t;o++)y=(0|a*r)*_+(0|o*i),d[u]=p[y],u+=h}return d},getData:function(t,e){var n,i,r,o,a,s,l,c,u,h,d,p,m,y,v,b=this.width/t,_=this.height/e,w=0,A=this.components.length,x=t*e*A,S=new Uint8Array(x),M=new Uint8Array((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn*8);for(s=0;s<A;s++){for(var E,T,I,k=(n=this.components[s]).blocksPerLine,C=n.blocksPerColumn,B=k<<3,R=0,P=0;P<C;P++)for(var L=P<<3,D=0;D<k;D++){var N=f(n,P,D),O=(w=0,D<<3);for(E=0;E<8;E++){R=(L+E)*B;for(T=0;T<8;T++)M[R+O+T]=n.output[N+w++]*n.bitConversion}}for(i=n.scaleX*b,r=n.scaleY*_,w=s,a=0;a<e;a++)for(o=0;o<t;o++)I=(0|a*r)*B+(0|o*i),S[w]=M[I],w+=A}switch(A){case 1:case 2:break;case 3:if(v=!0,this.adobe&&this.adobe.transformCode?v=!0:void 0!==this.colorTransform&&(v=!!this.colorTransform),v)for(s=0;s<x;s+=A)l=S[s],c=S[s+1],p=g(l-179.456+1.402*(u=S[s+2])),m=g(l+135.459-.344*c-.714*u),y=g(l-226.816+1.772*c),S[s]=p,S[s+1]=m,S[s+2]=y;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";if(v=!1,this.adobe&&this.adobe.transformCode?v=!0:void 0!==this.colorTransform&&(v=!!this.colorTransform),v)for(s=0;s<x;s+=A)l=S[s],c=S[s+1],h=g(434.456-l-1.402*(u=S[s+2])),d=g(119.541-l+.344*c+.714*u),l=g(481.816-l-1.772*c),S[s]=h,S[s+1]=d,S[s+2]=l;break;default:throw"Unsupported color mode"}return S}},u}();"undefined"!==typeof t&&t.exports&&(t.exports=i)},function(t,e,n){"use strict";
/*! image-JPEG2000 - v0.3.1 - 2015-08-26 | https://github.com/OHIF/image-JPEG2000 */var i=function(){var t={LL:0,LH:1,HL:1,HH:2};function e(){this.failOnCorruptedImage=!1}function n(t,e){t.x0=Math.ceil(e.XOsiz/t.XRsiz),t.x1=Math.ceil(e.Xsiz/t.XRsiz),t.y0=Math.ceil(e.YOsiz/t.YRsiz),t.y1=Math.ceil(e.Ysiz/t.YRsiz),t.width=t.x1-t.x0,t.height=t.y1-t.y0}function i(t,e){for(var n,i=t.SIZ,r=[],o=Math.ceil((i.Xsiz-i.XTOsiz)/i.XTsiz),a=Math.ceil((i.Ysiz-i.YTOsiz)/i.YTsiz),s=0;s<a;s++)for(var l=0;l<o;l++)(n={}).tx0=Math.max(i.XTOsiz+l*i.XTsiz,i.XOsiz),n.ty0=Math.max(i.YTOsiz+s*i.YTsiz,i.YOsiz),n.tx1=Math.min(i.XTOsiz+(l+1)*i.XTsiz,i.Xsiz),n.ty1=Math.min(i.YTOsiz+(s+1)*i.YTsiz,i.Ysiz),n.width=n.tx1-n.tx0,n.height=n.ty1-n.ty0,n.components=[],r.push(n);t.tiles=r;for(var c=0,u=i.Csiz;c<u;c++)for(var h=e[c],f=0,d=r.length;f<d;f++){var p={};n=r[f],p.tcx0=Math.ceil(n.tx0/h.XRsiz),p.tcy0=Math.ceil(n.ty0/h.YRsiz),p.tcx1=Math.ceil(n.tx1/h.XRsiz),p.tcy1=Math.ceil(n.ty1/h.YRsiz),p.width=p.tcx1-p.tcx0,p.height=p.tcy1-p.tcy0,n.components[c]=p}}function o(t,e,n){var i=e.codingStyleParameters,r={};return i.entropyCoderWithCustomPrecincts?(r.PPx=i.precinctsSizes[n].PPx,r.PPy=i.precinctsSizes[n].PPy):(r.PPx=15,r.PPy=15),r.xcb_=n>0?Math.min(i.xcb,r.PPx-1):Math.min(i.xcb,r.PPx),r.ycb_=n>0?Math.min(i.ycb,r.PPy-1):Math.min(i.ycb,r.PPy),r}function l(t,e,n){var i=1<<n.PPx,r=1<<n.PPy,o=0===e.resLevel,a=1<<n.PPx+(o?0:-1),s=1<<n.PPy+(o?0:-1),l=e.trx1>e.trx0?Math.ceil(e.trx1/i)-Math.floor(e.trx0/i):0,c=e.try1>e.try0?Math.ceil(e.try1/r)-Math.floor(e.try0/r):0,u=l*c;e.precinctParameters={precinctWidth:i,precinctHeight:r,numprecinctswide:l,numprecinctshigh:c,numprecincts:u,precinctWidthInSubband:a,precinctHeightInSubband:s}}function c(t,e,n){var i,r,o,a,s=n.xcb_,l=n.ycb_,c=1<<s,u=1<<l,h=e.tbx0>>s,f=e.tby0>>l,d=e.tbx1+c-1>>s,p=e.tby1+u-1>>l,m=e.resolution.precinctParameters,g=[],y=[];for(r=f;r<p;r++)for(i=h;i<d;i++){if((o={cbx:i,cby:r,tbx0:c*i,tby0:u*r,tbx1:c*(i+1),tby1:u*(r+1)}).tbx0_=Math.max(e.tbx0,o.tbx0),o.tby0_=Math.max(e.tby0,o.tby0),o.tbx1_=Math.min(e.tbx1,o.tbx1),o.tby1_=Math.min(e.tby1,o.tby1),a=Math.floor((o.tbx0_-e.tbx0)/m.precinctWidthInSubband)+Math.floor((o.tby0_-e.tby0)/m.precinctHeightInSubband)*m.numprecinctswide,o.precinctNumber=a,o.subbandType=e.type,o.Lblock=3,!(o.tbx1_<=o.tbx0_||o.tby1_<=o.tby0_)){g.push(o);var v=y[a];void 0!==v?(i<v.cbxMin?v.cbxMin=i:i>v.cbxMax&&(v.cbxMax=i),r<v.cbyMin?v.cbxMin=r:r>v.cbyMax&&(v.cbyMax=r)):y[a]=v={cbxMin:i,cbyMin:r,cbxMax:i,cbyMax:r},o.precinct=v}}e.codeblockParameters={codeblockWidth:s,codeblockHeight:l,numcodeblockwide:d-h+1,numcodeblockhigh:p-f+1},e.codeblocks=g,e.precincts=y}function u(t,e,n){for(var i=[],r=t.subbands,o=0,a=r.length;o<a;o++)for(var s=r[o].codeblocks,l=0,c=s.length;l<c;l++){var u=s[l];u.precinctNumber===e&&i.push(u)}return{layerNumber:n,codeblocks:i}}function h(t,e,n,i,r){var o=t*i.minWidth,a=e*i.minHeight;if(o%n.width!=0||a%n.height!=0)return null;var s=a/n.width*r.precinctParameters.numprecinctswide;return o/n.height+s}function f(t){for(var e=t.components.length,n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=0,o=0,a=new Array(e),s=0;s<e;s++){for(var l=t.components[s],c=l.codingStyleParameters.decompositionLevelsCount,u=new Array(c+1),h=Number.MAX_VALUE,f=Number.MAX_VALUE,d=0,p=0,m=1,g=c;g>=0;--g){var y=l.resolutions[g],v=m*y.precinctParameters.precinctWidth,b=m*y.precinctParameters.precinctHeight;h=Math.min(h,v),f=Math.min(f,b),d=Math.max(d,y.precinctParameters.numprecinctswide),p=Math.max(p,y.precinctParameters.numprecinctshigh),u[g]={width:v,height:b},m<<=1}n=Math.min(n,h),i=Math.min(i,f),r=Math.max(r,d),o=Math.max(o,p),a[s]={resolutions:u,minWidth:h,minHeight:f,maxNumWide:d,maxNumHigh:p}}return{components:a,minWidth:n,minHeight:i,maxNumWide:r,maxNumHigh:o}}function d(t){for(var e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=e.Csiz,a=0;a<r;a++){for(var s=i.components[a],d=s.codingStyleParameters.decompositionLevelsCount,p=[],m=[],g=0;g<=d;g++){var y,v=o(0,s,g),b={},_=1<<d-g;if(b.trx0=Math.ceil(s.tcx0/_),b.try0=Math.ceil(s.tcy0/_),b.trx1=Math.ceil(s.tcx1/_),b.try1=Math.ceil(s.tcy1/_),b.resLevel=g,l(0,b,v),p.push(b),0===g)(y={}).type="LL",y.tbx0=Math.ceil(s.tcx0/_),y.tby0=Math.ceil(s.tcy0/_),y.tbx1=Math.ceil(s.tcx1/_),y.tby1=Math.ceil(s.tcy1/_),y.resolution=b,c(0,y,v),m.push(y),b.subbands=[y];else{var w=1<<d-g+1,A=[];(y={}).type="HL",y.tbx0=Math.ceil(s.tcx0/w-.5),y.tby0=Math.ceil(s.tcy0/w),y.tbx1=Math.ceil(s.tcx1/w-.5),y.tby1=Math.ceil(s.tcy1/w),y.resolution=b,c(0,y,v),m.push(y),A.push(y),(y={}).type="LH",y.tbx0=Math.ceil(s.tcx0/w),y.tby0=Math.ceil(s.tcy0/w-.5),y.tbx1=Math.ceil(s.tcx1/w),y.tby1=Math.ceil(s.tcy1/w-.5),y.resolution=b,c(0,y,v),m.push(y),A.push(y),(y={}).type="HH",y.tbx0=Math.ceil(s.tcx0/w-.5),y.tby0=Math.ceil(s.tcy0/w-.5),y.tbx1=Math.ceil(s.tcx1/w-.5),y.tby1=Math.ceil(s.tcy1/w-.5),y.resolution=b,c(0,y,v),m.push(y),A.push(y),b.subbands=A}}s.resolutions=p,s.subbands=m}var x=i.codingStyleDefaultParameters.progressionOrder;switch(x){case 0:i.packetsIterator=new function(t){for(var e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=0,s=0;s<o;s++)a=Math.max(a,i.components[s].codingStyleParameters.decompositionLevelsCount);var l=0,c=0,h=0,f=0;this.nextPacket=function(){for(;l<r;l++){for(;c<=a;c++){for(;h<o;h++){var t=i.components[h];if(!(c>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[c],n=e.precinctParameters.numprecincts;f<n;){var s=u(e,f,l);return f++,s}f=0}}h=0}c=0}}}(t);break;case 1:i.packetsIterator=new function(t){for(var e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=0,s=0;s<o;s++)a=Math.max(a,i.components[s].codingStyleParameters.decompositionLevelsCount);var l=0,c=0,h=0,f=0;this.nextPacket=function(){for(;l<=a;l++){for(;c<r;c++){for(;h<o;h++){var t=i.components[h];if(!(l>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[l],n=e.precinctParameters.numprecincts;f<n;){var s=u(e,f,c);return f++,s}f=0}}h=0}c=0}}}(t);break;case 2:i.packetsIterator=new function(t){var e,n,i,r,o=t.SIZ,a=t.currentTile.index,s=t.tiles[a],l=s.codingStyleDefaultParameters.layersCount,c=o.Csiz,h=0;for(i=0;i<c;i++){var f=s.components[i];h=Math.max(h,f.codingStyleParameters.decompositionLevelsCount)}var d=new Int32Array(h+1);for(n=0;n<=h;++n){var p=0;for(i=0;i<c;++i){var m=s.components[i].resolutions;n<m.length&&(p=Math.max(p,m[n].precinctParameters.numprecincts))}d[n]=p}e=0,n=0,i=0,r=0,this.nextPacket=function(){for(;n<=h;n++){for(;r<d[n];r++){for(;i<c;i++){var t=s.components[i];if(!(n>t.codingStyleParameters.decompositionLevelsCount)){var o=t.resolutions[n],a=o.precinctParameters.numprecincts;if(!(r>=a)){for(;e<l;){var f=u(o,r,e);return e++,f}e=0}}}i=0}r=0}}}(t);break;case 3:i.packetsIterator=new function(t){var e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=f(i),s=a,l=0,c=0,d=0,p=0,m=0;this.nextPacket=function(){for(;m<s.maxNumHigh;m++){for(;p<s.maxNumWide;p++){for(;d<o;d++){for(var t=i.components[d],e=t.codingStyleParameters.decompositionLevelsCount;c<=e;c++){var n=t.resolutions[c],f=a.components[d].resolutions[c],g=h(p,m,f,s,n);if(null!==g){for(;l<r;){var y=u(n,g,l);return l++,y}l=0}}c=0}d=0}p=0}}}(t);break;case 4:i.packetsIterator=new function(t){var e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=f(i),s=0,l=0,c=0,d=0,p=0;this.nextPacket=function(){for(;c<o;++c){for(var t=i.components[c],e=a.components[c],n=t.codingStyleParameters.decompositionLevelsCount;p<e.maxNumHigh;p++){for(;d<e.maxNumWide;d++){for(;l<=n;l++){var f=t.resolutions[l],m=e.resolutions[l],g=h(d,p,m,e,f);if(null!==g){for(;s<r;){var y=u(f,g,s);return s++,y}s=0}}l=0}d=0}p=0}}}(t);break;default:throw new Error("JPX Error: Unsupported progression order "+x)}}function y(t,e,n,i){var r,o=0,a=0,s=!1;function l(t){for(;a<t;){if(n+o>=e.length)throw new Error("Unexpected EOF");var i=e[n+o];o++,s?(r=r<<7|i,a+=7,s=!1):(r=r<<8|i,a+=8),255===i&&(s=!0)}return r>>>(a-=t)&(1<<t)-1}function c(t){return 255===e[n+o-1]&&e[n+o]===t?(u(1),!0):255===e[n+o]&&e[n+o+1]===t&&(u(2),!0)}function u(t){o+=t}function h(){a=0,s&&(o++,s=!1)}function f(){if(0===l(1))return 1;if(0===l(1))return 2;var t=l(2);return t<3?t+3:(t=l(5))<31?t+6:(t=l(7))+37}for(var d=t.currentTile.index,m=t.tiles[d],g=t.COD.sopMarkerUsed,y=t.COD.ephMarkerUsed,v=m.packetsIterator;o<i;)try{h(),g&&c(145)&&u(4);var b=v.nextPacket();if(void 0===b)return;if(!l(1))continue;for(var _,x=b.layerNumber,S=[],M=0,E=b.codeblocks.length;M<E;M++){var T=(_=b.codeblocks[M]).precinct,I=_.cbx-T.cbxMin,k=_.cby-T.cbyMin,C=!1,B=!1;if(void 0!==_.included)C=!!l(1);else{var R,P;if(void 0!==(T=_.precinct).inclusionTree)R=T.inclusionTree;else{var L=T.cbxMax-T.cbxMin+1,D=T.cbyMax-T.cbyMin+1;R=new A(L,D),P=new w(L,D),T.inclusionTree=R,T.zeroBitPlanesTree=P}for(R.reset(I,k,x);;){if(o>=e.length)return;if(R.isAboveThreshold())break;if(R.isKnown())R.nextLevel();else if(l(1)){if(R.setKnown(),R.isLeaf()){_.included=!0,C=B=!0;break}R.nextLevel()}else R.incrementValue()}}if(C){if(B){for((P=T.zeroBitPlanesTree).reset(I,k);;){if(o>=e.length)return;if(l(1)){if(!P.nextLevel())break}else P.incrementValue()}_.zeroBitPlanes=P.value}for(var N=f();l(1);)_.Lblock++;var O=p(N),F=l((N<1<<O?O-1:O)+_.Lblock);S.push({codeblock:_,codingpasses:N,dataLength:F})}}for(h(),y&&c(146);S.length>0;){var G=S.shift();void 0===(_=G.codeblock).data&&(_.data=[]),_.data.push({data:e,start:n+o,end:n+o+G.dataLength,codingpasses:G.codingpasses}),o+=G.dataLength}}catch(t){return}return o}function v(t,e,n,i,o,a,s,l){for(var c=i.tbx0,u=i.tby0,h=i.tbx1-i.tbx0,f=i.codeblocks,d="H"===i.type.charAt(0)?1:0,p="H"===i.type.charAt(1)?e:0,m=0,g=f.length;m<g;++m){var y=f[m],v=y.tbx1_-y.tbx0_,b=y.tby1_-y.tby0_;if(0!==v&&0!==b&&void 0!==y.data){var _,w;_=new x(v,b,y.subbandType,y.zeroBitPlanes,a),w=2;var A,S,M,E=y.data,T=0,I=0;for(A=0,S=E.length;A<S;A++)T+=(M=E[A]).end-M.start,I+=M.codingpasses;var k=new Int16Array(T),C=0;for(A=0,S=E.length;A<S;A++){var B=(M=E[A]).data.subarray(M.start,M.end);k.set(B,C),C+=B.length}var R=new r(k,0,T);for(_.setDecoder(R),A=0;A<I;A++){switch(w){case 0:_.runSignificancePropogationPass();break;case 1:_.runMagnitudeRefinementPass();break;case 2:_.runCleanupPass(),l&&_.checkSegmentationSymbol()}w=(w+1)%3}var P,L,D,N=y.tbx0_-c+(y.tby0_-u)*h,O=_.coefficentsSign,F=_.coefficentsMagnitude,G=_.bitsDecoded,z=s?0:.5;C=0;var U="LL"!==i.type;for(A=0;A<b;A++){var H=2*(N/h|0)*(e-h)+d+p;for(P=0;P<v;P++){if(0!==(L=F[C])){L=(L+z)*o,0!==O[C]&&(L=-L),D=G[C];var V=U?H+(N<<1):N;t[V]=s&&D>=a?L:L*(1<<a-D)}N++,C++}N+=h-v}}}}function b(e,n,i){for(var r=n.components[i],o=r.codingStyleParameters,a=r.quantizationParameters,s=o.decompositionLevelsCount,l=a.SPqcds,c=a.scalarExpounded,u=a.guardBits,h=o.segmentationSymbolUsed,f=e.components[i].precision,d=o.reversibleTransformation,p=d?new E:new M,m=[],g=0,y=0;y<=s;y++){for(var b=r.resolutions[y],_=b.trx1-b.trx0,w=b.try1-b.try0,A=new Float32Array(_*w),x=0,S=b.subbands.length;x<S;x++){var T,I;c?(T=l[g].mu,I=l[g].epsilon,g++):(T=l[0].mu,I=l[0].epsilon+(y>0?1-y:0));var k=b.subbands[x],C=t[k.type];v(A,_,0,k,d?1:Math.pow(2,f+C-I)*(1+T/2048),u+I-1,d,h)}m.push({width:_,height:w,items:A})}var B=p.calculate(m,r.tcx0,r.tcy0);return{left:r.tcx0,top:r.tcy0,width:B.width,height:B.height,items:B.items}}function _(t,e){for(var n=t.SIZ.Csiz,i=t.tiles[e],r=0;r<n;r++){var o=i.components[r],a=void 0!==t.currentTile.QCC[r]?t.currentTile.QCC[r]:t.currentTile.QCD;o.quantizationParameters=a;var s=void 0!==t.currentTile.COC[r]?t.currentTile.COC[r]:t.currentTile.COD;o.codingStyleParameters=s}i.codingStyleDefaultParameters=t.currentTile.COD}e.prototype={parse:function(t){if(65359!==m(t,0))for(var e=0,n=t.length;e<n;){var i=8,r=g(t,e),o=g(t,e+4);if(e+=i,1===r&&(r=4294967296*g(t,e)+g(t,e+4),e+=8,i+=8),0===r&&(r=n-e+i),r<i)throw new Error("JPX Error: Invalid box field size");var l=r-i,c=!0;switch(o){case 1785737832:c=!1;break;case 1668246642:var u=t[e];t[e+1],t[e+2];if(1===u){var h=g(t,e+3);switch(h){case 16:case 17:case 18:break;default:s("Unknown colorspace "+h)}}else 2===u&&a("ICC profile not supported");break;case 1785737827:this.parseCodestream(t,e,e+l);break;case 1783636e3:218793738!==g(t,e)&&s("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:s("Unsupported header type "+o+" ("+String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o)+")")}c&&(e+=l)}else this.parseCodestream(t,0,t.length)},parseImageProperties:function(t){for(var e=t.getByte();e>=0;){if(65361===(e<<8|(e=t.getByte()))){t.skip(4);var n=t.getInt32()>>>0,i=t.getInt32()>>>0,r=t.getInt32()>>>0,o=t.getInt32()>>>0;t.skip(16);var a=t.getUint16();return this.width=n-r,this.height=i-o,this.componentsCount=a,void(this.bitsPerComponent=8)}}throw new Error("JPX Error: No size marker found in JPX stream")},parseCodestream:function(t,e,r){var o={};try{for(var a=!1,l=e;l+1<r;){var c=m(t,l);l+=2;var u,h,f,p,v,w,A=0;switch(c){case 65359:o.mainHeader=!0;break;case 65497:break;case 65361:A=m(t,l);var x={};x.Xsiz=g(t,l+4),x.Ysiz=g(t,l+8),x.XOsiz=g(t,l+12),x.YOsiz=g(t,l+16),x.XTsiz=g(t,l+20),x.YTsiz=g(t,l+24),x.XTOsiz=g(t,l+28),x.YTOsiz=g(t,l+32);var S=m(t,l+36);x.Csiz=S;var M=[];u=l+38;for(var E=0;E<S;E++){var T={precision:1+(127&t[u]),isSigned:!!(128&t[u]),XRsiz:t[u+1],YRsiz:t[u+1]};n(T,x),M.push(T)}o.SIZ=x,o.components=M,i(o,M),o.QCC=[],o.COC=[];break;case 65372:A=m(t,l);var I={};switch(u=l+2,31&(h=t[u++])){case 0:p=8,v=!0;break;case 1:p=16,v=!1;break;case 2:p=16,v=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+h)}for(I.noQuantization=8===p,I.scalarExpounded=v,I.guardBits=h>>5,f=[];u<A+l;){var k={};8===p?(k.epsilon=t[u++]>>3,k.mu=0):(k.epsilon=t[u]>>3,k.mu=(7&t[u])<<8|t[u+1],u+=2),f.push(k)}I.SPqcds=f,o.mainHeader?o.QCD=I:(o.currentTile.QCD=I,o.currentTile.QCC=[]);break;case 65373:A=m(t,l);var C,B={};switch(u=l+2,o.SIZ.Csiz<257?C=t[u++]:(C=m(t,u),u+=2),31&(h=t[u++])){case 0:p=8,v=!0;break;case 1:p=16,v=!1;break;case 2:p=16,v=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+h)}for(B.noQuantization=8===p,B.scalarExpounded=v,B.guardBits=h>>5,f=[];u<A+l;)k={},8===p?(k.epsilon=t[u++]>>3,k.mu=0):(k.epsilon=t[u]>>3,k.mu=(7&t[u])<<8|t[u+1],u+=2),f.push(k);B.SPqcds=f,o.mainHeader?o.QCC[C]=B:o.currentTile.QCC[C]=B;break;case 65362:A=m(t,l);var R={};u=l+2;var P=t[u++];R.entropyCoderWithCustomPrecincts=!!(1&P),R.sopMarkerUsed=!!(2&P),R.ephMarkerUsed=!!(4&P),R.progressionOrder=t[u++],R.layersCount=m(t,u),u+=2,R.multipleComponentTransform=t[u++],R.decompositionLevelsCount=t[u++],R.xcb=2+(15&t[u++]),R.ycb=2+(15&t[u++]);var L=t[u++];if(R.selectiveArithmeticCodingBypass=!!(1&L),R.resetContextProbabilities=!!(2&L),R.terminationOnEachCodingPass=!!(4&L),R.verticalyStripe=!!(8&L),R.predictableTermination=!!(16&L),R.segmentationSymbolUsed=!!(32&L),R.reversibleTransformation=t[u++],R.entropyCoderWithCustomPrecincts){for(var D=[];u<A+l;){var N=t[u++];D.push({PPx:15&N,PPy:N>>4})}R.precinctsSizes=D}var O=[];if(R.selectiveArithmeticCodingBypass&&O.push("selectiveArithmeticCodingBypass"),R.resetContextProbabilities&&O.push("resetContextProbabilities"),R.terminationOnEachCodingPass&&O.push("terminationOnEachCodingPass"),R.verticalyStripe&&O.push("verticalyStripe"),R.predictableTermination&&O.push("predictableTermination"),O.length>0)throw a=!0,new Error("JPX Error: Unsupported COD options ("+O.join(", ")+")");o.mainHeader?o.COD=R:(o.currentTile.COD=R,o.currentTile.COC=[]);break;case 65424:A=m(t,l),(w={}).index=m(t,l+2),w.length=g(t,l+4),w.dataEnd=w.length+l-2,w.partIndex=t[l+8],w.partsCount=t[l+9],o.mainHeader=!1,0===w.partIndex&&(w.COD=o.COD,w.COC=o.COC.slice(0),w.QCD=o.QCD,w.QCC=o.QCC.slice(0)),o.currentTile=w;break;case 65427:0===(w=o.currentTile).partIndex&&(_(o,w.index),d(o)),y(o,t,l,A=w.dataEnd-l);break;case 65365:case 65367:case 65368:case 65380:A=m(t,l);break;case 65363:throw new Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("JPX Error: Unknown codestream code: "+c.toString(16))}l+=A}}catch(t){if(a||this.failOnCorruptedImage)throw t;s("Trying to recover from "+t.message)}this.tiles=function(t){for(var e=t.SIZ,n=t.components,i=e.Csiz,r=[],o=0,a=t.tiles.length;o<a;o++){var s,l=t.tiles[o],c=[];for(s=0;s<i;s++)c[s]=b(t,l,s);var u=c[0],h=n[0].isSigned;if(h)var f=new Int16Array(u.items.length*i);else var f=new Uint16Array(u.items.length*i);var d,p,m,g,y,v,_,w,A,x,S,M,E,T,I,k={left:u.left,top:u.top,width:u.width,height:u.height,items:f},C=0;if(l.codingStyleDefaultParameters.multipleComponentTransform){var B=4===i,R=c[0].items,P=c[1].items,L=c[2].items,D=B?c[3].items:null;d=n[0].precision-8,p=.5+(128<<d),g=-(y=.5*(m=255*(1<<d)));var N=l.components[0],O=i-3;if(_=R.length,N.codingStyleParameters.reversibleTransformation)for(v=0;v<_;v++,C+=O)w=R[v]+p,A=P[v],x=L[v],S=(M=w-(x+A>>2))+x,E=M+A,f[C++]=S<=0?0:S>=m?255:S>>d,f[C++]=M<=0?0:M>=m?255:M>>d,f[C++]=E<=0?0:E>=m?255:E>>d;else for(v=0;v<_;v++,C+=O)w=R[v]+p,A=P[v],x=L[v],S=w+1.402*x,M=w-.34413*A-.71414*x,E=w+1.772*A,f[C++]=S<=0?0:S>=m?255:S>>d,f[C++]=M<=0?0:M>=m?255:M>>d,f[C++]=E<=0?0:E>=m?255:E>>d;if(B)for(v=0,C=3;v<_;v++,C+=4)T=D[v],f[C]=T<=g?0:T>=y?255:T+p>>d}else for(s=0;s<i;s++)if(8===n[s].precision){var F=c[s].items;for(d=n[s].precision-8,p=.5+(128<<d),g=-(m=127.5*(1<<d)),C=s,v=0,_=F.length;v<_;v++)I=F[v],f[C]=I<=g?0:I>=m?255:I+p>>d,C+=i}else{var h=n[s].isSigned,F=c[s].items;if(h)for(C=s,v=0,_=F.length;v<_;v++)f[C]=F[v],C+=i;else{d=n[s].precision-8,p=.5+(128<<d);var G=Math.pow(2,n[s].precision)-1;for(C=s,v=0,_=F.length;v<_;v++)I=F[v],f[C]=Math.max(Math.min(I+p,G),0),C+=i}}r.push(k)}return r}(o),this.width=o.SIZ.Xsiz-o.SIZ.XOsiz,this.height=o.SIZ.Ysiz-o.SIZ.YOsiz,this.componentsCount=o.SIZ.Csiz}};var w=function(){function t(t,e){var n=p(Math.max(t,e))+1;this.levels=[];for(var i=0;i<n;i++){var r={width:t,height:e,items:[]};this.levels.push(r),t=Math.ceil(t/2),e=Math.ceil(e/2)}}return t.prototype={reset:function(t,e){for(var n,i=0,r=0;i<this.levels.length;){var o=t+e*(n=this.levels[i]).width;if(void 0!==n.items[o]){r=n.items[o];break}n.index=o,t>>=1,e>>=1,i++}i--,(n=this.levels[i]).items[n.index]=r,this.currentLevel=i,delete this.value},incrementValue:function(){var t=this.levels[this.currentLevel];t.items[t.index]++},nextLevel:function(){var t=this.currentLevel,e=this.levels[t],n=e.items[e.index];return--t<0?(this.value=n,!1):(this.currentLevel=t,(e=this.levels[t]).items[e.index]=n,!0)}},t}(),A=function(){function t(t,e){var n=p(Math.max(t,e))+1;this.levels=[];for(var i=0;i<n;i++){for(var r=new Uint8Array(t*e),o=new Uint8Array(t*e),a=0,s=r.length;a<s;a++)r[a]=0,o[a]=0;var l={width:t,height:e,items:r,status:o};this.levels.push(l),t=Math.ceil(t/2),e=Math.ceil(e/2)}}return t.prototype={reset:function(t,e,n){this.currentStopValue=n;for(var i=0;i<this.levels.length;){var r=this.levels[i],o=t+e*r.width;r.index=o,t>>=1,e>>=1,i++}this.currentLevel=this.levels.length-1,this.minValue=this.levels[this.currentLevel].items[0]},incrementValue:function(){var t=this.levels[this.currentLevel];t.items[t.index]=t.items[t.index]+1,t.items[t.index]>this.minValue&&(this.minValue=t.items[t.index])},nextLevel:function(){var t=this.currentLevel;if(--t<0)return!1;this.currentLevel=t;var e=this.levels[t];return e.items[e.index]<this.minValue?e.items[e.index]=this.minValue:e.items[e.index]>this.minValue&&(this.minValue=e.items[e.index]),!0},isLeaf:function(){return 0===this.currentLevel},isAboveThreshold:function(){var t=this.currentLevel,e=this.levels[t];return e.items[e.index]>this.currentStopValue},isKnown:function(){var t=this.currentLevel,e=this.levels[t];return e.status[e.index]>0},setKnown:function(){var t=this.currentLevel,e=this.levels[t];e.status[e.index]=1}},t}(),x=function(){var t=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),e=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),n=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function i(i,r,o,a,s){this.width=i,this.height=r,this.contextLabelTable="HH"===o?n:"HL"===o?e:t;var l=i*r;this.neighborsSignificance=new Uint8Array(l),this.coefficentsSign=new Uint8Array(l),this.coefficentsMagnitude=s>14?new Uint32Array(l):s>6?new Uint16Array(l):new Uint8Array(l),this.processingFlags=new Uint8Array(l);var c=new Uint8Array(l);if(0!==a)for(var u=0;u<l;u++)c[u]=a;this.bitsDecoded=c,this.reset()}return i.prototype={setDecoder:function(t){this.decoder=t},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(t,e,n){var i,r=this.neighborsSignificance,o=this.width,a=this.height,s=e>0,l=e+1<o;t>0&&(i=n-o,s&&(r[i-1]+=16),l&&(r[i+1]+=16),r[i]+=4),t+1<a&&(i=n+o,s&&(r[i-1]+=16),l&&(r[i+1]+=16),r[i]+=4),s&&(r[n-1]+=1),l&&(r[n+1]+=1),r[n]|=128},runSignificancePropogationPass:function(){for(var t=this.decoder,e=this.width,n=this.height,i=this.coefficentsMagnitude,r=this.coefficentsSign,o=this.neighborsSignificance,a=this.processingFlags,s=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded,u=0;u<n;u+=4)for(var h=0;h<e;h++)for(var f=u*e+h,d=0;d<4;d++,f+=e){var p=u+d;if(p>=n)break;if(a[f]&=-2,!i[f]&&o[f]){var m=l[o[f]];if(t.readBit(s,m)){var g=this.decodeSignBit(p,h,f);r[f]=g,i[f]=1,this.setNeighborsSignificance(p,h,f),a[f]|=2}c[f]++,a[f]|=1}}},decodeSignBit:function(t,e,n){var i,r,o,a,s,l,c=this.width,u=this.height,h=this.coefficentsMagnitude,f=this.coefficentsSign;a=e>0&&0!==h[n-1],e+1<c&&0!==h[n+1]?(o=f[n+1],i=a?1-o-(r=f[n-1]):1-o-o):i=a?1-(r=f[n-1])-r:0;var d=3*i;return a=t>0&&0!==h[n-c],t+1<u&&0!==h[n+c]?(o=f[n+c],i=a?1-o-(r=f[n-c])+d:1-o-o+d):i=a?1-(r=f[n-c])-r+d:d,i>=0?(s=9+i,l=this.decoder.readBit(this.contexts,s)):(s=9-i,l=1^this.decoder.readBit(this.contexts,s)),l},runMagnitudeRefinementPass:function(){for(var t,e=this.decoder,n=this.width,i=this.height,r=this.coefficentsMagnitude,o=this.neighborsSignificance,a=this.contexts,s=this.bitsDecoded,l=this.processingFlags,c=n*i,u=4*n,h=0;h<c;h=t){t=Math.min(c,h+u);for(var f=0;f<n;f++)for(var d=h+f;d<t;d+=n)if(r[d]&&0==(1&l[d])){var p=16;if(0!=(2&l[d]))l[d]^=2,p=0===(127&o[d])?15:14;var m=e.readBit(a,p);r[d]=r[d]<<1|m,s[d]++,l[d]|=1}}},runCleanupPass:function(){for(var t,e=this.decoder,n=this.width,i=this.height,r=this.neighborsSignificance,o=this.coefficentsMagnitude,a=this.coefficentsSign,s=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded,u=this.processingFlags,h=n,f=2*n,d=3*n,p=0;p<i;p=t){t=Math.min(p+4,i);for(var m=p*n,g=p+3<i,y=0;y<n;y++){var v,b=m+y,_=0,w=b,A=p;if(g&&0===u[b]&&0===u[b+h]&&0===u[b+f]&&0===u[b+d]&&0===r[b]&&0===r[b+h]&&0===r[b+f]&&0===r[b+d]){if(!e.readBit(s,18)){c[b]++,c[b+h]++,c[b+f]++,c[b+d]++;continue}0!==(_=e.readBit(s,17)<<1|e.readBit(s,17))&&(A=p+_,w+=_*n),v=this.decodeSignBit(A,y,w),a[w]=v,o[w]=1,this.setNeighborsSignificance(A,y,w),u[w]|=2,w=b;for(var x=p;x<=A;x++,w+=n)c[w]++;_++}for(A=p+_;A<t;A++,w+=n)if(!o[w]&&0==(1&u[w])){var S=l[r[w]];1===e.readBit(s,S)&&(v=this.decodeSignBit(A,y,w),a[w]=v,o[w]=1,this.setNeighborsSignificance(A,y,w),u[w]|=2),c[w]++}}}},checkSegmentationSymbol:function(){var t=this.decoder,e=this.contexts;if(10!==(t.readBit(e,17)<<3|t.readBit(e,17)<<2|t.readBit(e,17)<<1|t.readBit(e,17)))throw new Error("JPX Error: Invalid segmentation symbol")}},i}(),S=function(){function t(){}return t.prototype.calculate=function(t,e,n){for(var i=t[0],r=1,o=t.length;r<o;r++)i=this.iterate(i,t[r],e,n);return i},t.prototype.extend=function(t,e,n){var i=e-1,r=e+1,o=e+n-2,a=e+n;t[i--]=t[r++],t[a++]=t[o--],t[i--]=t[r++],t[a++]=t[o--],t[i--]=t[r++],t[a++]=t[o--],t[i]=t[r],t[a]=t[o]},t.prototype.iterate=function(t,e,n,i){var r,o,a,s,l,c,u=t.width,h=t.height,f=t.items,d=e.width,p=e.height,m=e.items;for(a=0,r=0;r<h;r++)for(s=2*r*d,o=0;o<u;o++,a++,s+=2)m[s]=f[a];f=t.items=null;var g=new Float32Array(d+8);if(1===d){if(0!=(1&n))for(c=0,a=0;c<p;c++,a+=d)m[a]*=.5}else for(c=0,a=0;c<p;c++,a+=d)g.set(m.subarray(a,a+d),4),this.extend(g,4,d),this.filter(g,4,d),m.set(g.subarray(4,4+d),a);var y=16,v=[];for(r=0;r<y;r++)v.push(new Float32Array(p+8));var b,_=0;if(t=4+p,1===p){if(0!=(1&i))for(l=0;l<d;l++)m[l]*=.5}else for(l=0;l<d;l++){if(0===_){for(y=Math.min(d-l,y),a=l,s=4;s<t;a+=d,s++)for(b=0;b<y;b++)v[b][s]=m[a+b];_=y}var w=v[--_];if(this.extend(w,4,p),this.filter(w,4,p),0===_)for(a=l-y+1,s=4;s<t;a+=d,s++)for(b=0;b<y;b++)m[a+b]=v[b][s]}return{width:d,height:p,items:m}},t}(),M=function(){function t(){S.call(this)}return t.prototype=Object.create(S.prototype),t.prototype.filter=function(t,e,n){var i,r,o,a,s=n>>1,l=-1.586134342059924,c=-.052980118572961,u=.882911075530934,h=.443506852043971,f=1.230174104914001;for(i=(e|=0)-3,r=s+4;r--;i+=2)t[i]*=.8128930661159609;for(o=h*t[(i=e-2)-1],r=s+3;r--&&(a=h*t[i+1],t[i]=f*t[i]-o-a,r--);i+=2)o=h*t[(i+=2)+1],t[i]=f*t[i]-o-a;for(o=u*t[(i=e-1)-1],r=s+2;r--&&(a=u*t[i+1],t[i]-=o+a,r--);i+=2)o=u*t[(i+=2)+1],t[i]-=o+a;for(o=c*t[(i=e)-1],r=s+1;r--&&(a=c*t[i+1],t[i]-=o+a,r--);i+=2)o=c*t[(i+=2)+1],t[i]-=o+a;if(0!==s)for(o=l*t[(i=e+1)-1],r=s;r--&&(a=l*t[i+1],t[i]-=o+a,r--);i+=2)o=l*t[(i+=2)+1],t[i]-=o+a},t}(),E=function(){function t(){S.call(this)}return t.prototype=Object.create(S.prototype),t.prototype.filter=function(t,e,n){var i,r,o=n>>1;for(i=e|=0,r=o+1;r--;i+=2)t[i]-=t[i-1]+t[i+1]+2>>2;for(i=e+1,r=o;r--;i+=2)t[i]+=t[i-1]+t[i+1]>>1},t}();return e}(),r=function(){var t=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];function e(t,e,n){this.data=t,this.bp=e,this.dataEnd=n,this.chigh=t[e],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}return e.prototype={byteIn:function(){var t=this.data,e=this.bp;255===t[e]?t[e+1]>143?(this.clow+=65280,this.ct=8):(e++,this.clow+=t[e]<<9,this.ct=7,this.bp=e):(e++,this.clow+=e<this.dataEnd?t[e]<<8:65280,this.ct=8,this.bp=e);this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(e,n){var i,r=e[n]>>1,o=1&e[n],a=t[r],s=a.qe,l=this.a-s;if(this.chigh<s)l<s?(l=s,i=o,r=a.nmps):(l=s,i=1^o,1===a.switchFlag&&(o=i),r=a.nlps);else{if(this.chigh-=s,0!=(32768&l))return this.a=l,o;l<s?(i=1^o,1===a.switchFlag&&(o=i),r=a.nlps):(i=o,r=a.nmps)}do{0===this.ct&&this.byteIn(),l<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&l));return this.a=l,e[n]=r<<1|o,i}},e}(),o="undefined"==typeof window?this:window;o.PDFJS||(o.PDFJS={}),o.PDFJS.pdfBug=!1,PDFJS.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};PDFJS.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};function a(t){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.infos&&console.log("Info: "+t)}function s(t){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.warnings&&console.log("Warning: "+t)}PDFJS.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},PDFJS.UnsupportedManager=function(){var t=[];return{listen:function(e){t.push(e)},notify:function(e){s('Unsupported feature "'+e+'"');for(var n=0,i=t.length;n<i;n++)t[n](e)}}}();function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}PDFJS.isValidUrl=function(t,e){if(!t)return!1;var n=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(t);if(!n)return e;switch(n=n[0].toLowerCase()){case"http":case"https":case"ftp":case"mailto":case"tel":return!0;default:return!1}},PDFJS.shadow=l;PDFJS.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var c=function(){function t(t,e){this.name="PasswordException",this.message=t,this.code=e}return t.prototype=new Error,t.constructor=t,t}();PDFJS.PasswordException=c;var u=function(){function t(t,e){this.name="UnknownErrorException",this.message=t,this.details=e}return t.prototype=new Error,t.constructor=t,t}();PDFJS.UnknownErrorException=u;var h=function(){function t(t){this.name="InvalidPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();PDFJS.InvalidPDFException=h;var f=function(){function t(t){this.name="MissingPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();PDFJS.MissingPDFException=f;var d=function(){function t(t,e){this.name="UnexpectedResponseException",this.message=t,this.status=e}return t.prototype=new Error,t.constructor=t,t}();PDFJS.UnexpectedResponseException=d;(function(){function t(t){this.message=t}t.prototype=new Error,t.prototype.name="NotImplementedException",t.constructor=t})(),function(){function t(t,e){this.begin=t,this.end=e,this.message="Missing data ["+t+", "+e+")"}t.prototype=new Error,t.prototype.name="MissingDataException",t.constructor=t}(),function(){function t(t){this.message=t}t.prototype=new Error,t.prototype.name="XRefParseException",t.constructor=t}();function p(t){for(var e=1,n=0;t>e;)e<<=1,n++;return n}function m(t,e){return t[e]<<8|t[e+1]}function g(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Object.defineProperty(PDFJS,"isLittleEndian",{configurable:!0,get:function(){return l(PDFJS,"isLittleEndian",function(){var t=new Uint8Array(2);return t[0]=1,1===new Uint16Array(t.buffer)[0]}())}}),Object.defineProperty(PDFJS,"hasCanvasTypedArrays",{configurable:!0,get:function(){return l(PDFJS,"hasCanvasTypedArrays",function(){var t=document.createElement("canvas");return t.width=t.height=1,void 0!==t.getContext("2d").createImageData(1,1).data.buffer}())}});!function(){function t(i,r){this.buffer=i,this.byteLength=i.length,this.length=void 0===r?this.byteLength>>2:r,function(i){for(;e<i;)Object.defineProperty(t.prototype,e,n(e)),e++}(this.length)}t.prototype=Object.create(null);var e=0;function n(t){return{get:function(){var e=this.buffer,n=t<<2;return(e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24)>>>0},set:function(e){var n=this.buffer,i=t<<2;n[i]=255&e,n[i+1]=e>>8&255,n[i+2]=e>>16&255,n[i+3]=e>>>24&255}}}}();var y=PDFJS.Util=function(){function t(){}var e=["rgb(",0,",",0,",",0,")"];return t.makeCssRgb=function(t,n,i){return e[1]=t,e[3]=n,e[5]=i,e.join("")},t.transform=function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},t.applyTransform=function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]},t.applyInverseTransform=function(t,e){var n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]},t.getAxialAlignedBoundingBox=function(e,n){var i=t.applyTransform(e,n),r=t.applyTransform(e.slice(2,4),n),o=t.applyTransform([e[0],e[3]],n),a=t.applyTransform([e[2],e[1]],n);return[Math.min(i[0],r[0],o[0],a[0]),Math.min(i[1],r[1],o[1],a[1]),Math.max(i[0],r[0],o[0],a[0]),Math.max(i[1],r[1],o[1],a[1])]},t.inverseTransform=function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]},t.apply3dTransform=function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]},t.singularValueDecompose2dScale=function(t){var e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(n+o)/2,s=Math.sqrt((n+o)*(n+o)-4*(n*o-r*i))/2,l=a+s||1,c=a-s||1;return[Math.sqrt(l),Math.sqrt(c)]},t.normalizeRect=function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e},t.intersect=function(e,n){function i(t,e){return t-e}var r=[e[0],e[2],n[0],n[2]].sort(i),o=[e[1],e[3],n[1],n[3]].sort(i),a=[];return e=t.normalizeRect(e),n=t.normalizeRect(n),(r[0]===e[0]&&r[1]===n[0]||r[0]===n[0]&&r[1]===e[0])&&(a[0]=r[1],a[2]=r[2],(o[0]===e[1]&&o[1]===n[1]||o[0]===n[1]&&o[1]===e[1])&&(a[1]=o[1],a[3]=o[2],a))},t.sign=function(t){return t<0?-1:1},t.appendToArray=function(t,e){Array.prototype.push.apply(t,e)},t.prependToArray=function(t,e){Array.prototype.unshift.apply(t,e)},t.extendObj=function(t,e){for(var n in e)t[n]=e[n]},t.getInheritableProperty=function(t,e){for(;t&&!t.has(e);)t=t.get("Parent");return t?t.get(e):null},t.inherit=function(t,e,n){for(var i in t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n)t.prototype[i]=n[i]},t.loadScript=function(t,e){var n=document.createElement("script"),i=!1;n.setAttribute("src",t),e&&(n.onload=function(){i||e(),i=!0}),document.getElementsByTagName("head")[0].appendChild(n)},t}();PDFJS.PageViewport=function(){function t(t,e,n,i,r,o){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=r;var a,s,l,c,u,h,f,d,p=(t[2]+t[0])/2,m=(t[3]+t[1])/2;switch(n=(n%=360)<0?n+360:n){case 180:a=-1,s=0,l=0,c=1;break;case 90:a=0,s=1,l=1,c=0;break;case 270:a=0,s=-1,l=-1,c=0;break;default:a=1,s=0,l=0,c=-1}o&&(l=-l,c=-c),0===a?(u=Math.abs(m-t[1])*e+i,h=Math.abs(p-t[0])*e+r,f=Math.abs(t[3]-t[1])*e,d=Math.abs(t[2]-t[0])*e):(u=Math.abs(p-t[0])*e+i,h=Math.abs(m-t[1])*e+r,f=Math.abs(t[2]-t[0])*e,d=Math.abs(t[3]-t[1])*e),this.transform=[a*e,s*e,l*e,c*e,u-a*e*p-l*e*m,h-s*e*p-c*e*m],this.width=f,this.height=d,this.fontScale=e}return t.prototype={clone:function(e){var n="scale"in(e=e||{})?e.scale:this.scale,i="rotation"in e?e.rotation:this.rotation;return new t(this.viewBox.slice(),n,i,this.offsetX,this.offsetY,e.dontFlip)},convertToViewportPoint:function(t,e){return y.applyTransform([t,e],this.transform)},convertToViewportRectangle:function(t){var e=y.applyTransform([t[0],t[1]],this.transform),n=y.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]},convertToPdfPoint:function(t,e){return y.applyInverseTransform([t,e],this.transform)}},t}();function v(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t}PDFJS.createPromiseCapability=v,function(){if(o.Promise)return"function"!=typeof o.Promise.all&&(o.Promise.all=function(t){var e,n,i=0,r=[],a=new o.Promise(function(t,i){e=t,n=i});return t.forEach(function(t,o){i++,t.then(function(t){r[o]=t,0===--i&&e(r)},n)}),0===i&&e(r),a}),"function"!=typeof o.Promise.resolve&&(o.Promise.resolve=function(t){return new o.Promise(function(e){e(t)})}),"function"!=typeof o.Promise.reject&&(o.Promise.reject=function(t){return new o.Promise(function(e,n){n(t)})}),void("function"!=typeof o.Promise.prototype.catch&&(o.Promise.prototype.catch=function(t){return o.Promise.prototype.then(void 0,t)}));var t=0,e=2,n={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(e){e._status!==t&&(this.handlers=this.handlers.concat(e._handlers),e._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var t=Date.now()+1;this.handlers.length>0;){var n=this.handlers.shift(),i=n.thisPromise._status,r=n.thisPromise._value;try{1===i?"function"==typeof n.onResolve&&(r=n.onResolve(r)):"function"==typeof n.onReject&&(r=n.onReject(r),i=1,n.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(n.thisPromise))}catch(t){i=e,r=t}if(n.nextPromise._updateStatus(i,r),Date.now()>=t)break}this.handlers.length>0?setTimeout(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(t){this.unhandledRejections.push({promise:t,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function(t){t._unhandledRejection=!1;for(var e=0;e<this.unhandledRejections.length;e++)this.unhandledRejections[e].promise===t&&(this.unhandledRejections.splice(e),e--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var t=Date.now(),e=0;e<this.unhandledRejections.length;e++)if(t-this.unhandledRejections[e].time>500){var n=this.unhandledRejections[e].promise._value,i="Unhandled rejection: "+n;n.stack&&(i+="\n"+n.stack),s(i),this.unhandledRejections.splice(e),e--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};function i(e){this._status=t,this._handlers=[];try{e.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(t){this._reject(t)}}i.all=function(t){var n,r,o=new i(function(t,e){n=t,r=e}),a=t.length,s=[];if(0===a)return n(s),o;function l(t){o._status!==e&&(s=[],r(t))}for(var c=0,u=t.length;c<u;++c){var h=t[c],f=function(t){return function(i){o._status!==e&&(s[t]=i,0===--a&&n(s))}}(c);i.isPromise(h)?h.then(f,l):f(h)}return o},i.isPromise=function(t){return t&&"function"==typeof t.then},i.resolve=function(t){return new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(t,r){1!==this._status&&this._status!==e&&(1===t&&i.isPromise(r)?r.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,e)):(this._status=t,this._value=r,t===e&&0===this._handlers.length&&(this._unhandledRejection=!0,n.addUnhandledRejection(this)),n.scheduleHandlers(this)))},_resolve:function(t){this._updateStatus(1,t)},_reject:function(t){this._updateStatus(e,t)},then:function(t,e){var r=new i(function(t,e){this.resolve=t,this.reject=e});return this._handlers.push({thisPromise:this,onResolve:t,onReject:e,nextPromise:r}),n.scheduleHandlers(this),r},catch:function(t){return this.then(void 0,t)}},o.Promise=i}();!function(){function t(t,e,n){for(;t.length<n;)t+=e;return t}function e(){this.started={},this.times=[],this.enabled=!0}e.prototype={time:function(t){this.enabled&&(t in this.started&&s("Timer is already running for "+t),this.started[t]=Date.now())},timeEnd:function(t){this.enabled&&(t in this.started||s("Timer has not been started for "+t),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t])},toString:function(){var e,n,i=this.times,r="",o=0;for(e=0,n=i.length;e<n;++e){var a=i[e].name;a.length>o&&(o=a.length)}for(e=0,n=i.length;e<n;++e){var s=i[e],l=s.end-s.start;r+=t(s.name," ",o)+" "+l+"ms\n"}return r}}}();PDFJS.createBlob=function(t,e){if("undefined"!=typeof Blob)return new Blob([t],{type:e});var n=new MozBlobBuilder;return n.append(t),n.getBlob(e)},PDFJS.createObjectURL=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(e,n){if(!PDFJS.disableCreateObjectURL&&"undefined"!=typeof URL&&URL.createObjectURL){var i=PDFJS.createBlob(e,n);return URL.createObjectURL(i)}for(var r="data:"+n+";base64,",o=0,a=e.length;o<a;o+=3){var s=255&e[o],l=255&e[o+1],c=255&e[o+2];r+=t[s>>2]+t[(3&s)<<4|l>>4]+t[o+1<a?(15&l)<<2|c>>6:64]+t[o+2<a?63&c:64]}return r}}(),"undefined"!==typeof t&&t.exports&&(t.exports=i)},function(t,e,n){"use strict";var i=n(111),r=/[ \f\t\v]*\r?\n/,o=/^NRRD\d{4}$/,a=/^([^:]*)(:[ =])(.*)$/,s=/^LIST(?: (\d+))?$/;function l(t){return t.replace("\\","\\\\").replace("\n","\\n")}function c(t){return t.split("\\\\").map(function(t){return t.replace("\\n","\n")}).join("\\")}function u(t,e,n,r){var o,a=function(t){return t in d?d[t]:t}(t);switch(t){case"data":case"buffer":case"keys":case"version":break;case"content":case"number":case"sampleUnits":case"space":o=a+": "+e;break;case"blockSize":case"lineSkip":case"byteSkip":case"dimension":case"spaceDimension":i("number"==typeof e||e instanceof Number,"Field "+t+" should at least contain a number!"),o=a+": "+e;break;case"min":case"max":case"oldMin":case"oldMax":i("number"==typeof e||e instanceof Number,"Field "+t+" should contain a number!"),o=a+": "+e;break;case"spaceOrigin":i(e.length===r,"Field "+t+" should be a list with length equal to the space dimension!"),e.forEach(function(e){i("number"==typeof e||e instanceof Number,"Field "+t+" should be a list of numbers!")}),o=a+": ("+e.join(",")+")";break;case"labels":case"units":case"spaceUnits":i(void 0!==e.length&&e.length==n,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){i("string"==typeof e||e instanceof String,"Field "+t+" should be a list of numbers!")}),o=a+": "+e.map(b).join(" ");break;case"sizes":i(void 0!==e.length&&e.length==n,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){i("number"==typeof e||e instanceof Number,"Field "+t+" should be a list of numbers!")}),o=a+": "+e.join(" ");break;case"spacings":case"thicknesses":case"axisMins":case"axisMaxs":i(void 0!==e.length&&e.length==n,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){i("number"==typeof e||e instanceof Number,"Field "+t+" should be a list of numbers!")}),o=a+": "+e.join(" ");break;case"spaceDirections":i(void 0!==e.length&&e.length===n,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){i(null===e||void 0!==e.length&&e.length===r,"The elements of field "+t+" should be lists with length equal to the space dimension!"),null!==e&&e.forEach(function(e){i("number"==typeof e||e instanceof Number,"The elements of field "+t+" should be lists of numbers!")})}),o=a+": "+e.map(function(t){return null===t?"none":"("+t.join(",")+")"}).join(" ");break;case"measurementFrame":i(void 0!==e.length&&e.length===r,"Field "+t+" should be a list with length equal to the space dimension!"),e.forEach(function(e){i(null===e||void 0!==e.length&&e.length===r,"The elements of field "+t+" should be lists with length equal to the space dimension!"),null!==e&&e.forEach(function(e){i("number"==typeof e||e instanceof Number,"The elements of field "+t+" should be lists of numbers!")})}),o=a+": "+e.map(function(t){return null===t?"none":"("+t.join(",")+")"}).join(" ");break;case"type":case"encoding":case"endian":i("string"==typeof e||e instanceof String,"Field "+t+" should contain a string!"),o=a+": "+e;break;case"dataFile":e.length||e.files&&"subdim"in e||(o=a+": "+function(t){if("string"==typeof t||t instanceof String)return t;if("format"in t&&"min"in t&&"max"in t&&"step"in t)return"subdim"in t?t.format+" "+t.min+" "+t.max+" "+t.step+" "+t.subdim:t.format+" "+t.min+" "+t.max+" "+t.step;throw new Error("Unrecognized data file format!")}(e));break;case"centers":case"kinds":i(void 0!==e.length&&e.length==n,"Field "+t+" should be a list with length equal to the dimension!"),o=a+": "+e.map(k).join(" ");break;default:console.warn("Unrecognized NRRD field: "+t+", skipping.")}return o}function h(t,e){switch(t){case"content":case"number":case"sampleUnits":break;case"dimension":case"blockSize":case"lineSkip":case"byteSkip":case"spaceDimension":e=m(e);break;case"min":case"max":case"oldMin":case"oldMax":e=g(e);break;case"spaceOrigin":e=y(e);break;case"labels":case"units":case"spaceUnits":e=w(e,v);break;case"sizes":e=w(e,m);break;case"spacings":case"thicknesses":case"axisMins":case"axisMaxs":e=w(e,g);break;case"spaceDirections":case"measurementFrame":e=w(e,y);break;case"type":e=A(e);break;case"encoding":e=x(e);break;case"endian":e=S(e);break;case"dataFile":e=function(t){var e=M.exec(t);return e?5==e.length&&e[4]?{format:t.substring(0,e.index),min:m(e[1]),max:m(e[2]),step:m(e[3]),subdim:m(e[4])}:{format:t.substring(0,e.index),min:m(e[1]),max:m(e[2]),step:m(e[3])}:t}(e);break;case"centers":e=w(e,E);break;case"kinds":e=w(e,I);break;case"space":e=function(t){switch(t.toLowerCase()){case"right-anterior-superior":case"ras":return"right-anterior-superior";case"left-anterior-superior":case"las":return"left-anterior-superior";case"left-posterior-superior":case"lps":return"left-posterior-superior";case"right-anterior-superior-time":case"rast":return"right-anterior-superior-time";case"left-anterior-superior-time":case"last":return"left-anterior-superior-time";case"left-posterior-superior-time":case"lpst":return"left-posterior-superior-time";case"scanner-xyz":return"scanner-xyz";case"scanner-xyz-time":return"scanner-xyz-time";case"3d-right-handed":return"3D-right-handed";case"3d-left-handed":return"3D-left-handed";case"3d-right-handed-time":return"3D-right-handed-time";case"3d-left-handed-time":return"3D-left-handed-time";default:return console.warn("Unrecognized space: "+t),t}}(e);break;default:console.warn("Unrecognized NRRD field: "+t)}return e}t.exports.serialize=function(t){var e,n,i,r,o,a,s,c,h,f,d=1,p={},m=[];for(r in t)p[r]=t[r];if(void 0===p.sizes)throw new Error("Sizes missing from NRRD file!");if(void 0===p.dimension&&(p.dimension=p.sizes.length),p.data instanceof Int8Array?o="int8":p.data instanceof Uint8Array?o="uint8":p.data instanceof Int16Array?o="int16":p.data instanceof Uint16Array?o="uint16":p.data instanceof Int32Array?o="int32":p.data instanceof Uint32Array?o="uint32":p.data instanceof Float32Array?o="float":p.data instanceof Float64Array&&(o="double"),void 0===p.type&&void 0!==o)p.type=o;else{if(void 0===p.type)throw new Error("Type of data is not given and cannot be inferred!");("string"==typeof p.type||p.type instanceof String)&&(p.type=A(p.type))}void 0===p.encoding?p.encoding="raw":("string"==typeof p.encoding||p.encoding instanceof String)&&(p.encoding=x(p.encoding)),p.data&&"block"!=p.type&&"int8"!=p.type&&"uint8"!=p.type&&"ascii"!=p.encoding?p.endian=C:"block"==p.type||"int8"==p.type||"uint8"==p.type||"ascii"==p.encoding?p.endian=void 0:("string"==typeof p.endian||p.endian instanceof String)&&(p.endian=S(p.endian));var g=void 0;if(void 0!==p.spaceDimension)g=p.spaceDimension;else if(void 0!==p.space)switch(p.space){case"right-anterior-superior":case"RAS":g=3;break;case"left-anterior-superior":case"LAS":g=3;break;case"left-posterior-superior":case"LPS":g=3;break;case"right-anterior-superior-time":case"RAST":g=4;break;case"left-anterior-superior-time":case"LAST":g=4;break;case"left-posterior-superior-time":case"LPST":g=4;break;case"scanner-xyz":g=3;break;case"scanner-xyz-time":g=4;break;case"3D-right-handed":case"3D-left-handed":g=3;break;case"3D-right-handed-time":case"3D-left-handed-time":g=4;break;default:console.warn("Unrecognized space: "+p.space)}for(P(p),e=0;e<p.sizes.length;e++){if(p.sizes[e]<=0)throw new Error("Sizes should be a list of positive (>0) integers!");d*=p.sizes[e]}if(p.data){if(p.data.length<d)throw new Error("Missing data to serialize!")}else if(p.buffer){if("raw"==p.encoding&&(a="block"==p.type&&void 0!==p.blockSize?p.blockSize:R(p.type),p.buffer.byteLength<d*a))throw new Error("Missing data to serialize!")}else if(!p.dataFile)throw new Error("Will not serialize an empty NRRD file!");if(p.data)switch(p.encoding){case"raw":s=p.type==o&&p.endian==C?p.data.buffer.slice(p.data.byteOffset,p.data.byteOffset+p.data.byteLength):p.endian==C?(s=L(p.data,p.type)).buffer.slice(s.byteOffset,s.byteOffset+s.byteLength):function(t,e,n){var i,r,o,a=R(e),s=new ArrayBuffer(t.length*a);switch(n){case"big":r=!1;break;case"little":r=!0;break;default:return void console.warn("Unsupported endianness in NRRD file: "+n)}switch(o=new DataView(s),e){case"int8":for(i=0;i<t.length;i++)o.setInt8(i,t[i],r);return s;case"uint8":for(i=0;i<t.length;i++)o.setUint8(i,t[i],r);return s;case"int16":for(i=0;i<t.length;i++)o.setInt16(2*i,t[i],r);return s;case"uint16":for(i=0;i<t.length;i++)o.setUint16(2*i,t[i],r);return s;case"int32":for(i=0;i<t.length;i++)o.setInt32(4*i,t[i],r);return s;case"uint32":for(i=0;i<t.length;i++)o.setUint32(4*i,t[i],r);return s;case"float":for(i=0;i<t.length;i++)o.setFloat32(4*i,t[i],r);return s;case"double":for(i=0;i<t.length;i++)o.setFloat64(8*i,t[i],r);return s;default:return void console.warn("Cannot serialize NRRD type: "+e+".")}}(p.data,p.type,p.endian);break;case"ascii":s=p.type==o?D(p.data):D(L(p.data,p.type));break;default:throw new Error("Unsupported NRRD encoding: "+p.encoding)}else p.buffer&&(s=p.buffer);m.push("NRRD0005"),m.push("# Generated by nrrd-js");var y=["dimension","spaceDimension","space"];for(e=0;e<y.length;e++)void 0!==p[r=y[e]]&&void 0!==(h=u(r,p[r],p.dimension,g))&&m.push(h);for(r in p)void 0!==p[r]&&(y.indexOf(r)>=0||void 0!==(h=u(r,p[r],p.dimension,g))&&m.push(h));if(p.keys)for(r in p.keys){if(r.indexOf(":=")>=0)throw new Error("The combination ':=' is not allowed in an NRRD key!");m.push(r+":="+l(p[r]))}if(p.dataFile&&p.dataFile.length?(m.push("data file: LIST"),Array.prototype.push.apply(m,p.dataFile)):p.dataFile&&p.dataFile.files&&"subdim"in p.dataFile&&(m.push("data file: LIST "+p.dataFile.subdim),Array.prototype.push.apply(m,p.dataFile.files)),!s||"dataFile"in p)for(m.push(""),f=m.join("\n"),n=new ArrayBuffer(f.length),i=new Uint8Array(n),e=0;e<f.length;e++)i[e]=f.charCodeAt(e);else{for(m.push(""),m.push(""),f=m.join("\n"),n=new ArrayBuffer(f.length+s.byteLength),i=new Uint8Array(n),e=0;e<f.length;e++)i[e]=f.charCodeAt(e);c=new Uint8Array(s),i.set(c,f.length)}return n},t.exports.parse=function(t){var e,n,i,l,u,f,d={data:void 0,buffer:void 0,keys:{},version:void 0},y=new Uint8Array(t);for(y.buffer!==t&&(t=y.buffer),e=2;e<y.length;)if(10==y[e]){if(10==y[e-1]||13==y[e-1]&&10==y[e-2]){i=e+1;break}e++}else 13==y[e]?e++:e+=2;if(void 0===i?n=String.fromCharCode.apply(null,y):(n=String.fromCharCode.apply(null,y.subarray(0,i)),d.buffer=t.slice(i)),l=(l=n.split(r)).filter(function(t){return t.length>0&&"#"!=t[0]}),!o.test(l[0]))throw new Error("File is not an NRRD file!");for(d.version=parseInt(l[0].substring(4,8),10),d.version>5&&console.warn("Reading an unsupported version of the NRRD format; things may go haywire."),e=1;e<l.length;e++)if(u=a.exec(l[e]))if(": "==u[2])u[1]=p(u[1]),"dataFile"==u[1]&&(f=s.exec(u[3]))?(2==f.length&&f[1]?d[u[1]]={files:l.slice(e+1),subdim:m(f[1])}:d[u[1]]=l.slice(e+1),l.length=e):d[u[1]]=h(u[1],u[3]);else{if(":="!=u[2])throw new Error("Logic error in NRRD parser.");d.keys[u[1]]=c(u[3])}else console.warn("Unrecognized line in NRRD header: "+l[e]);if(P(d),"dataFile"in d)console.warn("No support for external data yet!");else switch(d.encoding){case"raw":d.data=function(t,e,n,i){var r,o,a,s=1;for(r=0;r<n.length;r++){if(n[r]<=0)throw new Error("Sizes should be a list of positive (>0) integers!");s*=n[r]}if("block"==e)return t.slice(0,s*i.blockSize);if("int8"==e||"uint8"==e||i.endian==C)switch(e){case"int8":return l(1),new Int8Array(t.slice(0,s));case"uint8":return l(1),new Uint8Array(t.slice(0,s));case"int16":return l(2),new Int16Array(t.slice(0,2*s));case"uint16":return l(2),new Uint16Array(t.slice(0,2*s));case"int32":return l(4),new Int32Array(t.slice(0,4*s));case"uint32":return l(4),new Uint32Array(t.slice(0,4*s));case"float":return l(4),new Float32Array(t.slice(0,4*s));case"double":return l(8),new Float64Array(t.slice(0,8*s));default:return void console.warn("Unsupported NRRD type: "+e+", returning raw buffer.")}else{switch(i.endian){case"big":!1;break;case"little":!0;break;default:return void console.warn("Unsupported endianness in NRRD file: "+i.endian)}switch(a=new DataView(t),e){case"int8":for(o=new Int8Array(s),r=0;r<s;r++)o[r]=a.getInt8(r);return o;case"uint8":for(o=new Uint8Array(s),r=0;r<s;r++)o[r]=a.getUint8(r);return o;case"int16":for(o=new Int16Array(s),r=0;r<s;r++)o[r]=a.getInt16(2*r);return o;case"uint16":for(o=new Uint16Array(s),r=0;r<s;r++)o[r]=a.getUint16(2*r);return o;case"int32":for(o=new Int32Array(s),r=0;r<s;r++)o[r]=a.getInt32(4*r);return o;case"uint32":for(o=new Uint32Array(s),r=0;r<s;r++)o[r]=a.getUint32(4*r);return o;case"float":for(o=new Float32Array(s),r=0;r<s;r++)o[r]=a.getFloat32(4*r);return o;case"double":for(o=new Float64Array(s),r=0;r<s;r++)o[r]=a.getFloat64(8*r);return o;default:return void console.warn("Unsupported NRRD type: "+e+", returning raw buffer.")}}function l(e){if(t.byteLength<s*e)throw new Error("NRRD file does not contain enough data!")}}(d.buffer,d.type,d.sizes,{endian:d.endian,blockSize:d.blockSize});break;case"ascii":d.data=function(t,e,n){var i,r,o,a,s=1;for(i=0;i<n.length;i++){if(n[i]<=0)throw new Error("Sizes should be a list of positive (>0) integers!");s*=n[i]}if(r=new Uint8Array(t),o=String.fromCharCode.apply(null,r),(a=o.split(B)).length<s)throw new Error("Not enough data in NRRD file!");a.length>s&&(""===a[0]&&(a=a.slice(1)),a=a.slice(0,s));switch(e){case"int8":return new Int8Array(a.map(m));case"uint8":return new Uint8Array(a.map(m));case"int16":return new Int16Array(a.map(m));case"uint16":return new Uint16Array(a.map(m));case"int32":return new Int32Array(a.map(m));case"uint32":return new Uint32Array(a.map(m));case"float":return new Float32Array(a.map(g));case"double":return new Float64Array(a.map(g));default:return void console.warn("Unsupported NRRD type: "+e+".")}}(d.buffer,d.type,d.sizes);break;default:console.warn("Unsupported NRRD encoding: "+d.encoding)}return d};var f={"block size":"blockSize",blocksize:"blockSize","old min":"oldMin",oldmin:"oldMin","old max":"oldMax",oldmax:"oldMax","data file":"dataFile",datafile:"dataFile","line skip":"lineSkip",lineskip:"lineSkip","byte skip":"byteSkip",byteskip:"byteSkip","sample units":"sampleUnits",sampleunits:"sampleUnits","axis mins":"axisMins","axis maxs":"axisMaxs",centers:"centers",centerings:"centers","space dimension":"spaceDimension","space units":"spaceUnits","space origin":"spaceOrigin","space directions":"spaceDirections","measurement frame":"measurementFrame"},d=function(){var t,e={};for(t in f)e[f[t]]=t;return e}();function p(t){return(t=t.toLowerCase())in f?f[t]:t}function m(t){var e=parseInt(t,10);if(Number.isNaN(e))throw new Error("Malformed NRRD integer: "+t);return e}function g(t){if((t=t.toLowerCase()).indexOf("nan")>=0)return NaN;if(t.indexOf("-inf")>=0)return-1/0;if(t.indexOf("inf")>=0)return 1/0;var e=parseFloat(t);if(Number.isNaN(e))throw new Error("Malformed NRRD float: "+t);return e}function y(t){if("none"==t)return null;if(t.length<2||"("!==t[0]||")"!==t[t.length-1])throw new Error("Malformed NRRD vector: "+t);return t.slice(1,-1).split(",").map(g)}function v(t){if(length<2||'"'!=t[0]||'"'!=t[t.length-1])throw new Error("Invalid NRRD quoted string: "+t);return t.slice(1,-1).replace('\\"','"')}function b(t){return'"'+t.replace('"','\\"')+'"'}var _=/[ \t]+/;function w(t,e){return t.split(_).map(e)}function A(t){switch(t.toLowerCase()){case"signed char":case"int8":case"int8_t":return"int8";case"uchar":case"unsigned char":case"uint8":case"uint8_t":return"uint8";case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":return"int16";case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":return"uint16";case"int":case"signed int":case"int32":case"int32_t":return"int32";case"uint":case"unsigned int":case"uint32":case"uint32_t":return"uint32";case"longlong":case"long long":case"long long int":case"signed long long":case"signed long long int":case"int64":case"int64_t":return"int64";case"ulonglong":case"unsigned long long":case"unsigned long long int":case"uint64":case"uint64_t":return"uint64";case"float":return"float";case"double":return"double";case"block":return"block";default:return console.warn("Unrecognized NRRD type: "+t),t}}function x(t){switch(t.toLowerCase()){case"raw":return"raw";case"txt":case"text":case"ascii":return"ascii";case"hex":return"hex";case"gz":case"gzip":return"gzip";case"bz2":case"bzip2":return"bzip2";default:return console.warn("Unrecognized NRRD encoding: "+t),t}}function S(t){switch(t.toLowerCase()){case"little":return"little";case"big":return"big";default:return console.warn("Unrecognized NRRD endianness: "+t),t}}var M=/ (-?\d+) (-?\d+) (-?\d+)(?: (\d+))?$/;function E(t){switch(t.toLowerCase()){case"cell":return"cell";case"node":return"node";case"???":case"none":return null;default:return console.warn("Unrecognized NRRD center: "+t),t}}var T={domain:"domain",space:"space",time:"time",list:"list",point:"point",vector:"vector","covariant-vector":"covariant-vector",normal:"normal",stub:"stub",scalar:"scalar",complex:"complex","2-vector":"2-vector","3-color":"3-color","rgb-color":"RGB-color","hsv-color":"HSV-color","xyz-color":"XYZ-color","4-color":"4-color","rgba-color":"RGBA-color","3-vector":"3-vector","3-gradient":"3-gradient","3-normal":"3-normal","4-vector":"4-vector",quaternion:"quaternion","2d-symmetric-matrix":"2D-symmetric-matrix","2d-masked-symmetric-matrix":"2D-masked-symmetric-matrix","2d-matrix":"2D-matrix","2d-masked-matrix":"2D-masked-matrix","3d-symmetric-matrix":"3D-symmetric-matrix","3d-masked-symmetric-matrix":"3D-masked-symmetric-matrix","3d-matrix":"3D-matrix","3d-masked-matrix":"3D-masked-matrix","???":null,none:null};function I(t){var e=t.toLowerCase();return e in T?T[e]:(console.warn("Unrecognized NRRD kind: "+t),t)}function k(t){return null===t?"???":t}var C=function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);return e[0]=16909060,1==n[0]&&2==n[1]&&3==n[2]&&4==n[3]?"big":4==n[0]&&3==n[1]&&2==n[2]&&1==n[3]?"little":void console.warn("Unrecognized system endianness!")}();var B=/[ \t\n\r\v\f]+/;function R(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":return 4;case"int64":case"uint64":return 8;case"float":return 4;case"double":return 8;default:throw new Error("Do not know the size of NRRD type: "+t)}}function P(t){if(void 0===t.dimension)throw new Error("Dimension missing from NRRD file!");if(void 0===t.type)throw new Error("Type missing from NRRD file!");if(void 0===t.encoding)throw new Error("Encoding missing from NRRD file!");if(void 0===t.sizes)throw new Error("Sizes missing from NRRD file!");if("block"!=t.type&&"int8"!=t.type&&"uint8"!=t.type&&"ascii"!=t.encoding&&void 0===t.endian)throw new Error("Endianness missing from NRRD file!");if("block"==t.type&&void 0===t.blockSize)throw new Error("Missing block size in NRRD file!");if(0===t.dimension)throw new Error("Zero-dimensional NRRD file?");if(t.dimension!=t.sizes.length)throw new Error("Length of 'sizes' is different from 'dimension' in an NRRD file!");if(t.spacings&&t.dimension!=t.spacings.length)throw new Error("Length of 'spacings' is different from 'dimension' in an NRRD file!");if(t.thicknesses&&t.dimension!=t.thicknesses.length)throw new Error("Length of 'thicknesses' is different from 'dimension' in an NRRD file!");if(t.axisMins&&t.dimension!=t.axisMins.length)throw new Error("Length of 'axis mins' is different from 'dimension' in an NRRD file!");if(t.axisMaxs&&t.dimension!=t.axisMaxs.length)throw new Error("Length of 'axis maxs' is different from 'dimension' in an NRRD file!");if(t.centers&&t.dimension!=t.centers.length)throw new Error("Length of 'centers' is different from 'dimension' in an NRRD file!");if(t.labels&&t.dimension!=t.labels.length)throw new Error("Length of 'labels' is different from 'dimension' in an NRRD file!");if(t.units&&t.dimension!=t.units.length)throw new Error("Length of 'units' is different from 'dimension' in an NRRD file!");if(t.kinds&&t.dimension!=t.kinds.length)throw new Error("Length of 'kinds' is different from 'dimension' in an NRRD file!");if(!(void 0!==t.data&&0!==t.data.length||void 0!==t.buffer&&0!==t.buffer.byteLength||void 0!==t.dataFile))throw new Error("NRRD file has neither inline or external data!")}function L(t,e){switch(e){case"int8":return new Int8Array(t);case"uint8":return new Uint8Array(t);case"int16":return new Int16Array(t);case"uint16":return new Uint16Array(t);case"int32":return new Int32Array(t);case"uint32":return new Uint32Array(t);case"float":return new Float32Array(t);case"double":return new Float64Array(t);default:throw new Error("Cannot cast to NRRD type: "+e)}}function D(t){var e,n,i,r,o=new Array(t.length);for(e=0;e<t.length;e++)o[e]=""+t[e];for(n=o.join(" "),i=new ArrayBuffer(n.length),r=new Uint8Array(i),e=0;e<r.length;e++)r[e]=n.charCodeAt(e);return i}},function(t,e,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function i(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0}function r(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var o=n(112),a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function u(t){return!r(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var h=t.exports=y,f=/\s*function\s+([^\(\s]*)\s*/;function d(t){if(o.isFunction(t)){if(l)return t.name;var e=t.toString().match(f);return e&&e[1]}}function p(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(l||!o.isFunction(t))return o.inspect(t);var e=d(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,n,i,r){throw new h.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:r})}function y(t,e){t||g(t,!0,e,"==",h.ok)}function v(t,e,n,a){if(t===e)return!0;if(r(t)&&r(e))return 0===i(t,e);if(o.isDate(t)&&o.isDate(e))return t.getTime()===e.getTime();if(o.isRegExp(t)&&o.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(u(t)&&u(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(r(t)!==r(e))return!1;var l=(a=a||{actual:[],expected:[]}).actual.indexOf(t);return-1!==l&&l===a.expected.indexOf(e)||(a.actual.push(t),a.expected.push(e),function(t,e,n,i){if(null===t||void 0===t||null===e||void 0===e)return!1;if(o.isPrimitive(t)||o.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=b(t),a=b(e);if(r&&!a||!r&&a)return!1;if(r)return t=s.call(t),e=s.call(e),v(t,e,n);var l,c,u=A(t),h=A(e);if(u.length!==h.length)return!1;for(u.sort(),h.sort(),c=u.length-1;c>=0;c--)if(u[c]!==h[c])return!1;for(c=u.length-1;c>=0;c--)if(l=u[c],!v(t[l],e[l],n,i))return!1;return!0}(t,e,n,a))}return n?t===e:t==e}function b(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function _(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function w(t,e,n,i){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=function(t){var e;try{t()}catch(t){e=t}return e}(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!r&&g(r,n,"Missing expected exception"+i);var a="string"==typeof i,s=!t&&o.isError(r),l=!t&&r&&!n;if((s&&a&&_(r,n)||l)&&g(r,n,"Got unwanted exception"+i),t&&r&&n&&!_(r,n)||!t&&r)throw r}h.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return p(m(t.actual),128)+" "+t.operator+" "+p(m(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var i=n.stack,r=d(e),o=i.indexOf("\n"+r);if(o>=0){var a=i.indexOf("\n",o+1);i=i.substring(a+1)}this.stack=i}}},o.inherits(h.AssertionError,Error),h.fail=g,h.ok=y,h.equal=function(t,e,n){t!=e&&g(t,e,n,"==",h.equal)},h.notEqual=function(t,e,n){t==e&&g(t,e,n,"!=",h.notEqual)},h.deepEqual=function(t,e,n){v(t,e,!1)||g(t,e,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,n){v(t,e,!0)||g(t,e,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,n){v(t,e,!1)&&g(t,e,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,n,i){v(e,n,!0)&&g(e,n,i,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,n){t!==e&&g(t,e,n,"===",h.strictEqual)},h.notStrictEqual=function(t,e,n){t===e&&g(t,e,n,"!==",h.notStrictEqual)},h.throws=function(t,e,n){w(!0,t,e,n)},h.doesNotThrow=function(t,e,n){w(!1,t,e,n)},h.ifError=function(t){if(t)throw t};var A=Object.keys||function(t){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e}}).call(this,n(22))},function(t,e,n){(function(t,i){var r=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,o=i.length,a=String(t).replace(r,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),l=i[n];n<o;l=i[++n])m(l)||!_(l)?a+=" "+l:a+=" "+s(l);return a},e.deprecate=function(n,r){if(v(t.process))return function(){return e.deprecate(n,r).apply(this,arguments)};if(!0===i.noDeprecation)return n;var o=!1;return function(){if(!o){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(n)?i.showHidden=n:n&&e._extend(i,n),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=l),u(i,t,i.depth)}function l(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function c(t,e){return t}function u(t,n,i){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return y(r)||(r=u(t,r,i)),r}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(g(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),A(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(n);if(0===a.length){if(x(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(A(n))return h(n)}var c,_="",S=!1,M=["{","}"];(d(n)&&(S=!0,M=["[","]"]),x(n))&&(_=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(_=" "+RegExp.prototype.toString.call(n)),w(n)&&(_=" "+Date.prototype.toUTCString.call(n)),A(n)&&(_=" "+h(n)),0!==a.length||S&&0!=n.length?i<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=S?function(t,e,n,i,r){for(var o=[],a=0,s=e.length;a<s;++a)T(e,String(a))?o.push(f(t,e,n,i,String(a),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))}),o}(t,n,i,s,a):a.map(function(e){return f(t,n,i,s,e,S)}),t.seen.pop(),function(t,e,n){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(c,_,M)):M[0]+_+M[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,i,r,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),T(i,r)||(a="["+r+"]"),s||(t.seen.indexOf(l.value)<0?(s=m(n)?u(t,l.value,null):u(t,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),v(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function m(t){return null===t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return _(t)&&"[object RegExp]"===S(t)}function _(t){return"object"==typeof t&&null!==t}function w(t){return _(t)&&"[object Date]"===S(t)}function A(t){return _(t)&&("[object Error]"===S(t)||t instanceof Error)}function x(t){return"function"==typeof t}function S(t){return Object.prototype.toString.call(t)}function M(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(v(o)&&(o=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=i.pid;a[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else a[t]=function(){};return a[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=b,e.isObject=_,e.isDate=w,e.isError=A,e.isFunction=x,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(113);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":");return[t.getDate(),E[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=n(114),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}}).call(this,n(22),n(21))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}]);