!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("AMI",[],e):"object"==typeof exports?exports.AMI=e():t.AMI=e()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=118)}([function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(43),r=i(100);class a{constructor(t=0,e=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(o.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(o.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,r=t.elements,a=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*a,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*a,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*a,this}applyQuaternion(t){const e=this.x,i=this.y,n=this.z,r=t.x,a=t.y,s=t.z,o=t.w,l=o*e+a*n-s*i,c=o*i+s*e-r*n,h=o*n+r*i-a*e,u=-r*e-a*i-s*n;return this.x=l*o+u*-r+c*-s-h*-a,this.y=c*o+u*-a+h*-r-l*-s,this.z=h*o+u*-s+l*-a-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,n=t.y,r=t.z,a=e.x,s=e.y,o=e.z;return this.x=n*o-r*s,this.y=r*a-i*o,this.z=i*s-n*a,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return s.copy(this).projectOnVector(t),this.sub(s)}reflect(t){return this.sub(s.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(n.a.clamp(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const s=new a,o=new r.a},function(t,e,i){"use strict";i.r(e),i.d(e,"default",function(){return c});var n=i(5),r=i(101),a=i(102),s=i(105),o=i(6),l=i(0);class c{static bbox(t,e){if(!n.a.vector3(t)||!n.a.vector3(e))return console.log("Invalid center or plane halfDimensions."),!1;if(!(e.x>=0&&e.y>=0&&e.z>=0))return window.console.log("halfDimensions must be >= 0."),window.console.log(e),!1;return{min:t.clone().sub(e),max:t.clone().add(e)}}static minMax(t=[]){let e=[65535,-32768],i=t.length;for(let n=0;n<i;n++){let i=t[n];e[0]=Math.min(e[0],i),e[1]=Math.max(e[1],i)}return e}static isElement(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}}static isString(t){return"string"==typeof t||t instanceof String}static parseUrl(t){const e=new URL(t,"http://fix.me"),i={filename:e.searchParams.get("filename"),extension:"",pathname:e.pathname,query:e.search};i.filename||(i.filename=i.pathname.split("/").pop());const n=i.filename.split(".");i.extension=n.length>1?n.pop():"dicom";return(!isNaN(i.extension)||-1!==["asp","aspx","go","gs","hs","jsp","js","php","pl","py","rb","htm","html"].indexOf(i.extension)||i.query&&i.query.includes("contentType=application%2Fdicom"))&&(i.extension="dicom"),i}static ijk2LPS(t,e,i,n,r,a=new o.a){const s=new o.a;return s.set(t.x*n.y,e.x*n.x,i.x*n.z,r.x,t.y*n.y,e.y*n.x,i.y*n.z,r.y,t.z*n.y,e.z*n.x,i.z*n.z,r.z,0,0,0,1),s.premultiply(a),s}static aabb2LPS(t,e,i,n){const r=new o.a;return r.set(t.x,e.x,i.x,n.x,t.y,e.y,i.y,n.y,t.z,e.z,i.z,n.z,0,0,0,1),r}static worldToData(t,e){let i=(new l.a).copy(e).applyMatrix4(t);return i.addScalar(.5).floor(),i}static value(t,e){window.console.warn("value is deprecated, please use getPixelData instead"),this.getPixelData(t,e)}static getPixelData(t,e){return e.z>=0&&e.z<t._frame.length?t._frame[e.z].getPixelData(e.x,e.y):null}static setPixelData(t,e,i){if(!(e.z>=0&&e.z<t._frame.length))return null;t._frame[e.z].setPixelData(e.x,e.y,i)}static rescaleSlopeIntercept(t,e,i){return t*e+i}static centerOfMass(t){let e=new l.a(0,0,0);for(let i=0;i<t.length;i++)e.x+=t[i].x,e.y+=t[i].y,e.z+=t[i].z;return e.divideScalar(t.length),e}static orderIntersections(t,e){let i=this.centerOfMass(t),n=new l.a(t[0].x-i.x,t[0].y-i.y,t[0].z-i.z).normalize(),r=new l.a(0,0,0).crossVectors(n,e).normalize(),a=[];for(let e=0;e<t.length;e++){let s=new l.a(t[e].x,t[e].y,t[e].z);s.direction=new l.a(t[e].x-i.x,t[e].y-i.y,t[e].z-i.z).normalize();let o=n.dot(s.direction),c=r.dot(s.direction);s.xy={x:o,y:c};let h=Math.atan2(c,o)*(180/Math.PI);s.angle=h,a.push(s)}a.sort(function(t,e){return t.angle-e.angle});let s=[a[0]];for(let t=1;t<a.length;t++)Math.abs(a[t-1].angle-a[t].angle)>1e-4&&s.push(a[t]);return s}static getRoI(t,e,i){t.geometry.computeBoundingBox();const n=(new r.a).setFromObject(t),s=n.min.clone().project(e),o=n.max.clone().project(e),l=e.controls.domElement.offsetWidth,h=e.controls.domElement.offsetHeight,u=new a.a,d=[];s.x=Math.round((s.x+1)*l/2),s.y=Math.round((1-s.y)*h/2),o.x=Math.round((o.x+1)*l/2),o.y=Math.round((1-o.y)*h/2),[s.x,o.x]=[Math.min(s.x,o.x),Math.max(s.x,o.x)],[s.y,o.y]=[Math.min(s.y,o.y),Math.max(s.y,o.y)];let f=[],p=null;for(let n=s.x;n<=o.x;n++)for(let r=s.y;r<=o.y;r++)u.setFromCamera({x:n/l*2-1,y:-r/h*2+1},e),0!==(f=u.intersectObject(t)).length&&null!==(p=c.getPixelData(i,c.worldToData(i.lps2IJK,f[0].point)))&&1===i.numberOfChannels&&d.push(c.rescaleSlopeIntercept(p,i.rescaleSlope,i.rescaleIntercept));if(0===d.length)return null;const m=d.reduce((t,e)=>t+e)/d.length;return{min:d.reduce((t,e)=>t<e?t:e),max:d.reduce((t,e)=>t>e?t:e),mean:m,sd:Math.sqrt(d.reduce((t,e)=>t+Math.pow(e-m,2),0)/d.length)}}static getGeometryArea(t){if(t.faces.length<1)return 0;let e=0,i=t.vertices;return t.faces.forEach(function(t){e+=new s.a(i[t.a],i[t.b],i[t.c]).getArea()}),e}static stringToNumber(t){let e=Number(t);if(e!=e){const i=(t.match(/\./g)||[]).length;if(1===(t.match(/\,/g)||[]).length&&i<2){const n=0===i?".":"",r=t.replace(/,/g,n);e=Number(r)}e!=e&&(console.error(`String could not be converted to number (${t}). Setting value to "1.0".`),e=1)}return e}}},function(t,e,i){"use strict";i.r(e),i.d(e,"ACESFilmicToneMapping",function(){return it}),i.d(e,"AddEquation",function(){return S}),i.d(e,"AddOperation",function(){return Q}),i.d(e,"AdditiveAnimationBlendMode",function(){return Ze}),i.d(e,"AdditiveBlending",function(){return w}),i.d(e,"AlphaFormat",function(){return Ot}),i.d(e,"AlwaysDepth",function(){return U}),i.d(e,"AlwaysStencilFunc",function(){return Ai}),i.d(e,"AmbientLight",function(){return uu}),i.d(e,"AmbientLightProbe",function(){return Ru}),i.d(e,"AnimationClip",function(){return yh}),i.d(e,"AnimationLoader",function(){return Eh}),i.d(e,"AnimationMixer",function(){return cd}),i.d(e,"AnimationObjectGroup",function(){return ld}),i.d(e,"AnimationUtils",function(){return ah}),i.d(e,"ArcCurve",function(){return Rh}),i.d(e,"ArrayCamera",function(){return fo}),i.d(e,"ArrowHelper",function(){return Kd}),i.d(e,"Audio",function(){return Wu}),i.d(e,"AudioAnalyser",function(){return qu}),i.d(e,"AudioContext",function(){return Pu}),i.d(e,"AudioListener",function(){return Vu}),i.d(e,"AudioLoader",function(){return Bu}),i.d(e,"AxesHelper",function(){return $d}),i.d(e,"AxisHelper",function(){return Qf}),i.d(e,"BackSide",function(){return m}),i.d(e,"BasicDepthPacking",function(){return ri}),i.d(e,"BasicShadowMap",function(){return h}),i.d(e,"BinaryTextureLoader",function(){return ip}),i.d(e,"Bone",function(){return Jo}),i.d(e,"BooleanKeyframeTrack",function(){return uh}),i.d(e,"BoundingBoxHelper",function(){return Kf}),i.d(e,"Box2",function(){return bd}),i.d(e,"Box3",function(){return Ki}),i.d(e,"Box3Helper",function(){return Yd}),i.d(e,"BoxBufferGeometry",function(){return ca}),i.d(e,"BoxGeometry",function(){return Il}),i.d(e,"BoxHelper",function(){return Zd}),i.d(e,"BufferAttribute",function(){return Mr}),i.d(e,"BufferGeometry",function(){return Ur}),i.d(e,"BufferGeometryLoader",function(){return bu}),i.d(e,"ByteType",function(){return St}),i.d(e,"Cache",function(){return vh}),i.d(e,"Camera",function(){return ga}),i.d(e,"CameraHelper",function(){return Vd}),i.d(e,"CanvasRenderer",function(){return ap}),i.d(e,"CanvasTexture",function(){return wl}),i.d(e,"CatmullRomCurve3",function(){return zh}),i.d(e,"CineonToneMapping",function(){return et}),i.d(e,"CircleBufferGeometry",function(){return Cl}),i.d(e,"CircleGeometry",function(){return kl}),i.d(e,"ClampToEdgeWrapping",function(){return dt}),i.d(e,"Clock",function(){return Fu}),i.d(e,"ClosedSplineCurve3",function(){return Xf}),i.d(e,"Color",function(){return _r}),i.d(e,"ColorKeyframeTrack",function(){return dh}),i.d(e,"CompressedTexture",function(){return vl}),i.d(e,"CompressedTextureLoader",function(){return Th}),i.d(e,"ConeBufferGeometry",function(){return Rl}),i.d(e,"ConeGeometry",function(){return Ll}),i.d(e,"CubeCamera",function(){return va}),i.d(e,"CubeGeometry",function(){return Il}),i.d(e,"CubeReflectionMapping",function(){return at}),i.d(e,"CubeRefractionMapping",function(){return st}),i.d(e,"CubeTexture",function(){return wa}),i.d(e,"CubeTextureLoader",function(){return Ch}),i.d(e,"CubeUVReflectionMapping",function(){return ct}),i.d(e,"CubeUVRefractionMapping",function(){return ht}),i.d(e,"CubicBezierCurve",function(){return Wh}),i.d(e,"CubicBezierCurve3",function(){return jh}),i.d(e,"CubicInterpolant",function(){return oh}),i.d(e,"CullFaceBack",function(){return o}),i.d(e,"CullFaceFront",function(){return l}),i.d(e,"CullFaceFrontBack",function(){return c}),i.d(e,"CullFaceNone",function(){return s}),i.d(e,"Curve",function(){return Bh}),i.d(e,"CurvePath",function(){return Kh}),i.d(e,"CustomBlending",function(){return M}),i.d(e,"CustomToneMapping",function(){return nt}),i.d(e,"CylinderBufferGeometry",function(){return Pl}),i.d(e,"CylinderGeometry",function(){return Bl}),i.d(e,"Cylindrical",function(){return _d}),i.d(e,"DataTexture",function(){return Aa}),i.d(e,"DataTexture2DArray",function(){return Oa}),i.d(e,"DataTexture3D",function(){return Ga}),i.d(e,"DataTextureLoader",function(){return kh}),i.d(e,"DecrementStencilOp",function(){return di}),i.d(e,"DecrementWrapStencilOp",function(){return pi}),i.d(e,"DefaultLoadingManager",function(){return xh}),i.d(e,"DepthFormat",function(){return Ut}),i.d(e,"DepthStencilFormat",function(){return Vt}),i.d(e,"DepthTexture",function(){return xl}),i.d(e,"DirectionalLight",function(){return hu}),i.d(e,"DirectionalLightHelper",function(){return zd}),i.d(e,"DiscreteInterpolant",function(){return ch}),i.d(e,"DodecahedronBufferGeometry",function(){return Ol}),i.d(e,"DodecahedronGeometry",function(){return Gl}),i.d(e,"DoubleSide",function(){return g}),i.d(e,"DstAlphaFactor",function(){return O}),i.d(e,"DstColorFactor",function(){return F}),i.d(e,"DynamicBufferAttribute",function(){return Ff}),i.d(e,"DynamicCopyUsage",function(){return Pi}),i.d(e,"DynamicDrawUsage",function(){return Si}),i.d(e,"DynamicReadUsage",function(){return Ii}),i.d(e,"EdgesGeometry",function(){return Ul}),i.d(e,"EdgesHelper",function(){return $f}),i.d(e,"EllipseCurve",function(){return Lh}),i.d(e,"EqualDepth",function(){return j}),i.d(e,"EqualStencilFunc",function(){return yi}),i.d(e,"EquirectangularReflectionMapping",function(){return ot}),i.d(e,"EquirectangularRefractionMapping",function(){return lt}),i.d(e,"Euler",function(){return Bn}),i.d(e,"EventDispatcher",function(){return Di}),i.d(e,"ExtrudeBufferGeometry",function(){return _c}),i.d(e,"ExtrudeGeometry",function(){return bc}),i.d(e,"Face3",function(){return yr}),i.d(e,"Face4",function(){return Af}),i.d(e,"FaceColors",function(){return Tf}),i.d(e,"FileLoader",function(){return Sh}),i.d(e,"FlatShading",function(){return _}),i.d(e,"Float32Attribute",function(){return Zf}),i.d(e,"Float32BufferAttribute",function(){return Br}),i.d(e,"Float64Attribute",function(){return Yf}),i.d(e,"Float64BufferAttribute",function(){return Lr}),i.d(e,"FloatType",function(){return kt}),i.d(e,"Fog",function(){return wo}),i.d(e,"FogExp2",function(){return vo}),i.d(e,"Font",function(){return Tu}),i.d(e,"FontLoader",function(){return Cu}),i.d(e,"FrontSide",function(){return p}),i.d(e,"Frustum",function(){return Ea}),i.d(e,"GLBufferAttribute",function(){return dd}),i.d(e,"GLSL1",function(){return Li}),i.d(e,"GLSL3",function(){return Ri}),i.d(e,"GammaEncoding",function(){return Ke}),i.d(e,"Geometry",function(){return Tl}),i.d(e,"GeometryUtils",function(){return rp}),i.d(e,"GreaterDepth",function(){return Y}),i.d(e,"GreaterEqualDepth",function(){return Z}),i.d(e,"GreaterEqualStencilFunc",function(){return xi}),i.d(e,"GreaterStencilFunc",function(){return vi}),i.d(e,"GridHelper",function(){return Dd}),i.d(e,"Group",function(){return po}),i.d(e,"HalfFloatType",function(){return Pt}),i.d(e,"HemisphereLight",function(){return iu}),i.d(e,"HemisphereLightHelper",function(){return Rd}),i.d(e,"HemisphereLightProbe",function(){return Lu}),i.d(e,"IcosahedronBufferGeometry",function(){return vc}),i.d(e,"IcosahedronGeometry",function(){return wc}),i.d(e,"ImageBitmapLoader",function(){return Su}),i.d(e,"ImageLoader",function(){return Ih}),i.d(e,"ImageUtils",function(){return Ui}),i.d(e,"ImmediateRenderObject",function(){return Ad}),i.d(e,"IncrementStencilOp",function(){return ui}),i.d(e,"IncrementWrapStencilOp",function(){return fi}),i.d(e,"InstancedBufferAttribute",function(){return yu}),i.d(e,"InstancedBufferGeometry",function(){return _u}),i.d(e,"InstancedInterleavedBuffer",function(){return ud}),i.d(e,"InstancedMesh",function(){return tl}),i.d(e,"Int16Attribute",function(){return Uf}),i.d(e,"Int16BufferAttribute",function(){return Ir}),i.d(e,"Int32Attribute",function(){return Wf}),i.d(e,"Int32BufferAttribute",function(){return kr}),i.d(e,"Int8Attribute",function(){return Nf}),i.d(e,"Int8BufferAttribute",function(){return Sr}),i.d(e,"IntType",function(){return It}),i.d(e,"InterleavedBuffer",function(){return Ao}),i.d(e,"InterleavedBufferAttribute",function(){return So}),i.d(e,"Interpolant",function(){return sh}),i.d(e,"InterpolateDiscrete",function(){return Ne}),i.d(e,"InterpolateLinear",function(){return ze}),i.d(e,"InterpolateSmooth",function(){return He}),i.d(e,"InvertStencilOp",function(){return mi}),i.d(e,"JSONLoader",function(){return sp}),i.d(e,"KeepStencilOp",function(){return ci}),i.d(e,"KeyframeTrack",function(){return hh}),i.d(e,"LOD",function(){return Wo}),i.d(e,"LatheBufferGeometry",function(){return xc}),i.d(e,"LatheGeometry",function(){return Ac}),i.d(e,"Layers",function(){return Dn}),i.d(e,"LensFlare",function(){return lp}),i.d(e,"LessDepth",function(){return V}),i.d(e,"LessEqualDepth",function(){return W}),i.d(e,"LessEqualStencilFunc",function(){return bi}),i.d(e,"LessStencilFunc",function(){return _i}),i.d(e,"Light",function(){return eu}),i.d(e,"LightProbe",function(){return pu}),i.d(e,"Line",function(){return ol}),i.d(e,"Line3",function(){return xd}),i.d(e,"LineBasicMaterial",function(){return el}),i.d(e,"LineCurve",function(){return Zh}),i.d(e,"LineCurve3",function(){return Yh}),i.d(e,"LineDashedMaterial",function(){return nh}),i.d(e,"LineLoop",function(){return ul}),i.d(e,"LinePieces",function(){return Sf}),i.d(e,"LineSegments",function(){return hl}),i.d(e,"LineStrip",function(){return Mf}),i.d(e,"LinearEncoding",function(){return qe}),i.d(e,"LinearFilter",function(){return bt}),i.d(e,"LinearInterpolant",function(){return lh}),i.d(e,"LinearMipMapLinearFilter",function(){return At}),i.d(e,"LinearMipMapNearestFilter",function(){return wt}),i.d(e,"LinearMipmapLinearFilter",function(){return xt}),i.d(e,"LinearMipmapNearestFilter",function(){return vt}),i.d(e,"LinearToneMapping",function(){return $}),i.d(e,"Loader",function(){return Ah}),i.d(e,"LoaderUtils",function(){return gu}),i.d(e,"LoadingManager",function(){return wh}),i.d(e,"LogLuvEncoding",function(){return ti}),i.d(e,"LoopOnce",function(){return Oe}),i.d(e,"LoopPingPong",function(){return Fe}),i.d(e,"LoopRepeat",function(){return Ge}),i.d(e,"LuminanceAlphaFormat",function(){return zt}),i.d(e,"LuminanceFormat",function(){return Nt}),i.d(e,"MOUSE",function(){return r}),i.d(e,"Material",function(){return vr}),i.d(e,"MaterialLoader",function(){return mu}),i.d(e,"Math",function(){return Fi}),i.d(e,"MathUtils",function(){return Fi}),i.d(e,"Matrix3",function(){return zi}),i.d(e,"Matrix4",function(){return Mn}),i.d(e,"MaxEquation",function(){return C}),i.d(e,"Mesh",function(){return sa}),i.d(e,"MeshBasicMaterial",function(){return wr}),i.d(e,"MeshDepthMaterial",function(){return ao}),i.d(e,"MeshDistanceMaterial",function(){return so}),i.d(e,"MeshFaceMaterial",function(){return Cf}),i.d(e,"MeshLambertMaterial",function(){return eh}),i.d(e,"MeshMatcapMaterial",function(){return ih}),i.d(e,"MeshNormalMaterial",function(){return th}),i.d(e,"MeshPhongMaterial",function(){return Kc}),i.d(e,"MeshPhysicalMaterial",function(){return Qc}),i.d(e,"MeshStandardMaterial",function(){return qc}),i.d(e,"MeshToonMaterial",function(){return $c}),i.d(e,"MinEquation",function(){return I}),i.d(e,"MirroredRepeatWrapping",function(){return ft}),i.d(e,"MixOperation",function(){return q}),i.d(e,"MultiMaterial",function(){return kf}),i.d(e,"MultiplyBlending",function(){return A}),i.d(e,"MultiplyOperation",function(){return J}),i.d(e,"NearestFilter",function(){return pt}),i.d(e,"NearestMipMapLinearFilter",function(){return yt}),i.d(e,"NearestMipMapNearestFilter",function(){return gt}),i.d(e,"NearestMipmapLinearFilter",function(){return _t}),i.d(e,"NearestMipmapNearestFilter",function(){return mt}),i.d(e,"NeverDepth",function(){return H}),i.d(e,"NeverStencilFunc",function(){return gi}),i.d(e,"NoBlending",function(){return b}),i.d(e,"NoColors",function(){return Ef}),i.d(e,"NoToneMapping",function(){return K}),i.d(e,"NormalAnimationBlendMode",function(){return je}),i.d(e,"NormalBlending",function(){return v}),i.d(e,"NotEqualDepth",function(){return X}),i.d(e,"NotEqualStencilFunc",function(){return wi}),i.d(e,"NumberKeyframeTrack",function(){return fh}),i.d(e,"Object3D",function(){return Jn}),i.d(e,"ObjectLoader",function(){return wu}),i.d(e,"ObjectSpaceNormalMap",function(){return oi}),i.d(e,"OctahedronBufferGeometry",function(){return Mc}),i.d(e,"OctahedronGeometry",function(){return Sc}),i.d(e,"OneFactor",function(){return P}),i.d(e,"OneMinusDstAlphaFactor",function(){return G}),i.d(e,"OneMinusDstColorFactor",function(){return N}),i.d(e,"OneMinusSrcAlphaFactor",function(){return D}),i.d(e,"OneMinusSrcColorFactor",function(){return L}),i.d(e,"OrthographicCamera",function(){return lu}),i.d(e,"PCFShadowMap",function(){return u}),i.d(e,"PCFSoftShadowMap",function(){return d}),i.d(e,"PMREMGenerator",function(){return gf}),i.d(e,"ParametricBufferGeometry",function(){return Ec}),i.d(e,"ParametricGeometry",function(){return Tc}),i.d(e,"Particle",function(){return Bf}),i.d(e,"ParticleBasicMaterial",function(){return Df}),i.d(e,"ParticleSystem",function(){return Lf}),i.d(e,"ParticleSystemMaterial",function(){return Of}),i.d(e,"Path",function(){return $h}),i.d(e,"PerspectiveCamera",function(){return _a}),i.d(e,"Plane",function(){return $n}),i.d(e,"PlaneBufferGeometry",function(){return Ca}),i.d(e,"PlaneGeometry",function(){return Ic}),i.d(e,"PlaneHelper",function(){return Xd}),i.d(e,"PointCloud",function(){return Pf}),i.d(e,"PointCloudMaterial",function(){return Rf}),i.d(e,"PointLight",function(){return ou}),i.d(e,"PointLightHelper",function(){return kd}),i.d(e,"Points",function(){return _l}),i.d(e,"PointsMaterial",function(){return dl}),i.d(e,"PolarGridHelper",function(){return Od}),i.d(e,"PolyhedronBufferGeometry",function(){return Dl}),i.d(e,"PolyhedronGeometry",function(){return Cc}),i.d(e,"PositionalAudio",function(){return Ju}),i.d(e,"PropertyBinding",function(){return od}),i.d(e,"PropertyMixer",function(){return Qu}),i.d(e,"QuadraticBezierCurve",function(){return Xh}),i.d(e,"QuadraticBezierCurve3",function(){return Jh}),i.d(e,"Quaternion",function(){return Xi}),i.d(e,"QuaternionKeyframeTrack",function(){return mh}),i.d(e,"QuaternionLinearInterpolant",function(){return ph}),i.d(e,"REVISION",function(){return n}),i.d(e,"RGBADepthPacking",function(){return ai}),i.d(e,"RGBAFormat",function(){return Ft}),i.d(e,"RGBAIntegerFormat",function(){return Jt}),i.d(e,"RGBA_ASTC_10x10_Format",function(){return ye}),i.d(e,"RGBA_ASTC_10x5_Format",function(){return me}),i.d(e,"RGBA_ASTC_10x6_Format",function(){return ge}),i.d(e,"RGBA_ASTC_10x8_Format",function(){return _e}),i.d(e,"RGBA_ASTC_12x10_Format",function(){return be}),i.d(e,"RGBA_ASTC_12x12_Format",function(){return ve}),i.d(e,"RGBA_ASTC_4x4_Format",function(){return oe}),i.d(e,"RGBA_ASTC_5x4_Format",function(){return le}),i.d(e,"RGBA_ASTC_5x5_Format",function(){return ce}),i.d(e,"RGBA_ASTC_6x5_Format",function(){return he}),i.d(e,"RGBA_ASTC_6x6_Format",function(){return ue}),i.d(e,"RGBA_ASTC_8x5_Format",function(){return de}),i.d(e,"RGBA_ASTC_8x6_Format",function(){return fe}),i.d(e,"RGBA_ASTC_8x8_Format",function(){return pe}),i.d(e,"RGBA_BPTC_Format",function(){return we}),i.d(e,"RGBA_ETC2_EAC_Format",function(){return se}),i.d(e,"RGBA_PVRTC_2BPPV1_Format",function(){return ne}),i.d(e,"RGBA_PVRTC_4BPPV1_Format",function(){return ie}),i.d(e,"RGBA_S3TC_DXT1_Format",function(){return Qt}),i.d(e,"RGBA_S3TC_DXT3_Format",function(){return Kt}),i.d(e,"RGBA_S3TC_DXT5_Format",function(){return $t}),i.d(e,"RGBDEncoding",function(){return ni}),i.d(e,"RGBEEncoding",function(){return $e}),i.d(e,"RGBEFormat",function(){return Ht}),i.d(e,"RGBFormat",function(){return Gt}),i.d(e,"RGBIntegerFormat",function(){return Xt}),i.d(e,"RGBM16Encoding",function(){return ii}),i.d(e,"RGBM7Encoding",function(){return ei}),i.d(e,"RGB_ETC1_Format",function(){return re}),i.d(e,"RGB_ETC2_Format",function(){return ae}),i.d(e,"RGB_PVRTC_2BPPV1_Format",function(){return ee}),i.d(e,"RGB_PVRTC_4BPPV1_Format",function(){return te}),i.d(e,"RGB_S3TC_DXT1_Format",function(){return qt}),i.d(e,"RGFormat",function(){return Zt}),i.d(e,"RGIntegerFormat",function(){return Yt}),i.d(e,"RawShaderMaterial",function(){return Jc}),i.d(e,"Ray",function(){return An}),i.d(e,"Raycaster",function(){return fd}),i.d(e,"RectAreaLight",function(){return du}),i.d(e,"RedFormat",function(){return Wt}),i.d(e,"RedIntegerFormat",function(){return jt}),i.d(e,"ReinhardToneMapping",function(){return tt}),i.d(e,"RepeatWrapping",function(){return ut}),i.d(e,"ReplaceStencilOp",function(){return hi}),i.d(e,"ReverseSubtractEquation",function(){return T}),i.d(e,"RingBufferGeometry",function(){return kc}),i.d(e,"RingGeometry",function(){return Pc}),i.d(e,"SRGB8_ALPHA8_ASTC_10x10_Format",function(){return Le}),i.d(e,"SRGB8_ALPHA8_ASTC_10x5_Format",function(){return ke}),i.d(e,"SRGB8_ALPHA8_ASTC_10x6_Format",function(){return Pe}),i.d(e,"SRGB8_ALPHA8_ASTC_10x8_Format",function(){return Be}),i.d(e,"SRGB8_ALPHA8_ASTC_12x10_Format",function(){return Re}),i.d(e,"SRGB8_ALPHA8_ASTC_12x12_Format",function(){return De}),i.d(e,"SRGB8_ALPHA8_ASTC_4x4_Format",function(){return xe}),i.d(e,"SRGB8_ALPHA8_ASTC_5x4_Format",function(){return Ae}),i.d(e,"SRGB8_ALPHA8_ASTC_5x5_Format",function(){return Me}),i.d(e,"SRGB8_ALPHA8_ASTC_6x5_Format",function(){return Se}),i.d(e,"SRGB8_ALPHA8_ASTC_6x6_Format",function(){return Ee}),i.d(e,"SRGB8_ALPHA8_ASTC_8x5_Format",function(){return Te}),i.d(e,"SRGB8_ALPHA8_ASTC_8x6_Format",function(){return Ie}),i.d(e,"SRGB8_ALPHA8_ASTC_8x8_Format",function(){return Ce}),i.d(e,"Scene",function(){return xo}),i.d(e,"SceneUtils",function(){return op}),i.d(e,"ShaderChunk",function(){return ka}),i.d(e,"ShaderLib",function(){return Ba}),i.d(e,"ShaderMaterial",function(){return ma}),i.d(e,"ShadowMaterial",function(){return Xc}),i.d(e,"Shape",function(){return tu}),i.d(e,"ShapeBufferGeometry",function(){return Bc}),i.d(e,"ShapeGeometry",function(){return Lc}),i.d(e,"ShapePath",function(){return Eu}),i.d(e,"ShapeUtils",function(){return pc}),i.d(e,"ShortType",function(){return Et}),i.d(e,"Skeleton",function(){return Xo}),i.d(e,"SkeletonHelper",function(){return Cd}),i.d(e,"SkinnedMesh",function(){return jo}),i.d(e,"SmoothShading",function(){return y}),i.d(e,"Sphere",function(){return mn}),i.d(e,"SphereBufferGeometry",function(){return Rc}),i.d(e,"SphereGeometry",function(){return Dc}),i.d(e,"Spherical",function(){return gd}),i.d(e,"SphericalHarmonics3",function(){return fu}),i.d(e,"Spline",function(){return qf}),i.d(e,"SplineCurve",function(){return qh}),i.d(e,"SplineCurve3",function(){return Jf}),i.d(e,"SpotLight",function(){return au}),i.d(e,"SpotLightHelper",function(){return Sd}),i.d(e,"Sprite",function(){return zo}),i.d(e,"SpriteMaterial",function(){return Eo}),i.d(e,"SrcAlphaFactor",function(){return R}),i.d(e,"SrcAlphaSaturateFactor",function(){return z}),i.d(e,"SrcColorFactor",function(){return B}),i.d(e,"StaticCopyUsage",function(){return ki}),i.d(e,"StaticDrawUsage",function(){return Mi}),i.d(e,"StaticReadUsage",function(){return Ti}),i.d(e,"StereoCamera",function(){return Gu}),i.d(e,"StreamCopyUsage",function(){return Bi}),i.d(e,"StreamDrawUsage",function(){return Ei}),i.d(e,"StreamReadUsage",function(){return Ci}),i.d(e,"StringKeyframeTrack",function(){return gh}),i.d(e,"SubtractEquation",function(){return E}),i.d(e,"SubtractiveBlending",function(){return x}),i.d(e,"TOUCH",function(){return a}),i.d(e,"TangentSpaceNormalMap",function(){return si}),i.d(e,"TetrahedronBufferGeometry",function(){return Oc}),i.d(e,"TetrahedronGeometry",function(){return Gc}),i.d(e,"TextBufferGeometry",function(){return Fc}),i.d(e,"TextGeometry",function(){return Nc}),i.d(e,"Texture",function(){return Wi}),i.d(e,"TextureLoader",function(){return Ph}),i.d(e,"TorusBufferGeometry",function(){return zc}),i.d(e,"TorusGeometry",function(){return Hc}),i.d(e,"TorusKnotBufferGeometry",function(){return Uc}),i.d(e,"TorusKnotGeometry",function(){return Vc}),i.d(e,"Triangle",function(){return hr}),i.d(e,"TriangleFanDrawMode",function(){return Je}),i.d(e,"TriangleStripDrawMode",function(){return Xe}),i.d(e,"TrianglesDrawMode",function(){return Ye}),i.d(e,"TubeBufferGeometry",function(){return Wc}),i.d(e,"TubeGeometry",function(){return jc}),i.d(e,"UVMapping",function(){return rt}),i.d(e,"Uint16Attribute",function(){return Vf}),i.d(e,"Uint16BufferAttribute",function(){return Cr}),i.d(e,"Uint32Attribute",function(){return jf}),i.d(e,"Uint32BufferAttribute",function(){return Pr}),i.d(e,"Uint8Attribute",function(){return zf}),i.d(e,"Uint8BufferAttribute",function(){return Er}),i.d(e,"Uint8ClampedAttribute",function(){return Hf}),i.d(e,"Uint8ClampedBufferAttribute",function(){return Tr}),i.d(e,"Uniform",function(){return hd}),i.d(e,"UniformsLib",function(){return Pa}),i.d(e,"UniformsUtils",function(){return da}),i.d(e,"UnsignedByteType",function(){return Mt}),i.d(e,"UnsignedInt248Type",function(){return Dt}),i.d(e,"UnsignedIntType",function(){return Ct}),i.d(e,"UnsignedShort4444Type",function(){return Bt}),i.d(e,"UnsignedShort5551Type",function(){return Lt}),i.d(e,"UnsignedShort565Type",function(){return Rt}),i.d(e,"UnsignedShortType",function(){return Tt}),i.d(e,"VSMShadowMap",function(){return f}),i.d(e,"Vector2",function(){return Ni}),i.d(e,"Vector3",function(){return Ji}),i.d(e,"Vector4",function(){return ji}),i.d(e,"VectorKeyframeTrack",function(){return _h}),i.d(e,"Vertex",function(){return Gf}),i.d(e,"VertexColors",function(){return If}),i.d(e,"VideoTexture",function(){return bl}),i.d(e,"WebGL1Renderer",function(){return bo}),i.d(e,"WebGLCubeRenderTarget",function(){return xa}),i.d(e,"WebGLMultisampleRenderTarget",function(){return Yi}),i.d(e,"WebGLRenderTarget",function(){return Zi}),i.d(e,"WebGLRenderTargetCube",function(){return np}),i.d(e,"WebGLRenderer",function(){return yo}),i.d(e,"WebGLUtils",function(){return uo}),i.d(e,"WireframeGeometry",function(){return Zc}),i.d(e,"WireframeHelper",function(){return tp}),i.d(e,"WrapAroundEnding",function(){return We}),i.d(e,"XHRLoader",function(){return ep}),i.d(e,"ZeroCurvatureEnding",function(){return Ue}),i.d(e,"ZeroFactor",function(){return k}),i.d(e,"ZeroSlopeEnding",function(){return Ve}),i.d(e,"ZeroStencilOp",function(){return li}),i.d(e,"sRGBEncoding",function(){return Qe});const n="122",r={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},a={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,o=1,l=2,c=3,h=0,u=1,d=2,f=3,p=0,m=1,g=2,_=1,y=2,b=0,v=1,w=2,x=3,A=4,M=5,S=100,E=101,T=102,I=103,C=104,k=200,P=201,B=202,L=203,R=204,D=205,O=206,G=207,F=208,N=209,z=210,H=0,U=1,V=2,W=3,j=4,Z=5,Y=6,X=7,J=0,q=1,Q=2,K=0,$=1,tt=2,et=3,it=4,nt=5,rt=300,at=301,st=302,ot=303,lt=304,ct=306,ht=307,ut=1e3,dt=1001,ft=1002,pt=1003,mt=1004,gt=1004,_t=1005,yt=1005,bt=1006,vt=1007,wt=1007,xt=1008,At=1008,Mt=1009,St=1010,Et=1011,Tt=1012,It=1013,Ct=1014,kt=1015,Pt=1016,Bt=1017,Lt=1018,Rt=1019,Dt=1020,Ot=1021,Gt=1022,Ft=1023,Nt=1024,zt=1025,Ht=Ft,Ut=1026,Vt=1027,Wt=1028,jt=1029,Zt=1030,Yt=1031,Xt=1032,Jt=1033,qt=33776,Qt=33777,Kt=33778,$t=33779,te=35840,ee=35841,ie=35842,ne=35843,re=36196,ae=37492,se=37496,oe=37808,le=37809,ce=37810,he=37811,ue=37812,de=37813,fe=37814,pe=37815,me=37816,ge=37817,_e=37818,ye=37819,be=37820,ve=37821,we=36492,xe=37840,Ae=37841,Me=37842,Se=37843,Ee=37844,Te=37845,Ie=37846,Ce=37847,ke=37848,Pe=37849,Be=37850,Le=37851,Re=37852,De=37853,Oe=2200,Ge=2201,Fe=2202,Ne=2300,ze=2301,He=2302,Ue=2400,Ve=2401,We=2402,je=2500,Ze=2501,Ye=0,Xe=1,Je=2,qe=3e3,Qe=3001,Ke=3007,$e=3002,ti=3003,ei=3004,ii=3005,ni=3006,ri=3200,ai=3201,si=0,oi=1,li=0,ci=7680,hi=7681,ui=7682,di=7683,fi=34055,pi=34056,mi=5386,gi=512,_i=513,yi=514,bi=515,vi=516,wi=517,xi=518,Ai=519,Mi=35044,Si=35048,Ei=35040,Ti=35045,Ii=35049,Ci=35041,ki=35046,Pi=35050,Bi=35042,Li="100",Ri="300 es";function Di(){}Object.assign(Di.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;const i=this._listeners[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const i=e.slice(0);for(let e=0,n=i.length;e<n;e++)i[e].call(this,t)}}});const Oi=[];for(let t=0;t<256;t++)Oi[t]=(t<16?"0":"")+t.toString(16);let Gi=1234567;const Fi={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Oi[255&t]+Oi[t>>8&255]+Oi[t>>16&255]+Oi[t>>24&255]+"-"+Oi[255&e]+Oi[e>>8&255]+"-"+Oi[e>>16&15|64]+Oi[e>>24&255]+"-"+Oi[63&i|128]+Oi[i>>8&255]+"-"+Oi[i>>16&255]+Oi[i>>24&255]+Oi[255&n]+Oi[n>>8&255]+Oi[n>>16&255]+Oi[n>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(Gi=t%2147483647),((Gi=16807*Gi%2147483647)-1)/2147483646},degToRad:function(t){return t*Fi.DEG2RAD},radToDeg:function(t){return t*Fi.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,n,r){const a=Math.cos,s=Math.sin,o=a(i/2),l=s(i/2),c=a((e+n)/2),h=s((e+n)/2),u=a((e-n)/2),d=s((e-n)/2),f=a((n-e)/2),p=s((n-e)/2);switch(r){case"XYX":t.set(o*h,l*u,l*d,o*c);break;case"YZY":t.set(l*d,o*h,l*u,o*c);break;case"ZXZ":t.set(l*u,l*d,o*h,o*c);break;case"XZX":t.set(o*h,l*p,l*f,o*c);break;case"YXY":t.set(l*f,o*h,l*p,o*c);break;case"ZYZ":t.set(l*p,l*f,o*h,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class Ni{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*i-a*n+t.x,this.y=r*n+a*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class zi{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,n,r,a,s,o,l){const c=this.elements;return c[0]=t,c[1]=n,c[2]=s,c[3]=e,c[4]=r,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,a=i[0],s=i[3],o=i[6],l=i[1],c=i[4],h=i[7],u=i[2],d=i[5],f=i[8],p=n[0],m=n[3],g=n[6],_=n[1],y=n[4],b=n[7],v=n[2],w=n[5],x=n[8];return r[0]=a*p+s*_+o*v,r[3]=a*m+s*y+o*w,r[6]=a*g+s*b+o*x,r[1]=l*p+c*_+h*v,r[4]=l*m+c*y+h*w,r[7]=l*g+c*b+h*x,r[2]=u*p+d*_+f*v,r[5]=u*m+d*y+f*w,r[8]=u*g+d*b+f*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],c=t[8];return e*a*c-e*s*l-i*r*c+i*s*o+n*r*l-n*a*o}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const i=t.elements,n=this.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],f=d*l-c*u,p=c*h-d*o,m=u*o-l*h,g=r*f+a*p+s*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const _=1/g;return n[0]=f*_,n[1]=(s*u-d*a)*_,n[2]=(c*a-s*l)*_,n[3]=p*_,n[4]=(d*r-s*h)*_,n[5]=(s*o-c*r)*_,n[6]=m*_,n[7]=(a*h-u*r)*_,n[8]=(l*r-a*o)*_,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,r,a,s){const o=Math.cos(r),l=Math.sin(r);this.set(i*o,i*l,-i*(o*a+l*s)+a+t,-n*l,n*o,-n*(-l*a+o*s)+s+e,0,0,1)}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.elements,r=n[0],a=n[3],s=n[6],o=n[1],l=n[4],c=n[7];return n[0]=e*r+i*o,n[3]=e*a+i*l,n[6]=e*s+i*c,n[1]=-i*r+e*o,n[4]=-i*a+e*l,n[7]=-i*s+e*c,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}}let Hi;const Ui={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Hi&&(Hi=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Hi.width=t.width,Hi.height=t.height;const i=Hi.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Hi}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let Vi=0;function Wi(t,e,i,n,r,a,s,o,l,c){Object.defineProperty(this,"id",{value:Vi++}),this.uuid=Fi.generateUUID(),this.name="",this.image=void 0!==t?t:Wi.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:Wi.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:dt,this.wrapT=void 0!==n?n:dt,this.magFilter=void 0!==r?r:bt,this.minFilter=void 0!==a?a:xt,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:Ft,this.internalFormat=null,this.type=void 0!==o?o:Mt,this.offset=new Ni(0,0),this.repeat=new Ni(1,1),this.center=new Ni(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:qe,this.version=0,this.onUpdate=null}Wi.DEFAULT_IMAGE=void 0,Wi.DEFAULT_MAPPING=rt,Wi.prototype=Object.assign(Object.create(Di.prototype),{constructor:Wi,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const n=this.image;if(void 0===n.uuid&&(n.uuid=Fi.generateUUID()),!e&&void 0===t.images[n.uuid]){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)e.push(Ui.getDataURL(n[t]))}else e=Ui.getDataURL(n);t.images[n.uuid]={uuid:n.uuid,url:e}}i.image=n.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==rt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ut:t.x=t.x-Math.floor(t.x);break;case dt:t.x=t.x<0?0:1;break;case ft:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ut:t.y=t.y-Math.floor(t.y);break;case dt:t.y=t.y<0?0:1;break;case ft:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Wi.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});class ji{constructor(t=0,e=0,i=0,n=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=i,this.w=n}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*i+a[8]*n+a[12]*r,this.y=a[1]*e+a[5]*i+a[9]*n+a[13]*r,this.z=a[2]*e+a[6]*i+a[10]*n+a[14]*r,this.w=a[3]*e+a[7]*i+a[11]*n+a[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,r;const a=t.elements,s=a[0],o=a[4],l=a[8],c=a[1],h=a[5],u=a[9],d=a[2],f=a[6],p=a[10];if(Math.abs(o-c)<.01&&Math.abs(l-d)<.01&&Math.abs(u-f)<.01){if(Math.abs(o+c)<.1&&Math.abs(l+d)<.1&&Math.abs(u+f)<.1&&Math.abs(s+h+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(s+1)/2,a=(h+1)/2,m=(p+1)/2,g=(o+c)/4,_=(l+d)/4,y=(u+f)/4;return t>a&&t>m?t<.01?(i=0,n=.707106781,r=.707106781):(n=g/(i=Math.sqrt(t)),r=_/i):a>m?a<.01?(i=.707106781,n=0,r=.707106781):(i=g/(n=Math.sqrt(a)),r=y/n):m<.01?(i=.707106781,n=.707106781,r=0):(i=_/(r=Math.sqrt(m)),n=y/r),this.set(i,n,r,e),this}let m=Math.sqrt((f-u)*(f-u)+(l-d)*(l-d)+(c-o)*(c-o));return Math.abs(m)<.001&&(m=1),this.x=(f-u)/m,this.y=(l-d)/m,this.z=(c-o)/m,this.w=Math.acos((s+h+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function Zi(t,e,i){this.width=t,this.height=e,this.scissor=new ji(0,0,t,e),this.scissorTest=!1,this.viewport=new ji(0,0,t,e),i=i||{},this.texture=new Wi(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:bt,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function Yi(t,e,i){Zi.call(this,t,e,i),this.samples=4}Zi.prototype=Object.assign(Object.create(Di.prototype),{constructor:Zi,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Yi.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Yi,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this.samples=t.samples,this}});class Xi{constructor(t=0,e=0,i=0,n=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=i,this._w=n}static slerp(t,e,i,n){return i.copy(t).slerp(e,n)}static slerpFlat(t,e,i,n,r,a,s){let o=i[n+0],l=i[n+1],c=i[n+2],h=i[n+3];const u=r[a+0],d=r[a+1],f=r[a+2],p=r[a+3];if(h!==p||o!==u||l!==d||c!==f){let t=1-s;const e=o*u+l*d+c*f+h*p,i=e>=0?1:-1,n=1-e*e;if(n>Number.EPSILON){const r=Math.sqrt(n),a=Math.atan2(r,e*i);t=Math.sin(t*a)/r,s=Math.sin(s*a)/r}const r=s*i;if(o=o*t+u*r,l=l*t+d*r,c=c*t+f*r,h=h*t+p*r,t===1-s){const t=1/Math.sqrt(o*o+l*l+c*c+h*h);o*=t,l*=t,c*=t,h*=t}}t[e]=o,t[e+1]=l,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,i,n,r,a){const s=i[n],o=i[n+1],l=i[n+2],c=i[n+3],h=r[a],u=r[a+1],d=r[a+2],f=r[a+3];return t[e]=s*f+c*h+o*d-l*u,t[e+1]=o*f+c*u+l*h-s*d,t[e+2]=l*f+c*d+s*u-o*h,t[e+3]=c*f-s*h-o*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,n=t._y,r=t._z,a=t._order,s=Math.cos,o=Math.sin,l=s(i/2),c=s(n/2),h=s(r/2),u=o(i/2),d=o(n/2),f=o(r/2);switch(a){case"XYZ":this._x=u*c*h+l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h-u*d*f;break;case"YXZ":this._x=u*c*h+l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h+u*d*f;break;case"ZXY":this._x=u*c*h-l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h-u*d*f;break;case"ZYX":this._x=u*c*h-l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h+u*d*f;break;case"YZX":this._x=u*c*h+l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h-u*d*f;break;case"XZY":this._x=u*c*h-l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h+u*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],n=e[4],r=e[8],a=e[1],s=e[5],o=e[9],l=e[2],c=e[6],h=e[10],u=i+s+h;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(c-o)*t,this._y=(r-l)*t,this._z=(a-n)*t}else if(i>s&&i>h){const t=2*Math.sqrt(1+i-s-h);this._w=(c-o)/t,this._x=.25*t,this._y=(n+a)/t,this._z=(r+l)/t}else if(s>h){const t=2*Math.sqrt(1+s-i-h);this._w=(r-l)/t,this._x=(n+a)/t,this._y=.25*t,this._z=(o+c)/t}else{const t=2*Math.sqrt(1+h-i-s);this._w=(a-n)/t,this._x=(r+l)/t,this._y=(o+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Fi.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,n=t._y,r=t._z,a=t._w,s=e._x,o=e._y,l=e._z,c=e._w;return this._x=i*c+a*s+n*l-r*o,this._y=n*c+a*o+r*s-i*l,this._z=r*c+a*l+i*o-n*s,this._w=a*c-i*s-n*o-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,n=this._y,r=this._z,a=this._w;let s=a*t._w+i*t._x+n*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=a,this._x=i,this._y=n,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const t=1-e;return this._w=t*a+e*this._w,this._x=t*i+e*this._x,this._y=t*n+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),h=Math.sin((1-e)*c)/l,u=Math.sin(e*c)/l;return this._w=a*h+this._w*u,this._x=i*h+this._x*u,this._y=n*h+this._y*u,this._z=r*h+this._z*u,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class Ji{constructor(t=0,e=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Qi.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Qi.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,n=this.z,r=t.elements,a=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*a,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*a,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*a,this}applyQuaternion(t){const e=this.x,i=this.y,n=this.z,r=t.x,a=t.y,s=t.z,o=t.w,l=o*e+a*n-s*i,c=o*i+s*e-r*n,h=o*n+r*i-a*e,u=-r*e-a*i-s*n;return this.x=l*o+u*-r+c*-s-h*-a,this.y=c*o+u*-a+h*-r-l*-s,this.z=h*o+u*-s+l*-a-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,n=t.y,r=t.z,a=e.x,s=e.y,o=e.z;return this.x=n*o-r*s,this.y=r*a-i*o,this.z=i*s-n*a,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return qi.copy(this).projectOnVector(t),this.sub(qi)}reflect(t){return this.sub(qi.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Fi.clamp(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const qi=new Ji,Qi=new Xi;class Ki{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new Ji(1/0,1/0,1/0),this.max=void 0!==e?e:new Ji(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=t.length;o<l;o+=3){const l=t[o],c=t[o+1],h=t[o+2];l<e&&(e=l),c<i&&(i=c),h<n&&(n=h),l>r&&(r=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(e,i,n),this.max.set(r,a,s),this}setFromBufferAttribute(t){let e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=t.count;o<l;o++){const l=t.getX(o),c=t.getY(o),h=t.getZ(o);l<e&&(e=l),c<i&&(i=c),h<n&&(n=h),l>r&&(r=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(e,i,n),this.max.set(r,a,s),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=en.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Ji),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Ji),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),nn.copy(e.boundingBox),nn.applyMatrix4(t.matrixWorld),this.union(nn));const i=t.children;for(let t=0,e=i.length;t<e;t++)this.expandByObject(i[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Ji),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,en),en.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(hn),un.subVectors(this.max,hn),rn.subVectors(t.a,hn),an.subVectors(t.b,hn),sn.subVectors(t.c,hn),on.subVectors(an,rn),ln.subVectors(sn,an),cn.subVectors(rn,sn);let e=[0,-on.z,on.y,0,-ln.z,ln.y,0,-cn.z,cn.y,on.z,0,-on.x,ln.z,0,-ln.x,cn.z,0,-cn.x,-on.y,on.x,0,-ln.y,ln.x,0,-cn.y,cn.x,0];return!!$i(e,rn,an,sn,un)&&(!!$i(e=[1,0,0,0,1,0,0,0,1],rn,an,sn,un)&&(dn.crossVectors(on,ln),$i(e=[dn.x,dn.y,dn.z],rn,an,sn,un)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Ji),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return en.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(en).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(tn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),tn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),tn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),tn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),tn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),tn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),tn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),tn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(tn),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function $i(t,e,i,n,r){for(let a=0,s=t.length-3;a<=s;a+=3){fn.fromArray(t,a);const s=r.x*Math.abs(fn.x)+r.y*Math.abs(fn.y)+r.z*Math.abs(fn.z),o=e.dot(fn),l=i.dot(fn),c=n.dot(fn);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const tn=[new Ji,new Ji,new Ji,new Ji,new Ji,new Ji,new Ji,new Ji],en=new Ji,nn=new Ki,rn=new Ji,an=new Ji,sn=new Ji,on=new Ji,ln=new Ji,cn=new Ji,hn=new Ji,un=new Ji,dn=new Ji,fn=new Ji,pn=new Ki;class mn{constructor(t,e){this.center=void 0!==t?t:new Ji,this.radius=void 0!==e?e:-1}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):pn.setFromPoints(t).getCenter(i);let n=0;for(let e=0,r=t.length;e<r;e++)n=Math.max(n,i.distanceToSquared(t[e]));return this.radius=Math.sqrt(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Ji),e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new Ki),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const gn=new Ji,_n=new Ji,yn=new Ji,bn=new Ji,vn=new Ji,wn=new Ji,xn=new Ji;class An{constructor(t,e){this.origin=void 0!==t?t:new Ji,this.direction=void 0!==e?e:new Ji(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Ji),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,gn)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Ji),e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=gn.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(gn.copy(this.direction).multiplyScalar(e).add(this.origin),gn.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){_n.copy(t).add(e).multiplyScalar(.5),yn.copy(e).sub(t).normalize(),bn.copy(this.origin).sub(_n);const r=.5*t.distanceTo(e),a=-this.direction.dot(yn),s=bn.dot(this.direction),o=-bn.dot(yn),l=bn.lengthSq(),c=Math.abs(1-a*a);let h,u,d,f;if(c>0)if(u=a*s-o,f=r*c,(h=a*o-s)>=0)if(u>=-f)if(u<=f){const t=1/c;d=(h*=t)*(h+a*(u*=t)+2*s)+u*(a*h+u+2*o)+l}else u=r,d=-(h=Math.max(0,-(a*u+s)))*h+u*(u+2*o)+l;else u=-r,d=-(h=Math.max(0,-(a*u+s)))*h+u*(u+2*o)+l;else u<=-f?d=-(h=Math.max(0,-(-a*r+s)))*h+(u=h>0?-r:Math.min(Math.max(-r,-o),r))*(u+2*o)+l:u<=f?(h=0,d=(u=Math.min(Math.max(-r,-o),r))*(u+2*o)+l):d=-(h=Math.max(0,-(a*r+s)))*h+(u=h>0?r:Math.min(Math.max(-r,-o),r))*(u+2*o)+l;else u=a>0?-r:r,d=-(h=Math.max(0,-(a*u+s)))*h+u*(u+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),n&&n.copy(yn).multiplyScalar(u).add(_n),d}intersectSphere(t,e){gn.subVectors(t.center,this.origin);const i=gn.dot(this.direction),n=gn.dot(gn)-i*i,r=t.radius*t.radius;if(n>r)return null;const a=Math.sqrt(r-n),s=i-a,o=i+a;return s<0&&o<0?null:s<0?this.at(o,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(i=(t.min.x-u.x)*l,n=(t.max.x-u.x)*l):(i=(t.max.x-u.x)*l,n=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,a=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,a=(t.min.y-u.y)*c),i>a||r>n?null:((r>i||i!=i)&&(i=r),(a<n||n!=n)&&(n=a),h>=0?(s=(t.min.z-u.z)*h,o=(t.max.z-u.z)*h):(s=(t.max.z-u.z)*h,o=(t.min.z-u.z)*h),i>o||s>n?null:((s>i||i!=i)&&(i=s),(o<n||n!=n)&&(n=o),n<0?null:this.at(i>=0?i:n,e)))}intersectsBox(t){return null!==this.intersectBox(t,gn)}intersectTriangle(t,e,i,n,r){vn.subVectors(e,t),wn.subVectors(i,t),xn.crossVectors(vn,wn);let a,s=this.direction.dot(xn);if(s>0){if(n)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}bn.subVectors(this.origin,t);const o=a*this.direction.dot(wn.crossVectors(bn,wn));if(o<0)return null;const l=a*this.direction.dot(vn.cross(bn));if(l<0)return null;if(o+l>s)return null;const c=-a*bn.dot(xn);return c<0?null:this.at(c/s,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class Mn{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,n,r,a,s,o,l,c,h,u,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Mn).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/Sn.setFromMatrixColumn(t,0).length(),r=1/Sn.setFromMatrixColumn(t,1).length(),a=1/Sn.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*a,e[9]=i[9]*a,e[10]=i[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,i=t.x,n=t.y,r=t.z,a=Math.cos(i),s=Math.sin(i),o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){const t=a*c,i=a*h,n=s*c,r=s*h;e[0]=o*c,e[4]=-o*h,e[8]=l,e[1]=i+n*l,e[5]=t-r*l,e[9]=-s*o,e[2]=r-t*l,e[6]=n+i*l,e[10]=a*o}else if("YXZ"===t.order){const t=o*c,i=o*h,n=l*c,r=l*h;e[0]=t+r*s,e[4]=n*s-i,e[8]=a*l,e[1]=a*h,e[5]=a*c,e[9]=-s,e[2]=i*s-n,e[6]=r+t*s,e[10]=a*o}else if("ZXY"===t.order){const t=o*c,i=o*h,n=l*c,r=l*h;e[0]=t-r*s,e[4]=-a*h,e[8]=n+i*s,e[1]=i+n*s,e[5]=a*c,e[9]=r-t*s,e[2]=-a*l,e[6]=s,e[10]=a*o}else if("ZYX"===t.order){const t=a*c,i=a*h,n=s*c,r=s*h;e[0]=o*c,e[4]=n*l-i,e[8]=t*l+r,e[1]=o*h,e[5]=r*l+t,e[9]=i*l-n,e[2]=-l,e[6]=s*o,e[10]=a*o}else if("YZX"===t.order){const t=a*o,i=a*l,n=s*o,r=s*l;e[0]=o*c,e[4]=r-t*h,e[8]=n*h+i,e[1]=h,e[5]=a*c,e[9]=-s*c,e[2]=-l*c,e[6]=i*h+n,e[10]=t-r*h}else if("XZY"===t.order){const t=a*o,i=a*l,n=s*o,r=s*l;e[0]=o*c,e[4]=-h,e[8]=l*c,e[1]=t*h+r,e[5]=a*c,e[9]=i*h-n,e[2]=n*h-i,e[6]=s*c,e[10]=r*h+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Tn,t,In)}lookAt(t,e,i){const n=this.elements;return Pn.subVectors(t,e),0===Pn.lengthSq()&&(Pn.z=1),Pn.normalize(),Cn.crossVectors(i,Pn),0===Cn.lengthSq()&&(1===Math.abs(i.z)?Pn.x+=1e-4:Pn.z+=1e-4,Pn.normalize(),Cn.crossVectors(i,Pn)),Cn.normalize(),kn.crossVectors(Pn,Cn),n[0]=Cn.x,n[4]=kn.x,n[8]=Pn.x,n[1]=Cn.y,n[5]=kn.y,n[9]=Pn.y,n[2]=Cn.z,n[6]=kn.z,n[10]=Pn.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,a=i[0],s=i[4],o=i[8],l=i[12],c=i[1],h=i[5],u=i[9],d=i[13],f=i[2],p=i[6],m=i[10],g=i[14],_=i[3],y=i[7],b=i[11],v=i[15],w=n[0],x=n[4],A=n[8],M=n[12],S=n[1],E=n[5],T=n[9],I=n[13],C=n[2],k=n[6],P=n[10],B=n[14],L=n[3],R=n[7],D=n[11],O=n[15];return r[0]=a*w+s*S+o*C+l*L,r[4]=a*x+s*E+o*k+l*R,r[8]=a*A+s*T+o*P+l*D,r[12]=a*M+s*I+o*B+l*O,r[1]=c*w+h*S+u*C+d*L,r[5]=c*x+h*E+u*k+d*R,r[9]=c*A+h*T+u*P+d*D,r[13]=c*M+h*I+u*B+d*O,r[2]=f*w+p*S+m*C+g*L,r[6]=f*x+p*E+m*k+g*R,r[10]=f*A+p*T+m*P+g*D,r[14]=f*M+p*I+m*B+g*O,r[3]=_*w+y*S+b*C+v*L,r[7]=_*x+y*E+b*k+v*R,r[11]=_*A+y*T+b*P+v*D,r[15]=_*M+y*I+b*B+v*O,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],a=t[1],s=t[5],o=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*o*h-n*l*h-r*s*u+i*l*u+n*s*d-i*o*d)+t[7]*(+e*o*d-e*l*u+r*a*u-n*a*d+n*l*c-r*o*c)+t[11]*(+e*l*h-e*s*d-r*a*h+i*a*d+r*s*c-i*l*c)+t[15]*(-n*s*c-e*o*h+e*s*u+n*a*h-i*a*u+i*o*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const i=this.elements,n=t.elements,r=n[0],a=n[1],s=n[2],o=n[3],l=n[4],c=n[5],h=n[6],u=n[7],d=n[8],f=n[9],p=n[10],m=n[11],g=n[12],_=n[13],y=n[14],b=n[15],v=f*y*u-_*p*u+_*h*m-c*y*m-f*h*b+c*p*b,w=g*p*u-d*y*u-g*h*m+l*y*m+d*h*b-l*p*b,x=d*_*u-g*f*u+g*c*m-l*_*m-d*c*b+l*f*b,A=g*f*h-d*_*h-g*c*p+l*_*p+d*c*y-l*f*y,M=r*v+a*w+s*x+o*A;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/M;return i[0]=v*S,i[1]=(_*p*o-f*y*o-_*s*m+a*y*m+f*s*b-a*p*b)*S,i[2]=(c*y*o-_*h*o+_*s*u-a*y*u-c*s*b+a*h*b)*S,i[3]=(f*h*o-c*p*o-f*s*u+a*p*u+c*s*m-a*h*m)*S,i[4]=w*S,i[5]=(d*y*o-g*p*o+g*s*m-r*y*m-d*s*b+r*p*b)*S,i[6]=(g*h*o-l*y*o-g*s*u+r*y*u+l*s*b-r*h*b)*S,i[7]=(l*p*o-d*h*o+d*s*u-r*p*u-l*s*m+r*h*m)*S,i[8]=x*S,i[9]=(g*f*o-d*_*o-g*a*m+r*_*m+d*a*b-r*f*b)*S,i[10]=(l*_*o-g*c*o+g*a*u-r*_*u-l*a*b+r*c*b)*S,i[11]=(d*c*o-l*f*o-d*a*u+r*f*u+l*a*m-r*c*m)*S,i[12]=A*S,i[13]=(d*_*s-g*f*s+g*a*p-r*_*p-d*a*y+r*f*y)*S,i[14]=(g*c*s-l*_*s-g*a*h+r*_*h+l*a*y-r*c*y)*S,i[15]=(l*f*s-d*c*s+d*a*h-r*f*h-l*a*p+r*c*p)*S,this}scale(t){const e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),n=Math.sin(e),r=1-i,a=t.x,s=t.y,o=t.z,l=r*a,c=r*s;return this.set(l*a+i,l*s-n*o,l*o+n*s,0,l*s+n*o,c*s+i,c*o-n*a,0,l*o-n*s,c*o+n*a,r*o*o+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,r=e._x,a=e._y,s=e._z,o=e._w,l=r+r,c=a+a,h=s+s,u=r*l,d=r*c,f=r*h,p=a*c,m=a*h,g=s*h,_=o*l,y=o*c,b=o*h,v=i.x,w=i.y,x=i.z;return n[0]=(1-(p+g))*v,n[1]=(d+b)*v,n[2]=(f-y)*v,n[3]=0,n[4]=(d-b)*w,n[5]=(1-(u+g))*w,n[6]=(m+_)*w,n[7]=0,n[8]=(f+y)*x,n[9]=(m-_)*x,n[10]=(1-(u+p))*x,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){const n=this.elements;let r=Sn.set(n[0],n[1],n[2]).length();const a=Sn.set(n[4],n[5],n[6]).length(),s=Sn.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],En.copy(this);const o=1/r,l=1/a,c=1/s;return En.elements[0]*=o,En.elements[1]*=o,En.elements[2]*=o,En.elements[4]*=l,En.elements[5]*=l,En.elements[6]*=l,En.elements[8]*=c,En.elements[9]*=c,En.elements[10]*=c,e.setFromRotationMatrix(En),i.x=r,i.y=a,i.z=s,this}makePerspective(t,e,i,n,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,o=2*r/(e-t),l=2*r/(i-n),c=(e+t)/(e-t),h=(i+n)/(i-n),u=-(a+r)/(a-r),d=-2*a*r/(a-r);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,i,n,r,a){const s=this.elements,o=1/(e-t),l=1/(i-n),c=1/(a-r),h=(e+t)*o,u=(i+n)*l,d=(a+r)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-u,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Sn=new Ji,En=new Mn,Tn=new Ji(0,0,0),In=new Ji(1,1,1),Cn=new Ji,kn=new Ji,Pn=new Ji;class Bn{constructor(t=0,e=0,i=0,n=Bn.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=i,this._order=n}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,i){const n=Fi.clamp,r=t.elements,a=r[0],s=r[4],o=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],f=r[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-n(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,a),this._z=0);break;case"ZXY":this._x=Math.asin(n(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,f),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-n(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(n(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,a)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-n(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-h,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return Ln.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ln,e,i)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return Rn.setFromEuler(this),this.setFromQuaternion(Rn,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Ji(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Bn.DefaultOrder="XYZ",Bn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Ln=new Mn,Rn=new Xi;class Dn{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}let On=0;const Gn=new Ji,Fn=new Xi,Nn=new Mn,zn=new Ji,Hn=new Ji,Un=new Ji,Vn=new Xi,Wn=new Ji(1,0,0),jn=new Ji(0,1,0),Zn=new Ji(0,0,1),Yn={type:"added"},Xn={type:"removed"};function Jn(){Object.defineProperty(this,"id",{value:On++}),this.uuid=Fi.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Jn.DefaultUp.clone();const t=new Ji,e=new Bn,i=new Xi,n=new Ji(1,1,1);e._onChange(function(){i.setFromEuler(e,!1)}),i._onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Mn},normalMatrix:{value:new zi}}),this.matrix=new Mn,this.matrixWorld=new Mn,this.matrixAutoUpdate=Jn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Dn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Jn.DefaultUp=new Ji(0,1,0),Jn.DefaultMatrixAutoUpdate=!0,Jn.prototype=Object.assign(Object.create(Di.prototype),{constructor:Jn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Fn.setFromAxisAngle(t,e),this.quaternion.multiply(Fn),this},rotateOnWorldAxis:function(t,e){return Fn.setFromAxisAngle(t,e),this.quaternion.premultiply(Fn),this},rotateX:function(t){return this.rotateOnAxis(Wn,t)},rotateY:function(t){return this.rotateOnAxis(jn,t)},rotateZ:function(t){return this.rotateOnAxis(Zn,t)},translateOnAxis:function(t,e){return Gn.copy(t).applyQuaternion(this.quaternion),this.position.add(Gn.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Wn,t)},translateY:function(t){return this.translateOnAxis(jn,t)},translateZ:function(t){return this.translateOnAxis(Zn,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Nn.getInverse(this.matrixWorld))},lookAt:function(t,e,i){t.isVector3?zn.copy(t):zn.set(t,e,i);const n=this.parent;this.updateWorldMatrix(!0,!1),Hn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Nn.lookAt(Hn,zn,this.up):Nn.lookAt(zn,Hn,this.up),this.quaternion.setFromRotationMatrix(Nn),n&&(Nn.extractRotation(n.matrixWorld),Fn.setFromRotationMatrix(Nn),this.quaternion.premultiply(Fn.inverse()))},add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Xn)),this},clear:function(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Xn)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),Nn.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Nn.multiply(t.parent.matrixWorld)),t.applyMatrix4(Nn),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Ji),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Xi),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hn,t,Un),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Ji),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hn,Vn,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Ji),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++)t[e].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};function r(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){n.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const n=i[e];r(t.shapes,n)}else r(t.shapes,i)}}if(void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,n=this.material.length;i<n;i++)e.push(r(t.materials,this.material[i]));n.material=e}else n.material=r(t.materials,this.material);if(this.children.length>0){n.children=[];for(let e=0;e<this.children.length;e++)n.children.push(this.children[e].toJSON(t).object)}if(e){const e=a(t.geometries),n=a(t.materials),r=a(t.textures),s=a(t.images),o=a(t.shapes);e.length>0&&(i.geometries=e),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),s.length>0&&(i.images=s),o.length>0&&(i.shapes=o)}return i.object=n,i;function a(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const i=t.children[e];this.add(i.clone())}return this}});const qn=new Ji,Qn=new Ji,Kn=new zi;class $n{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new Ji(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const n=qn.subVectors(i,e).cross(Qn.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Ji),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Ji);const i=t.delta(qn),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const r=-(t.start.dot(this.normal)+this.constant)/n;return r<0||r>1?void 0:e.copy(i).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Ji),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||Kn.getNormalMatrix(t),n=this.coplanarPoint(qn).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const tr=new Ji,er=new Ji,ir=new Ji,nr=new Ji,rr=new Ji,ar=new Ji,sr=new Ji,or=new Ji,lr=new Ji,cr=new Ji;class hr{constructor(t,e,i){this.a=void 0!==t?t:new Ji,this.b=void 0!==e?e:new Ji,this.c=void 0!==i?i:new Ji}static getNormal(t,e,i,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new Ji),n.subVectors(i,e),tr.subVectors(t,e),n.cross(tr);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(t,e,i,n,r){tr.subVectors(n,e),er.subVectors(i,e),ir.subVectors(t,e);const a=tr.dot(tr),s=tr.dot(er),o=tr.dot(ir),l=er.dot(er),c=er.dot(ir),h=a*l-s*s;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Ji),0===h)return r.set(-2,-1,-1);const u=1/h,d=(l*o-s*c)*u,f=(a*c-s*o)*u;return r.set(1-d-f,f,d)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,nr),nr.x>=0&&nr.y>=0&&nr.x+nr.y<=1}static getUV(t,e,i,n,r,a,s,o){return this.getBarycoord(t,e,i,n,nr),o.set(0,0),o.addScaledVector(r,nr.x),o.addScaledVector(a,nr.y),o.addScaledVector(s,nr.z),o}static isFrontFacing(t,e,i,n){return tr.subVectors(i,e),er.subVectors(t,e),tr.cross(er).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return tr.subVectors(this.c,this.b),er.subVectors(this.a,this.b),.5*tr.cross(er).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Ji),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return hr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new $n),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return hr.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,r){return hr.getUV(t,this.a,this.b,this.c,e,i,n,r)}containsPoint(t){return hr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return hr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Ji);const i=this.a,n=this.b,r=this.c;let a,s;rr.subVectors(n,i),ar.subVectors(r,i),or.subVectors(t,i);const o=rr.dot(or),l=ar.dot(or);if(o<=0&&l<=0)return e.copy(i);lr.subVectors(t,n);const c=rr.dot(lr),h=ar.dot(lr);if(c>=0&&h<=c)return e.copy(n);const u=o*h-c*l;if(u<=0&&o>=0&&c<=0)return a=o/(o-c),e.copy(i).addScaledVector(rr,a);cr.subVectors(t,r);const d=rr.dot(cr),f=ar.dot(cr);if(f>=0&&d<=f)return e.copy(r);const p=d*l-o*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),e.copy(i).addScaledVector(ar,s);const m=c*f-d*h;if(m<=0&&h-c>=0&&d-f>=0)return sr.subVectors(r,n),s=(h-c)/(h-c+(d-f)),e.copy(n).addScaledVector(sr,s);const g=1/(m+p+u);return a=p*g,s=u*g,e.copy(i).addScaledVector(rr,a).addScaledVector(ar,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},dr={h:0,s:0,l:0},fr={h:0,s:0,l:0};function pr(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function mr(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function gr(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class _r{constructor(t,e,i){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,i){return this.r=t,this.g=e,this.b=i,this}setHSL(t,e,i){if(t=Fi.euclideanModulo(t,1),e=Fi.clamp(e,0,1),i=Fi.clamp(i,0,1),0===e)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+e):i+e-i*e,r=2*i-n;this.r=pr(r,n,t+1/3),this.g=pr(r,n,t),this.b=pr(r,n,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){let t;const n=i[1],r=i[2];switch(n){case"rgb":case"rgba":if(t=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[5]),this;if(t=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[5]),this;break;case"hsl":case"hsla":if(t=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){const i=parseFloat(t[1])/360,n=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[5]),this.setHSL(i,n,r)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){const t=i[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=ur[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e){void 0===e&&(e=2);const i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=mr(t.r),this.g=mr(t.g),this.b=mr(t.b),this}copyLinearToSRGB(t){return this.r=gr(t.r),this.g=gr(t.g),this.b=gr(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,i=this.g,n=this.b,r=Math.max(e,i,n),a=Math.min(e,i,n);let s,o;const l=(a+r)/2;if(a===r)s=0,o=0;else{const t=r-a;switch(o=l<=.5?t/(r+a):t/(2-r-a),r){case e:s=(i-n)/t+(i<n?6:0);break;case i:s=(n-e)/t+2;break;case n:s=(e-i)/t+4}s/=6}return t.h=s,t.s=o,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,i){return this.getHSL(dr),dr.h+=t,dr.s+=e,dr.l+=i,this.setHSL(dr.h,dr.s,dr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpHSL(t,e){this.getHSL(dr),t.getHSL(fr);const i=Fi.lerp(dr.h,fr.h,e),n=Fi.lerp(dr.s,fr.s,e),r=Fi.lerp(dr.l,fr.l,e);return this.setHSL(i,n,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}_r.NAMES=ur,_r.prototype.r=1,_r.prototype.g=1,_r.prototype.b=1;class yr{constructor(t,e,i,n,r,a){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new Ji,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new _r,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}clone(){return(new this.constructor).copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}let br=0;function vr(){Object.defineProperty(this,"id",{value:br++}),this.uuid=Fi.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=v,this.side=p,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=R,this.blendDst=D,this.blendEquation=S,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=W,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ai,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ci,this.stencilZFail=ci,this.stencilZPass=ci,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function wr(t){vr.call(this),this.type="MeshBasicMaterial",this.color=new _r(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}vr.prototype=Object.assign(Object.create(Di.prototype),{constructor:vr,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===_;continue}const n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}},toJSON:function(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){const e=[];for(const i in t){const n=t[i];delete n.metadata,e.push(n)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(i.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,i.refractionRatio=this.refractionRatio,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==v&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==p&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.morphNormals&&(i.morphNormals=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){const e=n(t.textures),r=n(t.images);e.length>0&&(i.textures=e),r.length>0&&(i.images=r)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const t=e.length;i=new Array(t);for(let n=0;n!==t;++n)i[n]=e[n].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(vr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),wr.prototype=Object.create(vr.prototype),wr.prototype.constructor=wr,wr.prototype.isMeshBasicMaterial=!0,wr.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};const xr=new Ji,Ar=new Ni;function Mr(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=Mi,this.updateRange={offset:0,count:-1},this.version=0}function Sr(t,e,i){Mr.call(this,new Int8Array(t),e,i)}function Er(t,e,i){Mr.call(this,new Uint8Array(t),e,i)}function Tr(t,e,i){Mr.call(this,new Uint8ClampedArray(t),e,i)}function Ir(t,e,i){Mr.call(this,new Int16Array(t),e,i)}function Cr(t,e,i){Mr.call(this,new Uint16Array(t),e,i)}function kr(t,e,i){Mr.call(this,new Int32Array(t),e,i)}function Pr(t,e,i){Mr.call(this,new Uint32Array(t),e,i)}function Br(t,e,i){Mr.call(this,new Float32Array(t),e,i)}function Lr(t,e,i){Mr.call(this,new Float64Array(t),e,i)}Object.defineProperty(Mr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Mr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let i=0;for(let n=0,r=t.length;n<r;n++){let r=t[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),r=new _r),e[i++]=r.r,e[i++]=r.g,e[i++]=r.b}return this},copyVector2sArray:function(t){const e=this.array;let i=0;for(let n=0,r=t.length;n<r;n++){let r=t[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),r=new Ni),e[i++]=r.x,e[i++]=r.y}return this},copyVector3sArray:function(t){const e=this.array;let i=0;for(let n=0,r=t.length;n<r;n++){let r=t[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),r=new Ji),e[i++]=r.x,e[i++]=r.y,e[i++]=r.z}return this},copyVector4sArray:function(t){const e=this.array;let i=0;for(let n=0,r=t.length;n<r;n++){let r=t[n];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),r=new ji),e[i++]=r.x,e[i++]=r.y,e[i++]=r.z,e[i++]=r.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)Ar.fromBufferAttribute(this,e),Ar.applyMatrix3(t),this.setXY(e,Ar.x,Ar.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)xr.fromBufferAttribute(this,e),xr.applyMatrix3(t),this.setXYZ(e,xr.x,xr.y,xr.z);return this},applyMatrix4:function(t){for(let e=0,i=this.count;e<i;e++)xr.x=this.getX(e),xr.y=this.getY(e),xr.z=this.getZ(e),xr.applyMatrix4(t),this.setXYZ(e,xr.x,xr.y,xr.z);return this},applyNormalMatrix:function(t){for(let e=0,i=this.count;e<i;e++)xr.x=this.getX(e),xr.y=this.getY(e),xr.z=this.getZ(e),xr.applyNormalMatrix(t),this.setXYZ(e,xr.x,xr.y,xr.z);return this},transformDirection:function(t){for(let e=0,i=this.count;e<i;e++)xr.x=this.getX(e),xr.y=this.getY(e),xr.z=this.getZ(e),xr.transformDirection(t),this.setXYZ(e,xr.x,xr.y,xr.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Sr.prototype=Object.create(Mr.prototype),Sr.prototype.constructor=Sr,Er.prototype=Object.create(Mr.prototype),Er.prototype.constructor=Er,Tr.prototype=Object.create(Mr.prototype),Tr.prototype.constructor=Tr,Ir.prototype=Object.create(Mr.prototype),Ir.prototype.constructor=Ir,Cr.prototype=Object.create(Mr.prototype),Cr.prototype.constructor=Cr,kr.prototype=Object.create(Mr.prototype),kr.prototype.constructor=kr,Pr.prototype=Object.create(Mr.prototype),Pr.prototype.constructor=Pr,Br.prototype=Object.create(Mr.prototype),Br.prototype.constructor=Br,Lr.prototype=Object.create(Mr.prototype),Lr.prototype.constructor=Lr;function Rr(t){if(0===t.length)return-1/0;let e=t[0];for(let i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}let Dr=1;const Or=new Mn,Gr=new Jn,Fr=new Ji,Nr=new Ki,zr=new Ki,Hr=new Ji;function Ur(){Object.defineProperty(this,"id",{value:Dr+=2}),this.uuid=Fi.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ur.prototype=Object.assign(Object.create(Di.prototype),{constructor:Ur,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(Rr(t)>65535?Pr:Cr)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new zi).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Or.makeRotationX(t),this.applyMatrix4(Or),this},rotateY:function(t){return Or.makeRotationY(t),this.applyMatrix4(Or),this},rotateZ:function(t){return Or.makeRotationZ(t),this.applyMatrix4(Or),this},translate:function(t,e,i){return Or.makeTranslation(t,e,i),this.applyMatrix4(Or),this},scale:function(t,e,i){return Or.makeScale(t,e,i),this.applyMatrix4(Or),this},lookAt:function(t){return Gr.lookAt(t),Gr.updateMatrix(),this.applyMatrix4(Gr.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fr).negate(),this.translate(Fr.x,Fr.y,Fr.z),this},setFromObject:function(t){const e=t.geometry;if(t.isPoints||t.isLine){const t=new Br(3*e.vertices.length,3),i=new Br(3*e.colors.length,3);if(this.setAttribute("position",t.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){const t=new Br(e.lineDistances.length,1);this.setAttribute("lineDistance",t.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Br(e,3)),this},updateFromObject:function(t){let e=t.geometry;if(t.isMesh){let t=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(t=void 0,e.elementsNeedUpdate=!1),void 0===t)return this.fromGeometry(e);t.verticesNeedUpdate=e.verticesNeedUpdate,t.normalsNeedUpdate=e.normalsNeedUpdate,t.colorsNeedUpdate=e.colorsNeedUpdate,t.uvsNeedUpdate=e.uvsNeedUpdate,t.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=t}if(!0===e.verticesNeedUpdate){const t=this.attributes.position;void 0!==t&&(t.copyVector3sArray(e.vertices),t.needsUpdate=!0),e.verticesNeedUpdate=!1}if(!0===e.normalsNeedUpdate){const t=this.attributes.normal;void 0!==t&&(t.copyVector3sArray(e.normals),t.needsUpdate=!0),e.normalsNeedUpdate=!1}if(!0===e.colorsNeedUpdate){const t=this.attributes.color;void 0!==t&&(t.copyColorsArray(e.colors),t.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){const t=this.attributes.uv;void 0!==t&&(t.copyVector2sArray(e.uvs),t.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){const t=this.attributes.lineDistance;void 0!==t&&(t.copyArray(e.lineDistances),t.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){const e=[];let i,n,r=void 0;const a=t.faces;for(n=0;n<a.length;n++){const t=a[n];t.materialIndex!==r&&(r=t.materialIndex,void 0!==i&&(i.count=3*n-i.start,e.push(i)),i={start:3*n,materialIndex:r})}void 0!==i&&(i.count=3*n-i.start,e.push(i)),this.groups=e}fromGeometry(t){const e=t.faces,i=t.vertices,n=t.faceVertexUvs,r=n[0]&&n[0].length>0,a=n[1]&&n[1].length>0,s=t.morphTargets,o=s.length;let l;if(o>0){l=[];for(let t=0;t<o;t++)l[t]={name:s[t].name,data:[]};this.morphTargets.position=l}const c=t.morphNormals,h=c.length;let u;if(h>0){u=[];for(let t=0;t<h;t++)u[t]={name:c[t].name,data:[]};this.morphTargets.normal=u}const d=t.skinIndices,f=t.skinWeights,p=d.length===i.length,m=f.length===i.length;i.length>0&&0===e.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let t=0;t<e.length;t++){const g=e[t];this.vertices.push(i[g.a],i[g.b],i[g.c]);const _=g.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{const t=g.normal;this.normals.push(t,t,t)}const y=g.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{const t=g.color;this.colors.push(t,t,t)}if(!0===r){const e=n[0][t];void 0!==e?this.uvs.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",t),this.uvs.push(new Ni,new Ni,new Ni))}if(!0===a){const e=n[1][t];void 0!==e?this.uvs2.push(e[0],e[1],e[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",t),this.uvs2.push(new Ni,new Ni,new Ni))}for(let t=0;t<o;t++){const e=s[t].vertices;l[t].data.push(e[g.a],e[g.b],e[g.c])}for(let e=0;e<h;e++){const i=c[e].vertexNormals[t];u[e].data.push(i.a,i.b,i.c)}p&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),m&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}}).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){const e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Mr(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){const e=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Mr(e,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const e=new Float32Array(3*t.colors.length);this.setAttribute("color",new Mr(e,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const e=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Mr(e,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const e=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Mr(e,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(const e in t.morphTargets){const i=[],n=t.morphTargets[e];for(let t=0,e=n.length;t<e;t++){const e=n[t],r=new Br(3*e.data.length,3);r.name=e.name,i.push(r.copyVector3sArray(e.data))}this.morphAttributes[e]=i}if(t.skinIndices.length>0){const e=new Br(4*t.skinIndices.length,4);this.setAttribute("skinIndex",e.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const e=new Br(4*t.skinWeights.length,4);this.setAttribute("skinWeight",e.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ki);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ji(-1/0,-1/0,-1/0),new Ji(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];Nr.setFromBufferAttribute(i),this.morphTargetsRelative?(Hr.addVectors(this.boundingBox.min,Nr.min),this.boundingBox.expandByPoint(Hr),Hr.addVectors(this.boundingBox.max,Nr.max),this.boundingBox.expandByPoint(Hr)):(this.boundingBox.expandByPoint(Nr.min),this.boundingBox.expandByPoint(Nr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mn);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ji,1/0);if(t){const i=this.boundingSphere.center;if(Nr.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];zr.setFromBufferAttribute(i),this.morphTargetsRelative?(Hr.addVectors(Nr.min,zr.min),Nr.expandByPoint(Hr),Hr.addVectors(Nr.max,zr.max),Nr.expandByPoint(Hr)):(Nr.expandByPoint(zr.min),Nr.expandByPoint(zr.max))}Nr.getCenter(i);let n=0;for(let e=0,r=t.count;e<r;e++)Hr.fromBufferAttribute(t,e),n=Math.max(n,i.distanceToSquared(Hr));if(e)for(let r=0,a=e.length;r<a;r++){const a=e[r],s=this.morphTargetsRelative;for(let e=0,r=a.count;e<r;e++)Hr.fromBufferAttribute(a,e),s&&(Fr.fromBufferAttribute(t,e),Hr.add(Fr)),n=Math.max(n,i.distanceToSquared(Hr))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new Mr(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const n=new Ji,r=new Ji,a=new Ji,s=new Ji,o=new Ji,l=new Ji,c=new Ji,h=new Ji;if(t)for(let u=0,d=t.count;u<d;u+=3){const d=t.getX(u+0),f=t.getX(u+1),p=t.getX(u+2);n.fromBufferAttribute(e,d),r.fromBufferAttribute(e,f),a.fromBufferAttribute(e,p),c.subVectors(a,r),h.subVectors(n,r),c.cross(h),s.fromBufferAttribute(i,d),o.fromBufferAttribute(i,f),l.fromBufferAttribute(i,p),s.add(c),o.add(c),l.add(c),i.setXYZ(d,s.x,s.y,s.z),i.setXYZ(f,o.x,o.y,o.z),i.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,s=e.count;t<s;t+=3)n.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),c.subVectors(a,r),h.subVectors(n,r),c.cross(h),i.setXYZ(t+0,c.x,c.y,c.z),i.setXYZ(t+1,c.x,c.y,c.z),i.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const n in i){if(void 0===t.attributes[n])continue;const r=i[n].array,a=t.attributes[n],s=a.array,o=a.itemSize*e,l=Math.min(s.length,r.length-o);for(let t=0,e=o;t<l;t++,e++)r[e]=s[t]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)Hr.fromBufferAttribute(t,e),Hr.normalize(),t.setXYZ(e,Hr.x,Hr.y,Hr.z)},toNonIndexed:function(){function t(t,e){const i=t.array,n=t.itemSize,r=t.normalized,a=new i.constructor(e.length*n);let s=0,o=0;for(let t=0,r=e.length;t<r;t++){s=e[t]*n;for(let t=0;t<n;t++)a[o++]=i[s++]}return new Mr(a,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const e=new Ur,i=this.index.array,n=this.attributes;for(const r in n){const a=t(n[r],i);e.setAttribute(r,a)}const r=this.morphAttributes;for(const n in r){const a=[],s=r[n];for(let e=0,n=s.length;e<n;e++){const n=t(s[e],i);a.push(n)}e.morphAttributes[n]=a}e.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let t=0,i=a.length;t<i;t++){const i=a[t];e.addGroup(i.start,i.count,i.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const e in i){const n=i[e],r=n.toJSON(t.data);""!==n.name&&(r.name=n.name),t.data.attributes[e]=r}const n={};let r=!1;for(const e in this.morphAttributes){const i=this.morphAttributes[e],a=[];for(let e=0,n=i.length;e<n;e++){const n=i[e],r=n.toJSON(t.data);""!==n.name&&(r.name=n.name),a.push(r)}a.length>0&&(n[e]=a,r=!0)}r&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t},clone:function(){return(new Ur).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const n=t.attributes;for(const t in n){const i=n[t];this.setAttribute(t,i.clone(e))}const r=t.morphAttributes;for(const t in r){const i=[],n=r[t];for(let t=0,r=n.length;t<r;t++)i.push(n[t].clone(e));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;const a=t.groups;for(let t=0,e=a.length;t<e;t++){const e=a[t];this.addGroup(e.start,e.count,e.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Vr=new Mn,Wr=new An,jr=new mn,Zr=new Ji,Yr=new Ji,Xr=new Ji,Jr=new Ji,qr=new Ji,Qr=new Ji,Kr=new Ji,$r=new Ji,ta=new Ji,ea=new Ni,ia=new Ni,na=new Ni,ra=new Ji,aa=new Ji;function sa(t,e){Jn.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Ur,this.material=void 0!==e?e:new wr,this.updateMorphTargets()}function oa(t,e,i,n,r,a,s,o){let l;if(null===(l=e.side===m?n.intersectTriangle(s,a,r,!0,o):n.intersectTriangle(r,a,s,e.side!==g,o)))return null;aa.copy(o),aa.applyMatrix4(t.matrixWorld);const c=i.ray.origin.distanceTo(aa);return c<i.near||c>i.far?null:{distance:c,point:aa.clone(),object:t}}function la(t,e,i,n,r,a,s,o,l,c,h,u){Zr.fromBufferAttribute(r,c),Yr.fromBufferAttribute(r,h),Xr.fromBufferAttribute(r,u);const d=t.morphTargetInfluences;if(e.morphTargets&&a&&d){Kr.set(0,0,0),$r.set(0,0,0),ta.set(0,0,0);for(let t=0,e=a.length;t<e;t++){const e=d[t],i=a[t];0!==e&&(Jr.fromBufferAttribute(i,c),qr.fromBufferAttribute(i,h),Qr.fromBufferAttribute(i,u),s?(Kr.addScaledVector(Jr,e),$r.addScaledVector(qr,e),ta.addScaledVector(Qr,e)):(Kr.addScaledVector(Jr.sub(Zr),e),$r.addScaledVector(qr.sub(Yr),e),ta.addScaledVector(Qr.sub(Xr),e)))}Zr.add(Kr),Yr.add($r),Xr.add(ta)}t.isSkinnedMesh&&(t.boneTransform(c,Zr),t.boneTransform(h,Yr),t.boneTransform(u,Xr));const f=oa(t,e,i,n,Zr,Yr,Xr,ra);if(f){o&&(ea.fromBufferAttribute(o,c),ia.fromBufferAttribute(o,h),na.fromBufferAttribute(o,u),f.uv=hr.getUV(ra,Zr,Yr,Xr,ea,ia,na,new Ni)),l&&(ea.fromBufferAttribute(l,c),ia.fromBufferAttribute(l,h),na.fromBufferAttribute(l,u),f.uv2=hr.getUV(ra,Zr,Yr,Xr,ea,ia,na,new Ni));const t=new yr(c,h,u);hr.getNormal(Zr,Yr,Xr,t.normal),f.face=t}return f}sa.prototype=Object.assign(Object.create(Jn.prototype),{constructor:sa,isMesh:!0,copy:function(t){return Jn.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0===n)return;if(null===i.boundingSphere&&i.computeBoundingSphere(),jr.copy(i.boundingSphere),jr.applyMatrix4(r),!1===t.ray.intersectsSphere(jr))return;if(Vr.getInverse(r),Wr.copy(t.ray).applyMatrix4(Vr),null!==i.boundingBox&&!1===Wr.intersectsBox(i.boundingBox))return;let a;if(i.isBufferGeometry){const r=i.index,s=i.attributes.position,o=i.morphAttributes.position,l=i.morphTargetsRelative,c=i.attributes.uv,h=i.attributes.uv2,u=i.groups,d=i.drawRange;if(null!==r)if(Array.isArray(n))for(let i=0,f=u.length;i<f;i++){const f=u[i],p=n[f.materialIndex];for(let i=Math.max(f.start,d.start),n=Math.min(f.start+f.count,d.start+d.count);i<n;i+=3){const n=r.getX(i),u=r.getX(i+1),d=r.getX(i+2);(a=la(this,p,t,Wr,s,o,l,c,h,n,u,d))&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=f.materialIndex,e.push(a))}}else{for(let i=Math.max(0,d.start),u=Math.min(r.count,d.start+d.count);i<u;i+=3){const u=r.getX(i),d=r.getX(i+1),f=r.getX(i+2);(a=la(this,n,t,Wr,s,o,l,c,h,u,d,f))&&(a.faceIndex=Math.floor(i/3),e.push(a))}}else if(void 0!==s)if(Array.isArray(n))for(let i=0,r=u.length;i<r;i++){const r=u[i],f=n[r.materialIndex];for(let i=Math.max(r.start,d.start),n=Math.min(r.start+r.count,d.start+d.count);i<n;i+=3){(a=la(this,f,t,Wr,s,o,l,c,h,i,i+1,i+2))&&(a.faceIndex=Math.floor(i/3),a.face.materialIndex=r.materialIndex,e.push(a))}}else{for(let i=Math.max(0,d.start),r=Math.min(s.count,d.start+d.count);i<r;i+=3){(a=la(this,n,t,Wr,s,o,l,c,h,i,i+1,i+2))&&(a.faceIndex=Math.floor(i/3),e.push(a))}}}else if(i.isGeometry){const r=Array.isArray(n),s=i.vertices,o=i.faces;let l;const c=i.faceVertexUvs[0];c.length>0&&(l=c);for(let i=0,c=o.length;i<c;i++){const c=o[i],h=r?n[c.materialIndex]:n;if(void 0===h)continue;const u=s[c.a],d=s[c.b],f=s[c.c];if(a=oa(this,h,t,Wr,u,d,f,ra)){if(l&&l[i]){const t=l[i];ea.copy(t[0]),ia.copy(t[1]),na.copy(t[2]),a.uv=hr.getUV(ra,u,d,f,ea,ia,na,new Ni)}a.face=c,a.faceIndex=i,e.push(a)}}}}});class ca extends Ur{constructor(t=1,e=1,i=1,n=1,r=1,a=1){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};const s=this;n=Math.floor(n),r=Math.floor(r);const o=[],l=[],c=[],h=[];let u=0,d=0;function f(t,e,i,n,r,a,f,p,m,g,_){const y=a/m,b=f/g,v=a/2,w=f/2,x=p/2,A=m+1,M=g+1;let S=0,E=0;const T=new Ji;for(let a=0;a<M;a++){const s=a*b-w;for(let o=0;o<A;o++){const u=o*y-v;T[t]=u*n,T[e]=s*r,T[i]=x,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[i]=p>0?1:-1,c.push(T.x,T.y,T.z),h.push(o/m),h.push(1-a/g),S+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const i=u+e+A*t,n=u+e+A*(t+1),r=u+(e+1)+A*(t+1),a=u+(e+1)+A*t;o.push(i,n,a),o.push(n,r,a),E+=6}s.addGroup(d,E,_),d+=E,u+=S}f("z","y","x",-1,-1,i,e,t,a=Math.floor(a),r,0),f("z","y","x",1,-1,i,e,-t,a,r,1),f("x","z","y",1,1,t,i,e,n,a,2),f("x","z","y",1,-1,t,i,-e,n,a,3),f("x","y","z",1,-1,t,e,i,n,r,4),f("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(o),this.setAttribute("position",new Br(l,3)),this.setAttribute("normal",new Br(c,3)),this.setAttribute("uv",new Br(h,2))}}function ha(t){const e={};for(const i in t){e[i]={};for(const n in t[i]){const r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}function ua(t){const e={};for(let i=0;i<t.length;i++){const n=ha(t[i]);for(const t in n)e[t]=n[t]}return e}const da={clone:ha,merge:ua};var fa="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",pa="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function ma(t){vr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=fa,this.fragmentShader=pa,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function ga(){Jn.call(this),this.type="Camera",this.matrixWorldInverse=new Mn,this.projectionMatrix=new Mn,this.projectionMatrixInverse=new Mn}function _a(t,e,i,n){ga.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}ma.prototype=Object.create(vr.prototype),ma.prototype.constructor=ma,ma.prototype.isShaderMaterial=!0,ma.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ha(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},ma.prototype.toJSON=function(t){const e=vr.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const t in this.extensions)!0===this.extensions[t]&&(i[t]=!0);return Object.keys(i).length>0&&(e.extensions=i),e},ga.prototype=Object.assign(Object.create(Jn.prototype),{constructor:ga,isCamera:!0,copy:function(t,e){return Jn.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Ji),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Jn.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){Jn.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),_a.prototype=Object.assign(Object.create(ga.prototype),{constructor:_a,isPerspectiveCamera:!0,copy:function(t,e){return ga.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Fi.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(.5*Fi.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Fi.RAD2DEG*Math.atan(Math.tan(.5*Fi.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(.5*Fi.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n;const a=this.view;if(null!==this.view&&this.view.enabled){const t=a.fullWidth,s=a.fullHeight;r+=a.offsetX*n/t,e-=a.offsetY*i/s,n*=a.width/t,i*=a.height/s}const s=this.filmOffset;0!==s&&(r+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=Jn.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const ya=90,ba=1;function va(t,e,i){if(Jn.call(this),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const n=new _a(ya,ba,t,e);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new Ji(1,0,0)),this.add(n);const r=new _a(ya,ba,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Ji(-1,0,0)),this.add(r);const a=new _a(ya,ba,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new Ji(0,1,0)),this.add(a);const s=new _a(ya,ba,t,e);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new Ji(0,-1,0)),this.add(s);const o=new _a(ya,ba,t,e);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Ji(0,0,1)),this.add(o);const l=new _a(ya,ba,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Ji(0,0,-1)),this.add(l),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();const c=t.xr.enabled,h=t.getRenderTarget();t.xr.enabled=!1;const u=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,r),t.setRenderTarget(i,2),t.render(e,a),t.setRenderTarget(i,3),t.render(e,s),t.setRenderTarget(i,4),t.render(e,o),i.texture.generateMipmaps=u,t.setRenderTarget(i,5),t.render(e,l),t.setRenderTarget(h),t.xr.enabled=c}}function wa(t,e,i,n,r,a,s,o,l,c){t=void 0!==t?t:[],e=void 0!==e?e:at,s=void 0!==s?s:Gt,Wi.call(this,t,e,i,n,r,a,s,o,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}function xa(t,e,i){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=i),Zi.call(this,t,t,e),e=e||{},this.texture=new wa(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}function Aa(t,e,i,n,r,a,s,o,l,c,h,u){Wi.call(this,null,a,s,o,l,c,n,r,h,u),this.image={data:t||null,width:e||1,height:i||1},this.magFilter=void 0!==l?l:pt,this.minFilter=void 0!==c?c:pt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}va.prototype=Object.create(Jn.prototype),va.prototype.constructor=va,wa.prototype=Object.create(Wi.prototype),wa.prototype.constructor=wa,wa.prototype.isCubeTexture=!0,Object.defineProperty(wa.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),xa.prototype=Object.create(Zi.prototype),xa.prototype.constructor=xa,xa.prototype.isWebGLCubeRenderTarget=!0,xa.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Ft,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",fragmentShader:"\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t"},n=new ca(5,5,5),r=new ma({name:"CubemapFromEquirect",uniforms:ha(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:m,blending:b});r.uniforms.tEquirect.value=e;const a=new sa(n,r),s=e.minFilter;return e.minFilter===xt&&(e.minFilter=bt),new va(1,10,this).update(t,a),e.minFilter=s,a.geometry.dispose(),a.material.dispose(),this},xa.prototype.clear=function(t,e,i,n){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,i,n);t.setRenderTarget(r)},Aa.prototype=Object.create(Wi.prototype),Aa.prototype.constructor=Aa,Aa.prototype.isDataTexture=!0;const Ma=new mn,Sa=new Ji;class Ea{constructor(t,e,i,n,r,a){this.planes=[void 0!==t?t:new $n,void 0!==e?e:new $n,void 0!==i?i:new $n,void 0!==n?n:new $n,void 0!==r?r:new $n,void 0!==a?a:new $n]}set(t,e,i,n,r,a){const s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(a),this}clone(){return(new this.constructor).copy(this)}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const e=this.planes,i=t.elements,n=i[0],r=i[1],a=i[2],s=i[3],o=i[4],l=i[5],c=i[6],h=i[7],u=i[8],d=i[9],f=i[10],p=i[11],m=i[12],g=i[13],_=i[14],y=i[15];return e[0].setComponents(s-n,h-o,p-u,y-m).normalize(),e[1].setComponents(s+n,h+o,p+u,y+m).normalize(),e[2].setComponents(s+r,h+l,p+d,y+g).normalize(),e[3].setComponents(s-r,h-l,p-d,y-g).normalize(),e[4].setComponents(s-a,h-c,p-f,y-_).normalize(),e[5].setComponents(s+a,h+c,p+f,y+_).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ma.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ma)}intersectsSprite(t){return Ma.center.set(0,0,0),Ma.radius=.7071067811865476,Ma.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ma)}intersectsSphere(t){const e=this.planes,i=t.center,n=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(i)<n)return!1}return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const n=e[i];if(Sa.x=n.normal.x>0?t.max.x:t.min.x,Sa.y=n.normal.y>0?t.max.y:t.min.y,Sa.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(Sa)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}}function Ta(){let t=null,e=!1,i=null,n=null;function r(e,a){i(e,a),n=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==i&&(n=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(t){i=t},setContext:function(e){t=e}}}function Ia(t,e){const i=e.isWebGL2,n=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),n.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const i=n.get(e);i&&(t.deleteBuffer(i.buffer),n.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){var a=n.get(e);return void((!a||a.version<e.version)&&n.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const s=n.get(e);void 0===s?n.set(e,function(e,i){const n=e.array,r=e.usage,a=t.createBuffer();t.bindBuffer(i,a),t.bufferData(i,n,r),e.onUploadCallback();let s=5126;return n instanceof Float32Array?s=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?s=5123:n instanceof Int16Array?s=5122:n instanceof Uint32Array?s=5125:n instanceof Int32Array?s=5124:n instanceof Int8Array?s=5120:n instanceof Uint8Array&&(s=5121),{buffer:a,type:s,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version}}(e,r)):s.version<e.version&&(function(e,n,r){const a=n.array,s=n.updateRange;t.bindBuffer(r,e),-1===s.count?t.bufferSubData(r,0,a):(i?t.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):t.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1)}(s.buffer,e,r),s.version=e.version)}}}class Ca extends Ur{constructor(t,e,i,n){super(),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};const r=(t=t||1)/2,a=(e=e||1)/2,s=Math.floor(i)||1,o=Math.floor(n)||1,l=s+1,c=o+1,h=t/s,u=e/o,d=[],f=[],p=[],m=[];for(let t=0;t<c;t++){const e=t*u-a;for(let i=0;i<l;i++){const n=i*h-r;f.push(n,-e,0),p.push(0,0,1),m.push(i/s),m.push(1-t/o)}}for(let t=0;t<o;t++)for(let e=0;e<s;e++){const i=e+l*t,n=e+l*(t+1),r=e+1+l*(t+1),a=e+1+l*t;d.push(i,n,a),d.push(n,r,a)}this.setIndex(d),this.setAttribute("position",new Br(f,3)),this.setAttribute("normal",new Br(p,3)),this.setAttribute("uv",new Br(m,2))}}const ka={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Pa={common:{diffuse:{value:new _r(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new zi},uv2Transform:{value:new zi},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ni(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _r(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _r(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new zi}},sprite:{diffuse:{value:new _r(15658734)},opacity:{value:1},center:{value:new Ni(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new zi}}},Ba={basic:{uniforms:ua([Pa.common,Pa.specularmap,Pa.envmap,Pa.aomap,Pa.lightmap,Pa.fog]),vertexShader:ka.meshbasic_vert,fragmentShader:ka.meshbasic_frag},lambert:{uniforms:ua([Pa.common,Pa.specularmap,Pa.envmap,Pa.aomap,Pa.lightmap,Pa.emissivemap,Pa.fog,Pa.lights,{emissive:{value:new _r(0)}}]),vertexShader:ka.meshlambert_vert,fragmentShader:ka.meshlambert_frag},phong:{uniforms:ua([Pa.common,Pa.specularmap,Pa.envmap,Pa.aomap,Pa.lightmap,Pa.emissivemap,Pa.bumpmap,Pa.normalmap,Pa.displacementmap,Pa.fog,Pa.lights,{emissive:{value:new _r(0)},specular:{value:new _r(1118481)},shininess:{value:30}}]),vertexShader:ka.meshphong_vert,fragmentShader:ka.meshphong_frag},standard:{uniforms:ua([Pa.common,Pa.envmap,Pa.aomap,Pa.lightmap,Pa.emissivemap,Pa.bumpmap,Pa.normalmap,Pa.displacementmap,Pa.roughnessmap,Pa.metalnessmap,Pa.fog,Pa.lights,{emissive:{value:new _r(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ka.meshphysical_vert,fragmentShader:ka.meshphysical_frag},toon:{uniforms:ua([Pa.common,Pa.aomap,Pa.lightmap,Pa.emissivemap,Pa.bumpmap,Pa.normalmap,Pa.displacementmap,Pa.gradientmap,Pa.fog,Pa.lights,{emissive:{value:new _r(0)}}]),vertexShader:ka.meshtoon_vert,fragmentShader:ka.meshtoon_frag},matcap:{uniforms:ua([Pa.common,Pa.bumpmap,Pa.normalmap,Pa.displacementmap,Pa.fog,{matcap:{value:null}}]),vertexShader:ka.meshmatcap_vert,fragmentShader:ka.meshmatcap_frag},points:{uniforms:ua([Pa.points,Pa.fog]),vertexShader:ka.points_vert,fragmentShader:ka.points_frag},dashed:{uniforms:ua([Pa.common,Pa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ka.linedashed_vert,fragmentShader:ka.linedashed_frag},depth:{uniforms:ua([Pa.common,Pa.displacementmap]),vertexShader:ka.depth_vert,fragmentShader:ka.depth_frag},normal:{uniforms:ua([Pa.common,Pa.bumpmap,Pa.normalmap,Pa.displacementmap,{opacity:{value:1}}]),vertexShader:ka.normal_vert,fragmentShader:ka.normal_frag},sprite:{uniforms:ua([Pa.sprite,Pa.fog]),vertexShader:ka.sprite_vert,fragmentShader:ka.sprite_frag},background:{uniforms:{uvTransform:{value:new zi},t2D:{value:null}},vertexShader:ka.background_vert,fragmentShader:ka.background_frag},cube:{uniforms:ua([Pa.envmap,{opacity:{value:1}}]),vertexShader:ka.cube_vert,fragmentShader:ka.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ka.equirect_vert,fragmentShader:ka.equirect_frag},distanceRGBA:{uniforms:ua([Pa.common,Pa.displacementmap,{referencePosition:{value:new Ji},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ka.distanceRGBA_vert,fragmentShader:ka.distanceRGBA_frag},shadow:{uniforms:ua([Pa.lights,Pa.fog,{color:{value:new _r(0)},opacity:{value:1}}]),vertexShader:ka.shadow_vert,fragmentShader:ka.shadow_frag}};function La(t,e,i,n){const r=t.getParameter(34921),a=n.isWebGL2?null:e.get("OES_vertex_array_object"),s=n.isWebGL2||null!==a,o={},l=d(null);let c=l;function h(e){return n.isWebGL2?t.bindVertexArray(e):a.bindVertexArrayOES(e)}function u(e){return n.isWebGL2?t.deleteVertexArray(e):a.deleteVertexArrayOES(e)}function d(t){const e=[],i=[],n=[];for(let t=0;t<r;t++)e[t]=0,i[t]=0,n[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:n,object:t,attributes:{},index:null}}function f(){const t=c.newAttributes;for(let e=0,i=t.length;e<i;e++)t[e]=0}function p(t){m(t,0)}function m(i,r){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;if(a[i]=1,0===s[i]&&(t.enableVertexAttribArray(i),s[i]=1),o[i]!==r){(n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),o[i]=r}}function g(){const e=c.newAttributes,i=c.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==e[n]&&(t.disableVertexAttribArray(n),i[n]=0)}function _(e,i,r,a,s,o){!0!==n.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,i,r,a,s,o):t.vertexAttribIPointer(e,i,r,s,o)}function y(){b(),c!==l&&h((c=l).object)}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,u,y,b){let v=!1;if(s){const e=function(e,i,r){const s=!0===r.wireframe;let l=o[e.id];void 0===l&&(l={},o[e.id]=l);let c=l[i.id];void 0===c&&(c={},l[i.id]=c);let h=c[s];return void 0===h&&(h=d(n.isWebGL2?t.createVertexArray():a.createVertexArrayOES()),c[s]=h),h}(y,u,l);c!==e&&h((c=e).object),(v=function(t,e){const i=c.attributes,n=t.attributes;if(Object.keys(i).length!==Object.keys(n).length)return!0;for(const t in n){const e=i[t],r=n[t];if(void 0===e)return!0;if(e.attribute!==r)return!0;if(e.data!==r.data)return!0}return c.index!==e}(y,b))&&function(t,e){const i={},n=t.attributes;for(const t in n){const e=n[t],r={};r.attribute=e,e.data&&(r.data=e.data),i[t]=r}c.attributes=i,c.index=e}(y,b)}else{const t=!0===l.wireframe;c.geometry===y.id&&c.program===u.id&&c.wireframe===t||(c.geometry=y.id,c.program=u.id,c.wireframe=t,v=!0)}!0===r.isInstancedMesh&&(v=!0),null!==b&&i.update(b,34963),v&&(function(r,a,s,o){if(!1===n.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,c=s.getAttributes(),h=a.defaultAttributeValues;for(const e in c){const n=c[e];if(n>=0){const a=l[e];if(void 0!==a){const e=a.normalized,r=a.itemSize,s=i.get(a);if(void 0===s)continue;const l=s.buffer,c=s.type,h=s.bytesPerElement;if(a.isInterleavedBufferAttribute){const i=a.data,s=i.stride,u=a.offset;i&&i.isInstancedInterleavedBuffer?(m(n,i.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)):p(n),t.bindBuffer(34962,l),_(n,r,c,e,s*h,u*h)}else a.isInstancedBufferAttribute?(m(n,a.meshPerAttribute),void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)):p(n),t.bindBuffer(34962,l),_(n,r,c,e,0,0)}else if("instanceMatrix"===e){const e=i.get(r.instanceMatrix);if(void 0===e)continue;const a=e.buffer,s=e.type;m(n+0,1),m(n+1,1),m(n+2,1),m(n+3,1),t.bindBuffer(34962,a),t.vertexAttribPointer(n+0,4,s,!1,64,0),t.vertexAttribPointer(n+1,4,s,!1,64,16),t.vertexAttribPointer(n+2,4,s,!1,64,32),t.vertexAttribPointer(n+3,4,s,!1,64,48)}else if("instanceColor"===e){const e=i.get(r.instanceColor);if(void 0===e)continue;const a=e.buffer,s=e.type;m(n,1),t.bindBuffer(34962,a),t.vertexAttribPointer(n,3,s,!1,12,0)}else if(void 0!==h){const i=h[e];if(void 0!==i)switch(i.length){case 2:t.vertexAttrib2fv(n,i);break;case 3:t.vertexAttrib3fv(n,i);break;case 4:t.vertexAttrib4fv(n,i);break;default:t.vertexAttrib1fv(n,i)}}}}g()}(r,l,u,y),null!==b&&t.bindBuffer(34963,i.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const t in o){const e=o[t];for(const t in e){const i=e[t];for(const t in i)u(i[t].object),delete i[t];delete e[t]}delete o[t]}},releaseStatesOfGeometry:function(t){if(void 0===o[t.id])return;const e=o[t.id];for(const t in e){const i=e[t];for(const t in i)u(i[t].object),delete i[t];delete e[t]}delete o[t.id]},releaseStatesOfProgram:function(t){for(const e in o){const i=o[e];if(void 0===i[t.id])continue;const n=i[t.id];for(const t in n)u(n[t].object),delete n[t];delete i[t.id]}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:g}}function Ra(t,e){return t[0]-e[0]}function Da(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Oa(t,e,i,n){Wi.call(this,null),this.image={data:t||null,width:e||1,height:i||1,depth:n||1},this.magFilter=pt,this.minFilter=pt,this.wrapR=dt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Ga(t,e,i,n){Wi.call(this,null),this.image={data:t||null,width:e||1,height:i||1,depth:n||1},this.magFilter=pt,this.minFilter=pt,this.wrapR=dt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Ba.physical={uniforms:ua([Ba.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ni(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new _r(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ka.meshphysical_vert,fragmentShader:ka.meshphysical_frag},Oa.prototype=Object.create(Wi.prototype),Oa.prototype.constructor=Oa,Oa.prototype.isDataTexture2DArray=!0,Ga.prototype=Object.create(Wi.prototype),Ga.prototype.constructor=Ga,Ga.prototype.isDataTexture3D=!0;const Fa=new Wi,Na=new Oa,za=new Ga,Ha=new wa,Ua=[],Va=[],Wa=new Float32Array(16),ja=new Float32Array(9),Za=new Float32Array(4);function Ya(t,e,i){const n=t[0];if(n<=0||n>0)return t;const r=e*i;let a=Ua[r];if(void 0===a&&(a=new Float32Array(r),Ua[r]=a),0!==e){n.toArray(a,0);for(let n=1,r=0;n!==e;++n)r+=i,t[n].toArray(a,r)}return a}function Xa(t,e){if(t.length!==e.length)return!1;for(let i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function Ja(t,e){for(let i=0,n=e.length;i<n;i++)t[i]=e[i]}function qa(t,e){let i=Va[e];void 0===i&&(i=new Int32Array(e),Va[e]=i);for(let n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function Qa(t,e){const i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function Ka(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Xa(i,e))return;t.uniform2fv(this.addr,e),Ja(i,e)}}function $a(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(void 0!==e.r)i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(Xa(i,e))return;t.uniform3fv(this.addr,e),Ja(i,e)}}function ts(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Xa(i,e))return;t.uniform4fv(this.addr,e),Ja(i,e)}}function es(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(Xa(i,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ja(i,e)}else{if(Xa(i,n))return;Za.set(n),t.uniformMatrix2fv(this.addr,!1,Za),Ja(i,n)}}function is(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(Xa(i,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ja(i,e)}else{if(Xa(i,n))return;ja.set(n),t.uniformMatrix3fv(this.addr,!1,ja),Ja(i,n)}}function ns(t,e){const i=this.cache,n=e.elements;if(void 0===n){if(Xa(i,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ja(i,e)}else{if(Xa(i,n))return;Wa.set(n),t.uniformMatrix4fv(this.addr,!1,Wa),Ja(i,n)}}function rs(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTexture2D(e||Fa,r)}function as(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||Na,r)}function ss(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||za,r)}function os(t,e,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.safeSetTextureCube(e||Ha,r)}function ls(t,e){const i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function cs(t,e){const i=this.cache;Xa(i,e)||(t.uniform2iv(this.addr,e),Ja(i,e))}function hs(t,e){const i=this.cache;Xa(i,e)||(t.uniform3iv(this.addr,e),Ja(i,e))}function us(t,e){const i=this.cache;Xa(i,e)||(t.uniform4iv(this.addr,e),Ja(i,e))}function ds(t,e){const i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function fs(t,e){t.uniform1fv(this.addr,e)}function ps(t,e){t.uniform1iv(this.addr,e)}function ms(t,e){t.uniform2iv(this.addr,e)}function gs(t,e){t.uniform3iv(this.addr,e)}function _s(t,e){t.uniform4iv(this.addr,e)}function ys(t,e){const i=Ya(e,this.size,2);t.uniform2fv(this.addr,i)}function bs(t,e){const i=Ya(e,this.size,3);t.uniform3fv(this.addr,i)}function vs(t,e){const i=Ya(e,this.size,4);t.uniform4fv(this.addr,i)}function ws(t,e){const i=Ya(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,i)}function xs(t,e){const i=Ya(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,i)}function As(t,e){const i=Ya(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,i)}function Ms(t,e,i){const n=e.length,r=qa(i,n);t.uniform1iv(this.addr,r);for(let t=0;t!==n;++t)i.safeSetTexture2D(e[t]||Fa,r[t])}function Ss(t,e,i){const n=e.length,r=qa(i,n);t.uniform1iv(this.addr,r);for(let t=0;t!==n;++t)i.safeSetTextureCube(e[t]||Ha,r[t])}function Es(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Qa;case 35664:return Ka;case 35665:return $a;case 35666:return ts;case 35674:return es;case 35675:return is;case 35676:return ns;case 5124:case 35670:return ls;case 35667:case 35671:return cs;case 35668:case 35672:return hs;case 35669:case 35673:return us;case 5125:return ds;case 35678:case 36198:case 36298:case 36306:case 35682:return rs;case 35679:case 36299:case 36307:return ss;case 35680:case 36300:case 36308:case 36293:return os;case 36289:case 36303:case 36311:case 36292:return as}}(e.type)}function Ts(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return fs;case 35664:return ys;case 35665:return bs;case 35666:return vs;case 35674:return ws;case 35675:return xs;case 35676:return As;case 5124:case 35670:return ps;case 35667:case 35671:return ms;case 35668:case 35672:return gs;case 35669:case 35673:return _s;case 35678:case 36198:case 36298:case 36306:case 35682:return Ms;case 35680:case 36300:case 36308:case 36293:return Ss}}(e.type)}function Is(t){this.id=t,this.seq=[],this.map={}}Ts.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Ja(e,t)},Is.prototype.setValue=function(t,e,i){const n=this.seq;for(let r=0,a=n.length;r!==a;++r){const a=n[r];a.setValue(t,e[a.id],i)}};const Cs=/([\w\d_]+)(\])?(\[|\.)?/g;function ks(t,e){t.seq.push(e),t.map[e.id]=e}function Ps(t,e,i){const n=t.name,r=n.length;for(Cs.lastIndex=0;;){const a=Cs.exec(n),s=Cs.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===r){ks(i,void 0===c?new Es(o,t,e):new Ts(o,t,e));break}{let t=i.map[o];void 0===t&&ks(i,t=new Is(o)),i=t}}}function Bs(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,35718);for(let n=0;n<i;++n){const i=t.getActiveUniform(e,n);Ps(i,t.getUniformLocation(e,i.name),this)}}function Ls(t,e,i){const n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}Bs.prototype.setValue=function(t,e,i,n){const r=this.map[e];void 0!==r&&r.setValue(t,i,n)},Bs.prototype.setOptional=function(t,e,i){const n=e[i];void 0!==n&&this.setValue(t,i,n)},Bs.upload=function(t,e,i,n){for(let r=0,a=e.length;r!==a;++r){const a=e[r],s=i[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,n)}},Bs.seqWithValue=function(t,e){const i=[];for(let n=0,r=t.length;n!==r;++n){const r=t[n];r.id in e&&i.push(r)}return i};let Rs=0;function Ds(t){switch(t){case qe:return["Linear","( value )"];case Qe:return["sRGB","( value )"];case $e:return["RGBE","( value )"];case ei:return["RGBM","( value, 7.0 )"];case ii:return["RGBM","( value, 16.0 )"];case ni:return["RGBD","( value, 256.0 )"];case Ke:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case ti:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function Os(t,e,i){const n=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return n&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+i+"\n"+r+function(t){const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(t.getShaderSource(e))}function Gs(t,e){const i=Ds(e);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Fs(t){return""!==t}function Ns(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function zs(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Hs=/^[ \t]*#include +<([\w\d./]+)>/gm;function Us(t){return t.replace(Hs,Vs)}function Vs(t,e){const i=ka[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return Us(i)}const Ws=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,js=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Zs(t){return t.replace(js,Xs).replace(Ws,Ys)}function Ys(t,e,i,n){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Xs(t,e,i,n)}function Xs(t,e,i,n){let r="";for(let t=parseInt(e);t<parseInt(i);t++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function Js(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function qs(t,e,i,n){const r=t.getContext(),a=i.defines;let s=i.vertexShader,o=i.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===u?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===d?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===f&&(e="SHADOWMAP_TYPE_VSM"),e}(i),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case at:case st:e="ENVMAP_TYPE_CUBE";break;case ct:case ht:e="ENVMAP_TYPE_CUBE_UV"}return e}(i),h=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case st:case ht:e="ENVMAP_MODE_REFRACTION"}return e}(i),p=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case J:e="ENVMAP_BLENDING_MULTIPLY";break;case q:e="ENVMAP_BLENDING_MIX";break;case Q:e="ENVMAP_BLENDING_ADD"}return e}(i),m=t.gammaFactor>0?t.gammaFactor:1,g=i.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Fs).join("\n")}(i),_=function(t){const e=[];for(const i in t){const n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}(a),y=r.createProgram();let b,v,w=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?((b=[_].filter(Fs).join("\n")).length>0&&(b+="\n"),(v=[g,_].filter(Fs).join("\n")).length>0&&(v+="\n")):(b=[Js(i),"#define SHADER_NAME "+i.shaderName,_,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Fs).join("\n"),v=[g,Js(i),"#define SHADER_NAME "+i.shaderName,_,i.alphaTest?"#define ALPHATEST "+i.alphaTest+(i.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+h:"",i.envMap?"#define "+p:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.sheen?"#define USE_SHEEN":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==K?"#define TONE_MAPPING":"",i.toneMapping!==K?ka.tonemapping_pars_fragment:"",i.toneMapping!==K?function(t,e){let i;switch(e){case $:i="Linear";break;case tt:i="Reinhard";break;case et:i="OptimizedCineon";break;case it:i="ACESFilmic";break;case nt:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",ka.encodings_pars_fragment,i.map?Gs("mapTexelToLinear",i.mapEncoding):"",i.matcap?Gs("matcapTexelToLinear",i.matcapEncoding):"",i.envMap?Gs("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMap?Gs("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.lightMap?Gs("lightMapTexelToLinear",i.lightMapEncoding):"",function(t,e){const i=Ds(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}("linearToOutputTexel",i.outputEncoding),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Fs).join("\n")),s=zs(s=Ns(s=Us(s),i),i),o=zs(o=Ns(o=Us(o),i),i),s=Zs(s),o=Zs(o),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(w="#version 300 es\n",b=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,v=["#define varying in",i.glslVersion===Ri?"":"out highp vec4 pc_fragColor;",i.glslVersion===Ri?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const x=w+v+o,A=Ls(r,35633,w+b+s),M=Ls(r,35632,x);if(r.attachShader(y,A),r.attachShader(y,M),void 0!==i.index0AttributeName?r.bindAttribLocation(y,0,i.index0AttributeName):!0===i.morphTargets&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),t.debug.checkShaderErrors){const t=r.getProgramInfoLog(y).trim(),e=r.getShaderInfoLog(A).trim(),i=r.getShaderInfoLog(M).trim();let n=!0,a=!0;if(!1===r.getProgramParameter(y,35714)){n=!1;const e=Os(r,A,"vertex"),i=Os(r,M,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(y,35715),"gl.getProgramInfoLog",t,e,i)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==e&&""!==i||(a=!1);a&&(this.diagnostics={runnable:n,programLog:t,vertexShader:{log:e,prefix:b},fragmentShader:{log:i,prefix:v}})}let S,E;return r.deleteShader(A),r.deleteShader(M),this.getUniforms=function(){return void 0===S&&(S=new Bs(r,y)),S},this.getAttributes=function(){return void 0===E&&(E=function(t,e){const i={},n=t.getProgramParameter(e,35721);for(let r=0;r<n;r++){const n=t.getActiveAttrib(e,r).name;i[n]=t.getAttribLocation(e,n)}return i}(r,y)),E},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=i.shaderName,this.id=Rs++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=A,this.fragmentShader=M,this}function Qs(t,e,i,n,r,a){const s=[],o=n.isWebGL2,l=n.logarithmicDepthBuffer,c=n.floatVertexTextures,h=n.maxVertexUniforms,u=n.vertexTextures;let d=n.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function _(t){let e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=qe,e}return{getParameters:function(r,s,p,y,b){const v=y.fog,w=r.isMeshStandardMaterial?y.environment:null,x=e.get(r.envMap||w),A=f[r.type],M=b.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(c)return 1024;{const t=h,i=Math.floor((t-20)/4),n=Math.min(i,e.length);return n<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+n+"."),0):n}}(b):0;let S,E;if(null!==r.precision&&(d=n.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",d,"instead."),A){const t=Ba[A];S=t.vertexShader,E=t.fragmentShader}else S=r.vertexShader,E=r.fragmentShader;const T=t.getRenderTarget();return{isWebGL2:o,shaderID:A,shaderName:r.type,vertexShader:S,fragmentShader:E,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:d,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:u,outputEncoding:null!==T?_(T.texture):t.outputEncoding,map:!!r.map,mapEncoding:_(r.map),matcap:!!r.matcap,matcapEncoding:_(r.matcap),envMap:!!x,envMapMode:x&&x.mapping,envMapEncoding:_(x),envMapCubeUV:!!x&&(x.mapping===ct||x.mapping===ht),lightMap:!!r.lightMap,lightMapEncoding:_(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:_(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===oi,tangentSpaceNormalMap:r.normalMapType===si,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap||r.transmissionMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap||!r.displacementMap),fog:!!v,useFog:r.fog,fogExp2:v&&v.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:l,skinning:r.skinning&&M>0,maxBones:M,useVertexTexture:c,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&p.length>0,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:K,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===g,flipSided:r.side===m,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:o||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:o||i.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()}},getProgramCacheKey:function(e){const i=[];if(e.shaderID?i.push(e.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)i.push(t),i.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<p.length;t++)i.push(e[p[t]]);i.push(t.outputEncoding),i.push(t.gammaFactor)}return i.push(e.customProgramCacheKey),i.join()},getUniforms:function(t){const e=f[t.type];let i;if(e){const t=Ba[e];i=da.clone(t.uniforms)}else i=t.uniforms;return i},acquireProgram:function(e,i){let n;for(let t=0,e=s.length;t<e;t++){const e=s[t];if(e.cacheKey===i){++(n=e).usedTimes;break}}return void 0===n&&(n=new qs(t,i,e,r),s.push(n)),n},releaseProgram:function(t){if(0==--t.usedTimes){const e=s.indexOf(t);s[e]=s[s.length-1],s.pop(),t.destroy()}},programs:s}}function Ks(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function $s(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function to(t){const e=[];let i=0;const n=[],r=[],a={id:-1};function s(n,r,s,o,l,c){let h=e[i];const u=t.get(s);return void 0===h?(h={id:n.id,object:n,geometry:r,material:s,program:u.program||a,groupOrder:o,renderOrder:n.renderOrder,z:l,group:c},e[i]=h):(h.id=n.id,h.object=n,h.geometry=r,h.material=s,h.program=u.program||a,h.groupOrder=o,h.renderOrder=n.renderOrder,h.z=l,h.group=c),i++,h}return{opaque:n,transparent:r,init:function(){i=0,n.length=0,r.length=0},push:function(t,e,i,a,o,l){const c=s(t,e,i,a,o,l);(!0===i.transparent?r:n).push(c)},unshift:function(t,e,i,a,o,l){const c=s(t,e,i,a,o,l);(!0===i.transparent?r:n).unshift(c)},finish:function(){for(let t=i,n=e.length;t<n;t++){const i=e[t];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Ks),r.length>1&&r.sort(e||$s)}}}let eo=0;function io(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function no(t,e){const i=new function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new Ji,color:new _r};break;case"SpotLight":i={position:new Ji,direction:new Ji,color:new _r,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Ji,color:new _r,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Ji,skyColor:new _r,groundColor:new _r};break;case"RectAreaLight":i={color:new _r,position:new Ji,halfWidth:new Ji,halfHeight:new Ji}}return t[e.id]=i,i}}},n=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ni};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ni,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i,i}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)r.probe.push(new Ji);const a=new Ji,s=new Mn,o=new Mn;return{setup:function(l,c,h){let u=0,d=0,f=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let p=0,m=0,g=0,_=0,y=0,b=0,v=0,w=0;const x=h.matrixWorldInverse;l.sort(io);for(let t=0,e=l.length;t<e;t++){const e=l[t],c=e.color,h=e.intensity,A=e.distance,M=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)u+=c.r*h,d+=c.g*h,f+=c.b*h;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],h);else if(e.isDirectionalLight){const t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),t.direction.setFromMatrixPosition(e.matrixWorld),a.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(x),e.castShadow){const t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,r.directionalShadow[p]=i,r.directionalShadowMap[p]=M,r.directionalShadowMatrix[p]=e.shadow.matrix,b++}r.directional[p]=t,p++}else if(e.isSpotLight){const t=i.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(x),t.color.copy(c).multiplyScalar(h),t.distance=A,t.direction.setFromMatrixPosition(e.matrixWorld),a.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(a),t.direction.transformDirection(x),t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,r.spotShadow[g]=i,r.spotShadowMap[g]=M,r.spotShadowMatrix[g]=e.shadow.matrix,w++}r.spot[g]=t,g++}else if(e.isRectAreaLight){const t=i.get(e);t.color.copy(c).multiplyScalar(h),t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(x),o.identity(),s.copy(e.matrixWorld),s.premultiply(x),o.extractRotation(s),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),r.rectArea[_]=t,_++}else if(e.isPointLight){const t=i.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(x),t.color.copy(e.color).multiplyScalar(e.intensity),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,i.shadowCameraNear=t.camera.near,i.shadowCameraFar=t.camera.far,r.pointShadow[m]=i,r.pointShadowMap[m]=M,r.pointShadowMatrix[m]=e.shadow.matrix,v++}r.point[m]=t,m++}else if(e.isHemisphereLight){const t=i.get(e);t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(x),t.direction.normalize(),t.skyColor.copy(e.color).multiplyScalar(h),t.groundColor.copy(e.groundColor).multiplyScalar(h),r.hemi[y]=t,y++}}_>0&&(e.isWebGL2?(r.rectAreaLTC1=Pa.LTC_FLOAT_1,r.rectAreaLTC2=Pa.LTC_FLOAT_2):!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=Pa.LTC_FLOAT_1,r.rectAreaLTC2=Pa.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Pa.LTC_HALF_1,r.rectAreaLTC2=Pa.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=f;const A=r.hash;A.directionalLength===p&&A.pointLength===m&&A.spotLength===g&&A.rectAreaLength===_&&A.hemiLength===y&&A.numDirectionalShadows===b&&A.numPointShadows===v&&A.numSpotShadows===w||(r.directional.length=p,r.spot.length=g,r.rectArea.length=_,r.point.length=m,r.hemi.length=y,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=v,r.pointShadowMap.length=v,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=v,r.spotShadowMatrix.length=w,A.directionalLength=p,A.pointLength=m,A.spotLength=g,A.rectAreaLength=_,A.hemiLength=y,A.numDirectionalShadows=b,A.numPointShadows=v,A.numSpotShadows=w,r.version=eo++)},state:r}}function ro(t,e){const i=new no(t,e),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:function(t){i.setup(n,r,t)},pushLight:function(t){n.push(t)},pushShadow:function(t){r.push(t)}}}function ao(t){vr.call(this),this.type="MeshDepthMaterial",this.depthPacking=ri,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function so(t){vr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Ji,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}ao.prototype=Object.create(vr.prototype),ao.prototype.constructor=ao,ao.prototype.isMeshDepthMaterial=!0,ao.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},so.prototype=Object.create(vr.prototype),so.prototype.constructor=so,so.prototype.isMeshDistanceMaterial=!0,so.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var oo="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",lo="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function co(t,e,i){let n=new Ea;const r=new Ni,a=new Ni,s=new ji,o=[],l=[],c={},h={0:m,1:p,2:g},d=new ma({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ni},radius:{value:4}},vertexShader:lo,fragmentShader:oo}),_=d.clone();_.defines.HORIZONAL_PASS=1;const y=new Ur;y.setAttribute("position",new Mr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new sa(y,d),w=this;function x(i,n){const r=e.update(v);d.uniforms.shadow_pass.value=i.map.texture,d.uniforms.resolution.value=i.mapSize,d.uniforms.radius.value=i.radius,t.setRenderTarget(i.mapPass),t.clear(),t.renderBufferDirect(n,null,r,d,v,null),_.uniforms.shadow_pass.value=i.mapPass.texture,_.uniforms.resolution.value=i.mapSize,_.uniforms.radius.value=i.radius,t.setRenderTarget(i.map),t.clear(),t.renderBufferDirect(n,null,r,_,v,null)}function A(t,e,i){const n=t<<0|e<<1|i<<2;let r=o[n];return void 0===r&&(r=new ao({depthPacking:ai,morphTargets:t,skinning:e}),o[n]=r),r}function M(t,e,i){const n=t<<0|e<<1|i<<2;let r=l[n];return void 0===r&&(r=new so({morphTargets:t,skinning:e}),l[n]=r),r}function S(e,i,n,r,a,s,o){let l=null,u=A,d=e.customDepthMaterial;if(!0===r.isPointLight&&(u=M,d=e.customDistanceMaterial),void 0===d){let t=!1;!0===n.morphTargets&&(t=i.morphAttributes&&i.morphAttributes.position&&i.morphAttributes.position.length>0);let r=!1;!0===e.isSkinnedMesh&&(!0===n.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),l=u(t,r,!0===e.isInstancedMesh)}else l=d;if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){const t=l.uuid,e=n.uuid;let i=c[t];void 0===i&&(i={},c[t]=i);let r=i[e];void 0===r&&(r=l.clone(),i[e]=r),l=r}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=o===f?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=a,l.farDistance=s),l}function E(i,r,a,s,o){if(!1===i.visible)return;if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&o===f)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);const n=e.update(i),r=i.material;if(Array.isArray(r)){const e=n.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],h=r[c.materialIndex];if(h&&h.visible){const e=S(i,n,h,s,a.near,a.far,o);t.renderBufferDirect(a,null,n,e,i,c)}}}else if(r.visible){const e=S(i,n,r,s,a.near,a.far,o);t.renderBufferDirect(a,null,n,e,i,null)}}const l=i.children;for(let t=0,e=l.length;t<e;t++)E(l[t],r,a,s,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=u,this.render=function(e,o,l){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===e.length)return;const c=t.getRenderTarget(),h=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),d=t.state;d.setBlending(b),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let c=0,h=e.length;c<h;c++){const h=e[c],u=h.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",h,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;r.copy(u.mapSize);const p=u.getFrameExtents();if(r.multiply(p),a.copy(u.mapSize),(r.x>i||r.y>i)&&(r.x>i&&(a.x=Math.floor(i/p.x),r.x=a.x*p.x,u.mapSize.x=a.x),r.y>i&&(a.y=Math.floor(i/p.y),r.y=a.y*p.y,u.mapSize.y=a.y)),null===u.map&&!u.isPointLightShadow&&this.type===f){const t={minFilter:bt,magFilter:bt,format:Ft};u.map=new Zi(r.x,r.y,t),u.map.texture.name=h.name+".shadowMap",u.mapPass=new Zi(r.x,r.y,t),u.camera.updateProjectionMatrix()}if(null===u.map){const t={minFilter:pt,magFilter:pt,format:Ft};u.map=new Zi(r.x,r.y,t),u.map.texture.name=h.name+".shadowMap",u.camera.updateProjectionMatrix()}t.setRenderTarget(u.map),t.clear();const m=u.getViewportCount();for(let t=0;t<m;t++){const e=u.getViewport(t);s.set(a.x*e.x,a.y*e.y,a.x*e.z,a.y*e.w),d.viewport(s),u.updateMatrices(h,t),n=u.getFrustum(),E(o,l,u.camera,h,this.type)}u.isPointLightShadow||this.type!==f||x(u,l),u.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(c,h,u)}}function ho(t,e,i,n,r,a,s){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,h=r.maxTextureSize,u=r.maxSamples,d=new WeakMap;let f,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function m(t,e){return p?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(t,e,i,n){let r=1;if((t.width>n||t.height>n)&&(r=n/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const n=e?Fi.floorPowerOfTwo:Math.floor,a=n(r*t.width),s=n(r*t.height);void 0===f&&(f=m(a,s));const o=i?m(a,s):f;return o.width=a,o.height=s,o.getContext("2d").drawImage(t,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+s+")."),o}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function _(t){return Fi.isPowerOfTwo(t.width)&&Fi.isPowerOfTwo(t.height)}function y(t,e){return t.generateMipmaps&&e&&t.minFilter!==pt&&t.minFilter!==bt}function b(e,i,r,a){t.generateMipmap(e),n.get(i).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function v(i,n,r){if(!1===o)return n;if(null!==i){if(void 0!==t[i])return t[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let a=n;return 6403===n&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),6407===n&&(5126===r&&(a=34837),5131===r&&(a=34843),5121===r&&(a=32849)),6408===n&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||e.get("EXT_color_buffer_float"),a}function w(t){return t===pt||t===mt||t===_t?9728:9729}function x(e){const i=e.target;i.removeEventListener("dispose",x),function(e){const i=n.get(e);if(void 0===i.__webglInit)return;t.deleteTexture(i.__webglTexture),n.remove(e)}(i),i.isVideoTexture&&d.delete(i),s.memory.textures--}function A(e){const i=e.target;i.removeEventListener("dispose",A),function(e){const i=n.get(e),r=n.get(e.texture);if(!e)return;void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(i.__webglFramebuffer[e]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[e]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&t.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer);n.remove(e.texture),n.remove(e)}(i),s.memory.textures--}let M=0;function S(t,e){const r=n.get(t);if(t.isVideoTexture&&function(t){const e=s.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){const i=t.image;if(void 0===i)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==i.complete)return void P(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.activeTexture(33984+e),i.bindTexture(3553,r.__webglTexture)}function E(e,r){const s=n.get(e);e.version>0&&s.__version!==e.version?function(e,n,r){if(6!==n.image.length)return;k(e,n),i.activeTexture(33984+r),i.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,n.flipY);const s=n&&(n.isCompressedTexture||n.image[0].isCompressedTexture),l=n.image[0]&&n.image[0].isDataTexture,h=[];for(let t=0;t<6;t++)h[t]=s||l?l?n.image[t].image:n.image[t]:g(n.image[t],!1,!0,c);const u=h[0],d=_(u)||o,f=a.convert(n.format),p=a.convert(n.type),m=v(n.internalFormat,f,p);let w;if(C(34067,n,d),s){for(let t=0;t<6;t++){w=h[t].mipmaps;for(let e=0;e<w.length;e++){const r=w[e];n.format!==Ft&&n.format!==Gt?null!==f?i.compressedTexImage2D(34069+t,e,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+t,e,m,r.width,r.height,0,f,p,r.data)}}e.__maxMipLevel=w.length-1}else{w=n.mipmaps;for(let t=0;t<6;t++)if(l){i.texImage2D(34069+t,0,m,h[t].width,h[t].height,0,f,p,h[t].data);for(let e=0;e<w.length;e++){const n=w[e],r=n.image[t].image;i.texImage2D(34069+t,e+1,m,r.width,r.height,0,f,p,r.data)}}else{i.texImage2D(34069+t,0,m,f,p,h[t]);for(let e=0;e<w.length;e++){const n=w[e];i.texImage2D(34069+t,e+1,m,f,p,n.image[t])}}e.__maxMipLevel=w.length}y(n,d)&&b(34067,n,u.width,u.height);e.__version=n.version,n.onUpdate&&n.onUpdate(n)}(s,e,r):(i.activeTexture(33984+r),i.bindTexture(34067,s.__webglTexture))}const T={[ut]:10497,[dt]:33071,[ft]:33648},I={[pt]:9728,[mt]:9984,[_t]:9986,[bt]:9729,[vt]:9985,[xt]:9987};function C(i,a,s){s?(t.texParameteri(i,10242,T[a.wrapS]),t.texParameteri(i,10243,T[a.wrapT]),32879!==i&&35866!==i||t.texParameteri(i,32882,T[a.wrapR]),t.texParameteri(i,10240,I[a.magFilter]),t.texParameteri(i,10241,I[a.minFilter])):(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071),32879!==i&&35866!==i||t.texParameteri(i,32882,33071),a.wrapS===dt&&a.wrapT===dt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,10240,w(a.magFilter)),t.texParameteri(i,10241,w(a.minFilter)),a.minFilter!==pt&&a.minFilter!==bt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const l=e.get("EXT_texture_filter_anisotropic");if(l){if(a.type===kt&&null===e.get("OES_texture_float_linear"))return;if(a.type===Pt&&null===(o||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(t.texParameterf(i,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function k(e,i){void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",x),e.__webglTexture=t.createTexture(),s.memory.textures++)}function P(e,n,r){let s=3553;n.isDataTexture2DArray&&(s=35866),n.isDataTexture3D&&(s=32879),k(e,n),i.activeTexture(33984+r),i.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,n.flipY),t.pixelStorei(37441,n.premultiplyAlpha),t.pixelStorei(3317,n.unpackAlignment);const l=function(t){return!o&&(t.wrapS!==dt||t.wrapT!==dt||t.minFilter!==pt&&t.minFilter!==bt)}(n)&&!1===_(n.image),c=g(n.image,l,!1,h),u=_(c)||o,d=a.convert(n.format);let f,p=a.convert(n.type),m=v(n.internalFormat,d,p);C(s,n,u);const w=n.mipmaps;if(n.isDepthTexture)m=6402,o?m=n.type===kt?36012:n.type===Ct?33190:n.type===Dt?35056:33189:n.type===kt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===Ut&&6402===m&&n.type!==Tt&&n.type!==Ct&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Tt,p=a.convert(n.type)),n.format===Vt&&6402===m&&(m=34041,n.type!==Dt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=Dt,p=a.convert(n.type))),i.texImage2D(3553,0,m,c.width,c.height,0,d,p,null);else if(n.isDataTexture)if(w.length>0&&u){for(let t=0,e=w.length;t<e;t++)f=w[t],i.texImage2D(3553,t,m,f.width,f.height,0,d,p,f.data);n.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else i.texImage2D(3553,0,m,c.width,c.height,0,d,p,c.data),e.__maxMipLevel=0;else if(n.isCompressedTexture){for(let t=0,e=w.length;t<e;t++)f=w[t],n.format!==Ft&&n.format!==Gt?null!==d?i.compressedTexImage2D(3553,t,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,t,m,f.width,f.height,0,d,p,f.data);e.__maxMipLevel=w.length-1}else if(n.isDataTexture2DArray)i.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,p,c.data),e.__maxMipLevel=0;else if(n.isDataTexture3D)i.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,p,c.data),e.__maxMipLevel=0;else if(w.length>0&&u){for(let t=0,e=w.length;t<e;t++)f=w[t],i.texImage2D(3553,t,m,d,p,f);n.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else i.texImage2D(3553,0,m,d,p,c),e.__maxMipLevel=0;y(n,u)&&b(s,n,c.width,c.height),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function B(e,r,s,o){const l=a.convert(r.texture.format),c=a.convert(r.texture.type),h=v(r.texture.internalFormat,l,c);i.texImage2D(o,0,h,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,s,o,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function L(e,i,n){if(t.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer){let r=33189;if(n){const e=i.depthTexture;e&&e.isDepthTexture&&(e.type===kt?r=36012:e.type===Ct&&(r=33190));const n=D(i);t.renderbufferStorageMultisample(36161,n,r,i.width,i.height)}else t.renderbufferStorage(36161,r,i.width,i.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(i.depthBuffer&&i.stencilBuffer){if(n){const e=D(i);t.renderbufferStorageMultisample(36161,e,35056,i.width,i.height)}else t.renderbufferStorage(36161,34041,i.width,i.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=a.convert(i.texture.format),r=a.convert(i.texture.type),s=v(i.texture.internalFormat,e,r);if(n){const e=D(i);t.renderbufferStorageMultisample(36161,e,s,i.width,i.height)}else t.renderbufferStorage(36161,s,i.width,i.height)}t.bindRenderbuffer(36161,null)}function R(e){const i=n.get(e),r=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),S(i.depthTexture,0);const r=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===Ut)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(i.depthTexture.format!==Vt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}(i.__webglFramebuffer,e)}else if(r){i.__webglDepthbuffer=[];for(let n=0;n<6;n++)t.bindFramebuffer(36160,i.__webglFramebuffer[n]),i.__webglDepthbuffer[n]=t.createRenderbuffer(),L(i.__webglDepthbuffer[n],e,!1)}else t.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),L(i.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}function D(t){return o&&t.isWebGLMultisampleRenderTarget?Math.min(u,t.samples):0}let O=!1,G=!1;this.allocateTextureUnit=function(){const t=M;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),M+=1,t},this.resetTextureUnits=function(){M=0},this.setTexture2D=S,this.setTexture2DArray=function(t,e){const r=n.get(t);t.version>0&&r.__version!==t.version?P(r,t,e):(i.activeTexture(33984+e),i.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){const r=n.get(t);t.version>0&&r.__version!==t.version?P(r,t,e):(i.activeTexture(33984+e),i.bindTexture(32879,r.__webglTexture))},this.setTextureCube=E,this.setupRenderTarget=function(e){const r=n.get(e),l=n.get(e.texture);e.addEventListener("dispose",A),l.__webglTexture=t.createTexture(),s.memory.textures++;const c=!0===e.isWebGLCubeRenderTarget,h=!0===e.isWebGLMultisampleRenderTarget,u=_(e)||o;if(!o||e.texture.format!==Gt||e.texture.type!==kt&&e.texture.type!==Pt||(e.texture.format=Ft,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){r.__webglFramebuffer=[];for(let e=0;e<6;e++)r.__webglFramebuffer[e]=t.createFramebuffer()}else if(r.__webglFramebuffer=t.createFramebuffer(),h)if(o){r.__webglMultisampledFramebuffer=t.createFramebuffer(),r.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,r.__webglColorRenderbuffer);const i=a.convert(e.texture.format),n=a.convert(e.texture.type),s=v(e.texture.internalFormat,i,n),o=D(e);t.renderbufferStorageMultisample(36161,o,s,e.width,e.height),t.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(r.__webglDepthRenderbuffer=t.createRenderbuffer(),L(r.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){i.bindTexture(34067,l.__webglTexture),C(34067,e.texture,u);for(let t=0;t<6;t++)B(r.__webglFramebuffer[t],e,36064,34069+t);y(e.texture,u)&&b(34067,e.texture,e.width,e.height),i.bindTexture(34067,null)}else i.bindTexture(3553,l.__webglTexture),C(3553,e.texture,u),B(r.__webglFramebuffer,e,36064,3553),y(e.texture,u)&&b(3553,e.texture,e.width,e.height),i.bindTexture(3553,null);e.depthBuffer&&R(e)},this.updateRenderTargetMipmap=function(t){const e=t.texture;if(y(e,_(t)||o)){const r=t.isWebGLCubeRenderTarget?34067:3553,a=n.get(e).__webglTexture;i.bindTexture(r,a),b(r,e,t.width,t.height),i.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(o){const i=n.get(e);t.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,i.__webglFramebuffer);const r=e.width,a=e.height;let s=16384;e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024),t.blitFramebuffer(0,0,r,a,0,0,r,a,s,9728),t.bindFramebuffer(36160,i.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),O=!0),t=t.texture),S(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===G&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),G=!0),t=t.texture),E(t,e)}}function uo(t,e,i){const n=i.isWebGL2;return{convert:function(t){let i;if(t===Mt)return 5121;if(t===Bt)return 32819;if(t===Lt)return 32820;if(t===Rt)return 33635;if(t===St)return 5120;if(t===Et)return 5122;if(t===Tt)return 5123;if(t===It)return 5124;if(t===Ct)return 5125;if(t===kt)return 5126;if(t===Pt)return n?5131:null!==(i=e.get("OES_texture_half_float"))?i.HALF_FLOAT_OES:null;if(t===Ot)return 6406;if(t===Gt)return 6407;if(t===Ft)return 6408;if(t===Nt)return 6409;if(t===zt)return 6410;if(t===Ut)return 6402;if(t===Vt)return 34041;if(t===Wt)return 6403;if(t===jt)return 36244;if(t===Zt)return 33319;if(t===Yt)return 33320;if(t===Xt)return 36248;if(t===Jt)return 36249;if(t===qt||t===Qt||t===Kt||t===$t){if(null===(i=e.get("WEBGL_compressed_texture_s3tc")))return null;if(t===qt)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Qt)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Kt)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===$t)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===te||t===ee||t===ie||t===ne){if(null===(i=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(t===te)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ee)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ie)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ne)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===re)return null!==(i=e.get("WEBGL_compressed_texture_etc1"))?i.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===ae||t===se)&&null!==(i=e.get("WEBGL_compressed_texture_etc"))){if(t===ae)return i.COMPRESSED_RGB8_ETC2;if(t===se)return i.COMPRESSED_RGBA8_ETC2_EAC}return t===oe||t===le||t===ce||t===he||t===ue||t===de||t===fe||t===pe||t===me||t===ge||t===_e||t===ye||t===be||t===ve||t===xe||t===Ae||t===Me||t===Se||t===Ee||t===Te||t===Ie||t===Ce||t===ke||t===Pe||t===Be||t===Le||t===Re||t===De?null!==(i=e.get("WEBGL_compressed_texture_astc"))?t:null:t===we?null!==(i=e.get("EXT_texture_compression_bptc"))?t:null:t===Dt?n?34042:null!==(i=e.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function fo(t){_a.call(this),this.cameras=t||[]}function po(){Jn.call(this),this.type="Group"}function mo(){this._targetRay=null,this._grip=null,this._hand=null}function go(t,e){const i=this;let n=null,r=1,a=null,s="local-floor",o=null;const l=[],c=new Map,h=new _a;h.layers.enable(1),h.viewport=new ji;const u=new _a;u.layers.enable(2),u.viewport=new ji;const d=[h,u],f=new fo;f.layers.enable(1),f.layers.enable(2);let p=null,m=null;function g(t){const e=c.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function _(){c.forEach(function(t,e){t.disconnect(e)}),c.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),M.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function y(t){a=t,M.setContext(n),M.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}function b(t){const e=n.inputSources;for(let t=0;t<l.length;t++)c.set(e[t],l[t]);for(let e=0;e<t.removed.length;e++){const i=t.removed[e],n=c.get(i);n&&(n.dispatchEvent({type:"disconnected",data:i}),c.delete(i))}for(let e=0;e<t.added.length;e++){const i=t.added[e],n=c.get(i);n&&n.dispatchEvent({type:"connected",data:i})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=l[t];return void 0===e&&(e=new mo,l[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=l[t];return void 0===e&&(e=new mo,l[t]=e),e.getGripSpace()},this.getHand=function(t){let e=l[t];return void 0===e&&(e=new mo,l[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return n},this.setSession=function(t){if(null!==(n=t)){n.addEventListener("select",g),n.addEventListener("selectstart",g),n.addEventListener("selectend",g),n.addEventListener("squeeze",g),n.addEventListener("squeezestart",g),n.addEventListener("squeezeend",g),n.addEventListener("end",_);const t=e.getContextAttributes();!0!==t.xrCompatible&&e.makeXRCompatible();const i={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:r},a=new XRWebGLLayer(n,e,i);n.updateRenderState({baseLayer:a}),n.requestReferenceSpace(s).then(y),n.addEventListener("inputsourceschange",b)}};const v=new Ji,w=new Ji;function x(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}this.getCamera=function(t){f.near=u.near=h.near=t.near,f.far=u.far=h.far=t.far,p===f.near&&m===f.far||(n.updateRenderState({depthNear:f.near,depthFar:f.far}),p=f.near,m=f.far);const e=t.parent,i=f.cameras;x(f,e);for(let t=0;t<i.length;t++)x(i[t],e);t.matrixWorld.copy(f.matrixWorld);const r=t.children;for(let t=0,e=r.length;t<e;t++)r[t].updateMatrixWorld(!0);return 2===i.length?function(t,e,i){v.setFromMatrixPosition(e.matrixWorld),w.setFromMatrixPosition(i.matrixWorld);const n=v.distanceTo(w),r=e.projectionMatrix.elements,a=i.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],h=(r[8]-1)/r[0],u=(a[8]+1)/a[0],d=s*h,f=s*u,p=n/(-h+u),m=p*-h;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);const g=s+p,_=o+p,y=d-m,b=f+(n-m),x=l*o/_*g,A=c*o/_*g;t.projectionMatrix.makePerspective(y,b,x,A,g,_)}(f,h,u):f.projectionMatrix.copy(h.projectionMatrix),f};let A=null;const M=new Ta;M.setAnimationLoop(function(e,i){if(null!==(o=i.getViewerPose(a))){const e=o.views,i=n.renderState.baseLayer;t.setFramebuffer(i.framebuffer);let r=!1;e.length!==f.cameras.length&&(f.cameras.length=0,r=!0);for(let t=0;t<e.length;t++){const n=e[t],a=i.getViewport(n),s=d[t];s.matrix.fromArray(n.transform.matrix),s.projectionMatrix.fromArray(n.projectionMatrix),s.viewport.set(a.x,a.y,a.width,a.height),0===t&&f.matrix.copy(s.matrix),!0===r&&f.cameras.push(s)}}const r=n.inputSources;for(let t=0;t<l.length;t++){const e=l[t],n=r[t];e.update(n,i,a)}A&&A(e,i)}),this.setAnimationLoop=function(t){A=t},this.dispose=function(){}}function _o(t){function e(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map),i.alphaMap&&(e.alphaMap.value=i.alphaMap),i.specularMap&&(e.specularMap.value=i.specularMap);const n=t.get(i).envMap;if(n){e.envMap.value=n,e.flipEnvMap.value=n.isCubeTexture&&n._needsFlipEnvMap?-1:1,e.reflectivity.value=i.reflectivity,e.refractionRatio.value=i.refractionRatio;const r=t.get(n).__maxMipLevel;void 0!==r&&(e.maxMipLevel.value=r)}let r,a;i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity),i.map?r=i.map:i.specularMap?r=i.specularMap:i.displacementMap?r=i.displacementMap:i.normalMap?r=i.normalMap:i.bumpMap?r=i.bumpMap:i.roughnessMap?r=i.roughnessMap:i.metalnessMap?r=i.metalnessMap:i.alphaMap?r=i.alphaMap:i.emissiveMap?r=i.emissiveMap:i.clearcoatMap?r=i.clearcoatMap:i.clearcoatNormalMap?r=i.clearcoatNormalMap:i.clearcoatRoughnessMap&&(r=i.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uv2Transform.value.copy(a.matrix))}function i(e,i){e.roughness.value=i.roughness,e.metalness.value=i.metalness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap),i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap),i.bumpMap&&(e.bumpMap.value=i.bumpMap,e.bumpScale.value=i.bumpScale,i.side===m&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,e.normalScale.value.copy(i.normalScale),i.side===m&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),t.get(i).envMap&&(e.envMapIntensity.value=i.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,n,r,a){n.isMeshBasicMaterial?e(t,n):n.isMeshLambertMaterial?(e(t,n),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,n)):n.isMeshToonMaterial?(e(t,n),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,n)):n.isMeshPhongMaterial?(e(t,n),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,n)):n.isMeshStandardMaterial?(e(t,n),n.isMeshPhysicalMaterial?function(t,e){i(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===m&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,n):i(t,n)):n.isMeshMatcapMaterial?(e(t,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,n)):n.isMeshDepthMaterial?(e(t,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,n)):n.isMeshDistanceMaterial?(e(t,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,n)):n.isMeshNormalMaterial?(e(t,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,n)):n.isPointsMaterial?function(t,e,i,n){let r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*n,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,n,r,a):n.isSpriteMaterial?function(t,e){let i;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?i=e.map:e.alphaMap&&(i=e.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,n):n.isShadowMaterial?(t.color.value.copy(n.color),t.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}function yo(t){const e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i=void 0!==t.context?t.context:null,n=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,c=void 0!==t.antialias&&t.antialias,h=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,d=void 0!==t.powerPreference?t.powerPreference:"default",f=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let _=null,y=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=qe,this.physicallyCorrectLights=!1,this.toneMapping=K,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const J=this;let q=!1,Q=null,$=0,tt=0,et=null,it=null,nt=-1,rt=null,ht=null;const ut=new ji,dt=new ji;let ft=null,pt=e.width,mt=e.height,gt=1,_t=null,yt=null;const bt=new ji(0,0,pt,mt),vt=new ji(0,0,pt,mt);let wt=!1;const xt=new Ea;let At=!1,St=!1;const Et=new Mn,Tt=new Ji,It={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ct(){return null===et?gt:1}let Bt,Lt,Rt,Dt,Ot,Gt,Nt,zt,Ht,Ut,Vt,Wt,jt,Zt,Yt,Xt,Jt,qt,Qt,Kt,$t,te=i;function ee(t,i){for(let n=0;n<t.length;n++){const r=t[n],a=e.getContext(r,i);if(null!==a)return a}return null}try{const t={alpha:n,depth:r,stencil:a,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:f};if(e.addEventListener("webglcontextlost",ae,!1),e.addEventListener("webglcontextrestored",se,!1),null===te){const e=["webgl2","webgl","experimental-webgl"];if(!0===J.isWebGL1Renderer&&e.shift(),null===(te=ee(e,t)))throw ee(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===te.getShaderPrecisionFormat&&(te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function ie(){Bt=new function(t){const e={};return{has:function(i){if(void 0!==e[i])return null!==e[i];let n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return e[i]=n,null!==n},get:function(t){return this.has(t)||console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e[t]}}}(te),!1===(Lt=new function(t,e,i){let n;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let s=void 0!==i.precision?i.precision:"highp";const o=r(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=!0===i.logarithmicDepthBuffer,c=t.getParameter(34930),h=t.getParameter(35660),u=t.getParameter(3379),d=t.getParameter(34076),f=t.getParameter(34921),p=t.getParameter(36347),m=t.getParameter(36348),g=t.getParameter(36349),_=h>0,y=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==n)return n;const i=e.get("EXT_texture_filter_anisotropic");return n=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:_,floatFragmentTextures:y,floatVertexTextures:_&&y,maxSamples:a?t.getParameter(36183):0}}(te,Bt,t)).isWebGL2&&(Bt.get("WEBGL_depth_texture"),Bt.get("OES_texture_float"),Bt.get("OES_texture_half_float"),Bt.get("OES_texture_half_float_linear"),Bt.get("OES_standard_derivatives"),Bt.get("OES_element_index_uint"),Bt.get("OES_vertex_array_object"),Bt.get("ANGLE_instanced_arrays")),Bt.get("OES_texture_float_linear"),Kt=new uo(te,Bt,Lt),(Rt=new function(t,e,i){const n=i.isWebGL2,r=new function(){let e=!1;const i=new ji;let n=null;const r=new ji(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,a,s,o){!0===o&&(e*=s,n*=s,a*=s),i.set(e,n,a,s),!1===r.equals(i)&&(t.clearColor(e,n,a,s),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}},a=new function(){let e=!1,i=null,n=null,r=null;return{setTest:function(t){t?pt(2929):mt(2929)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case H:t.depthFunc(512);break;case U:t.depthFunc(519);break;case V:t.depthFunc(513);break;case W:t.depthFunc(515);break;case j:t.depthFunc(514);break;case Z:t.depthFunc(518);break;case Y:t.depthFunc(516);break;case X:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}},c=new function(){let e=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(t){e||(t?pt(2960):mt(2960))},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,s){n===e&&r===i&&a===s||(t.stencilFunc(e,i,s),n=e,r=i,a=s)},setOp:function(e,i,n){s===e&&o===i&&l===n||(t.stencilOp(e,i,n),s=e,o=i,l=n)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,c=null}}};let h={},u=null,d=null,f=null,p=null,_=null,y=null,J=null,q=null,Q=null,K=!1,$=null,tt=null,et=null,it=null,nt=null;const rt=t.getParameter(35661);let at=!1,st=0;const ot=t.getParameter(7938);-1!==ot.indexOf("WebGL")?(st=parseFloat(/^WebGL\ ([0-9])/.exec(ot)[1]),at=st>=1):-1!==ot.indexOf("OpenGL ES")&&(st=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ot)[1]),at=st>=2);let lt=null,ct={};const ht=new ji,ut=new ji;function dt(e,i,n){const r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<n;e++)t.texImage2D(i+e,0,6408,1,1,0,6408,5121,r);return a}const ft={};function pt(e){!0!==h[e]&&(t.enable(e),h[e]=!0)}function mt(e){!1!==h[e]&&(t.disable(e),h[e]=!1)}ft[3553]=dt(3553,3553,1),ft[34067]=dt(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),c.setClear(0),pt(2929),a.setFunc(W),bt(!1),vt(o),pt(2884),yt(b);const gt={[S]:32774,[E]:32778,[T]:32779};if(n)gt[I]=32775,gt[C]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(gt[I]=t.MIN_EXT,gt[C]=t.MAX_EXT)}const _t={[k]:0,[P]:1,[B]:768,[R]:770,[z]:776,[F]:774,[O]:772,[L]:769,[D]:771,[N]:775,[G]:773};function yt(e,i,n,r,a,s,o,l){if(e!==b){if(d||(pt(3042),d=!0),e===M)a=a||i,s=s||n,o=o||r,i===p&&a===J||(t.blendEquationSeparate(gt[i],gt[a]),p=i,J=a),n===_&&r===y&&s===q&&o===Q||(t.blendFuncSeparate(_t[n],_t[r],_t[s],_t[o]),_=n,y=r,q=s,Q=o),f=e,K=null;else if(e!==f||l!==K){if(p===S&&J===S||(t.blendEquation(32774),p=S,J=S),l)switch(e){case v:t.blendFuncSeparate(1,771,1,771);break;case w:t.blendFunc(1,1);break;case x:t.blendFuncSeparate(0,0,769,771);break;case A:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case v:t.blendFuncSeparate(770,771,1,771);break;case w:t.blendFunc(770,1);break;case x:t.blendFunc(0,769);break;case A:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}_=null,y=null,q=null,Q=null,f=e,K=l}}else d&&(mt(3042),d=!1)}function bt(e){$!==e&&(e?t.frontFace(2304):t.frontFace(2305),$=e)}function vt(e){e!==s?(pt(2884),e!==tt&&(e===o?t.cullFace(1029):e===l?t.cullFace(1028):t.cullFace(1032))):mt(2884),tt=e}function wt(e,i,n){e?(pt(32823),it===i&&nt===n||(t.polygonOffset(i,n),it=i,nt=n)):mt(32823)}function xt(e){void 0===e&&(e=33984+rt-1),lt!==e&&(t.activeTexture(e),lt=e)}return{buffers:{color:r,depth:a,stencil:c},enable:pt,disable:mt,useProgram:function(e){return u!==e&&(t.useProgram(e),u=e,!0)},setBlending:yt,setMaterial:function(t,e){t.side===g?mt(2884):pt(2884);let i=t.side===m;e&&(i=!i),bt(i),t.blending===v&&!1===t.transparent?yt(b):yt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),r.setMask(t.colorWrite);const n=t.stencilWrite;c.setTest(n),n&&(c.setMask(t.stencilWriteMask),c.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),c.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),wt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:bt,setCullFace:vt,setLineWidth:function(e){e!==et&&(at&&t.lineWidth(e),et=e)},setPolygonOffset:wt,setScissorTest:function(t){t?pt(3089):mt(3089)},activeTexture:xt,bindTexture:function(e,i){null===lt&&xt();let n=ct[lt];void 0===n&&(n={type:void 0,texture:void 0},ct[lt]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||ft[e]),n.type=e,n.texture=i)},unbindTexture:function(){const e=ct[lt];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===ht.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ht.copy(e))},viewport:function(e){!1===ut.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),ut.copy(e))},reset:function(){h={},lt=null,ct={},u=null,f=null,$=null,tt=null,r.reset(),a.reset(),c.reset()}}}(te,Bt,Lt)).scissor(dt.copy(vt).multiplyScalar(gt).floor()),Rt.viewport(ut.copy(bt).multiplyScalar(gt).floor()),Dt=new function(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,i,n){switch(e.calls++,i){case 4:e.triangles+=n*(t/3);break;case 1:e.lines+=n*(t/2);break;case 3:e.lines+=n*(t-1);break;case 2:e.lines+=n*t;break;case 0:e.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}(te),Ot=new function(){let t=new WeakMap;return{get:function(e){let i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,n){t.get(e)[i]=n},dispose:function(){t=new WeakMap}}},Gt=new ho(te,Bt,Rt,Ot,Lt,Kt,Dt),Nt=new function(t){let e=new WeakMap;function i(t,e){return e===ot?t.mapping=at:e===lt&&(t.mapping=st),t}function n(t){const i=t.target;i.removeEventListener("dispose",n);const r=e.get(i);void 0!==r&&(e.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping;if(a===ot||a===lt){if(e.has(r))return i(e.get(r).texture,r.mapping);{const a=r.image;if(a&&a.height>0){const s=t.getRenderList(),o=t.getRenderTarget(),l=t.getRenderState(),c=new xa(a.height/2);return c.fromEquirectangularTexture(t,r),e.set(r,c),t.setRenderTarget(o),t.setRenderList(s),t.setRenderState(l),r.addEventListener("dispose",n),i(c.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}(J),zt=new Ia(te,Lt),$t=new La(te,Bt,zt,Lt),Ht=new function(t,e,i,n){const r=new WeakMap,a=new WeakMap;function s(t){const o=t.target,l=r.get(o);null!==l.index&&e.remove(l.index);for(const t in l.attributes)e.remove(l.attributes[t]);o.removeEventListener("dispose",s),r.delete(o);const c=a.get(l);c&&(e.remove(c),a.delete(l)),n.releaseStatesOfGeometry(l),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,i.memory.geometries--}function o(t){const i=[],n=t.index,r=t.attributes.position;let s=0;if(null!==n){const t=n.array;s=n.version;for(let e=0,n=t.length;e<n;e+=3){const n=t[e+0],r=t[e+1],a=t[e+2];i.push(n,r,r,a,a,n)}}else{const t=r.array;s=r.version;for(let e=0,n=t.length/3-1;e<n;e+=3){const t=e+0,n=e+1,r=e+2;i.push(t,n,n,r,r,t)}}const o=new(Rr(i)>65535?Pr:Cr)(i,1);o.version=s;const l=a.get(t);l&&e.remove(l),a.set(t,o)}return{get:function(t,e){let n=r.get(e);return n||(e.addEventListener("dispose",s),e.isBufferGeometry?n=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Ur).setFromObject(t)),n=e._bufferGeometry),r.set(e,n),i.memory.geometries++,n)},update:function(t){const i=t.attributes;for(const t in i)e.update(i[t],34962);const n=t.morphAttributes;for(const t in n){const i=n[t];for(let t=0,n=i.length;t<n;t++)e.update(i[t],34962)}},getWireframeAttribute:function(t){const e=a.get(t);if(e){const i=t.index;null!==i&&e.version<i.version&&o(t)}else o(t);return a.get(t)}}}(te,zt,Dt,$t),Ut=new function(t,e,i,n){let r=new WeakMap;return{update:function(t){const a=n.render.frame,s=t.geometry,o=e.get(t,s);return r.get(o)!==a&&(s.isGeometry&&o.updateFromObject(t),e.update(o),r.set(o,a)),t.isInstancedMesh&&(i.update(t.instanceMatrix,34962),null!==t.instanceColor&&i.update(t.instanceColor,34962)),o},dispose:function(){r=new WeakMap}}}(te,Ht,zt,Dt),Jt=new function(t){const e={},i=new Float32Array(8),n=[];for(let t=0;t<8;t++)n[t]=[t,0];return{update:function(r,a,s,o){const l=r.morphTargetInfluences,c=void 0===l?0:l.length;let h=e[a.id];if(void 0===h){h=[];for(let t=0;t<c;t++)h[t]=[t,0];e[a.id]=h}for(let t=0;t<c;t++){const e=h[t];e[0]=t,e[1]=l[t]}h.sort(Da);for(let t=0;t<8;t++)t<c&&h[t][1]?(n[t][0]=h[t][0],n[t][1]=h[t][1]):(n[t][0]=Number.MAX_SAFE_INTEGER,n[t][1]=0);n.sort(Ra);const u=s.morphTargets&&a.morphAttributes.position,d=s.morphNormals&&a.morphAttributes.normal;let f=0;for(let t=0;t<8;t++){const e=n[t],r=e[0],s=e[1];r!==Number.MAX_SAFE_INTEGER&&s?(u&&a.getAttribute("morphTarget"+t)!==u[r]&&a.setAttribute("morphTarget"+t,u[r]),d&&a.getAttribute("morphNormal"+t)!==d[r]&&a.setAttribute("morphNormal"+t,d[r]),i[t]=s,f+=s):(u&&void 0!==a.getAttribute("morphTarget"+t)&&a.deleteAttribute("morphTarget"+t),d&&void 0!==a.getAttribute("morphNormal"+t)&&a.deleteAttribute("morphNormal"+t),i[t]=0)}const p=a.morphTargetsRelative?1:1-f;o.getUniforms().setValue(t,"morphTargetBaseInfluence",p),o.getUniforms().setValue(t,"morphTargetInfluences",i)}}}(te),Yt=new function(t){const e=this;let i=null,n=0,r=!1,a=!1;const s=new $n,o=new zi,l={value:null,needsUpdate:!1};function c(){l.value!==i&&(l.value=i,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(t,i,n,r){const a=null!==t?t.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const e=n+4*a,r=i.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let e=0,i=n;e!==a;++e,i+=4)s.copy(t[e]).applyMatrix4(r,o),s.normal.toArray(c,i),c[i+3]=s.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=a,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,a){const s=0!==t.length||e||0!==n||r;return r=e,i=h(t,a,0),n=t.length,s},this.beginShadows=function(){a=!0,h(null)},this.endShadows=function(){a=!1,c()},this.setState=function(e,s,o){const u=e.clippingPlanes,d=e.clipIntersection,f=e.clipShadows,p=t.get(e);if(!r||null===u||0===u.length||a&&!f)a?h(null):c();else{const t=a?0:n,e=4*t;let r=p.clippingState||null;l.value=r,r=h(u,s,e,o);for(let t=0;t!==e;++t)r[t]=i[t];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}(Ot),Vt=new Qs(J,Nt,Bt,Lt,$t,Yt),Wt=new _o(Ot),jt=new function(t){let e=new WeakMap;return{get:function(i,n){const r=e.get(i);let a;return void 0===r?(a=new to(t),e.set(i,new WeakMap),e.get(i).set(n,a)):void 0===(a=r.get(n))&&(a=new to(t),r.set(n,a)),a},dispose:function(){e=new WeakMap}}}(Ot),Zt=new function(t,e){let i=new WeakMap;return{get:function(n,r){let a;return!1===i.has(n)?(a=new ro(t,e),i.set(n,new WeakMap),i.get(n).set(r,a)):!1===i.get(n).has(r)?(a=new ro(t,e),i.get(n).set(r,a)):a=i.get(n).get(r),a},dispose:function(){i=new WeakMap}}}(Bt,Lt),Xt=new function(t,e,i,n,r){const a=new _r(0);let s,o,l=0,c=null,h=0,u=null;function d(t,e){i.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),d(a,l=void 0!==e?e:1)},getClearAlpha:function(){return l},setClearAlpha:function(t){d(a,l=t)},render:function(i,r,f,g){let _=!0===r.isScene?r.background:null;_&&_.isTexture&&(_=e.get(_));const y=t.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(_=null),null===_?d(a,l):_&&_.isColor&&(d(_,1),g=!0),(t.autoClear||g)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.isWebGLCubeRenderTarget||_.mapping===ct)?(void 0===o&&((o=new sa(new ca(1,1,1),new ma({name:"BackgroundCubeMaterial",uniforms:ha(Ba.cube.uniforms),vertexShader:Ba.cube.vertexShader,fragmentShader:Ba.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o)),_.isWebGLCubeRenderTarget&&(_=_.texture),o.material.uniforms.envMap.value=_,o.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_._needsFlipEnvMap?-1:1,c===_&&h===_.version&&u===t.toneMapping||(o.material.needsUpdate=!0,c=_,h=_.version,u=t.toneMapping),i.unshift(o,o.geometry,o.material,0,0,null)):_&&_.isTexture&&(void 0===s&&((s=new sa(new Ca(2,2),new ma({name:"BackgroundMaterial",uniforms:ha(Ba.background.uniforms),vertexShader:Ba.background.vertexShader,fragmentShader:Ba.background.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(s)),s.material.uniforms.t2D.value=_,!0===_.matrixAutoUpdate&&_.updateMatrix(),s.material.uniforms.uvTransform.value.copy(_.matrix),c===_&&h===_.version&&u===t.toneMapping||(s.material.needsUpdate=!0,c=_,h=_.version,u=t.toneMapping),i.unshift(s,s.geometry,s.material,0,0,null))}}}(J,Nt,Rt,Ut,h),qt=new function(t,e,i,n){const r=n.isWebGL2;let a;this.setMode=function(t){a=t},this.render=function(e,n){t.drawArrays(a,e,n),i.update(n,a,1)},this.renderInstances=function(n,s,o){if(0===o)return;let l,c;if(r)l=t,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,n,s,o),i.update(s,a,o)}}(te,Bt,Dt,Lt),Qt=new function(t,e,i,n){const r=n.isWebGL2;let a,s,o;this.setMode=function(t){a=t},this.setIndex=function(t){s=t.type,o=t.bytesPerElement},this.render=function(e,n){t.drawElements(a,n,s,e*o),i.update(n,a,1)},this.renderInstances=function(n,l,c){if(0===c)return;let h,u;if(r)h=t,u="drawElementsInstanced";else if(u="drawElementsInstancedANGLE",null===(h=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[u](a,l,s,n*o,c),i.update(l,a,c)}}(te,Bt,Dt,Lt),Dt.programs=Vt.programs,J.capabilities=Lt,J.extensions=Bt,J.properties=Ot,J.renderLists=jt,J.state=Rt,J.info=Dt}ie();const ne=new go(J,te);this.xr=ne;const re=new co(J,Ut,Lt.maxTextureSize);function ae(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),q=!0}function se(){console.log("THREE.WebGLRenderer: Context Restored."),q=!1,ie()}function oe(t){const e=t.target;e.removeEventListener("dispose",oe),function(t){le(t),Ot.remove(t)}(e)}function le(t){const e=Ot.get(t).program;void 0!==e&&Vt.releaseProgram(e)}this.shadowMap=re,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const t=Bt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Bt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return gt},this.setPixelRatio=function(t){void 0!==t&&(gt=t,this.setSize(pt,mt,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new Ni),t.set(pt,mt)},this.setSize=function(t,i,n){ne.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(pt=t,mt=i,e.width=Math.floor(t*gt),e.height=Math.floor(i*gt),!1!==n&&(e.style.width=t+"px",e.style.height=i+"px"),this.setViewport(0,0,t,i))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new Ni),t.set(pt*gt,mt*gt).floor()},this.setDrawingBufferSize=function(t,i,n){pt=t,mt=i,gt=n,e.width=Math.floor(t*n),e.height=Math.floor(i*n),this.setViewport(0,0,t,i)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new ji),t.copy(ut)},this.getViewport=function(t){return t.copy(bt)},this.setViewport=function(t,e,i,n){t.isVector4?bt.set(t.x,t.y,t.z,t.w):bt.set(t,e,i,n),Rt.viewport(ut.copy(bt).multiplyScalar(gt).floor())},this.getScissor=function(t){return t.copy(vt)},this.setScissor=function(t,e,i,n){t.isVector4?vt.set(t.x,t.y,t.z,t.w):vt.set(t,e,i,n),Rt.scissor(dt.copy(vt).multiplyScalar(gt).floor())},this.getScissorTest=function(){return wt},this.setScissorTest=function(t){Rt.setScissorTest(wt=t)},this.setOpaqueSort=function(t){_t=t},this.setTransparentSort=function(t){yt=t},this.getClearColor=function(){return Xt.getClearColor()},this.setClearColor=function(){Xt.setClearColor.apply(Xt,arguments)},this.getClearAlpha=function(){return Xt.getClearAlpha()},this.setClearAlpha=function(){Xt.setClearAlpha.apply(Xt,arguments)},this.clear=function(t,e,i){let n=0;(void 0===t||t)&&(n|=16384),(void 0===e||e)&&(n|=256),(void 0===i||i)&&(n|=1024),te.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ae,!1),e.removeEventListener("webglcontextrestored",se,!1),jt.dispose(),Zt.dispose(),Ot.dispose(),Nt.dispose(),Ut.dispose(),$t.dispose(),ne.dispose(),he.stop()},this.renderBufferImmediate=function(t,e){$t.initAttributes();const i=Ot.get(t);t.hasPositions&&!i.position&&(i.position=te.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=te.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=te.createBuffer()),t.hasColors&&!i.color&&(i.color=te.createBuffer());const n=e.getAttributes();t.hasPositions&&(te.bindBuffer(34962,i.position),te.bufferData(34962,t.positionArray,35048),$t.enableAttribute(n.position),te.vertexAttribPointer(n.position,3,5126,!1,0,0)),t.hasNormals&&(te.bindBuffer(34962,i.normal),te.bufferData(34962,t.normalArray,35048),$t.enableAttribute(n.normal),te.vertexAttribPointer(n.normal,3,5126,!1,0,0)),t.hasUvs&&(te.bindBuffer(34962,i.uv),te.bufferData(34962,t.uvArray,35048),$t.enableAttribute(n.uv),te.vertexAttribPointer(n.uv,2,5126,!1,0,0)),t.hasColors&&(te.bindBuffer(34962,i.color),te.bufferData(34962,t.colorArray,35048),$t.enableAttribute(n.color),te.vertexAttribPointer(n.color,3,5126,!1,0,0)),$t.disableUnusedAttributes(),te.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,n,r,a){null===e&&(e=It);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=pe(t,e,n,r);Rt.setMaterial(n,s);let l=i.index;const c=i.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let h,u=1;!0===n.wireframe&&(l=Ht.getWireframeAttribute(i),u=2),(n.morphTargets||n.morphNormals)&&Jt.update(r,i,n,o),$t.setup(r,n,o,i,l);let d=qt;null!==l&&(h=zt.get(l),(d=Qt).setIndex(h));const f=null!==l?l.count:c.count,p=i.drawRange.start*u,m=i.drawRange.count*u,g=null!==a?a.start*u:0,_=null!==a?a.count*u:1/0,y=Math.max(p,g),b=Math.min(f,p+m,g+_)-1,v=Math.max(0,b-y+1);if(0!==v){if(r.isMesh)!0===n.wireframe?(Rt.setLineWidth(n.wireframeLinewidth*Ct()),d.setMode(1)):d.setMode(4);else if(r.isLine){let t=n.linewidth;void 0===t&&(t=1),Rt.setLineWidth(t*Ct()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(y,v,r.count);else if(i.isInstancedBufferGeometry){const t=Math.min(i.instanceCount,i._maxInstanceCount);d.renderInstances(y,v,t)}else d.render(y,v)}},this.compile=function(t,e){(y=Zt.get(t,e)).init(),t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(y.pushLight(t),t.castShadow&&y.pushShadow(t))}),y.setupLights(e);const i=new WeakMap;t.traverse(function(e){const n=e.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){const a=n[r];!1===i.has(a)&&(fe(a,t,e),i.set(a))}else!1===i.has(n)&&(fe(n,t,e),i.set(n))})};let ce=null;const he=new Ta;function ue(t,e,i){const n=!0===e.isScene?e.overrideMaterial:null;for(let r=0,a=t.length;r<a;r++){const a=t[r],s=a.object,o=a.geometry,l=null===n?a.material:n,c=a.group;if(i.isArrayCamera){ht=i;const t=i.cameras;for(let i=0,n=t.length;i<n;i++){const n=t[i];s.layers.test(n.layers)&&(Rt.viewport(ut.copy(n.viewport)),y.setupLights(n),de(s,e,n,o,l,c))}}else ht=null,de(s,e,i,o,l,c)}}function de(t,e,i,n,r,a){if(t.onBeforeRender(J,e,i,n,r,a),y=Zt.get(e,ht||i),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const n=pe(i,e,r,t);Rt.setMaterial(r),$t.reset(),function(t,e){t.render(function(t){J.renderBufferImmediate(t,e)})}(t,n)}else J.renderBufferDirect(i,e,n,r,t,a);t.onAfterRender(J,e,i,n,r,a),y=Zt.get(e,ht||i)}function fe(t,e,i){!0!==e.isScene&&(e=It);const n=Ot.get(t),r=y.state.lights,a=y.state.shadowsArray,s=r.state.version,o=Vt.getParameters(t,r.state,a,e,i),l=Vt.getProgramCacheKey(o);let c=n.program,h=!0;if(void 0===c)t.addEventListener("dispose",oe);else if(c.cacheKey!==l)le(t);else if(n.lightsStateVersion!==s)h=!1;else{if(void 0!==o.shaderID){const i=t.isMeshStandardMaterial?e.environment:null;return void(n.envMap=Nt.get(t.envMap||i))}h=!1}h&&(o.uniforms=Vt.getUniforms(t),t.onBeforeCompile(o,J),c=Vt.acquireProgram(o,l),n.program=c,n.uniforms=o.uniforms,n.outputEncoding=o.outputEncoding);const u=n.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=Yt.numPlanes,n.numIntersection=Yt.numIntersection,u.clippingPlanes=Yt.uniform),n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=Nt.get(t.envMap||n.environment),n.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),n.lightsStateVersion=s,n.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotShadowMatrix.value=r.state.spotShadowMatrix,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=n.program.getUniforms(),f=Bs.seqWithValue(d.seq,u);n.uniformsList=f}function pe(t,e,i,n){!0!==e.isScene&&(e=It),Gt.resetTextureUnits();const r=e.fog,a=i.isMeshStandardMaterial?e.environment:null,s=null===et?J.outputEncoding:et.texture.encoding,o=Nt.get(i.envMap||a),l=Ot.get(i),c=y.state.lights;if(!0===At&&(!0===St||t!==rt)){const e=t===rt&&i.id===nt;Yt.setState(i,t,e)}i.version===l.__version?i.fog&&l.fog!==r?fe(i,e,n):l.environment!==a?fe(i,e,n):l.needsLights&&l.lightsStateVersion!==c.state.version?fe(i,e,n):void 0===l.numClippingPlanes||l.numClippingPlanes===Yt.numPlanes&&l.numIntersection===Yt.numIntersection?l.outputEncoding!==s?fe(i,e,n):l.envMap!==o&&fe(i,e,n):fe(i,e,n):(fe(i,e,n),l.__version=i.version);let h=!1,u=!1,d=!1;const f=l.program,p=f.getUniforms(),m=l.uniforms;if(Rt.useProgram(f.program)&&(h=!0,u=!0,d=!0),i.id!==nt&&(nt=i.id,u=!0),h||rt!==t){if(p.setValue(te,"projectionMatrix",t.projectionMatrix),Lt.logarithmicDepthBuffer&&p.setValue(te,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),rt!==t&&(rt=t,u=!0,d=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=p.map.cameraPosition;void 0!==e&&e.setValue(te,Tt.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&p.setValue(te,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||i.skinning)&&p.setValue(te,"viewMatrix",t.matrixWorldInverse)}if(i.skinning){p.setOptional(te,n,"bindMatrix"),p.setOptional(te,n,"bindMatrixInverse");const t=n.skeleton;if(t){const e=t.bones;if(Lt.floatVertexTextures){if(void 0===t.boneTexture){let i=Math.sqrt(4*e.length);i=Fi.ceilPowerOfTwo(i),i=Math.max(i,4);const n=new Float32Array(i*i*4);n.set(t.boneMatrices);const r=new Aa(n,i,i,Ft,kt);t.boneMatrices=n,t.boneTexture=r,t.boneTextureSize=i}p.setValue(te,"boneTexture",t.boneTexture,Gt),p.setValue(te,"boneTextureSize",t.boneTextureSize)}else p.setOptional(te,t,"boneMatrices")}}return(u||l.receiveShadow!==n.receiveShadow)&&(l.receiveShadow=n.receiveShadow,p.setValue(te,"receiveShadow",n.receiveShadow)),u&&(p.setValue(te,"toneMappingExposure",J.toneMappingExposure),l.needsLights&&function(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}(m,d),r&&i.fog&&Wt.refreshFogUniforms(m,r),Wt.refreshMaterialUniforms(m,i,gt,mt),Bs.upload(te,l.uniformsList,m,Gt)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Bs.upload(te,l.uniformsList,m,Gt),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&p.setValue(te,"center",n.center),p.setValue(te,"modelViewMatrix",n.modelViewMatrix),p.setValue(te,"normalMatrix",n.normalMatrix),p.setValue(te,"modelMatrix",n.matrixWorld),f}he.setAnimationLoop(function(t){ne.isPresenting||ce&&ce(t)}),"undefined"!=typeof window&&he.setContext(window),this.setAnimationLoop=function(t){ce=t,ne.setAnimationLoop(t),null===t?he.stop():he.start()},this.render=function(t,e){let i,n;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),i=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),n=arguments[3]),void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===q)return;$t.resetDefaultState(),nt=-1,rt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===ne.enabled&&!0===ne.isPresenting&&(e=ne.getCamera(e)),!0===t.isScene&&t.onBeforeRender(J,t,e,i||et),(y=Zt.get(t,e)).init(),Et.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),xt.setFromProjectionMatrix(Et),St=this.localClippingEnabled,At=Yt.init(this.clippingPlanes,St,e),(_=jt.get(t,e)).init(),function t(e,i,n,r){if(!1===e.visible)return;const a=e.layers.test(i.layers);if(a)if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(i);else if(e.isLight)y.pushLight(e),e.castShadow&&y.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||xt.intersectsSprite(e)){r&&Tt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Et);const t=Ut.update(e),i=e.material;i.visible&&_.push(e,t,i,n,Tt.z,null)}}else if(e.isImmediateRenderObject)r&&Tt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Et),_.push(e,null,e.material,n,Tt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Dt.render.frame&&(e.skeleton.update(),e.skeleton.frame=Dt.render.frame),!e.frustumCulled||xt.intersectsObject(e))){r&&Tt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Et);const t=Ut.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=i[s.materialIndex];o&&o.visible&&_.push(e,t,o,n,Tt.z,s)}}else i.visible&&_.push(e,t,i,n,Tt.z,null)}const s=e.children;for(let e=0,a=s.length;e<a;e++)t(s[e],i,n,r)}(t,e,0,J.sortObjects),_.finish(),!0===J.sortObjects&&_.sort(_t,yt),!0===At&&Yt.beginShadows();const r=y.state.shadowsArray;re.render(r,t,e),y.setupLights(e),!0===At&&Yt.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==i&&this.setRenderTarget(i),Xt.render(_,t,e,n);const a=_.opaque,s=_.transparent;a.length>0&&ue(a,t,e),s.length>0&&ue(s,t,e),!0===t.isScene&&t.onAfterRender(J,t,e),null!==et&&(Gt.updateRenderTargetMipmap(et),Gt.updateMultisampleRenderTarget(et)),Rt.buffers.depth.setTest(!0),Rt.buffers.depth.setMask(!0),Rt.buffers.color.setMask(!0),Rt.setPolygonOffset(!1),_=null,y=null},this.setFramebuffer=function(t){Q!==t&&null===et&&te.bindFramebuffer(36160,t),Q=t},this.getActiveCubeFace=function(){return $},this.getActiveMipmapLevel=function(){return tt},this.getRenderList=function(){return _},this.setRenderList=function(t){_=t},this.getRenderState=function(){return y},this.setRenderState=function(t){y=t},this.getRenderTarget=function(){return et},this.setRenderTarget=function(t,e=0,i=0){et=t,$=e,tt=i,t&&void 0===Ot.get(t).__webglFramebuffer&&Gt.setupRenderTarget(t);let n=Q,r=!1;if(t){const i=Ot.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(n=i[e],r=!0):n=t.isWebGLMultisampleRenderTarget?Ot.get(t).__webglMultisampledFramebuffer:i,ut.copy(t.viewport),dt.copy(t.scissor),ft=t.scissorTest}else ut.copy(bt).multiplyScalar(gt).floor(),dt.copy(vt).multiplyScalar(gt).floor(),ft=wt;if(it!==n&&(te.bindFramebuffer(36160,n),it=n),Rt.viewport(ut),Rt.scissor(dt),Rt.setScissorTest(ft),r){const n=Ot.get(t.texture);te.framebufferTexture2D(36160,36064,34069+e,n.__webglTexture,i)}},this.readRenderTargetPixels=function(t,e,i,n,r,a,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Ot.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){let s=!1;o!==it&&(te.bindFramebuffer(36160,o),s=!0);try{const o=t.texture,l=o.format,c=o.type;if(l!==Ft&&Kt.convert(l)!==te.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Mt||Kt.convert(c)===te.getParameter(35738)||c===kt&&(Lt.isWebGL2||Bt.get("OES_texture_float")||Bt.get("WEBGL_color_buffer_float"))||c===Pt&&(Lt.isWebGL2?Bt.get("EXT_color_buffer_float"):Bt.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===te.checkFramebufferStatus(36160)?e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&te.readPixels(e,i,n,r,Kt.convert(l),Kt.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&te.bindFramebuffer(36160,it)}}},this.copyFramebufferToTexture=function(t,e,i){void 0===i&&(i=0);const n=Math.pow(2,-i),r=Math.floor(e.image.width*n),a=Math.floor(e.image.height*n),s=Kt.convert(e.format);Gt.setTexture2D(e,0),te.copyTexImage2D(3553,i,s,t.x,t.y,r,a,0),Rt.unbindTexture()},this.copyTextureToTexture=function(t,e,i,n){void 0===n&&(n=0);const r=e.image.width,a=e.image.height,s=Kt.convert(i.format),o=Kt.convert(i.type);Gt.setTexture2D(i,0),te.pixelStorei(37440,i.flipY),te.pixelStorei(37441,i.premultiplyAlpha),te.pixelStorei(3317,i.unpackAlignment),e.isDataTexture?te.texSubImage2D(3553,n,t.x,t.y,r,a,s,o,e.image.data):e.isCompressedTexture?te.compressedTexSubImage2D(3553,n,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):te.texSubImage2D(3553,n,t.x,t.y,s,o,e.image),0===n&&i.generateMipmaps&&te.generateMipmap(3553),Rt.unbindTexture()},this.initTexture=function(t){Gt.setTexture2D(t,0),Rt.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function bo(t){yo.call(this,t)}fo.prototype=Object.assign(Object.create(_a.prototype),{constructor:fo,isArrayCamera:!0}),po.prototype=Object.assign(Object.create(Jn.prototype),{constructor:po,isGroup:!0}),Object.assign(mo.prototype,{constructor:mo,getHandSpace:function(){if(null===this._hand&&(this._hand=new po,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){const t=new po;t.matrixAutoUpdate=!1,t.visible=!1,this._hand.joints.push(t),this._hand.add(t)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new po,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new po,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,i){let n=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(t)if(l&&t.hand){a=!0;for(let n=0;n<=window.XRHand.LITTLE_PHALANX_TIP;n++)if(t.hand[n]){const r=e.getJointPose(t.hand[n],i),a=l.joints[n];null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.jointRadius=r.radius),a.visible=null!==r;const s=l.joints[window.XRHand.INDEX_PHALANX_TIP],o=l.joints[window.XRHand.THUMB_PHALANX_TIP],c=s.position.distanceTo(o.position),h=.02,u=.005;l.inputState.pinching&&c>h+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&c<=h-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else null!==s&&null!==(n=e.getPose(t.targetRaySpace,i))&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)),null!==o&&t.gripSpace&&null!==(r=e.getPose(t.gripSpace,i))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale));return null!==s&&(s.visible=null!==n),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}}),Object.assign(go.prototype,Di.prototype),bo.prototype=Object.assign(Object.create(yo.prototype),{constructor:bo,isWebGL1Renderer:!0});class vo{constructor(t,e){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new _r(t),this.density=void 0!==e?e:25e-5}clone(){return new vo(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class wo{constructor(t,e,i){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new _r(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}clone(){return new wo(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class xo extends Jn{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}function Ao(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Mi,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Fi.generateUUID()}Object.defineProperty(Ao.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ao.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(let n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Fi.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new Ao(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);return e.setUsage(this.usage),e},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Fi.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Mo=new Ji;function So(t,e,i,n){this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===n}function Eo(t){vr.call(this),this.type="SpriteMaterial",this.color=new _r(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}let To;Object.defineProperties(So.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(So.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,i=this.data.count;e<i;e++)Mo.x=this.getX(e),Mo.y=this.getY(e),Mo.z=this.getZ(e),Mo.applyMatrix4(t),this.setXYZ(e,Mo.x,Mo.y,Mo.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this},clone:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return new Mr(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new So(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Eo.prototype=Object.create(vr.prototype),Eo.prototype.constructor=Eo,Eo.prototype.isSpriteMaterial=!0,Eo.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};const Io=new Ji,Co=new Ji,ko=new Ji,Po=new Ni,Bo=new Ni,Lo=new Mn,Ro=new Ji,Do=new Ji,Oo=new Ji,Go=new Ni,Fo=new Ni,No=new Ni;function zo(t){if(Jn.call(this),this.type="Sprite",void 0===To){To=new Ur;const t=new Ao(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);To.setIndex([0,1,2,0,2,3]),To.setAttribute("position",new So(t,3,0,!1)),To.setAttribute("uv",new So(t,2,3,!1))}this.geometry=To,this.material=void 0!==t?t:new Eo,this.center=new Ni(.5,.5)}function Ho(t,e,i,n,r,a){Po.subVectors(t,i).addScalar(.5).multiply(n),void 0!==r?(Bo.x=a*Po.x-r*Po.y,Bo.y=r*Po.x+a*Po.y):Bo.copy(Po),t.copy(e),t.x+=Bo.x,t.y+=Bo.y,t.applyMatrix4(Lo)}zo.prototype=Object.assign(Object.create(Jn.prototype),{constructor:zo,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Co.setFromMatrixScale(this.matrixWorld),Lo.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ko.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Co.multiplyScalar(-ko.z);const i=this.material.rotation;let n,r;0!==i&&(r=Math.cos(i),n=Math.sin(i));const a=this.center;Ho(Ro.set(-.5,-.5,0),ko,a,Co,n,r),Ho(Do.set(.5,-.5,0),ko,a,Co,n,r),Ho(Oo.set(.5,.5,0),ko,a,Co,n,r),Go.set(0,0),Fo.set(1,0),No.set(1,1);let s=t.ray.intersectTriangle(Ro,Do,Oo,!1,Io);if(null===s&&(Ho(Do.set(-.5,.5,0),ko,a,Co,n,r),Fo.set(0,1),null===(s=t.ray.intersectTriangle(Ro,Oo,Do,!1,Io))))return;const o=t.ray.origin.distanceTo(Io);o<t.near||o>t.far||e.push({distance:o,point:Io.clone(),uv:hr.getUV(Io,Ro,Do,Oo,Go,Fo,No,new Ni),face:null,object:this})},copy:function(t){return Jn.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});const Uo=new Ji,Vo=new Ji;function Wo(){Jn.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function jo(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),sa.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Mn,this.bindMatrixInverse=new Mn}Wo.prototype=Object.assign(Object.create(Jn.prototype),{constructor:Wo,isLOD:!0,copy:function(t){Jn.prototype.copy.call(this,t,!1);const e=t.levels;for(let t=0,i=e.length;t<i;t++){const i=e[t];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);const i=this.levels;let n;for(n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let i,n;for(i=1,n=e.length;i<n&&!(t<e[i].distance);i++);return e[i-1].object}return null},raycast:function(t,e){if(this.levels.length>0){Uo.setFromMatrixPosition(this.matrixWorld);const i=t.ray.origin.distanceTo(Uo);this.getObjectForDistance(i).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){Uo.setFromMatrixPosition(t.matrixWorld),Vo.setFromMatrixPosition(this.matrixWorld);const i=Uo.distanceTo(Vo)/t.zoom;let n,r;for(e[0].object.visible=!0,n=1,r=e.length;n<r&&i>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(this._currentLevel=n-1;n<r;n++)e[n].object.visible=!1}},toJSON:function(t){const e=Jn.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const i=this.levels;for(let t=0,n=i.length;t<n;t++){const n=i[t];e.object.levels.push({object:n.object.uuid,distance:n.distance})}return e}}),jo.prototype=Object.assign(Object.create(sa.prototype),{constructor:jo,isSkinnedMesh:!0,copy:function(t){return sa.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new ji,e=this.geometry.attributes.skinWeight;for(let i=0,n=e.count;i<n;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);const n=1/t.manhattanLength();n!==1/0?t.multiplyScalar(n):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){sa.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const t=new Ji,e=new ji,i=new ji,n=new Ji,r=new Mn;return function(a,s){const o=this.skeleton,l=this.geometry;e.fromBufferAttribute(l.attributes.skinIndex,a),i.fromBufferAttribute(l.attributes.skinWeight,a),t.fromBufferAttribute(l.attributes.position,a).applyMatrix4(this.bindMatrix),s.set(0,0,0);for(let a=0;a<4;a++){const l=i.getComponent(a);if(0!==l){const i=e.getComponent(a);r.multiplyMatrices(o.bones[i].matrixWorld,o.boneInverses[i]),s.addScaledVector(n.copy(t).applyMatrix4(r),l)}}return s.applyMatrix4(this.bindMatrixInverse)}}()});const Zo=new Mn,Yo=new Mn;function Xo(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Mn)}}function Jo(){Jn.call(this),this.type="Bone"}Object.assign(Xo.prototype,{calculateInverses:function(){this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++){const e=new Mn;this.bones[t]&&e.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(e)}},pose:function(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.getInverse(this.boneInverses[t])}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}},update:function(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let n=0,r=t.length;n<r;n++){const r=t[n]?t[n].matrixWorld:Yo;Zo.multiplyMatrices(r,e[n]),Zo.toArray(i,16*n)}void 0!==n&&(n.needsUpdate=!0)},clone:function(){return new Xo(this.bones,this.boneInverses)},getBoneByName:function(t){for(let e=0,i=this.bones.length;e<i;e++){const i=this.bones[e];if(i.name===t)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Jo.prototype=Object.assign(Object.create(Jn.prototype),{constructor:Jo,isBone:!0});const qo=new Mn,Qo=new Mn,Ko=[],$o=new sa;function tl(t,e,i){sa.call(this,t,e),this.instanceMatrix=new Mr(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}function el(t){vr.call(this),this.type="LineBasicMaterial",this.color=new _r(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}tl.prototype=Object.assign(Object.create(sa.prototype),{constructor:tl,isInstancedMesh:!0,copy:function(t){return sa.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Mr(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){const i=this.matrixWorld,n=this.count;if($o.geometry=this.geometry,$o.material=this.material,void 0!==$o.material)for(let r=0;r<n;r++){this.getMatrixAt(r,qo),Qo.multiplyMatrices(i,qo),$o.matrixWorld=Qo,$o.raycast(t,Ko);for(let t=0,i=Ko.length;t<i;t++){const i=Ko[t];i.instanceId=r,i.object=this,e.push(i)}Ko.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),el.prototype=Object.create(vr.prototype),el.prototype.constructor=el,el.prototype.isLineBasicMaterial=!0,el.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};const il=new Ji,nl=new Ji,rl=new Mn,al=new An,sl=new mn;function ol(t,e,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Jn.call(this),this.type="Line",this.geometry=void 0!==t?t:new Ur,this.material=void 0!==e?e:new el,this.updateMorphTargets()}ol.prototype=Object.assign(Object.create(Jn.prototype),{constructor:ol,isLine:!0,copy:function(t){return Jn.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,i=[0];for(let t=1,n=e.count;t<n;t++)il.fromBufferAttribute(e,t-1),nl.fromBufferAttribute(e,t),i[t]=i[t-1],i[t]+=il.distanceTo(nl);t.setAttribute("lineDistance",new Br(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,i=t.lineDistances;i[0]=0;for(let t=1,n=e.length;t<n;t++)i[t]=i[t-1],i[t]+=e[t-1].distanceTo(e[t])}return this},raycast:function(t,e){const i=this.geometry,n=this.matrixWorld,r=t.params.Line.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),sl.copy(i.boundingSphere),sl.applyMatrix4(n),sl.radius+=r,!1===t.ray.intersectsSphere(sl))return;rl.getInverse(n),al.copy(t.ray).applyMatrix4(rl);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,o=new Ji,l=new Ji,c=new Ji,h=new Ji,u=this.isLineSegments?2:1;if(i.isBufferGeometry){const n=i.index,r=i.attributes.position;if(null!==n){const i=n.array;for(let n=0,a=i.length-1;n<a;n+=u){const a=i[n],u=i[n+1];if(o.fromBufferAttribute(r,a),l.fromBufferAttribute(r,u),al.distanceSqToSegment(o,l,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const d=t.ray.origin.distanceTo(h);d<t.near||d>t.far||e.push({distance:d,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else for(let i=0,n=r.count-1;i<n;i+=u){if(o.fromBufferAttribute(r,i),l.fromBufferAttribute(r,i+1),al.distanceSqToSegment(o,l,h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const n=t.ray.origin.distanceTo(h);n<t.near||n>t.far||e.push({distance:n,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else if(i.isGeometry){const n=i.vertices,r=n.length;for(let i=0;i<r-1;i+=u){if(al.distanceSqToSegment(n[i],n[i+1],h,c)>s)continue;h.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(h);r<t.near||r>t.far||e.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const ll=new Ji,cl=new Ji;function hl(t,e){ol.call(this,t,e),this.type="LineSegments"}function ul(t,e){ol.call(this,t,e),this.type="LineLoop"}function dl(t){vr.call(this),this.type="PointsMaterial",this.color=new _r(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}hl.prototype=Object.assign(Object.create(ol.prototype),{constructor:hl,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,i=[];for(let t=0,n=e.count;t<n;t+=2)ll.fromBufferAttribute(e,t),cl.fromBufferAttribute(e,t+1),i[t]=0===t?0:i[t-1],i[t+1]=i[t]+ll.distanceTo(cl);t.setAttribute("lineDistance",new Br(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,i=t.lineDistances;for(let t=0,n=e.length;t<n;t+=2)ll.copy(e[t]),cl.copy(e[t+1]),i[t]=0===t?0:i[t-1],i[t+1]=i[t]+ll.distanceTo(cl)}return this}}),ul.prototype=Object.assign(Object.create(ol.prototype),{constructor:ul,isLineLoop:!0}),dl.prototype=Object.create(vr.prototype),dl.prototype.constructor=dl,dl.prototype.isPointsMaterial=!0,dl.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};const fl=new Mn,pl=new An,ml=new mn,gl=new Ji;function _l(t,e){Jn.call(this),this.type="Points",this.geometry=void 0!==t?t:new Ur,this.material=void 0!==e?e:new dl,this.updateMorphTargets()}function yl(t,e,i,n,r,a,s){const o=pl.distanceSqToPoint(t);if(o<i){const i=new Ji;pl.closestPointToPoint(t,i),i.applyMatrix4(n);const l=r.ray.origin.distanceTo(i);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:i,index:e,face:null,object:s})}}function bl(t,e,i,n,r,a,s,o,l){Wi.call(this,t,e,i,n,r,a,s,o,l),this.format=void 0!==s?s:Gt,this.minFilter=void 0!==a?a:bt,this.magFilter=void 0!==r?r:bt,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)})}function vl(t,e,i,n,r,a,s,o,l,c,h,u){Wi.call(this,null,a,s,o,l,c,n,r,h,u),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function wl(t,e,i,n,r,a,s,o,l){Wi.call(this,t,e,i,n,r,a,s,o,l),this.needsUpdate=!0}function xl(t,e,i,n,r,a,s,o,l,c){if((c=void 0!==c?c:Ut)!==Ut&&c!==Vt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===Ut&&(i=Tt),void 0===i&&c===Vt&&(i=Dt),Wi.call(this,null,n,r,a,s,o,c,i,l),this.image={width:t,height:e},this.magFilter=void 0!==s?s:pt,this.minFilter=void 0!==o?o:pt,this.flipY=!1,this.generateMipmaps=!1}_l.prototype=Object.assign(Object.create(Jn.prototype),{constructor:_l,isPoints:!0,copy:function(t){return Jn.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const i=this.geometry,n=this.matrixWorld,r=t.params.Points.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),ml.copy(i.boundingSphere),ml.applyMatrix4(n),ml.radius+=r,!1===t.ray.intersectsSphere(ml))return;fl.getInverse(n),pl.copy(t.ray).applyMatrix4(fl);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(i.isBufferGeometry){const r=i.index,a=i.attributes.position;if(null!==r){const i=r.array;for(let r=0,o=i.length;r<o;r++){const o=i[r];gl.fromBufferAttribute(a,o),yl(gl,o,s,n,t,e,this)}}else for(let i=0,r=a.count;i<r;i++)gl.fromBufferAttribute(a,i),yl(gl,i,s,n,t,e,this)}else{const r=i.vertices;for(let i=0,a=r.length;i<a;i++)yl(r[i],i,s,n,t,e,this)}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,i=Object.keys(e);if(i.length>0){const t=e[i[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,i=t.length;e<i;e++){const i=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),bl.prototype=Object.assign(Object.create(Wi.prototype),{constructor:bl,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),vl.prototype=Object.create(Wi.prototype),vl.prototype.constructor=vl,vl.prototype.isCompressedTexture=!0,wl.prototype=Object.create(Wi.prototype),wl.prototype.constructor=wl,wl.prototype.isCanvasTexture=!0,xl.prototype=Object.create(Wi.prototype),xl.prototype.constructor=xl,xl.prototype.isDepthTexture=!0;let Al=0;const Ml=new Mn,Sl=new Jn,El=new Ji;function Tl(){Object.defineProperty(this,"id",{value:Al+=2}),this.uuid=Fi.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Tl.prototype=Object.assign(Object.create(Di.prototype),{constructor:Tl,isGeometry:!0,applyMatrix4:function(t){const e=(new zi).getNormalMatrix(t);for(let e=0,i=this.vertices.length;e<i;e++){this.vertices[e].applyMatrix4(t)}for(let t=0,i=this.faces.length;t<i;t++){const i=this.faces[t];i.normal.applyMatrix3(e).normalize();for(let t=0,n=i.vertexNormals.length;t<n;t++)i.vertexNormals[t].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Ml.makeRotationX(t),this.applyMatrix4(Ml),this},rotateY:function(t){return Ml.makeRotationY(t),this.applyMatrix4(Ml),this},rotateZ:function(t){return Ml.makeRotationZ(t),this.applyMatrix4(Ml),this},translate:function(t,e,i){return Ml.makeTranslation(t,e,i),this.applyMatrix4(Ml),this},scale:function(t,e,i){return Ml.makeScale(t,e,i),this.applyMatrix4(Ml),this},lookAt:function(t){return Sl.lookAt(t),Sl.updateMatrix(),this.applyMatrix4(Sl.matrix),this},fromBufferGeometry:function(t){const e=this,i=null!==t.index?t.index:void 0,n=t.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const r=n.position,a=n.normal,s=n.color,o=n.uv,l=n.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(let t=0;t<r.count;t++)e.vertices.push((new Ji).fromBufferAttribute(r,t)),void 0!==s&&e.colors.push((new _r).fromBufferAttribute(s,t));function c(t,i,n,r){const c=void 0===s?[]:[e.colors[t].clone(),e.colors[i].clone(),e.colors[n].clone()],h=void 0===a?[]:[(new Ji).fromBufferAttribute(a,t),(new Ji).fromBufferAttribute(a,i),(new Ji).fromBufferAttribute(a,n)],u=new yr(t,i,n,h,c,r);e.faces.push(u),void 0!==o&&e.faceVertexUvs[0].push([(new Ni).fromBufferAttribute(o,t),(new Ni).fromBufferAttribute(o,i),(new Ni).fromBufferAttribute(o,n)]),void 0!==l&&e.faceVertexUvs[1].push([(new Ni).fromBufferAttribute(l,t),(new Ni).fromBufferAttribute(l,i),(new Ni).fromBufferAttribute(l,n)])}const h=t.groups;if(h.length>0)for(let t=0;t<h.length;t++){const e=h[t],n=e.start;for(let t=n,r=n+e.count;t<r;t+=3)void 0!==i?c(i.getX(t),i.getX(t+1),i.getX(t+2),e.materialIndex):c(t,t+1,t+2,e.materialIndex)}else if(void 0!==i)for(let t=0;t<i.count;t+=3)c(i.getX(t),i.getX(t+1),i.getX(t+2));else for(let t=0;t<r.count;t+=3)c(t,t+1,t+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(El).negate(),this.translate(El.x,El.y,El.z),this},normalize:function(){this.computeBoundingSphere();const t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,n=new Mn;return n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){const t=new Ji,e=new Ji;for(let i=0,n=this.faces.length;i<n;i++){const n=this.faces[i],r=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c];t.subVectors(s,a),e.subVectors(r,a),t.cross(e),t.normalize(),n.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);const e=new Array(this.vertices.length);for(let t=0,i=this.vertices.length;t<i;t++)e[t]=new Ji;if(t){const t=new Ji,i=new Ji;for(let n=0,r=this.faces.length;n<r;n++){const r=this.faces[n],a=this.vertices[r.a],s=this.vertices[r.b],o=this.vertices[r.c];t.subVectors(o,s),i.subVectors(a,s),t.cross(i),e[r.a].add(t),e[r.b].add(t),e[r.c].add(t)}}else{this.computeFaceNormals();for(let t=0,i=this.faces.length;t<i;t++){const i=this.faces[t];e[i.a].add(i.normal),e[i.b].add(i.normal),e[i.c].add(i.normal)}}for(let t=0,i=this.vertices.length;t<i;t++)e[t].normalize();for(let t=0,i=this.faces.length;t<i;t++){const i=this.faces[t],n=i.vertexNormals;3===n.length?(n[0].copy(e[i.a]),n[1].copy(e[i.b]),n[2].copy(e[i.c])):(n[0]=e[i.a].clone(),n[1]=e[i.b].clone(),n[2]=e[i.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],i=e.vertexNormals;3===i.length?(i[0].copy(e.normal),i[1].copy(e.normal),i[2].copy(e.normal)):(i[0]=e.normal.clone(),i[1]=e.normal.clone(),i[2]=e.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]);for(let t=0,i=e.vertexNormals.length;t<i;t++)e.__originalVertexNormals[t]?e.__originalVertexNormals[t].copy(e.vertexNormals[t]):e.__originalVertexNormals[t]=e.vertexNormals[t].clone()}const t=new Tl;t.faces=this.faces;for(let e=0,i=this.morphTargets.length;e<i;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];const t=this.morphNormals[e].faceNormals,i=this.morphNormals[e].vertexNormals;for(let e=0,n=this.faces.length;e<n;e++){const e=new Ji,n={a:new Ji,b:new Ji,c:new Ji};t.push(e),i.push(n)}}const i=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t],n=i.faceNormals[t],r=i.vertexNormals[t];n.copy(e.normal),r.a.copy(e.vertexNormals[0]),r.b.copy(e.vertexNormals[1]),r.c.copy(e.vertexNormals[2])}}for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ki),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new mn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(!t||!t.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);let n;const r=this.vertices.length,a=this.vertices,s=t.vertices,o=this.faces,l=t.faces,c=this.colors,h=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new zi).getNormalMatrix(e));for(let t=0,i=s.length;t<i;t++){const i=s[t].clone();void 0!==e&&i.applyMatrix4(e),a.push(i)}for(let t=0,e=h.length;t<e;t++)c.push(h[t].clone());for(let t=0,e=l.length;t<e;t++){const e=l[t];let a,s;const c=e.vertexNormals,h=e.vertexColors,u=new yr(e.a+r,e.b+r,e.c+r);u.normal.copy(e.normal),void 0!==n&&u.normal.applyMatrix3(n).normalize();for(let t=0,e=c.length;t<e;t++)a=c[t].clone(),void 0!==n&&a.applyMatrix3(n).normalize(),u.vertexNormals.push(a);u.color.copy(e.color);for(let t=0,e=h.length;t<e;t++)s=h[t],u.vertexColors.push(s.clone());u.materialIndex=e.materialIndex+i,o.push(u)}for(let e=0,i=t.faceVertexUvs.length;e<i;e++){const i=t.faceVertexUvs[e];void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(let t=0,n=i.length;t<n;t++){const n=i[t],r=[];for(let t=0,e=n.length;t<e;t++)r.push(n[t].clone());this.faceVertexUvs[e].push(r)}}},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){const t={},e=[],i=[],n=Math.pow(10,4);for(let r=0,a=this.vertices.length;r<a;r++){const a=this.vertices[r],s=Math.round(a.x*n)+"_"+Math.round(a.y*n)+"_"+Math.round(a.z*n);void 0===t[s]?(t[s]=r,e.push(this.vertices[r]),i[r]=e.length-1):i[r]=i[t[s]]}const r=[];for(let t=0,e=this.faces.length;t<e;t++){const e=this.faces[t];e.a=i[e.a],e.b=i[e.b],e.c=i[e.c];const n=[e.a,e.b,e.c];for(let e=0;e<3;e++)if(n[e]===n[(e+1)%3]){r.push(t);break}}for(let t=r.length-1;t>=0;t--){const e=r[t];this.faces.splice(e,1);for(let t=0,i=this.faceVertexUvs.length;t<i;t++)this.faceVertexUvs[t].splice(e,1)}const a=this.vertices.length-e.length;return this.vertices=e,a},setFromPoints:function(t){this.vertices=[];for(let e=0,i=t.length;e<i;e++){const i=t[e];this.vertices.push(new Ji(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){const t=this.faces,e=t.length;for(let i=0;i<e;i++)t[i]._id=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});const i=this.faceVertexUvs[0],n=this.faceVertexUvs[1];let r,a;i&&i.length===e&&(r=[]),n&&n.length===e&&(a=[]);for(let s=0;s<e;s++){const e=t[s]._id;r&&r.push(i[e]),a&&a.push(n[e])}r&&(this.faceVertexUvs[0]=r),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){const t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}const e=[];for(let t=0;t<this.vertices.length;t++){const i=this.vertices[t];e.push(i.x,i.y,i.z)}const i=[],n=[],r={},a=[],s={},o=[],l={};for(let t=0;t<this.faces.length;t++){const e=this.faces[t],n=!0,r=!1,a=void 0!==this.faceVertexUvs[0][t],s=e.normal.length()>0,o=e.vertexNormals.length>0,l=1!==e.color.r||1!==e.color.g||1!==e.color.b,f=e.vertexColors.length>0;let p=0;if(p=c(p=c(p=c(p=c(p=c(p=c(p=c(p=c(p,0,0),1,n),2,r),3,a),4,s),5,o),6,l),7,f),i.push(p),i.push(e.a,e.b,e.c),i.push(e.materialIndex),a){const e=this.faceVertexUvs[0][t];i.push(d(e[0]),d(e[1]),d(e[2]))}if(s&&i.push(h(e.normal)),o){const t=e.vertexNormals;i.push(h(t[0]),h(t[1]),h(t[2]))}if(l&&i.push(u(e.color)),f){const t=e.vertexColors;i.push(u(t[0]),u(t[1]),u(t[2]))}}function c(t,e,i){return i?t|1<<e:t&~(1<<e)}function h(t){const e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==r[e]?r[e]:(r[e]=n.length/3,n.push(t.x,t.y,t.z),r[e])}function u(t){const e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==s[e]?s[e]:(s[e]=a.length,a.push(t.getHex()),s[e])}function d(t){const e=t.x.toString()+t.y.toString();return void 0!==l[e]?l[e]:(l[e]=o.length/2,o.push(t.x,t.y),l[e])}return t.data={},t.data.vertices=e,t.data.normals=n,a.length>0&&(t.data.colors=a),o.length>0&&(t.data.uvs=[o]),t.data.faces=i,t},clone:function(){return(new Tl).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;const e=t.vertices;for(let t=0,i=e.length;t<i;t++)this.vertices.push(e[t].clone());const i=t.colors;for(let t=0,e=i.length;t<e;t++)this.colors.push(i[t].clone());const n=t.faces;for(let t=0,e=n.length;t<e;t++)this.faces.push(n[t].clone());for(let e=0,i=t.faceVertexUvs.length;e<i;e++){const i=t.faceVertexUvs[e];void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]);for(let t=0,n=i.length;t<n;t++){const n=i[t],r=[];for(let t=0,e=n.length;t<e;t++){const e=n[t];r.push(e.clone())}this.faceVertexUvs[e].push(r)}}const r=t.morphTargets;for(let t=0,e=r.length;t<e;t++){const e={};if(e.name=r[t].name,void 0!==r[t].vertices){e.vertices=[];for(let i=0,n=r[t].vertices.length;i<n;i++)e.vertices.push(r[t].vertices[i].clone())}if(void 0!==r[t].normals){e.normals=[];for(let i=0,n=r[t].normals.length;i<n;i++)e.normals.push(r[t].normals[i].clone())}this.morphTargets.push(e)}const a=t.morphNormals;for(let t=0,e=a.length;t<e;t++){const e={};if(void 0!==a[t].vertexNormals){e.vertexNormals=[];for(let i=0,n=a[t].vertexNormals.length;i<n;i++){const n=a[t].vertexNormals[i],r={};r.a=n.a.clone(),r.b=n.b.clone(),r.c=n.c.clone(),e.vertexNormals.push(r)}}if(void 0!==a[t].faceNormals){e.faceNormals=[];for(let i=0,n=a[t].faceNormals.length;i<n;i++)e.faceNormals.push(a[t].faceNormals[i].clone())}this.morphNormals.push(e)}const s=t.skinWeights;for(let t=0,e=s.length;t<e;t++)this.skinWeights.push(s[t].clone());const o=t.skinIndices;for(let t=0,e=o.length;t<e;t++)this.skinIndices.push(o[t].clone());const l=t.lineDistances;for(let t=0,e=l.length;t<e;t++)this.lineDistances.push(l[t]);const c=t.boundingBox;null!==c&&(this.boundingBox=c.clone());const h=t.boundingSphere;return null!==h&&(this.boundingSphere=h.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class Il extends Tl{constructor(t,e,i,n,r,a){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new ca(t,e,i,n,r,a)),this.mergeVertices()}}class Cl extends Ur{constructor(t,e,i,n){super(),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;const r=[],a=[],s=[],o=[],l=new Ji,c=new Ni;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let r=0,h=3;r<=e;r++,h+=3){const u=i+r/e*n;l.x=t*Math.cos(u),l.y=t*Math.sin(u),a.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(a[h]/t+1)/2,c.y=(a[h+1]/t+1)/2,o.push(c.x,c.y)}for(let t=1;t<=e;t++)r.push(t,t+1,0);this.setIndex(r),this.setAttribute("position",new Br(a,3)),this.setAttribute("normal",new Br(s,3)),this.setAttribute("uv",new Br(o,2))}}class kl extends Tl{constructor(t,e,i,n){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new Cl(t,e,i,n)),this.mergeVertices()}}class Pl extends Ur{constructor(t,e,i,n,r,a,s,o){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o};const l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,i=i||1,n=Math.floor(n)||8,r=Math.floor(r)||1,a=void 0!==a&&a,s=void 0!==s?s:0,o=void 0!==o?o:2*Math.PI;const c=[],h=[],u=[],d=[];let f=0;const p=[],m=i/2;let g=0;function _(i){const r=f,a=new Ni,p=new Ji;let _=0;const y=!0===i?t:e,b=!0===i?1:-1;for(let t=1;t<=n;t++)h.push(0,m*b,0),u.push(0,b,0),d.push(.5,.5),f++;const v=f;for(let t=0;t<=n;t++){const e=t/n*o+s,i=Math.cos(e),r=Math.sin(e);p.x=y*r,p.y=m*b,p.z=y*i,h.push(p.x,p.y,p.z),u.push(0,b,0),a.x=.5*i+.5,a.y=.5*r*b+.5,d.push(a.x,a.y),f++}for(let t=0;t<n;t++){const e=r+t,n=v+t;!0===i?c.push(n,n+1,e):c.push(n+1,n,e),_+=3}l.addGroup(g,_,!0===i?1:2),g+=_}!function(){const a=new Ji,_=new Ji;let y=0;const b=(e-t)/i;for(let l=0;l<=r;l++){const c=[],g=l/r,y=g*(e-t)+t;for(let t=0;t<=n;t++){const e=t/n,r=e*o+s,l=Math.sin(r),p=Math.cos(r);_.x=y*l,_.y=-g*i+m,_.z=y*p,h.push(_.x,_.y,_.z),a.set(l,b,p).normalize(),u.push(a.x,a.y,a.z),d.push(e,1-g),c.push(f++)}p.push(c)}for(let t=0;t<n;t++)for(let e=0;e<r;e++){const i=p[e][t],n=p[e+1][t],r=p[e+1][t+1],a=p[e][t+1];c.push(i,n,a),c.push(n,r,a),y+=6}l.addGroup(g,y,0),g+=y}(),!1===a&&(t>0&&_(!0),e>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new Br(h,3)),this.setAttribute("normal",new Br(u,3)),this.setAttribute("uv",new Br(d,2))}}class Bl extends Tl{constructor(t,e,i,n,r,a,s,o){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Pl(t,e,i,n,r,a,s,o)),this.mergeVertices()}}class Ll extends Bl{constructor(t,e,i,n,r,a,s){super(0,t,e,i,n,r,a,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}}class Rl extends Pl{constructor(t,e,i,n,r,a,s){super(0,t,e,i,n,r,a,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}}class Dl extends Ur{constructor(t,e,i,n){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},i=i||1;const r=[],a=[];function s(t,e,i,n){const r=n+1,a=[];for(let n=0;n<=r;n++){a[n]=[];const s=t.clone().lerp(i,n/r),o=e.clone().lerp(i,n/r),l=r-n;for(let t=0;t<=l;t++)a[n][t]=0===t&&n===r?s:s.clone().lerp(o,t/l)}for(let t=0;t<r;t++)for(let e=0;e<2*(r-t)-1;e++){const i=Math.floor(e/2);e%2==0?(o(a[t][i+1]),o(a[t+1][i]),o(a[t][i])):(o(a[t][i+1]),o(a[t+1][i+1]),o(a[t+1][i]))}}function o(t){r.push(t.x,t.y,t.z)}function l(e,i){const n=3*e;i.x=t[n+0],i.y=t[n+1],i.z=t[n+2]}function c(t,e,i,n){n<0&&1===t.x&&(a[e]=t.x-1),0===i.x&&0===i.z&&(a[e]=n/2/Math.PI+.5)}function h(t){return Math.atan2(t.z,-t.x)}function u(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}!function(t){const i=new Ji,n=new Ji,r=new Ji;for(let a=0;a<e.length;a+=3)l(e[a+0],i),l(e[a+1],n),l(e[a+2],r),s(i,n,r,t)}(n=n||0),function(t){const e=new Ji;for(let i=0;i<r.length;i+=3)e.x=r[i+0],e.y=r[i+1],e.z=r[i+2],e.normalize().multiplyScalar(t),r[i+0]=e.x,r[i+1]=e.y,r[i+2]=e.z}(i),function(){const t=new Ji;for(let e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];const i=h(t)/2/Math.PI+.5,n=u(t)/Math.PI+.5;a.push(i,1-n)}(function(){const t=new Ji,e=new Ji,i=new Ji,n=new Ji,s=new Ni,o=new Ni,l=new Ni;for(let u=0,d=0;u<r.length;u+=9,d+=6){t.set(r[u+0],r[u+1],r[u+2]),e.set(r[u+3],r[u+4],r[u+5]),i.set(r[u+6],r[u+7],r[u+8]),s.set(a[d+0],a[d+1]),o.set(a[d+2],a[d+3]),l.set(a[d+4],a[d+5]),n.copy(t).add(e).add(i).divideScalar(3);const f=h(n);c(s,d+0,t,f),c(o,d+2,e,f),c(l,d+4,i,f)}})(),function(){for(let t=0;t<a.length;t+=6){const e=a[t+0],i=a[t+2],n=a[t+4],r=Math.max(e,i,n),s=Math.min(e,i,n);r>.9&&s<.1&&(e<.2&&(a[t+0]+=1),i<.2&&(a[t+2]+=1),n<.2&&(a[t+4]+=1))}}()}(),this.setAttribute("position",new Br(r,3)),this.setAttribute("normal",new Br(r.slice(),3)),this.setAttribute("uv",new Br(a,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}}class Ol extends Dl{constructor(t,e){const i=(1+Math.sqrt(5))/2,n=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class Gl extends Tl{constructor(t,e){super(),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ol(t,e)),this.mergeVertices()}}const Fl=new Ji,Nl=new Ji,zl=new Ji,Hl=new hr;class Ul extends Ur{constructor(t,e){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1,t.isGeometry&&(t=(new Ur).fromGeometry(t));const i=Math.pow(10,4),n=Math.cos(Fi.DEG2RAD*e),r=t.getIndex(),a=t.getAttribute("position"),s=r?r.count:a.count,o=[0,0,0],l=["a","b","c"],c=new Array(3),h={},u=[];for(let t=0;t<s;t+=3){r?(o[0]=r.getX(t),o[1]=r.getX(t+1),o[2]=r.getX(t+2)):(o[0]=t,o[1]=t+1,o[2]=t+2);const{a:e,b:s,c:d}=Hl;if(e.fromBufferAttribute(a,o[0]),s.fromBufferAttribute(a,o[1]),d.fromBufferAttribute(a,o[2]),Hl.getNormal(zl),c[0]=`${Math.round(e.x*i)},${Math.round(e.y*i)},${Math.round(e.z*i)}`,c[1]=`${Math.round(s.x*i)},${Math.round(s.y*i)},${Math.round(s.z*i)}`,c[2]=`${Math.round(d.x*i)},${Math.round(d.y*i)},${Math.round(d.z*i)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let t=0;t<3;t++){const e=(t+1)%3,i=c[t],r=c[e],a=Hl[l[t]],s=Hl[l[e]],d=`${i}_${r}`,f=`${r}_${i}`;f in h&&h[f]?(zl.dot(h[f].normal)<=n&&(u.push(a.x,a.y,a.z),u.push(s.x,s.y,s.z)),h[f]=null):d in h||(h[d]={index0:o[t],index1:o[e],normal:zl.clone()})}}for(const t in h)if(h[t]){const{index0:e,index1:i}=h[t];Fl.fromBufferAttribute(a,e),Nl.fromBufferAttribute(a,i),u.push(Fl.x,Fl.y,Fl.z),u.push(Nl.x,Nl.y,Nl.z)}this.setAttribute("position",new Br(u,3))}}const Vl=function(t,e,i){i=i||2;const n=e&&e.length,r=n?e[0]*i:t.length;let a=Wl(t,0,r,i,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,h,u,d,f;if(n&&(a=function(t,e,i,n){const r=[];let a,s,o,l,c;for(a=0,s=e.length;a<s;a++)o=e[a]*n,l=a<s-1?e[a+1]*n:t.length,(c=Wl(t,o,l,n,!1))===c.next&&(c.steiner=!0),r.push(ec(c));for(r.sort(Ql),a=0;a<r.length;a++)Kl(r[a],i),i=jl(i,i.next);return i}(t,e,a,i)),t.length>80*i){o=c=t[0],l=h=t[1];for(let e=i;e<r;e+=i)u=t[e],d=t[e+1],u<o&&(o=u),d<l&&(l=d),u>c&&(c=u),d>h&&(h=d);f=0!==(f=Math.max(c-o,h-l))?1/f:0}return Zl(a,s,i,o,l,f),s};function Wl(t,e,i,n,r){let a,s;if(r===function(t,e,i,n){let r=0;for(let a=e,s=i-n;a<i;a+=n)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}(t,e,i,n)>0)for(a=e;a<i;a+=n)s=uc(a,t[a],t[a+1],s);else for(a=i-n;a>=e;a-=n)s=uc(a,t[a],t[a+1],s);return s&&ac(s,s.next)&&(dc(s),s=s.next),s}function jl(t,e){if(!t)return t;e||(e=t);let i,n=t;do{if(i=!1,n.steiner||!ac(n,n.next)&&0!==rc(n.prev,n,n.next))n=n.next;else{if(dc(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function Zl(t,e,i,n,r,a,s){if(!t)return;!s&&a&&function(t,e,i,n){let r=t;do{null===r.z&&(r.z=tc(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,i,n,r,a,s,o,l,c=1;do{for(i=t,t=null,a=null,s=0;i;){for(s++,n=i,o=0,e=0;e<c&&(o++,n=n.nextZ);e++);for(l=c;o>0||l>0&&n;)0!==o&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,l--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;i=n}a.nextZ=null,c*=2}while(s>1)}(r)}(t,n,r,a);let o,l,c=t;for(;t.prev!==t.next;)if(o=t.prev,l=t.next,a?Xl(t,n,r,a):Yl(t))e.push(o.i/i),e.push(t.i/i),e.push(l.i/i),dc(t),t=l.next,c=l.next;else if((t=l)===c){s?1===s?Zl(t=Jl(jl(t),e,i),e,i,n,r,a,2):2===s&&ql(t,e,i,n,r,a):Zl(jl(t),e,i,n,r,a,1);break}}function Yl(t){const e=t.prev,i=t,n=t.next;if(rc(e,i,n)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(ic(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&rc(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Xl(t,e,i,n){const r=t.prev,a=t,s=t.next;if(rc(r,a,s)>=0)return!1;const o=r.x<a.x?r.x<s.x?r.x:s.x:a.x<s.x?a.x:s.x,l=r.y<a.y?r.y<s.y?r.y:s.y:a.y<s.y?a.y:s.y,c=r.x>a.x?r.x>s.x?r.x:s.x:a.x>s.x?a.x:s.x,h=r.y>a.y?r.y>s.y?r.y:s.y:a.y>s.y?a.y:s.y,u=tc(o,l,e,i,n),d=tc(c,h,e,i,n);let f=t.prevZ,p=t.nextZ;for(;f&&f.z>=u&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&ic(r.x,r.y,a.x,a.y,s.x,s.y,f.x,f.y)&&rc(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&ic(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&rc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=u;){if(f!==t.prev&&f!==t.next&&ic(r.x,r.y,a.x,a.y,s.x,s.y,f.x,f.y)&&rc(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&ic(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&rc(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Jl(t,e,i){let n=t;do{const r=n.prev,a=n.next.next;!ac(r,a)&&sc(r,n,n.next,a)&&cc(r,a)&&cc(a,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(a.i/i),dc(n),dc(n.next),n=t=a),n=n.next}while(n!==t);return jl(n)}function ql(t,e,i,n,r,a){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&nc(s,t)){let o=hc(s,t);return s=jl(s,s.next),o=jl(o,o.next),Zl(s,e,i,n,r,a),void Zl(o,e,i,n,r,a)}t=t.next}s=s.next}while(s!==t)}function Ql(t,e){return t.x-e.x}function Kl(t,e){if(e=function(t,e){let i=e;const n=t.x,r=t.y;let a,s=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){const t=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=n&&t>s){if(s=t,t===n){if(r===i.y)return i;if(r===i.next.y)return i.next}a=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!a)return null;if(n===s)return a;const o=a,l=a.x,c=a.y;let h,u=1/0;i=a;do{n>=i.x&&i.x>=l&&n!==i.x&&ic(r<c?n:s,r,l,c,r<c?s:n,r,i.x,i.y)&&(h=Math.abs(r-i.y)/(n-i.x),cc(i,t)&&(h<u||h===u&&(i.x>a.x||i.x===a.x&&$l(a,i)))&&(a=i,u=h)),i=i.next}while(i!==o);return a}(t,e)){const i=hc(e,t);jl(e,e.next),jl(i,i.next)}}function $l(t,e){return rc(t.prev,t,e.prev)<0&&rc(e.next,t,t.next)<0}function tc(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function ec(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function ic(t,e,i,n,r,a,s,o){return(r-s)*(e-o)-(t-s)*(a-o)>=0&&(t-s)*(n-o)-(i-s)*(e-o)>=0&&(i-s)*(a-o)-(r-s)*(n-o)>=0}function nc(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&sc(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(cc(t,e)&&cc(e,t)&&function(t,e){let i=t,n=!1;const r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(rc(t.prev,t,e.prev)||rc(t,e.prev,e))||ac(t,e)&&rc(t.prev,t,t.next)>0&&rc(e.prev,e,e.next)>0)}function rc(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function ac(t,e){return t.x===e.x&&t.y===e.y}function sc(t,e,i,n){const r=lc(rc(t,e,i)),a=lc(rc(t,e,n)),s=lc(rc(i,n,t)),o=lc(rc(i,n,e));return r!==a&&s!==o||(!(0!==r||!oc(t,i,e))||(!(0!==a||!oc(t,n,e))||(!(0!==s||!oc(i,t,n))||!(0!==o||!oc(i,e,n)))))}function oc(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function lc(t){return t>0?1:t<0?-1:0}function cc(t,e){return rc(t.prev,t,t.next)<0?rc(t,e,t.next)>=0&&rc(t,t.prev,e)>=0:rc(t,e,t.prev)<0||rc(t,t.next,e)<0}function hc(t,e){const i=new fc(t.i,t.x,t.y),n=new fc(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function uc(t,e,i,n){const r=new fc(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function dc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function fc(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const pc={area:function(t){const e=t.length;let i=0;for(let n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},isClockWise:function(t){return pc.area(t)<0},triangulateShape:function(t,e){const i=[],n=[],r=[];mc(t),gc(i,t);let a=t.length;e.forEach(mc);for(let t=0;t<e.length;t++)n.push(a),a+=e[t].length,gc(i,e[t]);const s=Vl(i,n);for(let t=0;t<s.length;t+=3)r.push(s.slice(t,t+3));return r}};function mc(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function gc(t,e){for(let i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}class _c extends Ur{constructor(t,e){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e};const i=this,n=[],r=[];for(let e=0,i=(t=Array.isArray(t)?t:[t]).length;e<i;e++){a(t[e])}function a(t){const a=[],s=void 0!==e.curveSegments?e.curveSegments:12,o=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,h=void 0!==e.bevelThickness?e.bevelThickness:6,u=void 0!==e.bevelSize?e.bevelSize:h-2,d=void 0!==e.bevelOffset?e.bevelOffset:0,f=void 0!==e.bevelSegments?e.bevelSegments:3;const p=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:yc;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let g,_,y,b,v,w=!1;p&&(g=p.getSpacedPoints(o),w=!0,c=!1,_=p.computeFrenetFrames(o,!1),y=new Ji,b=new Ji,v=new Ji),c||(f=0,h=0,u=0,d=0);const x=t.extractPoints(s);let A=x.shape;const M=x.holes;if(!pc.isClockWise(A)){A=A.reverse();for(let t=0,e=M.length;t<e;t++){const e=M[t];pc.isClockWise(e)&&(M[t]=e.reverse())}}const S=pc.triangulateShape(A,M),E=A;for(let t=0,e=M.length;t<e;t++){const e=M[t];A=A.concat(e)}function T(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(i).add(t)}const I=A.length,C=S.length;function k(t,e,i){let n,r,a;const s=t.x-e.x,o=t.y-e.y,l=i.x-t.x,c=i.y-t.y,h=s*s+o*o,u=s*c-o*l;if(Math.abs(u)>Number.EPSILON){const u=Math.sqrt(h),d=Math.sqrt(l*l+c*c),f=e.x-o/u,p=e.y+s/u,m=((i.x-c/d-f)*c-(i.y+l/d-p)*l)/(s*c-o*l),g=(n=f+s*m-t.x)*n+(r=p+o*m-t.y)*r;if(g<=2)return new Ni(n,r);a=Math.sqrt(g/2)}else{let t=!1;s>Number.EPSILON?l>Number.EPSILON&&(t=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(c)&&(t=!0),t?(n=-o,r=s,a=Math.sqrt(h)):(n=s,r=o,a=Math.sqrt(h/2))}return new Ni(n/a,r/a)}const P=[];for(let t=0,e=E.length,i=e-1,n=t+1;t<e;t++,i++,n++)i===e&&(i=0),n===e&&(n=0),P[t]=k(E[t],E[i],E[n]);const B=[];let L,R=P.concat();for(let t=0,e=M.length;t<e;t++){const e=M[t];L=[];for(let t=0,i=e.length,n=i-1,r=t+1;t<i;t++,n++,r++)n===i&&(n=0),r===i&&(r=0),L[t]=k(e[t],e[n],e[r]);B.push(L),R=R.concat(L)}for(let t=0;t<f;t++){const e=t/f,i=h*Math.cos(e*Math.PI/2),n=u*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=T(E[t],P[t],n);G(e.x,e.y,-i)}for(let t=0,e=M.length;t<e;t++){const e=M[t];L=B[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],L[t],n);G(r.x,r.y,-i)}}}const D=u+d;for(let t=0;t<I;t++){const e=c?T(A[t],R[t],D):A[t];w?(b.copy(_.normals[0]).multiplyScalar(e.x),y.copy(_.binormals[0]).multiplyScalar(e.y),v.copy(g[0]).add(b).add(y),G(v.x,v.y,v.z)):G(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<I;e++){const i=c?T(A[e],R[e],D):A[e];w?(b.copy(_.normals[t]).multiplyScalar(i.x),y.copy(_.binormals[t]).multiplyScalar(i.y),v.copy(g[t]).add(b).add(y),G(v.x,v.y,v.z)):G(i.x,i.y,l/o*t)}for(let t=f-1;t>=0;t--){const e=t/f,i=h*Math.cos(e*Math.PI/2),n=u*Math.sin(e*Math.PI/2)+d;for(let t=0,e=E.length;t<e;t++){const e=T(E[t],P[t],n);G(e.x,e.y,l+i)}for(let t=0,e=M.length;t<e;t++){const e=M[t];L=B[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],L[t],n);w?G(r.x,r.y+g[o-1].y,g[o-1].x+i):G(r.x,r.y,l+i)}}}function O(t,e){let i=t.length;for(;--i>=0;){const n=i;let r=i-1;r<0&&(r=t.length-1);for(let t=0,i=o+2*f;t<i;t++){const i=I*t,a=I*(t+1);N(e+n+i,e+r+i,e+r+a,e+n+a)}}}function G(t,e,i){a.push(t),a.push(e),a.push(i)}function F(t,e,r){z(t),z(e),z(r);const a=n.length/3,s=m.generateTopUV(i,n,a-3,a-2,a-1);H(s[0]),H(s[1]),H(s[2])}function N(t,e,r,a){z(t),z(e),z(a),z(e),z(r),z(a);const s=n.length/3,o=m.generateSideWallUV(i,n,s-6,s-3,s-2,s-1);H(o[0]),H(o[1]),H(o[3]),H(o[1]),H(o[2]),H(o[3])}function z(t){n.push(a[3*t+0]),n.push(a[3*t+1]),n.push(a[3*t+2])}function H(t){r.push(t.x),r.push(t.y)}!function(){const t=n.length/3;if(c){let t=0,e=I*t;for(let t=0;t<C;t++){const i=S[t];F(i[2]+e,i[1]+e,i[0]+e)}e=I*(t=o+2*f);for(let t=0;t<C;t++){const i=S[t];F(i[0]+e,i[1]+e,i[2]+e)}}else{for(let t=0;t<C;t++){const e=S[t];F(e[2],e[1],e[0])}for(let t=0;t<C;t++){const e=S[t];F(e[0]+I*o,e[1]+I*o,e[2]+I*o)}}i.addGroup(t,n.length/3-t,0)}(),function(){const t=n.length/3;let e=0;O(E,e),e+=E.length;for(let t=0,i=M.length;t<i;t++){const i=M[t];O(i,e),e+=i.length}i.addGroup(t,n.length/3-t,1)}()}this.setAttribute("position",new Br(n,3)),this.setAttribute("uv",new Br(r,2)),this.computeVertexNormals()}toJSON(){const t=Ur.prototype.toJSON.call(this);return function(t,e,i){if(i.shapes=[],Array.isArray(t))for(let e=0,n=t.length;e<n;e++){const n=t[e];i.shapes.push(n.uuid)}else i.shapes.push(t.uuid);void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON());return i}(this.parameters.shapes,this.parameters.options,t)}}const yc={generateTopUV:function(t,e,i,n,r){const a=e[3*i],s=e[3*i+1],o=e[3*n],l=e[3*n+1],c=e[3*r],h=e[3*r+1];return[new Ni(a,s),new Ni(o,l),new Ni(c,h)]},generateSideWallUV:function(t,e,i,n,r,a){const s=e[3*i],o=e[3*i+1],l=e[3*i+2],c=e[3*n],h=e[3*n+1],u=e[3*n+2],d=e[3*r],f=e[3*r+1],p=e[3*r+2],m=e[3*a],g=e[3*a+1],_=e[3*a+2];return Math.abs(o-h)<.01?[new Ni(s,1-l),new Ni(c,1-u),new Ni(d,1-p),new Ni(m,1-_)]:[new Ni(o,1-l),new Ni(h,1-u),new Ni(f,1-p),new Ni(g,1-_)]}};class bc extends Tl{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new _c(t,e)),this.mergeVertices()}toJSON(){const t=super.toJSON();return function(t,e,i){if(i.shapes=[],Array.isArray(t))for(let e=0,n=t.length;e<n;e++){const n=t[e];i.shapes.push(n.uuid)}else i.shapes.push(t.uuid);void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON());return i}(this.parameters.shapes,this.parameters.options,t)}}class vc extends Dl{constructor(t,e){const i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class wc extends Tl{constructor(t,e){super(),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new vc(t,e)),this.mergeVertices()}}class xc extends Ur{constructor(t,e,i,n){super(),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},e=Math.floor(e)||12,i=i||0,n=n||2*Math.PI,n=Fi.clamp(n,0,2*Math.PI);const r=[],a=[],s=[],o=1/e,l=new Ji,c=new Ni;for(let r=0;r<=e;r++){const h=i+r*o*n,u=Math.sin(h),d=Math.cos(h);for(let i=0;i<=t.length-1;i++)l.x=t[i].x*u,l.y=t[i].y,l.z=t[i].x*d,a.push(l.x,l.y,l.z),c.x=r/e,c.y=i/(t.length-1),s.push(c.x,c.y)}for(let i=0;i<e;i++)for(let e=0;e<t.length-1;e++){const n=e+i*t.length,a=n,s=n+t.length,o=n+t.length+1,l=n+1;r.push(a,s,l),r.push(s,o,l)}if(this.setIndex(r),this.setAttribute("position",new Br(a,3)),this.setAttribute("uv",new Br(s,2)),this.computeVertexNormals(),n===2*Math.PI){const i=this.attributes.normal.array,n=new Ji,r=new Ji,a=new Ji,s=e*t.length*3;for(let e=0,o=0;e<t.length;e++,o+=3)n.x=i[o+0],n.y=i[o+1],n.z=i[o+2],r.x=i[s+o+0],r.y=i[s+o+1],r.z=i[s+o+2],a.addVectors(n,r).normalize(),i[o+0]=i[s+o+0]=a.x,i[o+1]=i[s+o+1]=a.y,i[o+2]=i[s+o+2]=a.z}}}class Ac extends Tl{constructor(t,e,i,n){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:n},this.fromBufferGeometry(new xc(t,e,i,n)),this.mergeVertices()}}class Mc extends Dl{constructor(t,e){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class Sc extends Tl{constructor(t,e){super(),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Mc(t,e)),this.mergeVertices()}}function Ec(t,e,i){Ur.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};const n=[],r=[],a=[],s=[],o=new Ji,l=new Ji,c=new Ji,h=new Ji,u=new Ji;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const d=e+1;for(let n=0;n<=i;n++){const d=n/i;for(let i=0;i<=e;i++){const n=i/e;t(n,d,l),r.push(l.x,l.y,l.z),n-1e-5>=0?(t(n-1e-5,d,c),h.subVectors(l,c)):(t(n+1e-5,d,c),h.subVectors(c,l)),d-1e-5>=0?(t(n,d-1e-5,c),u.subVectors(l,c)):(t(n,d+1e-5,c),u.subVectors(c,l)),o.crossVectors(h,u).normalize(),a.push(o.x,o.y,o.z),s.push(n,d)}}for(let t=0;t<i;t++)for(let i=0;i<e;i++){const e=t*d+i,r=t*d+i+1,a=(t+1)*d+i+1,s=(t+1)*d+i;n.push(e,r,s),n.push(r,a,s)}this.setIndex(n),this.setAttribute("position",new Br(r,3)),this.setAttribute("normal",new Br(a,3)),this.setAttribute("uv",new Br(s,2))}function Tc(t,e,i){Tl.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new Ec(t,e,i)),this.mergeVertices()}Ec.prototype=Object.create(Ur.prototype),Ec.prototype.constructor=Ec,Tc.prototype=Object.create(Tl.prototype),Tc.prototype.constructor=Tc;class Ic extends Tl{constructor(t,e,i,n){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new Ca(t,e,i,n)),this.mergeVertices()}}class Cc extends Tl{constructor(t,e,i,n){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:n},this.fromBufferGeometry(new Dl(t,e,i,n)),this.mergeVertices()}}class kc extends Ur{constructor(t,e,i,n,r,a){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},t=t||.5,e=e||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,i=void 0!==i?Math.max(3,i):8;const s=[],o=[],l=[],c=[];let h=t;const u=(e-t)/(n=void 0!==n?Math.max(1,n):1),d=new Ji,f=new Ni;for(let t=0;t<=n;t++){for(let t=0;t<=i;t++){const n=r+t/i*a;d.x=h*Math.cos(n),d.y=h*Math.sin(n),o.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/e+1)/2,f.y=(d.y/e+1)/2,c.push(f.x,f.y)}h+=u}for(let t=0;t<n;t++){const e=t*(i+1);for(let t=0;t<i;t++){const n=t+e,r=n,a=n+i+1,o=n+i+2,l=n+1;s.push(r,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new Br(o,3)),this.setAttribute("normal",new Br(l,3)),this.setAttribute("uv",new Br(c,2))}}class Pc extends Tl{constructor(t,e,i,n,r,a){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new kc(t,e,i,n,r,a)),this.mergeVertices()}}class Bc extends Ur{constructor(t,e){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;const i=[],n=[],r=[],a=[];let s=0,o=0;if(!1===Array.isArray(t))l(t);else for(let e=0;e<t.length;e++)l(t[e]),this.addGroup(s,o,e),s+=o,o=0;function l(t){const s=n.length/3,l=t.extractPoints(e);let c=l.shape;const h=l.holes;!1===pc.isClockWise(c)&&(c=c.reverse());for(let t=0,e=h.length;t<e;t++){const e=h[t];!0===pc.isClockWise(e)&&(h[t]=e.reverse())}const u=pc.triangulateShape(c,h);for(let t=0,e=h.length;t<e;t++){const e=h[t];c=c.concat(e)}for(let t=0,e=c.length;t<e;t++){const e=c[t];n.push(e.x,e.y,0),r.push(0,0,1),a.push(e.x,e.y)}for(let t=0,e=u.length;t<e;t++){const e=u[t],n=e[0]+s,r=e[1]+s,a=e[2]+s;i.push(n,r,a),o+=3}}this.setIndex(i),this.setAttribute("position",new Br(n,3)),this.setAttribute("normal",new Br(r,3)),this.setAttribute("uv",new Br(a,2))}toJSON(){const t=Ur.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let i=0,n=t.length;i<n;i++){const n=t[i];e.shapes.push(n.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class Lc extends Tl{constructor(t,e){super(),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Bc(t,e)),this.mergeVertices()}toJSON(){const t=Tl.prototype.toJSON.call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(let i=0,n=t.length;i<n;i++){const n=t[i];e.shapes.push(n.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}class Rc extends Ur{constructor(t,e,i,n,r,a,s){super(),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;const o=Math.min(a+s,Math.PI);let l=0;const c=[],h=new Ji,u=new Ji,d=[],f=[],p=[],m=[];for(let d=0;d<=i;d++){const g=[],_=d/i;let y=0;0==d&&0==a?y=.5/e:d==i&&o==Math.PI&&(y=-.5/e);for(let i=0;i<=e;i++){const o=i/e;h.x=-t*Math.cos(n+o*r)*Math.sin(a+_*s),h.y=t*Math.cos(a+_*s),h.z=t*Math.sin(n+o*r)*Math.sin(a+_*s),f.push(h.x,h.y,h.z),u.copy(h).normalize(),p.push(u.x,u.y,u.z),m.push(o+y,1-_),g.push(l++)}c.push(g)}for(let t=0;t<i;t++)for(let n=0;n<e;n++){const e=c[t][n+1],r=c[t][n],s=c[t+1][n],l=c[t+1][n+1];(0!==t||a>0)&&d.push(e,r,l),(t!==i-1||o<Math.PI)&&d.push(r,s,l)}this.setIndex(d),this.setAttribute("position",new Br(f,3)),this.setAttribute("normal",new Br(p,3)),this.setAttribute("uv",new Br(m,2))}}class Dc extends Tl{constructor(t,e,i,n,r,a,s){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Rc(t,e,i,n,r,a,s)),this.mergeVertices()}}class Oc extends Dl{constructor(t,e){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}}class Gc extends Tl{constructor(t,e){super(),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Oc(t,e)),this.mergeVertices()}}class Fc extends _c{constructor(t,e){const i=(e=e||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ur;const n=i.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(n,e),this.type="TextBufferGeometry"}}class Nc extends Tl{constructor(t,e){super(),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new Fc(t,e)),this.mergeVertices()}}class zc extends Ur{constructor(t,e,i,n,r){super(),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},t=t||1,e=e||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;const a=[],s=[],o=[],l=[],c=new Ji,h=new Ji,u=new Ji;for(let a=0;a<=i;a++)for(let d=0;d<=n;d++){const f=d/n*r,p=a/i*Math.PI*2;h.x=(t+e*Math.cos(p))*Math.cos(f),h.y=(t+e*Math.cos(p))*Math.sin(f),h.z=e*Math.sin(p),s.push(h.x,h.y,h.z),c.x=t*Math.cos(f),c.y=t*Math.sin(f),u.subVectors(h,c).normalize(),o.push(u.x,u.y,u.z),l.push(d/n),l.push(a/i)}for(let t=1;t<=i;t++)for(let e=1;e<=n;e++){const i=(n+1)*t+e-1,r=(n+1)*(t-1)+e-1,s=(n+1)*(t-1)+e,o=(n+1)*t+e;a.push(i,r,o),a.push(r,s,o)}this.setIndex(a),this.setAttribute("position",new Br(s,3)),this.setAttribute("normal",new Br(o,3)),this.setAttribute("uv",new Br(l,2))}}class Hc extends Tl{constructor(t,e,i,n,r){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new zc(t,e,i,n,r)),this.mergeVertices()}}class Uc extends Ur{constructor(t,e,i,n,r,a){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:a},t=t||1,e=e||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,a=a||3;const s=[],o=[],l=[],c=[],h=new Ji,u=new Ji,d=new Ji,f=new Ji,p=new Ji,m=new Ji,g=new Ji;for(let s=0;s<=i;++s){const y=s/i*r*Math.PI*2;_(y,r,a,t,d),_(y+.01,r,a,t,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let t=0;t<=n;++t){const r=t/n*Math.PI*2,a=-e*Math.cos(r),f=e*Math.sin(r);h.x=d.x+(a*g.x+f*p.x),h.y=d.y+(a*g.y+f*p.y),h.z=d.z+(a*g.z+f*p.z),o.push(h.x,h.y,h.z),u.subVectors(h,d).normalize(),l.push(u.x,u.y,u.z),c.push(s/i),c.push(t/n)}}for(let t=1;t<=i;t++)for(let e=1;e<=n;e++){const i=(n+1)*(t-1)+(e-1),r=(n+1)*t+(e-1),a=(n+1)*t+e,o=(n+1)*(t-1)+e;s.push(i,r,o),s.push(r,a,o)}function _(t,e,i,n,r){const a=Math.cos(t),s=Math.sin(t),o=i/e*t,l=Math.cos(o);r.x=n*(2+l)*.5*a,r.y=n*(2+l)*s*.5,r.z=n*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new Br(o,3)),this.setAttribute("normal",new Br(l,3)),this.setAttribute("uv",new Br(c,2))}}class Vc extends Tl{constructor(t,e,i,n,r,a,s){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:n,p:r,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Uc(t,e,i,n,r,a)),this.mergeVertices()}}class Wc extends Ur{constructor(t,e,i,n,r){super(),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},e=e||64,i=i||1,n=n||8,r=r||!1;const a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new Ji,o=new Ji,l=new Ni;let c=new Ji;const h=[],u=[],d=[],f=[];function p(r){c=t.getPointAt(r/e,c);const l=a.normals[r],d=a.binormals[r];for(let t=0;t<=n;t++){const e=t/n*Math.PI*2,r=Math.sin(e),a=-Math.cos(e);o.x=a*l.x+r*d.x,o.y=a*l.y+r*d.y,o.z=a*l.z+r*d.z,o.normalize(),u.push(o.x,o.y,o.z),s.x=c.x+i*o.x,s.y=c.y+i*o.y,s.z=c.z+i*o.z,h.push(s.x,s.y,s.z)}}!function(){for(let t=0;t<e;t++)p(t);p(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let i=0;i<=n;i++)l.x=t/e,l.y=i/n,d.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=n;e++){const i=(n+1)*(t-1)+(e-1),r=(n+1)*t+(e-1),a=(n+1)*t+e,s=(n+1)*(t-1)+e;f.push(i,r,s),f.push(r,a,s)}}()}(),this.setIndex(f),this.setAttribute("position",new Br(h,3)),this.setAttribute("normal",new Br(u,3)),this.setAttribute("uv",new Br(d,2))}toJSON(){const t=Ur.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}class jc extends Tl{constructor(t,e,i,n,r,a){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");const s=new Wc(t,e,i,n,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}}class Zc extends Ur{constructor(t){super(),this.type="WireframeGeometry";const e=[],i=[0,0],n={},r=["a","b","c"];if(t&&t.isGeometry){const a=t.faces;for(let t=0,e=a.length;t<e;t++){const e=a[t];for(let t=0;t<3;t++){const a=e[r[t]],s=e[r[(t+1)%3]];i[0]=Math.min(a,s),i[1]=Math.max(a,s);const o=i[0]+","+i[1];void 0===n[o]&&(n[o]={index1:i[0],index2:i[1]})}}for(const i in n){const r=n[i];let a=t.vertices[r.index1];e.push(a.x,a.y,a.z),a=t.vertices[r.index2],e.push(a.x,a.y,a.z)}}else if(t&&t.isBufferGeometry){const r=new Ji;if(null!==t.index){const a=t.attributes.position,s=t.index;let o=t.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let t=0,e=o.length;t<e;++t){const e=o[t],r=e.start;for(let t=r,a=r+e.count;t<a;t+=3)for(let e=0;e<3;e++){const r=s.getX(t+e),a=s.getX(t+(e+1)%3);i[0]=Math.min(r,a),i[1]=Math.max(r,a);const o=i[0]+","+i[1];void 0===n[o]&&(n[o]={index1:i[0],index2:i[1]})}}for(const t in n){const i=n[t];r.fromBufferAttribute(a,i.index1),e.push(r.x,r.y,r.z),r.fromBufferAttribute(a,i.index2),e.push(r.x,r.y,r.z)}}else{const i=t.attributes.position;for(let t=0,n=i.count/3;t<n;t++)for(let n=0;n<3;n++){const a=3*t+n;r.fromBufferAttribute(i,a),e.push(r.x,r.y,r.z);const s=3*t+(n+1)%3;r.fromBufferAttribute(i,s),e.push(r.x,r.y,r.z)}}}this.setAttribute("position",new Br(e,3))}}var Yc=Object.freeze({__proto__:null,BoxGeometry:Il,BoxBufferGeometry:ca,CircleGeometry:kl,CircleBufferGeometry:Cl,ConeGeometry:Ll,ConeBufferGeometry:Rl,CylinderGeometry:Bl,CylinderBufferGeometry:Pl,DodecahedronGeometry:Gl,DodecahedronBufferGeometry:Ol,EdgesGeometry:Ul,ExtrudeGeometry:bc,ExtrudeBufferGeometry:_c,IcosahedronGeometry:wc,IcosahedronBufferGeometry:vc,LatheGeometry:Ac,LatheBufferGeometry:xc,OctahedronGeometry:Sc,OctahedronBufferGeometry:Mc,ParametricGeometry:Tc,ParametricBufferGeometry:Ec,PlaneGeometry:Ic,PlaneBufferGeometry:Ca,PolyhedronGeometry:Cc,PolyhedronBufferGeometry:Dl,RingGeometry:Pc,RingBufferGeometry:kc,ShapeGeometry:Lc,ShapeBufferGeometry:Bc,SphereGeometry:Dc,SphereBufferGeometry:Rc,TetrahedronGeometry:Gc,TetrahedronBufferGeometry:Oc,TextGeometry:Nc,TextBufferGeometry:Fc,TorusGeometry:Hc,TorusBufferGeometry:zc,TorusKnotGeometry:Vc,TorusKnotBufferGeometry:Uc,TubeGeometry:jc,TubeBufferGeometry:Wc,WireframeGeometry:Zc});function Xc(t){vr.call(this),this.type="ShadowMaterial",this.color=new _r(0),this.transparent=!0,this.setValues(t)}function Jc(t){ma.call(this,t),this.type="RawShaderMaterial"}function qc(t){vr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _r(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=si,this.normalScale=new Ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function Qc(t){qc.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ni(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Fi.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function Kc(t){vr.call(this),this.type="MeshPhongMaterial",this.color=new _r(16777215),this.specular=new _r(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=si,this.normalScale=new Ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function $c(t){vr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _r(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=si,this.normalScale=new Ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function th(t){vr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=si,this.normalScale=new Ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function eh(t){vr.call(this),this.type="MeshLambertMaterial",this.color=new _r(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _r(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ih(t){vr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _r(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=si,this.normalScale=new Ni(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function nh(t){el.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}Xc.prototype=Object.create(vr.prototype),Xc.prototype.constructor=Xc,Xc.prototype.isShadowMaterial=!0,Xc.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.color.copy(t.color),this},Jc.prototype=Object.create(ma.prototype),Jc.prototype.constructor=Jc,Jc.prototype.isRawShaderMaterial=!0,qc.prototype=Object.create(vr.prototype),qc.prototype.constructor=qc,qc.prototype.isMeshStandardMaterial=!0,qc.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},Qc.prototype=Object.create(qc.prototype),Qc.prototype.constructor=Qc,Qc.prototype.isMeshPhysicalMaterial=!0,Qc.prototype.copy=function(t){return qc.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new _r).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},Kc.prototype=Object.create(vr.prototype),Kc.prototype.constructor=Kc,Kc.prototype.isMeshPhongMaterial=!0,Kc.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},$c.prototype=Object.create(vr.prototype),$c.prototype.constructor=$c,$c.prototype.isMeshToonMaterial=!0,$c.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},th.prototype=Object.create(vr.prototype),th.prototype.constructor=th,th.prototype.isMeshNormalMaterial=!0,th.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},eh.prototype=Object.create(vr.prototype),eh.prototype.constructor=eh,eh.prototype.isMeshLambertMaterial=!0,eh.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},ih.prototype=Object.create(vr.prototype),ih.prototype.constructor=ih,ih.prototype.isMeshMatcapMaterial=!0,ih.prototype.copy=function(t){return vr.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},nh.prototype=Object.create(el.prototype),nh.prototype.constructor=nh,nh.prototype.isLineDashedMaterial=!0,nh.prototype.copy=function(t){return el.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var rh=Object.freeze({__proto__:null,ShadowMaterial:Xc,SpriteMaterial:Eo,RawShaderMaterial:Jc,ShaderMaterial:ma,PointsMaterial:dl,MeshPhysicalMaterial:Qc,MeshStandardMaterial:qc,MeshPhongMaterial:Kc,MeshToonMaterial:$c,MeshNormalMaterial:th,MeshLambertMaterial:eh,MeshDepthMaterial:ao,MeshDistanceMaterial:so,MeshBasicMaterial:wr,MeshMatcapMaterial:ih,LineDashedMaterial:nh,LineBasicMaterial:el,Material:vr});const ah={arraySlice:function(t,e,i){return ah.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,i=new Array(e);for(let t=0;t!==e;++t)i[t]=t;return i.sort(function(e,i){return t[e]-t[i]}),i},sortedArray:function(t,e,i){const n=t.length,r=new t.constructor(n);for(let a=0,s=0;s!==n;++a){const n=i[a]*e;for(let i=0;i!==e;++i)r[s++]=t[n+i]}return r},flattenJSON:function(t,e,i,n){let r=1,a=t[0];for(;void 0!==a&&void 0===a[n];)a=t[r++];if(void 0===a)return;let s=a[n];if(void 0!==s)if(Array.isArray(s))do{void 0!==(s=a[n])&&(e.push(a.time),i.push.apply(i,s)),a=t[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{void 0!==(s=a[n])&&(e.push(a.time),s.toArray(i,i.length)),a=t[r++]}while(void 0!==a);else do{void 0!==(s=a[n])&&(e.push(a.time),i.push(s)),a=t[r++]}while(void 0!==a)},subclip:function(t,e,i,n,r){r=r||30;const a=t.clone();a.name=e;const s=[];for(let t=0;t<a.tracks.length;++t){const e=a.tracks[t],o=e.getValueSize(),l=[],c=[];for(let t=0;t<e.times.length;++t){const a=e.times[t]*r;if(!(a<i||a>=n)){l.push(e.times[t]);for(let i=0;i<o;++i)c.push(e.values[t*o+i])}}0!==l.length&&(e.times=ah.convertArray(l,e.times.constructor),e.values=ah.convertArray(c,e.values.constructor),s.push(e))}a.tracks=s;let o=1/0;for(let t=0;t<a.tracks.length;++t)o>a.tracks[t].times[0]&&(o=a.tracks[t].times[0]);for(let t=0;t<a.tracks.length;++t)a.tracks[t].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=t),(void 0===n||n<=0)&&(n=30);const r=i.tracks.length,a=e/n;for(let e=0;e<r;++e){const n=i.tracks[e],r=n.ValueTypeName;if("bool"===r||"string"===r)continue;const s=t.tracks.find(function(t){return t.name===n.name&&t.ValueTypeName===r});if(void 0===s)continue;let o=0;const l=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const h=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);const u=n.times.length-1;let d;if(a<=n.times[0]){const t=o,e=l-o;d=ah.arraySlice(n.values,t,e)}else if(a>=n.times[u]){const t=u*l+o,e=t+l-o;d=ah.arraySlice(n.values,t,e)}else{const t=n.createInterpolant(),e=o,i=l-o;t.evaluate(a),d=ah.arraySlice(t.resultBuffer,e,i)}if("quaternion"===r){(new Xi).fromArray(d).normalize().conjugate().toArray(d)}const f=s.times.length;for(let t=0;t<f;++t){const e=t*h+c;if("quaternion"===r)Xi.multiplyQuaternionsFlat(s.values,e,d,0,s.values,e);else{const t=h-2*c;for(let i=0;i<t;++i)s.values[e+i]-=d[i]}}}return t.blendMode=Ze,t}};function sh(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function oh(t,e,i,n){sh.call(this,t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function lh(t,e,i,n){sh.call(this,t,e,i,n)}function ch(t,e,i,n){sh.call(this,t,e,i,n)}function hh(t,e,i,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ah.convertArray(e,this.TimeBufferType),this.values=ah.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function uh(t,e,i){hh.call(this,t,e,i)}function dh(t,e,i,n){hh.call(this,t,e,i,n)}function fh(t,e,i,n){hh.call(this,t,e,i,n)}function ph(t,e,i,n){sh.call(this,t,e,i,n)}function mh(t,e,i,n){hh.call(this,t,e,i,n)}function gh(t,e,i,n){hh.call(this,t,e,i,n)}function _h(t,e,i,n){hh.call(this,t,e,i,n)}function yh(t,e,i,n){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==n?n:je,this.uuid=Fi.generateUUID(),this.duration<0&&this.resetDuration()}function bh(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return fh;case"vector":case"vector2":case"vector3":case"vector4":return _h;case"color":return dh;case"quaternion":return mh;case"bool":case"boolean":return uh;case"string":return gh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],i=[];ah.flattenJSON(t.keys,e,i,"value"),t.times=e,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(sh.prototype,{evaluate:function(t){const e=this.parameterPositions;let i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{let a;i:{n:if(!(t<n)){for(let a=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===a)break;if(r=n,t<(n=e[++i]))break e}a=e.length;break i}if(t>=r)break t;{const s=e[1];t<s&&(i=2,r=s);for(let a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===a)break;if(n=r,t>=(r=e[--i-1]))break e}a=i,i=0}}for(;i<a;){const n=i+a>>>1;t<e[n]?a=n:i=n+1}if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n;for(let t=0;t!==n;++t)e[t]=i[r+t];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(sh.prototype,{beforeStart_:sh.prototype.copySampleValue_,afterEnd_:sh.prototype.copySampleValue_}),oh.prototype=Object.assign(Object.create(sh.prototype),{constructor:oh,DefaultSettings_:{endingStart:Ue,endingEnd:Ue},intervalChanged_:function(t,e,i){const n=this.parameterPositions;let r=t-2,a=t+1,s=n[r],o=n[a];if(void 0===s)switch(this.getSettings_().endingStart){case Ve:r=t,s=2*e-i;break;case We:s=e+n[r=n.length-2]-n[r+1];break;default:r=t,s=i}if(void 0===o)switch(this.getSettings_().endingEnd){case Ve:a=t,o=2*i-e;break;case We:a=1,o=i+n[1]-n[0];break;default:a=t-1,o=e}const l=.5*(i-e),c=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(o-i),this._offsetPrev=r*c,this._offsetNext=a*c},interpolate_:function(t,e,i,n){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,l=o-s,c=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,d=this._weightNext,f=(i-e)/(n-e),p=f*f,m=p*f,g=-u*m+2*u*p-u*f,_=(1+u)*m+(-1.5-2*u)*p+(-.5+u)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let t=0;t!==s;++t)r[t]=g*a[c+t]+_*a[l+t]+y*a[o+t]+b*a[h+t];return r}}),lh.prototype=Object.assign(Object.create(sh.prototype),{constructor:lh,interpolate_:function(t,e,i,n){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=t*s,l=o-s,c=(i-e)/(n-e),h=1-c;for(let t=0;t!==s;++t)r[t]=a[l+t]*h+a[o+t]*c;return r}}),ch.prototype=Object.assign(Object.create(sh.prototype),{constructor:ch,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(hh,{toJSON:function(t){const e=t.constructor;let i;if(void 0!==e.toJSON)i=e.toJSON(t);else{i={name:t.name,times:ah.convertArray(t.times,Array),values:ah.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(i.interpolation=e)}return i.type=t.ValueTypeName,i}}),Object.assign(hh.prototype,{constructor:hh,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:ze,InterpolantFactoryMethodDiscrete:function(t){return new ch(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new lh(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new oh(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case Ne:e=this.InterpolantFactoryMethodDiscrete;break;case ze:e=this.InterpolantFactoryMethodLinear;break;case He:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ne;case this.InterpolantFactoryMethodLinear:return ze;case this.InterpolantFactoryMethodSmooth:return He}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this},scale:function(t){if(1!==t){const e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this},trim:function(t,e){const i=this.times,n=i.length;let r=0,a=n-1;for(;r!==n&&i[r]<t;)++r;for(;-1!==a&&i[a]>e;)--a;if(++a,0!==r||a!==n){r>=a&&(r=(a=Math.max(a,1))-1);const t=this.getValueSize();this.times=ah.arraySlice(i,r,a),this.values=ah.arraySlice(this.values,r*t,a*t)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let e=0;e!==r;e++){const n=i[e];if("number"==typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,n),t=!1;break}if(null!==a&&a>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,n,a),t=!1;break}a=n}if(void 0!==n&&ah.isTypedArray(n))for(let e=0,i=n.length;e!==i;++e){const i=n[e];if(isNaN(i)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,i),t=!1;break}}return t},optimize:function(){const t=ah.arraySlice(this.times),e=ah.arraySlice(this.values),i=this.getValueSize(),n=this.getInterpolation()===He,r=t.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=t[s];if(o!==t[s+1]&&(1!==s||o!==o[0]))if(n)r=!0;else{const t=s*i,n=t-i,a=t+i;for(let s=0;s!==i;++s){const i=e[t+s];if(i!==e[n+s]||i!==e[a+s]){r=!0;break}}}if(r){if(s!==a){t[a]=t[s];const n=s*i,r=a*i;for(let t=0;t!==i;++t)e[r+t]=e[n+t]}++a}}if(r>0){t[a]=t[r];for(let t=r*i,n=a*i,s=0;s!==i;++s)e[n+s]=e[t+s];++a}return a!==t.length?(this.times=ah.arraySlice(t,0,a),this.values=ah.arraySlice(e,0,a*i)):(this.times=t,this.values=e),this},clone:function(){const t=ah.arraySlice(this.times,0),e=ah.arraySlice(this.values,0),i=new(0,this.constructor)(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}),uh.prototype=Object.assign(Object.create(hh.prototype),{constructor:uh,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ne,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),dh.prototype=Object.assign(Object.create(hh.prototype),{constructor:dh,ValueTypeName:"color"}),fh.prototype=Object.assign(Object.create(hh.prototype),{constructor:fh,ValueTypeName:"number"}),ph.prototype=Object.assign(Object.create(sh.prototype),{constructor:ph,interpolate_:function(t,e,i,n){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(i-e)/(n-e);let l=t*s;for(let t=l+s;l!==t;l+=4)Xi.slerpFlat(r,0,a,l-s,a,l,o);return r}}),mh.prototype=Object.assign(Object.create(hh.prototype),{constructor:mh,ValueTypeName:"quaternion",DefaultInterpolation:ze,InterpolantFactoryMethodLinear:function(t){return new ph(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),gh.prototype=Object.assign(Object.create(hh.prototype),{constructor:gh,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ne,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),_h.prototype=Object.assign(Object.create(hh.prototype),{constructor:_h,ValueTypeName:"vector"}),Object.assign(yh,{parse:function(t){const e=[],i=t.tracks,n=1/(t.fps||1);for(let t=0,r=i.length;t!==r;++t)e.push(bh(i[t]).scale(n));return new yh(t.name,t.duration,e,t.blendMode)},toJSON:function(t){const e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,n=i.length;t!==n;++t)e.push(hh.toJSON(i[t]));return n},CreateFromMorphTargetSequence:function(t,e,i,n){const r=e.length,a=[];for(let t=0;t<r;t++){let s=[],o=[];s.push((t+r-1)%r,t,(t+1)%r),o.push(0,1,0);const l=ah.getKeyframeOrder(s);s=ah.sortedArray(s,1,l),o=ah.sortedArray(o,1,l),n||0!==s[0]||(s.push(r),o.push(o[0])),a.push(new fh(".morphTargetInfluences["+e[t].name+"]",s,o).scale(1/i))}return new yh(t,-1,a)},findByName:function(t,e){let i=t;if(!Array.isArray(t)){const e=t;i=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<i.length;t++)if(i[t].name===e)return i[t];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){const n={},r=/^([\w-]*?)([\d]+)$/;for(let e=0,i=t.length;e<i;e++){const i=t[e],a=i.name.match(r);if(a&&a.length>1){const t=a[1];let e=n[t];e||(n[t]=e=[]),e.push(i)}}const a=[];for(const t in n)a.push(yh.CreateFromMorphTargetSequence(t,n[t],e,i));return a},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(t,e,i,n,r){if(0!==i.length){const a=[],s=[];ah.flattenJSON(i,a,s,n),0!==a.length&&r.push(new t(e,a,s))}},n=[],r=t.name||"default",a=t.fps||30,s=t.blendMode;let o=t.length||-1;const l=t.hierarchy||[];for(let t=0;t<l.length;t++){const r=l[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let i=0;i<r[e].morphTargets.length;i++)t[r[e].morphTargets[i]]=-1;for(const i in t){const t=[],a=[];for(let n=0;n!==r[e].morphTargets.length;++n){const n=r[e];t.push(n.time),a.push(n.morphTarget===i?1:0)}n.push(new fh(".morphTargetInfluence["+i+"]",t,a))}o=t.length*(a||1)}else{const a=".bones["+e[t].name+"]";i(_h,a+".position",r,"pos",n),i(mh,a+".quaternion",r,"rot",n),i(_h,a+".scale",r,"scl",n)}}return 0===n.length?null:new yh(r,o,n,s)}}),Object.assign(yh.prototype,{resetDuration:function(){let t=0;for(let e=0,i=this.tracks.length;e!==i;++e){const i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new yh(this.name,this.duration,t,this.blendMode)}});const vh={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function wh(t,e,i){const n=this;let r=!1,a=0,s=0,o=void 0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){s++,!1===r&&void 0!==n.onStart&&n.onStart(t,a,s),r=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,s),a===s&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)},this.resolveURL=function(t){return o?o(t):t},this.setURLModifier=function(t){return o=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=l.length;e<i;e+=2){const i=l[e],n=l[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return n}return null}}const xh=new wh;function Ah(t){this.manager=void 0!==t?t:xh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Ah.prototype,{load:function(){},loadAsync:function(t,e){const i=this;return new Promise(function(n,r){i.load(t,n,e,r)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const Mh={};function Sh(t){Ah.call(this,t)}function Eh(t){Ah.call(this,t)}function Th(t){Ah.call(this,t)}function Ih(t){Ah.call(this,t)}function Ch(t){Ah.call(this,t)}function kh(t){Ah.call(this,t)}function Ph(t){Ah.call(this,t)}function Bh(){this.type="Curve",this.arcLengthDivisions=200}function Lh(t,e,i,n,r,a,s,o){Bh.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=s||!1,this.aRotation=o||0}function Rh(t,e,i,n,r,a){Lh.call(this,t,e,i,i,n,r,a),this.type="ArcCurve"}function Dh(){let t=0,e=0,i=0,n=0;function r(r,a,s,o){t=r,e=s,i=-3*r+3*a-2*s-o,n=2*r-2*a+s+o}return{initCatmullRom:function(t,e,i,n,a){r(e,i,a*(i-t),a*(n-e))},initNonuniformCatmullRom:function(t,e,i,n,a,s,o){let l=(e-t)/a-(i-t)/(a+s)+(i-e)/s,c=(i-e)/s-(n-e)/(s+o)+(n-i)/o;r(e,i,l*=s,c*=s)},calc:function(r){const a=r*r;return t+e*r+i*a+n*(a*r)}}}Sh.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Sh,load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=vh.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;if(void 0!==Mh[t])return void Mh[t].push({onLoad:e,onProgress:i,onError:n});const s=t.match(/^data:(.*?)(;base64)?,(.*)$/);let o;if(s){const i=s[1],a=!!s[2];let o=s[3];o=decodeURIComponent(o),a&&(o=atob(o));try{let a;const s=(this.responseType||"").toLowerCase();switch(s){case"arraybuffer":case"blob":const t=new Uint8Array(o.length);for(let e=0;e<o.length;e++)t[e]=o.charCodeAt(e);a="blob"===s?new Blob([t.buffer],{type:i}):t.buffer;break;case"document":const e=new DOMParser;a=e.parseFromString(o,i);break;case"json":a=JSON.parse(o);break;default:a=o}setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0)}catch(e){setTimeout(function(){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{Mh[t]=[],Mh[t].push({onLoad:e,onProgress:i,onError:n}),(o=new XMLHttpRequest).open("GET",t,!0),o.addEventListener("load",function(e){const i=this.response,n=Mh[t];if(delete Mh[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),vh.add(t,i);for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onLoad&&e.onLoad(i)}r.manager.itemEnd(t)}else{for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}},!1),o.addEventListener("progress",function(e){const i=Mh[t];for(let t=0,n=i.length;t<n;t++){const n=i[t];n.onProgress&&n.onProgress(e)}},!1),o.addEventListener("error",function(e){const i=Mh[t];delete Mh[t];for(let t=0,n=i.length;t<n;t++){const n=i[t];n.onError&&n.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),o.addEventListener("abort",function(e){const i=Mh[t];delete Mh[t];for(let t=0,n=i.length;t<n;t++){const n=i[t];n.onError&&n.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const t in this.requestHeader)o.setRequestHeader(t,this.requestHeader[t]);o.send(null)}return r.manager.itemStart(t),o},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Eh.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Eh,load:function(t,e,i,n){const r=this,a=new Sh(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(i){try{e(r.parse(JSON.parse(i)))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},i,n)},parse:function(t){const e=[];for(let i=0;i<t.length;i++){const n=yh.parse(t[i]);e.push(n)}return e}}),Th.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Th,load:function(t,e,i,n){const r=this,a=[],s=new vl;s.image=a;const o=new Sh(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(t[c],function(t){const i=r.parse(t,!0);a[c]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},6===(l+=1)&&(1===i.mipmapCount&&(s.minFilter=bt),s.format=i.format,s.needsUpdate=!0,e&&e(s))},i,n)}if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)c(e);else o.load(t,function(t){const i=r.parse(t,!0);if(i.isCubemap){const t=i.mipmaps.length/i.mipmapCount;for(let e=0;e<t;e++){a[e]={mipmaps:[]};for(let t=0;t<i.mipmapCount;t++)a[e].mipmaps.push(i.mipmaps[e*i.mipmapCount+t]),a[e].format=i.format,a[e].width=i.width,a[e].height=i.height}}else s.image.width=i.width,s.image.height=i.height,s.mipmaps=i.mipmaps;1===i.mipmapCount&&(s.minFilter=bt),s.format=i.format,s.needsUpdate=!0,e&&e(s)},i,n);return s}}),Ih.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Ih,load:function(t,e,i,n){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=vh.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;const s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1),vh.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1),n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s}}),Ch.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Ch,load:function(t,e,i,n){const r=new wa,a=new Ih(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(i){a.load(t[i],function(t){r.images[i]=t,6===++s&&(r.needsUpdate=!0,e&&e(r))},void 0,n)}for(let e=0;e<t.length;++e)o(e);return r}}),kh.prototype=Object.assign(Object.create(Ah.prototype),{constructor:kh,load:function(t,e,i,n){const r=this,a=new Aa,s=new Sh(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(t,function(t){const i=r.parse(t);i&&(void 0!==i.image?a.image=i.image:void 0!==i.data&&(a.image.width=i.width,a.image.height=i.height,a.image.data=i.data),a.wrapS=void 0!==i.wrapS?i.wrapS:dt,a.wrapT=void 0!==i.wrapT?i.wrapT:dt,a.magFilter=void 0!==i.magFilter?i.magFilter:bt,a.minFilter=void 0!==i.minFilter?i.minFilter:bt,a.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(a.format=i.format),void 0!==i.type&&(a.type=i.type),void 0!==i.mipmaps&&(a.mipmaps=i.mipmaps,a.minFilter=xt),1===i.mipmapCount&&(a.minFilter=bt),a.needsUpdate=!0,e&&e(a,i))},i,n),a}}),Ph.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Ph,load:function(t,e,i,n){const r=new Wi,a=new Ih(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(i){r.image=i;const n=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=n?Gt:Ft,r.needsUpdate=!0,void 0!==e&&e(r)},i,n),r}}),Object.assign(Bh.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)},getPoints:function(t){void 0===t&&(t=5);const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,n=this.getPoint(0),r=0;e.push(0);for(let a=1;a<=t;a++)r+=(i=this.getPoint(a/t)).distanceTo(n),e.push(r),n=i;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const i=this.getLengths();let n=0;const r=i.length;let a;a=e||t*i[r-1];let s,o=0,l=r-1;for(;o<=l;)if((s=i[n=Math.floor(o+(l-o)/2)]-a)<0)o=n+1;else{if(!(s>0)){l=n;break}l=n-1}if(i[n=l]===a)return n/(r-1);const c=i[n];return(n+(a-c)/(i[n+1]-c))/(r-1)},getTangent:function(t,e){let i=t-1e-4,n=t+1e-4;i<0&&(i=0),n>1&&(n=1);const r=this.getPoint(i),a=this.getPoint(n),s=e||(r.isVector2?new Ni:new Ji);return s.copy(a).sub(r).normalize(),s},getTangentAt:function(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)},computeFrenetFrames:function(t,e){const i=new Ji,n=[],r=[],a=[],s=new Ji,o=new Mn;for(let e=0;e<=t;e++){const i=e/t;n[e]=this.getTangentAt(i,new Ji),n[e].normalize()}r[0]=new Ji,a[0]=new Ji;let l=Number.MAX_VALUE;const c=Math.abs(n[0].x),h=Math.abs(n[0].y),u=Math.abs(n[0].z);c<=l&&(l=c,i.set(1,0,0)),h<=l&&(l=h,i.set(0,1,0)),u<=l&&i.set(0,0,1),s.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],s),a[0].crossVectors(n[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),a[e]=a[e-1].clone(),s.crossVectors(n[e-1],n[e]),s.length()>Number.EPSILON){s.normalize();const t=Math.acos(Fi.clamp(n[e-1].dot(n[e]),-1,1));r[e].applyMatrix4(o.makeRotationAxis(s,t))}a[e].crossVectors(n[e],r[e])}if(!0===e){let e=Math.acos(Fi.clamp(r[0].dot(r[t]),-1,1));e/=t,n[0].dot(s.crossVectors(r[0],r[t]))>0&&(e=-e);for(let i=1;i<=t;i++)r[i].applyMatrix4(o.makeRotationAxis(n[i],e*i)),a[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Lh.prototype=Object.create(Bh.prototype),Lh.prototype.constructor=Lh,Lh.prototype.isEllipseCurve=!0,Lh.prototype.getPoint=function(t,e){const i=e||new Ni,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=a?0:n),!0!==this.aClockwise||a||(r===n?r=-n:r-=n);const s=this.aStartAngle+t*r;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),i=o-this.aX,n=l-this.aY;o=i*t-n*e+this.aX,l=i*e+n*t+this.aY}return i.set(o,l)},Lh.prototype.copy=function(t){return Bh.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Lh.prototype.toJSON=function(){const t=Bh.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Lh.prototype.fromJSON=function(t){return Bh.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Rh.prototype=Object.create(Lh.prototype),Rh.prototype.constructor=Rh,Rh.prototype.isArcCurve=!0;const Oh=new Ji,Gh=new Dh,Fh=new Dh,Nh=new Dh;function zh(t,e,i,n){Bh.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=void 0!==n?n:.5}function Hh(t,e,i,n,r){const a=.5*(n-e),s=.5*(r-i),o=t*t;return(2*i-2*n+a+s)*(t*o)+(-3*i+3*n-2*a-s)*o+a*t+i}function Uh(t,e,i,n){return function(t,e){const i=1-t;return i*i*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,i)+function(t,e){return t*t*e}(t,n)}function Vh(t,e,i,n,r){return function(t,e){const i=1-t;return i*i*i*e}(t,e)+function(t,e){const i=1-t;return 3*i*i*t*e}(t,i)+function(t,e){return 3*(1-t)*t*t*e}(t,n)+function(t,e){return t*t*t*e}(t,r)}function Wh(t,e,i,n){Bh.call(this),this.type="CubicBezierCurve",this.v0=t||new Ni,this.v1=e||new Ni,this.v2=i||new Ni,this.v3=n||new Ni}function jh(t,e,i,n){Bh.call(this),this.type="CubicBezierCurve3",this.v0=t||new Ji,this.v1=e||new Ji,this.v2=i||new Ji,this.v3=n||new Ji}function Zh(t,e){Bh.call(this),this.type="LineCurve",this.v1=t||new Ni,this.v2=e||new Ni}function Yh(t,e){Bh.call(this),this.type="LineCurve3",this.v1=t||new Ji,this.v2=e||new Ji}function Xh(t,e,i){Bh.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Ni,this.v1=e||new Ni,this.v2=i||new Ni}function Jh(t,e,i){Bh.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new Ji,this.v1=e||new Ji,this.v2=i||new Ji}function qh(t){Bh.call(this),this.type="SplineCurve",this.points=t||[]}zh.prototype=Object.create(Bh.prototype),zh.prototype.constructor=zh,zh.prototype.isCatmullRomCurve3=!0,zh.prototype.getPoint=function(t,e){const i=e||new Ji,n=this.points,r=n.length,a=(r-(this.closed?0:1))*t;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?s=n[(l-1)%r]:(Oh.subVectors(n[0],n[1]).add(n[0]),s=Oh);const h=n[l%r],u=n[(l+1)%r];if(this.closed||l+2<r?o=n[(l+2)%r]:(Oh.subVectors(n[r-1],n[r-2]).add(n[r-1]),o=Oh),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(s.distanceToSquared(h),t),i=Math.pow(h.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(o),t);i<1e-4&&(i=1),e<1e-4&&(e=i),n<1e-4&&(n=i),Gh.initNonuniformCatmullRom(s.x,h.x,u.x,o.x,e,i,n),Fh.initNonuniformCatmullRom(s.y,h.y,u.y,o.y,e,i,n),Nh.initNonuniformCatmullRom(s.z,h.z,u.z,o.z,e,i,n)}else"catmullrom"===this.curveType&&(Gh.initCatmullRom(s.x,h.x,u.x,o.x,this.tension),Fh.initCatmullRom(s.y,h.y,u.y,o.y,this.tension),Nh.initCatmullRom(s.z,h.z,u.z,o.z,this.tension));return i.set(Gh.calc(c),Fh.calc(c),Nh.calc(c)),i},zh.prototype.copy=function(t){Bh.prototype.copy.call(this,t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},zh.prototype.toJSON=function(){const t=Bh.prototype.toJSON.call(this);t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},zh.prototype.fromJSON=function(t){Bh.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new Ji).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Wh.prototype=Object.create(Bh.prototype),Wh.prototype.constructor=Wh,Wh.prototype.isCubicBezierCurve=!0,Wh.prototype.getPoint=function(t,e){const i=e||new Ni,n=this.v0,r=this.v1,a=this.v2,s=this.v3;return i.set(Vh(t,n.x,r.x,a.x,s.x),Vh(t,n.y,r.y,a.y,s.y)),i},Wh.prototype.copy=function(t){return Bh.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Wh.prototype.toJSON=function(){const t=Bh.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Wh.prototype.fromJSON=function(t){return Bh.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},jh.prototype=Object.create(Bh.prototype),jh.prototype.constructor=jh,jh.prototype.isCubicBezierCurve3=!0,jh.prototype.getPoint=function(t,e){const i=e||new Ji,n=this.v0,r=this.v1,a=this.v2,s=this.v3;return i.set(Vh(t,n.x,r.x,a.x,s.x),Vh(t,n.y,r.y,a.y,s.y),Vh(t,n.z,r.z,a.z,s.z)),i},jh.prototype.copy=function(t){return Bh.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},jh.prototype.toJSON=function(){const t=Bh.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},jh.prototype.fromJSON=function(t){return Bh.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Zh.prototype=Object.create(Bh.prototype),Zh.prototype.constructor=Zh,Zh.prototype.isLineCurve=!0,Zh.prototype.getPoint=function(t,e){const i=e||new Ni;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i},Zh.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Zh.prototype.getTangent=function(t,e){const i=e||new Ni;return i.copy(this.v2).sub(this.v1).normalize(),i},Zh.prototype.copy=function(t){return Bh.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Zh.prototype.toJSON=function(){const t=Bh.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Zh.prototype.fromJSON=function(t){return Bh.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Yh.prototype=Object.create(Bh.prototype),Yh.prototype.constructor=Yh,Yh.prototype.isLineCurve3=!0,Yh.prototype.getPoint=function(t,e){const i=e||new Ji;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i},Yh.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Yh.prototype.copy=function(t){return Bh.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Yh.prototype.toJSON=function(){const t=Bh.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Yh.prototype.fromJSON=function(t){return Bh.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Xh.prototype=Object.create(Bh.prototype),Xh.prototype.constructor=Xh,Xh.prototype.isQuadraticBezierCurve=!0,Xh.prototype.getPoint=function(t,e){const i=e||new Ni,n=this.v0,r=this.v1,a=this.v2;return i.set(Uh(t,n.x,r.x,a.x),Uh(t,n.y,r.y,a.y)),i},Xh.prototype.copy=function(t){return Bh.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Xh.prototype.toJSON=function(){const t=Bh.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Xh.prototype.fromJSON=function(t){return Bh.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Jh.prototype=Object.create(Bh.prototype),Jh.prototype.constructor=Jh,Jh.prototype.isQuadraticBezierCurve3=!0,Jh.prototype.getPoint=function(t,e){const i=e||new Ji,n=this.v0,r=this.v1,a=this.v2;return i.set(Uh(t,n.x,r.x,a.x),Uh(t,n.y,r.y,a.y),Uh(t,n.z,r.z,a.z)),i},Jh.prototype.copy=function(t){return Bh.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Jh.prototype.toJSON=function(){const t=Bh.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Jh.prototype.fromJSON=function(t){return Bh.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},qh.prototype=Object.create(Bh.prototype),qh.prototype.constructor=qh,qh.prototype.isSplineCurve=!0,qh.prototype.getPoint=function(t,e){const i=e||new Ni,n=this.points,r=(n.length-1)*t,a=Math.floor(r),s=r-a,o=n[0===a?a:a-1],l=n[a],c=n[a>n.length-2?n.length-1:a+1],h=n[a>n.length-3?n.length-1:a+2];return i.set(Hh(s,o.x,l.x,c.x,h.x),Hh(s,o.y,l.y,c.y,h.y)),i},qh.prototype.copy=function(t){Bh.prototype.copy.call(this,t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this},qh.prototype.toJSON=function(){const t=Bh.prototype.toJSON.call(this);t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t},qh.prototype.fromJSON=function(t){Bh.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new Ni).fromArray(i))}return this};var Qh=Object.freeze({__proto__:null,ArcCurve:Rh,CatmullRomCurve3:zh,CubicBezierCurve:Wh,CubicBezierCurve3:jh,EllipseCurve:Lh,LineCurve:Zh,LineCurve3:Yh,QuadraticBezierCurve:Xh,QuadraticBezierCurve3:Jh,SplineCurve:qh});function Kh(){Bh.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function $h(t){Kh.call(this),this.type="Path",this.currentPoint=new Ni,t&&this.setFromPoints(t)}function tu(t){$h.call(this,t),this.uuid=Fi.generateUUID(),this.type="Shape",this.holes=[]}function eu(t,e){Jn.call(this),this.type="Light",this.color=new _r(t),this.intensity=void 0!==e?e:1}function iu(t,e,i){eu.call(this,t,i),this.type="HemisphereLight",this.position.copy(Jn.DefaultUp),this.updateMatrix(),this.groundColor=new _r(e)}function nu(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Ni(512,512),this.map=null,this.mapPass=null,this.matrix=new Mn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ea,this._frameExtents=new Ni(1,1),this._viewportCount=1,this._viewports=[new ji(0,0,1,1)]}function ru(){nu.call(this,new _a(50,1,.5,500)),this.focus=1}function au(t,e,i,n,r,a){eu.call(this,t,e),this.type="SpotLight",this.position.copy(Jn.DefaultUp),this.updateMatrix(),this.target=new Jn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new ru}function su(){nu.call(this,new _a(90,1,.5,500)),this._frameExtents=new Ni(4,2),this._viewportCount=6,this._viewports=[new ji(2,1,1,1),new ji(0,1,1,1),new ji(3,1,1,1),new ji(1,1,1,1),new ji(3,0,1,1),new ji(1,0,1,1)],this._cubeDirections=[new Ji(1,0,0),new Ji(-1,0,0),new Ji(0,0,1),new Ji(0,0,-1),new Ji(0,1,0),new Ji(0,-1,0)],this._cubeUps=[new Ji(0,1,0),new Ji(0,1,0),new Ji(0,1,0),new Ji(0,1,0),new Ji(0,0,1),new Ji(0,0,-1)]}function ou(t,e,i,n){eu.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new su}function lu(t,e,i,n,r,a){ga.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==i?i:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function cu(){nu.call(this,new lu(-5,5,5,-5,.5,500))}function hu(t,e){eu.call(this,t,e),this.type="DirectionalLight",this.position.copy(Jn.DefaultUp),this.updateMatrix(),this.target=new Jn,this.shadow=new cu}function uu(t,e){eu.call(this,t,e),this.type="AmbientLight"}function du(t,e,i,n){eu.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}Kh.prototype=Object.assign(Object.create(Bh.prototype),{constructor:Kh,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Zh(e,t))},getPoint:function(t){const e=t*this.getLength(),i=this.getCurveLengths();let n=0;for(;n<i.length;){if(i[n]>=e){const t=i[n]-e,r=this.curves[n],a=r.getLength(),s=0===a?0:1-t/a;return r.getPointAt(s)}n++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;const e=[];let i;for(let n=0,r=this.curves;n<r.length;n++){const a=r[n],s=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,o=a.getPoints(s);for(let t=0;t<o.length;t++){const n=o[t];i&&i.equals(n)||(e.push(n),i=n)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){Bh.prototype.copy.call(this,t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){const t=Bh.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){Bh.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const i=t.curves[e];this.curves.push((new Qh[i.type]).fromJSON(i))}return this}}),$h.prototype=Object.assign(Object.create(Kh.prototype),{constructor:$h,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const i=new Zh(this.currentPoint.clone(),new Ni(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,i,n){const r=new Xh(this.currentPoint.clone(),new Ni(t,e),new Ni(i,n));return this.curves.push(r),this.currentPoint.set(i,n),this},bezierCurveTo:function(t,e,i,n,r,a){const s=new Wh(this.currentPoint.clone(),new Ni(t,e),new Ni(i,n),new Ni(r,a));return this.curves.push(s),this.currentPoint.set(r,a),this},splineThru:function(t){const e=new qh([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,i,n,r,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+s,e+o,i,n,r,a),this},absarc:function(t,e,i,n,r,a){return this.absellipse(t,e,i,i,n,r,a),this},ellipse:function(t,e,i,n,r,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,i,n,r,a,s,o),this},absellipse:function(t,e,i,n,r,a,s,o){const l=new Lh(t,e,i,n,r,a,s,o);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(t){return Kh.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){const t=Kh.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Kh.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),tu.prototype=Object.assign(Object.create($h.prototype),{constructor:tu,getPointsHoles:function(t){const e=[];for(let i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){$h.prototype.copy.call(this,t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){const t=$h.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){$h.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const i=t.holes[e];this.holes.push((new $h).fromJSON(i))}return this}}),eu.prototype=Object.assign(Object.create(Jn.prototype),{constructor:eu,isLight:!0,copy:function(t){return Jn.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){const e=Jn.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),iu.prototype=Object.assign(Object.create(eu.prototype),{constructor:iu,isHemisphereLight:!0,copy:function(t){return eu.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(nu.prototype,{_projScreenMatrix:new Mn,_lightPositionWorld:new Ji,_lookTarget:new Ji,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,i=this.matrix,n=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),n.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),ru.prototype=Object.assign(Object.create(nu.prototype),{constructor:ru,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,i=2*Fi.RAD2DEG*t.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;i===e.fov&&n===e.aspect&&r===e.far||(e.fov=i,e.aspect=n,e.far=r,e.updateProjectionMatrix()),nu.prototype.updateMatrices.call(this,t)}}),au.prototype=Object.assign(Object.create(eu.prototype),{constructor:au,isSpotLight:!0,copy:function(t){return eu.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),su.prototype=Object.assign(Object.create(nu.prototype),{constructor:su,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);const i=this.camera,n=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,s=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),i.position.copy(r),a.copy(i.position),a.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(a),i.updateMatrixWorld(),n.makeTranslation(-r.x,-r.y,-r.z),s.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s)}}),ou.prototype=Object.assign(Object.create(eu.prototype),{constructor:ou,isPointLight:!0,copy:function(t){return eu.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),lu.prototype=Object.assign(Object.create(ga.prototype),{constructor:lu,isOrthographicCamera:!0,copy:function(t,e){return ga.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-t,a=i+t,s=n+e,o=n-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(r+=t*this.view.offsetX)+t*this.view.width,o=(s-=e*this.view.offsetY)-e*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=Jn.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),cu.prototype=Object.assign(Object.create(nu.prototype),{constructor:cu,isDirectionalLightShadow:!0,updateMatrices:function(t){nu.prototype.updateMatrices.call(this,t)}}),hu.prototype=Object.assign(Object.create(eu.prototype),{constructor:hu,isDirectionalLight:!0,copy:function(t){return eu.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),uu.prototype=Object.assign(Object.create(eu.prototype),{constructor:uu,isAmbientLight:!0}),du.prototype=Object.assign(Object.create(eu.prototype),{constructor:du,isRectAreaLight:!0,copy:function(t){return eu.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){const e=eu.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});class fu{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Ji)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,n=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*n),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*i),e.addScaledVector(a[4],i*n*1.092548),e.addScaledVector(a[5],n*r*1.092548),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],i*r*1.092548),e.addScaledVector(a[8],.546274*(i*i-n*n)),e}getIrradianceAt(t,e){const i=t.x,n=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],1.023328*n),e.addScaledVector(a[2],1.023328*r),e.addScaledVector(a[3],1.023328*i),e.addScaledVector(a[4],.858086*i*n),e.addScaledVector(a[5],.858086*n*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],.858086*i*r),e.addScaledVector(a[8],.429043*(i*i-n*n)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(t,e+3*n);return this}toArray(t=[],e=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(t,e+3*n);return t}static getBasisAt(t,e){const i=t.x,n=t.y,r=t.z;e[0]=.282095,e[1]=.488603*n,e[2]=.488603*r,e[3]=.488603*i,e[4]=1.092548*i*n,e[5]=1.092548*n*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*i*r,e[8]=.546274*(i*i-n*n)}}function pu(t,e){eu.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new fu}function mu(t){Ah.call(this,t),this.textures={}}pu.prototype=Object.assign(Object.create(eu.prototype),{constructor:pu,isLightProbe:!0,copy:function(t){return eu.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){const e=eu.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),mu.prototype=Object.assign(Object.create(Ah.prototype),{constructor:mu,load:function(t,e,i,n){const r=this,a=new Sh(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(i){try{e(r.parse(JSON.parse(i)))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},i,n)},parse:function(t){const e=this.textures;function i(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const n=new rh[t.type];if(void 0!==t.uuid&&(n.uuid=t.uuid),void 0!==t.name&&(n.name=t.name),void 0!==t.color&&void 0!==n.color&&n.color.setHex(t.color),void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),void 0!==t.sheen&&(n.sheen=(new _r).setHex(t.sheen)),void 0!==t.emissive&&void 0!==n.emissive&&n.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==n.specular&&n.specular.setHex(t.specular),void 0!==t.shininess&&(n.shininess=t.shininess),void 0!==t.clearcoat&&(n.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(n.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(n.fog=t.fog),void 0!==t.flatShading&&(n.flatShading=t.flatShading),void 0!==t.blending&&(n.blending=t.blending),void 0!==t.combine&&(n.combine=t.combine),void 0!==t.side&&(n.side=t.side),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.transparent&&(n.transparent=t.transparent),void 0!==t.alphaTest&&(n.alphaTest=t.alphaTest),void 0!==t.depthTest&&(n.depthTest=t.depthTest),void 0!==t.depthWrite&&(n.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(n.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(n.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(n.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(n.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(n.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(n.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(n.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(n.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(n.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(n.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(n.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(n.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(n.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(n.rotation=t.rotation),1!==t.linewidth&&(n.linewidth=t.linewidth),void 0!==t.dashSize&&(n.dashSize=t.dashSize),void 0!==t.gapSize&&(n.gapSize=t.gapSize),void 0!==t.scale&&(n.scale=t.scale),void 0!==t.polygonOffset&&(n.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(n.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(n.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(n.skinning=t.skinning),void 0!==t.morphTargets&&(n.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(n.morphNormals=t.morphNormals),void 0!==t.dithering&&(n.dithering=t.dithering),void 0!==t.vertexTangents&&(n.vertexTangents=t.vertexTangents),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.toneMapped&&(n.toneMapped=t.toneMapped),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?n.vertexColors=t.vertexColors>0:n.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const r=t.uniforms[e];switch(n.uniforms[e]={},r.type){case"t":n.uniforms[e].value=i(r.value);break;case"c":n.uniforms[e].value=(new _r).setHex(r.value);break;case"v2":n.uniforms[e].value=(new Ni).fromArray(r.value);break;case"v3":n.uniforms[e].value=(new Ji).fromArray(r.value);break;case"v4":n.uniforms[e].value=(new ji).fromArray(r.value);break;case"m3":n.uniforms[e].value=(new zi).fromArray(r.value);break;case"m4":n.uniforms[e].value=(new Mn).fromArray(r.value);break;default:n.uniforms[e].value=r.value}}if(void 0!==t.defines&&(n.defines=t.defines),void 0!==t.vertexShader&&(n.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(n.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const e in t.extensions)n.extensions[e]=t.extensions[e];if(void 0!==t.shading&&(n.flatShading=1===t.shading),void 0!==t.size&&(n.size=t.size),void 0!==t.sizeAttenuation&&(n.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(n.map=i(t.map)),void 0!==t.matcap&&(n.matcap=i(t.matcap)),void 0!==t.alphaMap&&(n.alphaMap=i(t.alphaMap)),void 0!==t.bumpMap&&(n.bumpMap=i(t.bumpMap)),void 0!==t.bumpScale&&(n.bumpScale=t.bumpScale),void 0!==t.normalMap&&(n.normalMap=i(t.normalMap)),void 0!==t.normalMapType&&(n.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),n.normalScale=(new Ni).fromArray(e)}return void 0!==t.displacementMap&&(n.displacementMap=i(t.displacementMap)),void 0!==t.displacementScale&&(n.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(n.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(n.roughnessMap=i(t.roughnessMap)),void 0!==t.metalnessMap&&(n.metalnessMap=i(t.metalnessMap)),void 0!==t.emissiveMap&&(n.emissiveMap=i(t.emissiveMap)),void 0!==t.emissiveIntensity&&(n.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(n.specularMap=i(t.specularMap)),void 0!==t.envMap&&(n.envMap=i(t.envMap)),void 0!==t.envMapIntensity&&(n.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(n.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(n.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(n.lightMap=i(t.lightMap)),void 0!==t.lightMapIntensity&&(n.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(n.aoMap=i(t.aoMap)),void 0!==t.aoMapIntensity&&(n.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(n.gradientMap=i(t.gradientMap)),void 0!==t.clearcoatMap&&(n.clearcoatMap=i(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(n.clearcoatNormalMap=i(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(n.clearcoatNormalScale=(new Ni).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(n.transmission=t.transmission),void 0!==t.transmissionMap&&(n.transmissionMap=i(t.transmissionMap)),n},setTextures:function(t){return this.textures=t,this}});const gu={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let i=0,n=t.length;i<n;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function _u(){Ur.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function yu(t,e,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Mr.call(this,t,e,i),this.meshPerAttribute=n||1}function bu(t){Ah.call(this,t)}_u.prototype=Object.assign(Object.create(Ur.prototype),{constructor:_u,isInstancedBufferGeometry:!0,copy:function(t){return Ur.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t=Ur.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),yu.prototype=Object.assign(Object.create(Mr.prototype),{constructor:yu,isInstancedBufferAttribute:!0,copy:function(t){return Mr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=Mr.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),bu.prototype=Object.assign(Object.create(Ah.prototype),{constructor:bu,load:function(t,e,i,n){const r=this,a=new Sh(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(i){try{e(r.parse(JSON.parse(i)))}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},i,n)},parse:function(t){const e={},i={};function n(t,n){if(void 0!==e[n])return e[n];const r=t.interleavedBuffers[n],a=function(t,e){if(void 0!==i[e])return i[e];const n=t.arrayBuffers[e],r=new Uint32Array(n).buffer;return i[e]=r,r}(t,r.buffer),s=new Ao(new vu[r.type](a),r.stride);return s.uuid=r.uuid,e[n]=s,s}const r=t.isInstancedBufferGeometry?new _u:new Ur,a=t.data.index;if(void 0!==a){const t=new vu[a.type](a.array);r.setIndex(new Mr(t,1))}const s=t.data.attributes;for(const e in s){const i=s[e];let a;if(i.isInterleavedBufferAttribute){a=new So(n(t.data,i.data),i.itemSize,i.offset,i.normalized)}else{const t=new vu[i.type](i.array);a=new(i.isInstancedBufferAttribute?yu:Mr)(t,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),r.setAttribute(e,a)}const o=t.data.morphAttributes;if(o)for(const e in o){const i=o[e],a=[];for(let e=0,r=i.length;e<r;e++){const r=i[e];let s;if(r.isInterleavedBufferAttribute){s=new So(n(t.data,r.data),r.itemSize,r.offset,r.normalized)}else{s=new Mr(new vu[r.type](r.array),r.itemSize,r.normalized)}void 0!==r.name&&(s.name=r.name),a.push(s)}r.morphAttributes[e]=a}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let t=0,e=l.length;t!==e;++t){const e=l[t];r.addGroup(e.start,e.count,e.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new Ji;void 0!==c.center&&t.fromArray(c.center),r.boundingSphere=new mn(t,c.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}});const vu={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};class wu extends Ah{constructor(t){super(t)}load(t,e,i,n){const r=this,a=""===this.path?gu.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const s=new Sh(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,function(i){let a=null;try{a=JSON.parse(i)}catch(e){return void 0!==n&&n(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const s=a.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?r.parse(a,e):console.error("THREE.ObjectLoader: Can't load "+t)},i,n)}parse(t,e){const i=this.parseShape(t.shapes),n=this.parseGeometries(t.geometries,i),r=this.parseImages(t.images,function(){void 0!==e&&e(o)}),a=this.parseTextures(t.textures,r),s=this.parseMaterials(t.materials,a),o=this.parseObject(t.object,n,s);return t.animations&&(o.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(o),o}parseShape(t){const e={};if(void 0!==t)for(let i=0,n=t.length;i<n;i++){const n=(new tu).fromJSON(t[i]);e[n.uuid]=n}return e}parseGeometries(t,e){const i={};let n;if(void 0!==t){const r=new bu;for(let a=0,s=t.length;a<s;a++){let s;const o=t[a];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Yc[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Yc[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Yc[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Yc[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Yc[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Yc[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Yc[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Yc[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Yc[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Yc[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Yc[o.type]((new Qh[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Yc[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Yc[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(let t=0,i=o.shapes.length;t<i;t++){const i=e[o.shapes[t]];n.push(i)}s=new Yc[o.type](n,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(let t=0,i=o.shapes.length;t<i;t++){const i=e[o.shapes[t]];n.push(i)}const t=o.options.extrudePath;void 0!==t&&(o.options.extrudePath=(new Qh[t.type]).fromJSON(t)),s=new Yc[o.type](n,o.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(o);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),i[o.uuid]=s}}return i}parseMaterials(t,e){const i={},n={};if(void 0!==t){const r=new mu;r.setTextures(e);for(let e=0,a=t.length;e<a;e++){const a=t[e];if("MultiMaterial"===a.type){const t=[];for(let e=0;e<a.materials.length;e++){const n=a.materials[e];void 0===i[n.uuid]&&(i[n.uuid]=r.parse(n)),t.push(i[n.uuid])}n[a.uuid]=t}else void 0===i[a.uuid]&&(i[a.uuid]=r.parse(a)),n[a.uuid]=i[a.uuid]}}return n}parseAnimations(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i],r=yh.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),e.push(r)}return e}parseImages(t,e){const i=this,n={};let r;function a(t){return i.manager.itemStart(t),r.load(t,function(){i.manager.itemEnd(t)},void 0,function(){i.manager.itemError(t),i.manager.itemEnd(t)})}if(void 0!==t&&t.length>0){const s=new wh(e);(r=new Ih(s)).setCrossOrigin(this.crossOrigin);for(let e=0,r=t.length;e<r;e++){const r=t[e],s=r.url;if(Array.isArray(s)){n[r.uuid]=[];for(let t=0,e=s.length;t<e;t++){const e=s[t],o=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:i.resourcePath+e;n[r.uuid].push(a(o))}}else{const t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r.url)?r.url:i.resourcePath+r.url;n[r.uuid]=a(t)}}}return n}parseTextures(t,e){function i(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const n={};if(void 0!==t)for(let r=0,a=t.length;r<a;r++){const a=t[r];let s;void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image),(s=Array.isArray(e[a.image])?new wa(e[a.image]):new Wi(e[a.image])).needsUpdate=!0,s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=i(a.mapping,xu)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=i(a.wrap[0],Au),s.wrapT=i(a.wrap[1],Au)),void 0!==a.format&&(s.format=a.format),void 0!==a.type&&(s.type=a.type),void 0!==a.encoding&&(s.encoding=a.encoding),void 0!==a.minFilter&&(s.minFilter=i(a.minFilter,Mu)),void 0!==a.magFilter&&(s.magFilter=i(a.magFilter,Mu)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(s.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(s.unpackAlignment=a.unpackAlignment),n[a.uuid]=s}return n}parseObject(t,e,i){let n,r,a;function s(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let n=0,r=t.length;n<r;n++){const r=t[n];void 0===i[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(i[r])}return e}return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),i[t]}}switch(t.type){case"Scene":n=new xo,void 0!==t.background&&Number.isInteger(t.background)&&(n.background=new _r(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?n.fog=new wo(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(n.fog=new vo(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new _a(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new lu(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"AmbientLight":n=new uu(t.color,t.intensity);break;case"DirectionalLight":n=new hu(t.color,t.intensity);break;case"PointLight":n=new ou(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new du(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new au(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new iu(t.color,t.groundColor,t.intensity);break;case"LightProbe":n=(new pu).fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":n=new sa(r=s(t.geometry),a=o(t.material));break;case"InstancedMesh":r=s(t.geometry),a=o(t.material);const e=t.count,i=t.instanceMatrix;(n=new tl(r,a,e)).instanceMatrix=new Mr(new Float32Array(i.array),16);break;case"LOD":n=new Wo;break;case"Line":n=new ol(s(t.geometry),o(t.material),t.mode);break;case"LineLoop":n=new ul(s(t.geometry),o(t.material));break;case"LineSegments":n=new hl(s(t.geometry),o(t.material));break;case"PointCloud":case"Points":n=new _l(s(t.geometry),o(t.material));break;case"Sprite":n=new zo(o(t.material));break;case"Group":n=new po;break;default:n=new Jn}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(n.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(n.matrixAutoUpdate=t.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(n.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.frustumCulled&&(n.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(n.renderOrder=t.renderOrder),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.layers&&(n.layers.mask=t.layers),void 0!==t.children){const r=t.children;for(let t=0;t<r.length;t++)n.add(this.parseObject(r[t],e,i))}if("LOD"===t.type){void 0!==t.autoUpdate&&(n.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const i=e[t],r=n.getObjectByProperty("uuid",i.object);void 0!==r&&n.addLevel(r,i.distance)}}return n}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const xu={UVMapping:rt,CubeReflectionMapping:at,CubeRefractionMapping:st,EquirectangularReflectionMapping:ot,EquirectangularRefractionMapping:lt,CubeUVReflectionMapping:ct,CubeUVRefractionMapping:ht},Au={RepeatWrapping:ut,ClampToEdgeWrapping:dt,MirroredRepeatWrapping:ft},Mu={NearestFilter:pt,NearestMipmapNearestFilter:mt,NearestMipmapLinearFilter:_t,LinearFilter:bt,LinearMipmapNearestFilter:vt,LinearMipmapLinearFilter:xt};function Su(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Ah.call(this,t),this.options={premultiplyAlpha:"none"}}function Eu(){this.type="ShapePath",this.color=new _r,this.subPaths=[],this.currentPath=null}function Tu(t){this.type="Font",this.data=t}function Iu(t,e,i,n,r){const a=r.glyphs[t]||r.glyphs["?"];if(!a)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");const s=new Eu;let o,l,c,h,u,d,f,p;if(a.o){const t=a._cachedOutline||(a._cachedOutline=a.o.split(" "));for(let r=0,a=t.length;r<a;){switch(t[r++]){case"m":o=t[r++]*e+i,l=t[r++]*e+n,s.moveTo(o,l);break;case"l":o=t[r++]*e+i,l=t[r++]*e+n,s.lineTo(o,l);break;case"q":c=t[r++]*e+i,h=t[r++]*e+n,u=t[r++]*e+i,d=t[r++]*e+n,s.quadraticCurveTo(u,d,c,h);break;case"b":c=t[r++]*e+i,h=t[r++]*e+n,u=t[r++]*e+i,d=t[r++]*e+n,f=t[r++]*e+i,p=t[r++]*e+n,s.bezierCurveTo(u,d,f,p,c,h)}}}return{offsetX:a.ha*e,path:s}}function Cu(t){Ah.call(this,t)}let ku;Su.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Su,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,a=vh.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(t,s).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(i){vh.add(t,i),e&&e(i),r.manager.itemEnd(t)}).catch(function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}}),Object.assign(Eu.prototype,{moveTo:function(t,e){return this.currentPath=new $h,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,i,n){return this.currentPath.quadraticCurveTo(t,e,i,n),this},bezierCurveTo:function(t,e,i,n,r,a){return this.currentPath.bezierCurveTo(t,e,i,n,r,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function i(t){const e=[];for(let i=0,n=t.length;i<n;i++){const n=t[i],r=new tu;r.curves=n.curves,e.push(r)}return e}function n(t,e){const i=e.length;let n=!1;for(let r=i-1,a=0;a<i;r=a++){let i=e[r],s=e[a],o=s.x-i.x,l=s.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=e[a],o=-o,s=e[r],l=-l),t.y<i.y||t.y>s.y)continue;if(t.y===i.y){if(t.x===i.x)return!0}else{const e=l*(t.x-i.x)-o*(t.y-i.y);if(0===e)return!0;if(e<0)continue;n=!n}}else{if(t.y!==i.y)continue;if(s.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=s.x)return!0}}return n}const r=pc.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return i(a);let s,o,l;const c=[];if(1===a.length)return o=a[0],(l=new tu).curves=o.curves,c.push(l),c;let h=!r(a[0].getPoints());h=t?!h:h;const u=[],d=[];let f,p,m=[],g=0;d[g]=void 0,m[g]=[];for(let e=0,i=a.length;e<i;e++)s=r(f=(o=a[e]).getPoints()),(s=t?!s:s)?(!h&&d[g]&&g++,d[g]={s:new tu,p:f},d[g].s.curves=o.curves,h&&g++,m[g]=[]):m[g].push({h:o,p:f[0]});if(!d[0])return i(a);if(d.length>1){let t=!1;const e=[];for(let t=0,e=d.length;t<e;t++)u[t]=[];for(let i=0,r=d.length;i<r;i++){const r=m[i];for(let a=0;a<r.length;a++){const s=r[a];let o=!0;for(let r=0;r<d.length;r++)n(s.p,d[r].p)&&(i!==r&&e.push({froms:i,tos:r,hole:a}),o?(o=!1,u[r].push(s)):t=!0);o&&u[i].push(s)}}e.length>0&&(t||(m=u))}for(let t=0,e=d.length;t<e;t++){l=d[t].s,c.push(l);for(let e=0,i=(p=m[t]).length;e<i;e++)l.holes.push(p[e].h)}return c}}),Object.assign(Tu.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);const i=[],n=function(t,e,i){const n=Array.from?Array.from(t):String(t).split(""),r=e/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,s=[];let o=0,l=0;for(let t=0;t<n.length;t++){const e=n[t];if("\n"===e)o=0,l-=a;else{const t=Iu(e,r,o,l,i);o+=t.offsetX,s.push(t.path)}}return s}(t,e,this.data);for(let t=0,e=n.length;t<e;t++)Array.prototype.push.apply(i,n[t].toShapes());return i}}),Cu.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Cu,load:function(t,e,i,n){const r=this,a=new Sh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(t){let i;try{i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}const n=r.parse(i);e&&e(n)},i,n)},parse:function(t){return new Tu(t)}});const Pu={getContext:function(){return void 0===ku&&(ku=new(window.AudioContext||window.webkitAudioContext)),ku},setContext:function(t){ku=t}};function Bu(t){Ah.call(this,t)}function Lu(t,e,i){pu.call(this,void 0,i);const n=(new _r).set(t),r=(new _r).set(e),a=new Ji(n.r,n.g,n.b),s=new Ji(r.r,r.g,r.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(l)}function Ru(t,e){pu.call(this,void 0,e);const i=(new _r).set(t);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}Bu.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Bu,load:function(t,e,i,n){const r=this,a=new Sh(r.manager);a.setResponseType("arraybuffer"),a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(t,function(i){try{const a=i.slice(0);Pu.getContext().decodeAudioData(a,function(t){e(t)})}catch(e){n?n(e):console.error(e),r.manager.itemError(t)}},i,n)}}),Lu.prototype=Object.assign(Object.create(pu.prototype),{constructor:Lu,isHemisphereLightProbe:!0,copy:function(t){return pu.prototype.copy.call(this,t),this},toJSON:function(t){return pu.prototype.toJSON.call(this,t)}}),Ru.prototype=Object.assign(Object.create(pu.prototype),{constructor:Ru,isAmbientLightProbe:!0,copy:function(t){return pu.prototype.copy.call(this,t),this},toJSON:function(t){return pu.prototype.toJSON.call(this,t)}});const Du=new Mn,Ou=new Mn;function Gu(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _a,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _a,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(Gu.prototype,{update:function(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const i=t.projectionMatrix.clone(),n=e.eyeSep/2,r=n*e.near/e.focus,a=e.near*Math.tan(Fi.DEG2RAD*e.fov*.5)/e.zoom;let s,o;Ou.elements[12]=-n,Du.elements[12]=n,s=-a*e.aspect+r,o=a*e.aspect+r,i.elements[0]=2*e.near/(o-s),i.elements[8]=(o+s)/(o-s),this.cameraL.projectionMatrix.copy(i),s=-a*e.aspect-r,o=a*e.aspect-r,i.elements[0]=2*e.near/(o-s),i.elements[8]=(o+s)/(o-s),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Ou),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Du)}});class Fu{constructor(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}const Nu=new Ji,zu=new Xi,Hu=new Ji,Uu=new Ji;class Vu extends Jn{constructor(){super(),this.type="AudioListener",this.context=Pu.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Fu}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Nu,zu,Hu),Uu.set(0,0,-1).applyQuaternion(zu),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Nu.x,t),e.positionY.linearRampToValueAtTime(Nu.y,t),e.positionZ.linearRampToValueAtTime(Nu.z,t),e.forwardX.linearRampToValueAtTime(Uu.x,t),e.forwardY.linearRampToValueAtTime(Uu.y,t),e.forwardZ.linearRampToValueAtTime(Uu.z,t),e.upX.linearRampToValueAtTime(i.x,t),e.upY.linearRampToValueAtTime(i.y,t),e.upZ.linearRampToValueAtTime(i.z,t)}else e.setPosition(Nu.x,Nu.y,Nu.z),e.setOrientation(Uu.x,Uu.y,Uu.z,i.x,i.y,i.z)}}class Wu extends Jn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t){if(void 0===t&&(t=0),!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const ju=new Ji,Zu=new Xi,Yu=new Ji,Xu=new Ji;class Ju extends Wu{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(ju,Zu,Yu),Xu.set(0,0,1).applyQuaternion(Zu);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(ju.x,t),e.positionY.linearRampToValueAtTime(ju.y,t),e.positionZ.linearRampToValueAtTime(ju.z,t),e.orientationX.linearRampToValueAtTime(Xu.x,t),e.orientationY.linearRampToValueAtTime(Xu.y,t),e.orientationZ.linearRampToValueAtTime(Xu.z,t)}else e.setPosition(ju.x,ju.y,ju.z),e.setOrientation(Xu.x,Xu.y,Xu.z)}}class qu{constructor(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}}function Qu(t,e,i){let n,r,a;switch(this.binding=t,this.valueSize=i,e){case"quaternion":n=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(Qu.prototype,{accumulate:function(t,e){const i=this.buffer,n=this.valueSize,r=t*n+n;let a=this.cumulativeWeight;if(0===a){for(let t=0;t!==n;++t)i[r+t]=i[t];a=e}else{const t=e/(a+=e);this._mixBufferRegion(i,r,0,t,n)}this.cumulativeWeight=a},accumulateAdditive:function(t){const e=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,n,0,t,i),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,i=this.buffer,n=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(i,n,t,1-r,e)}a>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*e,1,e);for(let t=e,r=e+e;t!==r;++t)if(i[t]!==i[t+e]){s.setValue(i,n);break}},saveOriginalState:function(){const t=this.binding,e=this.buffer,i=this.valueSize,n=i*this._origIndex;t.getValue(e,n);for(let t=i,r=n;t!==r;++t)e[t]=e[n+t%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]},_select:function(t,e,i,n,r){if(n>=.5)for(let n=0;n!==r;++n)t[e+n]=t[i+n]},_slerp:function(t,e,i,n){Xi.slerpFlat(t,e,t,e,t,i,n)},_slerpAdditive:function(t,e,i,n,r){const a=this._workIndex*r;Xi.multiplyQuaternionsFlat(t,a,t,e,t,i),Xi.slerpFlat(t,e,t,e,t,a,n)},_lerp:function(t,e,i,n,r){const a=1-n;for(let s=0;s!==r;++s){const r=e+s;t[r]=t[r]*a+t[i+s]*n}},_lerpAdditive:function(t,e,i,n,r){for(let a=0;a!==r;++a){const r=e+a;t[r]=t[r]+t[i+a]*n}}});const Ku=new RegExp("[\\[\\]\\.:\\/]","g"),$u="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",td=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),ed=/(WCOD+)?/.source.replace("WCOD",$u),id=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),nd=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),rd=new RegExp("^"+td+ed+id+nd+"$"),ad=["material","materials","bones"];function sd(t,e,i){const n=i||od.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}function od(t,e,i){this.path=e,this.parsedPath=i||od.parseTrackName(e),this.node=od.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function ld(){this.uuid=Fi.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(sd.prototype,{getValue:function(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)},setValue:function(t,e){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(od,{Composite:sd,create:function(t,e,i){return t&&t.isAnimationObjectGroup?new od.Composite(t,e,i):new od(t,e,i)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Ku,"")},parseTrackName:function(t){const e=rd.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const t=i.nodeName.substring(n+1);-1!==ad.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){const i=function(t){for(let n=0;n<t.length;n++){const r=t[n];if(r.name===e||r.uuid===e)return r;const a=i(r.children);if(a)return a}return null},n=i(t.children);if(n)return n}return null}}),Object.assign(od.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)t[e++]=i[n]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++]},function(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){let t=this.node;const e=this.parsedPath,i=e.objectName,n=e.propertyName;let r=e.propertyIndex;if(t||(t=od.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let n=e.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===n){n=e;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==n){if(void 0===t[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[n]}}const a=t[n];if(void 0===a){const i=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(od.prototype,{_getValue_unbound:od.prototype.getValue,_setValue_unbound:od.prototype.setValue}),Object.assign(ld.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,i=this._paths,n=this._parsedPaths,r=this._bindings,a=r.length;let s=void 0,o=t.length,l=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const h=arguments[c],u=h.uuid;let d=e[u];if(void 0===d){d=o++,e[u]=d,t.push(h);for(let t=0,e=a;t!==e;++t)r[t].push(new od(h,i[t],n[t]))}else if(d<l){s=t[d];const o=--l,c=t[o];e[c.uuid]=d,t[d]=c,e[u]=o,t[o]=h;for(let t=0,e=a;t!==e;++t){const e=r[t],a=e[o];let s=e[d];e[d]=a,void 0===s&&(s=new od(h,i[t],n[t])),e[o]=s}}else t[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=e[o];if(void 0!==l&&l>=r){const a=r++,c=t[a];e[c.uuid]=l,t[l]=c,e[o]=a,t[a]=s;for(let t=0,e=n;t!==e;++t){const e=i[t],n=e[a],r=e[l];e[l]=n,e[a]=r}}}this.nCachedObjects_=r},uncache:function(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_,a=t.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=e[o];if(void 0!==l)if(delete e[o],l<r){const s=--r,o=t[s],c=--a,h=t[c];e[o.uuid]=l,t[l]=o,e[h.uuid]=s,t[s]=h,t.pop();for(let t=0,e=n;t!==e;++t){const e=i[t],n=e[s],r=e[c];e[l]=n,e[s]=r,e.pop()}}else{const r=--a,s=t[r];r>0&&(e[s.uuid]=l),t[l]=s,t.pop();for(let t=0,e=n;t!==e;++t){const e=i[t];e[l]=e[r],e.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){const i=this._bindingsIndicesByPath;let n=i[t];const r=this._bindings;if(void 0!==n)return r[n];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,h=new Array(l);n=r.length,i[t]=n,a.push(t),s.push(e),r.push(h);for(let i=c,n=o.length;i!==n;++i){const n=o[i];h[i]=new od(n,t,e)}return h},unsubscribe_:function(t){const e=this._bindingsIndicesByPath,i=e[t];if(void 0!==i){const n=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];e[t[s]]=i,a[i]=o,a.pop(),r[i]=r[s],r.pop(),n[i]=n[s],n.pop()}}});function cd(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}cd.prototype=Object.assign(Object.create(Di.prototype),{constructor:cd,_bindAction:function(t,e){const i=t._localRoot||this._root,n=t._clip.tracks,r=n.length,a=t._propertyBindings,s=t._interpolants,o=i.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let t=0;t!==r;++t){const r=n[t],l=r.name;let h=c[l];if(void 0!==h)a[t]=h;else{if(void 0!==(h=a[t])){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,o,l));continue}const n=e&&e._propertyBindings[t].binding.parsedPath;++(h=new Qu(od.create(i,l,n),r.ValueTypeName,r.getValueSize())).referenceCount,this._addInactiveBinding(h,o,l),a[t]=h}s[t].resultBuffer=h.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,i=t._clip.uuid,n=this._actionsByClip[i];this._bindAction(t,n&&n.knownActions[0]),this._addInactiveAction(t,i,e)}const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,i){const n=this._actions,r=this._actionsByClip;let a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{const e=a.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=n.length,n.push(t),a.actionByRoot[i]=t},_removeInactiveAction:function(t){const e=this._actions,i=e[e.length-1],n=t._cacheIndex;i._cacheIndex=n,e[n]=i,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),t._byClipCacheIndex=null,delete s.actionByRoot[(t._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const i=e[t];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){const e=this._actions,i=t._cacheIndex,n=this._nActiveActions++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackAction:function(t){const e=this._actions,i=t._cacheIndex,n=--this._nActiveActions,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_addInactiveBinding:function(t,e,i){const n=this._bindingsByRootAndName,r=this._bindings;let a=n[e];void 0===a&&(a={},n[e]=a),a[i]=t,t._cacheIndex=r.length,r.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,i=t.binding,n=i.rootNode.uuid,r=i.path,a=this._bindingsByRootAndName,s=a[n],o=e[e.length-1],l=t._cacheIndex;o._cacheIndex=l,e[l]=o,e.pop(),delete s[r],0===Object.keys(s).length&&delete a[n]},_lendBinding:function(t){const e=this._bindings,i=t._cacheIndex,n=this._nActiveBindings++,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_takeBackBinding:function(t){const e=this._bindings,i=t._cacheIndex,n=--this._nActiveBindings,r=e[n];t._cacheIndex=n,e[n]=t,r._cacheIndex=i,e[i]=r},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return void 0===i&&((i=new lh(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=i),i},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,i=t.__cacheIndex,n=--this._nActiveControlInterpolants,r=e[n];t.__cacheIndex=n,e[n]=t,r.__cacheIndex=i,e[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,i){const n=e||this._root,r=n.uuid;let a="string"==typeof t?yh.findByName(n,t):t;const s=null!==a?a.uuid:t,o=this._actionsByClip[s];let l=null;if(void 0===i&&(i=null!==a?a.blendMode:je),void 0!==o){const t=o.actionByRoot[r];if(void 0!==t&&t.blendMode===i)return t;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new class{constructor(t,e,i,n){this._mixer=t,this._clip=e,this._localRoot=i||null,this.blendMode=n||e.blendMode;const r=e.tracks,a=r.length,s=new Array(a),o={endingStart:Ue,endingEnd:Ue};for(let t=0;t!==a;++t){const e=r[t].createInterpolant(null);s[t]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ge,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i){if(t.fadeOut(e),this.fadeIn(e),i){const i=this._clip.duration,n=t._clip.duration,r=n/i,a=i/n;t.warp(1,r,e),this.warp(a,1,e)}return this}crossFadeTo(t,e,i){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const n=this._mixer,r=n.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+i,l[0]=t/a,l[1]=e/a,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,n){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const n=(t-r)*i;if(n<0||0===i)return;this._startTime=null,e=i*n}e*=this._updateTimeScale(t);const a=this._updateTime(e),s=this._updateWeight(t);if(s>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case Ze:for(let i=0,n=t.length;i!==n;++i)t[i].evaluate(a),e[i].accumulateAdditive(s);break;case je:default:for(let i=0,r=t.length;i!==r;++i)t[i].evaluate(a),e[i].accumulate(n,s)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(null!==i){const n=i.evaluate(t)[0];e*=n,t>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(e*=i.evaluate(t)[0],t>i.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let n=this.time+t,r=this._loopCount;const a=i===Fe;if(0===t)return-1===r?n:a&&1==(1&r)?e-n:n;if(i===Oe){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(n>=e)n=e;else{if(!(n<0)){this.time=n;break t}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),n>=e||n<0){const i=Math.floor(n/e);n-=e*i,r+=Math.abs(i);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=t>0?e:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){const e=t<0;this._setEndings(e,!e,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(a&&1==(1&r))return e-n}return n}_setEndings(t,e,i){const n=this._interpolantSettings;i?(n.endingStart=Ve,n.endingEnd=Ve):(n.endingStart=t?this.zeroSlopeAtStart?Ve:Ue:We,n.endingEnd=e?this.zeroSlopeAtEnd?Ve:Ue:We)}_scheduleFading(t,e,i){const n=this._mixer,r=n.time;let a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=e,s[1]=r+t,o[1]=i,this}}(this,a,e,i);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c},existingAction:function(t,e){const i=e||this._root,n=i.uuid,r="string"==typeof t?yh.findByName(i,t):t,a=r?r.uuid:t,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[n]||null},stopAllAction:function(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this},update:function(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,n=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1;for(let s=0;s!==i;++s){e[s]._update(n,t,r,a)}const s=this._bindings,o=this._nActiveBindings;for(let t=0;t!==o;++t)s[t].apply(a);return this},setTime:function(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,i=t.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){const t=r.knownActions;for(let i=0,n=t.length;i!==n;++i){const n=t[i];this._deactivateAction(n);const r=n._cacheIndex,a=e[e.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,a._cacheIndex=r,e[r]=a,e.pop(),this._removeInactiveBindingsForAction(n)}delete n[i]}},uncacheRoot:function(t){const e=t.uuid,i=this._actionsByClip;for(const t in i){const n=i[t].actionByRoot[e];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}const n=this._bindingsByRootAndName[e];if(void 0!==n)for(const t in n){const e=n[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}},uncacheAction:function(t,e){const i=this.existingAction(t,e);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}});class hd{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new hd(void 0===this.value.clone?this.value:this.value.clone())}}function ud(t,e,i){Ao.call(this,t,e),this.meshPerAttribute=i||1}function dd(t,e,i,n,r){this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=n,this.count=r,this.version=0}function fd(t,e,i,n){this.ray=new An(t,e),this.near=i||0,this.far=n||1/0,this.camera=null,this.layers=new Dn,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function pd(t,e){return t.distance-e.distance}function md(t,e,i,n){if(t.layers.test(e.layers)&&t.raycast(e,i),!0===n){const n=t.children;for(let t=0,r=n.length;t<r;t++)md(n[t],e,i,!0)}}ud.prototype=Object.assign(Object.create(Ao.prototype),{constructor:ud,isInstancedInterleavedBuffer:!0,copy:function(t){return Ao.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=Ao.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=Ao.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.defineProperty(dd.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(dd.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(fd.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,i){const n=i||[];return md(t,this,n,e),n.sort(pd),n},intersectObjects:function(t,e,i){const n=i||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(let i=0,r=t.length;i<r;i++)md(t[i],this,n,e);return n.sort(pd),n}});class gd{constructor(t=1,e=0,i=0){return this.radius=t,this.phi=e,this.theta=i,this}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Fi.clamp(e/this.radius,-1,1))),this}}class _d{constructor(t,e,i){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}set(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}}const yd=new Ni;class bd{constructor(t,e){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new Ni(1/0,1/0),this.max=void 0!==e?e:new Ni(-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=yd.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Ni),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Ni),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Ni),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Ni),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return yd.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const vd=new Ji,wd=new Ji;class xd{constructor(t,e){this.start=void 0!==t?t:new Ji,this.end=void 0!==e?e:new Ji}set(t,e){return this.start.copy(t),this.end.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Ji),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Ji),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Ji),this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){vd.subVectors(t,this.start),wd.subVectors(this.end,this.start);const i=wd.dot(wd);let n=wd.dot(vd)/i;return e&&(n=Fi.clamp(n,0,1)),n}closestPointToPoint(t,e,i){const n=this.closestPointToPointParameter(t,e);return void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new Ji),this.delta(i).multiplyScalar(n).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}function Ad(t){Jn.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Ad.prototype=Object.create(Jn.prototype),Ad.prototype.constructor=Ad,Ad.prototype.isImmediateRenderObject=!0;const Md=new Ji;class Sd extends Jn{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const i=new Ur,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,e=1,i=32;t<i;t++,e++){const r=t/i*Math.PI*2,a=e/i*Math.PI*2;n.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}i.setAttribute("position",new Br(n,3));const r=new el({fog:!1,toneMapped:!1});this.cone=new hl(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Md.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Md),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ed=new Ji,Td=new Mn,Id=new Mn;class Cd extends hl{constructor(t){const e=function t(e){const i=[];e&&e.isBone&&i.push(e);for(let n=0;n<e.children.length;n++)i.push.apply(i,t(e.children[n]));return i}(t),i=new Ur,n=[],r=[],a=new _r(0,0,1),s=new _r(0,1,0);for(let t=0;t<e.length;t++){const i=e[t];i.parent&&i.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}i.setAttribute("position",new Br(n,3)),i.setAttribute("color",new Br(r,3)),super(i,new el({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,n=i.getAttribute("position");Id.getInverse(this.root.matrixWorld);for(let t=0,i=0;t<e.length;t++){const r=e[t];r.parent&&r.parent.isBone&&(Td.multiplyMatrices(Id,r.matrixWorld),Ed.setFromMatrixPosition(Td),n.setXYZ(i,Ed.x,Ed.y,Ed.z),Td.multiplyMatrices(Id,r.parent.matrixWorld),Ed.setFromMatrixPosition(Td),n.setXYZ(i+1,Ed.x,Ed.y,Ed.z),i+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class kd extends sa{constructor(t,e,i){super(new Rc(e,4,2),new wr({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Pd=new Ji,Bd=new _r,Ld=new _r;class Rd extends Jn{constructor(t,e,i){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;const n=new Mc(e);n.rotateY(.5*Math.PI),this.material=new wr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=n.getAttribute("position"),a=new Float32Array(3*r.count);n.setAttribute("color",new Mr(a,3)),this.add(new sa(n,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Bd.copy(this.light.color),Ld.copy(this.light.groundColor);for(let t=0,i=e.count;t<i;t++){const n=t<i/2?Bd:Ld;e.setXYZ(t,n.r,n.g,n.b)}e.needsUpdate=!0}t.lookAt(Pd.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Dd extends hl{constructor(t,e,i,n){t=t||10,e=e||10,i=new _r(void 0!==i?i:4473924),n=new _r(void 0!==n?n:8947848);const r=e/2,a=t/e,s=t/2,o=[],l=[];for(let t=0,c=0,h=-s;t<=e;t++,h+=a){o.push(-s,0,h,s,0,h),o.push(h,0,-s,h,0,s);const e=t===r?i:n;e.toArray(l,c),c+=3,e.toArray(l,c),c+=3,e.toArray(l,c),c+=3,e.toArray(l,c),c+=3}const c=new Ur;c.setAttribute("position",new Br(o,3)),c.setAttribute("color",new Br(l,3)),super(c,new el({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class Od extends hl{constructor(t,e,i,n,r,a){t=t||10,e=e||16,i=i||8,n=n||64,r=new _r(void 0!==r?r:4473924),a=new _r(void 0!==a?a:8947848);const s=[],o=[];for(let i=0;i<=e;i++){const n=i/e*(2*Math.PI),l=Math.sin(n)*t,c=Math.cos(n)*t;s.push(0,0,0),s.push(l,0,c);const h=1&i?r:a;o.push(h.r,h.g,h.b),o.push(h.r,h.g,h.b)}for(let e=0;e<=i;e++){const l=1&e?r:a,c=t-t/i*e;for(let t=0;t<n;t++){let e=t/n*(2*Math.PI),i=Math.sin(e)*c,r=Math.cos(e)*c;s.push(i,0,r),o.push(l.r,l.g,l.b),e=(t+1)/n*(2*Math.PI),i=Math.sin(e)*c,r=Math.cos(e)*c,s.push(i,0,r),o.push(l.r,l.g,l.b)}}const l=new Ur;l.setAttribute("position",new Br(s,3)),l.setAttribute("color",new Br(o,3)),super(l,new el({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Gd=new Ji,Fd=new Ji,Nd=new Ji;class zd extends Jn{constructor(t,e,i){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===e&&(e=1);let n=new Ur;n.setAttribute("position",new Br([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new el({fog:!1,toneMapped:!1});this.lightPlane=new ol(n,r),this.add(this.lightPlane),(n=new Ur).setAttribute("position",new Br([0,0,0,0,0,1],3)),this.targetLine=new ol(n,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Gd.setFromMatrixPosition(this.light.matrixWorld),Fd.setFromMatrixPosition(this.light.target.matrixWorld),Nd.subVectors(Fd,Gd),this.lightPlane.lookAt(Fd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Fd),this.targetLine.scale.z=Nd.length()}}const Hd=new Ji,Ud=new ga;class Vd extends hl{constructor(t){const e=new Ur,i=new el({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],r=[],a={},s=new _r(16755200),o=new _r(16711680),l=new _r(43775),c=new _r(16777215),h=new _r(3355443);function u(t,e,i){d(t,i),d(e,i)}function d(t,e){n.push(0,0,0),r.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(n.length/3-1)}u("n1","n2",s),u("n2","n4",s),u("n4","n3",s),u("n3","n1",s),u("f1","f2",s),u("f2","f4",s),u("f4","f3",s),u("f3","f1",s),u("n1","f1",s),u("n2","f2",s),u("n3","f3",s),u("n4","f4",s),u("p","n1",o),u("p","n2",o),u("p","n3",o),u("p","n4",o),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l),u("c","t",c),u("p","c",h),u("cn1","cn2",h),u("cn3","cn4",h),u("cf1","cf2",h),u("cf3","cf4",h),e.setAttribute("position",new Br(n,3)),e.setAttribute("color",new Br(r,3)),super(e,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}update(){const t=this.geometry,e=this.pointMap;Ud.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Wd("c",e,t,Ud,0,0,-1),Wd("t",e,t,Ud,0,0,1),Wd("n1",e,t,Ud,-1,-1,-1),Wd("n2",e,t,Ud,1,-1,-1),Wd("n3",e,t,Ud,-1,1,-1),Wd("n4",e,t,Ud,1,1,-1),Wd("f1",e,t,Ud,-1,-1,1),Wd("f2",e,t,Ud,1,-1,1),Wd("f3",e,t,Ud,-1,1,1),Wd("f4",e,t,Ud,1,1,1),Wd("u1",e,t,Ud,.7,1.1,-1),Wd("u2",e,t,Ud,-.7,1.1,-1),Wd("u3",e,t,Ud,0,2,-1),Wd("cf1",e,t,Ud,-1,0,1),Wd("cf2",e,t,Ud,1,0,1),Wd("cf3",e,t,Ud,0,-1,1),Wd("cf4",e,t,Ud,0,1,1),Wd("cn1",e,t,Ud,-1,0,-1),Wd("cn2",e,t,Ud,1,0,-1),Wd("cn3",e,t,Ud,0,-1,-1),Wd("cn4",e,t,Ud,0,1,-1),t.getAttribute("position").needsUpdate=!0}}function Wd(t,e,i,n,r,a,s){Hd.set(r,a,s).unproject(n);const o=e[t];if(void 0!==o){const t=i.getAttribute("position");for(let e=0,i=o.length;e<i;e++)t.setXYZ(o[e],Hd.x,Hd.y,Hd.z)}}const jd=new Ki;class Zd extends hl{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new Ur;r.setIndex(new Mr(i,1)),r.setAttribute("position",new Mr(n,3)),super(r,new el({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&jd.setFromObject(this.object),jd.isEmpty())return;const e=jd.min,i=jd.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=e.x,r[4]=i.y,r[5]=i.z,r[6]=e.x,r[7]=e.y,r[8]=i.z,r[9]=i.x,r[10]=e.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=e.z,r[15]=e.x,r[16]=i.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=i.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return hl.prototype.copy.call(this,t),this.object=t.object,this}}class Yd extends hl{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Ur;n.setIndex(new Mr(i,1)),n.setAttribute("position",new Br([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(n,new el({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class Xd extends ol{constructor(t,e,i){const n=void 0!==i?i:16776960,r=new Ur;r.setAttribute("position",new Br([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),super(r,new el({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;const a=new Ur;a.setAttribute("position",new Br([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new sa(a,new wr({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?m:p,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const Jd=new Ji;let qd,Qd;class Kd extends Jn{constructor(t,e,i,n,r,a){super(),this.type="ArrowHelper",void 0===t&&(t=new Ji(0,0,1)),void 0===e&&(e=new Ji(0,0,0)),void 0===i&&(i=1),void 0===n&&(n=16776960),void 0===r&&(r=.2*i),void 0===a&&(a=.2*r),void 0===qd&&((qd=new Ur).setAttribute("position",new Br([0,0,0,0,1,0],3)),(Qd=new Pl(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new ol(qd,new el({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new sa(Qd,new wr({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,r,a)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Jd.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Jd,e)}}setLength(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class $d extends hl{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=new Ur;i.setAttribute("position",new Br(e,3)),i.setAttribute("color",new Br([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(i,new el({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const tf=4,ef=8,nf=Math.pow(2,ef),rf=[.125,.215,.35,.446,.526,.582],af=ef-tf+1+rf.length,sf=20,of={[qe]:0,[Qe]:1,[$e]:2,[ei]:3,[ii]:4,[ni]:5,[Ke]:6},lf=new lu,{_lodPlanes:cf,_sizeLods:hf,_sigmas:uf}=function(){const t=[],e=[],i=[];let n=ef;for(let r=0;r<af;r++){const a=Math.pow(2,n);e.push(a);let s=1/a;r>ef-tf?s=rf[r-ef+tf-1]:0==r&&(s=0),i.push(s);const o=1/(a-1),l=-o/2,c=1+o/2,h=[l,l,c,l,c,c,l,l,c,c,l,c],u=6,d=6,f=3,p=2,m=1,g=new Float32Array(f*d*u),_=new Float32Array(p*d*u),y=new Float32Array(m*d*u);for(let t=0;t<u;t++){const e=t%3*2/3-1,i=t>2?0:-1,n=[e,i,0,e+2/3,i,0,e+2/3,i+1,0,e,i,0,e+2/3,i+1,0,e,i+1,0];g.set(n,f*d*t),_.set(h,p*d*t);const r=[t,t,t,t,t,t];y.set(r,m*d*t)}const b=new Ur;b.setAttribute("position",new Mr(g,f)),b.setAttribute("uv",new Mr(_,p)),b.setAttribute("faceIndex",new Mr(y,m)),t.push(b),n>tf&&n--}return{_lodPlanes:t,_sizeLods:e,_sigmas:i}}();let df=null;const ff=(1+Math.sqrt(5))/2,pf=1/ff,mf=[new Ji(1,1,1),new Ji(-1,1,1),new Ji(1,1,-1),new Ji(-1,1,-1),new Ji(0,ff,pf),new Ji(0,ff,-pf),new Ji(pf,0,ff),new Ji(-pf,0,ff),new Ji(ff,pf,0),new Ji(-ff,pf,0)];class gf{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),i=new Ji(0,1,0);return new Jc({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i},inputEncoding:{value:of[qe]},outputEncoding:{value:of[qe]}},vertexShader:wf(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${xf()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}(sf),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){df=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(t,i,n,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=vf(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=bf(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<cf.length;t++)cf[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(df),t.scissorTest=!1,yf(t,0,0,t.width,t.height)}_fromTexture(t){df=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:pt,minFilter:pt,generateMipmaps:!1,type:Mt,format:Ht,encoding:function(t){return void 0!==t&&t.type===Mt&&(t.encoding===qe||t.encoding===Qe||t.encoding===Ke)}(t)?t.encoding:$e,depthBuffer:!1},i=_f(e);return i.depthBuffer=!t,this._pingPongRenderTarget=_f(e),i}_compileMaterial(t){const e=new sa(cf[0],t);this._renderer.compile(e,lf)}_sceneToCubeUV(t,e,i,n){const r=new _a(90,1,e,i),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.outputEncoding,c=o.toneMapping,h=o.getClearColor(),u=o.getClearAlpha();o.toneMapping=K,o.outputEncoding=qe;let d=t.background;if(d&&d.isColor){d.convertSRGBToLinear();const e=Math.max(d.r,d.g,d.b),i=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);d=d.multiplyScalar(Math.pow(2,-i));const n=(i+128)/255;o.setClearColor(d,n),t.background=null}for(let e=0;e<6;e++){const i=e%3;0==i?(r.up.set(0,a[e],0),r.lookAt(s[e],0,0)):1==i?(r.up.set(0,0,a[e]),r.lookAt(0,s[e],0)):(r.up.set(0,a[e],0),r.lookAt(0,0,s[e])),yf(n,i*nf,e>2?nf:0,nf,nf),o.setRenderTarget(n),o.render(t,r)}o.toneMapping=c,o.outputEncoding=l,o.setClearColor(h,u)}_textureToCubeUV(t,e){const i=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=vf()):null==this._equirectShader&&(this._equirectShader=bf());const n=t.isCubeTexture?this._cubemapShader:this._equirectShader,r=new sa(cf[0],n),a=n.uniforms;a.envMap.value=t,t.isCubeTexture||a.texelSize.value.set(1/t.image.width,1/t.image.height),a.inputEncoding.value=of[t.encoding],a.outputEncoding.value=of[e.texture.encoding],yf(e,0,0,3*nf,2*nf),i.setRenderTarget(e),i.render(r,lf)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let e=1;e<af;e++){const i=Math.sqrt(uf[e]*uf[e]-uf[e-1]*uf[e-1]),n=mf[(e-1)%mf.length];this._blur(t,e-1,e,i,n)}e.autoClear=i}_blur(t,e,i,n,r){const a=this._pingPongRenderTarget;this._halfBlur(t,a,e,i,n,"latitudinal",r),this._halfBlur(a,t,i,i,n,"longitudinal",r)}_halfBlur(t,e,i,n,r,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new sa(cf[n],l),h=l.uniforms,u=hf[i]-1,d=isFinite(r)?Math.PI/(2*u):2*Math.PI/(2*sf-1),f=r/d,p=isFinite(r)?1+Math.floor(3*f):sf;p>sf&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${sf}`);const m=[];let g=0;for(let t=0;t<sf;++t){const e=t/f,i=Math.exp(-e*e/2);m.push(i),0==t?g+=i:t<p&&(g+=2*i)}for(let t=0;t<m.length;t++)m[t]=m[t]/g;h.envMap.value=t.texture,h.samples.value=p,h.weights.value=m,h.latitudinal.value="latitudinal"===a,s&&(h.poleAxis.value=s),h.dTheta.value=d,h.mipInt.value=ef-i,h.inputEncoding.value=of[t.texture.encoding],h.outputEncoding.value=of[t.texture.encoding];const _=hf[n];yf(e,3*Math.max(0,nf-2*_),(0===n?0:2*nf)+2*_*(n>ef-tf?n-ef+tf:0),3*_,2*_),o.setRenderTarget(e),o.render(c,lf)}}function _f(t){const e=new Zi(3*nf,3*nf,t);return e.texture.mapping=ct,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function yf(t,e,i,n,r){t.viewport.set(e,i,n,r),t.scissor.set(e,i,n,r)}function bf(){return new Jc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Ni(1,1)},inputEncoding:{value:of[qe]},outputEncoding:{value:of[qe]}},vertexShader:wf(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${xf()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}function vf(){return new Jc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:of[qe]},outputEncoding:{value:of[qe]}},vertexShader:wf(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${xf()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}function wf(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function xf(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Af(t,e,i,n,r,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new yr(t,e,i,r,a,s)}const Mf=0,Sf=1,Ef=0,Tf=1,If=2;function Cf(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function kf(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Pf(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new _l(t,e)}function Bf(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new zo(t)}function Lf(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new _l(t,e)}function Rf(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new dl(t)}function Df(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new dl(t)}function Of(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new dl(t)}function Gf(t,e,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Ji(t,e,i)}function Ff(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Mr(t,e).setUsage(Si)}function Nf(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Sr(t,e)}function zf(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Er(t,e)}function Hf(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Tr(t,e)}function Uf(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ir(t,e)}function Vf(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Cr(t,e)}function Wf(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new kr(t,e)}function jf(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Pr(t,e)}function Zf(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Br(t,e)}function Yf(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Lr(t,e)}function Xf(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),zh.call(this,t),this.type="catmullrom",this.closed=!0}function Jf(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),zh.call(this,t),this.type="catmullrom"}function qf(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),zh.call(this,t),this.type="catmullrom"}function Qf(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new $d(t)}function Kf(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Zd(t,e)}function $f(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new hl(new Ul(t.geometry),new el({color:void 0!==e?e:16777215}))}function tp(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new hl(new Zc(t.geometry),new el({color:void 0!==e?e:16777215}))}function ep(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Sh(t)}function ip(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new kh(t)}function np(t,e,i){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new xa(t,i)}Bh.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Bh.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Kh.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=new Tl;for(let i=0,n=t.length;i<n;i++){const n=t[i];e.vertices.push(new Ji(n.x,n.y,n.z||0))}return e}}),Object.assign($h.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Xf.prototype=Object.create(zh.prototype),Jf.prototype=Object.create(zh.prototype),qf.prototype=Object.create(zh.prototype),Object.assign(qf.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Dd.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Cd.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Ah.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),gu.extractUrlBase(t)}}),Ah.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(bd.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Ki.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(mn.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Ea.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},xd.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Fi,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Fi.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Fi.ceilPowerOfTwo(t)}}),Object.assign(zi.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Mn.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Ji).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,i,n,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,n,i,r,a)}}),$n.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Xi.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(An.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(hr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(hr,{barycoordFromPoint:function(t,e,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),hr.getBarycoord(t,e,i,n,r)},normal:function(t,e,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),hr.getNormal(t,e,i,n)}}),Object.assign(tu.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new bc(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Lc(this,t)}}),Object.assign(Ni.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ji.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ji.prototype,{fromAttribute:function(t,e,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Tl.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(Jn.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Jn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(sa.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(sa.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Ye},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Wo.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Xo.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),jo.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Bh.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),_a.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(eu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Mr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Si},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Si)}}}),Object.assign(Mr.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Si:Mi),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Ur.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Mr(arguments[1],arguments[2])))},addDrawCall:function(t,e,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Ur.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(_u.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(fd.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(Ao.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Si},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Ao.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Si:Mi),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(_c.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.assign(xo.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(hd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(vr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _r}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===_}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(Kc.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Qc.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(ma.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(yo.prototype,{clearTarget:function(t,e,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,i,n)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(yo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?Qe:qe}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(co.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Zi.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Wu.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Bu).load(t,function(t){e.setBuffer(t)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),qu.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},va.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},va.prototype.clear=function(t,e,i,n){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,i,n)};const rp={merge:function(t,e,i){let n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,i)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function ap(){console.error("THREE.CanvasRenderer has been removed")}function sp(){console.error("THREE.JSONLoader has been removed.")}Ui.crossOrigin=void 0,Ui.loadTexture=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Ph;r.setCrossOrigin(this.crossOrigin);const a=r.load(t,i,void 0,n);return e&&(a.mapping=e),a},Ui.loadTextureCube=function(t,e,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Ch;r.setCrossOrigin(this.crossOrigin);const a=r.load(t,i,void 0,n);return e&&(a.mapping=e),a},Ui.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ui.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const op={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function lp(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}}))},function(t,e,i){"use strict";i.d(e,"b",function(){return s});var n=i(4),r=i(8),a=i(2);const s=(t=a)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){super(e,i,n),this._widgetType="Handle",!0===n.hideHandleMesh&&(this.visible=!1),this._plane={position:new t.Vector3,direction:new t.Vector3},this._offset=new t.Vector3,this._raycaster=new t.Raycaster,this._active=!1,this._hovered=!1,this._tracking=!1,this._mouse=new t.Vector2,this._initialized=!1,this._material=null,this._geometry=null,this._mesh=null,this._meshHovered=!1,this._dom=null,this._domHovered=!1,this._screenPosition=this.worldToScreen(this._worldPosition),this.create(),this.initOffsets(),this.onResize=this.onResize.bind(this),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.addEventListeners()}addEventListeners(){window.addEventListener("resize",this.onResize),this._dom.addEventListener("mouseenter",this.onHover),this._dom.addEventListener("mouseleave",this.onHover),this._container.addEventListener("wheel",this.onMove)}removeEventListeners(){window.removeEventListener("resize",this.onResize),this._dom.removeEventListener("mouseenter",this.onHover),this._dom.removeEventListener("mouseleave",this.onHover),this._container.removeEventListener("wheel",this.onMove)}onResize(){this.initOffsets()}onHover(t){t&&this.hoverDom(t),this.hoverMesh(),this._hovered=this._meshHovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverMesh(){let t=this._raycaster.intersectObject(this._mesh);this._meshHovered=t.length>0}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){const e=this.getMouseOffsets(t,this._container);if(this._mouse.set(e.x,e.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._hovered){if(this._active=!0,this._controls.enabled=!1,this._targetMesh){let t=this._raycaster.intersectObject(this._targetMesh);t.length>0&&this._offset.copy(t[0].point).sub(this._worldPosition)}else{this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection());let t=r.a.rayPlane(this._raycaster.ray,this._plane);null!==t&&this._offset.copy(t).sub(this._plane.position)}this.update()}}onMove(t,e){const i=this.getMouseOffsets(t,this._container);if(this._mouse.set(i.x,i.y),this._raycaster.setFromCamera(this._mouse,this._camera),this._raycaster.ray.position=this._raycaster.ray.origin,this._active||e)if(this._dragged=!0,null!==this._targetMesh){let t=this._raycaster.intersectObject(this._targetMesh);t.length>0&&this._worldPosition.copy(t[0].point.sub(this._offset))}else{0===this._plane.direction.length()&&(this._plane.position.copy(this._worldPosition),this._plane.direction.copy(this._camera.getWorldDirection()));let t=r.a.rayPlane(this._raycaster.ray,this._plane);null!==t&&this._worldPosition.copy(t.sub(this._offset))}else this.onHover(null);this.update()}onEnd(){!0!==this._tracking&&(!this._dragged&&this._active&&this._initialized&&(this._selected=!this._selected),this._initialized=!0,this._active=!1,this._dragged=!1,this._controls.enabled=!0,this.update())}create(){this.createMesh(),this.createDOM()}createMesh(){this._geometry=new t.SphereGeometry(1,16,16),this._material=new t.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:2}),this.updateMeshColor(),this._mesh=new t.Mesh(this._geometry,this._material),this._mesh.position.copy(this._worldPosition),this._mesh.visible=!0,this.add(this._mesh)}createDOM(){this._dom=document.createElement("div"),this._dom.className="widgets-handle",this._dom.style.transform=`translate3D(\n      ${this._screenPosition.x}px,\n      ${this._screenPosition.y-this._container.offsetHeight}px, 0)`,this.updateDOMColor(),this._container.appendChild(this._dom)}update(){this.updateColor(),this._screenPosition=this.worldToScreen(this._worldPosition),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMColor(),this.updateDOMPosition()}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){this._mesh&&this._mesh.position.copy(this._worldPosition)}updateDOMPosition(){this._dom&&(this._dom.style.transform=`translate3D(${this._screenPosition.x}px,\n        ${this._screenPosition.y-this._container.offsetHeight}px, 0)`)}updateDOMColor(){this._dom.style.borderColor=this._color}showMesh(){!0!==this._params.hideMesh&&!0!==this._params.hideHandleMesh&&(this.visible=!0)}free(){this.removeEventListeners(),this._container.removeChild(this._dom),this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,super.free()}hideDOM(){this._dom.style.display="none"}showDOM(){this._dom.style.display=""}get screenPosition(){return this._screenPosition}set screenPosition(t){this._screenPosition=t}get active(){return this._active}set active(t){this._active=t,this._controls.enabled=!this._active,this.update()}get tracking(){return this._tracking}set tracking(t){this._tracking=t,this.update()}}};e.a=s()},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=r(i(64)),s=i(15),o=r(i(1)),l=function(t){return void 0===t&&(t=window.THREE),void 0===t||void 0===t.Object3D?null:function(e){function i(i,n,r){var o=e.call(this)||this;if(o._widgetType="Base",o._params=r,!0===r.hideMesh&&(o.visible=!1),null===document.getElementById("ami-widgets")){var l=document.createElement("style");l.id="ami-widgets",l.innerHTML=a.default.code,document.head.appendChild(l)}return o._enabled=!0,o._selected=!1,o._hovered=!0,o._active=!0,o._colors={default:s.COLORS.blue,active:s.COLORS.yellow,hover:s.COLORS.red,select:s.COLORS.green,text:s.COLORS.white,error:s.COLORS.lightRed},o._color=o._colors.default,o._dragged=!1,o._displayed=!0,o._targetMesh=i,o._controls=n,o._camera=n.object,o._container=n.domElement,o._worldPosition=new t.Vector3,r.worldPosition?o._worldPosition.copy(r.worldPosition):null!==o._targetMesh&&o._worldPosition.copy(o._targetMesh.position),o}return n(i,e),i.prototype.initOffsets=function(){var t=this._container.getBoundingClientRect(),e=document.body,i=document.documentElement,n=window.pageYOffset||i.scrollTop||e.scrollTop,r=window.pageXOffset||i.scrollLeft||e.scrollLeft,a=i.clientTop||e.clientTop||0,s=i.clientLeft||e.clientLeft||0;this._offsets={top:Math.round(t.top+n-a),left:Math.round(t.left+r-s)}},i.prototype.getMouseOffsets=function(t,e){return{x:(t.clientX-this._offsets.left)/e.offsetWidth*2-1,y:-(t.clientY-this._offsets.top)/e.offsetHeight*2+1,screenX:t.clientX-this._offsets.left,screenY:t.clientY-this._offsets.top}},i.prototype.getArea=function(t){for(var e=0,i=t.length-1,n=0;n<t.length;n++)e+=(t[i].x+t[n].x)*(t[i].y-t[n].y),i=n;return Math.abs(e/2)},i.prototype.getRegionByXY=function(t,e){var i=null;return t.some(function(t,n){if(e.x>=t.x0&&e.x<=t.x1&&e.y>=t.y0&&e.y<=t.y1)return i=n,!0}),i},i.prototype.getPointInRegion=function(e,i){return e?new t.Vector2((i.x-e.x0-(e.axisX||0))*e.deltaX,(i.y-e.y0-(e.axisY||0))*e.deltaY):null},i.prototype.getUsPoint=function(t,e){return this.getPointInRegion(t[this.getRegionByXY(t,e)],e)},i.prototype.getUsDistance=function(t,e){var i=this._params.ultrasoundRegions||[];if(i.length<1)return null;var n=this.getRegionByXY(i,t),r=this.getRegionByXY(i,e);return null===n||null===r||n!==r||"cm"!==i[n].unitsX||"cm"!==i[n].unitsY?null:this.getPointInRegion(i[n],t).distanceTo(this.getPointInRegion(i[n],e))},i.prototype.getDistanceData=function(t,e,i){var n=null,r=null;if(i)n=t.distanceTo(e)*i;else if(this._params.ultrasoundRegions&&this._params.lps2IJK){var a=this.getUsDistance(o.default.worldToData(this._params.lps2IJK,t),o.default.worldToData(this._params.lps2IJK,e));null!==a?(n=10*a,r="mm"):(n=t.distanceTo(e),r=this._params.pixelSpacing?"mm":"units")}else n=t.distanceTo(e);return{distance:n,units:r}},i.prototype.getLineData=function(e,i){var n=i.clone().sub(e),r=i.clone().add(e).multiplyScalar(.5),a=n.length(),s=n.angleTo(new t.Vector3(1,0,0));return{line:n,length:a,transformX:r.x-a/2,transformY:r.y-this._container.offsetHeight,transformAngle:e.y<i.y?s:-s,center:r}},i.prototype.getRectData=function(e,i){var n=i.clone().sub(e),r=n.clone().projectOnVector(new t.Vector3(0,1,0)),a=e.clone().min(i);return{width:n.clone().projectOnVector(new t.Vector3(1,0,0)).length(),height:r.length(),transformX:a.x,transformY:a.y-this._container.offsetHeight,paddingVector:r.clone().normalize()}},i.prototype.adjustLabelTransform=function(e,i,n){var r=Math.round(i.x-(n?0:e.offsetWidth/2)),a=Math.round(i.y-(n?0:e.offsetHeight/2))-this._container.offsetHeight;return r<0?r=r>-e.offsetWidth?0:r+e.offsetWidth:r>this._container.offsetWidth-e.offsetWidth&&(r=r<this._container.offsetWidth?this._container.offsetWidth-e.offsetWidth:r-e.offsetWidth),a<-this._container.offsetHeight?a=a>-this._container.offsetHeight-e.offsetHeight?-this._container.offsetHeight:a+e.offsetHeight:a>-e.offsetHeight&&(a=a<0?-e.offsetHeight:a-e.offsetHeight),new t.Vector2(r,a)},i.prototype.worldToScreen=function(t){var e=t.clone();return e.project(this._camera),e.x=Math.round((e.x+1)*this._container.offsetWidth/2),e.y=Math.round((1-e.y)*this._container.offsetHeight/2),e.z=0,e},i.prototype.update=function(){window.console.log("update() should be overloaded!")},i.prototype.updateColor=function(){this._active?this._color=this._colors.active:this._hovered?this._color=this._colors.hover:this._selected?this._color=this._colors.select:this._color=this._colors.default},i.prototype.setDefaultColor=function(t){this._colors.default=t,this._handles&&this._handles.forEach(function(e){return e._colors.default=t}),this.update()},i.prototype.show=function(){this.showDOM(),this.showMesh(),this.update(),this._displayed=!0},i.prototype.hide=function(){this.hideDOM(),this.hideMesh(),this._displayed=!1},i.prototype.hideDOM=function(){window.console.log("hideDOM() should be overloaded!")},i.prototype.showDOM=function(){window.console.log("showDOM() should be overloaded!")},i.prototype.hideMesh=function(){this.visible=!1},i.prototype.showMesh=function(){!0!==this._params.hideMesh&&(this.visible=!0)},i.prototype.free=function(){this._camera=null,this._container=null,this._controls=null,this._params=null,this._targetMesh=null},Object.defineProperty(i.prototype,"widgetType",{get:function(){return this._widgetType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"targetMesh",{get:function(){return this._targetMesh},set:function(t){this._targetMesh=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"worldPosition",{get:function(){return this._worldPosition},set:function(t){this._worldPosition.copy(t),this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hovered",{get:function(){return this._hovered},set:function(t){this._hovered=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dragged",{get:function(){return this._dragged},set:function(t){this._dragged=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"displayed",{get:function(){return this._displayed},set:function(t){this._displayed=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.update()},enumerable:!0,configurable:!0}),i}(t.Object3D)};e.widgetsBase=l,e.default=l()},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{static matrix4(t){return!(null===t||void 0===t||!t.hasOwnProperty("elements")||16!==t.elements.length||"function"!=typeof t.identity||"function"!=typeof t.copy||"function"!=typeof t.determinant)}static vector3(t){return!(!(null!==t&&void 0!==t&&t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&t.hasOwnProperty("z"))||t.hasOwnProperty("w"))}static box(t){return!!(null!==t&&void 0!==t&&t.hasOwnProperty("center")&&this.vector3(t.center)&&t.hasOwnProperty("halfDimensions")&&this.vector3(t.halfDimensions)&&t.halfDimensions.x>=0&&t.halfDimensions.y>=0&&t.halfDimensions.z>=0)}static ray(t){return!!(null!==t&&void 0!==t&&t.hasOwnProperty("position")&&this.vector3(t.position)&&t.hasOwnProperty("direction")&&this.vector3(t.direction))}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(0);class r{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,n,r,a,s,o,l,c,h,u,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new r).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,n=1/a.setFromMatrixColumn(t,0).length(),r=1/a.setFromMatrixColumn(t,1).length(),s=1/a.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,i=t.x,n=t.y,r=t.z,a=Math.cos(i),s=Math.sin(i),o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){const t=a*c,i=a*h,n=s*c,r=s*h;e[0]=o*c,e[4]=-o*h,e[8]=l,e[1]=i+n*l,e[5]=t-r*l,e[9]=-s*o,e[2]=r-t*l,e[6]=n+i*l,e[10]=a*o}else if("YXZ"===t.order){const t=o*c,i=o*h,n=l*c,r=l*h;e[0]=t+r*s,e[4]=n*s-i,e[8]=a*l,e[1]=a*h,e[5]=a*c,e[9]=-s,e[2]=i*s-n,e[6]=r+t*s,e[10]=a*o}else if("ZXY"===t.order){const t=o*c,i=o*h,n=l*c,r=l*h;e[0]=t-r*s,e[4]=-a*h,e[8]=n+i*s,e[1]=i+n*s,e[5]=a*c,e[9]=r-t*s,e[2]=-a*l,e[6]=s,e[10]=a*o}else if("ZYX"===t.order){const t=a*c,i=a*h,n=s*c,r=s*h;e[0]=o*c,e[4]=n*l-i,e[8]=t*l+r,e[1]=o*h,e[5]=r*l+t,e[9]=i*l-n,e[2]=-l,e[6]=s*o,e[10]=a*o}else if("YZX"===t.order){const t=a*o,i=a*l,n=s*o,r=s*l;e[0]=o*c,e[4]=r-t*h,e[8]=n*h+i,e[1]=h,e[5]=a*c,e[9]=-s*c,e[2]=-l*c,e[6]=i*h+n,e[10]=t-r*h}else if("XZY"===t.order){const t=a*o,i=a*l,n=s*o,r=s*l;e[0]=o*c,e[4]=-h,e[8]=l*c,e[1]=t*h+r,e[5]=a*c,e[9]=i*h-n,e[2]=n*h-i,e[6]=s*c,e[10]=r*h+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(o,t,l)}lookAt(t,e,i){const n=this.elements;return u.subVectors(t,e),0===u.lengthSq()&&(u.z=1),u.normalize(),c.crossVectors(i,u),0===c.lengthSq()&&(1===Math.abs(i.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),c.crossVectors(i,u)),c.normalize(),h.crossVectors(u,c),n[0]=c.x,n[4]=h.x,n[8]=u.x,n[1]=c.y,n[5]=h.y,n[9]=u.y,n[2]=c.z,n[6]=h.z,n[10]=u.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,a=i[0],s=i[4],o=i[8],l=i[12],c=i[1],h=i[5],u=i[9],d=i[13],f=i[2],p=i[6],m=i[10],g=i[14],_=i[3],y=i[7],b=i[11],v=i[15],w=n[0],x=n[4],A=n[8],M=n[12],S=n[1],E=n[5],T=n[9],I=n[13],C=n[2],k=n[6],P=n[10],B=n[14],L=n[3],R=n[7],D=n[11],O=n[15];return r[0]=a*w+s*S+o*C+l*L,r[4]=a*x+s*E+o*k+l*R,r[8]=a*A+s*T+o*P+l*D,r[12]=a*M+s*I+o*B+l*O,r[1]=c*w+h*S+u*C+d*L,r[5]=c*x+h*E+u*k+d*R,r[9]=c*A+h*T+u*P+d*D,r[13]=c*M+h*I+u*B+d*O,r[2]=f*w+p*S+m*C+g*L,r[6]=f*x+p*E+m*k+g*R,r[10]=f*A+p*T+m*P+g*D,r[14]=f*M+p*I+m*B+g*O,r[3]=_*w+y*S+b*C+v*L,r[7]=_*x+y*E+b*k+v*R,r[11]=_*A+y*T+b*P+v*D,r[15]=_*M+y*I+b*B+v*O,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],a=t[1],s=t[5],o=t[9],l=t[13],c=t[2],h=t[6],u=t[10],d=t[14];return t[3]*(+r*o*h-n*l*h-r*s*u+i*l*u+n*s*d-i*o*d)+t[7]*(+e*o*d-e*l*u+r*a*u-n*a*d+n*l*c-r*o*c)+t[11]*(+e*l*h-e*s*d-r*a*h+i*a*d+r*s*c-i*l*c)+t[15]*(-n*s*c-e*o*h+e*s*u+n*a*h-i*a*u+i*o*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const i=this.elements,n=t.elements,r=n[0],a=n[1],s=n[2],o=n[3],l=n[4],c=n[5],h=n[6],u=n[7],d=n[8],f=n[9],p=n[10],m=n[11],g=n[12],_=n[13],y=n[14],b=n[15],v=f*y*u-_*p*u+_*h*m-c*y*m-f*h*b+c*p*b,w=g*p*u-d*y*u-g*h*m+l*y*m+d*h*b-l*p*b,x=d*_*u-g*f*u+g*c*m-l*_*m-d*c*b+l*f*b,A=g*f*h-d*_*h-g*c*p+l*_*p+d*c*y-l*f*y,M=r*v+a*w+s*x+o*A;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/M;return i[0]=v*S,i[1]=(_*p*o-f*y*o-_*s*m+a*y*m+f*s*b-a*p*b)*S,i[2]=(c*y*o-_*h*o+_*s*u-a*y*u-c*s*b+a*h*b)*S,i[3]=(f*h*o-c*p*o-f*s*u+a*p*u+c*s*m-a*h*m)*S,i[4]=w*S,i[5]=(d*y*o-g*p*o+g*s*m-r*y*m-d*s*b+r*p*b)*S,i[6]=(g*h*o-l*y*o-g*s*u+r*y*u+l*s*b-r*h*b)*S,i[7]=(l*p*o-d*h*o+d*s*u-r*p*u-l*s*m+r*h*m)*S,i[8]=x*S,i[9]=(g*f*o-d*_*o-g*a*m+r*_*m+d*a*b-r*f*b)*S,i[10]=(l*_*o-g*c*o+g*a*u-r*_*u-l*a*b+r*c*b)*S,i[11]=(d*c*o-l*f*o-d*a*u+r*f*u+l*a*m-r*c*m)*S,i[12]=A*S,i[13]=(d*_*s-g*f*s+g*a*p-r*_*p-d*a*y+r*f*y)*S,i[14]=(g*c*s-l*_*s-g*a*h+r*_*h+l*a*y-r*c*y)*S,i[15]=(l*f*s-d*c*s+d*a*h-r*f*h-l*a*p+r*c*p)*S,this}scale(t){const e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),n=Math.sin(e),r=1-i,a=t.x,s=t.y,o=t.z,l=r*a,c=r*s;return this.set(l*a+i,l*s-n*o,l*o+n*s,0,l*s+n*o,c*s+i,c*o-n*a,0,l*o-n*s,c*o+n*a,r*o*o+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this}compose(t,e,i){const n=this.elements,r=e._x,a=e._y,s=e._z,o=e._w,l=r+r,c=a+a,h=s+s,u=r*l,d=r*c,f=r*h,p=a*c,m=a*h,g=s*h,_=o*l,y=o*c,b=o*h,v=i.x,w=i.y,x=i.z;return n[0]=(1-(p+g))*v,n[1]=(d+b)*v,n[2]=(f-y)*v,n[3]=0,n[4]=(d-b)*w,n[5]=(1-(u+g))*w,n[6]=(m+_)*w,n[7]=0,n[8]=(f+y)*x,n[9]=(m-_)*x,n[10]=(1-(u+p))*x,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){const n=this.elements;let r=a.set(n[0],n[1],n[2]).length();const o=a.set(n[4],n[5],n[6]).length(),l=a.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],s.copy(this);const c=1/r,h=1/o,u=1/l;return s.elements[0]*=c,s.elements[1]*=c,s.elements[2]*=c,s.elements[4]*=h,s.elements[5]*=h,s.elements[6]*=h,s.elements[8]*=u,s.elements[9]*=u,s.elements[10]*=u,e.setFromRotationMatrix(s),i.x=r,i.y=o,i.z=l,this}makePerspective(t,e,i,n,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,o=2*r/(e-t),l=2*r/(i-n),c=(e+t)/(e-t),h=(i+n)/(i-n),u=-(a+r)/(a-r),d=-2*a*r/(a-r);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,i,n,r,a){const s=this.elements,o=1/(e-t),l=1/(i-n),c=1/(a-r),h=(e+t)*o,u=(i+n)*l,d=(a+r)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-u,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const a=new n.a,s=new r,o=new n.a(0,0,0),l=new n.a(1,1,1),c=new n.a,h=new n.a,u=new n.a},function(t,e,i){"use strict";var n=i(9),r=i(109),a=i(108);e.a=new class extends n.a{constructor(){super(),this.name="interpolationIdentity",this._currentVoxel="currentVoxel",this._dataValue="dataValue"}api(t=this._base,e=this._currentVoxel,i=this._dataValue){return this._base=t,this.compute(e,i)}compute(t,e){return this.computeDefinition(),this._base._functions[this._name]=this._definition,`${this._name}(${t}, ${e});`}computeDefinition(){this._definition=`\nvoid ${this._name}(in vec3 currentVoxel, out vec4 dataValue){\n  // lower bound\n  vec3 rcurrentVoxel = vec3(floor(currentVoxel.x + 0.5 ), floor(currentVoxel.y + 0.5 ), floor(currentVoxel.z + 0.5 ));\n  ivec3 voxel = ivec3(int(rcurrentVoxel.x), int(rcurrentVoxel.y), int(rcurrentVoxel.z));\n\n  vec4 tmp = vec4(0., 0., 0., 0.);\n  int offset = 0;\n\n  ${a.a.api(this._base,"voxel","tmp","offset")}\n  ${r.a.api(this._base,"tmp","offset","dataValue")}\n}\n    `}}},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i(1),r=i(5),a=i(6),s=i(0);class o{static aabbPlane(t,e){let i=[];if(!this.validateAabb(t)||!this.validatePlane(e))return window.console.log("Invalid aabb or plane provided."),!1;let r=new a.a;r.getInverse(t.toAABB);let o=e.direction.clone().applyMatrix4(t.toAABB),l=new s.a(0,0,0).applyMatrix4(t.toAABB),c=this.posdir(e.position.clone().applyMatrix4(t.toAABB),new s.a(o.x-l.x,o.y-l.y,o.z-l.z).normalize()),h=n.default.bbox(t.center,t.halfDimensions),u=new s.a(new s.a(1,0,0),new s.a(0,1,0),new s.a(0,0,1)),d=this.posdir(new s.a(t.center.x-t.halfDimensions.x,t.center.y-t.halfDimensions.y,t.center.z-t.halfDimensions.z),u.x);this.rayPlaneInBBox(d,c,h,i),d.direction=u.y,this.rayPlaneInBBox(d,c,h,i),d.direction=u.z,this.rayPlaneInBBox(d,c,h,i);let f=this.posdir(new s.a(t.center.x+t.halfDimensions.x,t.center.y+t.halfDimensions.y,t.center.z+t.halfDimensions.z),u.x);this.rayPlaneInBBox(f,c,h,i),f.direction=u.y,this.rayPlaneInBBox(f,c,h,i),f.direction=u.z,this.rayPlaneInBBox(f,c,h,i);let p=this.posdir(new s.a(t.center.x+t.halfDimensions.x,t.center.y-t.halfDimensions.y,t.center.z-t.halfDimensions.z),u.y);this.rayPlaneInBBox(p,c,h,i),p.direction=u.z,this.rayPlaneInBBox(p,c,h,i);let m=this.posdir(new s.a(t.center.x-t.halfDimensions.x,t.center.y+t.halfDimensions.y,t.center.z-t.halfDimensions.z),u.x);this.rayPlaneInBBox(m,c,h,i),m.direction=u.z,this.rayPlaneInBBox(m,c,h,i);let g=this.posdir(new s.a(t.center.x-t.halfDimensions.x,t.center.y-t.halfDimensions.y,t.center.z+t.halfDimensions.z),u.x);return this.rayPlaneInBBox(g,c,h,i),g.direction=u.y,this.rayPlaneInBBox(g,c,h,i),i.map(function(t){return t.applyMatrix4(r)}),i}static rayPlane(t,e){if(0!==t.direction.dot(e.direction)){let i=(e.direction.x*(e.position.x-t.position.x)+e.direction.y*(e.position.y-t.position.y)+e.direction.z*(e.position.z-t.position.z))/(e.direction.x*t.direction.x+e.direction.y*t.direction.y+e.direction.z*t.direction.z);return new s.a(t.position.x+i*t.direction.x,t.position.y+i*t.direction.y,t.position.z+i*t.direction.z)}return null}static rayBox(t,e){let i=[],r=n.default.bbox(e.center,e.halfDimensions),a=this.posdir(new s.a(r.min.x,e.center.y,e.center.z),new s.a(-1,0,0));return this.rayPlaneInBBox(t,a,r,i),a=this.posdir(new s.a(r.max.x,e.center.y,e.center.z),new s.a(1,0,0)),this.rayPlaneInBBox(t,a,r,i),a=this.posdir(new s.a(e.center.x,r.min.y,e.center.z),new s.a(0,-1,0)),this.rayPlaneInBBox(t,a,r,i),a=this.posdir(new s.a(e.center.x,r.max.y,e.center.z),new s.a(0,1,0)),this.rayPlaneInBBox(t,a,r,i),a=this.posdir(new s.a(e.center.x,e.center.y,r.min.z),new s.a(0,0,-1)),this.rayPlaneInBBox(t,a,r,i),a=this.posdir(new s.a(e.center.x,e.center.y,r.max.z),new s.a(0,0,1)),this.rayPlaneInBBox(t,a,r,i),i}static rayPlaneInBBox(t,e,i,n){let r=this.rayPlane(t,e);r&&this.inBBox(r,i)&&(n.find(this.findIntersection(r))||n.push(r))}static findIntersection(t){return function(e,i,n){return t.x===e.x&&t.y===e.y&&t.z===e.z}}static inBBox(t,e){return!!(t&&t.x>=e.min.x-1e-4&&t.y>=e.min.y-1e-4&&t.z>=e.min.z-1e-4&&t.x<=e.max.x+1e-4&&t.y<=e.max.y+1e-4&&t.z<=e.max.z+1e-4)}static posdir(t,e){return{position:t,direction:e}}static validatePlane(t){return null===t?(window.console.log("Invalid plane."),window.console.log(t),!1):r.a.vector3(t.position)?!!r.a.vector3(t.direction)||(window.console.log("Invalid plane.direction."),window.console.log(t.direction),!1):(window.console.log("Invalid plane.position."),window.console.log(t.position),!1)}static validateAabb(t){return null===t?(window.console.log("Invalid aabb."),window.console.log(t),!1):r.a.matrix4(t.toAABB)?r.a.vector3(t.center)?!!(r.a.vector3(t.halfDimensions)&&t.halfDimensions.x>=0&&t.halfDimensions.y>=0&&t.halfDimensions.z>=0)||(window.console.log("Invalid aabb.halfDimensions."),window.console.log(t.halfDimensions),!1):(window.console.log("Invalid aabb.center."),window.console.log(t.center),!1):(window.console.log("Invalid aabb.toAABB: "),window.console.log(t.toAABB),!1)}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{constructor(){this._name="shadersBase",this._base={_functions:{},_uniforms:{}},this._definition=""}get name(){return this._name}set name(t){this._name=t}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{constructor(){this._rightHanded=!0}pixelRepresentation(){return 0}pixelPaddingValue(t=0){return null}modality(){return"unknown"}segmentationType(){return"unknown"}segmentationSegments(){return[]}referencedSegmentNumber(t){return-1}rightHanded(){return this._rightHanded}spacingBetweenSlices(){return null}numberOfChannels(){return 1}sliceThickness(){return null}dimensionIndexValues(t=0){return null}instanceNumber(t=0){return t}windowCenter(t=0){return null}windowWidth(t=0){return null}rescaleSlope(t=0){return 1}rescaleIntercept(t=0){return 0}ultrasoundRegions(t=0){return[]}frameTime(t=0){return null}_decompressUncompressed(){}_swap16(t){return(255&t)<<8|t>>8&255}_swap32(t){return(255&t)<<24|(65280&t)<<8|t>>8&65280|t>>24&255}invert(){return!1}transferSyntaxUID(){return"no value provided"}studyDate(){return"no value provided"}studyDescription(){return"no value provided"}seriesDate(){return"no value provided"}seriesDescription(){return"no value provided"}rawHeader(){return"no value provided"}patientID(){return"no value provided"}patientName(){return"no value provided"}patientAge(){return"no value provided"}patientBirthdate(){return"no value provided"}patientSex(){return"no value provided"}minMaxPixelData(t=[]){let e=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],i=t.length;for(let n=0;n<i;n++){let i=t[n];e[0]=Math.min(e[0],i),e[1]=Math.max(e[1],i)}return e}}},function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var a=0;a<n;a++)t[r+a]=e[i+a]},flattenChunks:function(t){var e,i,n,r,a,s;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)a=t[e],s.set(a,r),r+=a.length;return s}},a={arraySet:function(t,e,i,n,r){for(var a=0;a<n;a++)t[r+a]=e[i+a]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(n)},function(t,e,i){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.DataStream=n.lossless.DataStream||function(t,e,i){this.buffer=new DataView(t,e,i),this.index=0},n.lossless.DataStream.prototype.get16=function(){var t=this.buffer.getUint16(this.index,!1);return this.index+=2,t},n.lossless.DataStream.prototype.get8=function(){var t=this.buffer.getUint8(this.index);return this.index+=1,t},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.DataStream)},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{constructor(){this._id=-1}mergeModels(t,e){if(!this._validateModelArray(t)||!this._validateModelArray(e))return window.console.log("invalid inputs provided."),!1;for(let i=0,n=e.length;i<n;i++)for(let n=0,r=t.length;n<r&&!t[n].merge(e[i]);n++)n===t.length-1&&t.push(e[i]);return!0}merge(t){return!!this.validate(t)&&this._id===t._id}validate(t){return!(!t||null===t||"function"!=typeof t.merge)}_validateModelArray(t){if(null===t||Array!==t.constructor)return window.console.log("invalid model array provided."),!1;for(let e=0;e<t.length;e++)if(!t[e]||null===t[e]||"function"!=typeof t[e].validate||!t[e].validate(t[e]))return!1;return!0}}},function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return r});const n=1022,r=1023},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.blue="#00B0FF",t.yellow="#FFEB3B",t.red="#F50057",t.green="#76FF03",t.white="#FFF",t.lightRed="#F77"}(e.COLORS||(e.COLORS={}));var n=function(){function t(){}return t.cielab2XYZ=function(t,e,i){var n=(t+16)/116,r=e/500+n,a=n-i/200;return n=Math.pow(n,3)>.008856?Math.pow(n,3):(n-16/116)/7.787,[95.047*(r=Math.pow(r,3)>.008856?Math.pow(r,3):(r-16/116)/7.787),100*n,108.883*(a=Math.pow(a,3)>.008856?Math.pow(a,3):(a-16/116)/7.787)]},t.xyz2RGB=function(t,e,i){var n=3.2406*(t/=100)+-1.5372*(e/=100)+-.4986*(i/=100),r=-.9689*t+1.8758*e+.0415*i,a=.0557*t+-.204*e+1.057*i;return n>.0031308?n=1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r>.0031308?r=1.055*Math.pow(r,1/2.4)-.055:r*=12.92,a>.0031308?a=1.055*Math.pow(a,1/2.4)-.055:a*=12.92,[n*=255,r*=255,a*=255]},t.cielab2RGB=function(t,e,i){if(void 0===t&&(t=50),void 0===e&&(e=0),void 0===i&&(i=0),!(t>=0&&t<=100))return null;var n=this.cielab2XYZ(t,e,i),r=n[0],a=n[1],s=n[2];return this.xyz2RGB(r,a,s)},t}();e.default=n},function(t,e,i){"use strict";i.d(e,"b",function(){return s});var n=i(8),r=i(1),a=i(2);const s=(t=a)=>{if(void 0===t||void 0===t.ShapeBufferGeometry)return null;const e=t.ShapeBufferGeometry;return class extends e{constructor(e,i,a,s,o=new t.Matrix4){let l={halfDimensions:e,center:i,toAABB:o},c={position:a,direction:s},h=n.a.aabbPlane(l,c);if(h.length<3){throw window.console.log("WARNING: Less than 3 intersections between AABB and Plane."),window.console.log("AABB"),window.console.log(l),window.console.log("Plane"),window.console.log(c),window.console.log("exiting..."),new Error("geometries.slice has less than 3 intersections, can not create a valid geometry.")}let u=r.default.orderIntersections(h,s),d=new t.Shape;d.moveTo(u[0].xy.x,u[0].xy.y);const f=new Float32Array(3*u.length);f.set(u[0].toArray(),0);for(let t=1;t<u.length;t++)f.set(u[t].toArray(),3*t),d.lineTo(u[t].xy.x,u[t].xy.y);d.lineTo(u[0].xy.x,u[0].xy.y),super(d),this.type="SliceBufferGeometry",this.setAttribute("position",new t.Float32BufferAttribute(f,3)),this.vertices=u}}};e.a=s()},function(t,e,i){"use strict";i.d(e,"b",function(){return r});var n=i(2);const r=(t=n)=>{if(void 0===t||void 0===t.Object3D)return null;const e=t.Object3D;return class extends e{constructor(t){super(),this._helpersSlice=t,this._visible=!0,this._color=16711680,this._material=null,this._geometry=null,this._mesh=null,this._create()}set helpersSlice(t){this._helpersSlice=t,this._update()}get helpersSlice(){return this._helpersSlice}set visible(t){this._visible=t,this._mesh&&(this._mesh.visible=this._visible)}get visible(){return this._visible}set color(t){this._color=t,this._material&&this._material.color.set(this._color)}get color(){return this._color}_create(){if(this._material||(this._material=new t.LineBasicMaterial({color:this._color,linewidth:1})),!this._helpersSlice.geometry.vertices)return;this._geometry=new t.BufferGeometry;const e=this._helpersSlice.geometry.vertices.length,i=new Float32Array(3*(e+1));i.set(this._helpersSlice.geometry.attributes.position.array,0),i.set(this._helpersSlice.geometry.vertices[0].toArray(),3*e),this._geometry.setAttribute("position",new t.Float32BufferAttribute(i,3)),this._mesh=new t.Line(this._geometry,this._material),"IJK"===this._helpersSlice.aabbSpace&&this._mesh.applyMatrix4(this._helpersSlice.stack.ijk2LPS),this._mesh.visible=this._visible,this.add(this._mesh)}_update(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh=null),this._create()}dispose(){this._mesh.material.dispose(),this._mesh.material=null,this._geometry.dispose(),this._geometry=null,this._material.dispose(),this._material=null}}};e.a=r()},function(t,e,i){"use strict";i.d(e,"b",function(){return r});var n=i(2);const r=(t=n)=>{if(void 0===t||void 0===t.Object3D)return null;const e=t.Object3D;return class extends e{constructor(t){super(),this._stack=t,this._visible=!0,this._color=16777215,this._material=null,this._geometry=null,this._mesh=null,this._meshStack=null,this._create()}set visible(t){this._visible=t,this._mesh&&(this._mesh.visible=this._visible)}get visible(){return this._visible}set color(t){this._color=t,this._material&&this._material.color.set(this._color)}get color(){return this._color}_create(){const e=this._stack.dimensionsIJK,i=this._stack.halfDimensionsIJK,n=new t.Vector3(-.5,-.5,-.5),r=new t.BoxGeometry(e.x,e.y,e.z);r.applyMatrix4((new t.Matrix4).makeTranslation(i.x+n.x,i.y+n.y,i.z+n.z)),this._geometry=r,this._material=new t.MeshBasicMaterial({wireframe:!0});const a=new t.Mesh(this._geometry,null);a.applyMatrix4(this._stack.ijk2LPS),a.visible=this._visible,this._meshStack=a,this._mesh=new t.BoxHelper(this._meshStack,this._color),this._material=this._mesh.material,this.add(this._mesh)}_update(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null),this._create()}dispose(){this._mesh.material.dispose(),this._mesh.material=null,this._geometry.dispose(),this._geometry=null,this._material.dispose(),this._material=null}}};e.a=r()},function(t,e,i){"use strict";i.d(e,"b",function(){return c});var n=i(16),r=i(32),a=i(31),s=i(30),o=i(44),l=i(2);const c=(t=l)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(o.a)(t);return class extends e{constructor(e,i=0,n=new t.Vector3(0,0,0),o=new t.Vector3(0,0,1),l="IJK"){super(),this._stack=e,this._invert=this._stack.invert,this._lut="none",this._lutTexture=null,this._intensityAuto=!0,this._interpolation=1,this._index=i,this._windowWidth=null,this._windowCenter=null,this._opacity=1,this._rescaleSlope=null,this._rescaleIntercept=null,this._spacing=1,this._thickness=0,this._thicknessMethod=0,this._lowerThreshold=null,this._upperThreshold=null,this._canvasWidth=0,this._canvasHeight=0,this._borderColor=null,this._planePosition=n,this._planeDirection=o,this._aaBBspace=l,this._material=null,this._textures=[],this._shadersFragment=s.a,this._shadersVertex=a.a,this._uniforms=r.a.uniforms(),this._geometry=null,this._mesh=null,this._visible=!0,this._init(),this._create()}get stack(){return this._stack}set stack(t){this._stack=t}get spacing(){return this._spacing}set spacing(t){this._spacing=t,this._uniforms.uSpacing.value=this._spacing}get thickness(){return this._thickness}set thickness(t){this._thickness=t,this._uniforms.uThickness.value=this._thickness}get thicknessMethod(){return this._thicknessMethod}set thicknessMethod(t){this._thicknessMethod=t,this._uniforms.uThicknessMethod.value=this._thicknessMethod}get windowWidth(){return this._windowWidth}set windowWidth(t){this._windowWidth=t,this.updateIntensitySettingsUniforms()}get windowCenter(){return this._windowCenter}set windowCenter(t){this._windowCenter=t,this.updateIntensitySettingsUniforms()}get opacity(){return this._opacity}set opacity(t){this._opacity=t,this.updateIntensitySettingsUniforms()}get upperThreshold(){return this._upperThreshold}set upperThreshold(t){this._upperThreshold=t,this.updateIntensitySettingsUniforms()}get lowerThreshold(){return this._lowerThreshold}set lowerThreshold(t){this._lowerThreshold=t,this.updateIntensitySettingsUniforms()}get rescaleSlope(){return this._rescaleSlope}set rescaleSlope(t){this._rescaleSlope=t,this.updateIntensitySettingsUniforms()}get rescaleIntercept(){return this._rescaleIntercept}set rescaleIntercept(t){this._rescaleIntercept=t,this.updateIntensitySettingsUniforms()}get invert(){return this._invert}set invert(t){this._invert=t,this.updateIntensitySettingsUniforms()}get lut(){return this._lut}set lut(t){this._lut=t}get lutTexture(){return this._lutTexture}set lutTexture(t){this._lutTexture=t,this.updateIntensitySettingsUniforms()}get intensityAuto(){return this._intensityAuto}set intensityAuto(t){this._intensityAuto=t,this.updateIntensitySettings(),this.updateIntensitySettingsUniforms()}get interpolation(){return this._interpolation}set interpolation(t){this._interpolation=t,this.updateIntensitySettingsUniforms(),this._updateMaterial()}get index(){return this._index}set index(t){this._index=t,this._update()}set planePosition(t){this._planePosition=t,this._update()}get planePosition(){return this._planePosition}set planeDirection(t){this._planeDirection=t,this._update()}get planeDirection(){return this._planeDirection}set halfDimensions(t){this._halfDimensions=t}get halfDimensions(){return this._halfDimensions}set center(t){this._center=t}get center(){return this._center}set aabbSpace(t){this._aaBBspace=t,this._init()}get aabbSpace(){return this._aaBBspace}set mesh(t){this._mesh=t}get mesh(){return this._mesh}set geometry(t){this._geometry=t}get geometry(){return this._geometry}set canvasWidth(t){this._canvasWidth=t,this._uniforms.uCanvasWidth.value=this._canvasWidth}get canvasWidth(){return this._canvasWidth}set canvasHeight(t){this._canvasHeight=t,this._uniforms.uCanvasHeight.value=this._canvasHeight}get canvasHeight(){return this._canvasHeight}set borderColor(e){this._borderColor=e,this._uniforms.uBorderColor.value=new t.Color(e)}get borderColor(){return this._borderColor}_init(){if(this._stack&&this._stack._prepared&&this._stack._packed)if("IJK"===this._aaBBspace)this._halfDimensions=this._stack.halfDimensionsIJK,this._center=new t.Vector3(this._stack.halfDimensionsIJK.x-.5,this._stack.halfDimensionsIJK.y-.5,this._stack.halfDimensionsIJK.z-.5),this._toAABB=new t.Matrix4;else{let t=this._stack.AABBox();this._halfDimensions=t.clone().multiplyScalar(.5),this._center=this._stack.centerAABBox(),this._toAABB=this._stack.lps2AABB}}_create(){if(this._stack&&this._stack.prepared&&this._stack.packed){try{const e=Object(n.b)(t);this._geometry=new e(this._halfDimensions,this._center,this._planePosition,this._planeDirection,this._toAABB)}catch(t){return window.console.log(t),void window.console.log("invalid slice geometry - exiting...")}this._geometry.vertices&&(this._material||(this._uniforms.uTextureSize.value=this._stack.textureSize,this._uniforms.uDataDimensions.value=[this._stack.dimensionsIJK.x,this._stack.dimensionsIJK.y,this._stack.dimensionsIJK.z],this._uniforms.uWorldToData.value=this._stack.lps2IJK,this._uniforms.uNumberOfChannels.value=this._stack.numberOfChannels,this._uniforms.uPixelType.value=this._stack.pixelType,this._uniforms.uBitsAllocated.value=this._stack.bitsAllocated,this._uniforms.uPackedPerPixel.value=this._stack.packedPerPixel,this._uniforms.uSpacing.value=this._spacing,this._uniforms.uThickness.value=this._thickness,this._uniforms.uThicknessMethod.value=this._thicknessMethod,this._prepareTexture(),this._uniforms.uTextureContainer.value=this._textures,this._stack.textureUnits>8&&(this._uniforms.uTextureContainer.length=14),this._createMaterial({side:t.DoubleSide})),this.updateIntensitySettings(),this.updateIntensitySettingsUniforms(),this._mesh=new t.Mesh(this._geometry,this._material),"IJK"===this._aaBBspace&&this._mesh.applyMatrix4(this._stack.ijk2LPS),this._mesh.visible=this._visible,this.add(this._mesh))}}updateIntensitySettings(){this._intensityAuto?(this.updateIntensitySetting("windowCenter"),this.updateIntensitySetting("windowWidth"),this.updateIntensitySetting("rescaleSlope"),this.updateIntensitySetting("rescaleIntercept")):(null===this._windowCenter&&(this._windowCenter=this._stack.windowCenter),null===this._windowWidth&&(this._windowWidth=this._stack.windowWidth),null===this._rescaleSlope&&(this._rescaleSlope=this._stack.rescaleSlope),null===this._rescaleIntercept&&(this._rescaleIntercept=this._stack.rescaleIntercept)),null===this._upperThreshold&&(this._upperThreshold=this._stack._minMax[1]),null===this._lowerThreshold&&(this._lowerThreshold=this._stack._minMax[0])}updateIntensitySettingsUniforms(){let t=0;this._stack._minMax[0]<0&&(t-=this._stack._minMax[0]),this._uniforms.uRescaleSlopeIntercept.value=[this._rescaleSlope,this._rescaleIntercept],this._uniforms.uWindowCenterWidth.value=[t+this._windowCenter,this._windowWidth],this._uniforms.uOpacity.value=this._opacity,this._uniforms.uLowerUpperThreshold.value=[t+this._lowerThreshold,t+this._upperThreshold],this._uniforms.uInvert.value=!0===this._invert?1:0,this._uniforms.uInterpolation.value=this._interpolation,"none"===this._lut?this._uniforms.uLut.value=0:(this._uniforms.uLut.value=1,this._uniforms.uTextureLUT.value=this._lutTexture)}updateIntensitySetting(t){this._stack.frame[this._index]&&this._stack.frame[this._index][t]?this["_"+t]=this._stack.frame[this._index][t]:this["_"+t]=this._stack[t]}_update(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()}dispose(){for(let t=0;t<this._textures.length;t++)this._textures[t].dispose(),this._textures[t]=null;this._textures=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null}cartesianEquation(){if(!this._geometry||!this._geometry.vertices||this._geometry.vertices.length<3)return new t.Vector4;let e=this._geometry.vertices,i=this._stack.ijk2LPS,n=new t.Vector3(e[0].x,e[0].y,e[0].z).applyMatrix4(i),r=new t.Vector3(e[1].x,e[1].y,e[1].z).applyMatrix4(i),a=new t.Vector3(e[2].x,e[2].y,e[2].z).applyMatrix4(i),s=new t.Vector3,o=new t.Vector3,l=s.subVectors(a,r).cross(o.subVectors(n,r)).normalize();return new t.Vector4(l.x,l.y,l.z,-l.dot(n))}}};e.a=c()},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{constructor(t){this._uniforms=t,this._functions={},this._main=""}functions(){""===this._main&&this.main();let t="";for(let e in this._functions)t+=this._functions[e]+"\n";return t}uniforms(){let t="";for(let e in this._uniforms){let i=this._uniforms[e];t+=`uniform ${i.typeGLSL} ${e}`,i&&i.length&&(t+=`[${i.length}]`),t+=";\n"}return t}main(){this._main="\n\nfloat luma (vec3 rgb) {\n  return (rgb.r + rgb.g + rgb.b)/3.0;\n}\n\nconst float T = 0.04;\nconst float M = 1.0;\nconst float L = 0.002;\n\nvoid main(void) {\n\n  vec2 texCoord = vec2(((vProjectedCoords.x / vProjectedCoords.w) + 1.0 ) / 2.0,\n                ((vProjectedCoords.y / vProjectedCoords.w) + 1.0 ) / 2.0 );\n\n  float borderWidth = uWidth; // in px\n  float step_u = borderWidth * 1.0 / uCanvasWidth;\n  float step_v = borderWidth * 1.0 / uCanvasHeight;\n  vec4 centerPixel = texture2D(uTextureFilled, texCoord);\n\n  vec4 rightPixel  = texture2D(uTextureFilled, texCoord + vec2(step_u, 0.0));\n  vec4 bottomPixel = texture2D(uTextureFilled, texCoord + vec2(0.0, step_v));\n\n  // now manually compute the derivatives\n  float _dFdX = length(rightPixel - centerPixel) / step_u;\n  float _dFdY = length(bottomPixel - centerPixel) / step_v;\n\n  // gl_FragColor.r = _dFdX;\n  // gl_FragColor.g = _dFdY;\n  gl_FragColor.r = max(max(centerPixel.r, rightPixel.r), bottomPixel.r);\n  gl_FragColor.g = max(max(centerPixel.g, rightPixel.g), bottomPixel.g);\n  gl_FragColor.b = max(max(centerPixel.b, rightPixel.b), bottomPixel.b);\n  float maxDerivative = max(_dFdX, _dFdY);\n  float clampedDerivative = clamp(maxDerivative, 0., 1.);\n  gl_FragColor.a = uOpacity * clampedDerivative;\n\n  return;\n  // float h = 1./uCanvasHeight;\n  // float w = 1./uCanvasWidth;\n  // vec4 n[9];\n  // n[0] = texture2D(uTextureFilled, vProjectedTextCoords + vec2( -w, -h));\n  // n[1] = texture2D(uTextureFilled, vProjectedTextCoords + vec2(0.0, -h));\n  // n[2] = texture2D(uTextureFilled, vProjectedTextCoords + vec2(  w, -h));\n  // n[3] = texture2D(uTextureFilled, vProjectedTextCoords + vec2( -w, 0.0));\n  // n[4] = texture2D(uTextureFilled, vProjectedTextCoords);\n  // n[5] = texture2D(uTextureFilled, texCoord + vec2(  w, 0.0));\n  // n[6] = texture2D(uTextureFilled, texCoord + vec2( -w, h));\n  // n[7] = texture2D(uTextureFilled, texCoord + vec2(0.0, h));\n  // n[8] = texture2D(uTextureFilled, texCoord + vec2(  w, h));\n  // vec4 sobel_horizEdge = n[2] + (2.0*n[5]) + n[8] - (n[0] + (2.0*n[3]) + n[6]);\n  // vec4 sobel_vertEdge  = n[0] + (2.0*n[1]) + n[2] - (n[6] + (2.0*n[7]) + n[8]);\n  // vec3 sobel = sqrt((sobel_horizEdge.rgb * sobel_horizEdge.rgb) + (sobel_vertEdge.rgb * sobel_vertEdge.rgb));\n  // gl_FragColor = vec4( sobel, max(max(sobel.r, sobel.g), sobel.b) );\n\n  // return;\n}\n   "}compute(){return`\n// uniforms\n${this.uniforms()}\n\n// varying (should fetch it from vertex directly)\nvarying vec4      vProjectedCoords;\n\n// tailored functions\n${this.functions()}\n\n// main loop\n${this._main}\n      `}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{compute(){return"\nvarying vec4 vProjectedCoords;\n\n//\n// main\n//\nvoid main() {\n\n  vec4 vPos = modelMatrix * vec4(position, 1.0 );\n  mat4 vProjectionViewMatrix = projectionMatrix * viewMatrix;\n  vProjectedCoords =  projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "}}},function(t,e,i){"use strict";e.a=class{constructor(t){this._uniforms=t,this._functions={},this._main=""}functions(){""===this._main&&this.main();let t="";for(let e in this._functions)t+=this._functions[e]+"\n";return t}uniforms(){let t="";for(let e in this._uniforms){let i=this._uniforms[e];t+=`uniform ${i.typeGLSL} ${e}`,i&&i.length&&(t+=`[${i.length}]`),t+=";\n"}return t}main(){this._main="\nvoid intersectionProjection(\n  in vec4 plane,\n  in vec4 slice,\n  out vec3 intersectionProjection){\n\n      vec3 intersectionDirection = normalize(cross(plane.xyz, slice.xyz));\n      vec3 intersectionPoint = \n        cross(intersectionDirection,slice.xyz) * plane.w +\n        cross(plane.xyz, intersectionDirection) * slice.w;\n\n      intersectionProjection =\n        intersectionPoint.xyz +\n        (dot(vPos.xyz - intersectionPoint, intersectionDirection)\n          * intersectionDirection);\n\n}\n\nvoid main(void) {\n      vec4 c1 = vec4(0., 0., 0., 0.);\n      vec4 c2 = vec4(0., 0., 0., 0.);\n      vec4 c3 = vec4(0., 0., 0., 0.);\n\n      // localizer #1\n      // must be normalized!\n      if(length(uPlane1.xyz) > 0.5) {\n        vec3 projection1 = vec3(1.);\n        intersectionProjection(\n          uPlane1,\n          uSlice,\n          projection1\n        );\n\n        vec4 projInter1 = (vProjectionViewMatrix * vec4(projection1, 1.));\n        vec3 ndc1 = projInter1.xyz / projInter1.w;\n        vec2 screenSpace1 = (ndc1.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d1 = distance(gl_FragCoord.xy, screenSpace1.xy);\n        c1 = vec4(uPlaneColor1, 1. - smoothstep(.5, .7, d1));\n      }\n\n      // localizer #2\n      if(length(uPlane2.xyz) > 0.5) {\n        vec3 projection2 = vec3(1.);\n        intersectionProjection(\n          uPlane2,\n          uSlice,\n          projection2\n        );\n\n        vec4 projInter2 = (vProjectionViewMatrix * vec4(projection2, 1.));\n        vec3 ndc2 = projInter2.xyz / projInter2.w;\n        vec2 screenSpace2 = (ndc2.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d2 = distance(gl_FragCoord.xy, screenSpace2.xy);\n        c2 = vec4(uPlaneColor2, 1. - smoothstep(.5, .7, d2));\n      }\n\n      // localizer #3\n      if(length(uPlane3.xyz) > 0.5) {\n        vec3 projection3 = vec3(1.);\n        intersectionProjection(\n          uPlane3,\n          uSlice,\n          projection3\n        );\n\n        vec4 projInter3 = (vProjectionViewMatrix * vec4(projection3, 1.));\n        vec3 ndc3 = projInter3.xyz / projInter3.w;\n        vec2 screenSpace3 = (ndc3.xy * .5 + .5) * vec2(uCanvasWidth, uCanvasHeight);\n\n        float d3 = distance(gl_FragCoord.xy, screenSpace3.xy);\n        c3 = vec4(uPlaneColor3, 1. - smoothstep(.5, .7, d3));\n      }\n\n      // float uBorderDashLength = 10.0;\n      // float uBorderWidth = 2.0;\n      // float valueX = mod(gl_FragCoord.x, 2. * uBorderDashLength);\n      // float valueY = mod(gl_FragCoord.y, 2. * uBorderDashLength);\n      // if( valueX < uBorderDashLength || valueY < uBorderDashLength ){\n        vec3 colorMix = c1.xyz*c1.w + c2.xyz*c2.w + c3.xyz*c3.w;\n        gl_FragColor = vec4(colorMix, max(max(c1.w, c2.w),c3.w)*0.5);\n        return;\n      // }\n      \n      // gl_FragColor = vec4(0., 0., 0., 0.);\n      // return;\n}\n   "}compute(){return`\n// uniforms\n${this.uniforms()}\n\n// varying (should fetch it from vertex directly)\nvarying vec4 vPos;\nvarying mat4 vProjectionViewMatrix;\n\n// tailored functions\n${this.functions()}\n\n// main loop\n${this._main}\n      `}}},function(t,e,i){"use strict";e.a=class{compute(){return"\nvarying vec4 vPos;\nvarying mat4 vProjectionViewMatrix;\n\n//\n// main\n//\nvoid main() {\n\n  vPos = modelMatrix * vec4(position, 1.0 );\n  vProjectionViewMatrix = projectionMatrix * viewMatrix;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(6);class r{static uniforms(){return{uTextureSize:{type:"i",value:0,typeGLSL:"int"},uTextureContainer:{type:"tv",value:[],typeGLSL:"sampler2D",length:7},uDataDimensions:{type:"iv",value:[0,0,0],typeGLSL:"ivec3"},uWorldToData:{type:"m4",value:new n.a,typeGLSL:"mat4"},uWindowCenterWidth:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uRescaleSlopeIntercept:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uNumberOfChannels:{type:"i",value:1,typeGLSL:"int"},uBitsAllocated:{type:"i",value:8,typeGLSL:"int"},uInvert:{type:"i",value:0,typeGLSL:"int"},uLut:{type:"i",value:0,typeGLSL:"int"},uTextureLUT:{type:"t",value:[],typeGLSL:"sampler2D"},uPixelType:{type:"i",value:0,typeGLSL:"int"},uPackedPerPixel:{type:"i",value:1,typeGLSL:"int"},uInterpolation:{type:"i",value:1,typeGLSL:"int"},uWorldBBox:{type:"fv1",value:[0,0,0,0,0,0],typeGLSL:"float",length:6},uSteps:{type:"i",value:256,typeGLSL:"int"},uAlphaCorrection:{type:"f",value:.5,typeGLSL:"float"},uFrequence:{type:"f",value:0,typeGLSL:"float"},uAmplitude:{type:"f",value:0,typeGLSL:"float"},uShading:{type:"i",value:1,typeGLSL:"int"},uAmbient:{type:"f",value:.1,typeGLSL:"float"},uAmbientColor:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uSampleColorToAmbient:{type:"i",value:1,typeGLSL:"int"},uSpecular:{type:"f",value:1,typeGLSL:"float"},uSpecularColor:{type:"v3",value:[1,1,1],typeGLSL:"vec3"},uDiffuse:{type:"f",value:.3,typeGLSL:"float"},uDiffuseColor:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uSampleColorToDiffuse:{type:"i",value:1,typeGLSL:"int"},uShininess:{type:"f",value:5,typeGLSL:"float"},uLightPosition:{type:"v3",value:[0,0,0],typeGLSL:"vec3"},uLightPositionInCamera:{type:"i",value:1,typeGLSL:"int"},uIntensity:{type:"v3",value:[.8,.8,.8],typeGLSL:"vec3"},uAlgorithm:{type:"i",value:0,typeGLSL:"int"}}}}},function(t,e,i){"use strict";var n=i(7),r=i(110);e.a=function(t,e,i,a){switch(t._uniforms.uInterpolation.value){case 0:return n.a.api(t,e,i);case 1:return r.a.api(t,e,i,a);default:return n.a.api(t,e,i)}}},function(t,e,i){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.Utils=n.lossless.Utils||{},n.lossless.Utils.createArray=function(t){var e=new Array(t||0),i=t;if(arguments.length>1)for(var r=Array.prototype.slice.call(arguments,1);i--;)e[t-1-i]=n.lossless.Utils.createArray.apply(this,r);return e},n.lossless.Utils.makeCRCTable=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e},n.lossless.Utils.crc32=function(t){for(var e=n.lossless.Utils.crcTable||(n.lossless.Utils.crcTable=n.lossless.Utils.makeCRCTable()),i=-1,r=0;r<t.byteLength;r++)i=i>>>8^e[255&(i^t.getUint8(r))];return(-1^i)>>>0},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.Utils)},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{static uniforms(){return{uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uWidth:{type:"f",value:1,typeGLSL:"float"},uOpacity:{type:"f",value:1,typeGLSL:"float"},uTextureFilled:{type:"t",value:[],typeGLSL:"sampler2D"}}}}},function(t,e,i){"use strict";e.a=class{static uniforms(){return{uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uSlice:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlane1:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor1:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uPlane2:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor2:{type:"v3",value:[1,1,0],typeGLSL:"vec3"},uPlane3:{type:"v4",value:[0,0,0,0],typeGLSL:"vec4"},uPlaneColor3:{type:"v3",value:[1,1,0],typeGLSL:"vec3"}}}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{constructor(t){this._container=t,this._modes={load:{name:"load",color:"#FFF56F"},parse:{name:"parse",color:"#2196F3"}},this.requestAnimationFrameID=null,this._mode=null,this._value=null,this._total=null,this._totalFiles=null,this.init()}free(){let t=this._container.getElementsByClassName("progress container");t.length>0&&t[0].parentNode.removeChild(t[0]),t=null,window.cancelAnimationFrame(this.requestAnimationFrameID)}init(){let t=this._domContainer();for(let e in this._modes)if(this._modes.hasOwnProperty(e)){let i=this._domBar(this._modes[e]);t.appendChild(i),i=null}this._container.appendChild(t),t=null,this.updateUI()}update(t,e,i,n=""){this._mode=i,this._value=t,0===e?(this._total=t,this._value=Math.random()*t):this._total=e}updateUI(){if(this.requestAnimationFrameID=requestAnimationFrame(()=>{this.updateUI()}),!(this._modes.hasOwnProperty(this._mode)&&this._modes[this._mode].hasOwnProperty("name")&&this._modes[this._mode].hasOwnProperty("color")))return!1;const t=Math.round(this._value/this._total*100),e=this._modes[this._mode].color;let i=this._container.getElementsByClassName("progress "+this._modes[this._mode].name);i.length>0&&(i[0].style.borderColor=e,i[0].style.width=t+"%"),i=null}_domContainer(){let t=document.createElement("div");return t.classList.add("progress"),t.classList.add("container"),t.style.width="100%",t.style.height="8px",t.style.position="absolute",t.style.backgroundColor="rgba(158, 158, 158, 0.5)",t.style.top="0",t.style.zIndex="1",t}_domBar(t){if(!t.hasOwnProperty("name")||!t.hasOwnProperty("color"))return window.console.log("Invalid mode provided."),window.console.log(t),!1;let e=document.createElement("div");return e.classList.add(t.name),e.classList.add("progress"),e.style.border="2px solid "+t.color,e.style.width="0%",e}set totalFiles(t){this._totalFiles=t}get totalFiles(){return this._totalFiles}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(25);class r{constructor(t){this._uniforms=t,this._functions={},this._main=""}functions(){""===this._main&&this.main();let t="";for(let e in this._functions)t+=this._functions[e]+"\n";return t}uniforms(){let t="";for(let e in this._uniforms){let i=this._uniforms[e];t+=`uniform ${i.typeGLSL} ${e}`,i&&i.length&&(t+=`[${i.length}]`),t+=";\n"}return t}main(){this._main=`\nvoid main(void) {\n\n  // draw border if slice is cropped\n  // float uBorderDashLength = 10.;\n\n  if( uCanvasWidth > 0. &&\n      ((gl_FragCoord.x > uBorderMargin && (gl_FragCoord.x - uBorderMargin) < uBorderWidth) ||\n       (gl_FragCoord.x < (uCanvasWidth - uBorderMargin) && (gl_FragCoord.x + uBorderMargin) > (uCanvasWidth - uBorderWidth) ))){\n    float valueY = mod(gl_FragCoord.y, 2. * uBorderDashLength);\n    if( valueY < uBorderDashLength && gl_FragCoord.y > uBorderMargin && gl_FragCoord.y < (uCanvasHeight - uBorderMargin) ){\n      gl_FragColor = vec4(uBorderColor, 1.);\n      return;\n    }\n  }\n\n  if( uCanvasHeight > 0. &&\n      ((gl_FragCoord.y > uBorderMargin && (gl_FragCoord.y - uBorderMargin) < uBorderWidth) ||\n       (gl_FragCoord.y < (uCanvasHeight - uBorderMargin) && (gl_FragCoord.y + uBorderMargin) > (uCanvasHeight - uBorderWidth) ))){\n    float valueX = mod(gl_FragCoord.x, 2. * uBorderDashLength);\n    if( valueX < uBorderDashLength && gl_FragCoord.x > uBorderMargin && gl_FragCoord.x < (uCanvasWidth - uBorderMargin) ){\n      gl_FragColor = vec4(uBorderColor, 1.);\n      return;\n    }\n  }\n\n  // get texture coordinates of current pixel\n  vec4 dataValue = vec4(0.);\n  vec3 gradient = vec3(1.); // gradient calculations will be skipped if it is equal to vec3(1.) \n  float steps = floor(uThickness / uSpacing + 0.5);\n\n  if (steps > 1.) {\n    vec3 origin = vPos - uThickness * 0.5 * vNormal;\n    vec4 dataValueAcc = vec4(0.);\n    for (float step = 0.; step < 128.; step++) {\n      if (step >= steps) {\n        break;\n      }\n\n      vec4 dataCoordinates = uWorldToData * vec4(origin + step * uSpacing * vNormal, 1.);\n      vec3 currentVoxel = dataCoordinates.xyz;\n      ${Object(n.a)(this,"currentVoxel","dataValueAcc","gradient")};\n\n      if (step == 0.) {\n        dataValue.r = dataValueAcc.r;\n        continue;\n      }\n\n      if (uThicknessMethod == 0) {\n        dataValue.r = max(dataValueAcc.r, dataValue.r);\n      }\n      if (uThicknessMethod == 1) {\n        dataValue.r += dataValueAcc.r;\n      }\n      if (uThicknessMethod == 2) {\n        dataValue.r = min(dataValueAcc.r, dataValue.r);\n      }\n    }\n\n    if (uThicknessMethod == 1) {\n      dataValue.r /= steps;\n    }\n  } else {\n    vec4 dataCoordinates = uWorldToData * vec4(vPos, 1.);\n    vec3 currentVoxel = dataCoordinates.xyz;\n    ${Object(n.a)(this,"currentVoxel","dataValue","gradient")}\n  }\n\n  if(uNumberOfChannels == 1){\n    // rescale/slope\n    float realIntensity = dataValue.r * uRescaleSlopeIntercept[0] + uRescaleSlopeIntercept[1];\n  \n    // threshold\n    if (realIntensity < uLowerUpperThreshold[0] || realIntensity > uLowerUpperThreshold[1]) {\n      discard;\n    }\n  \n    // normalize\n    float windowMin = uWindowCenterWidth[0] - uWindowCenterWidth[1] * 0.5;\n    float normalizedIntensity =\n      ( realIntensity - windowMin ) / uWindowCenterWidth[1];\n    dataValue.r = dataValue.g = dataValue.b = normalizedIntensity;\n    dataValue.a = 1.;\n\n    // apply LUT\n    if(uLut == 1){\n      // should opacity be grabbed there?\n      dataValue = texture2D( uTextureLUT, vec2( normalizedIntensity , 1.0) );\n    }\n  \n    // apply segmentation\n    if(uLutSegmentation == 1){\n      // should opacity be grabbed there?\n      //\n      float textureWidth = 256.;\n      float textureHeight = 128.;\n      float min = 0.;\n      // start at 0!\n      int adjustedIntensity = int(floor(realIntensity + 0.5));\n  \n      // Get row and column in the texture\n      int colIndex = int(mod(float(adjustedIntensity), textureWidth));\n      int rowIndex = int(floor(float(adjustedIntensity)/textureWidth));\n  \n      float texWidth = 1./textureWidth;\n      float texHeight = 1./textureHeight;\n    \n      // Map row and column to uv\n      vec2 uv = vec2(0,0);\n      uv.x = 0.5 * texWidth + (texWidth * float(colIndex));\n      uv.y = 1. - (0.5 * texHeight + float(rowIndex) * texHeight);\n  \n      dataValue = texture2D( uTextureLUTSegmentation, uv );\n    }\n  }\n\n  if(uInvert == 1){\n    dataValue.xyz = vec3(1.) - dataValue.xyz;\n  }\n\n  dataValue.a = dataValue.a*uOpacity;\n\n  gl_FragColor = dataValue;\n}\n   `}compute(){return`\n// uniforms\n${this.uniforms()}\n\n// varying (should fetch it from vertex directly)\nvarying vec3 vPos;\nvarying vec3 vNormal;\n\n// tailored functions\n${this.functions()}\n\n// main loop\n${this._main}\n      `}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{compute(){return"\nvarying vec3 vPos;\nvarying vec3 vNormal;\n\nvoid main() {\n  vNormal = normal;\n  vPos = (modelMatrix * vec4(position, 1.0 )).xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(6);class r{static uniforms(){return{uTextureSize:{type:"i",value:0,typeGLSL:"int"},uTextureContainer:{type:"tv",value:[],typeGLSL:"sampler2D",length:7},uDataDimensions:{type:"iv",value:[0,0,0],typeGLSL:"ivec3"},uWorldToData:{type:"m4",value:new n.a,typeGLSL:"mat4"},uWindowCenterWidth:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uLowerUpperThreshold:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uRescaleSlopeIntercept:{type:"fv1",value:[0,0],typeGLSL:"float",length:2},uNumberOfChannels:{type:"i",value:1,typeGLSL:"int"},uBitsAllocated:{type:"i",value:8,typeGLSL:"int"},uInvert:{type:"i",value:0,typeGLSL:"int"},uLut:{type:"i",value:0,typeGLSL:"int"},uTextureLUT:{type:"t",value:[],typeGLSL:"sampler2D"},uLutSegmentation:{type:"i",value:0,typeGLSL:"int"},uTextureLUTSegmentation:{type:"t",value:[],typeGLSL:"sampler2D"},uPixelType:{type:"i",value:0,typeGLSL:"int"},uPackedPerPixel:{type:"i",value:1,typeGLSL:"int"},uInterpolation:{type:"i",value:1,typeGLSL:"int"},uCanvasWidth:{type:"f",value:0,typeGLSL:"float"},uCanvasHeight:{type:"f",value:0,typeGLSL:"float"},uBorderColor:{type:"v3",value:[1,0,.5],typeGLSL:"vec3"},uBorderWidth:{type:"f",value:2,typeGLSL:"float"},uBorderMargin:{type:"f",value:2,typeGLSL:"float"},uBorderDashLength:{type:"f",value:10,typeGLSL:"float"},uOpacity:{type:"f",value:1,typeGLSL:"float"},uSpacing:{type:"f",value:0,typeGLSL:"float"},uThickness:{type:"f",value:0,typeGLSL:"float"},uThicknessMethod:{type:"i",value:0,typeGLSL:"int"}}}}},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(25),r=i(111);class a{constructor(t){this._uniforms=t,this._functions={},this._main=""}functions(){""===this._main&&this.main();let t="";for(let e in this._functions)t+=this._functions[e]+"\n";return t}uniforms(){let t="";for(let e in this._uniforms){let i=this._uniforms[e];t+=`uniform ${i.typeGLSL} ${e}`,i&&i.length&&(t+=`[${i.length}]`),t+=";\n"}return t}main(){this._main=`\nvoid getIntensity(in vec3 dataCoordinates, out float intensity, out vec3 gradient){\n\n  vec4 dataValue = vec4(0., 0., 0., 0.);\n  ${Object(n.a)(this,"dataCoordinates","dataValue","gradient")}\n\n  intensity = dataValue.r;\n\n  // rescale/slope\n  intensity = intensity*uRescaleSlopeIntercept[0] + uRescaleSlopeIntercept[1];\n  // window level\n  float windowMin = uWindowCenterWidth[0] - uWindowCenterWidth[1] * 0.5;\n  intensity = ( intensity - windowMin ) / uWindowCenterWidth[1];\n}\n\nmat4 inverse(mat4 m) {\n  float\n    a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n    a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n    a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n    a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n    b00 = a00 * a11 - a01 * a10,\n    b01 = a00 * a12 - a02 * a10,\n    b02 = a00 * a13 - a03 * a10,\n    b03 = a01 * a12 - a02 * a11,\n    b04 = a01 * a13 - a03 * a11,\n    b05 = a02 * a13 - a03 * a12,\n    b06 = a20 * a31 - a21 * a30,\n    b07 = a20 * a32 - a22 * a30,\n    b08 = a20 * a33 - a23 * a30,\n    b09 = a21 * a32 - a22 * a31,\n    b10 = a21 * a33 - a23 * a31,\n    b11 = a22 * a33 - a23 * a32,\n\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  return mat4(\n    a11 * b11 - a12 * b10 + a13 * b09,\n    a02 * b10 - a01 * b11 - a03 * b09,\n    a31 * b05 - a32 * b04 + a33 * b03,\n    a22 * b04 - a21 * b05 - a23 * b03,\n    a12 * b08 - a10 * b11 - a13 * b07,\n    a00 * b11 - a02 * b08 + a03 * b07,\n    a32 * b02 - a30 * b05 - a33 * b01,\n    a20 * b05 - a22 * b02 + a23 * b01,\n    a10 * b10 - a11 * b08 + a13 * b06,\n    a01 * b08 - a00 * b10 - a03 * b06,\n    a30 * b04 - a31 * b02 + a33 * b00,\n    a21 * b02 - a20 * b04 - a23 * b00,\n    a11 * b07 - a10 * b09 - a12 * b06,\n    a00 * b09 - a01 * b07 + a02 * b06,\n    a31 * b01 - a30 * b03 - a32 * b00,\n    a20 * b03 - a21 * b01 + a22 * b00) / det;\n}\n\n/**\n * Adapted from original sources\n * \n * Original code: \n * http://jamie-wong.com/2016/07/15/ray-marching-signed-distance-functions/\n * https://www.shadertoy.com/view/lt33z7\n * \n * The vec3 returned is the RGB color of the light's contribution.\n *\n * k_a: Ambient color\n * k_d: Diffuse color\n * k_s: Specular color\n * alpha: Shininess coefficient\n * p: position of point being lit\n * eye: the position of the camera\n * lightPos: the position of the light\n * lightIntensity: color/intensity of the light\n *\n * See https://en.wikipedia.org/wiki/Phong_reflection_model#Description\n */\nvec3 phongShading(vec3 k_a, vec3 k_d, vec3 k_s, float shininess, vec3 p, vec3 eye,\n  vec3 lightPos, vec3 lightIntensity, vec3 normal) {\n  vec3 N = normal;\n  vec3 L = lightPos - p;\n  if (length(L) > 0.) {\n    L = L / length(L);\n  }\n  vec3 V = eye - p;\n  if (length(V) > 0.) {\n    V = V / length(V);\n  }\n  vec3 R = reflect(-L, N);\n  if (length(R) > 0.) {\n    R = R / length(R);\n  }\n\n  // https://en.wikipedia.org/wiki/Blinn%E2%80%93Phong_shading_model\n  vec3 h = L + V;\n  vec3 H = h;\n  if (length(h) > 0.) {\n    H = H / length(h);\n  }\n\n  float dotLN = dot(L, N);\n  float dotRV = dot(R, V);\n\n  if (dotLN < 0.) {\n    // Light not visible from this point on the surface\n    return k_a;\n  } \n\n  if (dotRV < 0.) {\n    // Light reflection in opposite direction as viewer, apply only diffuse\n    // component\n    return k_a + lightIntensity * (k_d * dotLN);\n  }\n\n  float specAngle = max(dot(H, normal), 0.0);\n  float specular = pow(dotRV, shininess); //pow(specAngle, shininess); // \n  return k_a + lightIntensity * (k_d * dotLN  + k_s * specular);\n}\n\nfloat PI = 3.14159265358979323846264 * 00000.1; // PI\n\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv) {\n  const highp float a = 12.9898;\n  const highp float b = 78.233;\n  const highp float c = 43758.5453;\n  highp float dt = dot(uv.xy, vec2(a, b)), sn = mod(dt, PI);\n  return fract(sin(sn) * c);\n}\n\nvoid main(void) {\n  const int maxSteps = 1024;\n\n  // the ray\n  vec3 rayOrigin = cameraPosition;\n  vec3 rayDirection = normalize(vPos.xyz - rayOrigin);\n\n  vec3 lightOrigin = uLightPositionInCamera == 1 ? cameraPosition : uLightPosition;\n\n  // the Axe-Aligned B-Box\n  vec3 AABBMin = vec3(uWorldBBox[0], uWorldBBox[2], uWorldBBox[4]);\n  vec3 AABBMax = vec3(uWorldBBox[1], uWorldBBox[3], uWorldBBox[5]);\n\n  // Intersection ray/bbox\n  float tNear, tFar;\n  bool intersect = false;\n  ${r.a.api(this,"rayOrigin","rayDirection","AABBMin","AABBMax","tNear","tFar","intersect")}\n  if (tNear < 0.0) tNear = 0.0;\n\n  // x / y should be within o-1\n  // should\n  float offset = rand(gl_FragCoord.xy);\n\n  // init the ray marching\n  float tStep = (tFar - tNear) / float(uSteps);\n  float tCurrent = tNear + offset * tStep;\n  vec4 accumulatedColor = vec4(0.0);\n  float accumulatedAlpha = 0.0;\n\n  // MIP volume rendering\n  float maxIntensity = 0.0;\n\n  mat4 dataToWorld = inverse(uWorldToData);\n\n  // rayOrigin -= rayDirection * 0.1; // gold_noise(vPos.xz, vPos.y) / 100.;  \n\n  for(int rayStep = 0; rayStep < maxSteps; rayStep++){\n    vec3 currentPosition = rayOrigin + rayDirection * tCurrent;\n    // some non-linear FUN\n    // some occlusion issue to be fixed\n    vec3 transformedPosition = currentPosition; //transformPoint(currentPosition, uAmplitude, uFrequence);\n    // world to data coordinates\n    // rounding trick\n    // first center of first voxel in data space is CENTERED on (0,0,0)\n    vec4 dataCoordinatesRaw = uWorldToData * vec4(transformedPosition, 1.0);\n    vec3 currentVoxel = vec3(dataCoordinatesRaw.x, dataCoordinatesRaw.y, dataCoordinatesRaw.z);\n    float intensity = 0.0;\n    vec3 gradient = vec3(0., 0., 0.);\n    getIntensity(currentVoxel, intensity, gradient);\n    // map gradient to world space and normalize before using\n    // we avoid to call "normalize" as it may be undefined if vector length == 0.\n    gradient = (vec3(dataToWorld * vec4(gradient, 0.)));\n    if (length(gradient) > 0.0) {\n      gradient = normalize(gradient);\n    }\n\n    vec4 colorSample;\n    float alphaSample;\n    if(uLut == 1){\n      vec4 colorFromLUT = texture2D( uTextureLUT, vec2( intensity, 1.0) );\n      // 256 colors\n      colorSample = colorFromLUT;\n      alphaSample = colorFromLUT.a;\n    }\n    else{\n      alphaSample = intensity;\n      colorSample.r = colorSample.g = colorSample.b = intensity;\n    }\n\n    // ray marching algorithm\n    // shading on\n    // interpolation on\n    if (uAlgorithm == 0 && uShading == 1 && uInterpolation != 0) {\n      //  && alphaSample > .3\n      vec3 ambientComponent = uSampleColorToAmbient == 1 ? colorSample.xyz : uAmbientColor;\n      ambientComponent *= uAmbient;\n      vec3 diffuseComponent = uSampleColorToDiffuse == 1 ? colorSample.xyz : uDiffuseColor;\n      diffuseComponent *= uDiffuse;\n      vec3 specularComponent = uSpecular * uSpecularColor;\n      float shininess = uShininess;\n      vec3 vIntensity = uIntensity;\n\n      colorSample.xyz += phongShading(\n        ambientComponent,\n        diffuseComponent,\n        specularComponent,\n        shininess,\n        currentPosition.xyz,\n        rayOrigin.xyz,\n        lightOrigin.xyz,\n        vIntensity,\n        gradient);\n    }\n\n    alphaSample = 1.0 - pow((1.0- alphaSample),tStep*uAlphaCorrection);\n    alphaSample *= (1.0 - accumulatedAlpha);\n\n    accumulatedColor += alphaSample * colorSample;\n    accumulatedAlpha += alphaSample;\n\n    tCurrent += tStep;\n\n    if (tCurrent > tFar || (uAlgorithm == 0 && accumulatedAlpha >= 1.0)) break;\n\n    if (uAlgorithm == 1 && (intensity >= maxIntensity)) {\n      maxIntensity = intensity;\n      accumulatedColor = colorSample;\n      accumulatedAlpha = 1.;\n    }\n  }\n\n  gl_FragColor = vec4(accumulatedColor.xyz, accumulatedAlpha);\n}\n   `}compute(){return`\n// uniforms\n${this.uniforms()}\n\n// varying (should fetch it from vertex directly)\nvarying vec4      vPos;\n\n// tailored functions\n${this.functions()}\n\n// main loop\n${this._main}\n      `}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{compute(){return"\nvarying vec4 vPos;\n\n//\n// main\n//\nvoid main() {\n\n  vPos = modelMatrix * vec4(position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(13);class r extends n.a{constructor(){super(),this._concatenationUID=-1,this._seriesInstanceUID=-1,this._transferSyntaxUID="",this._seriesNumber=-1,this._seriesDescription="",this._seriesDate="",this._studyDescription="",this._studyDate="",this._accessionNumber=-1,this._modality="Modality not set",this._dimensionIndexSequence=[],this._numberOfFrames=0,this._numberOfChannels=1,this._rawHeader=null,this._patientID="",this._patientName="",this._patientAge="",this._patientBirthdate="",this._patientSex="",this._segmentationType=null,this._segmentationSegments=[],this._stack=[]}validate(t){return!!(super.validate(t)&&"function"==typeof t.mergeSeries&&t.hasOwnProperty("_seriesInstanceUID")&&t.hasOwnProperty("_numberOfFrames")&&t.hasOwnProperty("_numberOfChannels")&&t.hasOwnProperty("_stack")&&void 0!==t._stack&&Array===t._stack.constructor)}merge(t){return!!this.validate(t)&&(this._seriesInstanceUID===t.seriesInstanceUID&&(t.stack[0]&&(0===this._stack[0]._numberOfFrames&&this._stack[0].computeNumberOfFrames(),this._stack[0].computeCosines(),0===t.stack[0]._numberOfFrames&&t.stack[0].computeNumberOfFrames(),t.stack[0].computeCosines()),this.mergeModels(this._stack,t.stack)))}mergeSeries(t){let e=[this];return this.mergeModels(e,t),e}set seriesInstanceUID(t){this._seriesInstanceUID=t}get seriesInstanceUID(){return this._seriesInstanceUID}set transferSyntaxUID(t){this._transferSyntaxUID=t}get transferSyntaxUID(){return this._transferSyntaxUID}get transferSyntaxUIDLabel(){switch(this._transferSyntaxUID){case"1.2.840.10008.1.2.4.90":return"JPEG 2000 Lossless";case"1.2.840.10008.1.2.4.91":return"JPEG 2000 Lossy";case"1.2.840.10008.1.2.4.57":return"JPEG Lossless, Nonhierarchical (Processes 14)";case"1.2.840.10008.1.2.4.70":return"JPEG Lossless, Nonhierarchical (Processes 14 [Selection 1])";case"1.2.840.10008.1.2.4.50":return"JPEG Baseline lossy process 1 (8 bit)";case"1.2.840.10008.1.2.4.51":return"JPEG Baseline lossy process 2 & 4 (12 bit)";case"1.2.840.10008.1.2":return"Implicit VR Little Endian";case"1.2.840.10008.1.2.1":return"Explicit VR Little Endian";case"1.2.840.10008.1.2.2":return"Explicit VR Big Endian";default:return`Unknown transfersyntax: ${this._transferSyntaxUID}`}}set studyDate(t){this._studyDate=t}get studyDate(){return this._studyDate}set studyDescription(t){this._studyDescription=t}get studyDescription(){return this._studyDescription}set seriesDate(t){this._seriesDate=t}get seriesDate(){return this._seriesDate}set seriesDescription(t){this._seriesDescription=t}get seriesDescription(){return this._seriesDescription}set rawHeader(t){this._rawHeader=t}get rawHeader(){return this._rawHeader}set patientID(t){this._patientID=t}get patientID(){return this._patientID}set patientName(t){this._patientName=t}get patientName(){return this._patientName}set patientAge(t){this._patientAge=t}get patientAge(){return this._patientAge}set patientBirthdate(t){this._patientBirthdate=t}get patientBirthdate(){return this._patientBirthdate}set patientSex(t){this._patientSex=t}get patientSex(){return this._patientSex}set numberOfFrames(t){this._numberOfFrames=t}get numberOfFrames(){return this._numberOfFrames}set numberOfChannels(t){this._numberOfChannels=t}get numberOfChannels(){return this._numberOfChannels}set stack(t){this._stack=t}get stack(){return this._stack}set modality(t){this._modality=t}get modality(){return this._modality}set segmentationType(t){this._segmentationType=t}get segmentationType(){return this._segmentationType}set segmentationSegments(t){this._segmentationSegments=t}get segmentationSegments(){return this._segmentationSegments}}},function(t,e,i){"use strict";i.d(e,"a",function(){return u});var n=i(6),r=i(0),a=i(14),s=i(15),o=i.n(s),l=i(1),c=i(13);const h=i(134);class u extends c.a{constructor(){super(),this._uid=null,this._stackID=-1,this._frame=[],this._numberOfFrames=0,this._rows=0,this._columns=0,this._numberOfChannels=1,this._bitsAllocated=8,this._pixelType=0,this._pixelRepresentation=0,this._textureSize=4096,this._textureUnits=7,this._rawData=[],this._windowCenter=0,this._windowWidth=0,this._rescaleSlope=1,this._rescaleIntercept=0,this._minMax=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],this._regMatrix=new n.a,this._ijk2LPS=null,this._lps2IJK=null,this._aabb2LPS=null,this._lps2AABB=null,this._dimensionsIJK=null,this._halfDimensionsIJK=null,this._spacing=new r.a(1,1,1),this._spacingBetweenSlices=0,this._sliceThickness=0,this._origin=null,this._rightHanded=!0,this._xCosine=new r.a(1,0,0),this._yCosine=new r.a(0,1,0),this._zCosine=new r.a(0,0,1),this._prepared=!1,this._packed=!1,this._packedPerPixel=1,this._modality="Modality not set",this._segmentationType=null,this._segmentationSegments=[],this._segmentationDefaultColor=[63,174,128],this._frameSegment=[],this._segmentationLUT=[],this._segmentationLUTO=[],this._invert=!1}prepareSegmentation(){this._frameSegment=this._frame;let t=[];this.computeCosines(),this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame.sort(this._sortDistanceArraySort);let e=-1;for(let i=0;i<this._frame.length;i++){if(t[e]&&t[e]._dist==this._frame[i]._dist)for(let n=0;n<t[e]._rows*t[e]._columns;n++)t[e]._pixelData[n]+=this._frame[i].pixelData[n]*this._frame[i]._referencedSegmentNumber;else{t.push(this._frame[i]),e++;for(let n=0;n<t[e]._rows*t[e]._columns;n++)t[e]._pixelData[n]*=this._frame[i]._referencedSegmentNumber}t[e].minMax=l.default.minMax(t[e]._pixelData)}let i={},n=0;for(let t=0;t<this._segmentationSegments.length;t++){n=Math.max(n,parseInt(this._segmentationSegments[t].segmentNumber,10));let e=this._segmentationSegments[t].recommendedDisplayCIELab;i[this._segmentationSegments[t].segmentNumber]=null===e?this._segmentationDefaultColor:o.a.cielab2RGB(...e)}for(let t=0;t<=n;t++){let e=t/n,r=t?1:0,a=[0,0,0];i.hasOwnProperty(t.toString())&&(a=i[t.toString()]),a[0]/=255,a[1]/=255,a[2]/=255,this._segmentationLUT.push([e,...a]),this._segmentationLUTO.push([e,r])}this._frame=t}prepare(){"SEG"===this._modality&&this.prepareSegmentation(),this.computeNumberOfFrames(),this._rows=this._frame[0].rows,this._columns=this._frame[0].columns,this._dimensionsIJK=new r.a(this._columns,this._rows,this._numberOfFrames),this._halfDimensionsIJK=new r.a(this._dimensionsIJK.x/2,this._dimensionsIJK.y/2,this._dimensionsIJK.z/2),this._spacingBetweenSlices=this._frame[0].spacingBetweenSlices,this._sliceThickness=this._frame[0].sliceThickness,this.computeCosines(),this._numberOfFrames>1&&this.orderFrames(),this.computeSpacing(),this._frame[0].imagePosition||(this._frame[0].imagePosition=[0,0,0]),this._frame[0].imageOrientation||(this._frame[0].imageOrientation=[1,0,0,0,1,0]),this._origin=this._arrayToVector3(this._frame[0].imagePosition,0),this.computeIJK2LPS(),this.computeLPS2AABB();const t=Math.floor(this._frame.length/2),e=this._frame[t];this._rescaleSlope=e.rescaleSlope||1,this._rescaleIntercept=e.rescaleIntercept||0,this.computeMinMaxIntensities(),this._minMax[0]=l.default.rescaleSlopeIntercept(this._minMax[0],this._rescaleSlope,this._rescaleIntercept),this._minMax[1]=l.default.rescaleSlopeIntercept(this._minMax[1],this._rescaleSlope,this._rescaleIntercept),this._windowWidth=e.windowWidth||this._minMax[1]-this._minMax[0],this._windowCenter=e.windowCenter||this._minMax[0]+this._windowWidth/2,this._bitsAllocated=e.bitsAllocated,this._prepared=!0}packEchos(){let t=[];for(let e=0;e<this._frame.length;e+=4){let i=this._frame[e];for(let t=0;t<this._rows*this._columns;t++){for(let n=1;n<4;n++)i.pixelData[t]+=this._frame[e+n].pixelData[t];i.pixelData[t]/=4}t.push(i)}this._frame=t,this._numberOfFrames=this._frame.length,this._dimensionsIJK=new r.a(this._columns,this._rows,this._numberOfFrames),this._halfDimensionsIJK=new r.a(this._dimensionsIJK.x/2,this._dimensionsIJK.y/2,this._dimensionsIJK.z/2)}computeNumberOfFrames(){if(!(this._frame&&this._frame.length>0))return window.console.warn("_frame doesn't contain anything...."),window.console.warn(this._frame),!1;this._numberOfFrames=this._frame.length}computeCosines(){if(this._frame&&this._frame[0]){let t=this._frame[0].cosines();this._xCosine=t[0],this._yCosine=t[1],this._zCosine=t[2]}}orderFrames(){this._frame[0].dimensionIndexValues?this._frame.sort(this._orderFrameOnDimensionIndicesArraySort):this._frame[0].imagePosition&&this._frame[0].imageOrientation&&this._frame[1]&&this._frame[1].imagePosition&&this._frame[1].imageOrientation&&this._frame[0].imagePosition.join()!==this._frame[1].imagePosition.join()?(this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame.sort(this._sortDistanceArraySort)):null!==this._frame[0].instanceNumber&&this._frame[1]&&null!==this._frame[1].instanceNumber&&this._frame[0].instanceNumber!==this._frame[1].instanceNumber?this._frame.sort(this._sortInstanceNumberArraySort):this._frame[0].sopInstanceUID&&this._frame[1]&&this._frame[1].sopInstanceUID&&this._frame[0].sopInstanceUID!==this._frame[1].sopInstanceUID?this._frame.sort(this._sortSopInstanceUIDArraySort):this._frame[0].imagePosition&&window.console.warn("do not know how to order the frames...")}computeSpacing(){this.xySpacing(),this.zSpacing()}zSpacing(){this._numberOfFrames>1&&(this._frame[0].pixelSpacing&&this._frame[0].pixelSpacing[2]?this._spacing.z=this._frame[0].pixelSpacing[2]:(this._frame.map(this._computeDistanceArrayMap.bind(null,this._zCosine)),this._frame[1].dist!==this._frame[0].dist?(this._frame.sort(this._sortDistanceArraySort),this._spacing.z=this._frame[1].dist-this._frame[0].dist):this._spacingBetweenSlices?this._spacing.z=this._spacingBetweenSlices:this._frame[0].sliceThickness&&(this._spacing.z=this._frame[0].sliceThickness))),0===this._spacing.z&&(this._spacing.z=1)}xySpacing(){if(this._frame&&this._frame[0]){let t=this._frame[0].spacingXY();this._spacing.x=t[0],this._spacing.y=t[1]}}computeMinMaxIntensities(){for(let t=0;t<this._frame.length;t++){let e=this._frame[t].minMax[0];Number.isNaN(e)||(this._minMax[0]=Math.min(this._minMax[0],e));let i=this._frame[t].minMax[1];Number.isNaN(i)||(this._minMax[1]=Math.max(this._minMax[1],i))}}computeIJK2LPS(){this._ijk2LPS=l.default.ijk2LPS(this._xCosine,this._yCosine,this._zCosine,this._spacing,this._origin,this._regMatrix),this._lps2IJK=new n.a,this._lps2IJK.getInverse(this._ijk2LPS)}computeLPS2AABB(){this._aabb2LPS=l.default.aabb2LPS(this._xCosine,this._yCosine,this._zCosine,this._origin),this._lps2AABB=new n.a,this._lps2AABB.getInverse(this._aabb2LPS)}merge(t){return!!(this._stackID===t.stackID&&1===this._numberOfFrames&&1===t._numberOfFrames&&this._frame[0].columns===t.frame[0].columns&&this._frame[0].rows===t.frame[0].rows&&this._xCosine.equals(t.xCosine)&&this._yCosine.equals(t.yCosine)&&this._zCosine.equals(t.zCosine))&&this.mergeModels(this._frame,t.frame)}pack(){const t=this._dimensionsIJK.x*this._dimensionsIJK.y*this._dimensionsIJK.z;(8===this._bitsAllocated&&1===this._numberOfChannels||1===this._bitsAllocated)&&(this._packedPerPixel=4),16===this._bitsAllocated&&1===this._numberOfChannels&&(this._packedPerPixel=2);const e=this._textureSize*this._textureSize;let i=Math.ceil(t/(e*this._packedPerPixel)),n=0,r=this._packedPerPixel*e;r>t&&(r=t),this._textureUnits<i&&(console.warn("Insufficient number of supported textures. Some frames will not be packed."),i=this._textureUnits);for(let a=0;a<i;a++){const i=this._packTo8Bits(this._numberOfChannels,this._frame,this._textureSize,n,r);this._textureType=i.textureType,this._rawData.push(i.data),n+=this._packedPerPixel*e,(r+=this._packedPerPixel*e)>t&&(r=t)}this._packed=!0}_packTo8Bits(t,e,i,n,r){const s={textureType:null,data:null},o=e[0].bitsAllocated,l=e[0].pixelType;let c=0;this._minMax[0]<0&&(c-=this._minMax[0]);let u=0,d=0,f=0;const p=e[0].rows*e[0].columns;if(8===o&&1===t||1===o){let t=new Uint8Array(i*i*4),o=0,l=0;for(let i=n;i<r;i++){f=i%p;let n=e[d=~~(i/p)].pixelData[f]+c;Number.isNaN(n)||(t[4*o+l]=n),u++,o=Math.floor(u/4),l=u%4}s.textureType=a.a,s.data=t}else if(16===o&&1===t){let t=new Uint8Array(i*i*4),o=0,l=0;for(let i=n;i<r;i++){f=i%p;let n=e[d=~~(i/p)].pixelData[f]+c;Number.isNaN(n)||(t[4*o+2*l]=255&n,t[4*o+2*l+1]=n>>>8&255),u++,o=Math.floor(u/2),l=u%2}s.textureType=a.a,s.data=t}else if(32===o&&1===t&&0===l){let t=new Uint8Array(i*i*4);for(let i=n;i<r;i++){f=i%p;let n=e[d=~~(i/p)].pixelData[f]+c;Number.isNaN(n)||(t[4*u]=255&n,t[4*u+1]=n>>>8&255,t[4*u+2]=n>>>16&255,t[4*u+3]=n>>>24&255),u++}s.textureType=a.a,s.data=t}else if(32===o&&1===t&&1===l){let t=new Uint8Array(i*i*4);for(let i=n;i<r;i++){f=i%p;let n=e[d=~~(i/p)].pixelData[f]+c;if(!Number.isNaN(n)){let e=h(n).match(/.{1,8}/g);t[4*u]=parseInt(e[0],2),t[4*u+1]=parseInt(e[1],2),t[4*u+2]=parseInt(e[2],2),t[4*u+3]=parseInt(e[3],2)}u++}s.textureType=a.a,s.data=t}else if(8===o&&3===t){let t=new Uint8Array(i*i*3);for(let i=n;i<r;i++)d=~~(i/p),f=i%p,t[3*u]=e[d].pixelData[3*f],t[3*u+1]=e[d].pixelData[3*f+1],t[3*u+2]=e[d].pixelData[3*f+2],u++;s.textureType=a.b,s.data=t}return s}worldCenter(){return this._halfDimensionsIJK.clone().addScalar(-.5).applyMatrix4(this._ijk2LPS)}worldBoundingBox(){let t=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];const e=this._dimensionsIJK;for(let i=0;i<=e.x;i+=e.x)for(let n=0;n<=e.y;n+=e.y)for(let a=0;a<=e.z;a+=e.z){let e=new r.a(i,n,a).applyMatrix4(this._ijk2LPS);t=[Math.min(t[0],e.x),Math.max(t[1],e.x),Math.min(t[2],e.y),Math.max(t[3],e.y),Math.min(t[4],e.z),Math.max(t[5],e.z)]}return t}AABBox(){let t=(new r.a).addScalar(-.5).applyMatrix4(this._ijk2LPS).applyMatrix4(this._lps2AABB),e=this._dimensionsIJK.clone().addScalar(-.5).applyMatrix4(this._ijk2LPS).applyMatrix4(this._lps2AABB);return new r.a(Math.abs(t.x-e.x),Math.abs(t.y-e.y),Math.abs(t.z-e.z))}centerAABBox(){let t=this.worldCenter();return t.applyMatrix4(this._lps2AABB),t}static indexInDimensions(t,e){return t.x>=0&&t.y>=0&&t.z>=0&&t.x<e.x&&t.y<e.y&&t.z<e.z}_arrayToVector3(t,e){return new r.a(t[e],t[e+1],t[e+2])}_orderFrameOnDimensionIndicesArraySort(t,e){if("dimensionIndexValues"in t&&"[object Array]"===Object.prototype.toString.call(t.dimensionIndexValues)&&"dimensionIndexValues"in e&&"[object Array]"===Object.prototype.toString.call(e.dimensionIndexValues))for(let i=0;i<t.dimensionIndexValues.length;i++){if(parseInt(t.dimensionIndexValues[i],10)>parseInt(e.dimensionIndexValues[i],10))return 1;if(parseInt(t.dimensionIndexValues[i],10)<parseInt(e.dimensionIndexValues[i],10))return-1}else window.console.warn("One of the frames doesn't have a dimensionIndexValues array."),window.console.warn(t),window.console.warn(e);return 0}_computeDistanceArrayMap(t,e){return e.imagePosition&&(e.dist=e.imagePosition[0]*t.x+e.imagePosition[1]*t.y+e.imagePosition[2]*t.z),e}_sortDistanceArraySort(t,e){return t.dist-e.dist}_sortInstanceNumberArraySort(t,e){return t.instanceNumber-e.instanceNumber}_sortSopInstanceUIDArraySort(t,e){return t.sopInstanceUID-e.sopInstanceUID}set numberOfChannels(t){this._numberOfChannels=t}get numberOfChannels(){return this._numberOfChannels}set frame(t){this._frame=t}get frame(){return this._frame}set prepared(t){this._prepared=t}get prepared(){return this._prepared}set packed(t){this._packed=t}get packed(){return this._packed}set packedPerPixel(t){this._packedPerPixel=t}get packedPerPixel(){return this._packedPerPixel}set dimensionsIJK(t){this._dimensionsIJK=t}get dimensionsIJK(){return this._dimensionsIJK}set halfDimensionsIJK(t){this._halfDimensionsIJK=t}get halfDimensionsIJK(){return this._halfDimensionsIJK}set regMatrix(t){this._regMatrix=t}get regMatrix(){return this._regMatrix}set ijk2LPS(t){this._ijk2LPS=t}get ijk2LPS(){return this._ijk2LPS}set lps2IJK(t){this._lps2IJK=t}get lps2IJK(){return this._lps2IJK}set lps2AABB(t){this._lps2AABB=t}get lps2AABB(){return this._lps2AABB}set textureSize(t){this._textureSize=t}get textureSize(){return this._textureSize}set textureUnits(t){this._textureUnits=t}get textureUnits(){return this._textureUnits}set textureType(t){this._textureType=t}get textureType(){return this._textureType}set bitsAllocated(t){this._bitsAllocated=t}get bitsAllocated(){return this._bitsAllocated}set rawData(t){this._rawData=t}get rawData(){return this._rawData}get windowWidth(){return this._windowWidth}set windowWidth(t){this._windowWidth=t}get windowCenter(){return this._windowCenter}set windowCenter(t){this._windowCenter=t}get rescaleSlope(){return this._rescaleSlope}set rescaleSlope(t){this._rescaleSlope=t}get rescaleIntercept(){return this._rescaleIntercept}set rescaleIntercept(t){this._rescaleIntercept=t}get xCosine(){return this._xCosine}set xCosine(t){this._xCosine=t}get yCosine(){return this._yCosine}set yCosine(t){this._yCosine=t}get zCosine(){return this._zCosine}set zCosine(t){this._zCosine=t}get minMax(){return this._minMax}set minMax(t){this._minMax=t}get stackID(){return this._stackID}set stackID(t){this._stackID=t}get pixelType(){return this._pixelType}set pixelType(t){this._pixelType=t}get pixelRepresentation(){return this._pixelRepresentation}set pixelRepresentation(t){this._pixelRepresentation=t}set invert(t){this._invert=t}get invert(){return this._invert}set modality(t){this._modality=t}get modality(){return this._modality}get rightHanded(){return this._rightHanded}set rightHanded(t){this._rightHanded=t}get spacingBetweenSlices(){return this._spacingBetweenSlices}set spacingBetweenSlices(t){this._spacingBetweenSlices=t}set segmentationSegments(t){this._segmentationSegments=t}get segmentationSegments(){return this._segmentationSegments}set segmentationType(t){this._segmentationType=t}get segmentationType(){return this._segmentationType}set segmentationLUT(t){this._segmentationLUT=t}get segmentationLUT(){return this._segmentationLUT}set segmentationLUTO(t){this._segmentationLUTO=t}get segmentationLUTO(){return this._segmentationLUTO}static value(t,e){return window.console.warn("models.stack.value is deprecated.\n       Please use core.utils.value instead."),l.default.value(t,e)}static valueRescaleSlopeIntercept(t,e,i){return window.console.warn("models.stack.valueRescaleSlopeIntercept is deprecated.\n       Please use core.utils.rescaleSlopeIntercept instead."),l.default.rescaleSlopeIntercept(t,e,i)}static worldToData(t,e){return window.console.warn("models.stack.worldToData is deprecated.\n       Please use core.utils.worldToData instead."),l.default.worldToData(t._lps2IJK,e)}}},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(13),r=i(0);class a extends n.a{constructor(){super(),this._sopInstanceUID=null,this._url=null,this._stackID=-1,this._invert=!1,this._frameTime=null,this._ultrasoundRegions=[],this._rows=0,this._columns=0,this._dimensionIndexValues=[],this._imagePosition=null,this._imageOrientation=null,this._rightHanded=!0,this._sliceThickness=1,this._spacingBetweenSlices=null,this._pixelPaddingValue=null,this._pixelRepresentation=0,this._pixelType=0,this._pixelSpacing=null,this._pixelAspectRatio=null,this._pixelData=null,this._instanceNumber=null,this._windowCenter=null,this._windowWidth=null,this._rescaleSlope=null,this._rescaleIntercept=null,this._bitsAllocated=8,this._numberOfChannels=1,this._minMax=null,this._dist=null,this._index=-1,this._referencedSegmentNumber=-1}validate(t){return!!(super.validate(t)&&"function"==typeof t.cosines&&"function"==typeof t.spacingXY&&t.hasOwnProperty("_sopInstanceUID")&&t.hasOwnProperty("_dimensionIndexValues")&&t.hasOwnProperty("_imageOrientation")&&t.hasOwnProperty("_imagePosition"))}merge(t){return!!this.validate(t)&&!!(this._compareArrays(this._dimensionIndexValues,t.dimensionIndexValues)&&this._compareArrays(this._imageOrientation,t.imageOrientation)&&this._compareArrays(this._imagePosition,t.imagePosition)&&this._instanceNumber===t.instanceNumber&&this._sopInstanceUID===t.sopInstanceUID)}cosines(){let t=[new r.a(1,0,0),new r.a(0,1,0),new r.a(0,0,1)];if(this._imageOrientation&&6===this._imageOrientation.length){let e=new r.a(this._imageOrientation[0],this._imageOrientation[1],this._imageOrientation[2]),i=new r.a(this._imageOrientation[3],this._imageOrientation[4],this._imageOrientation[5]);e.length()>0&&i.length()>0&&(t[0]=e,t[1]=i,t[2]=new r.a(0,0,0).crossVectors(t[0],t[1]).normalize())}else window.console.log("No valid image orientation for frame"),window.console.log(this),window.console.log("Returning default orientation.");return this._rightHanded||t[2].negate(),t}spacingXY(){let t=[1,1];return this.pixelSpacing?(t[0]=this.pixelSpacing[0],t[1]=this.pixelSpacing[1]):this.pixelAspectRatio&&(t[0]=1,t[1]=1*this.pixelAspectRatio[1]/this.pixelAspectRatio[0]),t}getPixelData(t,e){return t>=0&&t<this._columns&&e>=0&&e<this._rows?this.pixelData[t+this._columns*e]:null}setPixelData(t,e,i){this.pixelData[t+this._columns*e]=i}getImageDataUrl(){const t=document.createElement("canvas");t.width=this._columns,t.height=this._rows;const e=t.getContext("2d"),i=e.createImageData(t.width,t.height);return i.data.set(this._frameToCanvas()),e.putImageData(i,0,0),t.toDataURL()}_frameToCanvas(){const t=this._columns*this._rows,e={invert:this._invert,min:this._minMax[0],padding:this._pixelPaddingValue};let i=new Uint8Array(4*t);if(null!==e.padding){e.min=this._minMax[1];for(let t=0,i=this._pixelData.length;t<i;t++)this._pixelData[t]!==e.padding&&(e.min=Math.min(e.min,this._pixelData[t]))}if(this._windowWidth&&null!==this._windowCenter){const t=this._rescaleIntercept||0,i=this._rescaleSlope||1;e.min=Math.max((this._windowCenter-this._windowWidth/2-t)/i,e.min),e.max=Math.min((this._windowCenter+this._windowWidth/2-t)/i,this._minMax[1])}else e.max=this._minMax[1];if(e.range=e.max-e.min||255,1===this._numberOfChannels)for(let n=0;n<t;n++){const t=this._pixelTo8Bit(this._pixelData[n],e);i[4*n]=t,i[4*n+1]=t,i[4*n+2]=t,i[4*n+3]=255}else if(3===this._numberOfChannels)for(let n=0;n<t;n++)i[4*n]=this._pixelTo8Bit(this._pixelData[3*n],e),i[4*n+1]=this._pixelTo8Bit(this._pixelData[3*n+1],e),i[4*n+2]=this._pixelTo8Bit(this._pixelData[3*n+2],e),i[4*n+3]=255;return i}_pixelTo8Bit(t,e){let i=t<=e.min||t===e.padding?0:255;return t>e.min&&t<e.max&&(i=Math.round(255*(t-e.min)/e.range)),Number.isNaN(i)?0:e.invert?255-i:i}_compareArrays(t,e){return t===e||!(!t||!e||t.join()!==e.join())}get frameTime(){return this._frameTime}set frameTime(t){this._frameTime=t}get ultrasoundRegions(){return this._ultrasoundRegions}set ultrasoundRegions(t){this._ultrasoundRegions=t}get rows(){return this._rows}set rows(t){this._rows=t}get columns(){return this._columns}set columns(t){this._columns=t}get spacingBetweenSlices(){return this._spacingBetweenSlices}set spacingBetweenSlices(t){this._spacingBetweenSlices=t}get sliceThickness(){return this._sliceThickness}set sliceThickness(t){this._sliceThickness=t}get imagePosition(){return this._imagePosition}set imagePosition(t){this._imagePosition=t}get imageOrientation(){return this._imageOrientation}set imageOrientation(t){this._imageOrientation=t}get windowWidth(){return this._windowWidth}set windowWidth(t){this._windowWidth=t}get windowCenter(){return this._windowCenter}set windowCenter(t){this._windowCenter=t}get rescaleSlope(){return this._rescaleSlope}set rescaleSlope(t){this._rescaleSlope=t}get rescaleIntercept(){return this._rescaleIntercept}set rescaleIntercept(t){this._rescaleIntercept=t}get bitsAllocated(){return this._bitsAllocated}set bitsAllocated(t){this._bitsAllocated=t}get dist(){return this._dist}set dist(t){this._dist=t}get pixelSpacing(){return this._pixelSpacing}set pixelSpacing(t){this._pixelSpacing=t}get pixelAspectRatio(){return this._pixelAspectRatio}set pixelAspectRatio(t){this._pixelAspectRatio=t}get minMax(){return this._minMax}set minMax(t){this._minMax=t}get dimensionIndexValues(){return this._dimensionIndexValues}set dimensionIndexValues(t){this._dimensionIndexValues=t}get instanceNumber(){return this._instanceNumber}set instanceNumber(t){this._instanceNumber=t}get pixelData(){return this._pixelData}set pixelData(t){this._pixelData=t}set sopInstanceUID(t){this._sopInstanceUID=t}get sopInstanceUID(){return this._sopInstanceUID}get pixelPaddingValue(){return this._pixelPaddingValue}set pixelPaddingValue(t){this._pixelPaddingValue=t}get pixelRepresentation(){return this._pixelRepresentation}set pixelRepresentation(t){this._pixelRepresentation=t}get pixelType(){return this._pixelType}set pixelType(t){this._pixelType=t}get url(){return this._url}set url(t){this._url=t}get referencedSegmentNumber(){return this._referencedSegmentNumber}set referencedSegmentNumber(t){this._referencedSegmentNumber=t}get rightHanded(){return this._rightHanded}set rightHanded(t){this._rightHanded=t}get index(){return this._index}set index(t){this._index=t}get invert(){return this._invert}set invert(t){this._invert=t}get numberOfChannels(){return this._numberOfChannels}set numberOfChannels(t){this._numberOfChannels=t}}},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i(10),r=i(45),a=i.n(r);class s extends n.a{constructor(t,e){if(super(),this._id=e,this._arrayBuffer=t.buffer,this._url=t.url,this._dataSet=null,this._niftiHeader=null,this._niftiImage=null,this._ordered=!0,this._orderedData=null,this._qfac=1,!a.a.isNIFTI(this._arrayBuffer)){throw new Error("parsers.nifti could not parse the file")}this._dataSet=a.a.readHeader(this._arrayBuffer),this._niftiImage=a.a.readImage(this._dataSet,this._arrayBuffer)}seriesInstanceUID(){return this._url}numberOfFrames(){return this._dataSet.dims[3]}numberOfChannels(){let t=1;return this._dataSet.dims[0]>=5?(t=this._dataSet.dims[5],this._ordered=!1):128===this._dataSet.datatypeCode?t=3:2304===this._dataSet.datatypeCode&&(t=4),t}sopInstanceUID(t=0){return t}rows(t=0){return this._dataSet.dims[2]}columns(t=0){return this._dataSet.dims[1]}pixelType(t=0){let e=0;return 16!==this._dataSet.datatypeCode&&64!==this._dataSet.datatypeCode&&1536!==this._dataSet.datatypeCode||(e=1),e}bitsAllocated(t=0){return this._dataSet.numBitsPerVoxel}pixelSpacing(t=0){return[this._dataSet.pixDims[1],this._dataSet.pixDims[2],this._dataSet.pixDims[3]]}sliceThickness(){return null}imageOrientation(t=0){if(this._dataSet.qform_code>0){let t=0,e=this._dataSet.quatern_b,i=this._dataSet.quatern_c,n=this._dataSet.quatern_d;return(t=1-(e*e+i*i+n*n))<1e-7?(e*=t=1/Math.sqrt(e*e+i*i+n*n),i*=t,n*=t,t=0):t=Math.sqrt(t),this._dataSet.pixDims[0]<0&&(this._rightHanded=!1),[-(t*t+e*e-i*i-n*n),-2*(e*i+t*n),2*(e*n-t*i),-2*(e*i-t*n),-(t*t+i*i-e*e-n*n),2*(i*n+t*e)]}if(this._dataSet.sform_code>0){const t=[-this._dataSet.affine[0][0],-this._dataSet.affine[0][1],this._dataSet.affine[0][2]],e=[-this._dataSet.affine[1][0],-this._dataSet.affine[1][1],this._dataSet.affine[0][2]];return[...t,...e]}return this._dataSet.qform_code,[1,0,0,0,1,0]}imagePosition(t=0){return[-this._dataSet.qoffset_x,-this._dataSet.qoffset_y,this._dataSet.qoffset_z]}dimensionIndexValues(t=0){return null}instanceNumber(t=0){return t}windowCenter(t=0){return null}windowWidth(t=0){return null}rescaleSlope(t=0){return this._dataSet.scl_slope}rescaleIntercept(t=0){return this._dataSet.scl_inter}extractPixelData(t=0){return this._decompressUncompressed(t)}_decompressUncompressed(t=0){let e=this.numberOfChannels(),i=this.rows(t)*this.columns(t)*e,n=t*i,r=this._niftiImage;if(this._ordered||null!==this._orderedData||this._reorderData(),null!==this._orderedData)return this._orderedData.slice(n,n+i);if(2===this._dataSet.datatypeCode)return new Uint8Array(r,n,i);if(256===this._dataSet.datatypeCode)return new Int8Array(r,n,i);if(512===this._dataSet.datatypeCode)return n*=2,new Uint16Array(r,n,i);if(4===this._dataSet.datatypeCode)return n*=2,new Int16Array(r,n,i);if(8===this._dataSet.datatypeCode)return n*=4,new Int32Array(r,n,i);if(16===this._dataSet.datatypeCode){n*=4;const t=new Float32Array(r,n,i);for(let e=0;e<t.length;e++)t[e]!==1/0&&t[e]!==-1/0||(t[e]=0);return t}window.console.warn(`Unknown data type: datatypeCode : ${this._dataSet.datatypeCode}`)}_reorderData(){let t=this.numberOfChannels(),e=this.rows()*this.columns()*t,i=this._niftiImage,n=e*this.numberOfFrames(),r=null;this._orderedData=null,2===this._dataSet.datatypeCode?(r=new Uint8Array(i,0,n),this._orderedData=new Uint8Array(r.length)):256===this._dataSet.datatypeCode?(r=new Int8Array(i,0,n),this._orderedData=new Int8Array(r.length)):512===this._dataSet.datatypeCode?(r=new Uint16Array(i,0,n),this._orderedData=new Uint16Array(r.length)):4===this._dataSet.datatypeCode?(r=new Int16Array(i,0,n),this._orderedData=new Int16Array(r.length)):16===this._dataSet.datatypeCode&&(r=new Float32Array(i,0,n),this._orderedData=new Float32Array(r.length));let a=r.length/3,s=0,o=0,l=a,c=2*a;for(let t=0;t<a;t++)this._orderedData[s++]=r[o++],this._orderedData[s++]=r[l++],this._orderedData[s++]=r[c++];this._ordered=!0}}},function(t,e,i){"use strict";i.d(e,"a",function(){return d});var n=i(1),r=i(10),a=i(78),s=i(114);let o,l=i(151),c=i(152),h=i(154),u=i(155);class d extends r.a{constructor(t,e){super(),this._id=e,this._arrayBuffer=t.buffer;let i=new Uint8Array(this._arrayBuffer);this._dataSet=null;try{this._dataSet=l.parseDicom(i)}catch(t){throw console.log(t),new Error("parsers.dicom could not parse the file")}}seriesInstanceUID(){return this._dataSet.string("x0020000e")}studyInstanceUID(){return this._dataSet.string("x0020000d")}modality(){return this._dataSet.string("x00080060")}segmentationType(){return this._dataSet.string("x00620001")}segmentationSegments(){let t=[],e=this._dataSet.elements.x00620002;if(!e)return t;for(let i=0;i<e.items.length;i++){let n=this._recommendedDisplayCIELab(e.items[i]),r=this._segmentationCode(e.items[i]),a=e.items[i].dataSet.uint16("x00620004"),s=e.items[i].dataSet.string("x00620005"),o=e.items[i].dataSet.string("x00620008");t.push({recommendedDisplayCIELab:n,segmentationCodeDesignator:r.segmentationCodeDesignator,segmentationCodeValue:r.segmentationCodeValue,segmentationCodeMeaning:r.segmentationCodeMeaning,segmentNumber:a,segmentLabel:s,segmentAlgorithmType:o})}return t}_segmentationCode(t){let e="unknown",i="unknown",n="unknown",r=t.dataSet.elements.x00082218;return r&&r.items&&r.items.length>0&&(e=r.items[0].dataSet.string("x00080102"),i=r.items[0].dataSet.string("x00080100"),n=r.items[0].dataSet.string("x00080104")),{segmentationCodeDesignator:e,segmentationCodeValue:i,segmentationCodeMeaning:n}}_recommendedDisplayCIELab(t){if(!t.dataSet.elements.x0062000d)return null;let e=t.dataSet.elements.x0062000d.dataOffset,i=t.dataSet.elements.x0062000d.length,n=t.dataSet.byteArray.slice(e,e+i),r=new Uint16Array(i/2);for(let t=0;t<i/2;t++)r[t]=(n[2*t+1]<<8)+n[2*t];return[r[0]/65535*100,r[1]/65535*255-128,r[2]/65535*255-128]}rawHeader(){return this._dataSet}sopInstanceUID(t=0){return this._findStringEverywhere("x2005140f","x00080018",t)}transferSyntaxUID(){return this._dataSet.string("x00020010")}studyDate(){return this._dataSet.string("x00080020")}studyDescription(){return this._dataSet.string("x00081030")}seriesDate(){return this._dataSet.string("x00080021")}seriesDescription(){return this._dataSet.string("x0008103e")}patientName(){return this._dataSet.string("x00100010")}patientID(){return this._dataSet.string("x00100020")}patientBirthdate(){return this._dataSet.string("x00100030")}patientSex(){return this._dataSet.string("x00100040")}patientAge(){return this._dataSet.string("x00101010")}photometricInterpretation(){return this._dataSet.string("x00280004")}planarConfiguration(){let t=this._dataSet.uint16("x00280006");return void 0===t&&(t=null),t}samplesPerPixel(){return this._dataSet.uint16("x00280002")}numberOfFrames(){let t=this._dataSet.intString("x00280008");return void 0===t&&(t=null),t}numberOfChannels(){let t=1,e=this.photometricInterpretation();return"RGB"!==e&&"PALETTE COLOR"!==e&&"YBR_FULL"!==e&&"YBR_FULL_422"!==e&&"YBR_PARTIAL_422"!==e&&"YBR_PARTIAL_420"!==e&&"YBR_RCT"!==e||(t=3),t}invert(){return"MONOCHROME1"===this.photometricInterpretation()}imageOrientation(t=0){let e=this._findStringEverywhere("x00209116","x00200037",t);return e&&(e=e.split("\\").map(n.default.stringToNumber)),e}referencedSegmentNumber(t=0){let e=-1,i=this._findInGroupSequence("x52009230","x0062000a",t);return null!==i&&(e=i.uint16("x0062000b")),e}pixelAspectRatio(){let t=[this._dataSet.intString("x00280034",0),this._dataSet.intString("x00280034",1)];return void 0===t[0]&&(t=null),t}imagePosition(t=0){let e=this._findStringEverywhere("x00209113","x00200032",t);return e&&(e=e.split("\\").map(n.default.stringToNumber)),e}instanceNumber(t=0){let e=null,i=this._dataSet.elements.x52009230;if(void 0!==i)if(i.items[t].dataSet.elements.x2005140f){e=i.items[t].dataSet.elements.x2005140f.items[0].dataSet.intString("x00200013")}else void 0===(e=this._dataSet.intString("x00200013"))&&(e=null);else void 0===(e=this._dataSet.intString("x00200013"))&&(e=null);return e}pixelSpacing(t=0){let e=this._findStringEverywhere("x00289110","x00280030",t);if(null===e&&void 0===(e=this._dataSet.string("x00181164"))&&(e=null),e){const t=e.split("\\");2!==t.length?(console.error(`DICOM spacing format is not supported (could not split string on "\\"): ${e}`),e=null):e=t.map(n.default.stringToNumber)}return e}ultrasoundRegions(t=0){const e=this._dataSet.elements.x00186011;if(!e||!e.items)return[];const i=[];return e.items.forEach(t=>{i.push({x0:t.dataSet.uint32("x00186018"),y0:t.dataSet.uint32("x0018601a"),x1:t.dataSet.uint32("x0018601c"),y1:t.dataSet.uint32("x0018601e"),axisX:t.dataSet.int32("x00186020")||null,axisY:t.dataSet.int32("x00186022")||null,unitsX:this._getUnitsName(t.dataSet.uint16("x00186024")),unitsY:this._getUnitsName(t.dataSet.uint16("x00186026")),deltaX:t.dataSet.double("x0018602c"),deltaY:t.dataSet.double("x0018602e")})}),i}frameTime(t=0){let e,i=this._dataSet.uint16("x00280009",1),n=this._dataSet.intString("x00082144");return"number"==typeof i&&(i=i.toString(16),e=this._dataSet.floatString("x0018"+i)),void 0===e&&"number"==typeof n&&(e=1e3/n),void 0===e&&(e=null),e}rows(t=0){let e=this._dataSet.uint16("x00280010");return void 0===e&&(e=null),e}columns(t=0){let e=this._dataSet.uint16("x00280011");return void 0===e&&(e=null),e}pixelType(t=0){return 0}pixelRepresentation(t=0){return this._dataSet.uint16("x00280103")}pixelPaddingValue(t=0){let e=this._dataSet.int16("x00280120");return void 0===e&&(e=null),e}bitsAllocated(t=0){return this._dataSet.uint16("x00280100")}highBit(t=0){return this._dataSet.uint16("x00280102")}rescaleIntercept(t=0){return this._findFloatStringInFrameGroupSequence("x00289145","x00281052",t)}rescaleSlope(t=0){return this._findFloatStringInFrameGroupSequence("x00289145","x00281053",t)}windowCenter(t=0){return this._findFloatStringInFrameGroupSequence("x00289132","x00281050",t)}windowWidth(t=0){return this._findFloatStringInFrameGroupSequence("x00289132","x00281051",t)}sliceThickness(t=0){return this._findFloatStringInFrameGroupSequence("x00289110","x00180050",t)}spacingBetweenSlices(t=0){let e=this._dataSet.floatString("x00180088");return void 0===e&&(e=null),e}dimensionIndexValues(t=0){let e=null,i=this._dataSet.elements.x52009230;if(void 0!==i){let n=i.items[t].dataSet.elements.x00209111;if(void 0!==n&&null!==n){let t=(n=n.items[0].dataSet).elements.x00209157;if(void 0!==t&&null!==t){let i=t.length/4;e=[];for(let t=0;t<i;t++)e.push(n.uint32("x00209157",t))}}}return e}inStackPositionNumber(t=0){let e=null,i=this._dataSet.elements.x52009230;if(void 0!==i){e=i.items[t].dataSet.elements.x00209111.items[0].dataSet.uint32("x00209057")}else e=null;return e}stackID(t=0){let e=null,i=this._dataSet.elements.x52009230;if(void 0!==i){e=i.items[t].dataSet.elements.x00209111.items[0].dataSet.intString("x00209056")}else e=null;return e}extractPixelData(t=0){let e=this._decodePixelData(t);return this.numberOfChannels()>1?this._convertColorSpace(e):e}_findInGroupSequence(t,e,i){let n=this._dataSet.elements[t];if(void 0!==n){let t=n.items[i].dataSet.elements[e];if(void 0!==t)return t.items[0].dataSet}return null}_findStringInGroupSequence(t,e,i,n){let r=this._findInGroupSequence(t,e,n);return null!==r?r.string(i):null}_findStringInFrameGroupSequence(t,e,i){return this._findStringInGroupSequence("x52009229",t,e,0)||this._findStringInGroupSequence("x52009230",t,e,i)}_findStringEverywhere(t,e,i){let n=this._findStringInFrameGroupSequence(t,e,i);if(null===n){const t="x00540022";n=this._findStringInSequence(t,e)}return null===n&&(n=this._dataSet.string(e)),void 0===n&&(n=null),n}_findStringInSequence(t,e,i){const n=this._dataSet.elements[t];let r;return n&&(r=n.items[0].dataSet.string(e)),void 0===r&&(r=null),r}_findFloatStringInGroupSequence(t,e,i,n){let r=this._dataSet.floatString(i);return void 0===r&&null!==(r=this._findInGroupSequence(t,e,n))?r.floatString(i):r}_findFloatStringInFrameGroupSequence(t,e,i){return this._findFloatStringInGroupSequence("x52009229",t,e,0)||this._findFloatStringInGroupSequence("x52009230",t,e,i)}_decodePixelData(t=0){let e=this.transferSyntaxUID();if("1.2.840.10008.1.2.4.90"===e||"1.2.840.10008.1.2.4.91"===e)return this._decodeJ2K(t);if("1.2.840.10008.1.2.5"===e)return this._decodeRLE(t);if("1.2.840.10008.1.2.4.57"===e||"1.2.840.10008.1.2.4.70"===e)return this._decodeJPEGLossless(t);if("1.2.840.10008.1.2.4.50"===e||"1.2.840.10008.1.2.4.51"===e)return this._decodeJPEGBaseline(t);if("1.2.840.10008.1.2"===e||"1.2.840.10008.1.2.1"===e)return this._decodeUncompressed(t);if("1.2.840.10008.1.2.2"===e){let e=this._decodeUncompressed(t);return this._swapFrame(e)}throw{error:`no decoder for transfer syntax ${e}`}}framesAreFragmented(){return this._dataSet.intString("x00280008")!==this._dataSet.elements.x7fe00010.fragments.length}getEncapsulatedImageFrame(t){return this._dataSet.elements.x7fe00010&&this._dataSet.elements.x7fe00010.basicOffsetTable.length?l.readEncapsulatedImageFrame(this._dataSet,this._dataSet.elements.x7fe00010,t):this.framesAreFragmented()?l.readEncapsulatedImageFrame(this._dataSet,this._dataSet.elements.x7fe00010,t,l.createJPEGBasicOffsetTable(this._dataSet,this._dataSet.elements.x7fe00010)):l.readEncapsulatedPixelDataFromFragments(this._dataSet,this._dataSet.elements.x7fe00010,t)}_decodeJpx(t=0){const e=new u;if(e.parse(this.getEncapsulatedImageFrame(t)),1!==e.componentsCount)throw new Error("JPEG2000 decoder returned a componentCount of ${componentsCount}, when 1 is expected");if(1!==e.tiles.length)throw new Error("JPEG2000 decoder returned a tileCount of ${tileCount}, when 1 is expected");return e.tiles[0].items}_decodeOpenJPEG(t=0){const e=this.getEncapsulatedImageFrame(t),i=this.bitsAllocated(t)<=8?1:2,n=1===this.pixelRepresentation(t),r=o._malloc(e.length);o.writeArrayToMemory(e,r);const a=o._malloc(4),s=o._malloc(4),l=o._malloc(4),c=o._malloc(4),h=o._malloc(4),u=o.ccall("jp2_decode","number",["number","number","number","number","number","number","number"],[r,e.length,a,s,l,c,h]),d=o.getValue(a,"*");if(0!==u)return console.log("[opj_decode] decoding failed!"),o._free(r),o._free(d),o._free(l),o._free(c),o._free(s),void o._free(h);const f=o.getValue(l,"i32")*o.getValue(c,"i32")*o.getValue(h,"i32"),p=new Int32Array(o.HEAP32.buffer,d,f);let m;if(1===i)if(Uint8Array.from)m=Uint8Array.from(p);else{m=new Uint8Array(f);for(let t=0;t<f;t++)m[t]=p[t]}else if(n)if(Int16Array.from)m=Int16Array.from(p);else{m=new Int16Array(f);for(let t=0;t<f;t++)m[t]=p[t]}else if(Uint16Array.from)m=Uint16Array.from(p);else{m=new Uint16Array(f);for(let t=0;t<f;t++)m[t]=p[t]}return o._free(r),o._free(a),o._free(d),o._free(s),o._free(l),o._free(c),o._free(h),m}_decodeJ2K(t=0){return void 0===a?this._decodeJpx(t):o||(o=a())&&o._jp2_decode?this._decodeOpenJPEG(t):this._decodeJpx(t)}_decodeRLE(t=0){const e=this.bitsAllocated(t),i=this.planarConfiguration(),n=this.columns(),r=this.rows(),a=this.samplesPerPixel(t),o={pixelRepresentation:this.pixelRepresentation(t),bitsAllocated:e,planarConfiguration:i,columns:n,rows:r,samplesPerPixel:a},c=l.readEncapsulatedPixelDataFromFragments(this._dataSet,this._dataSet.elements.x7fe00010,t);return Object(s.a)(o,c).pixelData}_decodeJPEGLossless(t=0){let e=this.getEncapsulatedImageFrame(t),i=this.pixelRepresentation(t),n=this.bitsAllocated(t)<=8?1:2,r=(new c.lossless.Decoder).decode(e.buffer,e.byteOffset,e.length,n);return 0===i?2===n?new Uint16Array(r.buffer):new Uint8Array(r.buffer):new Int16Array(r.buffer)}_decodeJPEGBaseline(t=0){let e=this.getEncapsulatedImageFrame(t),i=this.rows(t),n=this.columns(t),r=this.bitsAllocated(t),a=new h;return a.parse(e),8===r?a.getData(n,i):16===r?a.getData16(n,i):void 0}_decodeUncompressed(t=0){let e=this.pixelRepresentation(t),i=this.bitsAllocated(t),n=this._dataSet.elements.x7fe00010.dataOffset,r=this.numberOfChannels(),a=this.rows(t)*this.columns(t)*r,s=0,o=this._dataSet.byteArray.buffer;if(0===e&&8===i)return s=n+t*a,new Uint8Array(o,s,a);if(0===e&&16===i)return s=n+t*a*2,new Uint16Array(o,s,a);if(1===e&&16===i)return s=n+t*a*2,new Int16Array(o,s,a);if(0===e&&32===i)return s=n+t*a*4,new Uint32Array(o,s,a);if(0===e&&1===i){let e=new ArrayBuffer(a),i=new Uint8Array(e);s=n+t*a;let r=0,l=t*a,c=t*a+a,h=Math.floor(l/8),u=l-8*h,d=Math.ceil(c/8),f=new Uint8Array(o,n);for(let t=h;t<=d;t++){for(;u<8;){switch(u){case 0:i[r]=1&f[t];break;case 1:i[r]=f[t]>>>1&1;break;case 2:i[r]=f[t]>>>2&1;break;case 3:i[r]=f[t]>>>3&1;break;case 4:i[r]=f[t]>>>4&1;break;case 5:i[r]=f[t]>>>5&1;break;case 6:i[r]=f[t]>>>6&1;break;case 7:i[r]=f[t]>>>7&1}if(u++,++r>=a)return i}u=0}}}_interpretAsRGB(t){return-1!==["RGB","YBR_RCT","YBR_ICT","YBR_FULL_422"].indexOf(t)}_convertColorSpace(t){let e=null,i=this.photometricInterpretation(),n=this.planarConfiguration();null===n&&(n=0,window.console.log("Planar Configuration was not set and was defaulted to  0"));const r=this._interpretAsRGB(i);if(r&&0===n)e=t;else if(r&&1===n){if(t instanceof Int8Array)e=new Int8Array(t.length);else if(t instanceof Uint8Array)e=new Uint8Array(t.length);else if(t instanceof Int16Array)e=new Int16Array(t.length);else{if(!(t instanceof Uint16Array)){throw new Error(`unsuported typed array: ${t}`)}e=new Uint16Array(t.length)}let i=t.length/3,n=0,r=0,a=i,s=2*i;for(let o=0;o<i;o++)e[n++]=t[r++],e[n++]=t[a++],e[n++]=t[s++]}else{if("YBR_FULL"!==i){throw new Error(`photometric interpolation not supported: ${i}`)}{if(t instanceof Int8Array)e=new Int8Array(t.length);else if(t instanceof Uint8Array)e=new Uint8Array(t.length);else if(t instanceof Int16Array)e=new Int16Array(t.length);else{if(!(t instanceof Uint16Array)){throw new Error(`unsuported typed array: ${t}`)}e=new Uint16Array(t.length)}let i=t.length/3,n=0,r=0;for(let a=0;a<i;a++){let i=t[n++],a=t[n++],s=t[n++];e[r++]=i+1.402*(s-128),e[r++]=i-.34414*(a-128)-.71414*(s-128),e[r++]=i+1.772*(a-128)}}}return e}_swapFrame(t){let e=this.bitsAllocated();if(16===e)for(let e=0;e<t.length;e++)t[e]=this._swap16(t[e]);else if(32===e)for(let e=0;e<t.length;e++)t[e]=this._swap32(t[e]);return t}_getUnitsName(t){const e={0:"none",1:"percent",2:"dB",3:"cm",4:"seconds",5:"hertz",6:"dB/seconds",7:"cm/sec",8:"cm2",9:"cm2/sec",10:"cm3",11:"cm3/sec",12:"degrees"};return e.hasOwnProperty(t)?e[t]:"none"}}},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var n=i(10),r=i(0);let a=i(56),s=i(156);class o extends n.a{constructor(t,e){super(),this._id=e,this._arrayBuffer=t.buffer,this._url=t.url,this._dataSet=null,this._unpackedData=null;try{this._dataSet=s.parse(this._arrayBuffer)}catch(t){window.console.log("ooops... :(")}}rightHanded(){return this._dataSet.space.match(/^right-anterior-superior/)||this._dataSet.space.match(/^left-posterior-superior/)?this._rightHanded=!0:this._rightHanded=!1,this._rightHanded}seriesInstanceUID(){return this._url}numberOfFrames(){return this._dataSet.sizes[2]}numberOfChannels(){return 1}sopInstanceUID(t=0){return t}rows(t=0){return this._dataSet.sizes[1]}columns(t=0){return this._dataSet.sizes[0]}pixelType(t=0){let e=0;return"float"===this._dataSet.type&&(e=1),e}bitsAllocated(t=0){let e=1;return"int8"===this._dataSet.type||"uint8"===this._dataSet.type||"char"===this._dataSet.type?e=8:"int16"===this._dataSet.type||"uint16"===this._dataSet.type||"short"===this._dataSet.type?e=16:"int32"!==this._dataSet.type&&"uint32"!==this._dataSet.type&&"float"!==this._dataSet.type||(e=32),e}pixelSpacing(t=0){const e=new r.a(this._dataSet.spaceDirections[0][0],this._dataSet.spaceDirections[0][1],this._dataSet.spaceDirections[0][2]),i=new r.a(this._dataSet.spaceDirections[1][0],this._dataSet.spaceDirections[1][1],this._dataSet.spaceDirections[1][2]),n=new r.a(this._dataSet.spaceDirections[2][0],this._dataSet.spaceDirections[2][1],this._dataSet.spaceDirections[2][2]);return[e.length(),i.length(),n.length()]}imageOrientation(t=0){let e=this._dataSet.space.match(/right/)?-1:1,i=this._dataSet.space.match(/anterior/)?-1:1,n=new r.a(this._dataSet.spaceDirections[0][0]*e,this._dataSet.spaceDirections[0][1]*i,this._dataSet.spaceDirections[0][2]);n.normalize();let a=new r.a(this._dataSet.spaceDirections[1][0]*e,this._dataSet.spaceDirections[1][1]*i,this._dataSet.spaceDirections[1][2]);return a.normalize(),[n.x,n.y,n.z,a.x,a.y,a.z]}imagePosition(t=0){return[this._dataSet.spaceOrigin[0],this._dataSet.spaceOrigin[1],this._dataSet.spaceOrigin[2]]}extractPixelData(t=0){return this._decompressUncompressed(t)}_decompressUncompressed(t=0){let e=this._dataSet.buffer;const i=this.numberOfChannels(),n=this.rows(t)*this.columns(t)*i;this.rightHanded()||(t=this.numberOfFrames()-1-t);let r=t*n;if(null===this._unpackedData&&"gzip"===this._dataSet.encoding){let t=a.inflate(this._dataSet.buffer);this._unpackedData=t.buffer,e=this._unpackedData}else"gzip"===this._dataSet.encoding&&(e=this._unpackedData);return"int8"===this._dataSet.type||"char"===this._dataSet.type?new Int8Array(e,r,n):"uint8"===this._dataSet.type?new Uint8Array(e,r,n):"int16"===this._dataSet.type||"short"===this._dataSet.type?(r*=2,new Int16Array(e,r,n)):"uint16"===this._dataSet.type?(r*=2,new Uint16Array(e,r,n)):"int32"===this._dataSet.type?(r*=4,new Int32Array(e,r,n)):"uint32"===this._dataSet.type?(r*=4,new Uint32Array(e,r,n)):"float"===this._dataSet.type?(r*=4,new Float32Array(e,r,n)):void 0}}},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(10),r=i(0);class a extends n.a{constructor(t,e){if(super(),this._id=e,this._url=t.url,this._buffer=null,this._bufferPos=0,this._dataPos=0,this._pixelData=null,this._version=1,this._width=0,this._height=0,this._depth=0,this._nframes=0,this._type=a.MRI_UCHAR,this._dof=0,this._goodRASFlag=0,this._spacingXYZ=[1,1,1],this._Xras=[-1,0,0],this._Yras=[0,0,-1],this._Zras=[0,1,0],this._Cras=[0,0,0],this._tr=0,this._flipAngle=0,this._te=0,this._ti=0,this._fov=0,this._tags=[],this._origin=[0,0,0],this._imageOrient=[0,0,0,0,0,0],this._buffer=t.buffer,this._version=this._readInt(),this._swapEndian=!1,1==this._version);else{if(16777216!=this._version){throw new Error("MGH/MGZ parser: Unknown Endian.  Version reports: "+this._version)}this._swapEndian=!0,this._version=this._swap32(this._version)}this._width=this._readInt(),this._height=this._readInt(),this._depth=this._readInt(),this._nframes=this._readInt(),this._type=this._readInt(),this._dof=this._readInt(),this._goodRASFlag=this._readShort(),this._spacingXYZ=this._readFloat(3),this._Xras=this._readFloat(3),this._Yras=this._readFloat(3),this._Zras=this._readFloat(3),this._Cras=this._readFloat(3),this._bufferPos=284;let i=this._width*this._height*this._depth*this._nframes;this._width,this._height,this._depth;switch(this._type){case a.MRI_UCHAR:this._pixelData=this._readUChar(i);break;case a.MRI_INT:this._pixelData=this._readInt(i);break;case a.MRI_FLOAT:this._pixelData=this._readFloat(i);break;case a.MRI_SHORT:this._pixelData=this._readShort(i);break;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type)}this._tr=this._readFloat(1),this._flipAngle=this._readFloat(1),this._te=this._readFloat(1),this._ti=this._readFloat(1),this._fov=this._readFloat(1);let n=new TextDecoder,s=this._tagReadStart();for(;void 0!=s[0];){let t=s[0],e=s[1],i=void 0;switch(t){case a.TAG_OLD_MGH_XFORM:case a.TAG_MGH_XFORM:i=this._readChar(e);break;default:i=this._readChar(e)}i=n.decode(i),this._tags.push({tagType:t,tagValue:i}),s=this._tagReadStart()}const o=(new r.a).fromArray(this._Xras),l=(new r.a).fromArray(this._Yras),c=(new r.a).crossVectors(o,l),h=(new r.a).fromArray(this._Zras);c.angleTo(h)>Math.PI/2&&(this._rightHanded=!1),this._imageOrient=[-this._Xras[0],-this._Xras[1],this._Xras[2],-this._Yras[0],-this._Yras[1],this._Yras[2]];let u=this._width/2,d=this._height/2,f=this._depth/2;for(let t=0;t<3;++t)this._origin[t]=this._Cras[t]-(this._Xras[t]*this._spacingXYZ[0]*u+this._Yras[t]*this._spacingXYZ[1]*d+this._Zras[t]*this._spacingXYZ[2]*f);this._origin=[-this._origin[0],-this._origin[1],this._origin[2]]}seriesInstanceUID(){return this._url}numberOfFrames(){return this._depth}sopInstanceUID(t=0){return t}rows(t=0){return this._width}columns(t=0){return this._height}pixelType(t=0){switch(this._type){case a.MRI_UCHAR:case a.MRI_INT:case a.MRI_SHORT:return 0;case a.MRI_FLOAT:return 1;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type)}}bitsAllocated(t=0){switch(this._type){case a.MRI_UCHAR:return 8;case a.MRI_SHORT:return 16;case a.MRI_INT:case a.MRI_FLOAT:return 32;default:throw Error("MGH/MGZ parser: Unknown _type.  _type reports: "+this._type)}}pixelSpacing(t=0){return this._spacingXYZ}imageOrientation(t=0){return this._imageOrient}imagePosition(t=0){return this._origin}extractPixelData(t=0){let e=this._width*this._height;return this._pixelData.slice(t*e,(t+1)*e)}_readInt(t=1){let e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+4*t));this._bufferPos+=4*t;let i=void 0;if(1==t)i=e.getInt32(0,this._swapEndian);else{i=new Int32Array(t);for(let n=0;n<t;n++)i[n]=e.getInt32(4*n,this._swapEndian)}return i}_readShort(t=1){let e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+2*t));this._bufferPos+=2*t;let i=void 0;if(1==t)i=e.getInt16(0,this._swapEndian);else{i=new Int16Array(t);for(let n=0;n<t;n++)i[n]=e.getInt16(2*n,this._swapEndian)}return i}_readLong(t=1){let e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+8*t));this._bufferPos+=8*t;let i=new Uint16Array(t);for(let n=0;n<t;n++){let t=0,r=0;this._swapendian?t=4:r=4;let a=e.getInt32(8*n+t,this._swapEndian),s=e.getInt32(8*n+r,this._swapEndian);0!=a&&(console.log("Unable to read Int64 with high word: "+a+"low word: "+s),s=void 0),i[n]=s}return 0==t?void 0:1==t?i[0]:i}_readChar(t=1){let e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+t));this._bufferPos+=t;let i=void 0;if(1==t)i=e.getInt8(0,this._swapEndian);else{i=new Int8Array(t);for(let n=0;n<t;n++)i[n]=e.getInt8(n,this._swapEndian)}return i}_readUChar(t=1){let e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+t));this._bufferPos+=t;let i=void 0;if(1==t)i=e.getUint8(0,this._swapEndian);else{i=new Uint8Array(t);for(let n=0;n<t;n++)i[n]=e.getUint8(n,this._swapEndian)}return i}_readFloat(t=1){let e=new DataView(this._buffer.slice(this._bufferPos,this._bufferPos+4*t));this._bufferPos+=4*t;let i=void 0;if(1==t)i=e.getFloat32(0,this._swapEndian);else{i=new Float32Array(t);for(let n=0;n<t;n++)i[n]=e.getFloat32(4*n,this._swapEndian)}return i}_tagReadStart(){if(this._bufferPos>=this._buffer.byteLength)return[void 0,void 0];let t=this._readInt(),e=void 0;switch(t){case a.TAG_OLD_MGH_XFORM:e=this._readInt(),e-=1;break;case a.TAG_OLD_SURF_GEOM:case a.TAG_OLD_USEREALRAS:case a.TAG_OLD_COLORTABLE:e=0;break;default:e=this._readLong()}return void 0==e&&(t=void 0),[t,e]}}a.MRI_UCHAR=0,a.MRI_INT=1,a.MRI_LONG=2,a.MRI_FLOAT=3,a.MRI_SHORT=4,a.MRI_BITMAP=5,a.MRI_TENSOR=6,a.MRI_FLOAT_COMPLEX=7,a.MRI_DOUBLE_COMPLEX=8,a.MRI_RGB=9,a.TAG_OLD_COLORTABLE=1,a.TAG_OLD_USEREALRAS=2,a.TAG_CMDLINE=3,a.TAG_USEREALRAS=4,a.TAG_COLORTABLE=5,a.TAG_GCAMORPH_GEOM=10,a.TAG_GCAMORPH_TYPE=11,a.TAG_GCAMORPH_LABELS=12,a.TAG_OLD_SURF_GEOM=20,a.TAG_SURF_GEOM=21,a.TAG_OLD_MGH_XFORM=30,a.TAG_MGH_XFORM=31,a.TAG_GROUP_AVG_SURFACE_AREA=32,a.TAG_AUTO_ALIGN=33,a.TAG_SCALAR_DOUBLE=40,a.TAG_PEDIR=41,a.TAG_MRI_FRAME=42,a.TAG_FIELDSTRENGTH=43},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{constructor(){this._id=-1,this._worldCoordinates=null,this._dataCoordinates=null,this._screenCoordinates=null,this._value=null}set worldCoordinates(t){this._worldCoordinates=t}get worldCoordinates(){return this._worldCoordinates}set dataCoordinates(t){this._dataCoordinates=t}get dataCoordinates(){return this._dataCoordinates}set screenCoordinates(t){this._screenCoordinates=t}get screenCoordinates(){return this._screenCoordinates}set value(t){this._value=t}get value(){return this._value}set id(t){this._id=t}get id(){return this._id}}},function(t,e,i){"use strict";i.d(e,"a",function(){return a});const n=[];for(let t=0;t<256;t++)n[t]=(t<16?"0":"")+t.toString(16);let r=1234567;const a={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(n[255&t]+n[t>>8&255]+n[t>>16&255]+n[t>>24&255]+"-"+n[255&e]+n[e>>8&255]+"-"+n[e>>16&15|64]+n[e>>24&255]+"-"+n[63&i|128]+n[i>>8&255]+"-"+n[i>>16&255]+n[i>>24&255]+n[255&r]+n[r>>8&255]+n[r>>16&255]+n[r>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(r=t%2147483647),((r=16807*r%2147483647)-1)/2147483646},degToRad:function(t){return t*a.DEG2RAD},radToDeg:function(t){return t*a.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,n,r){const a=Math.cos,s=Math.sin,o=a(i/2),l=s(i/2),c=a((e+n)/2),h=s((e+n)/2),u=a((e-n)/2),d=s((e-n)/2),f=a((n-e)/2),p=s((n-e)/2);switch(r){case"XYX":t.set(o*h,l*u,l*d,o*c);break;case"YZY":t.set(l*d,o*h,l*u,o*c);break;case"ZXZ":t.set(l*u,l*d,o*h,o*c);break;case"XZX":t.set(o*h,l*p,l*f,o*c);break;case"YXY":t.set(l*f,o*h,l*p,o*c);break;case"ZYZ":t.set(l*p,l*f,o*h,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(2);const r=(t=n)=>{if(void 0===t||void 0===t.Object3D)return null;const e=t.Object3D;return class extends e{_createMaterial(e){let i=new this._shadersFragment(this._uniforms),n=new this._shadersVertex,r={uniforms:this._uniforms,vertexShader:n.compute(),fragmentShader:i.compute()},a=Object.assign(e,r);this._material=new t.ShaderMaterial(a),this._material.needsUpdate=!0}_updateMaterial(){let t=new this._shadersFragment(this._uniforms),e=new this._shadersVertex;this._material.vertexShader=e.compute(),this._material.fragmentShader=t.compute(),this._material.needsUpdate=!0}_prepareTexture(){this._textures=[];for(let e=0;e<this._stack._rawData.length;e++){let i=new t.DataTexture(this._stack.rawData[e],this._stack.textureSize,this._stack.textureSize,this._stack.textureType,t.UnsignedByteType,t.UVMapping,t.ClampToEdgeWrapping,t.ClampToEdgeWrapping,t.NearestFilter,t.NearestFilter);i.needsUpdate=!0,i.flipY=!0,this._textures.push(i)}}}};r()},function(t,e,i){"use strict";var n=n||{};n.NIFTI1=n.NIFTI1||i(89),n.NIFTI2=n.NIFTI2||i(144),n.Utils=n.Utils||i(61);var r=r||i(56);n.isNIFTI1=function(t){var e,i,r,a;return i=(e=new DataView(t)).getUint8(n.NIFTI1.MAGIC_NUMBER_LOCATION),r=e.getUint8(n.NIFTI1.MAGIC_NUMBER_LOCATION+1),a=e.getUint8(n.NIFTI1.MAGIC_NUMBER_LOCATION+2),!(i!==n.NIFTI1.MAGIC_NUMBER[0]||r!==n.NIFTI1.MAGIC_NUMBER[1]||a!==n.NIFTI1.MAGIC_NUMBER[2])},n.isNIFTI2=function(t){var e,i,r,a;return i=(e=new DataView(t)).getUint8(n.NIFTI2.MAGIC_NUMBER_LOCATION),r=e.getUint8(n.NIFTI2.MAGIC_NUMBER_LOCATION+1),a=e.getUint8(n.NIFTI2.MAGIC_NUMBER_LOCATION+2),!(i!==n.NIFTI2.MAGIC_NUMBER[0]||r!==n.NIFTI2.MAGIC_NUMBER[1]||a!==n.NIFTI2.MAGIC_NUMBER[2])},n.isNIFTI=function(t){return n.isNIFTI1(t)||n.isNIFTI2(t)},n.isCompressed=function(t){var e,i,r;if(t){if(i=(e=new DataView(t)).getUint8(0),r=e.getUint8(1),i===n.Utils.GUNZIP_MAGIC_COOKIE1)return!0;if(r===n.Utils.GUNZIP_MAGIC_COOKIE2)return!0}return!1},n.decompress=function(t){return r.inflate(t).buffer},n.readHeader=function(t){var e=null;return n.isCompressed(t)&&(t=n.decompress(t)),n.isNIFTI1(t)?e=new n.NIFTI1:n.isNIFTI2(t)&&(e=new n.NIFTI2),e?e.readHeader(t):console.error("That file does not appear to be NIFTI!"),e},n.hasExtension=function(t){return 0!=t.extensionFlag[0]},n.readImage=function(t,e){var i=t.vox_offset,n=1,r=1;t.dims[4]&&(n=t.dims[4]),t.dims[5]&&(r=t.dims[5]);var a=t.dims[1]*t.dims[2]*t.dims[3]*n*r*(t.numBitsPerVoxel/8);return e.slice(i,i+a)},n.readExtension=function(t,e){var i=t.getExtensionLocation(),n=t.extensionSize;return e.slice(i,i+n)},n.readExtensionData=function(t,e){var i=t.getExtensionLocation(),n=t.extensionSize;return e.slice(i+8,i+n-8)},"undefined"!==typeof t&&t.exports&&(t.exports=n)},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i(8),r=i(5),a=i(2);const s=(t=a)=>{if(void 0===t||void 0===t.OrthographicCamera)return null;const e=t.OrthographicCamera;return class extends e{constructor(e,i,n,r,a,s){super(e,i,n,r,a,s),this._front=null,this._back=null,this._directions=[new t.Vector3(1,0,0),new t.Vector3(0,1,0),new t.Vector3(0,0,1)],this._directionsLabel=["A","P","L","R","I","S"],this._orientation="default",this._convention="radio",this._stackOrientation=0,this._right=null,this._up=null,this._direction=null,this._controls=null,this._box=null,this._canvas={width:null,height:null},this._fromFront=!0,this._angle=0}init(e,i,a,s,o,l){if(window.console.warn("cameras.orthographic.init(...) is deprecated.\n        Use .cosines, .controls, .box and .canvas instead."),!(r.a.vector3(e)&&r.a.vector3(i)&&r.a.vector3(a)&&r.a.box(o)&&s))return window.console.log("Invalid input provided."),!1;this._right=e,this._up=this._adjustTopDirection(e,i),this._direction=(new t.Vector3).crossVectors(this._right,this._up),this._controls=s,this._box=o,this._canvas=l;let c={position:this._box.center,direction:this._direction},h=this._orderIntersections(n.a.rayBox(c,this._box),this._direction);this._front=h[0],this._back=h[1],this.up.set(this._up.x,this._up.y,this._up.z),this._updateCanvas(),this._updatePositionAndTarget(this._front,this._back),this._updateMatrices(),this._updateDirections()}update(){if("default"===this._orientation)switch(this._getMaxIndex(this._directions[2])){case 0:this._orientation="sagittal";break;case 1:this._orientation="coronal";break;case 2:this._orientation="axial";break;default:this._orientation="free"}if("free"===this._orientation)this._right=this._directions[0],this._up=this._directions[1],this._direction=this._directions[2];else{let t=this.leftDirection(),e=this._directions[t],i=this.posteriorDirection(),n=this._directions[i],r=this.superiorDirection(),a=this._directions[r];if("radio"===this._convention)switch(this._orientation){case"axial":n.y>0&&n.negate(),a.z<0&&a.negate(),this._right=e,this._up=n,this._direction=a;break;case"coronal":a.z<0&&a.negate(),n.y<0&&n.negate(),this._right=e,this._up=a,this._direction=n;break;case"sagittal":a.z<0&&a.negate(),e.x>0&&e.negate(),this._right=n,this._up=a,this._direction=e;break;default:window.console.warn(`"${this._orientation}" orientation is not valid.\n                  (choices: axial, coronal, sagittal)`)}else if("neuro"===this._convention)switch(this._orientation){case"axial":n.y>0&&n.negate(),a.z>0&&a.negate(),this._right=e,this._up=n,this._direction=a;break;case"coronal":a.z<0&&a.negate(),n.y>0&&n.negate(),this._right=e,this._up=a,this._direction=n;break;case"sagittal":a.z<0&&a.negate(),e.x>0&&e.negate(),this._right=n,this._up=a,this._direction=e;break;default:window.console.warn(`"${this._orientation}" orientation is not valid.\n                  (choices: axial, coronal, sagittal)`)}else window.console.warn(`${this._convention} is not valid (choices: radio, neuro)`)}let t={position:this._box.center,direction:this._direction},e=this._orderIntersections(n.a.rayBox(t,this._box),this._direction);this._front=e[0],this._back=e[1],this.up.set(this._up.x,this._up.y,this._up.z),this._updateCanvas(),this._updatePositionAndTarget(this._front,this._back),this._updateMatrices(),this._updateDirections()}leftDirection(){return this._findMaxIndex(this._directions,0)}posteriorDirection(){return this._findMaxIndex(this._directions,1)}superiorDirection(){return this._findMaxIndex(this._directions,2)}invertRows(){this.up.multiplyScalar(-1),this.invertColumns(),this._updateDirections()}invertColumns(){this.center();let t=this._oppositePosition(this.position);this._updatePositionAndTarget(t,this.position.clone()),this._updateMatrices(),this._fromFront=!this._fromFront,this._angle%=360,this._angle=360-this._angle,this._updateDirections()}center(){this._fromFront?this._updatePositionAndTarget(this._front,this._back):this._updatePositionAndTarget(this._back,this._front),this._updateMatrices(),this._updateDirections()}rotate(e=null){this.center();let i=90;null===e?(i*=-1,this._angle+=90):(i=360-(e-this._angle),this._angle=e),this._angle%=360;let n=(new t.Matrix4).makeRotationAxis(this._direction,i*Math.PI/180);this.up.applyMatrix4(n),this._updateMatrices(),this._updateDirections()}fitBox(t=0,e=1.5){let i=1;switch(t){case 0:i=e*this._computeZoom(this._canvas.width,this._right);break;case 1:i=e*this._computeZoom(this._canvas.height,this._up);break;case 2:i=e*Math.min(this._computeZoom(this._canvas.width,this._right),this._computeZoom(this._canvas.height,this._up))}if(!i)return!1;this.zoom=i,this.center()}_adjustTopDirection(t,e){const i=this._getMaxIndex(e);return(2===i&&e.getComponent(i)<0||1===i&&e.getComponent(i)>0||0===i&&e.getComponent(i)>0)&&e.negate(),e}_getMaxIndex(t){let e=Math.abs(t.x),i=0;return Math.abs(t.y)>e&&(e=Math.abs(t.y),i=1),Math.abs(t.z)>e&&(i=2),i}_findMaxIndex(t,e){let i=this._getMaxIndices(t);for(let t=0;t<i.length;t++)if(i[t]===e)return t}_getMaxIndices(t){let e=[];return e.push(this._getMaxIndex(t[0])),e.push(this._getMaxIndex(t[1])),e.push(this._getMaxIndex(t[2])),e}_orderIntersections(t,e){return t[0].dot(e)<t[1].dot(e)?t:[t[1],t[0]]}_updateCanvas(){this.left=-this._canvas.width/2,this.right=this._canvas.width/2,this.top=this._canvas.height/2,this.bottom=-this._canvas.height/2,this._updateMatrices(),this.controls.handleResize()}_oppositePosition(e){let i=e.clone();i.sub(this._box.center);let n=(new t.Matrix4).makeRotationAxis(this.up,Math.PI);return i.applyMatrix4(n),i.add(this._box.center),i}_computeZoom(t,e){if(!(t&&t>0))return window.console.log("Invalid dimension provided."),window.console.log(t),!1;let i={position:this._box.center.clone(),direction:e},r=n.a.rayBox(i,this._box);return r.length<2?(window.console.log("Can not adjust the camera ( < 2 intersections)."),window.console.log(i),window.console.log(this._box),!1):t/r[0].distanceTo(r[1])}_updatePositionAndTarget(t,e){this.position.set(t.x,t.y,t.z),this.lookAt(e.x,e.y,e.z),this._controls.target.set(e.x,e.y,e.z)}_updateMatrices(){this._controls.update(),this.updateProjectionMatrix(),this.updateMatrixWorld()}_updateLabels(){this._directionsLabel=[this._vector2Label(this._up),this._vector2Label(this._up.clone().negate()),this._vector2Label(this._right),this._vector2Label(this._right.clone().negate()),this._vector2Label(this._direction),this._vector2Label(this._direction.clone().negate())]}_vector2Label(t){const e=this._getMaxIndex(t),i=t.clone().divideScalar(Math.abs(t.getComponent(e)));let n="";for(let t=0;t<3;t++)0===t&&(i.getComponent(t)+.2>=1?n+="L":i.getComponent(t)-.2<=-1&&(n+="R")),1===t&&(i.getComponent(t)+.2>=1?n+="P":i.getComponent(t)-.2<=-1&&(n+="A")),2===t&&(i.getComponent(t)+.2>=1?n+="S":i.getComponent(t)-.2<=-1&&(n+="I"));return n}_updateDirections(){this._up=this.up.clone();let e=new t.Vector3(0,0,-1).applyMatrix4(this.matrixWorld);this._direction=e.sub(this.position).normalize(),this._right=(new t.Vector3).crossVectors(this._direction,this.up),this._updateLabels()}set controls(t){this._controls=t}get controls(){return this._controls}set box(t){this._box=t}get box(){return this._box}set canvas(t){this._canvas=t,this._updateCanvas()}get canvas(){return this._canvas}set angle(t){this.rotate(t)}get angle(){return this._angle}set directions(t){this._directions=t}get directions(){return this._directions}set convention(t){this._convention=t}get convention(){return this._convention}set orientation(t){this._orientation=t}get orientation(){return this._orientation}set directionsLabel(t){this._directionsLabel=t}get directionsLabel(){return this._directionsLabel}set stackOrientation(t){if(this._stackOrientation=t,0===this._stackOrientation)this._orientation="default";else{const t=this._getMaxIndex(this._directions[(this._stackOrientation+2)%3]);0===t?this._orientation="sagittal":1===t?this._orientation="coronal":2===t&&(this._orientation="axial")}}get stackOrientation(){if("default"===this._orientation)this._stackOrientation=0;else{let t=this._getMaxIndex(this._direction);t===this._getMaxIndex(this._directions[2])?this._stackOrientation=0:t===this._getMaxIndex(this._directions[0])?this._stackOrientation=1:t===this._getMaxIndex(this._directions[1])&&(this._stackOrientation=2)}return this._stackOrientation}}};e.b=s()},function(t,e,i){"use strict";i.d(e,"b",function(){return r});var n=i(2);const r=(t=n)=>{if(void 0===t||void 0===t.EventDispatcher)return null;const e=t.EventDispatcher;return class extends e{constructor(e,i){super();let n=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM:4,TOUCH_PAN:5,CUSTOM:99};this.object=e,this.domElement=void 0!==i?i:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.noCustom=!1,this.forceState=-1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new t.Vector3;let a=new t.Vector3,s=r.NONE,o=r.NONE,l=new t.Vector3,c=new t.Vector2,h=new t.Vector2,u=new t.Vector3,d=0,f=new t.Vector2,p=new t.Vector2,m=0,g=0,_=new t.Vector2,y=new t.Vector2,b=new t.Vector2,v=new t.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();let w={type:"change"},x={type:"start"},A={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{let t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}},this.handleEvent=function(t){"function"==typeof this[t.type]&&this[t.type](t)};let M=function(){let e=new t.Vector2;return function(t,i){return e.set((t-n.screen.left)/n.screen.width,(i-n.screen.top)/n.screen.height),e}}(),S=function(){let e=new t.Vector2;return function(t,i){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-i))/n.screen.width),e}}();function E(t){!1!==n.enabled&&(window.removeEventListener("keydown",E),o=s,s===r.NONE&&(t.keyCode!==n.keys[r.ROTATE]||n.noRotate?t.keyCode!==n.keys[r.ZOOM]||n.noZoom?t.keyCode!==n.keys[r.PAN]||n.noPan||(s=r.PAN):s=r.ZOOM:s=r.ROTATE))}function T(t){!1!==n.enabled&&(s=o,window.addEventListener("keydown",E,!1))}function I(t){!1!==n.enabled&&(t.preventDefault(),t.stopPropagation(),s===r.NONE&&(s=t.button),s!==r.ROTATE||n.noRotate?s!==r.ZOOM||n.noZoom?s!==r.PAN||n.noPan?s!==r.CUSTOM||n.noCustom||(b.copy(M(t.pageX,t.pageY)),v.copy(_)):(_.copy(M(t.pageX,t.pageY)),y.copy(_)):(f.copy(M(t.pageX,t.pageY)),p.copy(f)):(h.copy(S(t.pageX,t.pageY)),c.copy(h)),document.addEventListener("mousemove",C,!1),document.addEventListener("mouseup",k,!1),n.dispatchEvent(x))}function C(t){!1!==n.enabled&&(t.preventDefault(),t.stopPropagation(),s!==r.ROTATE||n.noRotate?s!==r.ZOOM||n.noZoom?s!==r.PAN||n.noPan?s!==r.CUSTOM||n.noCustom||v.copy(M(t.pageX,t.pageY)):y.copy(M(t.pageX,t.pageY)):p.copy(M(t.pageX,t.pageY)):(c.copy(h),h.copy(S(t.pageX,t.pageY))))}function k(t){!1!==n.enabled&&(t.preventDefault(),t.stopPropagation(),-1===n.forceState&&(s=r.NONE),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",k),n.dispatchEvent(A))}function P(t){if(!1!==n.enabled&&!0!==n.noZoom){switch(t.preventDefault(),t.stopPropagation(),t.deltaMode){case 2:f.y-=.025*t.deltaY;break;case 1:f.y-=.01*t.deltaY;break;default:f.y-=25e-5*t.deltaY}n.dispatchEvent(x),n.dispatchEvent(A)}}function B(t){if(!1!==n.enabled){if(-1===n.forceState)switch(t.touches.length){case 1:s=r.TOUCH_ROTATE,h.copy(S(t.touches[0].pageX,t.touches[0].pageY)),c.copy(h);break;case 2:s=r.TOUCH_ZOOM;var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;g=m=Math.sqrt(e*e+i*i);var a=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;_.copy(M(a,o)),y.copy(_);break;default:s=r.NONE}else switch(s){case 0:s=r.TOUCH_ROTATE,h.copy(S(t.touches[0].pageX,t.touches[0].pageY)),c.copy(h);break;case 1:case 4:if(t.touches.length>=2){s=r.TOUCH_ZOOM;e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;g=m=Math.sqrt(e*e+i*i)}else s=r.ZOOM,f.copy(M(t.touches[0].pageX,t.touches[0].pageY)),p.copy(f);break;case 2:case 5:if(t.touches.length>=2){s=r.TOUCH_PAN;a=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;_.copy(M(a,o)),y.copy(_)}else s=r.PAN,_.copy(M(t.touches[0].pageX,t.touches[0].pageY)),y.copy(_);break;case 99:s=r.CUSTOM;a=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;b.copy(M(a,o)),v.copy(b);break;default:s=r.NONE}n.dispatchEvent(x)}}function L(t){if(!1!==n.enabled)if(t.preventDefault(),t.stopPropagation(),-1===n.forceState)switch(t.touches.length){case 1:c.copy(h),h.copy(S(t.touches[0].pageX,t.touches[0].pageY));break;case 2:var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;g=Math.sqrt(e*e+i*i);var a=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;y.copy(M(a,o));break;default:s=r.NONE}else switch(s){case 0:c.copy(h),h.copy(S(t.touches[0].pageX,t.touches[0].pageY));break;case 1:p.copy(M(t.touches[0].pageX,t.touches[0].pageY));break;case 2:y.copy(M(t.touches[0].pageX,t.touches[0].pageY));break;case 4:e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;g=Math.sqrt(e*e+i*i);break;case 5:a=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;y.copy(M(a,o));break;case 99:a=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;v.copy(M(a,o));break;default:s=r.NONE}}function R(t){if(!1!==n.enabled){if(-1===n.forceState){switch(t.touches.length){case 1:c.copy(h),h.copy(S(t.touches[0].pageX,t.touches[0].pageY));break;case 2:m=g=0;var e=(t.touches[0].pageX+t.touches[1].pageX)/2,i=(t.touches[0].pageY+t.touches[1].pageY)/2;y.copy(M(e,i)),_.copy(y)}s=r.NONE}else switch(s){case 0:c.copy(h),h.copy(S(t.touches[0].pageX,t.touches[0].pageY));break;case 1:case 2:break;case 4:m=g=0,s=r.ZOOM;break;case 5:if(t.touches.length>=2){e=(t.touches[0].pageX+t.touches[1].pageX)/2,i=(t.touches[0].pageY+t.touches[1].pageY)/2;y.copy(M(e,i)),_.copy(y)}s=r.PAN;break;case 99:e=(t.touches[0].pageX+t.touches[1].pageX)/2,i=(t.touches[0].pageY+t.touches[1].pageY)/2;v.copy(M(e,i)),b.copy(v);break;default:s=r.NONE}n.dispatchEvent(A)}}function D(t){t.preventDefault()}this.rotateCamera=function(){let e,i=new t.Vector3,r=new t.Quaternion,a=new t.Vector3,s=new t.Vector3,o=new t.Vector3,f=new t.Vector3;return function(){f.set(h.x-c.x,h.y-c.y,0),(e=f.length())?(l.copy(n.object.position).sub(n.target),a.copy(l).normalize(),s.copy(n.object.up).normalize(),o.crossVectors(s,a).normalize(),s.setLength(h.y-c.y),o.setLength(h.x-c.x),f.copy(s.add(o)),i.crossVectors(f,l).normalize(),e*=n.rotateSpeed,r.setFromAxisAngle(i,e),l.applyQuaternion(r),n.object.up.applyQuaternion(r),u.copy(i),d=e):!n.staticMoving&&d&&(d*=Math.sqrt(1-n.dynamicDampingFactor),l.copy(n.object.position).sub(n.target),r.setFromAxisAngle(u,d),l.applyQuaternion(r),n.object.up.applyQuaternion(r)),c.copy(h)}}(),this.zoomCamera=function(){let t;s===r.TOUCH_ZOOM?(t=m/g,m=g,l.multiplyScalar(t)):1!==(t=1+(p.y-f.y)*n.zoomSpeed)&&t>0&&(l.multiplyScalar(t),n.staticMoving?f.copy(p):f.y+=(p.y-f.y)*this.dynamicDampingFactor)},this.panCamera=function(){let e=new t.Vector2,i=new t.Vector3,r=new t.Vector3;return function(){e.copy(y).sub(_),e.lengthSq()&&(e.multiplyScalar(l.length()*n.panSpeed),r.copy(l).cross(n.object.up).setLength(e.x),r.add(i.copy(n.object.up).setLength(e.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?_.copy(y):_.add(e.subVectors(y,_).multiplyScalar(n.dynamicDampingFactor)))}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(l.lengthSq()>n.maxDistance*n.maxDistance&&n.object.position.addVectors(n.target,l.setLength(n.maxDistance)),l.lengthSq()<n.minDistance*n.minDistance&&n.object.position.addVectors(n.target,l.setLength(n.minDistance)))},this.update=function(){l.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.noCustom||n.custom(b,v),n.object.position.addVectors(n.target,l),n.checkDistances(),n.object.lookAt(n.target),a.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(w),a.copy(n.object.position))},this.reset=function(){s=r.NONE,o=r.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),l.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(w),a.copy(n.object.position)},this.setState=function(t){n.forceState=t,o=t,s=t},this.custom=function(t,e){},this.dispose=function(){this.domElement.removeEventListener("contextmenu",D,!1),this.domElement.removeEventListener("mousedown",I,!1),this.domElement.removeEventListener("wheel",P,!1),this.domElement.removeEventListener("touchstart",B,!1),this.domElement.removeEventListener("touchend",R,!1),this.domElement.removeEventListener("touchmove",L,!1),window.removeEventListener("keydown",E,!1),window.removeEventListener("keyup",T,!1)},this.domElement.addEventListener("contextmenu",D,!1),this.domElement.addEventListener("mousedown",I,!1),this.domElement.addEventListener("wheel",P,!1),this.domElement.addEventListener("touchstart",B,!1),this.domElement.addEventListener("touchend",R,!1),this.domElement.addEventListener("touchmove",L,!1),window.addEventListener("keydown",E,!1),window.addEventListener("keyup",T,!1),this.handleResize(),this.update()}}};e.a=r()},function(t,e,i){"use strict";i.d(e,"b",function(){return r});var n=i(2);const r=(t=n)=>{if(void 0===t||void 0===t.EventDispatcher)return null;const e=t.EventDispatcher;return class extends e{constructor(e,i,n={NONE:-1,ROTATE:1,ZOOM:2,PAN:0,SCROLL:4,TOUCH_ROTATE:4,TOUCH_ZOOM_PAN:5}){super();let r=this,a=n;this.object=e,this.domElement=void 0!==i?i:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.radius=0,this.zoomSpeed=1.2,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.keys=[65,83,68],this.target=new t.Vector3;let s=!0,o=a.NONE,l=a.NONE,c=new t.Vector3,h=new t.Vector2,u=new t.Vector2,d=0,f=0,p=new t.Vector2,m=new t.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.left0=this.object.left,this.right0=this.object.right,this.top0=this.object.top,this.bottom0=this.object.bottom;let g={type:"change"},_={type:"start"},y={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{let t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height}this.radius=.5*Math.min(this.screen.width,this.screen.height),this.left0=this.object.left,this.right0=this.object.right,this.top0=this.object.top,this.bottom0=this.object.bottom},this.handleEvent=function(t){"function"==typeof this[t.type]&&this[t.type](t)};let b=function(){let e=new t.Vector2;return function(t,i){return e.set((t-r.screen.left)/r.screen.width,(i-r.screen.top)/r.screen.height),e}}();function v(t){!1!==r.enabled&&(window.removeEventListener("keydown",v),l=o,o===a.NONE&&(t.keyCode!==r.keys[a.ROTATE]||r.noRotate?t.keyCode!==r.keys[a.ZOOM]||r.noZoom?t.keyCode!==r.keys[a.PAN]||r.noPan||(o=a.PAN):o=a.ZOOM:o=a.ROTATE))}function w(t){!1!==r.enabled&&(o=l,window.addEventListener("keydown",v,!1))}function x(t){!1!==r.enabled&&(t.preventDefault(),t.stopPropagation(),o===a.NONE&&(o=t.button),(o!==a.ROTATE||r.noRotate)&&(o!==a.ZOOM||r.noZoom?o!==a.PAN||r.noPan||(p.copy(b(t.pageX,t.pageY)),m.copy(p)):(h.copy(b(t.pageX,t.pageY)),u.copy(h))),document.addEventListener("mousemove",A,!1),document.addEventListener("mouseup",M,!1),r.dispatchEvent(_))}function A(t){!1!==r.enabled&&(t.preventDefault(),t.stopPropagation(),(o!==a.ROTATE||r.noRotate)&&(o!==a.ZOOM||r.noZoom?o!==a.PAN||r.noPan||m.copy(b(t.pageX,t.pageY)):u.copy(b(t.pageX,t.pageY))))}function M(t){!1!==r.enabled&&(t.preventDefault(),t.stopPropagation(),o=a.NONE,document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",M),r.dispatchEvent(y))}function S(t){!1!==r.enabled&&(t.preventDefault(),t.stopPropagation(),r.dispatchEvent({type:"OnScroll",delta:.01*t.deltaX+.01*t.deltaY}),r.dispatchEvent(_),r.dispatchEvent(y))}function E(t){if(!1!==r.enabled){switch(t.touches.length){case 1:o=a.TOUCH_ROTATE;break;case 2:o=a.TOUCH_ZOOM_PAN;var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;f=d=Math.sqrt(e*e+i*i);var n=(t.touches[0].pageX+t.touches[1].pageX)/2,s=(t.touches[0].pageY+t.touches[1].pageY)/2;p.copy(b(n,s)),m.copy(p);break;default:o=a.NONE}r.dispatchEvent(_)}}function T(t){if(!1!==r.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:break;case 2:var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;f=Math.sqrt(e*e+i*i);var n=(t.touches[0].pageX+t.touches[1].pageX)/2,s=(t.touches[0].pageY+t.touches[1].pageY)/2;m.copy(b(n,s));break;default:o=a.NONE}}function I(t){if(!1!==r.enabled){switch(t.touches.length){case 1:break;case 2:d=f=0;var e=(t.touches[0].pageX+t.touches[1].pageX)/2,i=(t.touches[0].pageY+t.touches[1].pageY)/2;m.copy(b(e,i)),p.copy(m)}o=a.NONE,r.dispatchEvent(y)}}function C(t){t.preventDefault()}this.zoomCamera=function(){if(o===a.TOUCH_ZOOM_PAN){var t=f/d;d=f,r.object.zoom*=t,s=!0}else{t=1+(u.y-h.y)*r.zoomSpeed;Math.abs(t-1)>1e-6&&t>0&&(r.object.zoom/=t,r.staticMoving?h.copy(u):h.y+=(u.y-h.y)*this.dynamicDampingFactor,s=!0)}},this.panCamera=function(){let e=new t.Vector2,i=new t.Vector3,n=new t.Vector3;return function(){if(e.copy(m).sub(p),e.lengthSq()){let t=(r.object.right-r.object.left)/r.object.zoom,a=(r.object.top-r.object.bottom)/r.object.zoom;e.x*=t,e.y*=a,n.copy(c).cross(r.object.up).setLength(e.x),n.add(i.copy(r.object.up).setLength(e.y)),r.object.position.add(n),r.target.add(n),r.staticMoving?p.copy(m):p.add(e.subVectors(m,p).multiplyScalar(r.dynamicDampingFactor)),s=!0}}}(),this.update=function(){c.subVectors(r.object.position,r.target),r.noZoom||(r.zoomCamera(),s&&r.object.updateProjectionMatrix()),r.noPan||r.panCamera(),r.object.position.addVectors(r.target,c),r.object.lookAt(r.target),s&&(r.dispatchEvent(g),s=!1)},this.reset=function(){o=a.NONE,l=a.NONE,r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.up.copy(r.up0),c.subVectors(r.object.position,r.target),r.object.left=r.left0,r.object.right=r.right0,r.object.top=r.top0,r.object.bottom=r.bottom0,r.object.lookAt(r.target),r.dispatchEvent(g),s=!1},this.dispose=function(){this.domElement.removeEventListener("contextmenu",C,!1),this.domElement.removeEventListener("mousedown",x,!1),this.domElement.removeEventListener("wheel",S,!1),this.domElement.removeEventListener("touchstart",E,!1),this.domElement.removeEventListener("touchend",I,!1),this.domElement.removeEventListener("touchmove",T,!1),window.removeEventListener("keydown",v,!1),window.removeEventListener("keyup",w,!1)},this.domElement.addEventListener("contextmenu",C,!1),this.domElement.addEventListener("mousedown",x,!1),this.domElement.addEventListener("wheel",S,!1),this.domElement.addEventListener("touchstart",E,!1),this.domElement.addEventListener("touchend",I,!1),this.domElement.addEventListener("touchmove",T,!1),window.addEventListener("keydown",v,!1),window.addEventListener("keyup",w,!1),this.handleResize(),this.update()}}};e.a=r()},function(t,e,i){"use strict";i.d(e,"b",function(){return r});var n=i(2);const r=(t=n)=>{if(void 0===t||void 0===t.EventDispatcher)return null;var e=function(e,i){this.object=e,this.domElement=void 0!==i?i:document,this.enabled=!0,this.preventDefault=!0,this.target=new t.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:t.MOUSE.LEFT,MIDDLE:t.MOUSE.MIDDLE,RIGHT:t.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=o.NONE},this.handleResize=function(){},this.update=function(){var i=new t.Vector3,a=(new t.Quaternion).setFromUnitVectors(e.up,new t.Vector3(0,1,0)),s=a.clone().inverse(),m=new t.Vector3,g=new t.Quaternion;return function(){var t=n.object.position;return i.copy(t).sub(n.target),i.applyQuaternion(a),h.setFromVector3(i),n.autoRotate&&l===o.NONE&&S(2*Math.PI/60/60*n.autoRotateSpeed),h.theta+=u.theta,h.phi+=u.phi,h.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(n.minDistance,Math.min(n.maxDistance,h.radius)),n.target.add(f),i.setFromSpherical(h),i.applyQuaternion(s),t.copy(n.target).add(i),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),f.set(0,0,0)),d=1,!!(p||m.distanceToSquared(n.object.position)>c||8*(1-g.dot(n.object.quaternion))>c)&&(n.dispatchEvent(r),m.copy(n.object.position),g.copy(n.object.quaternion),p=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",H,!1),n.domElement.removeEventListener("mousedown",L,!1),n.domElement.removeEventListener("wheel",O,!1),n.domElement.removeEventListener("touchstart",F,!1),n.domElement.removeEventListener("touchend",z,!1),n.domElement.removeEventListener("touchmove",N,!1),document.removeEventListener("mousemove",R,!1),document.removeEventListener("mouseup",D,!1),window.removeEventListener("keydown",G,!1)};var n=this,r={type:"change"},a={type:"start"},s={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},l=o.NONE,c=1e-6,h=new t.Spherical,u=new t.Spherical,d=1,f=new t.Vector3,p=!1,m=new t.Vector2,g=new t.Vector2,_=new t.Vector2,y=new t.Vector2,b=new t.Vector2,v=new t.Vector2,w=new t.Vector2,x=new t.Vector2,A=new t.Vector2;function M(){return Math.pow(.95,n.zoomSpeed)}function S(t){u.theta-=t}function E(t){u.phi-=t}var T=function(){var e=new t.Vector3;return function(t,i){e.setFromMatrixColumn(i,0),e.multiplyScalar(-t),f.add(e)}}(),I=function(){var e=new t.Vector3;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),f.add(e)}}(),C=function(){var e=new t.Vector3;return function(t,i){var r=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var a=n.object.position;e.copy(a).sub(n.target);var s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),T(2*t*s/r.clientHeight,n.object.matrix),I(2*i*s/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(T(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),I(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function k(t){n.object.isPerspectiveCamera?d/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(t){n.object.isPerspectiveCamera?d*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function B(t){y.set(t.clientX,t.clientY)}function L(t){if(!1!==n.enabled){switch(!0===n.preventDefault&&t.preventDefault(),t.button){case n.mouseButtons.LEFT:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;B(t),l=o.PAN}else{if(!1===n.enableRotate)return;!function(t){m.set(t.clientX,t.clientY)}(t),l=o.ROTATE}break;case n.mouseButtons.MIDDLE:if(!1===n.enableZoom)return;!function(t){w.set(t.clientX,t.clientY)}(t),l=o.DOLLY;break;case n.mouseButtons.RIGHT:if(!1===n.enablePan)return;B(t),l=o.PAN}l!==o.NONE&&(document.addEventListener("mousemove",R,!1),document.addEventListener("mouseup",D,!1),n.dispatchEvent(a))}}function R(t){if(!1!==n.enabled)switch(!0===n.preventDefault&&t.preventDefault(),l){case o.ROTATE:if(!1===n.enableRotate)return;!function(t){g.set(t.clientX,t.clientY),_.subVectors(g,m).multiplyScalar(n.rotateSpeed);var e=n.domElement===document?n.domElement.body:n.domElement;S(2*Math.PI*_.x/e.clientHeight),E(2*Math.PI*_.y/e.clientHeight),m.copy(g),n.update()}(t);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(t){x.set(t.clientX,t.clientY),A.subVectors(x,w),A.y>0?k(M()):A.y<0&&P(M()),w.copy(x),n.update()}(t);break;case o.PAN:if(!1===n.enablePan)return;!function(t){b.set(t.clientX,t.clientY),v.subVectors(b,y).multiplyScalar(n.panSpeed),C(v.x,v.y),y.copy(b),n.update()}(t)}}function D(t){!1!==n.enabled&&(document.removeEventListener("mousemove",R,!1),document.removeEventListener("mouseup",D,!1),n.dispatchEvent(s),l=o.NONE)}function O(t){!1===n.enabled||!1===n.enableZoom||l!==o.NONE&&l!==o.ROTATE||(!0===n.preventDefault&&(t.preventDefault(),t.stopPropagation()),n.dispatchEvent(a),function(t){t.deltaY<0?P(M()):t.deltaY>0&&k(M()),n.update()}(t),n.dispatchEvent(s))}function G(t){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(t){switch(t.keyCode){case n.keys.UP:C(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:C(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:C(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:C(-n.keyPanSpeed,0),n.update()}}(t)}function F(t){if(!1!==n.enabled){switch(!0===n.preventDefault&&t.preventDefault(),t.touches.length){case 1:if(!1===n.enableRotate)return;!function(t){m.set(t.touches[0].pageX,t.touches[0].pageY)}(t),l=o.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){if(n.enableZoom){var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+i*i);w.set(0,r)}if(n.enablePan){var a=.5*(t.touches[0].pageX+t.touches[1].pageX),s=.5*(t.touches[0].pageY+t.touches[1].pageY);y.set(a,s)}}(t),l=o.TOUCH_DOLLY_PAN;break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(a)}}function N(t){if(!1!==n.enabled)switch(!0===n.preventDefault&&(t.preventDefault(),t.stopPropagation()),t.touches.length){case 1:if(!1===n.enableRotate)return;if(l!==o.TOUCH_ROTATE)return;!function(t){g.set(t.touches[0].pageX,t.touches[0].pageY),_.subVectors(g,m).multiplyScalar(n.rotateSpeed);var e=n.domElement===document?n.domElement.body:n.domElement;S(2*Math.PI*_.x/e.clientHeight),E(2*Math.PI*_.y/e.clientHeight),m.copy(g),n.update()}(t);break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;if(l!==o.TOUCH_DOLLY_PAN)return;!function(t){if(n.enableZoom){var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+i*i);x.set(0,r),A.set(0,Math.pow(x.y/w.y,n.zoomSpeed)),k(A.y),w.copy(x)}if(n.enablePan){var a=.5*(t.touches[0].pageX+t.touches[1].pageX),s=.5*(t.touches[0].pageY+t.touches[1].pageY);b.set(a,s),v.subVectors(b,y).multiplyScalar(n.panSpeed),C(v.x,v.y),y.copy(b)}n.update()}(t);break;default:l=o.NONE}}function z(t){!1!==n.enabled&&(n.dispatchEvent(s),l=o.NONE)}function H(t){!1!==n.enabled&&!0===n.preventDefault&&t.preventDefault()}n.domElement.addEventListener("contextmenu",H,!1),n.domElement.addEventListener("mousedown",L,!1),n.domElement.addEventListener("wheel",O,!1),n.domElement.addEventListener("touchstart",F,!1),n.domElement.addEventListener("touchend",z,!1),n.domElement.addEventListener("touchmove",N,!1),window.addEventListener("keydown",G,!1),this.update()};return(e.prototype=Object.create(t.EventDispatcher.prototype)).constructor=e,Object.defineProperties(e.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=t}}}),e};e.a=r()},function(t,e,i){"use strict";i.d(e,"b",function(){return r});var n=i(2);const r=(t=n)=>{if(void 0===t||void 0===t.BoxGeometry)return null;const e=t.BoxGeometry;return class extends e{constructor(e){super(1,1,1),this._location=e,this.applyMatrix((new t.Matrix4).makeTranslation(this._location.x,this._location.y,this._location.z)),this.verticesNeedUpdate=!0}resetVertices(){this.vertices[0].set(.5,.5,.5),this.vertices[1].set(.5,.5,-.5),this.vertices[2].set(.5,-.5,.5),this.vertices[3].set(.5,-.5,-.5),this.vertices[4].set(-.5,.5,-.5),this.vertices[5].set(-.5,.5,.5),this.vertices[6].set(-.5,-.5,-.5),this.vertices[7].set(-.5,-.5,.5)}set location(e){this._location=e,this.vertices[0].set(.5,.5,.5),this.vertices[1].set(.5,.5,-.5),this.vertices[2].set(.5,-.5,.5),this.vertices[3].set(.5,-.5,-.5),this.vertices[4].set(-.5,.5,-.5),this.vertices[5].set(-.5,.5,.5),this.vertices[6].set(-.5,-.5,-.5),this.vertices[7].set(-.5,-.5,.5),this.applyMatrix((new t.Matrix4).makeTranslation(this._location.x,this._location.y,this._location.z)),this.verticesNeedUpdate=!0}get location(){return this._location}}};e.a=r()},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=i(27),r=i(21),a=i(20),s=i(2);const o=(t=s)=>{if(void 0===t||void 0===t.Object3D)return null;const e=t.Object3D;return class extends e{constructor(t,e,i){super(),this._stack=t,this._textureToFilter=i,this._contourWidth=1,this._contourOpacity=1,this._canvasWidth=0,this._canvasHeight=0,this._shadersFragment=a.a,this._shadersVertex=r.a,this._uniforms=n.a.uniforms(),this._material=null,this._geometry=e,this._create()}_create(){this._prepareMaterial(),this._mesh=new t.Mesh(this._geometry,this._material),this._mesh.applyMatrix4(this._stack._ijk2LPS),this.add(this._mesh)}_prepareMaterial(){if(!this._material){this._uniforms.uWidth.value=this._contourWidth,this._uniforms.uOpacity.value=this._contourOpacity,this._uniforms.uCanvasWidth.value=this._canvasWidth,this._uniforms.uCanvasHeight.value=this._canvasHeight;let e=new a.a(this._uniforms),i=new r.a;this._material=new t.ShaderMaterial({side:t.DoubleSide,uniforms:this._uniforms,vertexShader:i.compute(),fragmentShader:e.compute(),transparent:!0})}}update(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()}dispose(){null!==this._textureToFilter&&(this._textureToFilter.dispose(),this._textureToFilter=null),this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null}get geometry(){return this._geometry}set geometry(t){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null,this._geometry.dispose(),this._geometry=null),this._geometry=t,this._create()}get textureToFilter(){return this._textureToFilter}set textureToFilter(t){this._textureToFilter=t,this._uniforms.uTextureFilled.value=t,this._material.needsUpdate=!0}get contourOpacity(){return this._contourOpacity}set contourOpacity(t){this._contourOpacity=t,this._uniforms.uOpacity.value=this._contourOpacity}get contourWidth(){return this._contourWidth}set contourWidth(t){this._contourWidth=t,this._uniforms.uWidth.value=this._contourWidth}get canvasWidth(){return this._canvasWidth}set canvasWidth(t){this._canvasWidth=t,this._uniforms.uCanvasWidth.value=this._canvasWidth}get canvasHeight(){return this._canvasHeight}set canvasHeight(t){this._canvasHeight=t,this._uniforms.uCanvasHeight.value=this._canvasHeight}}};e.a=o()},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=i(28),r=i(23),a=i(22),s=i(2);const o=(t=s)=>{if(void 0===t||void 0===t.Object3D)return null;const e=t.Object3D;return class extends e{constructor(t,e,i){super(),this._stack=t,this._referencePlane=i,this._plane1=null,this._color1=null,this._plane2=null,this._color2=null,this._plane3=null,this._color3=null,this._canvasWidth=0,this._canvasHeight=0,this._shadersFragment=a.a,this._shadersVertex=r.a,this._uniforms=n.a.uniforms(),this._material=null,this._geometry=e,this._create()}_create(){this._prepareMaterial(),this._mesh=new t.Mesh(this._geometry,this._material),this._mesh.applyMatrix(this._stack._ijk2LPS),this.add(this._mesh)}_prepareMaterial(){if(!this._material){this._uniforms.uSlice.value=this._referencePlane,this._plane1&&(this._uniforms.uPlane1.value=this._plane1,this._uniforms.uPlaneColor1.value=this._color1),this._plane2&&(this._uniforms.uPlane2.value=this._plane2,this._uniforms.uPlaneColor2.value=this._color2),this._plane3&&(this._uniforms.uPlane3.value=this._plane3,this._uniforms.uPlaneColor3.value=this._color3),this._uniforms.uCanvasWidth.value=this._canvasWidth,this._uniforms.uCanvasHeight.value=this._canvasHeight;let e=new a.a(this._uniforms),i=new r.a;this._material=new t.ShaderMaterial({side:t.DoubleSide,uniforms:this._uniforms,vertexShader:i.compute(),fragmentShader:e.compute()}),this._material.transparent=!0}}update(){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null),this._create()}dispose(){this._referencePlane=null,this._plane1=null,this._color1=null,this._plane2=null,this._color2=null,this._plane3=null,this._color3=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null}get geometry(){return this._geometry}set geometry(t){this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh=null,this._geometry.dispose(),this._geometry=null),this._geometry=t,this._create()}get referencePlane(){return this._referencePlane}set referencePlane(t){this._referencePlane=t,this._uniforms.uSlice.value=this._referencePlane}get plane1(){return this._plane1}set plane1(t){this._plane1=t,this._uniforms.uPlane1.value=this._plane1}get color1(){return this._color1}set color1(t){this._color1=t,this._uniforms.uPlaneColor1.value=this._color1}get plane2(){return this._plane2}set plane2(t){this._plane2=t,this._uniforms.uPlane2.value=this._plane2}get color2(){return this._color2}set color2(t){this._color2=t,this._uniforms.uPlaneColor2.value=this._color2}get plane3(){return this._plane3}set plane3(t){this._plane3=t,this._uniforms.uPlane3.value=this._plane3}get color3(){return this._color3}set color3(t){this._color3=t,this._uniforms.uPlaneColor3.value=this._color3}get canvasWidth(){return this._canvasWidth}set canvasWidth(t){this._canvasWidth=t,this._uniforms.uCanvasWidth.value=this._canvasWidth}get canvasHeight(){return this._canvasHeight}set canvasHeight(t){this._canvasHeight=t,this._uniforms.uCanvasHeight.value=this._canvasHeight}}};e.a=o()},function(t,e,i){"use strict";i.d(e,"b",function(){return a});var n=i(1),r=i(2);const a=(t=r)=>{if(void 0===t||void 0===t.Object3D)return null;const e=t.Object3D;return class extends e{constructor(t,e="default",i="linear",r=[[0,0,0,0],[1,1,1,1]],a=[[0,0],[1,1]],s=!1){super(),n.default.isString(t)?this._dom=document.getElementById(t):this._dom=t,this._discrete=s,this._color=r,this._lut=e,this._luts={[e]:r},this._opacity=a,this._lutO=i,this._lutsO={[i]:a},this.initCanvas(),this.paintCanvas()}initCanvas(){this._canvasContainer=this.initCanvasContainer(this._dom),this._canvasBg=this.createCanvas(),this._canvasContainer.appendChild(this._canvasBg),this._canvas=this.createCanvas(),this._canvasContainer.appendChild(this._canvas)}initCanvasContainer(t){let e=t;return e.style.border="1px solid #F9F9F9",e}createCanvas(){let t=document.createElement("canvas");return t.height=1,t.width=256,t.style.width="256px",t.style.height="16px",t}paintCanvas(){let t=this._canvas.getContext("2d");if(t.clearRect(0,0,this._canvas.width,this._canvas.height),t.globalCompositeOperation="source-over",this._discrete){t.lineWidth=2*this._canvas.height;for(let e=0;e<this._color.length;e++){let i=this._color[e][0],n=1;e<this._color.length-1&&(n=this._color[e+1][0]);let r=0;e>0&&(r=this._color[e-1][0]);let a=r+(i-r)/2,s=i+(n-i)/2,o=this._color[e],l=this._opacity[e]?this._opacity[e][1]:1;t.beginPath(),t.strokeStyle=`rgba( ${Math.round(255*o[1])}, ${Math.round(255*o[2])}, ${Math.round(255*o[3])}, ${l})`,t.moveTo(a*this._canvas.width,0),t.lineTo(s*this._canvas.width,0),t.stroke(),t.closePath()}}else{let e=t.createLinearGradient(0,0,this._canvas.width,0);for(let t=0;t<this._color.length;t++)e.addColorStop(this._color[t][0],`rgba( ${Math.round(255*this._color[t][1])}, ${Math.round(255*this._color[t][2])}, ${Math.round(255*this._color[t][3])}, 1)`);t.fillStyle=e,t.fillRect(0,0,this._canvas.width,this._canvas.height),t.globalCompositeOperation="destination-in";let i=t.createLinearGradient(0,0,this._canvas.width,0);for(let t=0;t<this._opacity.length;t++)i.addColorStop(this._opacity[t][0],"rgba(255, 255, 255, "+this._opacity[t][1]+")");t.fillStyle=i,t.fillRect(0,0,this._canvas.width,this._canvas.height)}}get texture(){let e=new t.Texture(this._canvas);return e.mapping=t.UVMapping,e.wrapS=e.wrapT=t.ClampToEdgeWrapping,e.magFilter=e.minFilter=t.NearestFilter,e.premultiplyAlpha=!0,e.needsUpdate=!0,e}set lut(t){this._color=this._luts[t],this._lut=t,this.paintCanvas()}get lut(){return this._lut}set luts(t){this._luts=t}get luts(){return this._luts}set lutO(t){this._opacity=this._lutsO[t],this._lutO=t,this.paintCanvas()}get lutO(){return this._lutO}set lutsO(t){this._lutsO=t}get lutsO(){return this._lutsO}set discrete(t){this._discrete=t,this.paintCanvas()}get discrete(){return this._discrete}lutsAvailable(t="color"){let e=[],i=this._luts;"color"!==t&&(i=this._lutsO);for(let t in i)e.push(t);return e}static presetLuts(){return{default:[[0,0,0,0],[1,1,1,1]],spectrum:[[0,0,0,0],[.1,0,0,1],[.33,0,1,1],[.5,0,1,0],[.66,1,1,0],[.9,1,0,0],[1,1,1,1]],hot_and_cold:[[0,0,0,1],[.15,0,1,1],[.3,0,1,0],[.45,0,0,0],[.5,0,0,0],[.55,0,0,0],[.7,1,1,0],[.85,1,0,0],[1,1,1,1]],gold:[[0,0,0,0],[.13,.19,.03,0],[.25,.39,.12,0],[.38,.59,.26,0],[.5,.8,.46,.08],[.63,.99,.71,.21],[.75,.99,.88,.34],[.88,.99,.99,.48],[1,.9,.95,.61]],red:[[0,.75,0,0],[.5,1,.5,0],[.95,1,1,0],[1,1,1,1]],green:[[0,0,.75,0],[.5,.5,1,0],[.95,1,1,0],[1,1,1,1]],blue:[[0,0,0,1],[.5,0,.5,1],[.95,0,1,1],[1,1,1,1]],walking_dead:[[0,.1,1,1],[1,1,1,1]],random:[[0,0,0,0],[.27,.18,.18,.18],[.41,1,1,1],[.7,1,0,0],[1,1,1,1]],muscle_bone:[[0,0,0,0],[.00392156862745098,.00784313725490196,0,0],[.00784313725490196,.0196078431372549,0,0],[.011764705882352941,.03137254901960784,0,0],[.01568627450980392,.0392156862745098,0,.00392156862745098],[.0196078431372549,.050980392156862744,.00392156862745098,.00392156862745098],[.023529411764705882,.06274509803921569,.00392156862745098,.00392156862745098],[.027450980392156862,.07058823529411765,.00392156862745098,.00784313725490196],[.03137254901960784,.08235294117647059,.00392156862745098,.00784313725490196],[.03529411764705882,.09411764705882353,.00784313725490196,.00784313725490196],[.0392156862745098,.10196078431372549,.00784313725490196,.00784313725490196],[.043137254901960784,.11372549019607843,.00784313725490196,.011764705882352941],[.047058823529411764,.12549019607843137,.00784313725490196,.011764705882352941],[.050980392156862744,.13333333333333333,.011764705882352941,.011764705882352941],[.054901960784313725,.1450980392156863,.011764705882352941,.01568627450980392],[.058823529411764705,.1568627450980392,.011764705882352941,.01568627450980392],[.06274509803921569,.16470588235294117,.011764705882352941,.01568627450980392],[.06666666666666667,.17647058823529413,.011764705882352941,.0196078431372549],[.07058823529411765,.18823529411764706,.01568627450980392,.0196078431372549],[.07450980392156863,.2,.01568627450980392,.0196078431372549],[.0784313725490196,.20784313725490197,.01568627450980392,.0196078431372549],[.08235294117647059,.2196078431372549,.01568627450980392,.023529411764705882],[.08627450980392157,.23137254901960785,.0196078431372549,.023529411764705882],[.09019607843137255,.23921568627450981,.0196078431372549,.023529411764705882],[.09411764705882353,.25098039215686274,.0196078431372549,.027450980392156862],[.09803921568627451,.2627450980392157,.0196078431372549,.027450980392156862],[.10196078431372549,.27058823529411763,.023529411764705882,.027450980392156862],[.10588235294117647,.2823529411764706,.023529411764705882,.027450980392156862],[.10980392156862745,.29411764705882354,.023529411764705882,.03137254901960784],[.11372549019607843,.30196078431372547,.023529411764705882,.03137254901960784],[.11764705882352941,.3137254901960784,.023529411764705882,.03137254901960784],[.12156862745098039,.3254901960784314,.027450980392156862,.03529411764705882],[.12549019607843137,.3333333333333333,.027450980392156862,.03529411764705882],[.12941176470588237,.34509803921568627,.027450980392156862,.03529411764705882],[.13333333333333333,.3568627450980392,.027450980392156862,.0392156862745098],[.13725490196078433,.36470588235294116,.03137254901960784,.0392156862745098],[.1411764705882353,.3764705882352941,.03137254901960784,.0392156862745098],[.1450980392156863,.38823529411764707,.03137254901960784,.0392156862745098],[.14901960784313725,.4,.03137254901960784,.043137254901960784],[.15294117647058825,.40784313725490196,.03529411764705882,.043137254901960784],[.1568627450980392,.4196078431372549,.03529411764705882,.043137254901960784],[.1607843137254902,.43137254901960786,.03529411764705882,.047058823529411764],[.16470588235294117,.4392156862745098,.03529411764705882,.047058823529411764],[.16862745098039217,.45098039215686275,.03529411764705882,.047058823529411764],[.17254901960784313,.4627450980392157,.0392156862745098,.047058823529411764],[.17647058823529413,.47058823529411764,.0392156862745098,.050980392156862744],[.1803921568627451,.4823529411764706,.0392156862745098,.050980392156862744],[.1843137254901961,.49411764705882355,.0392156862745098,.050980392156862744],[.18823529411764706,.5019607843137255,.043137254901960784,.054901960784313725],[.19215686274509805,.5137254901960784,.043137254901960784,.054901960784313725],[.19607843137254902,.5254901960784314,.043137254901960784,.054901960784313725],[.2,.5333333333333333,.043137254901960784,.058823529411764705],[.20392156862745098,.5450980392156862,.047058823529411764,.058823529411764705],[.20784313725490197,.5568627450980392,.047058823529411764,.058823529411764705],[.21176470588235294,.5647058823529412,.047058823529411764,.058823529411764705],[.21568627450980393,.5764705882352941,.047058823529411764,.06274509803921569],[.2196078431372549,.5882352941176471,.047058823529411764,.06274509803921569],[.2235294117647059,.6,.050980392156862744,.06274509803921569],[.22745098039215686,.6078431372549019,.050980392156862744,.06666666666666667],[.23137254901960785,.6196078431372549,.050980392156862744,.06666666666666667],[.23529411764705882,.6313725490196078,.050980392156862744,.06666666666666667],[.23921568627450981,.6392156862745098,.054901960784313725,.06666666666666667],[.24313725490196078,.6509803921568628,.054901960784313725,.07058823529411765],[.24705882352941178,.6627450980392157,.054901960784313725,.07058823529411765],[.25098039215686274,.6705882352941176,.054901960784313725,.07058823529411765],[.2549019607843137,.6823529411764706,.058823529411764705,.07450980392156863],[.25882352941176473,.6941176470588235,.058823529411764705,.07450980392156863],[.2627450980392157,.7019607843137254,.058823529411764705,.07450980392156863],[.26666666666666666,.7137254901960784,.058823529411764705,.0784313725490196],[.27058823529411763,.7254901960784313,.058823529411764705,.0784313725490196],[.27450980392156865,.7333333333333333,.06274509803921569,.0784313725490196],[.2784313725490196,.7450980392156863,.06274509803921569,.0784313725490196],[.2823529411764706,.7568627450980392,.06274509803921569,.08235294117647059],[.28627450980392155,.7647058823529411,.06274509803921569,.08235294117647059],[.2901960784313726,.7764705882352941,.06666666666666667,.08235294117647059],[.29411764705882354,.788235294117647,.06666666666666667,.08627450980392157],[.2980392156862745,.8,.06666666666666667,.08627450980392157],[.30196078431372547,.807843137254902,.06666666666666667,.08627450980392157],[.3058823529411765,.8196078431372549,.07058823529411765,.08627450980392157],[.30980392156862746,.8313725490196079,.07058823529411765,.09019607843137255],[.3137254901960784,.8392156862745098,.07058823529411765,.09019607843137255],[.3176470588235294,.8509803921568627,.07058823529411765,.09019607843137255],[.3215686274509804,.8627450980392157,.07058823529411765,.09411764705882353],[.3254901960784314,.8705882352941177,.07450980392156863,.09411764705882353],[.32941176470588235,.8823529411764706,.07450980392156863,.09411764705882353],[.3333333333333333,.8941176470588236,.07450980392156863,.09803921568627451],[.33725490196078434,.9019607843137255,.07450980392156863,.09803921568627451],[.3411764705882353,.9137254901960784,.0784313725490196,.09803921568627451],[.34509803921568627,.9254901960784314,.0784313725490196,.09803921568627451],[.34901960784313724,.9333333333333333,.0784313725490196,.10196078431372549],[.35294117647058826,.9450980392156862,.0784313725490196,.10196078431372549],[.3568627450980392,.9568627450980393,.08235294117647059,.10196078431372549],[.3607843137254902,.9647058823529412,.08235294117647059,.10588235294117647],[.36470588235294116,.9764705882352941,.08235294117647059,.10588235294117647],[.3686274509803922,.9882352941176471,.08235294117647059,.10588235294117647],[.37254901960784315,1,.08235294117647059,.10588235294117647],[.3764705882352941,1,.09411764705882353,.10588235294117647],[.3803921568627451,1,.10588235294117647,.10588235294117647],[.3843137254901961,1,.11764705882352941,.10196078431372549],[.38823529411764707,1,.12941176470588237,.10196078431372549],[.39215686274509803,1,.1411764705882353,.10196078431372549],[.396078431372549,1,.15294117647058825,.09803921568627451],[.4,1,.16470588235294117,.09803921568627451],[.403921568627451,1,.17647058823529413,.09803921568627451],[.40784313725490196,1,.18823529411764706,.09411764705882353],[.4117647058823529,1,.2,.09411764705882353],[.41568627450980394,1,.21176470588235294,.09411764705882353],[.4196078431372549,1,.2235294117647059,.09019607843137255],[.4235294117647059,1,.23529411764705882,.09019607843137255],[.42745098039215684,1,.24705882352941178,.08627450980392157],[.43137254901960786,1,.25882352941176473,.08627450980392157],[.43529411764705883,1,.27058823529411763,.08627450980392157],[.4392156862745098,1,.2823529411764706,.08235294117647059],[.44313725490196076,1,.29411764705882354,.08235294117647059],[.4470588235294118,1,.3058823529411765,.08235294117647059],[.45098039215686275,1,.3176470588235294,.0784313725490196],[.4549019607843137,1,.32941176470588235,.0784313725490196],[.4588235294117647,1,.3411764705882353,.0784313725490196],[.4627450980392157,1,.35294117647058826,.07450980392156863],[.4666666666666667,1,.36470588235294116,.07450980392156863],[.47058823529411764,1,.3764705882352941,.07450980392156863],[.4745098039215686,1,.38823529411764707,.07058823529411765],[.47843137254901963,1,.4,.07058823529411765],[.4823529411764706,1,.4117647058823529,.07058823529411765],[.48627450980392156,1,.4235294117647059,.06666666666666667],[.49019607843137253,1,.43529411764705883,.06666666666666667],[.49411764705882355,1,.4470588235294118,.06274509803921569],[.4980392156862745,1,.4588235294117647,.06274509803921569],[.5019607843137255,1,.47058823529411764,.06274509803921569],[.5058823529411764,1,.4823529411764706,.058823529411764705],[.5098039215686274,1,.49411764705882355,.058823529411764705],[.5137254901960784,1,.5058823529411764,.058823529411764705],[.5176470588235295,1,.5137254901960784,.054901960784313725],[.5215686274509804,1,.5254901960784314,.054901960784313725],[.5254901960784314,1,.5372549019607843,.054901960784313725],[.5294117647058824,1,.5490196078431373,.050980392156862744],[.5333333333333333,1,.5607843137254902,.050980392156862744],[.5372549019607843,1,.5725490196078431,.050980392156862744],[.5411764705882353,1,.5843137254901961,.047058823529411764],[.5450980392156862,1,.596078431372549,.047058823529411764],[.5490196078431373,1,.6078431372549019,.043137254901960784],[.5529411764705883,1,.6196078431372549,.043137254901960784],[.5568627450980392,1,.6313725490196078,.043137254901960784],[.5607843137254902,1,.6431372549019608,.0392156862745098],[.5647058823529412,1,.6549019607843137,.0392156862745098],[.5686274509803921,1,.6666666666666666,.0392156862745098],[.5725490196078431,1,.6784313725490196,.03529411764705882],[.5764705882352941,1,.6901960784313725,.03529411764705882],[.5803921568627451,1,.6941176470588235,.0392156862745098],[.5843137254901961,1,.7019607843137254,.0392156862745098],[.5882352941176471,1,.7058823529411765,.043137254901960784],[.592156862745098,1,.7098039215686275,.043137254901960784],[.596078431372549,1,.7137254901960784,.047058823529411764],[.6,1,.7176470588235294,.047058823529411764],[.6039215686274509,1,.7254901960784313,.050980392156862744],[.6078431372549019,1,.7294117647058823,.050980392156862744],[.611764705882353,1,.7333333333333333,.054901960784313725],[.615686274509804,1,.7372549019607844,.058823529411764705],[.6196078431372549,1,.7411764705882353,.058823529411764705],[.6235294117647059,1,.7490196078431373,.06274509803921569],[.6274509803921569,1,.7529411764705882,.06274509803921569],[.6313725490196078,1,.7568627450980392,.06666666666666667],[.6352941176470588,1,.7607843137254902,.06666666666666667],[.6392156862745098,1,.7647058823529411,.07058823529411765],[.6431372549019608,1,.7725490196078432,.07058823529411765],[.6470588235294118,1,.7764705882352941,.07450980392156863],[.6509803921568628,1,.7803921568627451,.07450980392156863],[.6549019607843137,1,.7843137254901961,.0784313725490196],[.6588235294117647,1,.788235294117647,.08235294117647059],[.6627450980392157,1,.796078431372549,.08235294117647059],[.6666666666666666,1,.8,.08627450980392157],[.6705882352941176,1,.803921568627451,.08627450980392157],[.6745098039215687,1,.807843137254902,.09019607843137255],[.6784313725490196,1,.8117647058823529,.09019607843137255],[.6823529411764706,1,.8196078431372549,.09411764705882353],[.6862745098039216,1,.8235294117647058,.09411764705882353],[.6901960784313725,1,.8274509803921568,.09803921568627451],[.6941176470588235,1,.8313725490196079,.10196078431372549],[.6980392156862745,1,.8352941176470589,.10196078431372549],[.7019607843137254,1,.8431372549019608,.10588235294117647],[.7058823529411765,1,.8470588235294118,.10588235294117647],[.7098039215686275,1,.8509803921568627,.10980392156862745],[.7137254901960784,1,.8549019607843137,.10980392156862745],[.7176470588235294,1,.8627450980392157,.11372549019607843],[.7215686274509804,1,.8666666666666667,.11372549019607843],[.7254901960784313,1,.8705882352941177,.11764705882352941],[.7294117647058823,1,.8745098039215686,.12156862745098039],[.7333333333333333,1,.8784313725490196,.12156862745098039],[.7372549019607844,1,.8862745098039215,.12549019607843137],[.7411764705882353,1,.8901960784313725,.12549019607843137],[.7450980392156863,1,.8941176470588236,.12941176470588237],[.7490196078431373,1,.8980392156862745,.12941176470588237],[.7529411764705882,1,.9019607843137255,.13333333333333333],[.7568627450980392,1,.9098039215686274,.13333333333333333],[.7607843137254902,1,.9137254901960784,.13725490196078433],[.7647058823529411,1,.9176470588235294,.1411764705882353],[.7686274509803922,1,.9215686274509803,.1411764705882353],[.7725490196078432,1,.9254901960784314,.1450980392156863],[.7764705882352941,1,.9333333333333333,.1450980392156863],[.7803921568627451,1,.9372549019607843,.14901960784313725],[.7843137254901961,1,.9411764705882353,.14901960784313725],[.788235294117647,1,.9450980392156862,.15294117647058825],[.792156862745098,1,.9450980392156862,.16862745098039217],[.796078431372549,1,.9490196078431372,.1843137254901961],[.8,1,.9490196078431372,.2],[.803921568627451,1,.9490196078431372,.21568627450980393],[.807843137254902,1,.9490196078431372,.22745098039215686],[.8117647058823529,1,.9529411764705882,.24313725490196078],[.8156862745098039,1,.9529411764705882,.25882352941176473],[.8196078431372549,1,.9529411764705882,.27450980392156865],[.8235294117647058,1,.9529411764705882,.2901960784313726],[.8274509803921568,1,.9568627450980393,.3058823529411765],[.8313725490196079,1,.9568627450980393,.3215686274509804],[.8352941176470589,1,.9568627450980393,.33725490196078434],[.8392156862745098,1,.9568627450980393,.35294117647058826],[.8431372549019608,1,.9607843137254902,.3686274509803922],[.8470588235294118,1,.9607843137254902,.3843137254901961],[.8509803921568627,1,.9607843137254902,.4],[.8549019607843137,1,.9607843137254902,.4117647058823529],[.8588235294117647,1,.9647058823529412,.42745098039215684],[.8627450980392157,1,.9647058823529412,.44313725490196076],[.8666666666666667,1,.9647058823529412,.4588235294117647],[.8705882352941177,1,.9647058823529412,.4745098039215686],[.8745098039215686,1,.9686274509803922,.49019607843137253],[.8784313725490196,1,.9686274509803922,.5058823529411764],[.8823529411764706,1,.9686274509803922,.5215686274509804],[.8862745098039215,1,.9686274509803922,.5372549019607843],[.8901960784313725,1,.9725490196078431,.5529411764705883],[.8941176470588236,1,.9725490196078431,.5686274509803921],[.8980392156862745,1,.9725490196078431,.5843137254901961],[.9019607843137255,1,.9725490196078431,.6],[.9058823529411765,1,.9725490196078431,.611764705882353],[.9098039215686274,1,.9764705882352941,.6274509803921569],[.9137254901960784,1,.9764705882352941,.6431372549019608],[.9176470588235294,1,.9764705882352941,.6588235294117647],[.9215686274509803,1,.9764705882352941,.6745098039215687],[.9254901960784314,1,.9803921568627451,.6901960784313725],[.9294117647058824,1,.9803921568627451,.7058823529411765],[.9333333333333333,1,.9803921568627451,.7215686274509804],[.9372549019607843,1,.9803921568627451,.7372549019607844],[.9411764705882353,1,.984313725490196,.7529411764705882],[.9450980392156862,1,.984313725490196,.7686274509803922],[.9490196078431372,1,.984313725490196,.7843137254901961],[.9529411764705882,1,.984313725490196,.8],[.9568627450980393,1,.9882352941176471,.8117647058823529],[.9607843137254902,1,.9882352941176471,.8274509803921568],[.9647058823529412,1,.9882352941176471,.8431372549019608],[.9686274509803922,1,.9882352941176471,.8588235294117647],[.9725490196078431,1,.9921568627450981,.8745098039215686],[.9764705882352941,1,.9921568627450981,.8901960784313725],[.9803921568627451,1,.9921568627450981,.9058823529411765],[.984313725490196,1,.9921568627450981,.9215686274509803],[.9882352941176471,1,.996078431372549,.9372549019607843],[.9921568627450981,1,.996078431372549,.9529411764705882],[.996078431372549,1,.996078431372549,.9686274509803922],[1,1,.996078431372549,.984313725490196]]}}static presetLutsO(){return{linear:[[0,0],[1,1]],lowpass:[[0,.8],[.2,.6],[.3,.1],[1,0]],bandpass:[[0,0],[.4,.8],[.6,.8],[1,0]],highpass:[[0,0],[.7,.1],[.8,.6],[1,.8]],flat:[[0,.7],[1,1]],random:[[0,0],[.38,0],[.55,1],[.72,1],[1,.05]],linear_full:[[0,0],[.00392156862745098,.00392156862745098],[.00784313725490196,.00784313725490196],[.011764705882352941,.011764705882352941],[.01568627450980392,.01568627450980392],[.0196078431372549,.0196078431372549],[.023529411764705882,.023529411764705882],[.027450980392156862,.027450980392156862],[.03137254901960784,.03137254901960784],[.03529411764705882,.03529411764705882],[.0392156862745098,.0392156862745098],[.043137254901960784,.043137254901960784],[.047058823529411764,.047058823529411764],[.050980392156862744,.050980392156862744],[.054901960784313725,.054901960784313725],[.058823529411764705,.058823529411764705],[.06274509803921569,.06274509803921569],[.06666666666666667,.06666666666666667],[.07058823529411765,.07058823529411765],[.07450980392156863,.07450980392156863],[.0784313725490196,.0784313725490196],[.08235294117647059,.08235294117647059],[.08627450980392157,.08627450980392157],[.09019607843137255,.09019607843137255],[.09411764705882353,.09411764705882353],[.09803921568627451,.09803921568627451],[.10196078431372549,.10196078431372549],[.10588235294117647,.10588235294117647],[.10980392156862745,.10980392156862745],[.11372549019607843,.11372549019607843],[.11764705882352941,.11764705882352941],[.12156862745098039,.12156862745098039],[.12549019607843137,.12549019607843137],[.12941176470588237,.12941176470588237],[.13333333333333333,.13333333333333333],[.13725490196078433,.13725490196078433],[.1411764705882353,.1411764705882353],[.1450980392156863,.1450980392156863],[.14901960784313725,.14901960784313725],[.15294117647058825,.15294117647058825],[.1568627450980392,.1568627450980392],[.1607843137254902,.1607843137254902],[.16470588235294117,.16470588235294117],[.16862745098039217,.16862745098039217],[.17254901960784313,.17254901960784313],[.17647058823529413,.17647058823529413],[.1803921568627451,.1803921568627451],[.1843137254901961,.1843137254901961],[.18823529411764706,.18823529411764706],[.19215686274509805,.19215686274509805],[.19607843137254902,.19607843137254902],[.2,.2],[.20392156862745098,.20392156862745098],[.20784313725490197,.20784313725490197],[.21176470588235294,.21176470588235294],[.21568627450980393,.21568627450980393],[.2196078431372549,.2196078431372549],[.2235294117647059,.2235294117647059],[.22745098039215686,.22745098039215686],[.23137254901960785,.23137254901960785],[.23529411764705882,.23529411764705882],[.23921568627450981,.23921568627450981],[.24313725490196078,.24313725490196078],[.24705882352941178,.24705882352941178],[.25098039215686274,.25098039215686274],[.2549019607843137,.2549019607843137],[.25882352941176473,.25882352941176473],[.2627450980392157,.2627450980392157],[.26666666666666666,.26666666666666666],[.27058823529411763,.27058823529411763],[.27450980392156865,.27450980392156865],[.2784313725490196,.2784313725490196],[.2823529411764706,.2823529411764706],[.28627450980392155,.28627450980392155],[.2901960784313726,.2901960784313726],[.29411764705882354,.29411764705882354],[.2980392156862745,.2980392156862745],[.30196078431372547,.30196078431372547],[.3058823529411765,.3058823529411765],[.30980392156862746,.30980392156862746],[.3137254901960784,.3137254901960784],[.3176470588235294,.3176470588235294],[.3215686274509804,.3215686274509804],[.3254901960784314,.3254901960784314],[.32941176470588235,.32941176470588235],[.3333333333333333,.3333333333333333],[.33725490196078434,.33725490196078434],[.3411764705882353,.3411764705882353],[.34509803921568627,.34509803921568627],[.34901960784313724,.34901960784313724],[.35294117647058826,.35294117647058826],[.3568627450980392,.3568627450980392],[.3607843137254902,.3607843137254902],[.36470588235294116,.36470588235294116],[.3686274509803922,.3686274509803922],[.37254901960784315,.37254901960784315],[.3764705882352941,.3764705882352941],[.3803921568627451,.3803921568627451],[.3843137254901961,.3843137254901961],[.38823529411764707,.38823529411764707],[.39215686274509803,.39215686274509803],[.396078431372549,.396078431372549],[.4,.4],[.403921568627451,.403921568627451],[.40784313725490196,.40784313725490196],[.4117647058823529,.4117647058823529],[.41568627450980394,.41568627450980394],[.4196078431372549,.4196078431372549],[.4235294117647059,.4235294117647059],[.42745098039215684,.42745098039215684],[.43137254901960786,.43137254901960786],[.43529411764705883,.43529411764705883],[.4392156862745098,.4392156862745098],[.44313725490196076,.44313725490196076],[.4470588235294118,.4470588235294118],[.45098039215686275,.45098039215686275],[.4549019607843137,.4549019607843137],[.4588235294117647,.4588235294117647],[.4627450980392157,.4627450980392157],[.4666666666666667,.4666666666666667],[.47058823529411764,.47058823529411764],[.4745098039215686,.4745098039215686],[.47843137254901963,.47843137254901963],[.4823529411764706,.4823529411764706],[.48627450980392156,.48627450980392156],[.49019607843137253,.49019607843137253],[.49411764705882355,.49411764705882355],[.4980392156862745,.4980392156862745],[.5019607843137255,.5019607843137255],[.5058823529411764,.5058823529411764],[.5098039215686274,.5098039215686274],[.5137254901960784,.5137254901960784],[.5176470588235295,.5176470588235295],[.5215686274509804,.5215686274509804],[.5254901960784314,.5254901960784314],[.5294117647058824,.5294117647058824],[.5333333333333333,.5333333333333333],[.5372549019607843,.5372549019607843],[.5411764705882353,.5411764705882353],[.5450980392156862,.5450980392156862],[.5490196078431373,.5490196078431373],[.5529411764705883,.5529411764705883],[.5568627450980392,.5568627450980392],[.5607843137254902,.5607843137254902],[.5647058823529412,.5647058823529412],[.5686274509803921,.5686274509803921],[.5725490196078431,.5725490196078431],[.5764705882352941,.5764705882352941],[.5803921568627451,.5803921568627451],[.5843137254901961,.5843137254901961],[.5882352941176471,.5882352941176471],[.592156862745098,.592156862745098],[.596078431372549,.596078431372549],[.6,.6],[.6039215686274509,.6039215686274509],[.6078431372549019,.6078431372549019],[.611764705882353,.611764705882353],[.615686274509804,.615686274509804],[.6196078431372549,.6196078431372549],[.6235294117647059,.6235294117647059],[.6274509803921569,.6274509803921569],[.6313725490196078,.6313725490196078],[.6352941176470588,.6352941176470588],[.6392156862745098,.6392156862745098],[.6431372549019608,.6431372549019608],[.6470588235294118,.6470588235294118],[.6509803921568628,.6509803921568628],[.6549019607843137,.6549019607843137],[.6588235294117647,.6588235294117647],[.6627450980392157,.6627450980392157],[.6666666666666666,.6666666666666666],[.6705882352941176,.6705882352941176],[.6745098039215687,.6745098039215687],[.6784313725490196,.6784313725490196],[.6823529411764706,.6823529411764706],[.6862745098039216,.6862745098039216],[.6901960784313725,.6901960784313725],[.6941176470588235,.6941176470588235],[.6980392156862745,.6980392156862745],[.7019607843137254,.7019607843137254],[.7058823529411765,.7058823529411765],[.7098039215686275,.7098039215686275],[.7137254901960784,.7137254901960784],[.7176470588235294,.7176470588235294],[.7215686274509804,.7215686274509804],[.7254901960784313,.7254901960784313],[.7294117647058823,.7294117647058823],[.7333333333333333,.7333333333333333],[.7372549019607844,.7372549019607844],[.7411764705882353,.7411764705882353],[.7450980392156863,.7450980392156863],[.7490196078431373,.7490196078431373],[.7529411764705882,.7529411764705882],[.7568627450980392,.7568627450980392],[.7607843137254902,.7607843137254902],[.7647058823529411,.7647058823529411],[.7686274509803922,.7686274509803922],[.7725490196078432,.7725490196078432],[.7764705882352941,.7764705882352941],[.7803921568627451,.7803921568627451],[.7843137254901961,.7843137254901961],[.788235294117647,.788235294117647],[.792156862745098,.792156862745098],[.796078431372549,.796078431372549],[.8,.8],[.803921568627451,.803921568627451],[.807843137254902,.807843137254902],[.8117647058823529,.8117647058823529],[.8156862745098039,.8156862745098039],[.8196078431372549,.8196078431372549],[.8235294117647058,.8235294117647058],[.8274509803921568,.8274509803921568],[.8313725490196079,.8313725490196079],[.8352941176470589,.8352941176470589],[.8392156862745098,.8392156862745098],[.8431372549019608,.8431372549019608],[.8470588235294118,.8470588235294118],[.8509803921568627,.8509803921568627],[.8549019607843137,.8549019607843137],[.8588235294117647,.8588235294117647],[.8627450980392157,.8627450980392157],[.8666666666666667,.8666666666666667],[.8705882352941177,.8705882352941177],[.8745098039215686,.8745098039215686],[.8784313725490196,.8784313725490196],[.8823529411764706,.8823529411764706],[.8862745098039215,.8862745098039215],[.8901960784313725,.8901960784313725],[.8941176470588236,.8941176470588236],[.8980392156862745,.8980392156862745],[.9019607843137255,.9019607843137255],[.9058823529411765,.9058823529411765],[.9098039215686274,.9098039215686274],[.9137254901960784,.9137254901960784],[.9176470588235294,.9176470588235294],[.9215686274509803,.9215686274509803],[.9254901960784314,.9254901960784314],[.9294117647058824,.9294117647058824],[.9333333333333333,.9333333333333333],[.9372549019607843,.9372549019607843],[.9411764705882353,.9411764705882353],[.9450980392156862,.9450980392156862],[.9490196078431372,.9490196078431372],[.9529411764705882,.9529411764705882],[.9568627450980393,.9568627450980393],[.9607843137254902,.9607843137254902],[.9647058823529412,.9647058823529412],[.9686274509803922,.9686274509803922],[.9725490196078431,.9725490196078431],[.9764705882352941,.9764705882352941],[.9803921568627451,.9803921568627451],[.984313725490196,.984313725490196],[.9882352941176471,.9882352941176471],[.9921568627450981,.9921568627450981],[.996078431372549,.996078431372549],[1,1]]}}}};e.a=a()},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=i(17),r=i(18),a=i(19),s=i(2);const o=(t=s)=>{if(void 0===t||void 0===t.Object3D)return null;const e=t.Object3D;return class extends e{constructor(t){super(),this._stack=t,this._bBox=null,this._slice=null,this._border=null,this._dummy=null,this._orientation=0,this._index=0,this._uniforms=null,this._autoWindowLevel=!1,this._outOfBounds=!1,this._orientationMaxIndex=0,this._orientationSpacing=0,this._canvasWidth=0,this._canvasHeight=0,this._borderColor=null,this._create()}get stack(){return this._stack}set stack(t){this._stack=t}get bbox(){return this._bBox}get slice(){return this._slice}get border(){return this._border}get index(){return this._index}set index(t){this._index=t,this._slice.index=t;let e=this._stack.halfDimensionsIJK;this._slice.planePosition=this._prepareSlicePosition(e,this._index),this._border.helpersSlice=this._slice,this._isIndexOutOfBounds()}set orientation(t){this._orientation=t,this._computeOrientationMaxIndex(),this._computeOrientationSpacing(),this._slice.spacing=Math.abs(this._orientationSpacing),this._slice.thickness=this._slice.spacing,this._slice.planeDirection=this._prepareDirection(this._orientation),this._border.helpersSlice=this._slice}get orientation(){return this._orientation}set outOfBounds(t){this._outOfBounds=t}get outOfBounds(){return this._outOfBounds}set orientationMaxIndex(t){this._orientationMaxIndex=t}get orientationMaxIndex(){return this._orientationMaxIndex}set orientationSpacing(t){this._orientationSpacing=t}get orientationSpacing(){return this._orientationSpacing}set canvasWidth(t){this._canvasWidth=t,this._slice.canvasWidth=this._canvasWidth}get canvasWidth(){return this._canvasWidth}set canvasHeight(t){this._canvasHeight=t,this._slice.canvasHeight=this._canvasHeight}get canvasHeight(){return this._canvasHeight}set borderColor(t){this._borderColor=t,this._border.color=t,this._slice.borderColor=this._borderColor}get borderColor(){return this._borderColor}_create(){this._stack?(this._prepareStack(),this._prepareBBox(),this._prepareSlice(),this._prepareBorder()):window.console.log("no stack to be prepared...")}_computeOrientationSpacing(){let t=this._stack._spacing;switch(this._orientation){case 0:this._orientationSpacing=t.z;break;case 1:this._orientationSpacing=t.x;break;case 2:this._orientationSpacing=t.y;break;default:this._orientationSpacing=0}}_computeOrientationMaxIndex(){let t=this._stack.dimensionsIJK;switch(this._orientationMaxIndex=0,this._orientation){case 0:this._orientationMaxIndex=t.z-1;break;case 1:this._orientationMaxIndex=t.x-1;break;case 2:this._orientationMaxIndex=t.y-1}}_isIndexOutOfBounds(){this._computeOrientationMaxIndex(),this._index>=this._orientationMaxIndex||this._index<0?this._outOfBounds=!0:this._outOfBounds=!1}_prepareStack(){this._stack.prepared||this._stack.prepare(),this._stack.packed||this._stack.pack()}_prepareBBox(){const e=Object(r.b)(t);this._bBox=new e(this._stack),this.add(this._bBox)}_prepareBorder(){const e=Object(n.b)(t);this._border=new e(this._slice),this.add(this._border)}_prepareSlice(){let e=this._stack.halfDimensionsIJK;this._index=this._prepareSliceIndex(e);let i=this._prepareSlicePosition(e,this._index),n=this._prepareDirection(this._orientation);const r=Object(a.b)(t);this._slice=new r(this._stack,this._index,i,n),this.add(this._slice)}_prepareSliceIndex(t){let e=0;switch(this._orientation){case 0:e=Math.floor(t.z);break;case 1:e=Math.floor(t.x);break;case 2:e=Math.floor(t.y)}return e}_prepareSlicePosition(e,i){let n=new t.Vector3(0,0,0);switch(this._orientation){case 0:n=new t.Vector3(Math.floor(e.x),Math.floor(e.y),i);break;case 1:n=new t.Vector3(i,Math.floor(e.y),Math.floor(e.z));break;case 2:n=new t.Vector3(Math.floor(e.x),i,Math.floor(e.z))}return n}_prepareDirection(e){let i=new t.Vector3(0,0,1);switch(e){case 0:i=new t.Vector3(0,0,1);break;case 1:i=new t.Vector3(1,0,0);break;case 2:i=new t.Vector3(0,1,0)}return i}dispose(){this.remove(this._slice),this._slice.dispose(),this._slice=null,this._bBox.dispose(),this._bBox=null,this._border.dispose(),this._border=null}}};e.a=o()},function(t,e,i){"use strict";i.d(e,"b",function(){return l});var n=i(24),r=i(34),a=i(33),s=i(44),o=i(2);const l=(t=o)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(s.a)(t);return class extends e{constructor(t){super(),this._stack=t,this._textures=[],this._shadersFragment=a.a,this._shadersVertex=r.a,this._uniforms=n.a.uniforms(),this._material=null,this._geometry=null,this._mesh=null,this._algorithm=0,this._alphaCorrection=.5,this._interpolation=1,this._shading=1,this._shininess=10,this._steps=256,this._offset=0,this._windowCenter=0,this._windowWidth=1,this._create()}_create(){this._prepareStack(),this._prepareTexture(),this._prepareMaterial(),this._prepareGeometry(),this._mesh=new t.Mesh(this._geometry,this._material),this.add(this._mesh)}_prepareStack(){this._stack.prepared||this._stack.prepare(),this._stack.packed||this._stack.pack(),this._offset=Math.min(0,this._stack._minMax[0]),this._windowCenter=this._stack.windowCenter,this._windowWidth=.8*this._stack.windowWidth}_prepareMaterial(){this._uniforms=n.a.uniforms(),this._uniforms.uWorldBBox.value=this._stack.worldBoundingBox(),this._uniforms.uTextureSize.value=this._stack.textureSize,this._uniforms.uTextureContainer.value=this._textures,this._stack.textureUnits>8&&(this._uniforms.uTextureContainer.length=14),this._uniforms.uWorldToData.value=this._stack.lps2IJK,this._uniforms.uNumberOfChannels.value=this._stack.numberOfChannels,this._uniforms.uPixelType.value=this._stack.pixelType,this._uniforms.uBitsAllocated.value=this._stack.bitsAllocated,this._uniforms.uPackedPerPixel.value=this._stack.packedPerPixel,this._uniforms.uWindowCenterWidth.value=[this._windowCenter-this._offset,this._windowWidth],this._uniforms.uRescaleSlopeIntercept.value=[this._stack.rescaleSlope,this._stack.rescaleIntercept],this._uniforms.uDataDimensions.value=[this._stack.dimensionsIJK.x,this._stack.dimensionsIJK.y,this._stack.dimensionsIJK.z],this._uniforms.uAlphaCorrection.value=this._alphaCorrection,this._uniforms.uInterpolation.value=this._interpolation,this._uniforms.uShading.value=this._shading,this._uniforms.uShininess.value=this._shininess,this._uniforms.uSteps.value=this._steps,this._uniforms.uAlgorithm.value=this._algorithm,this._createMaterial({side:t.BackSide,transparent:!0})}_prepareGeometry(){let e=this._stack.worldBoundingBox(),i=this._stack.worldCenter();this._geometry=new t.BoxGeometry(e[1]-e[0],e[3]-e[2],e[5]-e[4]),this._geometry.applyMatrix4((new t.Matrix4).makeTranslation(i.x,i.y,i.z))}get uniforms(){return this._uniforms}set uniforms(t){this._uniforms=t}set mesh(t){this._mesh=t}get mesh(){return this._mesh}get stack(){return this._stack}set stack(t){this._stack=t}get windowCenter(){return this._windowCenter}set windowCenter(t){this._windowCenter=t,this._uniforms.uWindowCenterWidth.value[0]=this._windowCenter-this._offset}get windowWidth(){return this._windowWidth}set windowWidth(t){this._windowWidth=Math.max(1,t),this._uniforms.uWindowCenterWidth.value[1]=this._windowWidth}get steps(){return this._steps}set steps(t){this._steps=t,this._uniforms.uSteps.value=this._steps}get alphaCorrection(){return this._alphaCorrection}set alphaCorrection(t){this._alphaCorrection=t,this._uniforms.uAlphaCorrection.value=this._alphaCorrection}get interpolation(){return this._interpolation}set interpolation(t){this._interpolation=t,this._uniforms.uInterpolation.value=this._interpolation,this._updateMaterial()}get shading(){return this._shading}set shading(t){this._shading=t,this._uniforms.uShading.value=this._shading}get shininess(){return this._shininess}set shininess(t){this._shininess=t,this._uniforms.uShininess.value=this._shininess}get algorithm(){return this._algorithm}set algorithm(t){this._algorithm=t,this._uniforms.uAlgorithm.value=this._algorithm}dispose(){for(let t=0;t<this._textures.length;t++)this._textures[t].dispose(),this._textures[t]=null;this._textures=null,this._shadersFragment=null,this._shadersVertex=null,this._uniforms.uTextureContainer=null,this._uniforms.uTextureLUT=null,this._uniforms=null,this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null}}};e.a=l()},function(t,e,i){"use strict";var n={};(0,i(11).assign)(n,i(126),i(129),i(86)),t.exports=n},function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,i){"use strict";t.exports=function(t){return"string"==typeof t}},function(t,e,i){"use strict";var n=i(139);t.exports=function(t){return n(t)&&t>=0}},function(t,e,i){"use strict";var n=i(58),r=i(59),a=9007199254740991;t.exports=function(t,e){var i,s;if(!n(t))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+t+"`.");if(!r(e))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+e+"`.");if(0===t.length||0===e)return"";if(t.length*e>a)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");for(i="",s=e;1==(1&s)&&(i+=t),0!=(s>>>=1);)t+=t;return i}},function(t,e,i){"use strict";var n=n||{};n.Utils=n.Utils||{},n.Utils.crcTable=null,n.Utils.GUNZIP_MAGIC_COOKIE1=31,n.Utils.GUNZIP_MAGIC_COOKIE2=139,n.Utils.getStringAt=function(t,e,i){var n,r,a="";for(n=e;n<i;n+=1)0!==(r=t.getUint8(n))&&(a+=String.fromCharCode(r));return a},n.Utils.getByteAt=function(t,e){return t.getInt8(e)},n.Utils.getShortAt=function(t,e,i){return t.getInt16(e,i)},n.Utils.getIntAt=function(t,e,i){return t.getInt32(e,i)},n.Utils.getFloatAt=function(t,e,i){return t.getFloat32(e,i)},n.Utils.getDoubleAt=function(t,e,i){return t.getFloat64(e,i)},n.Utils.getLongAt=function(t,e,i){var r,a=[],s=0;for(r=0;r<8;r+=1)a[r]=n.Utils.getByteAt(t,e+r,i);for(r=a.length-1;r>=0;r--)s=256*s+a[r];return s},n.Utils.toArrayBuffer=function(t){var e,i,n;for(e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0;n<t.length;n+=1)i[n]=t[n];return e},n.Utils.isString=function(t){return"string"==typeof t||t instanceof String},n.Utils.formatNumber=function(t,e){var i=0;return i=n.Utils.isString(t)?Number(t):t,i=e?i.toPrecision(5):i.toPrecision(7),parseFloat(i)},n.Utils.makeCRCTable=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e},n.Utils.crc32=function(t){for(var e=n.Utils.crcTable||(n.Utils.crcTable=n.Utils.makeCRCTable()),i=-1,r=0;r<t.byteLength;r++)i=i>>>8^e[255&(i^t.getUint8(r))];return(-1^i)>>>0},"undefined"!==typeof t&&t.exports&&(t.exports=n.Utils)},function(t,e){var i,n,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(t){i=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,c=[],h=!1,u=-1;function d(){h&&l&&(h=!1,l.length?c=l.concat(c):u=-1,c.length&&f())}function f(){if(!h){var t=o(d);h=!0;for(var e=c.length;e;){for(l=c,c=[];++u<e;)l&&l[u].run();u=-1,e=c.length}l=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new p(t,e)),1!==c.length||h||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";i.r(e),i.d(e,"default",function(){return n});class n{static get code(){return'\n        .widgets-handle {\n            position: absolute;\n            border: 1px solid;\n            border-radius: 50%;\n            width: 10px;\n            height: 10px;\n            margin: -6px; /* border + width / 2 */\n            z-index: 3;\n        }\n        .widgets-line {\n            position: absolute;\n            width: 1px;\n            height: 1px;\n            margin-top: -0.5px; /* height / 2 */\n        }\n        .widgets-dashline {\n            position: absolute;\n            border-top: 1px dashed;\n            margin-top: -0.5px; /* border / 2 */\n        }\n        .widgets-line:before,\n        .widgets-dashline:before { /* for dragging */\n            content: " ";\n            position: absolute;\n            height: 12px;\n            left: 0;\n            right: 0;\n            margin-top: -6px;\n        }\n        .widgets-rectangle {\n            position: absolute;\n            border: 1px solid;\n            margin: -1px; /* border */\n        }\n        .widgets-rectangle-helper {\n            position: absolute;\n            border: 1px dashed;\n            margin: -1px; /* border */\n        }\n        .widgets-ellipse {\n            position: absolute;\n            border: 1px solid;\n            border-radius: 50%;\n            margin: -1px; /* border */\n            z-index: 2;\n        }\n        .widgets-label {\n            position: absolute;\n            border: 1px solid;\n            background-color: rgba(0, 0, 0, 0.7);\n            color: rgb(255, 255, 255);\n            padding: 4px;\n            z-index: 3;\n        }\n        '}}},function(t,e,i){"use strict";i.d(e,"b",function(){return s});var n=i(4),r=i(3),a=i(2);const s=(t=a)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){let a;super(e,i,n),this._widgetType="Angle",this._opangle=null,this._moving=!1,this._domHovered=!1,this._defaultAngle=!0,this._material=null,this._geometry=null,this._mesh=null,this._line=null,this._line2=null,this._label=null,this._handles=[];const s=Object(r.b)(t);for(let t=0;t<3;t++)a=new s(e,i,n),this.add(a),this._handles.push(a);this._handles[1].active=!0,this._handles[1].tracking=!0,this._handles[2].active=!0,this._handles[2].tracking=!0,this._moveHandle=new s(e,i,n),this.add(this._moveHandle),this._handles.push(this._moveHandle),this._moveHandle.hide(),this.create(),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.addEventListeners()}addEventListeners(){this._container.addEventListener("wheel",this.onMove),this._line.addEventListener("mouseenter",this.onHover),this._line.addEventListener("mouseleave",this.onHover),this._line2.addEventListener("mouseenter",this.onHover),this._line2.addEventListener("mouseleave",this.onHover),this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover)}removeEventListeners(){this._container.removeEventListener("wheel",this.onMove),this._line.removeEventListener("mouseenter",this.onHover),this._line.removeEventListener("mouseleave",this.onHover),this._line2.removeEventListener("mouseenter",this.onHover),this._line2.removeEventListener("mouseleave",this.onHover),this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover)}onHover(t){t&&this.hoverDom(t),this.hoverMesh(),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._handles[2].hovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverMesh(){}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){this._moveHandle.onMove(t,!0),this._handles[0].onStart(t),this._handles[1].onStart(t),this._handles[2].onStart(t),this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active||this._domHovered,!this._domHovered||this._handles[1].tracking||this._handles[2].tracking||(this._moving=!0,this._controls.enabled=!1),this.update()}onMove(t){if(this._active){const e=this._moveHandle.worldPosition.clone();this._dragged=!0,this._moveHandle.onMove(t,!0),this._moving&&this._handles.slice(0,-1).forEach(t=>{t.worldPosition.add(this._moveHandle.worldPosition.clone().sub(e))})}else this.onHover(null);this._handles[0].onMove(t),this._handles[1].onMove(t),this._handles[2].onMove(t),this.update()}onEnd(){this._handles[0].onEnd(),this._handles[1].tracking&&this._handles[0].screenPosition.distanceTo(this._handles[1].screenPosition)<10||!this._handles[1].tracking&&this._handles[2].tracking&&this._handles[1].screenPosition.distanceTo(this._handles[2].screenPosition)<10||(this._dragged||!this._active||this._handles[2].tracking||(this._selected=!this._selected,this._handles[0].selected=this._selected),this._handles[1].active?this._handles[2].onEnd():this._dragged||!this._handles[2].tracking?(this._handles[2].tracking=!1,this._handles[2].onEnd()):this._handles[2].tracking=!1,this._handles[2].selected=this._selected,this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd()):this._handles[1].tracking=!1,this._handles[1].selected=this._selected,this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active,this._dragged=this._handles[2].tracking,this._moving=!1,this.update())}create(){this.createMesh(),this.createDOM()}createMesh(){this._geometry=new t.Geometry,this._geometry.vertices=[this._handles[0].worldPosition,this._handles[1].worldPosition,this._handles[1].worldPosition,this._handles[2].worldPosition],this._material=new t.LineBasicMaterial,this.updateMeshColor(),this._mesh=new t.LineSegments(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)}createDOM(){this._line=document.createElement("div"),this._line.className="widgets-line",this._container.appendChild(this._line),this._line2=document.createElement("div"),this._line2.className="widgets-line",this._container.appendChild(this._line2),this._label=document.createElement("div"),this._label.className="widgets-label",this._container.appendChild(this._label),this.updateDOMColor()}hideDOM(){this._line.style.display="none",this._line2.style.display="none",this._label.style.display="none",this._handles.forEach(t=>t.hideDOM())}showDOM(){this._line.style.display="",this._line2.style.display="",this._label.style.display="",this._handles[0].showDOM(),this._handles[1].showDOM(),this._handles[2].showDOM()}update(){this.updateColor(),this._handles[0].update(),this._handles[1].update(),this._handles[2].update(),this._opangle=180*this._handles[1].worldPosition.clone().sub(this._handles[0].worldPosition).angleTo(this._handles[1].worldPosition.clone().sub(this._handles[2].worldPosition))/Math.PI||0,this._opangle=this._defaultAngle?this._opangle:360-this._opangle,this.updateMeshColor(),this.updateMeshPosition(),this.updateDOM()}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)}updateDOM(){this.updateDOMColor();const e=this.getLineData(this._handles[1].screenPosition,this._handles[0].screenPosition);this._line.style.transform=`translate3D(${e.transformX}px, ${e.transformY}px, 0)\n            rotate(${e.transformAngle}rad)`,this._line.style.width=e.length+"px";const i=this.getLineData(this._handles[1].screenPosition,this._handles[2].screenPosition);this._line2.style.transform=`translate3D(${i.transformX}px, ${i.transformY}px, 0)\n            rotate(${i.transformAngle}rad)`,this._line2.style.width=i.length+"px",this._label.innerHTML=`${this._opangle.toFixed(2)}&deg;`;let n=e.line.clone().add(i.line).normalize().negate(),r=n.angleTo(new t.Vector3(1,0,0));r>Math.PI/2&&(r=Math.PI-r);const a=Math.tan(r)<this._label.offsetHeight/this._label.offsetWidth?this._label.offsetWidth/2/Math.cos(r)+15:this._label.offsetHeight/2/Math.cos(Math.PI/2-r)+15,s=this._handles[1].screenPosition.clone().add(n.multiplyScalar(a)),o=this.adjustLabelTransform(this._label,s);this._label.style.transform=`translate3D(${o.x}px, ${o.y}px, 0)`}updateDOMColor(){this._line.style.backgroundColor=this._color,this._line2.style.backgroundColor=this._color,this._label.style.borderColor=this._color}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this._container.removeChild(this._line),this._container.removeChild(this._line2),this._container.removeChild(this._label),this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,super.free()}toggleDefaultAngle(){this._defaultAngle=!this._defaultAngle}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles[0].worldPosition.copy(t),this._handles[1].worldPosition.copy(t),this._handles[2].worldPosition.copy(t),this._worldPosition.copy(t),this.update()}get angle(){return this._opangle}}};e.a=s()},function(t,e,i){"use strict";i.d(e,"b",function(){return s});var n=i(4),r=i(3),a=i(2);const s=(t=a)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){let a;super(e,i,n),this._widgetType="Annotation",this._initialized=!1,this._movinglabel=null,this._labelmoved=!1,this._labelhovered=!1,this._manuallabeldisplay=!1,this._material=null,this._geometry=null,this._meshline=null,this._cone=null,this._line=null,this._dashline=null,this._label=null,this._labeltext=null,this._labelOffset=new t.Vector3,this._mouseLabelOffset=new t.Vector3,this._handles=[];const s=Object(r.b)(t);for(let t=0;t<2;t++)a=new s(e,i,n),this.add(a),this._handles.push(a);this._handles[1].active=!0,this.create(),this.initOffsets(),this.onResize=this.onResize.bind(this),this.onMove=this.onMove.bind(this),this.onHoverlabel=this.onHoverlabel.bind(this),this.notonHoverlabel=this.notonHoverlabel.bind(this),this.changelabeltext=this.changelabeltext.bind(this),this.addEventListeners()}addEventListeners(){window.addEventListener("resize",this.onResize),this._label.addEventListener("mouseenter",this.onHoverlabel),this._label.addEventListener("mouseleave",this.notonHoverlabel),this._label.addEventListener("dblclick",this.changelabeltext),this._container.addEventListener("wheel",this.onMove)}removeEventListeners(){window.removeEventListener("resize",this.onResize),this._label.removeEventListener("mouseenter",this.onHoverlabel),this._label.removeEventListener("mouseleave",this.notonHoverlabel),this._label.removeEventListener("dblclick",this.changelabeltext),this._container.removeEventListener("wheel",this.onMove)}onResize(){this.initOffsets()}onHoverlabel(){this._labelhovered=!0,this._container.style.cursor="pointer"}notonHoverlabel(){this._labelhovered=!1,this._container.style.cursor="default"}onStart(e){if(this._labelhovered){const i=this.getMouseOffsets(e,this._container),n=this._handles[1].screenPosition.clone().sub(this._labelOffset);this._mouseLabelOffset=new t.Vector3(i.screenX-n.x,i.screenY-n.y,0),this._movinglabel=!0,this._labelmoved=!0}this._handles[0].onStart(e),this._handles[1].onStart(e),this._active=this._handles[0].active||this._handles[1].active||this._labelhovered,this.update()}onMove(e){if(this._movinglabel){const i=this.getMouseOffsets(e,this._container);this._labelOffset=new t.Vector3(this._handles[1].screenPosition.x-i.screenX+this._mouseLabelOffset.x,this._handles[1].screenPosition.y-i.screenY+this._mouseLabelOffset.y,0),this._controls.enabled=!1}this._active&&(this._dragged=!0),this._handles[0].onMove(e),this._handles[1].onMove(e),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._labelhovered,this.update()}onEnd(){this._handles[0].onEnd(),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd()):this._handles[1].tracking=!1,!this._dragged&&this._active&&this._initialized&&(this._selected=!this._selected,this._handles[0].selected=this._selected,this._handles[1].selected=this._selected),this._initialized||(this._labelOffset=this._handles[1].screenPosition.clone().sub(this._handles[0].screenPosition).multiplyScalar(.5),this.setlabeltext(),this._initialized=!0),this._active=this._handles[0].active||this._handles[1].active,this._dragged=!1,this._movinglabel=!1,this.update()}setlabeltext(){for(;!this._labeltext;)this._labeltext=prompt("Please enter the annotation text","");this.displaylabel()}changelabeltext(){this._labeltext=prompt("Please enter a new annotation text",this._label.innerHTML),this.displaylabel()}displaylabel(){this._label.innerHTML="string"==typeof this._labeltext&&this._labeltext.length>0?this._labeltext:"",this._label.style.display="",this._dashline.style.display="",this._label.style.transform=`translate3D(\n        ${this._handles[1].screenPosition.x-this._labelOffset.x-this._label.offsetWidth/2}px,\n        ${this._handles[1].screenPosition.y-this._labelOffset.y-this._label.offsetHeight/2-this._container.offsetHeight}px, 0)`}create(){this.createMesh(),this.createDOM()}createMesh(){this._material=new t.LineBasicMaterial,this.updateMeshColor(),this._geometry=new t.Geometry,this._geometry.vertices.push(this._handles[0].worldPosition),this._geometry.vertices.push(this._handles[1].worldPosition),this._meshline=new t.Line(this._geometry,this._material),this._meshline.visible=!0,this.add(this._meshline),this._conegeometry=new t.CylinderGeometry(0,2,10),this._conegeometry.translate(0,-5,0),this._conegeometry.rotateX(-Math.PI/2),this._cone=new t.Mesh(this._conegeometry,this._material),this._cone.visible=!0,this.add(this._cone)}createDOM(){this._line=document.createElement("div"),this._line.className="widgets-line",this._container.appendChild(this._line),this._dashline=document.createElement("div"),this._dashline.className="widgets-dashline",this._dashline.style.display="none",this._container.appendChild(this._dashline),this._label=document.createElement("div"),this._label.className="widgets-label",this._label.style.display="none",this._container.appendChild(this._label),this.updateDOMColor()}update(){this.updateColor(),this._handles[0].update(),this._handles[1].update(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOM()}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){this._geometry&&(this._geometry.verticesNeedUpdate=!0),this._cone&&(this._cone.position.copy(this._handles[1].worldPosition),this._cone.lookAt(this._handles[0].worldPosition))}updateDOM(){this.updateDOMColor();const t=this.getLineData(this._handles[0].screenPosition,this._handles[1].screenPosition);this._line.style.transform=`translate3D(${t.transformX}px, ${t.transformY}px, 0)\n        rotate(${t.transformAngle}rad)`,this._line.style.width=t.length+"px";const e=t.line.multiplyScalar(.5),i=this._handles[1].screenPosition.clone().sub(this._labelmoved?this._labelOffset:e),n=this.adjustLabelTransform(this._label,i);this._label.style.transform=`translate3D(${n.x}px, ${n.y}px, 0)`,this._manuallabeldisplay&&this.displaylabel();let r=this.getLineData(this._handles[0].screenPosition,i),a=this.getLineData(t.center,i),s=this.getLineData(this._handles[1].screenPosition,i);r.length>a.length&&(r=a),r.length>s.length&&(r=s),this._dashline.style.transform=`translate3D(${r.transformX}px, ${r.transformY}px, 0)\n        rotate(${r.transformAngle}rad)`,this._dashline.style.width=r.length+"px"}updateDOMColor(){this._line.style.backgroundColor=this._color,this._dashline.style.borderTop="1.5px dashed "+this._color,this._label.style.borderColor=this._color}hideDOM(){this._line.style.display="none",this._dashline.style.display="none",this._label.style.display="none",this._handles.forEach(t=>t.hideDOM())}showDOM(){this._line.style.display="",this._dashline.style.display="",this._label.style.display="",this._handles.forEach(t=>t.showDOM())}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this._container.removeChild(this._line),this._container.removeChild(this._dashline),this._container.removeChild(this._label),this.remove(this._meshline),this._meshline.geometry.dispose(),this._meshline.geometry=null,this._meshline.material.dispose(),this._meshline.material=null,this._meshline=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this.remove(this._cone),this._cone.geometry.dispose(),this._cone.geometry=null,this._cone.material.dispose(),this._cone.material=null,this._cone=null,this._conegeometry.dispose(),this._conegeometry=null,super.free()}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles[0].worldPosition.copy(t),this._handles[1].worldPosition.copy(t),this._worldPosition.copy(t),this.update()}}};e.a=s()},function(t,e,i){"use strict";i.d(e,"b",function(){return s});var n=i(4),r=i(3),a=i(2);const s=(t=a)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){let a;super(e,i,n),this._widgetType="BiRuler",this._calibrationFactor=n.calibrationFactor||null,this._distance=null,this._distance2=null,this._units=this._calibrationFactor||n.pixelSpacing?"mm":"units",this._material=null,this._geometry=null,this._mesh=null,this._line=null,this._label=null,this._line2=null,this._label2=null,this._dashline=null,this._handles=[];const s=Object(r.b)(t);for(let t=0;t<4;t++)a=new s(e,i,n),this.add(a),this._handles.push(a);this._handles[1].active=!0,this._handles[1].tracking=!0,this._handles[3].active=!0,this._handles[3].tracking=!0,this.create(),this.onMove=this.onMove.bind(this),this.addEventListeners()}addEventListeners(){this._container.addEventListener("wheel",this.onMove)}removeEventListeners(){this._container.removeEventListener("wheel",this.onMove)}onStart(t){this._handles.forEach(e=>e.onStart(t)),this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active||this._handles[3].active,this.update()}onMove(t){this._active?this._dragged=!0:(this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._handles[2].hovered||this._handles[3].hovered,this._container.style.cursor=this._hovered?"pointer":"default"),this._handles.forEach(e=>e.onMove(t)),this.update()}onEnd(){this._handles[0].onEnd(),this._handles[2].onEnd(),this._handles[1].tracking&&this._handles[0].screenPosition.distanceTo(this._handles[1].screenPosition)<10||(this._dragged||!this._active||this._handles[3].tracking||(this._selected=!this._selected,this._handles[0].selected=this._selected,this._handles[2].selected=this._selected),this._handles[1].active?this._handles[3].onEnd():this._dragged||!this._handles[3].tracking?(this._handles[3].tracking=!1,this._handles[3].onEnd()):this._handles[3].tracking=!1,this._handles[3].selected=this._selected,this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd()):this._handles[1].tracking=!1,this._handles[1].selected=this._selected,this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active||this._handles[3].active,this._dragged=!1,this.update())}create(){this.createMesh(),this.createDOM()}createMesh(){this._geometry=new t.Geometry,this._geometry.vertices=[this._handles[0].worldPosition,this._handles[1].worldPosition,this._handles[2].worldPosition,this._handles[3].worldPosition],this._material=new t.LineBasicMaterial,this.updateMeshColor(),this._mesh=new t.LineSegments(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)}createDOM(){this._line=document.createElement("div"),this._line.className="widgets-line",this._container.appendChild(this._line),this._label=document.createElement("div"),this._label.className="widgets-label",this._container.appendChild(this._label),this._line2=document.createElement("div"),this._line2.className="widgets-line",this._container.appendChild(this._line2),this._label2=document.createElement("div"),this._label2.className="widgets-label",this._container.appendChild(this._label2),this._dashline=document.createElement("div"),this._dashline.className="widgets-dashline",this._container.appendChild(this._dashline),this.updateDOMColor()}hideDOM(){this._line.style.display="none",this._label.style.display="none",this._line2.style.display="none",this._label2.style.display="none",this._dashline.style.display="none",this._handles.forEach(t=>t.hideDOM())}showDOM(){this._line.style.display="",this._label.style.display="",this._line2.style.display="",this._label2.style.display="",this._dashline.style.display="",this._handles.forEach(t=>t.showDOM())}update(){this.updateColor(),this._handles.forEach(t=>t.update()),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOM()}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)}updateDOM(){this.updateDOMColor();const t=this.getLineData(this._handles[0].screenPosition,this._handles[1].screenPosition);this._line.style.transform=`translate3D(${t.transformX}px, ${t.transformY}px, 0)\n                rotate(${t.transformAngle}rad)`,this._line.style.width=t.length+"px";const e=this.getLineData(this._handles[2].screenPosition,this._handles[3].screenPosition);this._line2.style.transform=`translate3D(${e.transformX}px, ${e.transformY}px, 0)\n                rotate(${e.transformAngle}rad)`,this._line2.style.width=e.length+"px";const i=this._handles[0].worldPosition.clone().add(this._handles[1].worldPosition).multiplyScalar(.5),n=this._handles[2].worldPosition.clone().add(this._handles[3].worldPosition).multiplyScalar(.5),r=this.getLineData(this.worldToScreen(i),this.worldToScreen(n));this._dashline.style.transform=`translate3D(${r.transformX}px, ${r.transformY}px, 0)\n                rotate(${r.transformAngle}rad)`,this._dashline.style.width=r.length+"px";const a=this.getDistanceData(this._handles[0].worldPosition,this._handles[1].worldPosition,this._calibrationFactor),s=this.getDistanceData(this._handles[2].worldPosition,this._handles[3].worldPosition,this._calibrationFactor),o="Calibration is required to display the distance in mm";this._distance=a.distance,this._distance2=s.distance,a.units&&s.units&&a.units===s.units?this._units=a.units:(a.units||(a.units=this._units),s.units||(s.units=this._units)),"units"!==a.units||this._label.hasAttribute("title")?"units"!==a.units&&this._label.hasAttribute("title")&&(this._label.removeAttribute("title"),this._label.style.color=this._colors.text):(this._label.setAttribute("title",o),this._label.style.color=this._colors.error),"units"!==s.units||this._label2.hasAttribute("title")?"units"!==s.units&&this._label2.hasAttribute("title")&&(this._label2.removeAttribute("title"),this._label2.style.color=this._colors.text):(this._label2.setAttribute("title",o),this._label2.style.color=this._colors.error),this._label.innerHTML=`${this._distance.toFixed(2)} ${a.units}`,this._label2.innerHTML=`${this._distance2.toFixed(2)} ${s.units}`;let l=Math.abs(t.transformAngle);l>Math.PI/2&&(l=Math.PI-l);const c=Math.tan(l)<this._label.offsetHeight/this._label.offsetWidth?this._label.offsetWidth/2/Math.cos(l)+15:this._label.offsetHeight/2/Math.cos(Math.PI/2-l)+15,h=t.line.normalize().multiplyScalar(c),u=t.length>2*c?this._handles[1].screenPosition.clone().sub(h):this._handles[1].screenPosition.clone().add(h),d=this.adjustLabelTransform(this._label,u);this._label.style.transform=`translate3D(${d.x}px, ${d.y}px, 0)`;let f=Math.abs(e.transformAngle);f>Math.PI/2&&(f=Math.PI-f);const p=Math.tan(f)<this._label2.offsetHeight/this._label2.offsetWidth?this._label2.offsetWidth/2/Math.cos(f)+15:this._label2.offsetHeight/2/Math.cos(Math.PI/2-f)+15,m=e.line.normalize().multiplyScalar(p),g=e.length>2*p?this._handles[3].screenPosition.clone().sub(m):this._handles[3].screenPosition.clone().add(m),_=this.adjustLabelTransform(this._label2,g);this._label2.style.transform=`translate3D(${_.x}px, ${_.y}px, 0)`}updateDOMColor(){this._line.style.backgroundColor=this._color,this._label.style.borderColor=this._color,this._line2.style.backgroundColor=this._color,this._label2.style.borderColor=this._color,this._dashline.style.borderTop="1.5px dashed "+this._color}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this._container.removeChild(this._line),this._container.removeChild(this._label),this._container.removeChild(this._line2),this._container.removeChild(this._label2),this._container.removeChild(this._dashline),this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,super.free()}getDistances(){return[this._distance,this._distance2]}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles.forEach(e=>e.worldPosition.copy(t)),this._worldPosition.copy(t),this.update()}get calibrationFactor(){return this._calibrationFactor}set calibrationFactor(t){this._calibrationFactor=t,this._units="mm",this.update()}get shotestDistance(){return this._distance<this._distance2?this._distance:this._distance2}get longestDistance(){return this._distance>this._distance2?this._distance:this._distance2}}};e.a=s()},function(t,e,i){"use strict";i.d(e,"b",function(){return s});var n=i(4),r=i(3),a=i(2);const s=(t=a)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){let a;super(e,i,n),this._widgetType="CrossRuler",this._calibrationFactor=n.calibrationFactor||null,this._distances=null,this._line01=null,this._normal=null,this._distance=null,this._distance2=null,this._units=this._calibrationFactor||n.pixelSpacing?"mm":"units",this._domHovered=!1,this._moving=!1,this._material=null,this._geometry=null,this._mesh=null,this._line=null,this._line2=null,this._label=null,this._label2=null,this._handles=[];const s=Object(r.b)(t);for(let t=0;t<4;t++)a=new s(e,i,n),this.add(a),this._handles.push(a);this._handles[1].active=!0,this._handles[1].tracking=!0,this._moveHandle=new s(e,i,n),this.add(this._moveHandle),this._handles.push(this._moveHandle),this._moveHandle.hide(),this.onHover=this.onHover.bind(this),this.onMove=this.onMove.bind(this),this.create(),this.addEventListeners()}addEventListeners(){this._line.addEventListener("mouseenter",this.onHover),this._line.addEventListener("mouseleave",this.onHover),this._line2.addEventListener("mouseenter",this.onHover),this._line2.addEventListener("mouseleave",this.onHover),this._container.addEventListener("wheel",this.onMove)}removeEventListeners(){this._line.removeEventListener("mouseenter",this.onHover),this._line.removeEventListener("mouseleave",this.onHover),this._line2.removeEventListener("mouseenter",this.onHover),this._line2.removeEventListener("mouseleave",this.onHover),this._container.removeEventListener("wheel",this.onMove)}onHover(t){t&&this.hoverDom(t),this.hoverMesh(),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._handles[2].hovered||this._handles[3].hovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverMesh(){}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){this._moveHandle.onMove(t,!0),this._handles.slice(0,-1).forEach(e=>e.onStart(t)),this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active||this._handles[3].active||this._domHovered,this._domHovered&&this._distances&&(this._moving=!0,this._controls.enabled=!1),this.update()}onMove(t){if(this._active){const e=this._moveHandle.worldPosition.clone();this._dragged=!0,this._moveHandle.onMove(t,!0),this._moving&&this._handles.slice(0,-1).forEach(t=>{t.worldPosition.add(this._moveHandle.worldPosition.clone().sub(e))})}else this.onHover(null);this._handles.slice(0,-1).forEach(e=>e.onMove(t)),this._distances&&(this._handles[0].active||this._handles[1].active?this.repositionOrtho():(this._handles[2].active||this._handles[3].active)&&this.recalculateOrtho()),this.update()}onEnd(){this._handles[0].onEnd(),this._handles[2].onEnd(),this._handles[3].onEnd(),this._handles[1].tracking&&this._handles[0].screenPosition.distanceTo(this._handles[1].screenPosition)<10||(this._dragged||!this._active||this._handles[1].tracking||(this._selected=!this._selected,this._handles[0].selected=this._selected,this._handles[2].selected=this._selected,this._handles[3].selected=this._selected),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd()):this._handles[1].tracking=!1,this._handles[1].selected=this._selected,this._active=this._handles[0].active||this._handles[1].active||this._handles[2].active||this._handles[3].active,this._dragged=!1,this._moving=!1,this._distances||this.initOrtho(),this.update())}create(){this.createMesh(),this.createDOM()}createMesh(){this._geometry=new t.Geometry,this._geometry.vertices=[this._handles[0].worldPosition,this._handles[1].worldPosition,this._handles[2].worldPosition,this._handles[3].worldPosition],this._material=new t.LineBasicMaterial,this.updateMeshColor(),this._mesh=new t.LineSegments(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)}createDOM(){this._line=document.createElement("div"),this._line.className="widgets-line",this._container.appendChild(this._line),this._line2=document.createElement("div"),this._line2.className="widgets-line",this._container.appendChild(this._line2),this._label=document.createElement("div"),this._label.className="widgets-label",this._container.appendChild(this._label),this._label2=document.createElement("div"),this._label2.className="widgets-label",this._container.appendChild(this._label2),this.updateDOMColor()}hideDOM(){this._line.style.display="none",this._line2.style.display="none",this._label.style.display="none",this._label2.style.display="none",this._handles.slice(0,-1).forEach(t=>t.hideDOM())}showDOM(){this._line.style.display="",this._line2.style.display="",this._label.style.display="",this._label2.style.display="",this._handles.slice(0,-1).forEach(t=>t.showDOM())}update(){this.updateColor(),this._handles.slice(0,-1).forEach(t=>t.update()),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOM()}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)}updateDOM(){this.updateDOMColor();const t=this.getLineData(this._handles[0].screenPosition,this._handles[1].screenPosition);this._line.style.transform=`translate3D(${t.transformX}px, ${t.transformY}px, 0)\n            rotate(${t.transformAngle}rad)`,this._line.style.width=t.length+"px";const e=this.getLineData(this._handles[2].screenPosition,this._handles[3].screenPosition);this._line2.style.transform=`translate3D(${e.transformX}px, ${e.transformY}px, 0)\n            rotate(${e.transformAngle}rad)`,this._line2.style.width=e.length+"px";const i=this.getDistanceData(this._handles[0].worldPosition,this._handles[1].worldPosition,this._calibrationFactor),n=this.getDistanceData(this._handles[2].worldPosition,this._handles[3].worldPosition,this._calibrationFactor),r="Calibration is required to display the distance in mm";this._distance=i.distance,this._distance2=n.distance,i.units&&n.units&&i.units===n.units?this._units=i.units:(i.units||(i.units=this._units),n.units||(n.units=this._units)),"units"!==i.units||this._label.hasAttribute("title")?"units"!==i.units&&this._label.hasAttribute("title")&&(this._label.removeAttribute("title"),this._label.style.color=this._colors.text):(this._label.setAttribute("title",r),this._label.style.color=this._colors.error),"units"!==n.units||this._label2.hasAttribute("title")?"units"!==n.units&&this._label2.hasAttribute("title")&&(this._label2.removeAttribute("title"),this._label2.style.color=this._colors.text):(this._label2.setAttribute("title",r),this._label2.style.color=this._colors.error),this._label.innerHTML=`${this._distance.toFixed(2)} ${i.units}`,this._label2.innerHTML=`${this._distance2.toFixed(2)} ${n.units}`;let a=Math.abs(t.transformAngle);a>Math.PI/2&&(a=Math.PI-a);const s=Math.tan(a)<this._label.offsetHeight/this._label.offsetWidth?this._label.offsetWidth/2/Math.cos(a)+15:this._label.offsetHeight/2/Math.cos(Math.PI/2-a)+15,o=t.line.normalize().multiplyScalar(s),l=t.length>4*s?this._handles[1].screenPosition.clone().sub(o):this._handles[1].screenPosition.clone().add(o),c=this.adjustLabelTransform(this._label,l);this._label.style.transform=`translate3D(${c.x}px, ${c.y}px, 0)`;let h=Math.abs(e.transformAngle);h>Math.PI/2&&(h=Math.PI-h);const u=Math.tan(h)<this._label2.offsetHeight/this._label2.offsetWidth?this._label2.offsetWidth/2/Math.cos(h)+15:this._label2.offsetHeight/2/Math.cos(Math.PI/2-h)+15,d=e.line.normalize().multiplyScalar(u),f=e.length>4*u?this._handles[3].screenPosition.clone().sub(d):this._handles[3].screenPosition.clone().add(d),p=this.adjustLabelTransform(this._label2,f);this._label2.style.transform=`translate3D(${p.x}px, ${p.y}px, 0)`}updateDOMColor(){this._line.style.backgroundColor=this._color,this._line2.style.backgroundColor=this._color,this._label.style.borderColor=this._color,this._label2.style.borderColor=this._color}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this._container.removeChild(this._line),this._container.removeChild(this._line2),this._container.removeChild(this._label),this._container.removeChild(this._label2),this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,super.free()}initLineAndNormal(){this._line01=this._handles[1].worldPosition.clone().sub(this._handles[0].worldPosition),this._normal=this._line01.clone().cross(this._camera._direction).normalize()}initOrtho(){this.initLineAndNormal();const t=this._handles[1].worldPosition.clone().add(this._handles[0].worldPosition).multiplyScalar(.5),e=this._line01.length()/2,i=this._normal.clone().multiplyScalar(.8*e),n=i.length();this._handles[2].worldPosition.copy(t.clone().add(i)),this._handles[3].worldPosition.copy(t.clone().sub(i)),this._distances=[e,e,n,n]}repositionOrtho(){this.initLineAndNormal(),this._distances[0]*=this._line01.length()/(this._distances[0]+this._distances[1]),this._distances[1]=this._line01.length()-this._distances[0];const t=this._handles[0].worldPosition.clone().add(this._line01.clone().normalize().multiplyScalar(this._distances[0]));this._handles[2].worldPosition.copy(t.clone().add(this._normal.clone().multiplyScalar(this._distances[2]))),this._handles[3].worldPosition.copy(t.clone().sub(this._normal.clone().multiplyScalar(this._distances[3])))}recalculateOrtho(){const e=this._handles[2].active?2:3,i=[],n=new t.Vector3;i[2]=this._handles[2].worldPosition.clone().sub(this._handles[0].worldPosition),i[3]=this._handles[3].worldPosition.clone().sub(this._handles[0].worldPosition),new t.Ray(this._handles[0].worldPosition,this._line01.clone().normalize()).closestPointToPoint(this._handles[e].worldPosition,n);const r=n.clone().sub(this._handles[0].worldPosition).length()>this._line01.length();(r||n.equals(this._handles[0].worldPosition))&&(r&&n.copy(this._handles[1].worldPosition),this._handles[e].worldPosition.copy(n.clone().add(i[e].clone().projectOnVector(this._normal)))),i[2].cross(this._line01).angleTo(this._camera._direction)>.01&&this._handles[2].worldPosition.copy(n),i[3].cross(this._line01).angleTo(this._camera._direction)<Math.PI-.01&&this._handles[3].worldPosition.copy(n),i[0]=this._normal.clone().multiplyScalar(this._distances[5-e]),2===e&&i[0].negate(),this._handles[5-e].worldPosition.copy(n.clone().add(i[0])),this._distances[e]=n.distanceTo(this._handles[e].worldPosition),this._distances[0]=n.distanceTo(this._handles[0].worldPosition),this._distances[1]=n.distanceTo(this._handles[1].worldPosition)}getDimensions(){return[this._distance,this._distance2]}getCoordinates(){return[this._handles[0].worldPosition,this._handles[1].worldPosition,this._handles[2].worldPosition,this._handles[3].worldPosition]}initCoordinates(e,i,n,r){const a=new t.Vector3,s=new t.Vector3,o=new t.Ray(e);o.lookAt(i),o.distanceSqToSegment(n,r,a,s),a.distanceTo(s)>.01&&a.distanceTo(e)>i.distanceTo(e)+.01?window.console.warn("Lines do not intersect"):(this.active=!1,this.hovered=!1,this.setDefaultColor("#198"),this._worldPosition.copy(e),this._handles[0].worldPosition.copy(e),this._handles[1].worldPosition.copy(i),this._handles[1].active=!1,this._handles[1].tracking=!1,this._handles[2].worldPosition.copy(n),this._handles[3].worldPosition.copy(r),this._distances=[a.distanceTo(e),a.distanceTo(i),a.distanceTo(n),a.distanceTo(r)],this.initLineAndNormal(),this.update())}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles.slice(0,-1).forEach(e=>e.worldPosition.copy(t)),this._worldPosition.copy(t),this.update()}get calibrationFactor(){return this._calibrationFactor}set calibrationFactor(t){this._calibrationFactor=t,this._units="mm",this.update()}}};e.a=s()},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=i(4),r=i(3),a=i(1),s=i(2);const o=(t=s)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){let a;super(e,i,n),this._widgetType="Ellipse",this._stack=n.stack,this._calibrationFactor=n.calibrationFactor||null,this._area=null,this._units=this._calibrationFactor||n.stack.frame[n.frameIndex].pixelSpacing?"cm²":"units",this._moving=!1,this._domHovered=!1,this._material=null,this._geometry=null,this._mesh=null,this._rectangle=null,this._ellipse=null,this._label=null,this._handles=[];const s=Object(r.b)(t);for(let t=0;t<2;t++)a=new s(e,i,n),this.add(a),this._handles.push(a);this._handles[1].active=!0,this._handles[1].tracking=!0,this._moveHandle=new s(e,i,n),this.add(this._moveHandle),this._handles.push(this._moveHandle),this._moveHandle.hide(),this.create(),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.addEventListeners()}addEventListeners(){this._container.addEventListener("wheel",this.onMove),this._rectangle.addEventListener("mouseenter",this.onHover),this._rectangle.addEventListener("mouseleave",this.onHover),this._ellipse.addEventListener("mouseenter",this.onHover),this._ellipse.addEventListener("mouseleave",this.onHover),this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover)}removeEventListeners(){this._container.removeEventListener("wheel",this.onMove),this._rectangle.removeEventListener("mouseenter",this.onHover),this._rectangle.removeEventListener("mouseleave",this.onHover),this._ellipse.removeEventListener("mouseenter",this.onHover),this._ellipse.removeEventListener("mouseleave",this.onHover),this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover)}onHover(t){t&&this.hoverDom(t),this.hoverMesh(),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverMesh(){}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){this._moveHandle.onMove(t,!0),this._handles[0].onStart(t),this._handles[1].onStart(t),this._active=this._handles[0].active||this._handles[1].active||this._domHovered,this._domHovered&&!this._handles[1].tracking&&(this._moving=!0,this._controls.enabled=!1),this.update()}onMove(t){if(this._active){const e=this._moveHandle.worldPosition.clone();this._dragged=!0,this._moveHandle.onMove(t,!0),this._moving&&this._handles.slice(0,-1).forEach(t=>{t.worldPosition.add(this._moveHandle.worldPosition.clone().sub(e))}),this.updateRoI(!0)}else this.onHover(null);this._handles[0].onMove(t),this._handles[1].onMove(t),this.update()}onEnd(){this._handles[0].onEnd(),this._handles[1].tracking&&this._handles[0].screenPosition.distanceTo(this._handles[1].screenPosition)<10||(this._dragged||!this._active||this._handles[1].tracking||(this._selected=!this._selected,this._handles[0].selected=this._selected),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd()):this._handles[1].tracking=!1,this._handles[1].selected=this._selected,this._active=this._handles[0].active||this._handles[1].active,this._dragged=!1,this._moving=!1,this.updateRoI(),this.update())}hideDOM(){this._handles.forEach(t=>t.hideDOM()),this._rectangle.style.display="none",this._ellipse.style.display="none",this._label.style.display="none"}showDOM(){this._handles[0].showDOM(),this._handles[1].showDOM(),this._rectangle.style.display="",this._ellipse.style.display="",this._label.style.display=""}create(){this.createMaterial(),this.createDOM()}createMaterial(){this._material=new t.MeshBasicMaterial,this._material.transparent=!0,this._material.opacity=.2}createDOM(){this._rectangle=document.createElement("div"),this._rectangle.className="widgets-rectangle-helper",this._container.appendChild(this._rectangle),this._ellipse=document.createElement("div"),this._ellipse.className="widgets-ellipse",this._container.appendChild(this._ellipse),this._label=document.createElement("div"),this._label.className="widgets-label";const t=document.createElement("div");let e=document.createElement("div");e.className="mean-sd",t.appendChild(e);let i=document.createElement("div");i.className="max-min",t.appendChild(i);let n=document.createElement("div");n.className="area",t.appendChild(n),this._label.appendChild(t),this._container.appendChild(this._label),this.updateDOMColor()}update(){this.updateColor(),this._handles[0].update(),this._handles[1].update(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOM()}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){this._mesh&&this.remove(this._mesh);const e=this._handles[1].worldPosition.clone().sub(this._handles[0].worldPosition),i=e.clone().projectOnVector(this._camera.up).length(),n=e.clone().projectOnVector(this._camera._right).length();0!==n&&0!==i&&(this._geometry=new t.ShapeGeometry(new t.Shape(new t.EllipseCurve(0,0,n/2,i/2,0,2*Math.PI,!1).getPoints(50))),this._mesh=new t.Mesh(this._geometry,this._material),this._mesh.position.copy(this._handles[0].worldPosition.clone().add(e.multiplyScalar(.5))),this._mesh.rotation.copy(this._camera.rotation),this._mesh.visible=!0,this.add(this._mesh))}updateRoI(t){if(!this._geometry)return;const e=this._label.querySelector(".mean-sd"),i=this._label.querySelector(".max-min");if(t)return e.innerHTML="",void(i.innerHTML="");const n=a.default.getRoI(this._mesh,this._camera,this._stack);null!==n?(e.innerHTML=`Mean: ${n.mean.toFixed(1)} / SD: ${n.sd.toFixed(1)}`,i.innerHTML=`Max: ${n.max.toFixed()} / Min: ${n.min.toFixed()}`):(e.innerHTML="",i.innerHTML="")}updateDOMColor(){this._rectangle.style.borderColor=this._color,this._ellipse.style.borderColor=this._color,this._label.style.borderColor=this._color}updateDOM(){if(!this._geometry)return;this.updateDOMColor();const t=this._stack.frame[this._params.frameIndex].ultrasoundRegions||[];if(this._area=a.default.getGeometryArea(this._geometry),this._calibrationFactor)this._area*=Math.pow(this._calibrationFactor,2);else if(t&&t.length>0&&this._stack.lps2IJK){const e=this.getRegionByXY(t,a.default.worldToData(this._stack.lps2IJK,this._handles[0].worldPosition)),i=this.getRegionByXY(t,a.default.worldToData(this._stack.lps2IJK,this._handles[1].worldPosition));null!==e&&null!==i&&e===i&&"cm"===t[e].unitsX&&"cm"===t[e].unitsY?(this._area*=Math.pow(t[e].deltaX,2),this._units="cm²"):this._stack.frame[this._params.frameIndex].pixelSpacing?(this._area/=100,this._units="cm²"):this._units="units"}else"cm²"===this._units&&(this._area/=100);"units"!==this._units||this._label.hasAttribute("title")?"units"!==this._units&&this._label.hasAttribute("title")&&(this._label.removeAttribute("title"),this._label.style.color=this._colors.text):(this._label.setAttribute("title","Calibration is required to display the area in cm²"),this._label.style.color=this._colors.error),this._label.querySelector(".area").innerHTML=`Area: ${this._area.toFixed(2)} ${this._units}`;const e=this.getRectData(this._handles[0].screenPosition,this._handles[1].screenPosition),i=this.adjustLabelTransform(this._label,this._handles[1].screenPosition.clone().add(e.paddingVector.multiplyScalar(15+this._label.offsetHeight/2)));this._rectangle.style.transform=`translate3D(${e.transformX}px, ${e.transformY}px, 0)`,this._rectangle.style.width=e.width+"px",this._rectangle.style.height=e.height+"px",this._ellipse.style.transform=`translate3D(${e.transformX}px, ${e.transformY}px, 0)`,this._ellipse.style.width=e.width+"px",this._ellipse.style.height=e.height+"px",this._label.style.transform="translate3D("+i.x+"px,"+i.y+"px, 0)"}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this._container.removeChild(this._rectangle),this._container.removeChild(this._ellipse),this._container.removeChild(this._label),this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null),this._geometry&&(this._geometry.dispose(),this._geometry=null),this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null,super.free()}getMeasurements(){return{area:this._area,units:this._units}}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles[0].worldPosition.copy(t),this._handles[1].worldPosition.copy(t),this._worldPosition.copy(t),this.update()}get calibrationFactor(){return this._calibrationFactor}set calibrationFactor(t){this._calibrationFactor=t,this._units="cm²",this.update()}}};e.a=o()},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=i(4),r=i(3),a=i(1),s=i(2);const o=(t=s)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){super(e,i,n),this._widgetType="Freehand",this._stack=n.stack,this._calibrationFactor=n.calibrationFactor||null,this._area=null,this._units=this._calibrationFactor||n.stack.frame[n.frameIndex].pixelSpacing?"cm²":"units",this._initialized=!1,this._moving=!1,this._domHovered=!1,this._material=null,this._geometry=null,this._mesh=null,this._lines=[],this._label=null,this._handles=[];const a=Object(r.b)(t);let s=new a(e,i,n);this.add(s),this._handles.push(s),this._moveHandle=new a(e,i,n),this.add(this._moveHandle),this._moveHandle.hide(),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.create(),this.addEventListeners()}addEventListeners(){this._container.addEventListener("wheel",this.onMove),this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover)}removeEventListeners(){this._container.removeEventListener("wheel",this.onMove),this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover)}onHover(t){t&&this.hoverDom(t),this.hoverMesh();let e=!1;this._handles.forEach(t=>e=e||t.hovered),this._hovered=e||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverMesh(){}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){let e=!1;this._moveHandle.onMove(t,!0),this._handles.forEach(i=>{i.onStart(t),e=e||i.active}),this._active=e||this._domHovered,this._domHovered&&this._initialized&&(this._moving=!0,this._controls.enabled=!1),this.update()}onMove(e){let i=!1;if(this.active)if(this._dragged=!0,this._initialized){const t=this._moveHandle.worldPosition.clone();this._moveHandle.onMove(e,!0),this._mesh&&this.remove(this._mesh),this.updateDOMContent(!0),this._moving&&this._handles.forEach(e=>{e.worldPosition.add(this._moveHandle.worldPosition.clone().sub(t))})}else{this._handles[this._handles.length-1].hovered=!1,this._handles[this._handles.length-1].active=!1,this._handles[this._handles.length-1].tracking=!1;let e=new(Object(r.b)(t))(this._targetMesh,this._controls,this._params);e.hovered=!0,e.active=!0,e.tracking=!0,this.add(e),this._handles.push(e),this.createLine()}this._handles.forEach(t=>{t.onMove(e),i=i||t.hovered}),this._hovered=i||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default",this.active&&this._handles.length>2&&this.pushPopHandle(),this.update()}onEnd(){if(this._handles.length<3)return;let t=!1;this._handles.slice(0,-1).forEach(e=>{e.onEnd(),t=t||e.active}),this._dragged||!this._handles[this._handles.length-1].tracking?(this._handles[this._handles.length-1].tracking=!1,this._handles[this._handles.length-1].onEnd()):this._handles[this._handles.length-1].tracking=!1,this._lines.length<this._handles.length&&this.createLine(),!this._dragged&&this._initialized||(this.updateMesh(),this.updateDOMContent()),!this._dragged&&this._active&&(this._selected=!this._selected,this._handles.forEach(t=>t.selected=this._selected)),this._active=t||this._handles[this._handles.length-1].active,this._dragged=!1,this._moving=!1,this._initialized=!0,this.update()}create(){this.createMaterial(),this.createDOM()}createMaterial(){this._material=new t.MeshBasicMaterial({side:t.DoubleSide}),this._material.transparent=!0,this._material.opacity=.2}createDOM(){this._label=document.createElement("div"),this._label.className="widgets-label";const t=document.createElement("div");let e=document.createElement("div");e.className="mean-sd",t.appendChild(e);let i=document.createElement("div");i.className="max-min",t.appendChild(i);let n=document.createElement("div");n.className="area",t.appendChild(n),this._label.appendChild(t),this._container.appendChild(this._label),this.updateDOMColor()}createLine(){const t=document.createElement("div");t.className="widgets-line",t.addEventListener("mouseenter",this.onHover),t.addEventListener("mouseleave",this.onHover),this._lines.push(t),this._container.appendChild(t)}hideDOM(){this._handles.forEach(t=>t.hideDOM()),this._lines.forEach(t=>t.style.display="none"),this._label.style.display="none"}showDOM(){this._handles.forEach(t=>t.showDOM()),this._lines.forEach(t=>t.style.display=""),this._label.style.display=""}update(){this.updateColor(),this._handles.forEach(t=>t.update()),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMColor(),this.updateDOMPosition()}updateMesh(){this._mesh&&this.remove(this._mesh);let e=[];this._handles.forEach(t=>e.push(t.worldPosition));let i=a.default.centerOfMass(e),n=(new t.Vector3).subVectors(e[0],i).normalize(),r=(new t.Vector3).crossVectors((new t.Vector3).subVectors(e[0],i),(new t.Vector3).subVectors(e[1],i)),s=(new t.Vector3).crossVectors(n,r).normalize(),o=[];for(let r=0;r<e.length;r++){let a=new t.Vector3(e[r].x,e[r].y,e[r].z);a.direction=(new t.Vector3).subVectors(e[r],i).normalize();let l=n.dot(a.direction),c=s.dot(a.direction);a.xy={x:l,y:c},a.angle=Math.atan2(c,l)*(180/Math.PI),o.push(a)}this._shapeWarn=!1;const l=console.warn;console.warn=function(...t){return"three.ShapeUtils: Unable to triangulate polygon! in triangulate()"===t[0]&&(this._shapeWarn=!0),l.apply(console,t)}.bind(this);let c=new t.Shape;c.moveTo(o[0].xy.x,o[0].xy.y);for(let t=1;t<o.length;t++)c.lineTo(o[t].xy.x,o[t].xy.y);c.lineTo(o[0].xy.x,o[0].xy.y),this._geometry=new t.ShapeGeometry(c),console.warn=l,this._geometry.vertices=o,this._geometry.verticesNeedUpdate=!0,this._geometry.elementsNeedUpdate=!0,this.updateMeshColor(),this._mesh=new t.Mesh(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)}isPointOnLine(e,i,n){let r=new t.Vector3;return r.crossVectors(e.clone().sub(n),i.clone().sub(n)),!r.length()}pushPopHandle(){let t=this._handles[this._handles.length-3],e=this._handles[this._handles.length-2],i=this._handles[this._handles.length-1],n=this.isPointOnLine(t.worldPosition,e.worldPosition,i.worldPosition);return(n||t.screenPosition.distanceTo(i.screenPosition)<25)&&(this.remove(e),e.free(),this._handles[this._handles.length-2]=i,this._handles.pop(),this._container.removeChild(this._lines.pop())),n}updateDOMColor(){this._handles.length>=2&&this._lines.forEach(t=>t.style.backgroundColor=this._color),this._label.style.borderColor=this._color}updateDOMContent(t){const e=this._label.querySelector(".mean-sd"),i=this._label.querySelector(".max-min"),n=this._label.querySelector(".area");if(t)return e.innerHTML="",i.innerHTML="",void(n.innerHTML="");const r=this._stack.frame[this._params.frameIndex].ultrasoundRegions||[];if(this._area=a.default.getGeometryArea(this._geometry),this._calibrationFactor)this._area*=Math.pow(this._calibrationFactor,2);else if(r&&r.length>0&&this._stack.lps2IJK){let t,e,i=!0;this._handles.forEach(n=>{(null===(t=this.getRegionByXY(r,a.default.worldToData(this._stack.lps2IJK,n.worldPosition)))||"cm"!==r[t].unitsX||void 0!==e&&e!==t)&&(i=!1),e=t}),i?(this._area*=Math.pow(r[t].deltaX,2),this._units="cm²"):this._stack.frame[this._params.frameIndex].pixelSpacing?(this._area/=100,this._units="cm²"):this._units="units"}else"cm²"===this._units&&(this._area/=100);let s="units"===this._units?"Calibration is required to display the area in cm². ":"";this._shapeWarn&&(s+="Values may be incorrect due to triangulation error."),""===s||this._label.hasAttribute("title")?""===s&&this._label.hasAttribute("title")&&(this._label.removeAttribute("title"),this._label.style.color=this._colors.text):(this._label.setAttribute("title",s),this._label.style.color=this._colors.error);const o=a.default.getRoI(this._mesh,this._camera,this._stack);null!==o?(e.innerHTML=`Mean: ${o.mean.toFixed(1)} / SD: ${o.sd.toFixed(1)}`,i.innerHTML=`Max: ${o.max.toFixed()} / Min: ${o.min.toFixed()}`):(e.innerHTML="",i.innerHTML=""),n.innerHTML=`Area: ${this._area.toFixed(2)} ${this._units}`}updateDOMPosition(){if(this._handles.length<2)return;let t=null;this._lines.forEach((e,i)=>{const n=this.getLineData(this._handles[i].screenPosition,this._handles[i+1===this._handles.length?0:i+1].screenPosition);e.style.transform=`translate3D(${n.transformX}px, ${n.transformY}px, 0)\n                rotate(${n.transformAngle}rad)`,e.style.width=n.length+"px",(null===t||t.y<this._handles[i].screenPosition.y)&&(t=this._handles[i].screenPosition.clone())}),this._initialized&&(t.y+=15+this._label.offsetHeight/2,t=this.adjustLabelTransform(this._label,t),this._label.style.transform=`translate3D(${t.x}px, ${t.y}px, 0)`)}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this.remove(this._moveHandle),this._moveHandle.free(),this._moveHandle=null,this._lines.forEach(t=>{t.removeEventListener("mouseenter",this.onHover),t.removeEventListener("mouseleave",this.onHover),this._container.removeChild(t)}),this._lines=[],this._container.removeChild(this._label),this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null),this._geometry&&(this._geometry.dispose(),this._geometry=null),this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null,super.free()}getMeasurements(){return{area:this._area,units:this._units}}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this._moveHandle.targetMesh=t,this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles.forEach(e=>e._worldPosition.copy(t)),this._worldPosition.copy(t),this.update()}get calibrationFactor(){return this._calibrationFactor}set calibrationFactor(t){this._calibrationFactor=t,this._units="cm²",this.update()}}};e.a=o()},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=i(4),r=i(3),a=i(1),s=i(2);const o=(t=s)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){if(super(e,i,n),this._widgetType="PeakVelocity",this._regions=n.ultrasoundRegions||[],this._regions.length<1)throw new Error("Ultrasound regions should not be empty!");if(this._velocity=null,this._gradient=null,this._container.style.cursor="pointer",this._controls.enabled=!1,this._initialized=!1,this._active=!0,this._domHovered=!1,this._initialRegion=this.getRegionByXY(this._regions,a.default.worldToData(n.lps2IJK,n.worldPosition)),null===this._initialRegion)throw new Error("Invalid initial UltraSound region!");this._line=null,this._label=null;const s=Object(r.b)(t);this._handle=new s(e,i,n),this.add(this._handle),this._moveHandle=new s(e,i,n),this.add(this._moveHandle),this._moveHandle.hide(),this.create(),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.addEventListeners()}addEventListeners(){this._container.addEventListener("wheel",this.onMove),this._line.addEventListener("mouseenter",this.onHover),this._line.addEventListener("mouseleave",this.onHover),this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover)}removeEventListeners(){this._container.removeEventListener("wheel",this.onMove),this._line.removeEventListener("mouseenter",this.onHover),this._line.removeEventListener("mouseleave",this.onHover),this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover)}onHover(t){t&&this.hoverDom(t),this._hovered=this._handle.hovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){this._moveHandle.onMove(t,!0),this._handle.onStart(t),this._active=this._handle.active||this._domHovered,this._domHovered&&(this._controls.enabled=!1),this.update()}onMove(t){if(this._active){const e=this._moveHandle.worldPosition.clone();this._moveHandle.onMove(t,!0);const i=this._moveHandle.worldPosition.clone().sub(e);if(!this.isCorrectRegion(i))return void this._moveHandle.worldPosition.copy(e);this._handle.active||this._handle.worldPosition.add(i),this._dragged=!0}else this.onHover(null);this._handle.onMove(t),this.update()}onEnd(){this._handle.onEnd(),!this._dragged&&this._active&&this._initialized&&(this._selected=!this._selected,this._handle.selected=this._selected),this._initialized=!0,this._active=!1,this._dragged=!1,this.update()}isCorrectRegion(t){const e=this.getRegionByXY(this._regions,a.default.worldToData(this._params.lps2IJK,this._handle.worldPosition.clone().add(t)));return null!==e&&e===this._initialRegion&&"cm/sec"===this._regions[e].unitsY}create(){this.createDOM()}createDOM(){this._line=document.createElement("div"),this._line.className="widgets-dashline",this._container.appendChild(this._line),this._label=document.createElement("div"),this._label.className="widgets-label";let t=document.createElement("div"),e=document.createElement("div");e.className="peakVelocity",t.appendChild(e);let i=document.createElement("div");i.className="gradient",t.appendChild(i),this._label.appendChild(t),this._container.appendChild(this._label),this.updateDOMColor()}update(){this.updateColor(),this._handle.update(),this._worldPosition.copy(this._handle.worldPosition),this.updateDOM()}updateDOM(){this.updateDOMColor();const t=a.default.worldToData(this._params.lps2IJK,this._worldPosition),e=this._regions[this.getRegionByXY(this._regions,t)],i=this.getPointInRegion(e,t);this._velocity=Math.abs(i.y/100),this._gradient=4*Math.pow(this._velocity,2),this._label.querySelector(".peakVelocity").innerHTML=`${this._velocity.toFixed(2)} m/s`,this._label.querySelector(".gradient").innerHTML=`${this._gradient.toFixed(2)} mmhg`;const n=this.adjustLabelTransform(this._label,this._handle.screenPosition,!0);this._line.style.transform=`translate3D(${n.x-(t.x-e.x0)*this._camera.zoom}px, ${n.y}px, 0)`,this._line.style.width=(e.x1-e.x0)*this._camera.zoom+"px",this._label.style.transform=`translate3D(${n.x+10}px, ${n.y+10}px, 0)`}updateDOMColor(){this._line.style.backgroundColor=this._color,this._label.style.borderColor=this._color}hideDOM(){this._line.style.display="none",this._label.style.display="none",this._handle.hideDOM()}showDOM(){this._line.style.display="",this._label.style.display="",this._handle.showDOM()}free(){this.removeEventListeners(),this.remove(this._handle),this._handle.free(),this._handle=null,this.remove(this._moveHandle),this._moveHandle.free(),this._moveHandle=null,this._container.removeChild(this._line),this._container.removeChild(this._label),super.free()}getMeasurements(){return{velocity:this._velocity,gradient:this._gradient}}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handle.targetMesh=t,this._moveHandle.targetMesh=t,this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handle.worldPosition.copy(t),this._moveHandle.worldPosition.copy(t),this._worldPosition.copy(t),this.update()}get active(){return this._active}set active(t){this._active=t,this._controls.enabled=!this._active,this.update()}}};e.a=o()},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=i(4),r=i(3),a=i(1),s=i(2);const o=(t=s)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){if(super(e,i,n),this._widgetType="PressureHalfTime",this._regions=n.ultrasoundRegions||[],this._regions.length<1)throw new Error("Ultrasound regions should not be empty!");if(this._vMax=null,this._gMax=null,this._pht=null,this._mva=null,this._dt=null,this._ds=null,this._domHovered=!1,this._initialRegion=this.getRegionByXY(this._regions,a.default.worldToData(n.lps2IJK,n.worldPosition)),null===this._initialRegion)throw new Error("Invalid initial UltraSound region!");this._material=null,this._geometry=null,this._mesh=null,this._line=null,this._label=null,this._handles=[];const s=Object(r.b)(t);let o;for(let t=0;t<2;t++)o=new s(e,i,n),this.add(o),this._handles.push(o);this._handles[1].active=!0,this._handles[1].tracking=!0,this._moveHandle=new s(e,i,n),this.add(this._moveHandle),this._handles.push(this._moveHandle),this._moveHandle.hide(),this.create(),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.addEventListeners()}addEventListeners(){this._container.addEventListener("wheel",this.onMove),this._line.addEventListener("mouseenter",this.onHover),this._line.addEventListener("mouseleave",this.onHover),this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover)}removeEventListeners(){this._container.removeEventListener("wheel",this.onMove),this._line.removeEventListener("mouseenter",this.onHover),this._line.removeEventListener("mouseleave",this.onHover),this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover)}onHover(t){t&&this.hoverDom(t),this.hoverMesh(),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverMesh(){}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){this._moveHandle.onMove(t,!0),this._handles[0].onStart(t),this._handles[1].onStart(t),this._active=this._handles[0].active||this._handles[1].active||this._domHovered,this._domHovered&&(this._controls.enabled=!1),this.update()}onMove(t){if(this._active){const e=this._moveHandle.worldPosition.clone();this._moveHandle.onMove(t,!0);const i=this._moveHandle.worldPosition.clone().sub(e);if(!this.isCorrectRegion(i))return void this._moveHandle.worldPosition.copy(e);this._handles[0].active||this._handles[1].active||this._handles.slice(0,-1).forEach(t=>{t.worldPosition.add(i)}),this._dragged=!0}else this.onHover(null);this._handles[0].onMove(t),this._handles[1].onMove(t),this.update()}onEnd(){this._handles[0].onEnd(),this._handles[1].tracking&&this._handles[0].screenPosition.distanceTo(this._handles[1].screenPosition)<10||(this._dragged||!this._active||this._handles[1].tracking||(this._selected=!this._selected,this._handles[0].selected=this._selected),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd()):this._handles[1].tracking=!1,this._handles[1].selected=this._selected,this._active=this._handles[0].active||this._handles[1].active,this._dragged=!1,this.update())}isCorrectRegion(t){const e=!(this._handles[0].active||this._handles[1].active);let i=!0;return(this._handles[0].active||e)&&(i=i&&this.checkHandle(0,t)),(this._handles[1].active||e)&&(i=i&&this.checkHandle(1,t)),i}checkHandle(t,e){const i=this.getRegionByXY(this._regions,a.default.worldToData(this._params.lps2IJK,this._handles[t].worldPosition.clone().add(e)));return null!==i&&i===this._initialRegion&&"cm/sec"===this._regions[i].unitsY}create(){this.createMesh(),this.createDOM()}createMesh(){this._geometry=new t.Geometry,this._geometry.vertices=[this._handles[0].worldPosition,this._handles[1].worldPosition],this._material=new t.LineBasicMaterial,this.updateMeshColor(),this._mesh=new t.Line(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)}createDOM(){this._line=document.createElement("div"),this._line.className="widgets-line",this._container.appendChild(this._line),this._label=document.createElement("div"),this._label.className="widgets-label";const t=document.createElement("div");["vmax","gmax","pht","mva","dt","ds"].forEach(e=>{const i=document.createElement("div");i.className=e,t.appendChild(i)}),this._label.appendChild(t),this._container.appendChild(this._label),this.updateDOMColor()}hideDOM(){this._line.style.display="none",this._label.style.display="none",this._handles.forEach(t=>t.hideDOM())}showDOM(){this._line.style.display="",this._label.style.display="",this._handles[0].showDOM(),this._handles[1].showDOM()}update(){this.updateColor(),this._handles[0].update(),this._handles[1].update(),this.updateValues(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOM()}updateValues(){const t=this.getUsPoint(this._regions,a.default.worldToData(this._params.lps2IJK,this._handles[0].worldPosition)),e=this.getUsPoint(this._regions,a.default.worldToData(this._params.lps2IJK,this._handles[1].worldPosition)),i=Math.abs(t.y/100),n=Math.abs(e.y/100),r=Math.abs(t.x),s=Math.abs(e.x),o=this._vMax===i?r:s;this._vMax=Math.max(i,n),this._gMax=4*Math.pow(this._vMax,2);const l=this._vMax/Math.sqrt(2),c=(i-l)/(n-l),h=i/n;this._pht=1===c?Number.POSITIVE_INFINITY:1e3*Math.abs(o-(r-c*s)/(1-c)),this._mva=220/this._pht,this._dt=1===h?Number.POSITIVE_INFINITY:1e3*Math.abs(o-(r-h*s)/(1-h)),this._ds=0===this._dt?Number.POSITIVE_INFINITY:this._vMax/this._dt*1e3}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)}updateDOM(){this.updateDOMColor();const t=this.getLineData(this._handles[0].screenPosition,this._handles[1].screenPosition);this._line.style.transform=`translate3D(${t.transformX}px, ${t.transformY}px, 0)\n                rotate(${t.transformAngle}rad)`,this._line.style.width=t.length+"px",this._label.querySelector(".vmax").innerHTML=`Vmax: ${this._vMax.toFixed(2)} m/s`,this._label.querySelector(".gmax").innerHTML=`Gmax: ${this._gMax.toFixed(2)} mmhg`,this._label.querySelector(".pht").innerHTML=`PHT: ${this._pht.toFixed(1)} ms`,this._label.querySelector(".mva").innerHTML=`MVA: ${this._mva.toFixed(2)} cm²`,this._label.querySelector(".dt").innerHTML=`DT: ${this._dt.toFixed(1)} ms`,this._label.querySelector(".ds").innerHTML=`DS: ${this._ds.toFixed(2)} m/s²`;let e=Math.abs(t.transformAngle);e>Math.PI/2&&(e=Math.PI-e);const i=Math.tan(e)<this._label.offsetHeight/this._label.offsetWidth?this._label.offsetWidth/2/Math.cos(e)+15:this._label.offsetHeight/2/Math.cos(Math.PI/2-e)+15,n=t.line.normalize().multiplyScalar(i),r=t.length>2*i?this._handles[1].screenPosition.clone().sub(n):this._handles[1].screenPosition.clone().add(n),a=this.adjustLabelTransform(this._label,r);this._label.style.transform=`translate3D(${a.x}px, ${a.y}px, 0)`}updateDOMColor(){this._line.style.backgroundColor=this._color,this._label.style.borderColor=this._color}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this._container.removeChild(this._line),this._container.removeChild(this._label),this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,super.free()}getMeasurements(){return{vMax:this._vMax,gMax:this._gMax,pht:this._pht,mva:this._mva,dt:this._dt,ds:this._ds}}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles[0].worldPosition.copy(t),this._handles[1].worldPosition.copy(t),this._worldPosition.copy(t),this.update()}}};e.a=o()},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=i(4),r=i(3),a=i(1),s=i(2);const o=(t=s)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){super(e,i,n),this._widgetType="Polygon",this._stack=n.stack,this._calibrationFactor=n.calibrationFactor||null,this._area=null,this._units=this._calibrationFactor||n.stack.frame[n.frameIndex].pixelSpacing?"cm²":"units",this._initialized=!1,this._newHandleRequired=!0,this._moving=!1,this._domHovered=!1,this._material=null,this._geometry=null,this._mesh=null,this._lines=[],this._label=null,this._handles=[];const a=Object(r.b)(t);let s=new a(e,i,n);this.add(s),this._handles.push(s),this._moveHandle=new a(e,i,n),this.add(this._moveHandle),this._moveHandle.hide(),this.onDoubleClick=this.onDoubleClick.bind(this),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.create(),this.addEventListeners()}addEventListeners(){this._container.addEventListener("dblclick",this.onDoubleClick),this._container.addEventListener("wheel",this.onMove),this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover)}removeEventListeners(){this._container.removeEventListener("dblclick",this.onDoubleClick),this._container.removeEventListener("wheel",this.onMove),this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover)}onHover(t){t&&this.hoverDom(t),this.hoverMesh();let e=!1;this._handles.forEach(t=>e=e||t.hovered),this._hovered=e||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverMesh(){}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){let e=!1;this._handles.forEach(i=>{i.onStart(t),e=e||i.active}),this._initialized&&(this._moveHandle.onMove(t,!0),this._active=e||this._domHovered,this._domHovered&&this._initialized&&(this._moving=!0,this._controls.enabled=!1),this.update())}onMove(e){let i=!1;if(this.active)if(this._dragged=!0,this._newHandleRequired&&!this._initialized){this._handles[this._handles.length-1].hovered=!1,this._handles[this._handles.length-1].active=!1,this._handles[this._handles.length-1].tracking=!1;let e=new(Object(r.b)(t))(this._targetMesh,this._controls,this._params);e.hovered=!0,e.active=!0,e.tracking=!0,this.add(e),this._handles.push(e),this.createLine(),this._newHandleRequired=!1}else{const t=this._moveHandle.worldPosition.clone();this._moveHandle.onMove(e,!0),this._mesh&&this.remove(this._mesh),this.updateDOMContent(!0),this._moving&&this._handles.forEach(e=>{e.worldPosition.add(this._moveHandle.worldPosition.clone().sub(t))})}this._handles.forEach(t=>{t.onMove(e),i=i||t.hovered}),this._hovered=i||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default",this.update()}onEnd(){let t=this._handles.length,e=!1;!this._initialized&&t>1&&this._handles[t-2].screenPosition.distanceTo(this._handles[t-1].screenPosition)<10||(this._handles.forEach(t=>{t.onEnd(),e=e||t.active}),this._initialized?(this._dragged&&(this.updateMesh(),this.updateDOMContent()),!this._dragged&&this._active&&(this._selected=!this._selected,this._handles.forEach(t=>t.selected=this._selected)),this._active=e||this._handles[t-1].active,this._dragged=!1,this._moving=!1,this.update()):this._newHandleRequired=!0)}onDoubleClick(){let t=this._handles.length;t<3||this._initialized||t>1&&this._handles[t-2].screenPosition.distanceTo(this._handles[t-1].screenPosition)<10||(this._handles[t-1].tracking=!1,this._handles.forEach(t=>t.onEnd()),this._active=!1,this._dragged=!1,this._moving=!1,this._initialized=!0,this.updateMesh(),this.updateDOMContent(),this.update())}create(){this.createMaterial(),this.createDOM()}createMaterial(){this._material=new t.MeshBasicMaterial({side:s.DoubleSide}),this._material.transparent=!0,this._material.opacity=.2}createDOM(){this.createLine(),this._label=document.createElement("div"),this._label.className="widgets-label";const t=document.createElement("div");let e=document.createElement("div");e.className="mean-sd",t.appendChild(e);let i=document.createElement("div");i.className="max-min",t.appendChild(i);let n=document.createElement("div");n.className="area",t.appendChild(n),this._label.appendChild(t),this._container.appendChild(this._label),this.updateDOMColor()}createLine(){const t=document.createElement("div");t.className="widgets-line",t.addEventListener("mouseenter",this.onHover),t.addEventListener("mouseleave",this.onHover),this._lines.push(t),this._container.appendChild(t)}hideDOM(){this._handles.forEach(t=>t.hideDOM()),this._lines.forEach(t=>t.style.display="none"),this._label.style.display="none"}showDOM(){this._handles.forEach(t=>t.showDOM()),this._lines.forEach(t=>t.style.display=""),this._label.style.display=""}update(){this.updateColor(),this._handles.forEach(t=>t.update()),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOMColor(),this.updateDOMPosition()}updateMesh(){this._mesh&&this.remove(this._mesh);let e=[];this._handles.forEach(t=>e.push(t.worldPosition));let i=a.default.centerOfMass(e),n=(new t.Vector3).subVectors(e[0],i).normalize(),r=(new t.Vector3).crossVectors((new t.Vector3).subVectors(e[0],i),(new t.Vector3).subVectors(e[1],i)),s=(new t.Vector3).crossVectors(n,r).normalize(),o=[];for(let r=0;r<e.length;r++){let a=new t.Vector3(e[r].x,e[r].y,e[r].z);a.direction=(new t.Vector3).subVectors(e[r],i).normalize();let l=n.dot(a.direction),c=s.dot(a.direction);a.xy={x:l,y:c},a.angle=Math.atan2(c,l)*(180/Math.PI),o.push(a)}this._shapeWarn=!1;const l=console.warn;console.warn=function(...t){return"THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"===t[0]&&(this._shapeWarn=!0),l.apply(console,t)}.bind(this);let c=new t.Shape;c.moveTo(o[0].xy.x,o[0].xy.y);for(let t=1;t<o.length;t++)c.lineTo(o[t].xy.x,o[t].xy.y);c.lineTo(o[0].xy.x,o[0].xy.y),this._geometry=new t.ShapeGeometry(c),console.warn=l,this._geometry.vertices=o,this._geometry.verticesNeedUpdate=!0,this._geometry.elementsNeedUpdate=!0,this.updateMeshColor(),this._mesh=new t.Mesh(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)}updateDOMColor(){this._lines.forEach(t=>t.style.backgroundColor=this._color),this._label.style.borderColor=this._color}updateDOMContent(t){const e=this._label.querySelector(".mean-sd"),i=this._label.querySelector(".max-min"),n=this._label.querySelector(".area");if(t)return e.innerHTML="",i.innerHTML="",void(n.innerHTML="");const r=this._stack.frame[this._params.frameIndex].ultrasoundRegions||[];if(this._area=a.default.getGeometryArea(this._geometry),this._calibrationFactor)this._area*=Math.pow(this._calibrationFactor,2);else if(r&&r.length>0&&this._stack.lps2IJK){let t,e,i=!0;this._handles.forEach(n=>{(null===(t=this.getRegionByXY(r,a.default.worldToData(this._stack.lps2IJK,n.worldPosition)))||"cm"!==r[t].unitsX||void 0!==e&&e!==t)&&(i=!1),e=t}),i?(this._area*=Math.pow(r[t].deltaX,2),this._units="cm²"):this._stack.frame[this._params.frameIndex].pixelSpacing?(this._area/=100,this._units="cm²"):this._units="units"}else"cm²"===this._units&&(this._area/=100);let s="units"===this._units?"Calibration is required to display the area in cm². ":"";this._shapeWarn&&(s+="Values may be incorrect due to triangulation error."),""===s||this._label.hasAttribute("title")?""===s&&this._label.hasAttribute("title")&&(this._label.removeAttribute("title"),this._label.style.color=this._colors.text):(this._label.setAttribute("title",s),this._label.style.color=this._colors.error);const o=a.default.getRoI(this._mesh,this._camera,this._stack);null!==o?(e.innerHTML=`Mean: ${o.mean.toFixed(1)} / SD: ${o.sd.toFixed(1)}`,i.innerHTML=`Max: ${o.max.toFixed()} / Min: ${o.min.toFixed()}`):(e.innerHTML="",i.innerHTML=""),n.innerHTML=`Area: ${this._area.toFixed(2)} ${this._units}`}updateDOMPosition(){let t=null;this._lines.forEach((e,i)=>{const n=this.getLineData(this._handles[i].screenPosition,this._handles[i+1===this._handles.length?0:i+1].screenPosition);e.style.transform=`translate3D(${n.transformX}px, ${n.transformY}px, 0)\n                    rotate(${n.transformAngle}rad)`,e.style.width=n.length+"px",(null===t||t.y<this._handles[i].screenPosition.y)&&(t=this._handles[i].screenPosition.clone())}),this._initialized&&(t.y+=15+this._label.offsetHeight/2,t=this.adjustLabelTransform(this._label,t),this._label.style.transform=`translate3D(${t.x}px, ${t.y}px, 0)`)}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this.remove(this._moveHandle),this._moveHandle.free(),this._moveHandle=null,this._lines.forEach(t=>{t.removeEventListener("mouseenter",this.onHover),t.removeEventListener("mouseleave",this.onHover),this._container.removeChild(t)}),this._lines=[],this._container.removeChild(this._label),this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null),this._geometry&&(this._geometry.dispose(),this._geometry=null),this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null,super.free()}getMeasurements(){return{area:this._area,units:this._units}}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this._moveHandle.targetMesh=t,this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles.forEach(e=>e.worldPosition.copy(t)),this._worldPosition.copy(t),this.update()}get calibrationFactor(){return this._calibrationFactor}set calibrationFactor(t){this._calibrationFactor=t,this._units="cm²",this.update()}}};e.a=o()},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=i(4),r=i(3),a=i(1),s=i(2);const o=(t=s)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){super(e,i,n),this._widgetType="Rectangle",this._stack=n.stack,this._calibrationFactor=n.calibrationFactor||null,this._area=null,this._units=this._calibrationFactor||n.stack.frame[n.frameIndex].pixelSpacing?"cm²":"units",this._moving=!1,this._domHovered=!1,this._material=null,this._geometry=null,this._mesh=null,this._rectangle=null,this._label=null,this._handles=[];const a=Object(r.b)(t);let s;for(let t=0;t<2;t++)s=new a(e,i,n),this.add(s),this._handles.push(s);this._handles[1].active=!0,this._handles[1].tracking=!0,this._moveHandle=new a(e,i,n),this.add(this._moveHandle),this._handles.push(this._moveHandle),this._moveHandle.hide(),this.create(),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.addEventListeners()}addEventListeners(){this._container.addEventListener("wheel",this.onMove),this._rectangle.addEventListener("mouseenter",this.onHover),this._rectangle.addEventListener("mouseleave",this.onHover),this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover)}removeEventListeners(){this._container.removeEventListener("wheel",this.onMove),this._rectangle.removeEventListener("mouseenter",this.onHover),this._rectangle.removeEventListener("mouseleave",this.onHover),this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover)}onHover(t){t&&this.hoverDom(t),this.hoverMesh(),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverMesh(){}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){this._moveHandle.onMove(t,!0),this._handles[0].onStart(t),this._handles[1].onStart(t),this._active=this._handles[0].active||this._handles[1].active||this._domHovered,this._domHovered&&!this._handles[1].tracking&&(this._moving=!0,this._controls.enabled=!1),this.update()}onMove(t){if(this._active){const e=this._moveHandle.worldPosition.clone();this._dragged=!0,this._moveHandle.onMove(t,!0),this._moving&&this._handles.slice(0,-1).forEach(t=>{t.worldPosition.add(this._moveHandle.worldPosition.clone().sub(e))}),this.updateRoI(!0)}else this.onHover(null);this._handles[0].onMove(t),this._handles[1].onMove(t),this.update()}onEnd(){this._handles[0].onEnd(),this._handles[1].tracking&&this._handles[0].screenPosition.distanceTo(this._handles[1].screenPosition)<10||(this._dragged||!this._active||this._handles[1].tracking||(this._selected=!this._selected,this._handles[0].selected=this._selected),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd()):this._handles[1].tracking=!1,this._handles[1].selected=this._selected,this._active=this._handles[0].active||this._handles[1].active,this._dragged=!1,this._moving=!1,this.updateRoI(),this.update())}hideDOM(){this._handles.forEach(t=>t.hideDOM()),this._rectangle.style.display="none",this._label.style.display="none"}showDOM(){this._handles[0].showDOM(),this._handles[1].showDOM(),this._rectangle.style.display="",this._label.style.display=""}create(){this.createMesh(),this.createDOM()}createMesh(){this._geometry=new t.PlaneGeometry(1,1),this._material=new t.MeshBasicMaterial({side:t.DoubleSide}),this._material.transparent=!0,this._material.opacity=.2,this.updateMeshColor(),this._mesh=new t.Mesh(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)}createDOM(){this._rectangle=document.createElement("div"),this._rectangle.className="widgets-rectangle",this._container.appendChild(this._rectangle),this._label=document.createElement("div"),this._label.className="widgets-label";const t=document.createElement("div");let e=document.createElement("div");e.className="mean-sd",t.appendChild(e);let i=document.createElement("div");i.className="max-min",t.appendChild(i);let n=document.createElement("div");n.className="area",t.appendChild(n),this._label.appendChild(t),this._container.appendChild(this._label),this.updateDOMColor()}update(){this.updateColor(),this._handles[0].update(),this._handles[1].update(),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOM()}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){if(this._geometry){const e=(new t.Vector3).subVectors(this._handles[1].worldPosition,this._handles[0].worldPosition).projectOnVector(this._camera.up);this._geometry.vertices[0].copy(this._handles[0].worldPosition),this._geometry.vertices[1].copy((new t.Vector3).addVectors(this._handles[0].worldPosition,e)),this._geometry.vertices[2].copy((new t.Vector3).subVectors(this._handles[1].worldPosition,e)),this._geometry.vertices[3].copy(this._handles[1].worldPosition),this._geometry.verticesNeedUpdate=!0,this._geometry.computeBoundingSphere()}}updateRoI(t){const e=this._label.querySelector(".mean-sd"),i=this._label.querySelector(".max-min");if(t)return e.innerHTML="",void(i.innerHTML="");const n=a.default.getRoI(this._mesh,this._camera,this._stack);null!==n?(e.innerHTML=`Mean: ${n.mean.toFixed(1)} / SD: ${n.sd.toFixed(1)}`,i.innerHTML=`Max: ${n.max.toFixed()} / Min: ${n.min.toFixed()}`):(e.innerHTML="",i.innerHTML="")}updateDOMColor(){this._rectangle.style.borderColor=this._color,this._label.style.borderColor=this._color}updateDOM(){this.updateDOMColor();const t=this._stack.frame[this._params.frameIndex].ultrasoundRegions||[];if(this._area=a.default.getGeometryArea(this._geometry),this._calibrationFactor)this._area*=Math.pow(this._calibrationFactor,2);else if(t&&t.length>0&&this._stack.lps2IJK){const e=this.getRegionByXY(t,a.default.worldToData(this._stack.lps2IJK,this._handles[0].worldPosition)),i=this.getRegionByXY(t,a.default.worldToData(this._stack.lps2IJK,this._handles[1].worldPosition));null!==e&&null!==i&&e===i&&"cm"===t[e].unitsX&&"cm"===t[e].unitsY?(this._area*=Math.pow(t[e].deltaX,2),this._units="cm²"):this._stack.frame[this._params.frameIndex].pixelSpacing?(this._area/=100,this._units="cm²"):this._units="units"}else"cm²"===this._units&&(this._area/=100);"units"!==this._units||this._label.hasAttribute("title")?"units"!==this._units&&this._label.hasAttribute("title")&&(this._label.removeAttribute("title"),this._label.style.color=this._colors.text):(this._label.setAttribute("title","Calibration is required to display the area in cm²"),this._label.style.color=this._colors.error),this._label.querySelector(".area").innerHTML=`Area: ${this._area.toFixed(2)} ${this._units}`;const e=this.getRectData(this._handles[0].screenPosition,this._handles[1].screenPosition),i=this.adjustLabelTransform(this._label,this._handles[1].screenPosition.clone().add(e.paddingVector.multiplyScalar(15+this._label.offsetHeight/2)));this._rectangle.style.transform=`translate3D(${e.transformX}px, ${e.transformY}px, 0)`,this._rectangle.style.width=e.width+"px",this._rectangle.style.height=e.height+"px",this._label.style.transform="translate3D("+i.x+"px,"+i.y+"px, 0)"}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this._container.removeChild(this._rectangle),this._container.removeChild(this._label),this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,this._stack=null,super.free()}getMeasurements(){return{area:this._area,units:this._units}}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles[0].worldPosition.copy(t),this._handles[1].worldPosition.copy(t),this._worldPosition.copy(t),this.update()}get calibrationFactor(){return this._calibrationFactor}set calibrationFactor(t){this._calibrationFactor=t,this._units="cm²",this.update()}}};e.a=o()},function(t,e,i){"use strict";i.d(e,"b",function(){return s});var n=i(4),r=i(3),a=i(2);const s=(t=a)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){super(e,i,n),this._widgetType="Ruler",this._calibrationFactor=n.calibrationFactor||null,this._distance=null,this._units=this._calibrationFactor||n.pixelSpacing?"mm":"units",this._moving=!1,this._domHovered=!1,this._material=null,this._geometry=null,this._mesh=null,this._line=null,this._label=null,this._handles=[];const a=Object(r.b)(t);let s;for(let t=0;t<2;t++)s=new a(e,i,n),this.add(s),this._handles.push(s);this._handles[1].active=!0,this._handles[1].tracking=!0,this._moveHandle=new a(e,i,n),this.add(this._moveHandle),this._handles.push(this._moveHandle),this._moveHandle.hide(),this.create(),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.addEventListeners()}addEventListeners(){this._container.addEventListener("wheel",this.onMove),this._line.addEventListener("mouseenter",this.onHover),this._line.addEventListener("mouseleave",this.onHover),this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover)}removeEventListeners(){this._container.removeEventListener("wheel",this.onMove),this._line.removeEventListener("mouseenter",this.onHover),this._line.removeEventListener("mouseleave",this.onHover),this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover)}onHover(t){t&&this.hoverDom(t),this.hoverMesh(),this._hovered=this._handles[0].hovered||this._handles[1].hovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverMesh(){}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){this._moveHandle.onMove(t,!0),this._handles[0].onStart(t),this._handles[1].onStart(t),this._active=this._handles[0].active||this._handles[1].active||this._domHovered,this._domHovered&&!this._handles[1].tracking&&(this._moving=!0,this._controls.enabled=!1),this.update()}onMove(t){if(this._active){const e=this._moveHandle.worldPosition.clone();this._dragged=!0,this._moveHandle.onMove(t,!0),this._moving&&this._handles.slice(0,-1).forEach(t=>{t.worldPosition.add(this._moveHandle.worldPosition.clone().sub(e))})}else this.onHover(null);this._handles[0].onMove(t),this._handles[1].onMove(t),this.update()}onEnd(){this._handles[0].onEnd(),this._handles[1].tracking&&this._handles[0].screenPosition.distanceTo(this._handles[1].screenPosition)<10||(this._dragged||!this._active||this._handles[1].tracking||(this._selected=!this._selected,this._handles[0].selected=this._selected),this._dragged||!this._handles[1].tracking?(this._handles[1].tracking=!1,this._handles[1].onEnd()):this._handles[1].tracking=!1,this._handles[1].selected=this._selected,this._active=this._handles[0].active||this._handles[1].active,this._dragged=!1,this._moving=!1,this.update())}create(){this.createMesh(),this.createDOM()}createMesh(){this._geometry=new t.Geometry,this._geometry.vertices.push(this._handles[0].worldPosition),this._geometry.vertices.push(this._handles[1].worldPosition),this._material=new t.LineBasicMaterial,this.updateMeshColor(),this._mesh=new t.Line(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)}createDOM(){this._line=document.createElement("div"),this._line.className="widgets-line",this._container.appendChild(this._line),this._label=document.createElement("div"),this._label.className="widgets-label",this._container.appendChild(this._label),this.updateDOMColor()}hideDOM(){this._line.style.display="none",this._label.style.display="none",this._handles.forEach(t=>t.hideDOM())}showDOM(){this._line.style.display="",this._label.style.display="",this._handles[0].showDOM(),this._handles[1].showDOM()}update(){this.updateColor(),this._handles[0].update(),this._handles[1].update();const t=this.getDistanceData(this._handles[0].worldPosition,this._handles[1].worldPosition,this._calibrationFactor);this._distance=t.distance,t.units&&(this._units=t.units),this.updateMeshColor(),this.updateMeshPosition(),this.updateDOM()}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateMeshPosition(){this._geometry&&(this._geometry.verticesNeedUpdate=!0)}updateDOM(){this.updateDOMColor();const t=this.getLineData(this._handles[0].screenPosition,this._handles[1].screenPosition);this._line.style.transform=`translate3D(${t.transformX}px, ${t.transformY}px, 0)\n      rotate(${t.transformAngle}rad)`,this._line.style.width=t.length+"px","units"!==this._units||this._label.hasAttribute("title")?"units"!==this._units&&this._label.hasAttribute("title")&&(this._label.removeAttribute("title"),this._label.style.color=this._colors.text):(this._label.setAttribute("title","Calibration is required to display the distance in mm"),this._label.style.color=this._colors.error),this._label.innerHTML=`${this._distance.toFixed(2)} ${this._units}`;let e=Math.abs(t.transformAngle);e>Math.PI/2&&(e=Math.PI-e);const i=Math.tan(e)<this._label.offsetHeight/this._label.offsetWidth?this._label.offsetWidth/2/Math.cos(e)+15:this._label.offsetHeight/2/Math.cos(Math.PI/2-e)+15,n=t.line.normalize().multiplyScalar(i),r=t.length>2*i?this._handles[1].screenPosition.clone().sub(n):this._handles[1].screenPosition.clone().add(n),a=this.adjustLabelTransform(this._label,r);this._label.style.transform=`translate3D(${a.x}px, ${a.y}px, 0)`}updateDOMColor(){this._line.style.backgroundColor=this._color,this._label.style.borderColor=this._color}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this._container.removeChild(this._line),this._container.removeChild(this._label),this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null,this._geometry.dispose(),this._geometry=null,this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,super.free()}getMeasurements(){return{distance:this._distance,units:this._units}}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles[0].worldPosition.copy(t),this._handles[1].worldPosition.copy(t),this._worldPosition.copy(t),this.update()}get calibrationFactor(){return this._calibrationFactor}set calibrationFactor(t){this._calibrationFactor=t,this._units="mm",this.update()}}};e.a=s()},function(t,e,i){"use strict";i.d(e,"b",function(){return o});var n=i(4),r=i(3),a=i(1),s=i(2);const o=(t=s)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){if(super(e,i,n),this._widgetType="VelocityTimeIntegral",this._regions=n.ultrasoundRegions||[],this._regions.length<1)throw new Error("Ultrasound regions should not be empty!");if(this._vMax=null,this._vMean=null,this._gMax=null,this._gMean=null,this._envTi=null,this._vti=null,this._extraInfo=null,this._initialized=!1,this._isHandleActive=!0,this._domHovered=!1,this._initialRegion=this.getRegionByXY(this._regions,a.default.worldToData(n.lps2IJK,n.worldPosition)),null===this._initialRegion)throw new Error("Invalid initial UltraSound region!");this._usPoints=[],this._material=null,this._geometry=null,this._mesh=null,this._lines=[],this._label=null,this._handles=[];const s=Object(r.b)(t);let o=new s(e,i,n);this.add(o),this._handles.push(o),this._moveHandle=new s(e,i,n),this.add(this._moveHandle),this._moveHandle.hide(),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.create(),this.addEventListeners()}addEventListeners(){this._container.addEventListener("wheel",this.onMove),this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover)}removeEventListeners(){this._container.removeEventListener("wheel",this.onMove),this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover)}onHover(t){t&&this.hoverDom(t),this.hoverMesh();let e=!1;this._handles.forEach(t=>e=e||t.hovered),this._hovered=e||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverMesh(){}hoverDom(t){this._domHovered="mouseenter"===t.type}onStart(t){let e=!1;this._moveHandle.onMove(t,!0),this._handles.forEach(i=>{i.onStart(t),e=e||i.active}),this._active=e||this._domHovered,this._isHandleActive=e,this._domHovered&&(this._controls.enabled=!1),this.update()}onMove(e){if(this.active){const i=this._moveHandle.worldPosition.clone();this._moveHandle.onMove(e,!0);const n=this._moveHandle.worldPosition.clone().sub(i);if(!this.isCorrectRegion(n))return void this._moveHandle.worldPosition.copy(i);if(this._initialized)this.updateDOMContent(!0),(!this._isHandleActive||this._handles[this._handles.length-2].active||this._handles[this._handles.length-1].active)&&(this._handles.forEach(t=>{t.worldPosition.add(n)}),this._isHandleActive=!1,this._handles[this._handles.length-2].active=!1,this._handles[this._handles.length-1].active=!1,this._controls.enabled=!1);else{this._handles[this._handles.length-1].hovered=!1,this._handles[this._handles.length-1].active=!1,this._handles[this._handles.length-1].tracking=!1;let e=new(Object(r.b)(t))(this._targetMesh,this._controls,this._params);e.hovered=!0,e.active=!0,e.tracking=!0,this.add(e),this._handles.push(e),this.createLine()}this._dragged=!0}else this.onHover(null);this._handles.forEach(t=>{t.onMove(e)}),this.active&&this._handles.length>2&&this.pushPopHandle(),this.update()}onEnd(){if(this._handles.length<3)return;let t=!1;this._handles.slice(0,-1).forEach(e=>{e.onEnd(),t=t||e.active}),this._dragged||!this._handles[this._handles.length-1].tracking?(this._handles[this._handles.length-1].tracking=!1,this._handles[this._handles.length-1].onEnd()):this._handles[this._handles.length-1].tracking=!1,!this._dragged&&this._initialized||(this.finalize(),this.updateDOMContent()),!this._dragged&&this._active&&(this._selected=!this._selected,this._handles.forEach(t=>t.selected=this._selected)),this._active=t||this._handles[this._handles.length-1].active,this._isHandleActive=t,this._dragged=!1,this._initialized=!0,this.update()}isCorrectRegion(t){let e=!0;return this._handles.forEach((i,n)=>{!i.active&&this._isHandleActive||(e=e&&this.checkHandle(n,t))}),e}checkHandle(t,e){const i=this.getRegionByXY(this._regions,a.default.worldToData(this._params.lps2IJK,this._handles[t].worldPosition.clone().add(e)));return null!==i&&i===this._initialRegion&&"cm/sec"===this._regions[i].unitsY}create(){this.createMaterial(),this.createDOM()}createMaterial(){this._material=new t.LineBasicMaterial}createDOM(){this._label=document.createElement("div"),this._label.className="widgets-label";const t=document.createElement("div");["vmax","vmean","gmax","gmean","envti","vti","info"].forEach(e=>{const i=document.createElement("div");i.className=e,t.appendChild(i)}),this._label.appendChild(t),this._container.appendChild(this._label),this.updateDOMColor()}createLine(){const t=document.createElement("div");t.className="widgets-line",t.addEventListener("mouseenter",this.onHover),t.addEventListener("mouseleave",this.onHover),this._lines.push(t),this._container.appendChild(t)}pushPopHandle(){let t=this._handles[this._handles.length-3],e=this._handles[this._handles.length-2],i=this._handles[this._handles.length-1],n=this.isPointOnLine(t.worldPosition,e.worldPosition,i.worldPosition);return(n||t.screenPosition.distanceTo(i.screenPosition)<25)&&(this.remove(e),e.free(),this._handles[this._handles.length-2]=i,this._handles.pop(),this._container.removeChild(this._lines.pop())),n}isPointOnLine(e,i,n){return!(new t.Vector3).crossVectors(e.clone().sub(n),i.clone().sub(n)).length()}finalize(){this._initialized&&this._handles.splice(-2).forEach(t=>{this.remove(t),t.free()});const e=a.default.worldToData(this._params.lps2IJK,this._handles[0]._worldPosition),i=a.default.worldToData(this._params.lps2IJK,this._handles[this._handles.length-1]._worldPosition),n=this._regions[this.getRegionByXY(this._regions,e)],s=n.y0+(n.axisY||0),o=Object(r.b)(t),l={hideHandleMesh:this._params.hideHandleMesh||!1};for(e.y=s,i.y=s,this._usPoints=[this.getPointInRegion(n,i),this.getPointInRegion(n,e)],l.worldPosition=i.applyMatrix4(this._params.ijk2LPS),this._handles.push(new o(this._targetMesh,this._controls,l)),this.add(this._handles[this._handles.length-1]),l.worldPosition=e.applyMatrix4(this._params.ijk2LPS),this._handles.push(new o(this._targetMesh,this._controls,l)),this.add(this._handles[this._handles.length-1]);this._lines.length<this._handles.length;)this.createLine()}update(){this.updateColor(),this._handles.forEach(t=>t.update()),this.updateMesh(),this.updateDOMColor(),this.updateDOMPosition()}updateValues(){const t=this._regions[this.getRegionByXY(this._regions,a.default.worldToData(this._params.lps2IJK,this._handles[0]._worldPosition))],e={xMin:Number.POSITIVE_INFINITY,xMax:Number.NEGATIVE_INFINITY,yMin:Number.POSITIVE_INFINITY,yMax:Number.NEGATIVE_INFINITY};let i,n,r,s=0;this._vMax=0,this._vMean=0,this._gMean=0,this._usPoints.splice(2),this._handles.slice(0,-2).forEach(o=>{const l=this.getPointInRegion(t,a.default.worldToData(this._params.lps2IJK,o._worldPosition)),c=Math.abs(l.y/100),h=4*Math.pow(c,2);if((null===this._vMax||c>this._vMax)&&(this._vMax=c),e.xMin=Math.min(l.x,e.xMin),e.xMax=Math.max(l.x,e.xMax),e.yMin=Math.min(l.y,e.yMin),e.yMax=Math.max(l.y,e.yMax),r){const t=Math.abs(l.x-r);s+=t,this._vMean+=t*(i+c)/2,this._gMean+=t*(n+h)/2}i=c,n=h,r=l.x,this._usPoints.push(l)}),this._gMax=4*Math.pow(this._vMax,2),this._vMean/=s,this._gMean/=s,this._envTi=1e3*s,this._vti=this.getArea(this._usPoints),this._shapeWarn=e.xMax-e.xMin!==s||e.yMin<0!=e.yMax<0}updateMesh(){this._mesh&&this.remove(this._mesh),this._geometry=new t.Geometry,this._handles.forEach(t=>this._geometry.vertices.push(t.worldPosition)),this._geometry.vertices.push(this._handles[0].worldPosition),this._geometry.verticesNeedUpdate=!0,this.updateMeshColor(),this._mesh=new t.Line(this._geometry,this._material),this._mesh.visible=!0,this.add(this._mesh)}updateMeshColor(){this._material&&this._material.color.set(this._color)}updateDOMColor(){this._handles.length>=2&&this._lines.forEach(t=>t.style.backgroundColor=this._color),this._label.style.borderColor=this._color}updateDOMContent(t){const e=this._label.querySelector(".vmax"),i=this._label.querySelector(".vmean"),n=this._label.querySelector(".gmax"),r=this._label.querySelector(".gmean"),a=this._label.querySelector(".envti"),s=this._label.querySelector(".vti"),o=this._label.querySelector(".info");if(t)return e.innerHTML="",i.innerHTML="",n.innerHTML="",r.innerHTML="",a.innerHTML="",s.innerHTML="",void(o.innerHTML="");this.updateValues(),this._shapeWarn&&!this._label.hasAttribute("title")?(this._label.setAttribute("title","Values may be incorrect due to invalid curve."),this._label.style.color=this._colors.error):!this._shapeWarn&&this._label.hasAttribute("title")&&(this._label.removeAttribute("title"),this._label.style.color=this._colors.text),e.innerHTML=`Vmax: ${this._vMax.toFixed(2)} m/s`,i.innerHTML=`Vmean: ${this._vMean.toFixed(2)} m/s`,n.innerHTML=`Gmax: ${this._gMax.toFixed(2)} mmhg`,r.innerHTML=`Gmean: ${this._gMean.toFixed(2)} mmhg`,a.innerHTML=`Env.Ti: ${this._envTi.toFixed(1)} ms`,s.innerHTML=`VTI: ${this._vti.toFixed(2)} cm`,o.innerHTML=this._extraInfo}updateDOMPosition(){if(this._handles.length<2)return;let t=null;this._lines.forEach((e,i)=>{const n=this.getLineData(this._handles[i].screenPosition,this._handles[i+1===this._handles.length?0:i+1].screenPosition);e.style.transform=`translate3D(${n.transformX}px, ${n.transformY}px, 0)\n                    rotate(${n.transformAngle}rad)`,e.style.width=n.length+"px",(null===t||t.y<this._handles[i].screenPosition.y)&&(t=this._handles[i].screenPosition.clone())}),this._initialized&&(t.y+=15+this._label.offsetHeight/2,t=this.adjustLabelTransform(this._label,t),this._label.style.transform=`translate3D(${t.x}px, ${t.y}px, 0)`)}hideDOM(){this._handles.forEach(t=>t.hideDOM()),this._lines.forEach(t=>t.style.display="none"),this._label.style.display="none"}showDOM(){this._handles.forEach(t=>t.showDOM()),this._lines.forEach(t=>t.style.display=""),this._label.style.display=""}free(){this.removeEventListeners(),this._handles.forEach(t=>{this.remove(t),t.free()}),this._handles=[],this._usPoints=[],this.remove(this._moveHandle),this._moveHandle.free(),this._moveHandle=null,this._lines.forEach(t=>{t.removeEventListener("mouseenter",this.onHover),t.removeEventListener("mouseleave",this.onHover),this._container.removeChild(t)}),this._lines=[],this._container.removeChild(this._label),this._mesh&&(this.remove(this._mesh),this._mesh.geometry.dispose(),this._mesh.geometry=null,this._mesh.material.dispose(),this._mesh.material=null,this._mesh=null),this._geometry&&(this._geometry.dispose(),this._geometry=null),this._material.vertexShader=null,this._material.fragmentShader=null,this._material.uniforms=null,this._material.dispose(),this._material=null,super.free()}getMeasurements(){return{vMax:this._vMax,vMean:this._vMean,gMax:this._gMax,gMean:this._gMean,envTi:this._envTi,vti:this._vti}}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handles.forEach(e=>e.targetMesh=t),this._moveHandle.targetMesh=t,this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handles.forEach(e=>e._worldPosition.copy(t)),this._worldPosition.copy(t),this.update()}get extraInfo(){return this._extraInfo}set extraInfo(t){this._extraInfo=t,this._label.querySelector(".info").innerHTML=t}}};e.a=o()},function(t,e,i){"use strict";i.d(e,"b",function(){return l});var n=i(4),r=i(3),a=i(42),s=i(1),o=i(2);const l=(t=o)=>{if(void 0===t||void 0===t.Object3D)return null;const e=Object(n.widgetsBase)(t);return class extends e{constructor(e,i,n={}){super(e,i,n),this._widgetType="VoxelProbe",this._stack=n.stack,this._container.style.cursor="pointer",this._controls.enabled=!1,this._initialized=!1,this._active=!0,this._moving=!0,this._domHovered=!1,this._label=null;const a=Object(r.b)(t);this._handle=new a(e,i,n),this.add(this._handle),this._moveHandle=new a(e,i,n),this.add(this._moveHandle),this._moveHandle.hide(),this.create(),this.onMove=this.onMove.bind(this),this.onHover=this.onHover.bind(this),this.addEventListeners()}addEventListeners(){this._label.addEventListener("mouseenter",this.onHover),this._label.addEventListener("mouseleave",this.onHover),this._container.addEventListener("wheel",this.onMove)}removeEventListeners(){this._label.removeEventListener("mouseenter",this.onHover),this._label.removeEventListener("mouseleave",this.onHover),this._container.removeEventListener("wheel",this.onMove)}onStart(t){this._moveHandle.onMove(t,!0),this._handle.onStart(t),this._active=this._handle.active||this._domHovered,this._domHovered&&(this._moving=!0,this._controls.enabled=!1),this.update()}onMove(t){if(this._active){const e=this._moveHandle.worldPosition.clone();this._dragged=!0,this._moveHandle.onMove(t,!0),this._moving&&this._handle.worldPosition.add(this._moveHandle.worldPosition.clone().sub(e))}else this.onHover(null);this._handle.onMove(t),this.update()}onEnd(){this._handle.onEnd(),!this._dragged&&this._active&&this._initialized&&(this._selected=!this._selected,this._handle.selected=this._selected),this._initialized=!0,this._active=this._handle.active,this._dragged=!1,this._moving=!1,this.update()}onHover(t){t&&this.hoverDom(t),this._hovered=this._handle.hovered||this._domHovered,this._container.style.cursor=this._hovered?"pointer":"default"}hoverDom(t){this._domHovered="mouseenter"===t.type}create(){this.createVoxel(),this.createDOM()}createVoxel(){this._voxel=new a.a,this._voxel.id=this.id}createDOM(){this._label=document.createElement("div"),this._label.className="widgets-label";let t=document.createElement("div"),e=document.createElement("div");e.className="lpsPosition",t.appendChild(e);let i=document.createElement("div");i.className="ijkPosition",t.appendChild(i);let n=document.createElement("div");n.className="value",t.appendChild(n),this._label.appendChild(t),this._container.appendChild(this._label),this.updateDOMColor()}update(){this.updateColor(),this._handle.update(),this._worldPosition.copy(this._handle.worldPosition),this.updateVoxel(),this.updateDOM()}updateVoxel(){this._voxel.worldCoordinates=this._worldPosition,this._voxel.dataCoordinates=s.default.worldToData(this._stack.lps2IJK,this._worldPosition);let t=s.default.getPixelData(this._stack,this._voxel.dataCoordinates);this._voxel.value=null===t||this._stack.numberOfChannels>1?"NA":s.default.rescaleSlopeIntercept(t,this._stack.rescaleSlope,this._stack.rescaleIntercept).toFixed()}updateDOM(){const t=this._label.querySelector(".lpsPosition"),e=this._label.querySelector(".ijkPosition"),i=this._label.querySelector(".value");t.innerHTML=`LPS: \n      ${this._voxel.worldCoordinates.x.toFixed(2)} :\n      ${this._voxel.worldCoordinates.y.toFixed(2)} :\n      ${this._voxel.worldCoordinates.z.toFixed(2)}`,e.innerHTML=`IJK: \n      ${this._voxel.dataCoordinates.x} :\n      ${this._voxel.dataCoordinates.y} :\n      ${this._voxel.dataCoordinates.z}`,i.innerHTML=`Value: ${this._voxel.value}`,this.updateDOMColor();const n=this.adjustLabelTransform(this._label,this._handle.screenPosition,!0);this._label.style.transform=`translate3D(${n.x}px, ${n.y}px, 0)`}updateDOMColor(){this._label.style.borderColor=this._color}free(){this.removeEventListeners(),this.remove(this._handle),this._handle.free(),this._handle=null,this.remove(this._moveHandle),this._moveHandle.free(),this._moveHandle=null,this._container.removeChild(this._label),this._stack=null,this._voxel=null,super.free()}hideDOM(){this._label.style.display="none",this._handle.hideDOM()}showDOM(){this._label.style.display="",this._handle.showDOM()}get targetMesh(){return this._targetMesh}set targetMesh(t){this._targetMesh=t,this._handle.targetMesh=t,this._moveHandle.targetMesh=t,this.update()}get worldPosition(){return this._worldPosition}set worldPosition(t){this._handle.worldPosition.copy(t),this._moveHandle.worldPosition.copy(t),this._worldPosition.copy(t),this.update()}get active(){return this._active}set active(t){this._active=t,this._controls.enabled=!this._active,this.update()}}};e.a=l()},function(t,e,i){(function(e,n){t.exports=function(t){var r,a=void 0!==(t=t||{})?t:{},s={};for(r in a)a.hasOwnProperty(r)&&(s[r]=a[r]);a.arguments=[],a.thisProgram="./this.program",a.quit=function(t,e){throw e},a.preRun=[],a.postRun=[];var o,l,c=!1,h=!1,u=!1,d=!1;if(a.ENVIRONMENT)if("WEB"===a.ENVIRONMENT)c=!0;else if("WORKER"===a.ENVIRONMENT)h=!0;else if("NODE"===a.ENVIRONMENT)u=!0;else{if("SHELL"!==a.ENVIRONMENT)throw new Error("Module['ENVIRONMENT'] value is not valid. must be one of: WEB|WORKER|NODE|SHELL.");d=!0}else c="object"==typeof window,h="function"==typeof importScripts,u="object"==typeof e&&!c&&!h,d=!c&&!u&&!h;u?(a.read=function(t,e){var n;return(n=Tt(t))||(o||(o=i(149)),l||(l=i(150)),t=l.normalize(t),n=o.readFileSync(t)),e?n:n.toString()},a.readBinary=function(t){var e=a.read(t,!0);return e.buffer||(e=new Uint8Array(e)),y(e.buffer),e},e.argv.length>1&&(a.thisProgram=e.argv[1].replace(/\\/g,"/")),a.arguments=e.argv.slice(2),e.on("uncaughtException",function(t){if(!(t instanceof zt))throw t}),e.on("unhandledRejection",function(t,i){e.exit(1)}),a.inspect=function(){return"[Emscripten Module object]"}):d?("undefined"!=typeof read&&(a.read=function(t){var e=Tt(t);return e?St(e):read(t)}),a.readBinary=function(t){var e;return(e=Tt(t))?e:"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(y("object"==typeof(e=read(t,"binary"))),e)},"undefined"!=typeof scriptArgs?a.arguments=scriptArgs:void 0!==arguments&&(a.arguments=arguments),"function"==typeof quit&&(a.quit=function(t,e){quit(t)})):(c||h)&&(a.read=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var i=Tt(t);if(i)return St(i);throw e}},h&&(a.readBinary=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}catch(e){var i=Tt(t);if(i)return i;throw e}}),a.readAsync=function(t,e,i){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){if(200==n.status||0==n.status&&n.response)e(n.response);else{var r=Tt(t);r?e(r.buffer):i()}},n.onerror=i,n.send(null)},void 0!==arguments&&(a.arguments=arguments),a.setWindowTitle=function(t){document.title=t});for(r in a.print="undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null,a.printErr="undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||a.print,a.print=a.print,a.printErr=a.printErr,s)s.hasOwnProperty(r)&&(a[r]=s[r]);s=void 0;var f=16;function p(t){y(!D);var e=R;return R=R+t+15&-16,e}function m(t,e){return e||(e=f),t=Math.ceil(t/e)*e}function g(t){switch(t){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if("*"===t[t.length-1])return 4;if("i"===t[0]){var e=parseInt(t.substr(1));return y(e%8==0),e/8}return 0}}new Array(0);var _=0;function y(t,e){t||Ut("Assertion failed: "+e)}var b={stackSave:function(){Rt()},stackRestore:function(){Lt()},arrayToC:function(t){var e=Bt(t.length);return rt(t,e),e},stringToC:function(t){var e=0;if(null!==t&&void 0!==t&&0!==t){var i=1+(t.length<<2);!function(t,e,i){!function(t,e,i,n){if(!(n>0))return 0;for(var r=i+n-1,a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a)),s<=127){if(i>=r)break;e[i++]=s}else if(s<=2047){if(i+1>=r)break;e[i++]=192|s>>6,e[i++]=128|63&s}else if(s<=65535){if(i+2>=r)break;e[i++]=224|s>>12,e[i++]=128|s>>6&63,e[i++]=128|63&s}else if(s<=2097151){if(i+3>=r)break;e[i++]=240|s>>18,e[i++]=128|s>>12&63,e[i++]=128|s>>6&63,e[i++]=128|63&s}else if(s<=67108863){if(i+4>=r)break;e[i++]=248|s>>24,e[i++]=128|s>>18&63,e[i++]=128|s>>12&63,e[i++]=128|s>>6&63,e[i++]=128|63&s}else{if(i+5>=r)break;e[i++]=252|s>>30,e[i++]=128|s>>24&63,e[i++]=128|s>>18&63,e[i++]=128|s>>12&63,e[i++]=128|s>>6&63,e[i++]=128|63&s}}e[i]=0}(t,C,e,i)}(t,e=Bt(i),i)}return e}},v={string:b.stringToC,array:b.arrayToC};function w(t,e,i,n){switch("*"===(i=i||"i8").charAt(i.length-1)&&(i="i32"),i){case"i1":case"i8":I[t>>0]=e;break;case"i16":k[t>>1]=e;break;case"i32":P[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+at(tempDouble)>=1?tempDouble>0?(0|ct(+ot(tempDouble/4294967296),4294967295))>>>0:~~+st((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],P[t>>2]=tempI64[0],P[t+4>>2]=tempI64[1];break;case"float":B[t>>2]=e;break;case"double":L[t>>3]=e;break;default:Ut("invalid type for setValue: "+i)}}var x=2,A=4;function M(t,e){if(0===e||!t)return"";for(var i,n=0,r=0;n|=i=C[t+r>>0],(0!=i||e)&&(r++,!e||r!=e););e||(e=r);var a="";if(n<128){for(var s;e>0;)s=String.fromCharCode.apply(String,C.subarray(t,t+Math.min(e,1024))),a=a?a+s:s,t+=1024,e-=1024;return a}return function(t){return E(C,t)}(t)}var S="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function E(t,e){for(var i=e;t[i];)++i;if(i-e>16&&t.subarray&&S)return S.decode(t.subarray(e,i));for(var n,r,a,s,o,l="";;){if(!(n=t[e++]))return l;if(128&n)if(r=63&t[e++],192!=(224&n))if(a=63&t[e++],224==(240&n)?n=(15&n)<<12|r<<6|a:(s=63&t[e++],240==(248&n)?n=(7&n)<<18|r<<12|a<<6|s:(o=63&t[e++],n=248==(252&n)?(3&n)<<24|r<<18|a<<12|s<<6|o:(1&n)<<30|r<<24|a<<18|s<<12|o<<6|63&t[e++])),n<65536)l+=String.fromCharCode(n);else{var c=n-65536;l+=String.fromCharCode(55296|c>>10,56320|1023&c)}else l+=String.fromCharCode((31&n)<<6|r);else l+=String.fromCharCode(n)}}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var T,I,C,k,P,B,L,R,D,O,G,F,N,z,H=65536,U=16777216,V=16777216;function W(t,e){return t%e>0&&(t+=e-t%e),t}function j(){a.HEAP8=I=new Int8Array(T),a.HEAP16=k=new Int16Array(T),a.HEAP32=P=new Int32Array(T),a.HEAPU8=C=new Uint8Array(T),a.HEAPU16=new Uint16Array(T),a.HEAPU32=new Uint32Array(T),a.HEAPF32=B=new Float32Array(T),a.HEAPF64=L=new Float64Array(T)}function Z(){var t=a.usingWasm?H:U,e=2147483648-t;if(P[N>>2]>e)return!1;var i=X;for(X=Math.max(X,V);X<P[N>>2];)X=X<=536870912?W(2*X,t):Math.min(W((3*X+2147483648)/4,t),e);var n=a.reallocBuffer(X);return n&&n.byteLength==X?(function(t){a.buffer=T=t}(n),j(),!0):(X=i,!1)}R=O=N=0,D=!1,a.reallocBuffer||(a.reallocBuffer=function(t){var e;try{if(ArrayBuffer.transfer)e=ArrayBuffer.transfer(T,t);else{var i=I;e=new ArrayBuffer(t),new Int8Array(e).set(i)}}catch(t){return!1}return!!kt(e)&&e});try{(z=Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get))(new ArrayBuffer(4))}catch(t){z=function(t){return t.byteLength}}var Y=a.TOTAL_STACK||5242880,X=a.TOTAL_MEMORY||16777216;if(X<Y&&a.printErr("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+X+"! (TOTAL_STACK="+Y+")"),a.buffer?T=a.buffer:(T=new ArrayBuffer(X),a.buffer=T),j(),P[0]=1668509029,k[1]=25459,115!==C[2]||99!==C[3])throw"Runtime error: expected the system to be little-endian!";function J(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var i=e.func;"number"==typeof i?void 0===e.arg?a.dynCall_v(i):a.dynCall_vi(i,e.arg):i(void 0===e.arg?null:e.arg)}else e()}}var q=[],Q=[],K=[],$=[],tt=[],et=!1;function it(t){q.unshift(t)}function nt(t){tt.unshift(t)}function rt(t,e){I.set(t,e)}var at=Math.abs,st=(Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil),ot=Math.floor,lt=Math.pow,ct=(Math.imul,Math.fround,Math.round,Math.min),ht=(Math.max,Math.clz32,Math.trunc,0),ut=null,dt=null;a.preloadedImages={},a.preloadedAudios={};var ft=null,pt="data:application/octet-stream;base64,";function mt(t){return String.prototype.startsWith?t.startsWith(pt):0===t.indexOf(pt)}R=26360,Q.push(),ft="data:application/octet-stream;base64,g8DKoUW2+z9/+zpwzojqP3/7OnDOiOo/g8DKoUW2+z/hehSuR+H8P166SQwCK/k/AAAAAAAA8D8AAAAAAAD4PwAAAAAAAAZAAAAAAACAFUBcj8L1KFwlQNejcD0KVzVA9ihcj8JVRUCF61G4HlVVQGZmZmZmVmVAzczMzMxUdUDP91PjpZvwP0a28/3UePk/JzEIrBxaB0AdWmQ7388WQClcj8L1qCZApHA9CtejNkAAAAAAAKBGQB+F61G4nlZAzczMzMycZkAAAAAAAAAAAM/3U+Olm/A/Rrbz/dR4+T8nMQisHFoHQB1aZDvfzxZAKVyPwvWoJkCkcD0K16M2QAAAAAAAoEZAH4XrUbieVkDNzMzMzJxmQAAAAAAAAAAArfpcbcX+5j9Wfa62Yn/tP8dLN4lBYPk/8tJNYhBYCED6fmq8dBMYQIXrUbgeBShAAAAAAAAAOEBcj8L1KPxHQOxRuB6F+1dAAAAAAAAAAAAAAAAAAADwP3E9CtejcP8/aJHtfD+1EEB1kxgEVs4gQGZmZmZm5jBA7FG4HoXrQEBcj8L1KOxQQJqZmZmZ6WBAmpmZmZnpcEAzMzMzM+eAQJMYBFYOLQBAtvP91HjpD0D2KFyPwrUgQArXo3A9CjFAw/UoXI8iQUC4HoXrUShRQJqZmZmZKWFAmpmZmZkpcUAAAAAAACiBQAAAAAAAAAAAkxgEVg4tAEC28/3UeOkPQPYoXI/CtSBACtejcD0KMUDD9ShcjyJBQLgehetRKFFAmpmZmZkpYUCamZmZmSlxQAAAAAAAKIFAAAAAAAAAAACkcD0K16MAQOxRuB6F6w5Ad76fGi+dIECuR+F6FC4xQHsUrkfhWkFA9ihcj8JlUUCamZmZmWlhQJqZmZmZaXFAmpmZmZlpgUAAAAAAAAAAAAQAAABDUFJMAAAAAAAAAABMUkNQAAAAAAMAAABQQ1JMAAAAAAEAAABSTENQAAAAAAIAAABSUENMAAAAAP////8AAAAAAAAAAAEAAAACAAAAAwAAAAQAAACQ/wAADAAAAAEAAABS/wAAFAAAAAIAAABT/wAAFAAAAAMAAABe/wAAFAAAAAQAAABc/wAAFAAAAAUAAABd/wAAFAAAAAYAAABf/wAAFAAAAAcAAABR/wAAAgAAAAgAAABV/wAABAAAAAkAAABX/wAABAAAAAoAAABY/wAAEAAAAAsAAABg/wAABAAAAAwAAABh/wAAEAAAAA0AAACR/wAAAAAAAAAAAABj/wAABAAAAA4AAABk/wAAFAAAAA8AAAB0/wAAFAAAABAAAAB4/wAABAAAABEAAAB1/wAAFAAAABIAAAB3/wAAFAAAABMAAAAAAAAAFAAAAAAAAAACAAAABAAAAAQAAAAIAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAAgIFBqFAAAAHB5dGYVAAAAaDJwahYAAAByZGhpFwAAAHJsb2MYAAAAY2NwYhkAAABybGNwGgAAAHBhbWMbAAAAZmVkYxwAAAABVgAAAAAAAKQEAAC0BAAAAVYAAAEAAAC0BAAApAQAAAE0AAAAAAAAxAQAAEQFAAABNAAAAQAAANQEAABUBQAAARgAAAAAAADkBAAApAUAAAEYAAABAAAA9AQAALQFAADBCgAAAAAAAAQFAAAEBgAAwQoAAAEAAAAUBQAAFAYAACEFAAAAAAAAJAUAACQIAAAhBQAAAQAAADQFAAA0CAAAIQIAAAAAAABECQAApAgAACECAAABAAAAVAkAALQIAAABVgAAAAAAAGQFAABUBQAAAVYAAAEAAAB0BQAARAUAAAFUAAAAAAAAhAUAAEQGAAABVAAAAQAAAJQFAABUBgAAAUgAAAAAAACkBQAARAYAAAFIAAABAAAAtAUAAFQGAAABOAAAAAAAAMQFAABEBgAAATgAAAEAAADUBQAAVAYAAAEwAAAAAAAA5AUAAKQGAAABMAAAAQAAAPQFAAC0BgAAASQAAAAAAAAEBgAAxAYAAAEkAAABAAAAFAYAANQGAAABHAAAAAAAACQGAAAEBwAAARwAAAEAAAA0BgAAFAcAAAEWAAAAAAAAJAgAACQHAAABFgAAAQAAADQIAAA0BwAAAVYAAAAAAABkBgAAVAYAAAFWAAABAAAAdAYAAEQGAAABVAAAAAAAAIQGAABEBgAAAVQAAAEAAACUBgAAVAYAAAFRAAAAAAAApAYAAGQGAAABUQAAAQAAALQGAAB0BgAAAUgAAAAAAADEBgAAhAYAAAFIAAABAAAA1AYAAJQGAAABOAAAAAAAAOQGAACkBgAAATgAAAEAAAD0BgAAtAYAAAE0AAAAAAAABAcAAMQGAAABNAAAAQAAABQHAADUBgAAATAAAAAAAAAkBwAA5AYAAAEwAAABAAAANAcAAPQGAAABKAAAAAAAAEQHAADkBgAAASgAAAEAAABUBwAA9AYAAAEkAAAAAAAAZAcAAAQHAAABJAAAAQAAAHQHAAAUBwAAASIAAAAAAACEBwAAJAcAAAEiAAABAAAAlAcAADQHAAABHAAAAAAAAKQHAABEBwAAARwAAAEAAAC0BwAAVAcAAAEYAAAAAAAAxAcAAGQHAAABGAAAAQAAANQHAAB0BwAAARYAAAAAAADkBwAAhAcAAAEWAAABAAAA9AcAAJQHAAABFAAAAAAAAAQIAACkBwAAARQAAAEAAAAUCAAAtAcAAAESAAAAAAAAJAgAAMQHAAABEgAAAQAAADQIAADUBwAAAREAAAAAAABECAAA5AcAAAERAAABAAAAVAgAAPQHAADBCgAAAAAAAGQIAAAECAAAwQoAAAEAAAB0CAAAFAgAAMEJAAAAAAAAhAgAACQIAADBCQAAAQAAAJQIAAA0CAAAoQgAAAAAAACkCAAARAgAAKEIAAABAAAAtAgAAFQIAAAhBQAAAAAAAMQIAABkCAAAIQUAAAEAAADUCAAAdAgAAEEEAAAAAAAA5AgAAIQIAABBBAAAAQAAAPQIAACUCAAAoQIAAAAAAAAECQAApAgAAKECAAABAAAAFAkAALQIAAAhAgAAAAAAACQJAADECAAAIQIAAAEAAAA0CQAA1AgAAEEBAAAAAAAARAkAAOQIAABBAQAAAQAAAFQJAAD0CAAAEQEAAAAAAABkCQAABAkAABEBAAABAAAAdAkAABQJAACFAAAAAAAAAIQJAAAkCQAAhQAAAAEAAACUCQAANAkAAEkAAAAAAAAApAkAAEQJAABJAAAAAQAAALQJAABUCQAAJQAAAAAAAADECQAAZAkAACUAAAABAAAA1AkAAHQJAAAVAAAAAAAAAOQJAACECQAAFQAAAAEAAAD0CQAAlAkAAAkAAAAAAAAABAoAAKQJAAAJAAAAAQAAABQKAAC0CQAABQAAAAAAAAAkCgAAxAkAAAUAAAABAAAANAoAANQJAAABAAAAAAAAACQKAADkCQAAAQAAAAEAAAA0CgAA9AkAAAFWAAAAAAAARAoAAEQKAAABVgAAAQAAAFQKAABUCgAAaAoAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAA6GIAAAAEAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAr/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABoCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC4YgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAEIAAgAoAAgAgQABABAAAAAAAAAAAAAAAAgACAAIAAgAAAAQABAAGAAYABAAIAAoACgAIAAwADgAMABAAEgAQABYAFgAUABoAGAAeABwAIgAgACYAJAAqACoALAAyADAANAA6ADgAPABCAEIARABIAE4ATgBQAFQAWABeAF4AYgBmAGgAbABwAHQAeAB8AIAAhACIAIwAkACWAJoAngCiAKQArACwALYAugC8AMQAygDOANAA2ADeAOAA6ADuAPAA+gD+AQABCgEMARYBGAEiASQBLgEwAToBPgFEAU4BUAFYAWIBZAFsAXYBegGAAYgBkgGWAZwBpAGsAbYBugHCAcoB0AHYAeAB6AHwAfgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAEAA4AEAAaABwAJgAoADIANAA+AEAASgBMAFYAWABiAGQAbgBwAHoAfACGAIgAkgCUAJ4AoACqAKwAtgC4AMIAxADOANAA2gDcAOYA6ADyAPQA/gEAAQoBDAEWARgBIgEkAS4BMAE6ATwBRgFIAVIBVAFeAWABagFsAXYBeAGCAYQBjgGQAZoBnAGmAagBsgG0Ab4BwAHKAcwB1gHYAIAAfAB4AHQAcABuAGoAZgBiAFwAXABYAFYAUgBMAEwASgBGAEAAQAA+ADgAOAA2ADAAMgAuACgAKgAkACYAIAAiABwAHgAYABoAFgAUABYAEAAQABIADAAMAA4ACgAIAAgACgAGAAQABAAEAAYAAgACAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgACAAIAAAAEAAQABgAGAAQACAAKAAoACAAMAA4ADAAQABIAEAAWABYAFAAaABgAHgAcACIAIAAmACQAKgAqACwAMgAwADQAOgA4ADwAQgBCAEQASABOAE4AUABUAFgAXgBeAGIAZgBoAGwAcAB0AHgAfABiAFwAXgBYAFoAVABWAFAAUgBMAE4ASABKAEQARgBAAEIAPAA+ADgAOgA0ADYAMAAyACwALgAoACoAJAAmACAAIgAcAB4AGAAaABQAFgAQABIADAAOAAgACgAEAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAYABAAKAAgADgAMABIAEAAWABQAGgAYAB4AHAAiACAAJgAkACoAKAAuACwAMgAwADYANAA6ADgAPgA8AEIAQABGAEQASgBIAE4ATABSAFAAVgBUAFoAWABeAF1tFUlJPUl0gJXMAW0VSUk9SXSBvcGpfZGVjb21wcmVzczogZmFpbGVkIHRvIHNldHVwIHRoZSBkZWNvZGVyAFtFUlJPUl0gb3BqX2RlY29tcHJlc3M6IGZhaWxlZCB0byByZWFkIHRoZSBoZWFkZXIAW0VSUk9SXSBvcGpfZGVjb21wcmVzczogZmFpbGVkIHRvIGRlY29kZSB0aWxlIQBFcnJvciBvbiB3cml0aW5nIHN0cmVhbSEKAFN0cmVhbSByZWFjaGVkIGl0cyBlbmQgIQoAU3RyZWFtIGVycm9yIQoAMi4xLjEAd2IAcmIAQ29kZWMgcHJvdmlkZWQgdG8gdGhlIG9wal9zZXR1cF9kZWNvZGVyIGZ1bmN0aW9uIGlzIG5vdCBhIGRlY29tcHJlc3NvciBoYW5kbGVyLgoAQ29kZWMgcHJvdmlkZWQgdG8gdGhlIG9wal9yZWFkX2hlYWRlciBmdW5jdGlvbiBpcyBub3QgYSBkZWNvbXByZXNzb3IgaGFuZGxlci4KAEludmFsaWQgbnVtYmVyIG9mIHJlc29sdXRpb25zIDogJWQgbm90IGluIHJhbmdlIFsxLCVkXQoARGVwcmVjYXRlZCBmaWVsZHMgY3BfY2luZW1hIG9yIGNwX3JzaXogYXJlIHVzZWQKUGxlYXNlIGNvbnNpZGVyIHVzaW5nIG9ubHkgdGhlIHJzaXogZmllbGQKU2VlIG9wZW5qcGVnLmggZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBkZXRhaWxzCgBUaGUgZGVzaXJlZCBtYXhpbXVtIGNvZGVzdHJlYW0gc2l6ZSBoYXMgbGltaXRlZAphdCBsZWFzdCBvbmUgb2YgdGhlIGRlc2lyZWQgcXVhbGl0eSBsYXllcnMKAEpQRUcgMjAwMCBTY2FsYWJsZSBEaWdpdGFsIENpbmVtYSBwcm9maWxlcyBub3QgeWV0IHN1cHBvcnRlZAoASlBFRyAyMDAwIFByb2ZpbGUtMyBhbmQgNCAoMmsvNGsgZGMgcHJvZmlsZSkgcmVxdWlyZXM6CjEgc2luZ2xlIHF1YWxpdHkgbGF5ZXItPiBOdW1iZXIgb2YgbGF5ZXJzIGZvcmNlZCB0byAxIChyYXRoZXIgdGhhbiAlZCkKLT4gUmF0ZSBvZiB0aGUgbGFzdCBsYXllciAoJTMuMWYpIHdpbGwgYmUgdXNlZABKUEVHIDIwMDAgUHJvZmlsZS0zICgyayBkYyBwcm9maWxlKSByZXF1aXJlczoKTnVtYmVyIG9mIGRlY29tcG9zaXRpb24gbGV2ZWxzIDw9IDUKLT4gTnVtYmVyIG9mIGRlY29tcG9zaXRpb24gbGV2ZWxzIGZvcmNlZCB0byA1IChyYXRoZXIgdGhhbiAlZCkKAEpQRUcgMjAwMCBQcm9maWxlLTQgKDRrIGRjIHByb2ZpbGUpIHJlcXVpcmVzOgpOdW1iZXIgb2YgZGVjb21wb3NpdGlvbiBsZXZlbHMgPj0gMSAmJiA8PSA2Ci0+IE51bWJlciBvZiBkZWNvbXBvc2l0aW9uIGxldmVscyBmb3JjZWQgdG8gMSAocmF0aGVyIHRoYW4gJWQpCgBKUEVHIDIwMDAgUHJvZmlsZS00ICg0ayBkYyBwcm9maWxlKSByZXF1aXJlczoKTnVtYmVyIG9mIGRlY29tcG9zaXRpb24gbGV2ZWxzID49IDEgJiYgPD0gNgotPiBOdW1iZXIgb2YgZGVjb21wb3NpdGlvbiBsZXZlbHMgZm9yY2VkIHRvIDYgKHJhdGhlciB0aGFuICVkKQoASlBFRyAyMDAwIFByb2ZpbGUtMyBhbmQgNCAoMmsvNGsgZGMgcHJvZmlsZSkgcmVxdWlyZXM6Ck1heGltdW0gMTMwMjA4MyBjb21wcmVzc2VkIGJ5dGVzIEAgMjRmcHMKQXMgbm8gcmF0ZSBoYXMgYmVlbiBnaXZlbiwgdGhpcyBsaW1pdCB3aWxsIGJlIHVzZWQuCgBKUEVHIDIwMDAgUHJvZmlsZS0zIGFuZCA0ICgyay80ayBkYyBwcm9maWxlKSByZXF1aXJlczoKTWF4aW11bSAxMzAyMDgzIGNvbXByZXNzZWQgYnl0ZXMgQCAyNGZwcwotPiBTcGVjaWZpZWQgcmF0ZSBleGNlZWRzIHRoaXMgbGltaXQuIFJhdGUgd2lsbCBiZSBmb3JjZWQgdG8gMTMwMjA4MyBieXRlcy4KAEpQRUcgMjAwMCBQcm9maWxlLTMgYW5kIDQgKDJrLzRrIGRjIHByb2ZpbGUpIHJlcXVpcmVzOgpNYXhpbXVtIDEwNDE2NjYgY29tcHJlc3NlZCBieXRlcyBAIDI0ZnBzCkFzIG5vIHJhdGUgaGFzIGJlZW4gZ2l2ZW4sIHRoaXMgbGltaXQgd2lsbCBiZSB1c2VkLgoASlBFRyAyMDAwIFByb2ZpbGUtMyBhbmQgNCAoMmsvNGsgZGMgcHJvZmlsZSkgcmVxdWlyZXM6Ck1heGltdW0gMTA0MTY2NiBjb21wcmVzc2VkIGJ5dGVzIEAgMjRmcHMKLT4gU3BlY2lmaWVkIHJhdGUgZXhjZWVkcyB0aGlzIGxpbWl0LiBSYXRlIHdpbGwgYmUgZm9yY2VkIHRvIDEwNDE2NjYgYnl0ZXMuCgBKUEVHIDIwMDAgUHJvZmlsZS0zICgyayBkYyBwcm9maWxlKSByZXF1aXJlczoKMyBjb21wb25lbnRzLT4gTnVtYmVyIG9mIGNvbXBvbmVudHMgb2YgaW5wdXQgaW1hZ2UgKCVkKSBpcyBub3QgY29tcGxpYW50Ci0+IE5vbi1wcm9maWxlLTMgY29kZXN0cmVhbSB3aWxsIGJlIGdlbmVyYXRlZAoAc2lnbmVkAHVuc2lnbmVkAEpQRUcgMjAwMCBQcm9maWxlLTMgKDJrIGRjIHByb2ZpbGUpIHJlcXVpcmVzOgpQcmVjaXNpb24gb2YgZWFjaCBjb21wb25lbnQgc2hhbGwgYmUgMTIgYml0cyB1bnNpZ25lZC0+IEF0IGxlYXN0IGNvbXBvbmVudCAlZCBvZiBpbnB1dCBpbWFnZSAoJWQgYml0cywgJXMpIGlzIG5vdCBjb21wbGlhbnQKLT4gTm9uLXByb2ZpbGUtMyBjb2Rlc3RyZWFtIHdpbGwgYmUgZ2VuZXJhdGVkCgBKUEVHIDIwMDAgUHJvZmlsZS0zICgyayBkYyBwcm9maWxlKSByZXF1aXJlczoKd2lkdGggPD0gMjA0OCBhbmQgaGVpZ2h0IDw9IDEwODAKLT4gSW5wdXQgaW1hZ2Ugc2l6ZSAlZCB4ICVkIGlzIG5vdCBjb21wbGlhbnQKLT4gTm9uLXByb2ZpbGUtMyBjb2Rlc3RyZWFtIHdpbGwgYmUgZ2VuZXJhdGVkCgBKUEVHIDIwMDAgUHJvZmlsZS00ICg0ayBkYyBwcm9maWxlKSByZXF1aXJlczoKd2lkdGggPD0gNDA5NiBhbmQgaGVpZ2h0IDw9IDIxNjAKLT4gSW1hZ2Ugc2l6ZSAlZCB4ICVkIGlzIG5vdCBjb21wbGlhbnQKLT4gTm9uLXByb2ZpbGUtNCBjb2Rlc3RyZWFtIHdpbGwgYmUgZ2VuZXJhdGVkCgBKUEVHIDIwMDAgTG9uZyBUZXJtIFN0b3JhZ2UgcHJvZmlsZSBub3QgeWV0IHN1cHBvcnRlZAoASlBFRyAyMDAwIEJyb2FkY2FzdCBwcm9maWxlcyBub3QgeWV0IHN1cHBvcnRlZAoASlBFRyAyMDAwIElNRiBwcm9maWxlcyBub3QgeWV0IHN1cHBvcnRlZAoASlBFRyAyMDAwIFBhcnQtMiBwcm9maWxlIGRlZmluZWQKYnV0IG5vIFBhcnQtMiBleHRlbnNpb24gZW5hYmxlZC4KUHJvZmlsZSBzZXQgdG8gTk9ORS4KAFVuc3VwcG9ydGVkIFBhcnQtMiBleHRlbnNpb24gZW5hYmxlZApQcm9maWxlIHNldCB0byBOT05FLgoATm90IGVub3VnaCBtZW1vcnkgdG8gYWxsb2NhdGUgY29weSBvZiB1c2VyIGVuY29kaW5nIHBhcmFtZXRlcnMgbWF0cml4IAoATm90IGVub3VnaCBtZW1vcnkgdG8gYWxsb2NhdGUgY29weSBvZiBjb21tZW50IHN0cmluZwoATm90IGVub3VnaCBtZW1vcnkgdG8gYWxsb2NhdGUgY29tbWVudCBzdHJpbmcKACVzJXMAQ3JlYXRlZCBieSBPcGVuSlBFRyB2ZXJzaW9uIABOb3QgZW5vdWdoIG1lbW9yeSB0byBhbGxvY2F0ZSB0aWxlIGNvZGluZyBwYXJhbWV0ZXJzCgBOb3QgZW5vdWdoIG1lbW9yeSBmb3IgY2hlY2tpbmcgdGhlIHBvYyB2YWx1ZXMuCgBNaXNzaW5nIHBhY2tldHMgcG9zc2libGUgbG9zcyBvZiBkYXRhCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBhbGxvY2F0ZSB0aWxlIGNvbXBvbmVudCBjb2RpbmcgcGFyYW1ldGVycwoATm90IGVub3VnaCBtZW1vcnkgdG8gYWxsb2NhdGUgdGVtcCBidWZmZXIKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGFsbG9jYXRlIGVuY29kZXIgTUNUIGNvZGluZyBtYXRyaXggCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBhbGxvY2F0ZSBlbmNvZGVyIE1DVCBkZWNvZGluZyBtYXRyaXggCgBGYWlsZWQgdG8gaW52ZXJzZSBlbmNvZGVyIE1DVCBkZWNvZGluZyBtYXRyaXggCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBhbGxvY2F0ZSBlbmNvZGVyIE1DVCBub3JtcyAKAEZhaWxlZCB0byBzZXR1cCBqMmsgbWN0IGVuY29kaW5nCgBDYW5ub3QgcGVyZm9ybSBNQ1Qgb24gY29tcG9uZW50cyB3aXRoIGRpZmZlcmVudCBzaXplcy4gRGlzYWJsaW5nIE1DVC4KAENhbm5vdCBkZWNvZGUgdGlsZSwgbWVtb3J5IGVycm9yCgBTdGFydCB0byByZWFkIGoyayBtYWluIGhlYWRlciAoJWQpLgoATm90IGVub3VnaCBtZW1vcnkgdG8gYWRkIG1oIG1hcmtlcgoARXhwZWN0ZWQgYSBTT0MgbWFya2VyIAoAU3RyZWFtIHRvbyBzaG9ydAoAQSBtYXJrZXIgSUQgd2FzIGV4cGVjdGVkICgweGZmLS0pIGluc3RlYWQgb2YgJS44eAoAVW5rbm93biBtYXJrZXIKAE1hcmtlciBpcyBub3QgY29tcGxpYW50IHdpdGggaXRzIHBvc2l0aW9uCgBVbmtub3cgbWFya2VyIGhhdmUgYmVlbiBkZXRlY3RlZCBhbmQgZ2VuZXJhdGVkIGVycm9yLgoATm90IGVub3VnaCBtZW1vcnkgdG8gcmVhZCBoZWFkZXIKAE1hcmtlciBoYW5kbGVyIGZ1bmN0aW9uIGZhaWxlZCB0byByZWFkIHRoZSBtYXJrZXIgc2VnbWVudAoAcmVxdWlyZWQgU0laIG1hcmtlciBub3QgZm91bmQgaW4gbWFpbiBoZWFkZXIKAHJlcXVpcmVkIENPRCBtYXJrZXIgbm90IGZvdW5kIGluIG1haW4gaGVhZGVyCgByZXF1aXJlZCBRQ0QgbWFya2VyIG5vdCBmb3VuZCBpbiBtYWluIGhlYWRlcgoATm90IGVub3VnaCBieXRlcyB0byByZWFkIE5wcG0KAENvcnJ1cHRlZCBQUE0gbWFya2VycwoATm90IGVub3VnaCBtZW1vcnkgdG8gcmVhZCBQUE0gbWFya2VyCgBGYWlsZWQgdG8gbWVyZ2UgUFBNIGRhdGEKAE1haW4gaGVhZGVyIGhhcyBiZWVuIGNvcnJlY3RseSBkZWNvZGVkLgoARXJyb3IgcmVhZGluZyBNQ08gbWFya2VyCgBDYW5ub3QgdGFrZSBpbiBjaGFyZ2UgbXVsdGlwbGUgdHJhbnNmb3JtYXRpb24gc3RhZ2VzLgoARXJyb3IgcmVhZGluZyBNQ0MgbWFya2VyCgBDYW5ub3QgdGFrZSBpbiBjaGFyZ2UgbXVsdGlwbGUgZGF0YSBzcGFubmluZwoATm90IGVub3VnaCBtZW1vcnkgdG8gcmVhZCBNQ0MgbWFya2VyCgBDYW5ub3QgdGFrZSBpbiBjaGFyZ2UgbXVsdGlwbGUgY29sbGVjdGlvbnMKAENhbm5vdCB0YWtlIGluIGNoYXJnZSBjb2xsZWN0aW9ucyBvdGhlciB0aGFuIGFycmF5IGRlY29ycmVsYXRpb24KAENhbm5vdCB0YWtlIGluIGNoYXJnZSBjb2xsZWN0aW9ucyB3aXRoIGluZGl4IHNodWZmbGUKAENhbm5vdCB0YWtlIGluIGNoYXJnZSBjb2xsZWN0aW9ucyB3aXRob3V0IHNhbWUgbnVtYmVyIG9mIGluZGl4ZXMKAENycm9yIHJlYWRpbmcgQ0JEIG1hcmtlcgoARXJyb3IgcmVhZGluZyBNQ1QgbWFya2VyCgBDYW5ub3QgdGFrZSBpbiBjaGFyZ2UgbWN0IGRhdGEgd2l0aGluIG11bHRpcGxlIE1DVCByZWNvcmRzCgBOb3QgZW5vdWdoIG1lbW9yeSB0byByZWFkIE1DVCBtYXJrZXIKAENhbm5vdCB0YWtlIGluIGNoYXJnZSBtdWx0aXBsZSBNQ1QgbWFya2VycwoARXJyb3IgcmVhZGluZyBDUkcgbWFya2VyCgBFcnJvciByZWFkaW5nIFBQVCBtYXJrZXIKAEVycm9yIHJlYWRpbmcgUFBUIG1hcmtlcjogcGFja2V0IGhlYWRlciBoYXZlIGJlZW4gcHJldmlvdXNseSBmb3VuZCBpbiB0aGUgbWFpbiBoZWFkZXIgKFBQTSBtYXJrZXIpLgoATm90IGVub3VnaCBtZW1vcnkgdG8gcmVhZCBQUFQgbWFya2VyCgBacHB0ICV1IGFscmVhZHkgcmVhZAoARXJyb3IgcmVhZGluZyBQUE0gbWFya2VyCgBacHBtICV1IGFscmVhZHkgcmVhZAoARXJyb3IgcmVhZGluZyBQTFQgbWFya2VyCgBFcnJvciByZWFkaW5nIFBMTSBtYXJrZXIKAEVycm9yIHJlYWRpbmcgVExNIG1hcmtlcgoARXJyb3Igd2l0aCBTSVogbWFya2VyIHNpemUKAEVycm9yIHdpdGggU0laIG1hcmtlcjogbnVtYmVyIG9mIGNvbXBvbmVudCBpcyBpbGxlZ2FsIC0+ICVkCgBFcnJvciB3aXRoIFNJWiBtYXJrZXI6IG51bWJlciBvZiBjb21wb25lbnQgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgcmVtYWluaW5nIG51bWJlciBvZiBwYXJhbWV0ZXJzICggJWQgdnMgJWQpCgBFcnJvciB3aXRoIFNJWiBtYXJrZXI6IG5lZ2F0aXZlIG9yIHplcm8gaW1hZ2Ugc2l6ZSAoJWxsZCB4ICVsbGQpCgBFcnJvciB3aXRoIFNJWiBtYXJrZXI6IGludmFsaWQgdGlsZSBzaXplICh0ZHg6ICVkLCB0ZHk6ICVkKQoAUHJldmVudCBidWZmZXIgb3ZlcmZsb3cgKHgxOiAlZCwgeTE6ICVkKQoARXJyb3Igd2l0aCBTSVogbWFya2VyOiBpbGxlZ2FsIHRpbGUgb2Zmc2V0CgBOb3QgZW5vdWdoIG1lbW9yeSB0byB0YWtlIGluIGNoYXJnZSBTSVogbWFya2VyCgBJbnZhbGlkIHZhbHVlcyBmb3IgY29tcCA9ICVkIDogZHg9JXUgZHk9JXUgKHNob3VsZCBiZSBiZXR3ZWVuIDEgYW5kIDI1NSBhY2NvcmRpbmcgdG8gdGhlIEpQRUcyMDAwIG5vcm0pCgBJbnZhbGlkIHZhbHVlcyBmb3IgY29tcCA9ICVkIDogcHJlYz0ldSAoc2hvdWxkIGJlIGJldHdlZW4gMSBhbmQgMzggYWNjb3JkaW5nIHRvIHRoZSBKUEVHMjAwMCBub3JtKQoASW52YWxpZCBudW1iZXIgb2YgdGlsZXMgOiAldSB4ICV1IChtYXhpbXVtIGZpeGVkIGJ5IGpwZWcyMDAwIG5vcm0gaXMgNjU1MzUgdGlsZXMpCgBFcnJvciByZWFkaW5nIFBPQyBtYXJrZXIKAFRvbyBtYW55IFBPQ3MgJWQKAEVycm9yIHJlYWRpbmcgUUNDIG1hcmtlcgoASW52YWxpZCBjb21wb25lbnQgbnVtYmVyOiAlZCwgcmVnYXJkaW5nIHRoZSBudW1iZXIgb2YgY29tcG9uZW50cyAlZAoARXJyb3IgcmVhZGluZyBTUWNkIG9yIFNRY2MgZWxlbWVudAoAV2hpbGUgcmVhZGluZyBDQ1BfUU5UU1RZIGVsZW1lbnQgaW5zaWRlIFFDRCBvciBRQ0MgbWFya2VyIHNlZ21lbnQsIG51bWJlciBvZiBzdWJiYW5kcyAoJWQpIGlzIGdyZWF0ZXIgdG8gT1BKX0oyS19NQVhCQU5EUyAoJWQpLiBTbyB3ZSBsaW1pdCB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIHN0b3JlZCB0byBPUEpfSjJLX01BWEJBTkRTICglZCkgYW5kIHNraXAgdGhlIHJlc3QuIAoARXJyb3IgcmVhZGluZyBRQ0QgbWFya2VyCgBFcnJvciByZWFkaW5nIFJHTiBtYXJrZXIKAGJhZCBjb21wb25lbnQgbnVtYmVyIGluIFJHTiAoJWQgd2hlbiB0aGVyZSBhcmUgb25seSAlZCkKAEVycm9yIHJlYWRpbmcgQ09DIG1hcmtlcgoARXJyb3IgcmVhZGluZyBDT0MgbWFya2VyIChiYWQgbnVtYmVyIG9mIGNvbXBvbmVudHMpCgBFcnJvciByZWFkaW5nIFNQQ29kIFNQQ29jIGVsZW1lbnQKAEludmFsaWQgdmFsdWUgZm9yIG51bXJlc29sdXRpb25zIDogJWQsIG1heCB2YWx1ZSBpcyBzZXQgaW4gb3BlbmpwZWcuaCBhdCAlZAoARXJyb3IgZGVjb2RpbmcgY29tcG9uZW50ICVkLgpUaGUgbnVtYmVyIG9mIHJlc29sdXRpb25zIHRvIHJlbW92ZSBpcyBoaWdoZXIgdGhhbiB0aGUgbnVtYmVyIG9mIHJlc29sdXRpb25zIG9mIHRoaXMgY29tcG9uZW50Ck1vZGlmeSB0aGUgY3BfcmVkdWNlIHBhcmFtZXRlci4KCgBFcnJvciByZWFkaW5nIFNQQ29kIFNQQ29jIGVsZW1lbnQsIEludmFsaWQgY2Jsa3cvY2Jsa2ggY29tYmluYXRpb24KAEVycm9yIHJlYWRpbmcgU1BDb2QgU1BDb2MgZWxlbWVudCwgSW52YWxpZCBjb2RlLWJsb2NrIHN0eWxlIGZvdW5kCgBJbnZhbGlkIHByZWNpbmN0IHNpemUKAENPRCBtYXJrZXIgYWxyZWFkeSByZWFkLiBObyBtb3JlIHRoYW4gb25lIENPRCBtYXJrZXIgcGVyIHRpbGUuCgBFcnJvciByZWFkaW5nIENPRCBtYXJrZXIKAFVua25vd24gU2NvZCB2YWx1ZSBpbiBDT0QgbWFya2VyCgBVbmtub3duIHByb2dyZXNzaW9uIG9yZGVyIGluIENPRCBtYXJrZXIKAEludmFsaWQgbnVtYmVyIG9mIGxheWVycyBpbiBDT0QgbWFya2VyIDogJWQgbm90IGluIHJhbmdlIFsxLTY1NTM1XQoARXJyb3IgcmVhZGluZyBTT1QgbWFya2VyCgBJbnZhbGlkIHRpbGUgbnVtYmVyICVkCgBFbXB0eSBTT1QgbWFya2VyIGRldGVjdGVkOiBQc290PSVkLgoAUHNvdCB2YWx1ZSBpcyBub3QgY29ycmVjdCByZWdhcmRzIHRvIHRoZSBKUEVHMjAwMCBub3JtOiAlZC4KAFBzb3QgdmFsdWUgb2YgdGhlIGN1cnJlbnQgdGlsZS1wYXJ0IGlzIGVxdWFsIHRvIHplcm8sIHdlIGFzc3VtaW5nIGl0IGlzIHRoZSBsYXN0IHRpbGUtcGFydCBvZiB0aGUgY29kZXN0cmVhbS4KAEluIFNPVCBtYXJrZXIsIFRQU290ICglZCkgaXMgbm90IHZhbGlkIHJlZ2FyZHMgdG8gdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHRpbGUtcGFydCAoJWQpLCBnaXZpbmcgdXAKAEluIFNPVCBtYXJrZXIsIFRQU290ICglZCkgaXMgbm90IHZhbGlkIHJlZ2FyZHMgdG8gdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHRpbGUtcGFydCAoaGVhZGVyKSAoJWQpLCBnaXZpbmcgdXAKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIHJlYWQgU09UIG1hcmtlci4gVGlsZSBpbmRleCBhbGxvY2F0aW9uIGZhaWxlZAoASW5jb25zaXN0ZW50IG1hcmtlciBzaXplCgBNYXJrZXIgc2l6ZSBpbmNvbnNpc3RlbnQgd2l0aCBzdHJlYW0gbGVuZ3RoCgBOb3Qgc3VyZSBob3cgdGhhdCBoYXBwZW5lZC4KAEZhaWwgdG8gcmVhZCB0aGUgY3VycmVudCBtYXJrZXIgc2VnbWVudCAoJSN4KQoATm90IGVub3VnaCBtZW1vcnkgdG8gYWRkIHRsIG1hcmtlcgoAVGlsZSBwYXJ0IGxlbmd0aCBzaXplIGluY29uc2lzdGVudCB3aXRoIHN0cmVhbSBsZW5ndGgKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGRlY29kZSB0aWxlCgBvcGpfajJrX2FwcGx5X25iX3RpbGVfcGFydHNfY29ycmVjdGlvbiBlcnJvcgoATm9uIGNvbmZvcm1hbnQgY29kZXN0cmVhbSBUUHNvdD09VE5zb3QuCgBGYWlsZWQgdG8gbWVyZ2UgUFBUIGRhdGEKAEhlYWRlciBvZiB0aWxlICVkIC8gJWQgaGFzIGJlZW4gcmVhZC4KAEZhaWxlZCB0byBkZWNvZGUuCgBObyBFT0MgbWFya2VyLiBQb3NzaWJseSBhIHRydW5jYXRlZCBzdHJlYW0KAFN0cmVhbSBkb2VzIG5vdCBlbmQgd2l0aCBFT0MKAFN0cmVhbSB0b28gc2hvcnQsIGV4cGVjdGVkIFNPVAoATmVlZCB0byBkZWNvZGUgdGhlIG1haW4gaGVhZGVyIGJlZm9yZSBiZWdpbiB0byBkZWNvZGUgdGhlIHJlbWFpbmluZyBjb2Rlc3RyZWFtAE5vIGRlY29kZWQgYXJlYSBwYXJhbWV0ZXJzLCBzZXQgdGhlIGRlY29kZWQgYXJlYSB0byB0aGUgd2hvbGUgaW1hZ2UKAExlZnQgcG9zaXRpb24gb2YgdGhlIGRlY29kZWQgYXJlYSAocmVnaW9uX3gwPSVkKSBpcyBvdXRzaWRlIHRoZSBpbWFnZSBhcmVhIChYc2l6PSVkKS4KAExlZnQgcG9zaXRpb24gb2YgdGhlIGRlY29kZWQgYXJlYSAocmVnaW9uX3gwPSVkKSBpcyBvdXRzaWRlIHRoZSBpbWFnZSBhcmVhIChYT3Npej0lZCkuCgBVcCBwb3NpdGlvbiBvZiB0aGUgZGVjb2RlZCBhcmVhIChyZWdpb25feTA9JWQpIGlzIG91dHNpZGUgdGhlIGltYWdlIGFyZWEgKFlzaXo9JWQpLgoAVXAgcG9zaXRpb24gb2YgdGhlIGRlY29kZWQgYXJlYSAocmVnaW9uX3kwPSVkKSBpcyBvdXRzaWRlIHRoZSBpbWFnZSBhcmVhIChZT3Npej0lZCkuCgBSaWdodCBwb3NpdGlvbiBvZiB0aGUgZGVjb2RlZCBhcmVhIChyZWdpb25feDE9JWQpIGlzIG91dHNpZGUgdGhlIGltYWdlIGFyZWEgKFhPc2l6PSVkKS4KAFJpZ2h0IHBvc2l0aW9uIG9mIHRoZSBkZWNvZGVkIGFyZWEgKHJlZ2lvbl94MT0lZCkgaXMgb3V0c2lkZSB0aGUgaW1hZ2UgYXJlYSAoWHNpej0lZCkuCgBCb3R0b20gcG9zaXRpb24gb2YgdGhlIGRlY29kZWQgYXJlYSAocmVnaW9uX3kxPSVkKSBpcyBvdXRzaWRlIHRoZSBpbWFnZSBhcmVhIChZT3Npej0lZCkuCgBCb3R0b20gcG9zaXRpb24gb2YgdGhlIGRlY29kZWQgYXJlYSAocmVnaW9uX3kxPSVkKSBpcyBvdXRzaWRlIHRoZSBpbWFnZSBhcmVhIChZc2l6PSVkKS4KAFNpemUgeCBvZiB0aGUgZGVjb2RlZCBjb21wb25lbnQgaW1hZ2UgaXMgaW5jb3JyZWN0IChjb21wWyVkXS53PSVkKS4KAFNpemUgeSBvZiB0aGUgZGVjb2RlZCBjb21wb25lbnQgaW1hZ2UgaXMgaW5jb3JyZWN0IChjb21wWyVkXS5oPSVkKS4KAFNldHRpbmcgZGVjb2RpbmcgYXJlYSB0byAlZCwlZCwlZCwlZAoAV3JvbmcgZmxhZwoAQ29kZXN0cmVhbSBpbmZvIGZyb20gbWFpbiBoZWFkZXI6IHsKAAkgdHgwPSVkLCB0eTA9JWQKAAkgdGR4PSVkLCB0ZHk9JWQKAAkgdHc9JWQsIHRoPSVkCgB9CgBDb2Rlc3RyZWFtIGluZGV4IGZyb20gbWFpbiBoZWFkZXI6IHsKAAkgTWFpbiBoZWFkZXIgc3RhcnQgcG9zaXRpb249JWxsaQoJIE1haW4gaGVhZGVyIGVuZCBwb3NpdGlvbj0lbGxpCgAJIE1hcmtlciBsaXN0OiB7CgAJCSB0eXBlPSUjeCwgcG9zPSVsbGksIGxlbj0lZAoACSB9CgAJIFRpbGUgaW5kZXg6IHsKAAkJIG5iIG9mIHRpbGUtcGFydCBpbiB0aWxlIFslZF09JWQKAAkJCSB0aWxlLXBhcnRbJWRdOiBzdGFyX3Bvcz0lbGxpLCBlbmRfaGVhZGVyPSVsbGksIGVuZF9wb3M9JWxsaS4KAAkgZGVmYXVsdCB0aWxlIHsKAAkJIGNzdHk9JSN4CgAJCSBwcmc9JSN4CgAJCSBudW1sYXllcnM9JWQKAAkJIG1jdD0leAoACQkgY29tcCAlZCB7CgAJCQkgY3N0eT0lI3gKAAkJCSBudW1yZXNvbHV0aW9ucz0lZAoACQkJIGNibGt3PTJeJWQKAAkJCSBjYmxraD0yXiVkCgAJCQkgY2Jsa3N0eT0lI3gKAAkJCSBxbWZiaWQ9JWQKAAkJCSBwcmVjY2ludHNpemUgKHcsaCk9ACglZCwlZCkgAAkJCSBxbnRzdHk9JWQKAAkJCSBudW1nYml0cz0lZAoACQkJIHN0ZXBzaXplcyAobSxlKT0ACQkJIHJvaXNoaWZ0PSVkCgAJCSB9CgBbREVWXSBEdW1wIGFuIGltYWdlX2hlYWRlciBzdHJ1Y3QgewoASW1hZ2UgaW5mbyB7CgAlcyB4MD0lZCwgeTA9JWQKACVzIHgxPSVkLCB5MT0lZAoAJXMgbnVtY29tcHM9JWQKACVzCSBjb21wb25lbnQgJWQgewoAJXN9CgBbREVWXSBEdW1wIGFuIGltYWdlX2NvbXBfaGVhZGVyIHN0cnVjdCB7CgAlcyBkeD0lZCwgZHk9JWQKACVzIHByZWM9JWQKACVzIHNnbmQ9JWQKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGRlY29kZSB0aWxlcwoATm90IGVub3VnaCBtZW1vcnkgdG8gZGVjb2RlIHRpbGUgJWQvJWQKAEZhaWxlZCB0byBkZWNvZGUgdGlsZSAlZC8lZAoAVGlsZSAlZC8lZCBoYXMgYmVlbiBkZWNvZGVkLgoASW1hZ2UgZGF0YSBoYXMgYmVlbiB1cGRhdGVkIHdpdGggdGlsZSAlZC4KCgBXZSBuZWVkIGFuIGltYWdlIHByZXZpb3VzbHkgY3JlYXRlZC4KAFRpbGUgaW5kZXggcHJvdmlkZWQgYnkgdGhlIHVzZXIgaXMgaW5jb3JyZWN0ICVkIChtYXggPSAlZCkgCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBkZWNvZGUgb25lIHRpbGUKAFByb2JsZW0gd2l0aCBzZWVrIGZ1bmN0aW9uCgBUaWxlIHJlYWQsIGRlY29kZWQgYW5kIHVwZGF0ZWQgaXMgbm90IHRoZSBkZXNpcmVkIG9uZSAoJWQgdnMgJWQpLgoAUmVzb2x1dGlvbiBmYWN0b3IgaXMgZ3JlYXRlciB0aGFuIHRoZSBtYXhpbXVtIHJlc29sdXRpb24gaW4gdGhlIGNvbXBvbmVudC4KAFRoZSBnaXZlbiB0aWxlIGluZGV4IGRvZXMgbm90IG1hdGNoLgB0aWxlIG51bWJlciAlZCAvICVkCgBFcnJvciBhbGxvY2F0aW5nIHRpbGUgY29tcG9uZW50IGRhdGEuAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGVuY29kZSBhbGwgdGlsZXMKAFNpemUgbWlzbWF0Y2ggYmV0d2VlbiB0aWxlIGRhdGEgYW5kIHNlbnQgZGF0YS4AQ2Fubm90IGVuY29kZSB0aWxlCgBGYWlsZWQgdG8gYWxsb2NhdGUgaW1hZ2UgaGVhZGVyLgBOb3QgZW5vdWdoIG1lbW9yeSB0byBjcmVhdGUgVGlsZSBDb2RlcgoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgQ0JEIG1hcmtlcgoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgTUNUIG1hcmtlcgoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgTUNDIG1hcmtlcgoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgTUNPIG1hcmtlcgoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgdGhlIENPTSBtYXJrZXIKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIHdyaXRlIFBPQyBtYXJrZXIKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIHdyaXRlIFRMTSBtYXJrZXIKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIHdyaXRlIFFDQyBtYXJrZXIKAEVycm9yIHdyaXRpbmcgU1FjZCBTUWNjIGVsZW1lbnQKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIHdyaXRlIENPQyBtYXJrZXIKAEVycm9yIHdyaXRpbmcgU1BDb2QgU1BDb2MgZWxlbWVudAoATm90IGVub3VnaCBtZW1vcnkgdG8gd3JpdGUgUUNEIG1hcmtlcgoARXJyb3Igd3JpdGluZyBRQ0QgbWFya2VyCgBOb3QgZW5vdWdoIG1lbW9yeSB0byB3cml0ZSBDT0QgbWFya2VyCgBFcnJvciB3cml0aW5nIENPRCBtYXJrZXIKAE5vdCBlbm91Z2ggbWVtb3J5IGZvciB0aGUgU0laIG1hcmtlcgoATnVtYmVyIG9mIHJlc29sdXRpb25zIGlzIHRvbyBoaWdoIGluIGNvbXBhcmlzb24gdG8gdGhlIHNpemUgb2YgdGlsZXMKAEVycm9yIHdoaWxlIG9wal9qMmtfcHJlX3dyaXRlX3RpbGUgd2l0aCB0aWxlIGluZGV4ID0gJWQKAEVycm9yIHdoaWxlIG9wal9qMmtfcG9zdF93cml0ZV90aWxlIHdpdGggdGlsZSBpbmRleCA9ICVkCgBGYWlsZWQgdG8gZGVjb2RlIHRoZSBjb2Rlc3RyZWFtIGluIHRoZSBKUDIgZmlsZQoAb3BqX2pwMl9hcHBseV9jZGVmOiBjbj0lZCwgbnVtY29tcHM9JWQKAG9wal9qcDJfYXBwbHlfY2RlZjogYWNuPSVkLCBudW1jb21wcz0lZAoASW52YWxpZCBjb21wb25lbnQgaW5kZXggJWQgKD49ICVkKS4KAEluY29tcGxldGUgY2hhbm5lbCBkZWZpbml0aW9ucy4KAFVuZXhwZWN0ZWQgT09NLgoASW52YWxpZCBjb21wb25lbnQvcGFsZXR0ZSBpbmRleCBmb3IgZGlyZWN0IG1hcHBpbmcgJWQuCgBDb21wb25lbnQgJWQgaXMgbWFwcGVkIHR3aWNlLgoARGlyZWN0IHVzZSBhdCAjJWQgaG93ZXZlciBwY29sPSVkLgoAQ29tcG9uZW50ICVkIGRvZXNuJ3QgaGF2ZSBhIG1hcHBpbmcuCgBDb21wb25lbnQgbWFwcGluZyBzZWVtcyB3cm9uZy4gVHJ5aW5nIHRvIGNvcnJlY3QuCgBJbnZhbGlkIG51bWJlciBvZiBjb21wb25lbnRzIHNwZWNpZmllZCB3aGlsZSBzZXR0aW5nIHVwIEpQMiBlbmNvZGVyCgBOb3QgZW5vdWdoIG1lbW9yeSB3aGVuIHNldHVwIHRoZSBKUDIgZW5jb2RlcgoAQWxwaGEgY2hhbm5lbCBzcGVjaWZpZWQgYnV0IHVua25vd24gZW51bWNzLiBObyBjZGVmIGJveCB3aWxsIGJlIGNyZWF0ZWQuCgBBbHBoYSBjaGFubmVsIHNwZWNpZmllZCBidXQgbm90IGVub3VnaCBpbWFnZSBjb21wb25lbnRzIGZvciBhbiBhdXRvbWF0aWMgY2RlZiBib3ggY3JlYXRpb24uCgBBbHBoYSBjaGFubmVsIHBvc2l0aW9uIGNvbmZsaWN0cyB3aXRoIGNvbG9yIGNoYW5uZWwuIE5vIGNkZWYgYm94IHdpbGwgYmUgY3JlYXRlZC4KAE11bHRpcGxlIGFscGhhIGNoYW5uZWxzIHNwZWNpZmllZC4gTm8gY2RlZiBib3ggd2lsbCBiZSBjcmVhdGVkLgoATm90IGVub3VnaCBtZW1vcnkgdG8gc2V0dXAgdGhlIEpQMiBlbmNvZGVyCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBoYW5kbGUganBlZzIwMDAgZmlsZSBoZWFkZXIKAENhbm5vdCBoYW5kbGUgYm94IHNpemVzIGhpZ2hlciB0aGFuIDJeMzIKAGJhZCBwbGFjZWQganBlZyBjb2Rlc3RyZWFtCgBDYW5ub3QgaGFuZGxlIGJveCBvZiB1bmRlZmluZWQgc2l6ZXMKAGludmFsaWQgYm94IHNpemUgJWQgKCV4KQoARm91bmQgYSBtaXNwbGFjZWQgJyVjJWMlYyVjJyBib3ggb3V0c2lkZSBqcDJoIGJveAoASlBFRzIwMDAgSGVhZGVyIGJveCBub3QgcmVhZCB5ZXQsICclYyVjJWMlYycgYm94IHdpbGwgYmUgaWdub3JlZAoAUHJvYmxlbSB3aXRoIHNraXBwaW5nIEpQRUcyMDAwIGJveCwgc3RyZWFtIGVycm9yCgBJbnZhbGlkIGJveCBzaXplICVkIGZvciBib3ggJyVjJWMlYyVjJy4gTmVlZCAlZCBieXRlcywgJWQgYnl0ZXMgcmVtYWluaW5nIAoATm90IGVub3VnaCBtZW1vcnkgdG8gaGFuZGxlIGpwZWcyMDAwIGJveAoAUHJvYmxlbSB3aXRoIHJlYWRpbmcgSlBFRzIwMDAgYm94LCBzdHJlYW0gZXJyb3IKAE1hbGZvcm1lZCBKUDIgZmlsZSBmb3JtYXQ6IGZpcnN0IGJveCBtdXN0IGJlIEpQRUcgMjAwMCBzaWduYXR1cmUgYm94CgBNYWxmb3JtZWQgSlAyIGZpbGUgZm9ybWF0OiBzZWNvbmQgYm94IG11c3QgYmUgZmlsZSB0eXBlIGJveAoASW5zdWZmaWNpZW50IGRhdGEgZm9yIENERUYgYm94LgoATnVtYmVyIG9mIGNoYW5uZWwgZGVzY3JpcHRpb24gaXMgZXF1YWwgdG8gemVybyBpbiBDREVGIGJveC4KAE5lZWQgdG8gcmVhZCBhIFBDTFIgYm94IGJlZm9yZSB0aGUgQ01BUCBib3guCgBPbmx5IG9uZSBDTUFQIGJveCBpcyBhbGxvd2VkLgoASW5zdWZmaWNpZW50IGRhdGEgZm9yIENNQVAgYm94LgoASW52YWxpZCBQQ0xSIGJveC4gUmVwb3J0cyAlZCBlbnRyaWVzCgBJbnZhbGlkIFBDTFIgYm94LiBSZXBvcnRzIDAgcGFsZXR0ZSBjb2x1bW5zCgBBIEJQQ0MgaGVhZGVyIGJveCBpcyBhdmFpbGFibGUgYWx0aG91Z2ggQlBDIGdpdmVuIGJ5IHRoZSBJSERSIGJveCAoJWQpIGluZGljYXRlIGNvbXBvbmVudHMgYml0IGRlcHRoIGlzIGNvbnN0YW50CgBCYWQgQlBDQyBoZWFkZXIgYm94IChiYWQgc2l6ZSkKAEJhZCBDT0xSIGhlYWRlciBib3ggKGJhZCBzaXplKQoAQSBjb25mb3JtaW5nIEpQMiByZWFkZXIgc2hhbGwgaWdub3JlIGFsbCBDb2xvdXIgU3BlY2lmaWNhdGlvbiBib3hlcyBhZnRlciB0aGUgZmlyc3QsIHNvIHdlIGlnbm9yZSB0aGlzIG9uZS4KAEJhZCBDT0xSIGhlYWRlciBib3ggKGJhZCBzaXplOiAlZCkKAE5vdCBlbm91Z2ggbWVtb3J5IGZvciBjaWVsYWIKAEJhZCBDT0xSIGhlYWRlciBib3ggKENJRUxhYiwgYmFkIHNpemU6ICVkKQoAQ09MUiBCT1ggbWV0aCB2YWx1ZSBpcyBub3QgYSByZWd1bGFyIHZhbHVlICglZCksIHNvIHdlIHdpbGwgaWdub3JlIHRoZSBlbnRpcmUgQ29sb3VyIFNwZWNpZmljYXRpb24gYm94LiAKAElnbm9yaW5nIGloZHIgYm94LiBGaXJzdCBpaGRyIGJveCBhbHJlYWR5IHJlYWQKAEJhZCBpbWFnZSBoZWFkZXIgYm94IChiYWQgc2l6ZSkKAEludmFsaWQgbnVtYmVyIG9mIGNvbXBvbmVudHMgKGloZHIpCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBoYW5kbGUgaW1hZ2UgaGVhZGVyIChpaGRyKQoASlAyIElIRFIgYm94OiBjb21wcmVzc2lvbiB0eXBlIGluZGljYXRlIHRoYXQgdGhlIGZpbGUgaXMgbm90IGEgY29uZm9ybWluZyBKUDIgZmlsZSAoJWQpIAoAVGhlICBib3ggbXVzdCBiZSB0aGUgZmlyc3QgYm94IGluIHRoZSBmaWxlLgoAQ2Fubm90IGhhbmRsZSBib3ggb2YgbGVzcyB0aGFuIDggYnl0ZXMKAENhbm5vdCBoYW5kbGUgWEwgYm94IG9mIGxlc3MgdGhhbiAxNiBieXRlcwoAQm94IGxlbmd0aCBpcyBpbmNvbnNpc3RlbnQuCgBTdHJlYW0gZXJyb3Igd2hpbGUgcmVhZGluZyBKUDIgSGVhZGVyIGJveAoAU3RyZWFtIGVycm9yIHdoaWxlIHJlYWRpbmcgSlAyIEhlYWRlciBib3g6IGJveCBsZW5ndGggaXMgaW5jb25zaXN0ZW50LgoAU3RyZWFtIGVycm9yIHdoaWxlIHJlYWRpbmcgSlAyIEhlYWRlciBib3g6IG5vICdpaGRyJyBib3guCgBUaGUgZnR5cCBib3ggbXVzdCBiZSB0aGUgc2Vjb25kIGJveCBpbiB0aGUgZmlsZS4KAEVycm9yIHdpdGggRlRZUCBzaWduYXR1cmUgQm94IHNpemUKAE5vdCBlbm91Z2ggbWVtb3J5IHdpdGggRlRZUCBCb3gKAFRoZSBzaWduYXR1cmUgYm94IG11c3QgYmUgdGhlIGZpcnN0IGJveCBpbiB0aGUgZmlsZS4KAEVycm9yIHdpdGggSlAgc2lnbmF0dXJlIEJveCBzaXplCgBFcnJvciB3aXRoIEpQIFNpZ25hdHVyZSA6IGJhZCBtYWdpYyBudW1iZXIKAEZhaWxlZCB0byBzZWVrIGluIHRoZSBzdHJlYW0uCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBob2xkIEpQMiBIZWFkZXIgZGF0YQoAU3RyZWFtIGVycm9yIHdoaWxlIHdyaXRpbmcgSlAyIEhlYWRlciBib3gKAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGhhbmRsZSBmdHlwIGRhdGEKAEVycm9yIHdoaWxlIHdyaXRpbmcgZnR5cCBkYXRhIHRvIHN0cmVhbQoASlAyIGJveCB3aGljaCBhcmUgYWZ0ZXIgdGhlIGNvZGVzdHJlYW0gd2lsbCBub3QgYmUgcmVhZCBieSB0aGlzIGZ1bmN0aW9uLgoAVGlsZSBYIGNvb3JkaW5hdGVzIGFyZSBub3Qgc3VwcG9ydGVkCgBUaWxlIFkgY29vcmRpbmF0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQKAHRpbGVzIHJlcXVpcmUgYXQgbGVhc3Qgb25lIHJlc29sdXRpb24KAE5vdCBlbm91Z2ggbWVtb3J5IGZvciB0aWxlIGRhdGEKAE5vdCBlbm91Z2ggbWVtb3J5IGZvciB0aWxlIHJlc29sdXRpb25zCgBOb3QgZW5vdWdoIG1lbW9yeSB0byBoYW5kbGUgYmFuZCBwcmVjaW50cwoATm90IGVub3VnaCBtZW1vcnkgZm9yIGN1cnJlbnQgcHJlY2luY3QgY29kZWJsb2NrIGVsZW1lbnQKAE5vIGluY2x0cmVlIGNyZWF0ZWQuCgBObyBpbXNidHJlZSBjcmVhdGVkLgoAVGlsZXMgZG9uJ3QgYWxsIGhhdmUgdGhlIHNhbWUgZGltZW5zaW9uLiBTa2lwIHRoZSBNQ1Qgc3RlcC4KAE51bWJlciBvZiBjb21wb25lbnRzICglZCkgaXMgaW5jb25zaXN0ZW50IHdpdGggYSBNQ1QuIFNraXAgdGhlIE1DVCBzdGVwLgoATm90IGVub3VnaCBtZW1vcnkgdG8gY3JlYXRlIFRhZy10cmVlCgB0Z3RfY3JlYXRlIHRyZWUtPm51bW5vZGVzID09IDAsIG5vIHRyZWUgY3JlYXRlZC4KAE5vdCBlbm91Z2ggbWVtb3J5IHRvIGNyZWF0ZSBUYWctdHJlZSBub2RlcwoATm90IGVub3VnaCBtZW1vcnkgdG8gcmVpbml0aWFsaXplIHRoZSB0YWcgdHJlZQoATm90IGVub3VnaCBtZW1vcnkgdG8gYWRkIGEgbmV3IHZhbGlkYXRpb24gcHJvY2VkdXJlCgAAAQECAQICAgECAgICAgICAwMDAwMDAwMDAwMDAwMDAwUGBgYGBgYGBgYGBgYGBgYHBwcHBwcHBwcHBwcHBwcHAwMDAwMDAwMDAwMDAwMDAwQEBAQEBAQEBAQEBAQEBAQHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwUGBgYGBgYGBgYGBgYGBgYHBwcHBwcHBwcHBwcHBwcHCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAEBAgECAgIBAgICAgICAgUGBgYGBgYGBgYGBgYGBgYDAwMDAwMDAwMDAwMDAwMDBwcHBwcHBwcHBwcHBwcHBwUGBgYGBgYGBgYGBgYGBgYICAgICAgICAgICAgICAgIBwcHBwcHBwcHBwcHBwcHBwgICAgICAgICAgICAgICAgDAwMDAwMDAwMDAwMDAwMDBwcHBwcHBwcHBwcHBwcHBwQEBAQEBAQEBAQEBAQEBAQHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwgICAgICAgICAgICAgICAgHBwcHBwcHBwcHBwcHBwcHCAgICAgICAgICAgICAgICAABAQIBAgICAQICAgICAgIDAwMDAwMDAwMDAwMDAwMDBQYGBgYGBgYGBgYGBgYGBgcHBwcHBwcHBwcHBwcHBwcDAwMDAwMDAwMDAwMDAwMDBAQEBAQEBAQEBAQEBAQEBAcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBQYGBgYGBgYGBgYGBgYGBgcHBwcHBwcHBwcHBwcHBwcICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgAAwMGAwYGCAMGBggGCAgIAQQEBwQHBwgEBwcIBwgICAEEBAcEBwcIBAcHCAcICAgCBQUHBQcHCAUHBwgHCAgIAQQEBwQHBwgEBwcIBwgICAIFBQcFBwcIBQcHCAcICAgCBQUHBQcHCAUHBwgHCAgIAgUFBwUHBwgFBwcIBwgICAEEBAcEBwcIBAcHCAcICAgCBQUHBQcHCAUHBwgHCAgIAgUFBwUHBwgFBwcIBwgICAIFBQcFBwcIBQcHCAcICAgCBQUHBQcHCAUHBwgHCAgIAgUFBwUHBwgFBwcIBwgICAIFBQcFBwcIBQcHCAcICAgCBQUHBQcHCAUHBwgHCAgICQoMDQoKDQ0MDQwNDQ0NDQkKDAsKCQ0MDAsMCw0MDQwJCgwLCgoLCwwNCQoNDQoKCQoMDQoJCwwMCwkKDQwKCQkKDA0KCQsMDA0MDQsMCwwJCgwLCgoLCwwLDAsLCwsLCQoMCwoJDQwMDQkKCwwKCQkKDA0KCg0NDAsJCgsLCgoJCgwNCgoNDQwLCQoLCwoKCQoMCwoJDQwMDQkKCwwKCQkKDAsKCgsLDAsMCwsLCwsJCgwNCgkLDAwNDA0LDAsMCQoMDQoJCwwMCwkKDQwKCQkKDAsKCgsLDA0JCg0NCgoJCgwLCgkNDAwLDAsNDA0MCQoMDQoKDQ0MDQwNDQ0NDQAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABAQAAAQEAAAAAAAAAAAABAQEAAAEBAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAAAAAEAAAEBAAAAAAAAAAAAAAAAAQEBAAEBAAAAAAAAAQAAAQEBAQEBAQAAAAEAAAEBAAAAAAAAAAABAQAAAQEAAAABAAAAAAAAAQEAAQEBAAAAAAEBAAABAQEBAQEBAQEBAAEBAQAAAQEBAQEBAQEBAQAAAAABAAAAAQEAAAEBAQAAAQAAAQEAAAEBAAEBAQEBAAABAQEAAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQFyZWFkOiBzZWdtZW50IHRvbyBsb25nICglZCkgd2l0aCBtYXggKCVkKSBmb3IgY29kZWJsb2NrICVkIChwPSVkLCBiPSVkLCByPSVkLCBjPSVkKQoAcmVhZDogc2VnbWVudCB0b28gbG9uZyAoJWQpIHdpdGggY3VycmVudCBzaXplICglZCA+ICVkKSBmb3IgY29kZWJsb2NrICVkIChwPSVkLCBiPSVkLCByPSVkLCBjPSVkKQoAc2tpcDogc2VnbWVudCB0b28gbG9uZyAoJWQpIHdpdGggbWF4ICglZCkgZm9yIGNvZGVibG9jayAlZCAocD0lZCwgYj0lZCwgcj0lZCwgYz0lZCkKAEludmFsaWQgcHJlY2luY3QKAE5vdCBlbm91Z2ggc3BhY2UgZm9yIGV4cGVjdGVkIFNPUCBtYXJrZXIKAEV4cGVjdGVkIFNPUCBtYXJrZXIKAE5vdCBlbm91Z2ggc3BhY2UgZm9yIGV4cGVjdGVkIEVQSCBtYXJrZXIKAEV4cGVjdGVkIEVQSCBtYXJrZXIKAHJ3YQARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAAC0rICAgMFgweAAobnVsbCkALTBYKzBYIDBYLTB4KzB4IDB4AGluZgBJTkYAbmFuAE5BTgAwMTIzNDU2Nzg5QUJDREVGLgBUISIZDQECAxFLHAwQBAsdEh4naG5vcHFiIAUGDxMUFRoIFgcoJBcYCQoOGx8lI4OCfSYqKzw9Pj9DR0pNWFlaW1xdXl9gYWNkZWZnaWprbHJzdHl6e3wASWxsZWdhbCBieXRlIHNlcXVlbmNlAERvbWFpbiBlcnJvcgBSZXN1bHQgbm90IHJlcHJlc2VudGFibGUATm90IGEgdHR5AFBlcm1pc3Npb24gZGVuaWVkAE9wZXJhdGlvbiBub3QgcGVybWl0dGVkAE5vIHN1Y2ggZmlsZSBvciBkaXJlY3RvcnkATm8gc3VjaCBwcm9jZXNzAEZpbGUgZXhpc3RzAFZhbHVlIHRvbyBsYXJnZSBmb3IgZGF0YSB0eXBlAE5vIHNwYWNlIGxlZnQgb24gZGV2aWNlAE91dCBvZiBtZW1vcnkAUmVzb3VyY2UgYnVzeQBJbnRlcnJ1cHRlZCBzeXN0ZW0gY2FsbABSZXNvdXJjZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZQBJbnZhbGlkIHNlZWsAQ3Jvc3MtZGV2aWNlIGxpbmsAUmVhZC1vbmx5IGZpbGUgc3lzdGVtAERpcmVjdG9yeSBub3QgZW1wdHkAQ29ubmVjdGlvbiByZXNldCBieSBwZWVyAE9wZXJhdGlvbiB0aW1lZCBvdXQAQ29ubmVjdGlvbiByZWZ1c2VkAEhvc3QgaXMgZG93bgBIb3N0IGlzIHVucmVhY2hhYmxlAEFkZHJlc3MgaW4gdXNlAEJyb2tlbiBwaXBlAEkvTyBlcnJvcgBObyBzdWNoIGRldmljZSBvciBhZGRyZXNzAEJsb2NrIGRldmljZSByZXF1aXJlZABObyBzdWNoIGRldmljZQBOb3QgYSBkaXJlY3RvcnkASXMgYSBkaXJlY3RvcnkAVGV4dCBmaWxlIGJ1c3kARXhlYyBmb3JtYXQgZXJyb3IASW52YWxpZCBhcmd1bWVudABBcmd1bWVudCBsaXN0IHRvbyBsb25nAFN5bWJvbGljIGxpbmsgbG9vcABGaWxlbmFtZSB0b28gbG9uZwBUb28gbWFueSBvcGVuIGZpbGVzIGluIHN5c3RlbQBObyBmaWxlIGRlc2NyaXB0b3JzIGF2YWlsYWJsZQBCYWQgZmlsZSBkZXNjcmlwdG9yAE5vIGNoaWxkIHByb2Nlc3MAQmFkIGFkZHJlc3MARmlsZSB0b28gbGFyZ2UAVG9vIG1hbnkgbGlua3MATm8gbG9ja3MgYXZhaWxhYmxlAFJlc291cmNlIGRlYWRsb2NrIHdvdWxkIG9jY3VyAFN0YXRlIG5vdCByZWNvdmVyYWJsZQBQcmV2aW91cyBvd25lciBkaWVkAE9wZXJhdGlvbiBjYW5jZWxlZABGdW5jdGlvbiBub3QgaW1wbGVtZW50ZWQATm8gbWVzc2FnZSBvZiBkZXNpcmVkIHR5cGUASWRlbnRpZmllciByZW1vdmVkAERldmljZSBub3QgYSBzdHJlYW0ATm8gZGF0YSBhdmFpbGFibGUARGV2aWNlIHRpbWVvdXQAT3V0IG9mIHN0cmVhbXMgcmVzb3VyY2VzAExpbmsgaGFzIGJlZW4gc2V2ZXJlZABQcm90b2NvbCBlcnJvcgBCYWQgbWVzc2FnZQBGaWxlIGRlc2NyaXB0b3IgaW4gYmFkIHN0YXRlAE5vdCBhIHNvY2tldABEZXN0aW5hdGlvbiBhZGRyZXNzIHJlcXVpcmVkAE1lc3NhZ2UgdG9vIGxhcmdlAFByb3RvY29sIHdyb25nIHR5cGUgZm9yIHNvY2tldABQcm90b2NvbCBub3QgYXZhaWxhYmxlAFByb3RvY29sIG5vdCBzdXBwb3J0ZWQAU29ja2V0IHR5cGUgbm90IHN1cHBvcnRlZABOb3Qgc3VwcG9ydGVkAFByb3RvY29sIGZhbWlseSBub3Qgc3VwcG9ydGVkAEFkZHJlc3MgZmFtaWx5IG5vdCBzdXBwb3J0ZWQgYnkgcHJvdG9jb2wAQWRkcmVzcyBub3QgYXZhaWxhYmxlAE5ldHdvcmsgaXMgZG93bgBOZXR3b3JrIHVucmVhY2hhYmxlAENvbm5lY3Rpb24gcmVzZXQgYnkgbmV0d29yawBDb25uZWN0aW9uIGFib3J0ZWQATm8gYnVmZmVyIHNwYWNlIGF2YWlsYWJsZQBTb2NrZXQgaXMgY29ubmVjdGVkAFNvY2tldCBub3QgY29ubmVjdGVkAENhbm5vdCBzZW5kIGFmdGVyIHNvY2tldCBzaHV0ZG93bgBPcGVyYXRpb24gYWxyZWFkeSBpbiBwcm9ncmVzcwBPcGVyYXRpb24gaW4gcHJvZ3Jlc3MAU3RhbGUgZmlsZSBoYW5kbGUAUmVtb3RlIEkvTyBlcnJvcgBRdW90YSBleGNlZWRlZABObyBtZWRpdW0gZm91bmQAV3JvbmcgbWVkaXVtIHR5cGUATm8gZXJyb3IgaW5mb3JtYXRpb24=";var gt=R;R+=16;var _t={varargs:0,get:function(t){return _t.varargs+=4,P[_t.varargs-4>>2]},getStr:function(){return M(_t.get())},get64:function(){var t=_t.get(),e=_t.get();return y(t>=0?0===e:-1===e),t},getZero:function(){y(0===_t.get())}};function yt(t,e){_t.varargs=e;try{var i=_t.get(),n=_t.get(),r=_t.get(),s=0;yt.buffers||(yt.buffers=[null,[],[]],yt.printChar=function(t,e){var i=yt.buffers[t];y(i),0===e||10===e?((1===t?a.print:a.printErr)(E(i,0)),i.length=0):i.push(e)});for(var o=0;o<r;o++){for(var l=P[n+8*o>>2],c=P[n+(8*o+4)>>2],h=0;h<c;h++)yt.printChar(i,C[l+h]);s+=c}return s}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ut(t),-t.errno}}var bt=function(t,e,i,n){var r,a;"number"==typeof t?(r=!0,a=t):(r=!1,a=t.length);var s,o="string"==typeof e?e:null;if(s=i==A?n:["function"==typeof Pt?Pt:p,Bt,p,function(t){y(N);var e=P[N>>2],i=e+t+15&-16;return P[N>>2]=i,i>=X&&!Z()?(P[N>>2]=e,0):e}][void 0===i?x:i](Math.max(a,o?1:e.length)),r){var l;for(n=s,y(0==(3&s)),l=s+(-4&a);n<l;n+=4)P[n>>2]=0;for(l=s+a;n<l;)I[n++>>0]=0;return s}if("i8"===o)return t.subarray||t.slice?C.set(t,s):C.set(new Uint8Array(t),s),s;for(var c,h,u,d=0;d<a;){var f=t[d];0!==(c=o||e[d])?("i64"==c&&(c="i32"),w(s+d,f,c),u!==c&&(h=g(c),u=c),d+=h):d++}return s}([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",x);var vt=st,wt=ot,xt=ot,At=lt;N=p(4),F=m(G=(O=m(R))+Y),P[N>>2]=F,D=!0;var Mt=!1;function St(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];n>255&&(Mt&&y(!1,"Character code "+n+" ("+String.fromCharCode(n)+")  at offset "+i+" not in 0x00-0xFF."),n&=255),e.push(String.fromCharCode(n))}return e.join("")}var Et="function"==typeof atob?atob:function(t){var e,i,n,r,a,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=o.indexOf(t.charAt(c++))<<2|(r=o.indexOf(t.charAt(c++)))>>4,i=(15&r)<<4|(a=o.indexOf(t.charAt(c++)))>>2,n=(3&a)<<6|(s=o.indexOf(t.charAt(c++))),l+=String.fromCharCode(e),64!==a&&(l+=String.fromCharCode(i)),64!==s&&(l+=String.fromCharCode(n))}while(c<t.length);return l};function Tt(t){if(mt(t))return function(t){if("boolean"==typeof u&&u){var e;try{e=n.from(t,"base64")}catch(i){e=new n(t,"base64")}return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}try{for(var i=Et(t),r=new Uint8Array(i.length),a=0;a<i.length;++a)r[a]=i.charCodeAt(a);return r}catch(t){throw new Error("Converting base64 string to bytes failed.")}}(t.slice(pt.length))}a.asmGlobalArg={Math:Math,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0,byteLength:z},a.asmLibraryArg={abort:Ut,assert:y,enlargeMemory:Z,getTotalMemory:function(){return X},abortOnCannotGrowMemory:function(){Ut("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+X+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or (4) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")},invoke_di:function(t,e){try{return a.dynCall_di(t,e)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_ii:function(t,e){try{return a.dynCall_ii(t,e)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_iii:function(t,e,i){try{return a.dynCall_iii(t,e,i)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_iiii:function(t,e,i,n){try{return a.dynCall_iiii(t,e,i,n)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_iiiii:function(t,e,i,n,r){try{return a.dynCall_iiiii(t,e,i,n,r)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_iiiiii:function(t,e,i,n,r,s){try{return a.dynCall_iiiiii(t,e,i,n,r,s)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_iiiiiii:function(t,e,i,n,r,s,o){try{return a.dynCall_iiiiiii(t,e,i,n,r,s,o)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_iiiiiiii:function(t,e,i,n,r,s,o,l){try{return a.dynCall_iiiiiiii(t,e,i,n,r,s,o,l)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_iiiiiiiiiiii:function(t,e,i,n,r,s,o,l,c,h,u,d){try{return a.dynCall_iiiiiiiiiiii(t,e,i,n,r,s,o,l,c,h,u,d)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_vi:function(t,e){try{a.dynCall_vi(t,e)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_vii:function(t,e,i){try{a.dynCall_vii(t,e,i)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_viii:function(t,e,i,n){try{a.dynCall_viii(t,e,i,n)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},invoke_viiii:function(t,e,i,n,r){try{a.dynCall_viiii(t,e,i,n,r)}catch(t){if("number"!=typeof t&&"longjmp"!==t)throw t;a.setThrew(1,0)}},___lock:function(){},___setErrNo:function(t){return a.___errno_location&&(P[a.___errno_location()>>2]=t),t},___syscall140:function(t,e){_t.varargs=e;try{var i=_t.getStreamFromFD(),n=(_t.get(),_t.get()),r=_t.get(),a=_t.get(),s=n;return FS.llseek(i,s,a),P[r>>2]=i.position,i.getdents&&0===s&&0===a&&(i.getdents=null),0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ut(t),-t.errno}},___syscall145:function(t,e){_t.varargs=e;try{var i=_t.getStreamFromFD(),n=_t.get(),r=_t.get();return _t.doReadv(i,n,r)}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ut(t),-t.errno}},___syscall146:yt,___syscall221:function(t,e){_t.varargs=e;try{return 0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ut(t),-t.errno}},___syscall5:function(t,e){_t.varargs=e;try{var i=_t.getStr(),n=_t.get(),r=_t.get();return FS.open(i,n,r).fd}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ut(t),-t.errno}},___syscall54:function(t,e){_t.varargs=e;try{return 0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ut(t),-t.errno}},___syscall6:function(t,e){_t.varargs=e;try{var i=_t.getStreamFromFD();return FS.close(i),0}catch(t){return"undefined"!=typeof FS&&t instanceof FS.ErrnoError||Ut(t),-t.errno}},___unlock:function(){},_emscripten_memcpy_big:function(t,e,i){return C.set(C.subarray(e,e+i),t),t},_llvm_ceil_f32:vt,_llvm_floor_f32:wt,_llvm_floor_f64:xt,_llvm_pow_f64:At,flush_NO_FILESYSTEM:function(){var t=a._fflush;t&&t(0);var e=yt.printChar;if(e){var i=yt.buffers;i[1].length&&e(1,10),i[2].length&&e(2,10)}},DYNAMICTOP_PTR:N,tempDoublePtr:gt,ABORT:_,STACKTOP:O,STACK_MAX:G,cttz_i8:bt};var It,Ct=function(t,e,i){"almost asm";var n=t.Int8Array,r=new n(i),a=t.Int16Array,s=new a(i),o=t.Int32Array,l=new o(i),c=t.Uint8Array,h=new c(i),u=t.Uint16Array,d=new u(i),f=t.Uint32Array,p=(new f(i),t.Float32Array),m=new p(i),g=t.Float64Array,_=new g(i),y=t.byteLength,b=0|e.DYNAMICTOP_PTR,v=0|e.tempDoublePtr,w=(e.ABORT,0|e.STACKTOP),x=(e.STACK_MAX,0|e.cttz_i8),A=0,M=(t.NaN,t.Infinity,0),S=t.Math.floor,E=(t.Math.abs,t.Math.sqrt),T=t.Math.pow,I=(t.Math.cos,t.Math.sin,t.Math.tan,t.Math.acos,t.Math.asin,t.Math.atan,t.Math.atan2,t.Math.exp,t.Math.log,t.Math.ceil),C=t.Math.imul,k=(t.Math.min,t.Math.max,t.Math.clz32),P=e.abort,B=(e.assert,e.enlargeMemory),L=e.getTotalMemory,R=e.abortOnCannotGrowMemory,D=(e.invoke_di,e.invoke_ii,e.invoke_iii,e.invoke_iiii,e.invoke_iiiii,e.invoke_iiiiii,e.invoke_iiiiiii,e.invoke_iiiiiiii,e.invoke_iiiiiiiiiiii,e.invoke_vi,e.invoke_vii,e.invoke_viii,e.invoke_viiii,e.___lock),O=e.___setErrNo,G=e.___syscall140,F=e.___syscall145,N=e.___syscall146,z=e.___syscall221,H=e.___syscall5,U=e.___syscall54,V=e.___syscall6,W=e.___unlock,j=e._emscripten_memcpy_big;function Z(t,e){t|=0,e|=0;var i=0;return(i=0|Ht(1,72))?(l[i+64>>2]=t,t=0|zt(t),l[i+32>>2]=t,t?(l[i+36>>2]=t,e=0==(0|e),l[(t=i+68|0)>>2]=l[t>>2]|(e?1:2),l[i+40>>2]=e?29:30,l[i+44>>2]=e?31:32,l[i+16>>2]=4,l[i+20>>2]=5,l[i+24>>2]=6,l[i+28>>2]=7,0|i):(jt(i),0|(i=0))):0|(i=0)}function Y(t){t|=0;var e,i=0;return(e=0|Ht(1,72))?(l[e+64>>2]=1048576,i=0|zt(1048576),l[e+32>>2]=i,i?(l[e+36>>2]=i,i=0==(0|t),l[(t=e+68|0)>>2]=l[t>>2]|(i?1:2),l[e+40>>2]=i?29:30,l[e+44>>2]=i?31:32,l[e+16>>2]=4,l[e+20>>2]=5,l[e+24>>2]=6,l[e+28>>2]=7,0|(i=e)):(jt(e),0|(i=0))):0|(i=0)}function X(t){var e=0;(t|=0)&&(0|(e=0|l[t+4>>2])&&ia[7&e](0|l[t>>2]),jt(0|l[(e=t+32|0)>>2]),l[e>>2]=0,jt(t))}function J(t,e){e|=0,(t|=0)&&2&l[t+68>>2]&&(l[t+16>>2]=e)}function q(t,e){e|=0,(t|=0)&&(l[t+28>>2]=e)}function Q(t,e){e|=0,(t|=0)&&(l[t+24>>2]=e)}function K(t,e,i){e|=0,i|=0,(t|=0)&&(l[t>>2]=e,l[t+4>>2]=i)}function $(t,e,i){e|=0,i|=0,(t|=0)&&(l[(t=t+8|0)>>2]=e,l[t+4>>2]=i)}function tt(t,e){e|=0,(t|=0)&&1&l[t+68>>2]&&(l[t+20>>2]=e)}function et(t,e,i,n){e|=0,i|=0,n|=0;var r,a=0;return l[36+(t|=0)>>2]=l[t+32>>2],l[t+48>>2]=0,a=0==(0|qr[63&l[t+28>>2]](e,i,0|l[t>>2])),r=0|l[(n=t+68|0)>>2],a?(l[n>>2]=4|r,0|(a=0)):(l[n>>2]=-5&r,l[(a=t+56|0)>>2]=e,l[a+4>>2]=i,0|(a=1))}function it(t,e,i){t|=0,e|=0,i|=0;var n,a,s=0;if(a=w,w=w+16|0,l[(n=a)>>2]=e,i){for(s=0,e=n+i|0;e=e+-1|0,r[t>>0]=0|r[e>>0],(0|(s=s+1|0))!=(0|i);)t=t+1|0;w=a}else w=a}function nt(t,e,i){t|=0,i|=0;var n=0;if(l[(e|=0)>>2]=0,i)for(n=e+i|0,e=t,t=0;r[(n=n+-1|0)>>0]=0|r[e>>0],(0|(t=t+1|0))!=(0|i);)e=e+1|0}function rt(t,e){t|=0,e=+e;var i,n=0,a=0;_[v>>3]=e,a=0|Er(0|(i=0|l[v>>2]),0|(n=0|l[v+4>>2]),56),r[t>>0]=a,a=0|Er(0|i,0|n,48),r[t+1>>0]=a,a=0|Er(0|i,0|n,40),r[t+2>>0]=a,r[t+3>>0]=n,a=0|Er(0|i,0|n,24),r[t+4>>0]=a,a=0|Er(0|i,0|n,16),r[t+5>>0]=a,n=0|Er(0|i,0|n,8),r[t+6>>0]=n,r[t+7>>0]=i}function at(t,e){var i;t|=0,r[(i=8+(e|=0)|0)-1>>0]=0|r[t>>0],r[i+-2>>0]=0|r[t+1>>0],r[i+-3>>0]=0|r[t+2>>0],r[i+-4>>0]=0|r[t+3>>0],r[i+-5>>0]=0|r[t+4>>0],r[i+-6>>0]=0|r[t+5>>0],r[i+-7>>0]=0|r[t+6>>0],r[e>>0]=0|r[t+7>>0]}function st(t,e){t|=0,e=+e;var i=0;m[v>>2]=e,i=0|l[v>>2],r[t>>0]=i>>>24,r[t+1>>0]=i>>>16,r[t+2>>0]=i>>>8,r[t+3>>0]=i}function ot(t,e){var i;t|=0,r[(i=4+(e|=0)|0)-1>>0]=0|r[t>>0],r[i+-2>>0]=0|r[t+1>>0],r[i+-3>>0]=0|r[t+2>>0],r[e>>0]=0|r[t+3>>0]}function lt(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0;if(s=w,w=w+16|0,y=s+8|0,_=s,(o=0|l[(a=48+(t|=0)|0)>>2])>>>0>=i>>>0)return Cr(0|e,0|l[(y=t+36|0)>>2],0|i),l[y>>2]=(0|l[y>>2])+i,l[a>>2]=(0|l[a>>2])-i,_=0|br(0|l[(_=y=t+56|0)>>2],0|l[_+4>>2],0|i,0),l[y>>2]=_,l[y+4>>2]=M,w=s,0|(y=i);if(4&l[(r=t+68|0)>>2]|0)return Cr(0|e,0|l[(y=t+36|0)>>2],0|o),_=0|l[a>>2],l[y>>2]=(0|l[y>>2])+_,_=0|br(0|l[(n=y=t+56|0)>>2],0|l[n+4>>2],0|_,0),l[y>>2]=_,l[y+4>>2]=M,l[a>>2]=0,w=s,0|(y=0|o?o:-1);for(o?(Cr(0|e,0|l[(m=t+36|0)>>2],0|o),c=0|l[(g=t+32|0)>>2],l[m>>2]=c,p=0|l[a>>2],d=0|br(0|l[(d=f=t+56|0)>>2],0|l[d+4>>2],0|p,0),l[f>>2]=d,l[f+4>>2]=M,l[a>>2]=0,i=i-p|0,e=e+p|0):(c=0|l[(g=t+32|0)>>2],l[(m=t+36|0)>>2]=c,o=0),f=t+64|0,p=t+16|0,d=t+56|0;;){if(h=0|l[f>>2],u=0|l[p>>2],i>>>0>=h>>>0){if(h=0|qr[63&u](e,i,0|l[t>>2]),l[a>>2]=h,-1==(0|h)){c=16;break}if(o=h+o|0,!(h>>>0<i>>>0)){c=19;break}c=h}else{if(c=0|qr[63&u](c,h,0|l[t>>2]),l[a>>2]=c,-1==(0|c)){c=11;break}if(c>>>0>=i>>>0){c=14;break}Cr(0|e,0|l[m>>2],0|c),o=c+o|0,c=0|l[a>>2]}u=0|l[g>>2],l[m>>2]=u,b=0|br(0|l[(b=d)>>2],0|l[b+4>>2],0|c,0),l[(h=d)>>2]=b,l[h+4>>2]=M,l[a>>2]=0,i=i-c|0,e=e+c|0,c=u}return 11==(0|c)?(mt(n,4,4386,_),l[a>>2]=0,l[r>>2]=4|l[r>>2],w=s,0|(b=0|o?o:-1)):14==(0|c)?(Cr(0|e,0|l[m>>2],0|i),l[m>>2]=(0|l[m>>2])+i,l[a>>2]=(0|l[a>>2])-i,y=0|br(0|l[(y=b=t+56|0)>>2],0|l[y+4>>2],0|i,0),l[b>>2]=y,l[b+4>>2]=M,w=s,0|(b=o+i|0)):16==(0|c)?(mt(n,4,4386,y),l[a>>2]=0,l[r>>2]=4|l[r>>2],w=s,0|(b=0|o?o:-1)):19==(0|c)?(y=0|br(0|l[(y=b=t+56|0)>>2],0|l[y+4>>2],0|h,0),l[b>>2]=y,l[b+4>>2]=M,l[m>>2]=l[g>>2],l[a>>2]=0,w=s,0|(b=o)):0}function ct(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0;if(o=w,w=w+16|0,s=o,8&l[(r=68+(t|=0)|0)>>2]|0)return w=o,0|(y=-1);a=t+64|0,f=0|l[(y=t+48|0)>>2],c=(0|l[a>>2])-f|0;do{if(c>>>0<i>>>0){m=t+32|0,h=t+36|0,g=t+20|0,u=t+56|0,d=0,p=c;t:for(;;){if(p?(Cr(0|l[h>>2],0|e,0|p),c=0|l[m>>2],l[h>>2]=c,f=(0|l[y>>2])+p|0,l[y>>2]=f,v=0|br(0|l[(v=u)>>2],0|l[v+4>>2],0|p,0),l[(b=u)>>2]=v,l[b+4>>2]=M,d=p+d|0,i=i-p|0,e=e+p|0):c=0|l[m>>2],l[h>>2]=c,f){do{if(-1==(0|(f=0|qr[63&l[g>>2]](c,f,0|l[t>>2]))))break t;c=(0|l[h>>2])+f|0,l[h>>2]=c,f=(0|l[y>>2])-f|0,l[y>>2]=f}while(0!=(0|f));c=0|l[m>>2]}if(l[h>>2]=c,i>>>0<=(p=0|l[a>>2])>>>0){_=5;break}f=0}if(5==(0|_))break;return l[r>>2]=8|l[r>>2],mt(n,4,4360,s),w=o,0|(v=-1)}d=0,u=t+56|0,h=c=t+36|0,c=0|l[c>>2]}while(0);return Cr(0|c,0|e,0|i),l[h>>2]=(0|l[h>>2])+i,l[y>>2]=(0|l[y>>2])+i,b=0|br(0|l[(b=u)>>2],0|l[b+4>>2],0|i,0),l[(v=u)>>2]=b,l[v+4>>2]=M,w=o,0|(v=d+i|0)}function ht(t){return M=0|l[4+(t=56+(t|=0)|0)>>2],0|l[t>>2]}function ut(t){var e=0,i=0;return 0==(0|(e=0|l[(i=8+(t|=0)|0)>>2]))&0==(0|(i=0|l[i+4>>2]))?(M=e=0,0|(i=0)):(i=0|vr(0|e,0|i,0|l[(t=t+56|0)>>2],0|l[t+4>>2]),M=e=M,0|i)}function dt(t,e,i,n){return e|=0,i|=0,n|=0,0|(n=0|Qr[63&l[40+(t|=0)>>2]](t,e,i,n))}function ft(t,e,i,n){return e|=0,i|=0,n|=0,0|Qr[63&l[44+(t|=0)>>2]](t,e,i,n)}function pt(t){return 7!=(0|l[28+(t|=0)>>2])|0}function mt(t,e,i,n){t|=0,e|=0,i|=0,n|=0;var r,a,s,o=0;s=w,w=w+528|0,r=s,a=s+16|0;t:do{if(t){switch(0|e){case 1:e=t+12|0;break;case 2:e=t+16|0,t=t+4|0;break;case 4:e=t+20|0,t=t+8|0;break;default:e=0;break t}o=0|l[e>>2],e=0|l[t>>2],o?i?(kr(0|a,0,512),l[r>>2]=n,lr(a,512,i,r),na[7&o](a,e),e=1):e=1:e=0}else e=0}while(0);return w=s,0|e}function gt(t){l[(t|=0)>>2]=0,l[t+4>>2]=0,l[t+8>>2]=0,l[t+12>>2]=4,l[t+20>>2]=4,l[t+16>>2]=4}function _t(t,e,i){t|=0,e|=0,i|=0;var n,r,a=0,s=0,o=0,c=0,h=0;if(!(n=0|Ht(1,36)))return 0|(o=n);if(l[n+20>>2]=i,l[(r=n+16|0)>>2]=t,a=0|Ht(1,52*t|0),l[(o=n+24|0)>>2]=a,!a)return 0|(i=0|l[n+28>>2])&&jt(i),jt(n),0|(o=0);if(!t)return 0|(o=n);for(i=0;l[a+(52*i|0)>>2]=l[e+(36*i|0)>>2],l[a+(52*i|0)+4>>2]=l[e+(36*i|0)+4>>2],c=0|l[e+(36*i|0)+8>>2],l[a+(52*i|0)+8>>2]=c,h=0|l[e+(36*i|0)+12>>2],l[a+(52*i|0)+12>>2]=h,l[a+(52*i|0)+16>>2]=l[e+(36*i|0)+16>>2],l[a+(52*i|0)+20>>2]=l[e+(36*i|0)+20>>2],l[a+(52*i|0)+24>>2]=l[e+(36*i|0)+24>>2],l[a+(52*i|0)+28>>2]=l[e+(36*i|0)+28>>2],l[a+(52*i|0)+32>>2]=l[e+(36*i|0)+32>>2],c=0|Ht(0|C(h,c),4),l[a+(52*i|0)+44>>2]=c,i=i+1|0,c;){if(i>>>0>=t>>>0){s=22;break}a=0|l[o>>2]}if(22==(0|s))return 0|n;if(0|(i=0|l[o>>2])){if(a=0|l[r>>2]){for(t=0;(i=0|l[i+(52*t|0)+44>>2])&&(jt(i),a=0|l[r>>2]),!((i=t+1|0)>>>0>=a>>>0);)t=i,i=0|l[o>>2];i=0|l[o>>2]}jt(i)}return 0|(i=0|l[n+28>>2])&&jt(i),jt(n),0|(h=0)}function yt(t){var e,i=0,n=0,r=0,a=0;if(t|=0){if(0|(i=0|l[(e=t+24|0)>>2])){if(n=0|l[(a=t+16|0)>>2]){for(r=0;(i=0|l[i+(52*r|0)+44>>2])&&(jt(i),n=0|l[a>>2]),!((i=r+1|0)>>>0>=n>>>0);)r=i,i=0|l[e>>2];i=0|l[e>>2]}jt(i)}0|(i=0|l[t+28>>2])&&jt(i),jt(t)}}function bt(){return 0|Ht(1,36)}function vt(t,e){t|=0;var i,n,r=0,a=0,s=0,o=0,c=0;if(l[(e|=0)>>2]=l[t>>2],l[e+4>>2]=l[t+4>>2],l[e+8>>2]=l[t+8>>2],l[e+12>>2]=l[t+12>>2],i=e+16|0,a=0|l[(n=e+24|0)>>2]){if(s=0|l[i>>2]){for(r=0;(a=0|l[a+(52*r|0)+44>>2])&&(jt(a),s=0|l[i>>2]),!((r=r+1|0)>>>0>=s>>>0);)a=0|l[n>>2];r=n,a=0|l[n>>2]}else r=n;jt(a),l[n>>2]=0}else r=n;if(a=0|l[t+16>>2],l[i>>2]=a,a=0|zt(52*a|0),l[r>>2]=a,!a)return l[n>>2]=0,void(l[i>>2]=0);if(0|l[i>>2]){c=t+24|0,o=0,r=a;do{r=r+(52*o|0)|0,a=(0|l[c>>2])+(52*o|0)|0,s=r+52|0;do{l[r>>2]=l[a>>2],r=r+4|0,a=a+4|0}while((0|r)<(0|s));r=0|l[n>>2],l[r+(52*o|0)+44>>2]=0,o=o+1|0}while(o>>>0<(0|l[i>>2])>>>0)}if(l[e+20>>2]=l[t+20>>2],r=0|l[(s=t+32|0)>>2],l[(o=e+32|0)>>2]=r,r)return a=0|zt(r),l[(r=e+28|0)>>2]=a,a?void Cr(0|a,0|l[t+28>>2],0|l[s>>2]):(l[r>>2]=0,void(l[o>>2]=0));l[e+28>>2]=0}function wt(t){t|=0;var e=0;if(!(e=0|Ht(1,84)))return 0|(e=0);switch(l[e+68>>2]=0,0|t){case 0:if(l[e+4>>2]=8,l[e+12>>2]=9,l[e>>2]=33,l[e+8>>2]=1,l[e+16>>2]=1,l[e+20>>2]=34,t=0|Yt(),l[e+40>>2]=t,!t)return jt(e),0|(e=0);break;case 2:if(l[e+4>>2]=10,l[e+12>>2]=11,l[e>>2]=35,l[e+8>>2]=2,l[e+16>>2]=2,l[e+20>>2]=36,t=0|ke(0),l[e+40>>2]=t,!t)return jt(e),0|(e=0);break;default:return jt(e),0|(e=0)}return gt(e+44|0),0|e}function xt(t){t|=0;var e=0;if(!(e=0|Ht(1,84)))return 0|(e=0);switch(l[e+68>>2]=1,0|t){case 0:if(l[e+72>>2]=13,l[e+76>>2]=2,l[e+80>>2]=3,l[e+4>>2]=37,l[e+16>>2]=12,l[e>>2]=38,l[e+20>>2]=1,l[e+24>>2]=5,l[e+8>>2]=1,l[e+12>>2]=3,l[e+28>>2]=1,l[e+32>>2]=1,l[e+36>>2]=13,t=0|se(),l[e+40>>2]=t,!t)return jt(e),0|(e=0);break;case 2:if(l[e+72>>2]=14,l[e+76>>2]=4,l[e+80>>2]=5,l[e+4>>2]=39,l[e+16>>2]=14,l[e>>2]=40,l[e+8>>2]=2,l[e+12>>2]=4,l[e+20>>2]=2,l[e+24>>2]=6,l[e+28>>2]=2,l[e+32>>2]=2,l[e+36>>2]=15,t=0|ke(1),l[e+40>>2]=t,!t)return jt(e),0|(e=0);break;default:return jt(e),0|(e=0)}return gt(e+44|0),0|e}function At(t,e,i){return i|=0,0!=(0|(t|=0))&0!=(0|(e|=0))&&0|l[t+68>>2]?0|(i=0|Qr[63&l[t+4>>2]](0|l[t+40>>2],e,i,t+44|0)):0|(i=0)}function Mt(t){var e=0;(t|=0)&&(0|l[t+68>>2]?(e=t+40|0,ia[7&l[t+20>>2]](0|l[e>>2])):(e=t+40|0,ia[7&l[t+16>>2]](0|l[e>>2])),l[e>>2]=0,jt(t))}function St(t){var e,i=0;(t|=0)&&(i=0|l[t>>2],(e=0|l[i+48>>2])&&(jt(e),i=0|l[t>>2]),jt(i),l[t>>2]=0)}function Et(t,e){return 0!=(0|(t|=0))&0!=(0|(e|=0))?0|l[t+68>>2]?0|(e=0):0|(e=0|qr[63&l[t+4>>2]](0|l[t+40>>2],e,t+44|0)):0|(e=0)}function Tt(t,e){return 0!=(0|(t|=0))&0!=(0|(e|=0))?0|l[t+68>>2]?0|(e=0):0|(e=0|qr[63&l[t+12>>2]](0|l[t+40>>2],e,t+44|0)):0|(e=0)}function It(t,e,i){var n;return i|=0,n=w,w=w+16|0,0!=(0|(t|=0))&0!=(0|(e|=0))?0|l[e+68>>2]?(i=0|Qr[63&l[e>>2]](t,0|l[e+40>>2],i,e+44|0),w=n,0|i):(mt(e+44|0,1,4520,n),w=n,0|(i=0)):(w=n,0|(i=0))}function Ct(t){(t|=0)&&(kr(0|t,0,8248),l[t+8200>>2]=-1,l[t+8204>>2]=-1,l[t+8248>>2]=0)}function kt(t){(t|=0)&&(kr(0|t,0,18708),l[t+5592>>2]=6,l[t+18684>>2]=0,l[t+5596>>2]=64,l[t+5600>>2]=64,l[t+44>>2]=0,l[t+5612>>2]=-1,l[t+18188>>2]=1,l[t+18192>>2]=1,r[t+18688>>0]=0,l[t+18196>>2]=-1,l[t+18200>>2]=-1,m[t+4792>>2]=0,l[t+4788>>2]=0,l[t+20>>2]=0,l[t+24>>2]=0,l[t+28>>2]=0,l[t+18692>>2]=0)}function Pt(t,e,i){return e|=0,i|=0,(t|=0)?(l[t+56>>2]=e,l[t+44>>2]=i,0|(i=1)):0|(i=0)}function Bt(t,e,i){return e|=0,i|=0,(t|=0)?(l[t+64>>2]=e,l[t+52>>2]=i,0|(i=1)):0|(i=0)}function Lt(t,e,i){return e|=0,i|=0,(t|=0)?(l[t+60>>2]=e,l[t+48>>2]=i,0|(i=1)):0|(i=0)}function Rt(t,e){var i;return i=w,w=w+16|0,0!=(0|(t|=0))&0!=(0|(e|=0))?0|l[t+68>>2]?(na[7&l[t+24>>2]](0|l[t+40>>2],e),w=i,0|(e=1)):(mt(t+44|0,1,4439,i),w=i,0|(e=0)):(w=i,0|(e=0))}function Dt(t,e,i){return 0!=(0|(t|=0))&0!=(0|(e|=0))&0!=(0|(i|=0))?0|l[t+68>>2]?0|(i=0):0|(i=0|Qr[63&l[t+20>>2]](0|l[t+40>>2],e,i,t+44|0)):0|(i=0)}function Ot(t,e,i){return e|=0,0!=(0|(t|=0))&0!=(0|(i|=0))?0|l[t+68>>2]?0|(i=0):0|(i=0|Qr[63&l[t>>2]](0|l[t+40>>2],i,e,t+44|0)):0|(i=0)}function Gt(t,e){e|=0;var i=0;return(t|=0)&&(i=0|Y(e))?(K(i,t,0),$(i,0|l[t+8>>2],0),e?J(i,16):tt(i,17),Q(i,18),q(i,19),0|i):0|(i=0)}function Ft(t,e,i){e|=0,i|=0;var n=0;return(t|=0)&&(n=0|Dn(t,0==(0|i)?4433:4436))?(t=0|Z(e,i))?(K(t,n,6),Vn(n,0,2),i=0|function(t){return 0|function(t){var e=0,i=0;return(0|l[76+(t|=0)>>2])>-1?(i=0==(0|Cn()),e=0|_r(t),i||In()):e=0|_r(t),0|e}(t|=0)}(n),Vn(n,0,0),$(t,i,((0|i)<0)<<31>>31),J(t,20),tt(t,21),Q(t,22),q(t,23),0|(n=t)):(zn(n),0|(n=0)):0|(n=0)}function Nt(){return 4427}function zt(t){return 0|(t=(t|=0)?0|gn(t):0)}function Ht(t,e){return 0==(0|(t|=0))|0==(0|(e|=0))?0|(e=0):0|(e=0|function(t,e){e|=0;var i=0;return(t|=0)?(i=0|C(e,t),(e|t)>>>0>65535&&(i=(0|(i>>>0)/(t>>>0))==(0|e)?i:-1)):i=0,(t=0|gn(i))&&3&l[t+-4>>2]?(kr(0|t,0,0|i),0|t):0|t}(t,e))}function Ut(t){var e,i;t|=0,i=w,w=w+16|0,e=i;do{if(t){if(0|vn(e,16,t)){l[e>>2]=0,t=0;break}t=0|l[e>>2];break}t=0}while(0);return w=i,0|t}function Vt(t){_n(t|=0)}function Wt(t,e){return t|=0,0|(t=(e|=0)?0|function(t,e){e|=0;var i=0,n=0;return(t|=0)?e>>>0>4294967231?(l[(e=25296)>>2]=12,0|(e=0)):0|(i=0|function(t,e){e|=0;var i=0,n=0,r=0,a=0,s=0,o=0,c=0,h=0,u=0,d=0;if(d=0|l[(u=4+(t|=0)|0)>>2],o=t+(i=-8&d)|0,!(3&d))return e>>>0<256?0|(t=0):i>>>0>=(e+4|0)>>>0&&(i-e|0)>>>0<=l[6304]<<1>>>0?0|t:0|(t=0);if(i>>>0>=e>>>0)return(i=i-e|0)>>>0<=15?0|t:(h=t+e|0,l[u>>2]=1&d|e|2,l[h+4>>2]=3|i,l[(d=o+4|0)>>2]=1|l[d>>2],yn(h,i),0|t);if((0|l[6190])==(0|o))return h=(0|l[6187])+i|0,i=h-e|0,n=t+e|0,h>>>0<=e>>>0?0|(t=0):(l[u>>2]=1&d|e|2,l[n+4>>2]=1|i,l[6190]=n,l[6187]=i,0|t);if((0|l[6189])==(0|o))return(n=(0|l[6186])+i|0)>>>0<e>>>0?0|(t=0):((i=n-e|0)>>>0>15?(h=t+e|0,n=t+n|0,l[u>>2]=1&d|e|2,l[h+4>>2]=1|i,l[n>>2]=i,l[(n=n+4|0)>>2]=-2&l[n>>2],n=h):(l[u>>2]=1&d|n|2,l[(n=t+n+4|0)>>2]=1|l[n>>2],n=0,i=0),l[6186]=i,l[6189]=n,0|t);if(2&(n=0|l[o+4>>2])|0)return 0|(t=0);if((c=(-8&n)+i|0)>>>0<e>>>0)return 0|(t=0);h=c-e|0,r=n>>>3;do{if(n>>>0<256){if(n=0|l[o+8>>2],(0|(i=0|l[o+12>>2]))==(0|n)){l[6184]=l[6184]&~(1<<r);break}l[n+12>>2]=i,l[i+8>>2]=n;break}s=0|l[o+24>>2],i=0|l[o+12>>2];do{if((0|i)==(0|o)){if(i=0|l[(n=4+(r=o+16|0)|0)>>2])a=n;else{if(!(i=0|l[r>>2])){r=0;break}a=r}for(;;)if(0|(n=0|l[(r=i+20|0)>>2]))i=n,a=r;else{if(!(r=0|l[(n=i+16|0)>>2]))break;i=r,a=n}l[a>>2]=0,r=i}else r=0|l[o+8>>2],l[r+12>>2]=i,l[i+8>>2]=r,r=i}while(0);if(0|s){if(i=0|l[o+28>>2],(0|l[(n=25040+(i<<2)|0)>>2])==(0|o)){if(l[n>>2]=r,!r){l[6185]=l[6185]&~(1<<i);break}}else if(l[s+16+(((0|l[s+16>>2])!=(0|o)&1)<<2)>>2]=r,!r)break;l[r+24>>2]=s,0|(n=0|l[(i=o+16|0)>>2])&&(l[r+16>>2]=n,l[n+24>>2]=r),0|(i=0|l[i+4>>2])&&(l[r+20>>2]=i,l[i+24>>2]=r)}}while(0);return h>>>0<16?(l[u>>2]=c|1&d|2,l[(d=t+c+4|0)>>2]=1|l[d>>2],0|t):(o=t+e|0,l[u>>2]=1&d|e|2,l[o+4>>2]=3|h,l[(d=t+c+4|0)>>2]=1|l[d>>2],yn(o,h),0|t)}(t+-8|0,e>>>0<11?16:e+11&-8))?0|(e=i+8|0):(i=0|gn(e))?(n=0|l[t+-4>>2],Cr(0|i,0|t,0|((n=(-8&n)-(0==(3&n|0)?8:4)|0)>>>0<e>>>0?n:e)),_n(t),0|(e=i)):0|(e=0):0|(e=0|gn(e))}(t,e):0)}function jt(t){_n(t|=0)}function Zt(t,e){0!=(0|(t|=0))&0!=(0|(e|=0))&&(l[t+172>>2]=l[e+4>>2],l[t+168>>2]=l[e>>2])}function Yt(){var t=0,e=0;return(t=0|Ht(1,208))?(l[t>>2]=0,r[(e=t+184|0)>>0]=-3&r[e>>0],e=0|zt(1e3),l[t+44>>2]=e,e?(l[t+48>>2]=1e3,e=0|mi(),l[t+192>>2]=e,e?(e=0|mi(),l[t+188>>2]=e,0|e?0|(e=t):(Xt(t),0|(e=0))):(Xt(t),0|(e=0))):(Xt(t),0|(e=0))):0|(t=0)}function Xt(t){var e=0,i=0,n=0,a=0,s=0,o=0;if(t|=0){if(0|l[t>>2]?(0|(i=0|l[(e=t+12|0)>>2])&&(Jt(i),jt(0|l[e>>2]),l[e>>2]=0),0|(i=0|l[(e=t+16|0)>>2])&&(jt(i),l[e>>2]=0,l[t+20>>2]=0)):(0|(i=0|l[(e=t+36|0)>>2])&&(jt(i),l[e>>2]=0),0|(i=0|l[(e=t+24|0)>>2])&&(jt(i),l[e>>2]=0,l[t+28>>2]=0),0|(i=0|l[(e=t+44|0)>>2])&&(jt(i),l[e>>2]=0,l[t+48>>2]=0)),$e(0|l[t+204>>2]),e=t+88|0,0|(i=0|l[(s=t+164|0)>>2])){if(a=0|C(0|l[t+112>>2],0|l[t+116>>2])){for(n=0;Jt(i),(0|(n=n+1|0))!=(0|a);)i=i+5640|0;i=0|l[s>>2]}jt(i),l[s>>2]=0}if(0|(i=0|l[(s=t+124|0)>>2])){if(n=0|l[(o=t+120|0)>>2]){for(a=0;(i=0|l[i+(a<<3)>>2])&&(jt(i),n=0|l[o>>2]),!((i=a+1|0)>>>0>=n>>>0);)a=i,i=0|l[s>>2];i=0|l[s>>2]}l[o>>2]=0,jt(i),l[s>>2]=0}jt(0|l[(o=t+144|0)>>2]),l[o>>2]=0,l[t+128>>2]=0,jt(0|l[(o=t+108|0)>>2]),l[o>>2]=0,2&r[t+184>>0]||(jt(0|l[(o=t+176|0)>>2]),l[o>>2]=0),i=e+100|0;do{l[e>>2]=0,e=e+4|0}while((0|e)<(0|i));gi(0|l[(o=t+188|0)>>2]),l[o>>2]=0,gi(0|l[t+192>>2]),l[o>>2]=0,qt(0|l[(o=t+196|0)>>2]),l[o>>2]=0,yt(0|l[(o=t+80|0)>>2]),l[o>>2]=0,yt(0|l[(o=t+84|0)>>2]),l[o>>2]=0,jt(t)}}function Jt(t){var e,i=0,n=0,r=0,a=0,s=0,o=0;if(t|=0){if(0|(i=0|l[(a=t+5164|0)>>2])){if(n=0|l[(s=t+5160|0)>>2]){for(r=0;(i=0|l[i+(r<<3)>>2])&&(jt(i),n=0|l[s>>2]),!((i=r+1|0)>>>0>=n>>>0);)r=i,i=0|l[a>>2];i=0|l[a>>2]}l[s>>2]=0,jt(i),l[a>>2]=0}if(0|(n=0|l[(i=t+5172|0)>>2])&&(jt(n),l[i>>2]=0),0|(n=0|l[(i=t+5584|0)>>2])&&(jt(n),l[i>>2]=0),0|(n=0|l[(i=t+5608|0)>>2])&&(jt(n),l[i>>2]=0),0|(n=0|l[(i=t+5604|0)>>2])&&(jt(n),l[i>>2]=0),0|(n=0|l[(i=t+5624|0)>>2])&&(jt(n),l[i>>2]=0,l[t+5632>>2]=0,l[t+5628>>2]=0),0|(i=0|l[(e=t+5612|0)>>2])){if(n=0|l[(o=t+5616|0)>>2]){for(s=0;(a=0|l[(r=i+12|0)>>2])&&(jt(a),l[r>>2]=0,n=0|l[o>>2]),!((s=s+1|0)>>>0>=n>>>0);)i=i+20|0;i=0|l[e>>2]}jt(i),l[e>>2]=0}0|(n=0|l[(i=t+5600|0)>>2])&&(jt(n),l[i>>2]=0),(n=0|l[(i=t+5592|0)>>2])&&(jt(n),l[i>>2]=0,l[t+5596>>2]=0)}}function qt(t){var e,i=0,n=0,r=0,a=0;if(t|=0){if(0|(n=0|l[(i=t+28|0)>>2])&&(jt(n),l[i>>2]=0),0|(i=0|l[(e=t+40|0)>>2])){if(0|l[(a=t+36|0)>>2]){r=0;do{(n=0|l[i+(40*r|0)+36>>2])&&(jt(n),i=0|l[e>>2],l[i+(40*r|0)+36>>2]=0),(n=0|l[i+(40*r|0)+16>>2])&&(jt(n),i=0|l[e>>2],l[i+(40*r|0)+16>>2]=0),(n=0|l[i+(40*r|0)+24>>2])&&(jt(n),i=0|l[e>>2],l[i+(40*r|0)+24>>2]=0),r=r+1|0}while(r>>>0<(0|l[a>>2])>>>0)}jt(i),l[e>>2]=0}jt(t)}}function Qt(t,e,i,n){n|=0;var a,o,c,h,u,d,f,p,g,y,b,v,x,A,M,E,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0,Y=0,X=0,J=0,q=0,Q=0,K=0,$=0,tt=0,et=0,it=0,nt=0,rt=0,at=0,st=0,ot=0,lt=0,ct=0;if(E=w,w=w+320|0,lt=E+296|0,M=E+288|0,A=E+280|0,x=E+272|0,v=E+264|0,b=E+256|0,y=E+248|0,g=E+240|0,at=E+232|0,u=E+224|0,h=E+216|0,rt=E+208|0,c=E+200|0,o=E+192|0,a=E+184|0,N=E+176|0,F=E+168|0,G=E+160|0,O=E+152|0,R=E+144|0,K=E+136|0,Q=E+128|0,it=E+112|0,q=E+104|0,J=E+96|0,X=E+88|0,Y=E+80|0,Z=E+72|0,W=E+64|0,V=E+56|0,U=E+48|0,H=E+32|0,z=E+24|0,L=E+16|0,P=E+8|0,I=E,tt=E+309|0,et=E+300|0,!(0!=(0|(t|=0))&0!=(0|(e|=0))&0!=(0|(i|=0))))return w=E,0|(lt=0);if(((T=0|l[(p=e+5592|0)>>2])-1|0)>>>0>32)return l[I>>2]=T,l[I+4>>2]=33,mt(n,1,4599,I),w=E,0|(lt=0);l[(d=t+112|0)>>2]=1,l[(f=t+116|0)>>2]=1,$=e+18704|0;do{if(!(0|s[$>>1])){switch(0|l[e+18676>>2]){case 1:T=1041666,I=1302083,k=3,ot=8;break;case 2:T=520833,I=651041,k=3,ot=8;break;case 3:T=1041666,I=1302083,k=4,ot=8;break;default:I=0}8==(0|ot)&&(s[$>>1]=k,l[e+18700>>2]=I,l[e+18680>>2]=T,I=1),T=0|l[e+18684>>2];t:do{if((0|T)<4){switch(0|T){case 3:break;default:ot=13;break t}T=3,ot=12}else{if((0|T)<33024)switch(0|T){case 4:T=4,ot=12;break t;default:ot=13;break t}switch(0|T){case 33024:break;default:ot=13;break t}T=-32512,ot=12}}while(0);if(12==(0|ot))s[$>>1]=T;else if(13==(0|ot)&&0==(0|I))break;mt(n,2,4655,P)}}while(0);T=0|l[(j=e+18700|0)>>2];do{if((0|T)<1){if((D=+m[e+4792+((0|l[e+4788>>2])-1<<2)>>2])>0){st=0|l[i+24>>2],L=0|C(0|l[st+8>>2],0|l[i+16>>2]),L=0|C(L,0|l[st+12>>2]),ct=+((0|C(L,0|l[st+24>>2]))>>>0),st=~~+S(+ct/(8*D*+((0|l[st>>2])>>>0)*+((0|l[st+4>>2])>>>0))),l[j>>2]=st;break}l[j>>2]=0;break}if(B=0|l[i+24>>2],st=0|C(0|l[B+8>>2],0|l[i+16>>2]),st=0|C(st,0|l[B+12>>2]),D=+((0|C(st,0|l[B+24>>2]))>>>0),T=0|C(T<<3,0|l[B>>2]),D/=+((0|C(T,0|l[B+4>>2]))>>>0),0|(T=0|l[(B=e+4788|0)>>2])){P=0,I=0;do{+m[(k=e+4792+(P<<2)|0)>>2]<D&&(m[k>>2]=D,I=1,T=0|l[B>>2]),P=P+1|0}while(P>>>0<T>>>0);0|I&&mt(n,2,4792,L)}}while(0);T=0|s[$>>1];t:do{if((T+-3&65535)>=4){if(T<<16>>16==7){mt(n,2,6952,R),s[$>>1]=0;break}if((T+-256&65535)<524){mt(n,2,7007,O),s[$>>1]=0;break}if((T+-1024&65535)<1180){mt(n,2,7055,G),s[$>>1]=0;break}if(T<<16>>16<=-1)switch(T<<16>>16){case-32512:break t;case-32768:mt(n,2,7097,F),s[$>>1]=0;break t;default:mt(n,2,7185,N),s[$>>1]=0;break t}}else{if((T+-5&65535)<2){mt(n,2,4884,z),s[$>>1]=0;break}l[e>>2]=0,l[e+12>>2]=1,l[e+16>>2]=1,r[e+18689>>0]=67,r[e+18688>>0]=1,l[e+4>>2]=0,l[e+8>>2]=0,l[e+18180>>2]=0,l[e+18184>>2]=0,l[e+5596>>2]=32,l[e+5600>>2]=32,l[e+5604>>2]=0,l[e+5612>>2]=-1,l[e+18188>>2]=1,l[e+18192>>2]=1,l[e+5608>>2]=1,(0|(k=0|l[(I=e+4788|0)>>2]))>1&&(ct=+m[e+4792+(k+-1<<2)>>2],l[H>>2]=k,_[H+8>>3]=ct,mt(n,2,4946,H),l[e+4792>>2]=l[e+4792+((0|l[I>>2])-1<<2)>>2],l[I>>2]=1,T=0|s[$>>1]);e:do{switch(T<<16>>16){case 3:(0|(T=0|l[p>>2]))>6&&(l[U>>2]=T+1,mt(n,2,5119,U),l[p>>2]=6,T=6);break;case 4:if((0|(T=0|l[p>>2]))<2){l[V>>2]=T+1,mt(n,2,5265,V),l[p>>2]=1,T=1;break e}(0|T)>7&&(l[W>>2]=T+1,mt(n,2,5419,W),l[p>>2]=7,T=7);break;default:T=0|l[p>>2]}}while(0);if(l[(I=e+40|0)>>2]=1|l[I>>2],l[(I=e+5620|0)>>2]=T+-1,(0|T)>1){T=0;do{l[e+5624+(T<<2)>>2]=256,l[e+5756+(T<<2)>>2]=256,T=T+1|0}while((0|T)<(0|l[I>>2]))}l[e+44>>2]=4,4==(0|s[$>>1])?(T=0|l[p>>2],l[e+96>>2]=1,l[e+48>>2]=0,l[e+52>>2]=0,l[e+56>>2]=1,st=T+-1|0,l[e+60>>2]=st,l[e+64>>2]=3,l[e+80>>2]=4,l[e+244>>2]=1,l[e+196>>2]=st,l[e+200>>2]=0,l[e+204>>2]=1,l[e+208>>2]=T,l[e+212>>2]=3,l[e+228>>2]=4,T=2):T=0,l[e+4784>>2]=T,l[e+20>>2]=1,(0|(T=0|l[j>>2]))>=1?(0|T)>1302083&&(mt(n,2,5722,Y),l[j>>2]=1302083):(l[j>>2]=1302083,mt(n,2,5573,Z)),(0|(I=0|l[(T=e+18680|0)>>2]))>=1?(0|I)>1041666&&(mt(n,2,6044,J),l[T>>2]=1041666):(l[T>>2]=1041666,mt(n,2,5895,X)),T=0|l[i+16>>2],I=0|l[i+24>>2],P=0|l[I+8>>2],k=0|C(P,T),L=0|l[I+12>>2],k=0|C(k,L),ct=+((0|C(k,0|l[I+24>>2]))>>>0),k=0|C(l[j>>2]<<3,0|l[I>>2]),ct/=+((0|C(k,0|l[I+4>>2]))>>>0),m[e+4792>>2]=ct,k=0|s[$>>1];e:do{if(3==(0|T)){if(T=0|l[I+28>>2],(B=0|l[I+32>>2])|12!=(0|T))L=0;else if(T=0|l[I+80>>2],(B=0|l[I+84>>2])|12!=(0|T))L=1;else if(T=0|l[I+132>>2],(I=0|l[I+136>>2])|12!=(0|T))L=2,B=I;else switch(k<<16>>16){case 3:if(!(P>>>0>2048|L>>>0>1080))break t;l[Q>>2]=P,l[Q+4>>2]=L,mt(n,2,6616,Q);break e;case 4:if(!(P>>>0>4096|L>>>0>2160))break t;l[K>>2]=P,l[K+4>>2]=L,mt(n,2,6787,K);break e;default:break t}r[tt>>0]=0|r[6383],r[tt+1>>0]=0|r[6384],r[tt+2>>0]=0|r[6385],r[tt+3>>0]=0|r[6386],r[tt+4>>0]=0|r[6387],r[tt+5>>0]=0|r[6388],r[tt+6>>0]=0|r[6389],k=6390,P=(I=et)+9|0;do{r[I>>0]=0|r[k>>0],I=I+1|0,k=k+1|0}while((0|I)<(0|P));l[it>>2]=L,l[it+4>>2]=T,l[it+8>>2]=0|B?tt:et,mt(n,2,6399,it)}else l[q>>2]=T,mt(n,2,6217,q)}while(0);s[$>>1]=0}}while(0);l[t+168>>2]=l[e+18680>>2],s[(st=t+88|0)>>1]=0|s[$>>1],tt=-2&r[(it=t+181|0)>>0]|1&l[e+20>>2],r[it>>0]=tt,tt=(255&l[(et=e+24|0)>>2])<<1&2|-3&tt,r[it>>0]=tt,r[it>>0]=-5&tt|(255&l[e+28>>2])<<2&4;do{if(0|l[et>>2]&&0|l[(nt=e+32|0)>>2]){if(I=0|zt(T=0|C(12*(0|l[e+4788>>2])|0,0|l[p>>2])),l[t+176>>2]=I,0|I){Cr(0|I,0|l[nt>>2],0|T);break}return mt(n,1,7244,a),w=E,0|(lt=0)}}while(0);l[(P=t+100|0)>>2]=l[e+12>>2],l[(B=t+104|0)>>2]=l[e+16>>2],l[(k=t+92|0)>>2]=l[e+4>>2],l[(L=t+96|0)>>2]=l[e+8>>2],T=0|l[(I=e+36|0)>>2];do{if(T){if(T=0|zt(1+(0|Mn(T))|0),l[t+108>>2]=T,0|T){cr(T,0|l[I>>2]);break}return mt(n,1,7316,o),w=E,0|(lt=0)}if(I=0|zt(29+(0|Mn(T=4427))|0),l[t+108>>2]=I,0|I){l[rt>>2]=7421,l[rt+4>>2]=T,ur(I,7416,rt);break}return mt(n,1,7370,c),w=E,0|(lt=0)}while(0);if(T=(0|l[i+8>>2])-(0|l[k>>2])|0,0|l[e>>2]?(rt=0|l[P>>2],l[d>>2]=(T+-1+rt|0)/(0|rt)|0,rt=0|l[B>>2],l[f>>2]=((0|l[i+12>>2])-1-(0|l[L>>2])+rt|0)/(0|rt)|0):(l[P>>2]=T,l[B>>2]=(0|l[i+12>>2])-(0|l[L>>2])),0|r[e+18688>>0]&&(r[t+180>>0]=0|r[e+18689>>0],r[it>>0]=8|r[it>>0]),rt=0|Ht(0|C(0|l[f>>2],0|l[d>>2]),5640),l[(et=t+164|0)>>2]=rt,!rt)return mt(n,1,7450,h),w=E,0|(lt=0);W=0|l[(tt=e+4784|0)>>2];do{if(0|W){if(z=e+48|0,j=0|l[p>>2],Z=0|l[i+16>>2],Y=0|l[e+4788>>2],X=0|C(Z,j),!(J=0|Ht(0|C(X,Y),4))){mt(n,1,7504,u);break}if((T=0|l[z>>2])>>>0<(k=0|l[(O=e+60|0)>>2])>>>0)for(R=0|C(T,Z),G=e+52|0,N=e+56|0,I=0|l[(F=e+64|0)>>2];;){if((P=0|l[G>>2])>>>0<I>>>0){for(L=P+R|0,k=0|l[N>>2];;){if(k){for(I=L,B=0;l[J+(I<<2)>>2]=1,!((B=B+1|0)>>>0>=(k=0|l[N>>2])>>>0);)I=I+X|0;I=0|l[F>>2]}else k=0;if((P=P+1|0)>>>0>=I>>>0)break;L=L+1|0}k=0|l[O>>2]}if((T=T+1|0)>>>0>=k>>>0)break;R=R+Z|0}if(W>>>0>1){F=1;do{if(T=z,z=z+148|0,H=0|l[T+8>>2],H=(B=0|l[(N=T+156|0)>>2])>>>0>H>>>0?H:0,(I=0|l[z>>2])>>>0<(k=0|l[(U=T+160|0)>>2])>>>0)for(R=0|C(I,Z),V=T+152|0,O=T+164|0,G=0|C(H,X),T=0|l[O>>2];;){if((P=0|l[V>>2])>>>0<T>>>0){for(L=P+R|0;;){if(H>>>0<B>>>0){for(T=L+G|0,k=H;l[J+(T<<2)>>2]=1,!((k=k+1|0)>>>0>=(B=0|l[N>>2])>>>0);)T=T+X|0;T=0|l[O>>2]}if((P=P+1|0)>>>0>=T>>>0)break;L=L+1|0}k=0|l[U>>2]}if((I=I+1|0)>>>0>=k>>>0)break;R=R+Z|0}F=F+1|0}while((0|F)!=(0|W))}if(!(0==(0|Y)|0==(0|j)|0==(0|Z))){for(T=0,L=0,R=0;;){for(k=0,B=L;;){for(P=0,I=B;T|=1!=(0|l[J+(I<<2)>>2]),(0|(P=P+1|0))!=(0|Z);)I=I+1|0;if((0|(k=k+1|0))==(0|j))break;B=B+Z|0}if((0|(R=R+1|0))==(0|Y))break;L=L+X|0}0|T&&mt(n,1,7552,at)}jt(J)}}while(0);t:do{if(0|C(0|l[f>>2],0|l[d>>2])){H=e+4788|0,U=e+40|0,V=e+44|0,W=e+18690|0,j=i+16|0,I=e+18696|0,Z=i+24|0,Y=e+5596|0,X=e+5600|0,J=e+5604|0,q=e+5608|0,Q=e+5612|0,K=e+5616|0,$=e+5620|0,z=0;e:for(;;){O=(R=0|l[et>>2])+(5640*z|0)|0,at=0|l[H>>2],l[(k=R+(5640*z|0)+8|0)>>2]=at;i:do{if(0|at){if(((0|s[st>>1])-3&65535)<4)T=0;else for(T=0;;)if(at=0==(4&r[it>>0]),l[(at?R+(5640*z|0)+20+(T<<2)|0:R+(5640*z|0)+5184+(T<<2)|0)>>2]=l[(at?e+4792+(T<<2)|0:e+5192+(T<<2)|0)>>2],(T=T+1|0)>>>0>=(0|l[k>>2])>>>0)break i;do{4&r[it>>0]&&(l[R+(5640*z|0)+5184+(T<<2)>>2]=l[e+5192+(T<<2)>>2]),l[R+(5640*z|0)+20+(T<<2)>>2]=l[e+4792+(T<<2)>>2],T=T+1|0}while(T>>>0<(0|l[k>>2])>>>0)}}while(0);if(l[O>>2]=l[U>>2],l[R+(5640*z|0)+4>>2]=l[V>>2],l[(L=R+(5640*z|0)+16|0)>>2]=r[W>>0],k=0|r[(T=R+(5640*z|0)+5636|0)>>0],r[T>>0]=-5&k,0|l[tt>>2]){if(r[T>>0]=4|k,P=0|l[tt>>2]){B=z+1|0,T=0,k=0;do{(0|B)==(0|l[e+48+(148*k|0)+48>>2])&&(l[R+(5640*z|0)+424+(148*T|0)>>2]=l[e+48+(148*T|0)>>2],l[R+(5640*z|0)+424+(148*T|0)+4>>2]=l[e+48+(148*T|0)+4>>2],l[R+(5640*z|0)+424+(148*T|0)+8>>2]=l[e+48+(148*T|0)+8>>2],l[R+(5640*z|0)+424+(148*T|0)+12>>2]=l[e+48+(148*T|0)+12>>2],l[R+(5640*z|0)+424+(148*T|0)+16>>2]=l[e+48+(148*T|0)+16>>2],l[R+(5640*z|0)+424+(148*T|0)+32>>2]=l[e+48+(148*T|0)+32>>2],l[R+(5640*z|0)+424+(148*T|0)+48>>2]=l[e+48+(148*T|0)+48>>2],T=T+1|0),k=k+1|0}while(k>>>0<P>>>0)}else T=0;T=T+-1|0}else T=0;if(l[R+(5640*z|0)+420>>2]=T,at=0|Ht(0|l[j>>2],1080),l[(N=R+(5640*z|0)+5584|0)>>2]=at,!at){ot=141;break}do{if(0|l[I>>2]){if(k=0|l[j>>2],P=0|zt(k=0|C(k<<2,k)),B=(0|l[I>>2])+k|0,!P){ot=144;break e}if(l[L>>2]=2,T=0|zt(k),l[R+(5640*z|0)+5608>>2]=T,!T){ot=146;break e}if(Cr(0|T,0|l[I>>2],0|k),Cr(0|P,0|l[I>>2],0|k),T=0|zt(k),l[(k=R+(5640*z|0)+5604|0)>>2]=T,!T){ot=148;break e}if(!(0|Ni(P,T,0|l[j>>2]))){ot=150;break e}if(T=0|zt(l[j>>2]<<3),l[R+(5640*z|0)+5600>>2]=T,!T){ot=152;break e}if(Ge(T,0|l[j>>2],0|l[k>>2]),jt(P),0|(k=0|l[j>>2])){P=0|l[N>>2],T=0;do{l[P+(1080*T|0)+1076>>2]=l[B+(T<<2)>>2],T=T+1|0}while(T>>>0<k>>>0)}if(!(0|Kt(O,i))){ot=158;break e}0|l[j>>2]&&(O=0,ot=172)}else{i:do{if(1==(0|l[L>>2])){if((T=0|l[j>>2])>>>0<=2){P=T;break}k=0|l[Z>>2],T=0|l[k>>2];do{if((0|T)==(0|l[k+52>>2])){if((0|T)!=(0|l[k+104>>2]))break;if((0|(T=0|l[k+4>>2]))!=(0|l[k+56>>2]))break;if((0|T)==(0|l[k+108>>2])){ot=166;break i}}}while(0);mt(n,2,7948,lt),l[L>>2]=0,ot=166}else ot=166}while(0);if(166==(0|ot)&&(ot=0,P=0|l[j>>2]),!P)break;k=0|l[Z>>2],T=0;do{0|l[k+(52*T|0)+32>>2]||(l[(0|l[N>>2])+(1080*T|0)+1076>>2]=1<<(0|l[k+(52*T|0)+24>>2])-1),T=T+1|0}while(T>>>0<P>>>0);O=0,ot=172}}while(0);if(172==(0|ot))for(;;){if(ot=0,F=(G=0|l[N>>2])+(1080*O|0)|0,P=1&l[U>>2],l[F>>2]=P,B=0|l[p>>2],l[(L=G+(1080*O|0)+4|0)>>2]=B,(0|(T=0|l[Y>>2]))>1)for(k=T,T=0;T=T+1|0,k>>>0>3;)k>>>=1;else T=0;if(l[G+(1080*O|0)+8>>2]=T,(0|(T=0|l[X>>2]))>1)for(k=T,T=0;T=T+1|0,k>>>0>3;)k>>>=1;else T=0;l[G+(1080*O|0)+12>>2]=T,l[G+(1080*O|0)+16>>2]=l[J>>2],at=0|l[q>>2],l[G+(1080*O|0)+20>>2]=0==(0|at)&1,l[G+(1080*O|0)+24>>2]=0|at?2:0,l[G+(1080*O|0)+804>>2]=2,T=(0|O)==(0|l[Q>>2])?0|l[K>>2]:0,l[G+(1080*O|0)+808>>2]=T;do{if(P){if(!((0|B)>0))break;for(R=0;;){L=B,B=B+-1|0,T=0|l[$>>2];do{if((0|R)<(0|T)){T=0|l[e+5624+(R<<2)>>2];do{if((0|T)<1)T=1;else{if(1==(0|T)){T=0;break}for(k=T,T=0;T=T+1|0,k>>>0>3;)k>>>=1}}while(0);if(l[G+(1080*O|0)+812+(B<<2)>>2]=T,(0|(T=0|l[e+5756+(R<<2)>>2]))<1){T=1;break}if(1==(0|T)){T=0;break}for(k=T,T=0;T=T+1|0,k>>>0>3;)k>>>=1}else{k=R-(at=T+-1|0)|0,T=l[e+5624+(at<<2)>>2]>>k,k=l[e+5756+(at<<2)>>2]>>k;do{if((0|T)<1)T=1;else{if(1==(0|T)){T=0;break}for(P=T,T=0;T=T+1|0,P>>>0>3;)P>>>=1}}while(0);if(l[G+(1080*O|0)+812+(B<<2)>>2]=T,(0|k)<1){T=1;break}if(1==(0|k)){T=0;break}for(T=0;T=T+1|0,k>>>0>3;)k>>>=1}}while(0);if(l[G+(1080*O|0)+944+(B<<2)>>2]=T,(0|L)<=1)break;R=R+1|0}}else{if(!B)break;T=0;do{l[G+(1080*O|0)+812+(T<<2)>>2]=15,l[G+(1080*O|0)+944+(T<<2)>>2]=15,T=T+1|0}while(T>>>0<(0|l[L>>2])>>>0)}}while(0);if(Ri(F,0|l[(0|l[Z>>2])+(52*O|0)+24>>2]),(O=O+1|0)>>>0>=(0|l[j>>2])>>>0)break;ot=172}if((z=z+1|0)>>>0>=(0|C(0|l[f>>2],0|l[d>>2]))>>>0)break t}if(141==(0|ot))return mt(n,1,7591,g),w=E,0|(lt=0);if(144==(0|ot))return mt(n,1,7655,y),w=E,0|(lt=0);if(146==(0|ot))return jt(P),mt(n,1,7698,b),w=E,0|(lt=0);if(148==(0|ot))return jt(P),mt(n,1,7756,v),w=E,0|(lt=0);if(150==(0|ot))return jt(P),mt(n,1,7816,x),w=E,0|(lt=0);if(152==(0|ot))return jt(P),mt(n,1,7864,A),w=E,0|(lt=0);if(158==(0|ot))return mt(n,1,7914,M),w=E,0|(lt=0)}else I=e+18696|0}while(0);return(T=0|l[I>>2])?(jt(T),l[I>>2]=0,w=E,0|(lt=1)):(w=E,0|(lt=1))}function Kt(t,e){e|=0;var i,n,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,g=0,_=0;if(2!=(0|l[16+(t|=0)>>2]))return 0|(t=1);f=t+5604|0,s=0|l[(_=t+5616|0)>>2],p=t+5620|0;do{if(0|l[f>>2]){do{if((0|s)==(0|l[p>>2])){if(s=s+10|0,l[p>>2]=s,0|(s=0|Wt(0|l[(a=t+5612|0)>>2],20*s|0))){l[a>>2]=s,kr(s+(20*(g=0|l[_>>2])|0)|0,0,20*((0|l[p>>2])-g|0)|0),s=0|l[_>>2];break}return jt(0|l[a>>2]),l[a>>2]=0,l[p>>2]=0,l[_>>2]=0,0|(t=0)}a=t+5612|0}while(0);if(o=(u=0|l[a>>2])+(20*s|0)|0,0|(a=0|l[(d=u+(20*s|0)+12|0)>>2])&&(jt(a),l[d>>2]=0),l[u+(20*s|0)+8>>2]=1,l[u+(20*s|0)+4>>2]=1,l[o>>2]=2,a=0|l[e+16>>2],h=0|zt(c=(a=0|C(a,a))<<2),l[d>>2]=h,h){ra[15&l[768+(l[o>>2]<<2)>>2]](0|l[f>>2],h,a),l[u+(20*s|0)+16>>2]=c,s=1+(0|l[_>>2])|0,l[_>>2]=s,c=2;break}return 0|(t=0)}c=1,o=0}while(0);do{if((0|s)==(0|l[p>>2])){if(s=s+10|0,l[p>>2]=s,0|(s=0|Wt(0|l[(a=t+5612|0)>>2],20*s|0))){l[a>>2]=s,kr(0|(s=s+(20*(g=0|l[_>>2])|0)|0),0,20*((0|l[p>>2])-g|0)|0),o=0==(0|o)?0:s+-20|0,s=0|l[_>>2];break}return jt(0|l[a>>2]),l[a>>2]=0,l[p>>2]=0,l[_>>2]=0,0|(t=0)}a=t+5612|0}while(0);if(g=(p=0|l[a>>2])+(20*s|0)|0,0|(a=0|l[(i=p+(20*s|0)+12|0)>>2])&&(jt(a),l[i>>2]=0),n=c+1|0,l[p+(20*s|0)+8>>2]=c,l[p+(20*s|0)+4>>2]=2,l[g>>2]=2,f=0|zt(d=(u=0|l[(e=e+16|0)>>2])<<2),l[i>>2]=f,!f)return 0|(t=0);if(!(f=0|zt(d)))return jt(0|l[i>>2]),l[i>>2]=0,0|(t=0);if(0|u)for(a=0,c=0|l[t+5584>>2],h=f;m[h>>2]=+(0|l[c+1076>>2]),(0|(a=a+1|0))!=(0|u);)c=c+1080|0,h=h+4|0;ra[15&l[768+(l[g>>2]<<2)>>2]](f,0|l[i>>2],u),jt(f),l[p+(20*s|0)+16>>2]=d,l[_>>2]=1+(0|l[_>>2]),a=0|l[(h=t+5628|0)>>2],c=t+5632|0;do{if((0|a)==(0|l[c>>2])){if(a=a+10|0,l[c>>2]=a,0|(a=0|Wt(0|l[(s=t+5624|0)>>2],20*a|0))){l[s>>2]=a,kr(a+(20*(t=0|l[h>>2])|0)|0,0,20*((0|l[c>>2])-t|0)|0),a=0|l[h>>2];break}return jt(0|l[s>>2]),l[s>>2]=0,l[c>>2]=0,l[h>>2]=0,0|(t=0)}s=t+5624|0}while(0);return t=0|l[s>>2],l[t+(20*a|0)+8>>2]=o,r[(_=t+(20*a|0)+16|0)>>0]=1|r[_>>0],l[t+(20*a|0)+4>>2]=l[e>>2],l[t+(20*a|0)>>2]=n,l[t+(20*a|0)+12>>2]=g,l[h>>2]=1+(0|l[h>>2]),0|(t=1)}function $t(t,e,i){return 1}function te(t,e,i,n){t|=0,e|=0,i|=0,n|=0;var r=0,a=0,s=0,o=0,c=0,h=0;if(c=0|bt(),l[(h=e+80|0)>>2]=c,!c)return 0|(h=0);if(0|_i(0|l[(r=e+192|0)>>2],24,n)&&0|_i(0|l[r>>2],25,n)){if(c=0|yi(o=0|l[r>>2]),r=0|bi(o),c){for(a=1,s=0;a=a?0!=(0|qr[63&l[r>>2]](e,t,n)):0,(0|(s=s+1|0))!=(0|c);)r=r+4|0,a&=1;if(vi(o),!a)return yt(0|l[h>>2]),l[h>>2]=0,0|(h=0)}else vi(o);if(0|_i(0|l[(r=e+188|0)>>2],26,n)&&0|_i(0|l[r>>2],27,n)){if(c=0|yi(o=0|l[r>>2]),r=0|bi(o),c){for(a=1,s=0;a=a?0!=(0|qr[63&l[r>>2]](e,t,n)):0,(0|(s=s+1|0))!=(0|c);)r=r+4|0,a&=1;if(vi(o),!a)return yt(0|l[h>>2]),l[h>>2]=0,0|(h=0)}else vi(o);if(r=0|bt(),l[i>>2]=r,!r)return 0|(h=0);if(vt(0|l[h>>2],r),a=0|C(0|l[e+116>>2],0|l[e+112>>2]),l[36+(0|l[(o=e+196|0)>>2])>>2]=a,a=0|Ht(a,40),r=0|l[o>>2],l[r+40>>2]=a,!a)return 0|(h=0);if(!(0|l[r+36>>2]))return 0|(h=1);for(s=0;;){if(l[a+(40*s|0)+28>>2]=100,l[a+(40*s|0)+20>>2]=0,h=0|Ht(100,24),r=0|l[o>>2],a=0|l[r+40>>2],l[a+(40*s|0)+24>>2]=h,s=s+1|0,!h){r=0,a=30;break}if(s>>>0>=(0|l[r+36>>2])>>>0){r=1,a=30;break}}if(30==(0|a))return 0|r}return yt(0|l[h>>2]),l[h>>2]=0,0|(h=0)}return yt(0|l[h>>2]),l[h>>2]=0,0|(h=0)}function ee(t,e,i,n,r){e|=0,i|=0,n|=0,r|=0;var a,s,o,c,h,u=0,d=0;if(h=w,w=w+32|0,a=h+8|0,o=h+20|0,t=16==(0|l[8+(t|=0)>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],c=0|l[t+5584>>2],!(t=0|l[n>>2]))return mt(r,1,10568,h),w=h,0|(e=0);l[n>>2]=t+-1,nt(i,o,1),i=i+1|0,u=31&(t=0|l[o>>2]),l[(s=c+(1080*e|0)+24|0)>>2]=u,l[c+(1080*e|0)+804>>2]=t>>>5;do{if(1==(0|u))t=1,d=8;else{if((t=(0|l[n>>2])>>>(0!=(0|u)&1))>>>0>97&&(l[a>>2]=t,l[a+4>>2]=97,l[a+8>>2]=97,mt(r,2,10604,a),u=0|l[s>>2]),r=0==(0|t),0|u){if(r){t=0,d=20;break}d=8;break}if(!r)for(u=0;nt(i,o,1),u>>>0<97&&(l[c+(1080*e|0)+28+(u<<3)>>2]=(0|l[o>>2])>>>3,l[c+(1080*e|0)+28+(u<<3)+4>>2]=0),(0|(u=u+1|0))!=(0|t);)i=i+1|0;t=(0|l[n>>2])-t|0}}while(0);if(8==(0|d))for(u=0;;){if(nt(i,o,2),u>>>0<97&&(d=0|l[o>>2],l[c+(1080*e|0)+28+(u<<3)>>2]=d>>>11,l[c+(1080*e|0)+28+(u<<3)+4>>2]=2047&d),(0|(u=u+1|0))==(0|t)){d=20;break}i=i+2|0}if(20==(0|d)&&(t=(0|l[n>>2])-(t<<1)|0),l[n>>2]=t,1!=(0|l[s>>2]))return w=h,0|(e=1);i=c+(1080*e|0)+28|0,u=c+(1080*e|0)+32|0,t=1;do{n=(0|l[i>>2])-(((t+-1|0)>>>0)/3|0)|0,l[c+(1080*e|0)+28+(t<<3)>>2]=(0|n)>0?n:0,l[c+(1080*e|0)+28+(t<<3)+4>>2]=l[u>>2],t=t+1|0}while(97!=(0|t));return w=h,0|(t=1)}function ie(t,e,i,n,r){e|=0,i|=0,n|=0,r|=0;var a,s,o,c,h,u,d=0,f=0,p=0,m=0,g=0;if(u=w,w=w+64|0,h=u+48|0,a=u+40|0,m=u+16|0,p=u+8|0,c=u+52|0,d=16==(0|l[(f=8+(t|=0)|0)>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],s=0|l[d+5584>>2],(0|l[n>>2])>>>0<5)return mt(r,1,11008,u),w=u,0|(n=0);if(nt(i,o=s+(1080*e|0)+4|0,1),d=1+(0|l[o>>2])|0,l[o>>2]=d,d>>>0>33)return l[p>>2]=d,l[p+4>>2]=33,mt(r,1,11043,p),w=u,0|(n=0);if((0|l[t+168>>2])>>>0>=d>>>0)return l[m>>2]=e,mt(r,1,11120,m),l[f>>2]=32768|l[f>>2],w=u,0|(n=0);if(nt(i+1|0,p=s+(1080*e|0)+8|0,1),l[p>>2]=2+(0|l[p>>2]),nt(i+2|0,f=s+(1080*e|0)+12|0,1),m=2+(0|l[f>>2])|0,l[f>>2]=m,m>>>0>10|(p=0|l[p>>2])>>>0>10|(p+m|0)>>>0>12)return mt(r,1,11278,u+24|0),w=u,0|(n=0);if(nt(i+3|0,m=s+(1080*e|0)+16|0,1),192&l[m>>2]|0)return mt(r,1,11346,u+32|0),w=u,0|(n=0);if(nt(i+4|0,s+(1080*e|0)+20|0,1),d=(0|l[n>>2])-5|0,l[n>>2]=d,t=0|l[o>>2],!(1&l[s+(1080*e|0)>>2])){if(!t)return w=u,0|(n=1);d=0;do{l[s+(1080*e|0)+812+(d<<2)>>2]=15,l[s+(1080*e|0)+944+(d<<2)>>2]=15,d=d+1|0}while(d>>>0<(0|l[o>>2])>>>0);return w=u,0|(d=1)}if(d>>>0<t>>>0)return mt(r,1,11008,a),w=u,0|(n=0);do{if(t){for(p=0,f=i+5|0;nt(f,c,1),f=f+1|0,d=0|l[c>>2],!(0|p&&d>>>0<16|0==(15&d|0));)if(l[s+(1080*e|0)+812+(p<<2)>>2]=15&d,l[s+(1080*e|0)+944+(p<<2)>>2]=d>>>4,(p=p+1|0)>>>0>=(t=0|l[o>>2])>>>0){g=24;break}if(24==(0|g)){d=0|l[n>>2];break}return mt(r,1,11413,h),w=u,0|(n=0)}t=0}while(0);return l[n>>2]=d-t,w=u,0|(n=1)}function ne(t,e,i,n,a,o,c,h,u,d,f){t|=0,e|=0,i|=0,n|=0,a|=0,o|=0,c|=0,h|=0,u|=0,d|=0,f|=0;var p,m,g,_,y,b,v,x,A,S,E,T,I,k,P,B,L,R,D,O,G,F,N,z,H,U,V,W,j,Z,Y,X,J,q,Q,K,$,tt=0,et=0,it=0,rt=0,at=0,st=0,ot=0,ct=0,gt=0,_t=0,yt=0,bt=0,vt=0,wt=0,xt=0,At=0,Mt=0,St=0,Et=0,Tt=0,It=0,Ct=0,kt=0,Pt=0,Bt=0,Lt=0,Rt=0,Dt=0,Ot=0,Gt=0;switch($=w,w=w+256|0,K=$+200|0,Q=$+192|0,J=$+184|0,X=$+176|0,W=$+168|0,V=$+160|0,U=$+152|0,H=$+144|0,z=$+136|0,N=$+128|0,G=$+120|0,O=$+112|0,D=$+104|0,R=$+96|0,L=$+88|0,B=$+80|0,P=$+72|0,k=$+64|0,I=$+56|0,T=$+48|0,Y=$+40|0,Z=$+32|0,j=$+24|0,F=$+16|0,E=$+8|0,S=$,p=$+240|0,m=$+236|0,g=$+232|0,_=$+228|0,y=$+224|0,b=$+220|0,v=$+216|0,A=$+208|0,l[(x=$+212|0)>>2]=65424,0|l[(q=t+8|0)>>2]){case 256:l[x>>2]=65497,tt=t+76|0;break;case 8:if(!(1&r[(tt=t+76|0)>>0])){xt=t+164|0,At=t+200|0,Mt=t+72|0,St=t+24|0,Et=t+196|0,Tt=t+112|0,kt=t+116|0,Pt=p+2|0,Bt=p+6|0,Lt=p+7|0,Rt=t+16|0,Dt=t+20|0,Ot=t+64|0,et=65424;t:do{e:do{if(65427!=(0|et)){for(;;){if(0==(0|(bt=0|ut(d)))&0==(0|M)){vt=50;break}if(2!=(0|lt(d,0|l[Rt>>2],2,f))){vt=8;break t}if(nt(0|l[Rt>>2],A,2),(0|l[A>>2])>>>0<2){vt=10;break t}if(32896==(0|l[x>>2])&&0==(0|(bt=0|ut(d)))&0==(0|M)){vt=50;break}for(rt=0|l[q>>2],et=0|l[A>>2],16&rt|0&&(l[St>>2]=-2-et+(0|l[St>>2])),it=et+-2|0,l[A>>2]=it,et=0|l[x>>2],yt=784;!(0==(0|(bt=0|l[yt>>2]))|(0|bt)==(0|et));)yt=yt+12|0;if(!(l[yt+4>>2]&rt)){vt=18;break t}if(it>>>0>(0|l[Dt>>2])>>>0){if(bt=0|ut(d),(0|(_t=M))<0|0==(0|_t)&bt>>>0<it>>>0){vt=22;break t}if(!(et=0|Wt(0|l[Rt>>2],0|l[A>>2]))){vt=24;break t}l[Rt>>2]=et,it=0|l[A>>2],l[Dt>>2]=it}else et=0|l[Rt>>2];if((0|(et=0|lt(d,et,it,f)))!=(0|l[A>>2])){vt=27;break t}if(!(it=0|l[yt+8>>2])){vt=29;break t}if(!(0|Qr[63&it](t,0|l[Rt>>2],et,f))){vt=31;break t}if(ot=0|l[At>>2],st=0|l[Et>>2],ct=0|l[yt>>2],gt=(gt=0|ht(d))-(_t=0|l[A>>2])-4|0,_t=_t+4|0,at=0|l[(st=st+40|0)>>2],(1+(et=0|l[at+(40*ot|0)+20>>2])|0)>>>0>(rt=0|l[(it=at+(40*ot|0)+28|0)>>2])>>>0){if(rt=~~(+(rt>>>0)+100)>>>0,l[it>>2]=rt,it=0|Wt(0|l[at+(40*ot|0)+24>>2],24*rt|0),et=(rt=0|l[st>>2])+(40*ot|0)+24|0,!it){vt=39;break t}l[et>>2]=it,st=rt,et=0|l[rt+(40*ot|0)+20>>2]}else st=at,it=0|l[at+(40*ot|0)+24>>2];s[it+(24*et|0)>>1]=ct,l[(bt=it+(24*et|0)+8|0)>>2]=gt,l[bt+4>>2]=((0|gt)<0)<<31>>31,l[it+(24*et|0)+16>>2]=_t,l[st+(40*ot|0)+20>>2]=et+1,65424==(0|ct)&&0|(wt=0|l[st+(40*ot|0)+16>>2])&&(bt=wt+(24*(0|l[st+(40*ot|0)+12>>2])|0)|0,l[bt>>2]=gt,l[bt+4>>2]=0);do{if(65424==(0|l[yt>>2])){if(et=0|ht(d),et=-4-(0|l[A>>2])+et|0,!((0|(yt=0|l[(bt=Ot)+4>>2]))<0|(0==(0|yt)?(0|l[bt>>2])>>>0<et>>>0:0)))break;l[(bt=Ot)>>2]=et,l[bt+4>>2]=0}}while(0);if(4&r[tt>>0])break;if(2!=(0|lt(d,0|l[Rt>>2],2,f))){vt=48;break t}if(nt(0|l[Rt>>2],x,2),65427==(0|l[x>>2]))break e}if(50==(0|vt)){vt=0,l[q>>2]=64;break}if(bt=0|dt(d,0|l[St>>2],0,f),0!=(0|M)||(0|bt)!=(0|l[St>>2])){vt=45;break t}l[x>>2]=65427}}while(0);if(0==(0|(bt=0|ut(d)))&0==(0|M)&&64==(0|l[q>>2])){vt=114;break}if(4&(et=0|r[tt>>0])){if(r[tt>>0]=-6&et,l[q>>2]=8,2!=(0|lt(d,0|l[Rt>>2],2,f))){vt=112;break}nt(0|l[Rt>>2],x,2)}else{it=0|l[xt>>2],rt=0|l[At>>2],0|l[Mt>>2]?(et=0|br(0|(et=0|ut(d)),0|M,-2,0),vt=57):(et=0|l[St>>2])>>>0>1&&(et=et+-2|0,vt=57),57==(0|vt)&&(vt=0,l[St>>2]=et),bt=it+(5640*rt|0)+5592|0,yt=it+(5640*rt|0)+5596|0;do{if(et){if(_t=0|ut(d),(0|(gt=M))<0|0==(0|gt)&_t>>>0<et>>>0&&mt(f,2,12386,L),!(et=0|l[bt>>2])){if(_t=0|zt(0|l[St>>2]),l[bt>>2]=_t,_t){gt=0;break}vt=66;break t}if(!(et=0|Wt(et,(0|l[St>>2])+(0|l[yt>>2])|0))){vt=64;break t}l[bt>>2]=et,gt=0}else gt=1}while(0);if(0|(et=0|l[Et>>2])){if(_t=0|br(0|(Gt=0|ht(d)),0|(rt=M),-2,-1),at=0|l[(st=et+40|0)>>2],ot=0|l[At>>2],ct=0|l[at+(40*ot|0)+12>>2],it=0|l[at+(40*ot|0)+16>>2],l[(et=it+(24*ct|0)+8|0)>>2]=_t,l[et+4>>2]=M,et=0|br(0|Gt,0|rt,0|l[St>>2],0),l[(ct=it+(24*ct|0)+16|0)>>2]=et,l[ct+4>>2]=M,ct=2+(0|l[St>>2])|0,(1+(et=0|l[at+(40*ot|0)+20>>2])|0)>>>0>(rt=0|l[(it=at+(40*ot|0)+28|0)>>2])>>>0){if(rt=~~(+(rt>>>0)+100)>>>0,l[it>>2]=rt,it=0|Wt(0|l[at+(40*ot|0)+24>>2],24*rt|0),et=(rt=0|l[st>>2])+(40*ot|0)+24|0,!it){vt=73;break}l[et>>2]=it,st=rt,et=0|l[rt+(40*ot|0)+20>>2]}else st=at,it=0|l[at+(40*ot|0)+24>>2];s[it+(24*et|0)>>1]=-109,_t=0|Sr(0,0|_t,32),l[(Gt=it+(24*et|0)+8|0)>>2]=_t,l[Gt+4>>2]=M,l[it+(24*et|0)+16>>2]=ct,l[st+(40*ot|0)+20>>2]=et+1}if(et=gt?0:0|lt(d,(0|l[bt>>2])+(0|l[yt>>2])|0,0|l[St>>2],f),l[q>>2]=(0|et)!=(0|l[St>>2])?64:8,l[yt>>2]=(0|l[yt>>2])+et,1==(9&(et=0|r[tt>>0]))){r[tt>>0]=8|et,it=0|l[At>>2];do{if(0==(0|pt(d))||-1==(0|(It=0|ht(d)))&-1==(0|(Ct=M)))et=1,it=0;else{for(;;){if(2!=(0|lt(d,p,2,f))){vt=80;break}if(nt(p,m,2),65424!=(0|l[m>>2])){vt=82;break}if(2!=(0|lt(d,p,2,f))){vt=84;break}if(nt(p,g,2),10!=(0|l[g>>2])){vt=86;break}if(l[g>>2]=8,(0|(et=0|lt(d,p,8,f)))!=(0|l[g>>2])){vt=88;break}if(8!=(0|et)){vt=90;break}if(nt(p,_,2),nt(Pt,y,4),nt(Bt,b,1),nt(Lt,v,1),(0|l[_>>2])==(0|it)){vt=96;break}if((et=0|l[y>>2])>>>0<14){vt=93;break}if(Gt=et+-12|0,l[y>>2]=Gt,Gt=0|dt(d,Gt,0,f),0!=(0|M)||(0|Gt)!=(0|l[y>>2])){vt=95;break}}if(80==(0|vt)){vt=0,et=0!=(0|ft(d,It,Ct,f)),it=0;break}if(82==(0|vt)){vt=0,et=0!=(0|ft(d,It,Ct,f)),it=0;break}if(84==(0|vt)){vt=0,mt(f,1,8150,O),et=0,it=0;break}if(86==(0|vt)){vt=0,mt(f,1,12203,G),et=0,it=0;break}if(88==(0|vt)){vt=0,mt(f,1,8150,N),et=0,it=0;break}if(90==(0|vt)){vt=0,mt(f,1,11669,z),et=0,it=0;break}if(93==(0|vt)){vt=0,et=0!=(0|ft(d,It,Ct,f)),it=0;break}if(95==(0|vt)){vt=0,et=0!=(0|ft(d,It,Ct,f)),it=0;break}if(96==(0|vt)){vt=0,it=(0|l[b>>2])==(0|l[v>>2])&1,et=0!=(0|ft(d,It,Ct,f));break}}}while(0);if(!et){vt=98;break}if(0|it){if(it=0|C(0|l[kt>>2],0|l[Tt>>2]),r[tt>>0]=-18&r[tt>>0]|16,0|it){rt=0|l[xt>>2],et=0;do{0|(st=0|l[(at=rt+(5640*et|0)+5588|0)>>2])&&(l[at>>2]=st+1),et=et+1|0}while((0|et)!=(0|it))}mt(f,2,12521,U)}}if(!(1&r[tt>>0])){if(2!=(0|lt(d,0|l[Rt>>2],2,f))){vt=108;break}nt(0|l[Rt>>2],x,2)}}et=0|l[x>>2]}while(65497!=(0|et)&0==(1&r[tt>>0]));switch(0|vt){case 8:return mt(f,1,8150,S),w=$,0|(Gt=0);case 10:return mt(f,1,12203,E),w=$,0|(Gt=0);case 18:return mt(f,1,8235,F),w=$,0|(Gt=0);case 22:return mt(f,1,12229,j),w=$,0|(Gt=0);case 24:return jt(0|l[Rt>>2]),l[Rt>>2]=0,l[Dt>>2]=0,mt(f,1,8333,Z),w=$,0|(Gt=0);case 27:return mt(f,1,8150,Y),w=$,0|(Gt=0);case 29:return mt(f,1,12274,T),w=$,0|(Gt=0);case 31:return l[I>>2]=l[x>>2],mt(f,1,12303,I),w=$,0|(Gt=0);case 39:return jt(0|l[et>>2]),Gt=0|l[st>>2],l[Gt+(40*ot|0)+24>>2]=0,l[Gt+(40*ot|0)+28>>2]=0,l[Gt+(40*ot|0)+20>>2]=0,mt(f,1,12350,k),w=$,0|(Gt=0);case 45:return mt(f,1,8150,P),w=$,0|(Gt=0);case 48:return mt(f,1,8150,B),w=$,0|(Gt=0);case 64:jt(0|l[bt>>2]),l[bt>>2]=0,vt=66;break;case 73:return jt(0|l[et>>2]),Gt=0|l[st>>2],l[Gt+(40*ot|0)+24>>2]=0,l[Gt+(40*ot|0)+28>>2]=0,l[Gt+(40*ot|0)+20>>2]=0,mt(f,1,12350,D),w=$,0|(Gt=0);case 98:return mt(f,1,12475,H),w=$,0|(Gt=0);case 108:return mt(f,1,8150,V),w=$,0|(Gt=0);case 112:return mt(f,1,8150,W),w=$,0|(Gt=0);case 114:et=0|l[x>>2]}if(66==(0|vt))return mt(f,1,12441,R),w=$,0|(Gt=0);65497==(0|et)&&256!=(0|l[q>>2])&&(l[t+200>>2]=0,l[q>>2]=256)}break;default:return w=$,0|(Gt=0)}if(1&r[tt>>0])rt=tt=t+200|0,at=0|l[t+164>>2],tt=0|l[tt>>2];else{it=0|C(0|l[t+112>>2],0|l[t+116>>2]),at=0|l[t+164>>2],tt=0|l[(rt=t+200|0)>>2];t:do{if(tt>>>0<it>>>0)for(et=at+(5640*tt|0)|0;;){if(0|l[et+5592>>2])break t;if(tt=tt+1|0,l[rt>>2]=tt,!(tt>>>0<it>>>0))break;et=et+5640|0}}while(0);if((0|tt)==(0|it))return l[u>>2]=0,w=$,0|(Gt=1)}if(2&r[at+(5640*tt|0)+5636>>0]){if(st=0|l[(vt=at+(5640*tt|0)+5160|0)>>2]){ot=0|l[at+(5640*tt|0)+5164>>2],it=0,et=0;do{et=(0|l[ot+(it<<3)+4>>2])+et|0,it=it+1|0}while((0|it)!=(0|st))}else et=0;if(Gt=0|zt(et),l[(bt=at+(5640*tt|0)+5172|0)>>2]=Gt,!Gt)return mt(f,1,9491,X),mt(f,1,12562,J),w=$,0|(Gt=0);if(l[(yt=at+(5640*tt|0)+5180|0)>>2]=et,_t=at+(5640*tt|0)+5164|0,it=0|l[vt>>2])for(gt=0,ot=0,ct=et=0|l[_t>>2];(st=0|l[ct+(gt<<3)>>2])?(Cr((0|l[bt>>2])+ot|0,0|st,0|l[ct+(gt<<3)+4>>2]),st=0|l[_t>>2],ot=(0|l[st+(gt<<3)+4>>2])+ot|0,jt(0|l[st+(gt<<3)>>2]),st=0|l[_t>>2],l[st+(gt<<3)>>2]=0,l[st+(gt<<3)+4>>2]=0,it=0|l[vt>>2],et=st):st=ct,!((gt=gt+1|0)>>>0>=it>>>0);)ct=st;else et=0|l[_t>>2];l[vt>>2]=0,jt(et),l[_t>>2]=0,l[at+(5640*tt|0)+5168>>2]=l[bt>>2],l[at+(5640*tt|0)+5176>>2]=l[yt>>2]}return 0|function(t,e,i){return 0|ii(t|=0,e|=0,0,.5,56,i|=0)}(0|l[(tt=t+204|0)>>2],0|l[rt>>2],f)?(Gt=0|C(0|l[t+112>>2],0|l[t+116>>2]),l[K>>2]=1+(0|l[rt>>2]),l[K+4>>2]=Gt,mt(f,4,12588,K),l[e>>2]=l[rt>>2],l[u>>2]=1,Gt=0|function(t){var e=0,i=0,n=0,r=0,a=0,s=0;if(e=0|l[24+(t|=0)>>2],!(r=0|l[e+16>>2]))return 0|(r=0);for(n=0|l[20+(0|l[l[t+20>>2]>>2])>>2],e=0|l[e+24>>2],t=0,i=0;s=((s=0|l[e+24>>2])>>>3)+(0!=(7&s|0)&1)|0,a=(0|l[n+24>>2])+(136*(0|l[n+20>>2])|0)-136|0,t=(0|C(0|C(3==(0|s)?4:s,(0|l[a+8>>2])-(0|l[a>>2])|0),(0|l[a+12>>2])-(0|l[a+4>>2])|0))+t|0,!((i=i+1|0)>>>0>=r>>>0);)n=n+52|0,e=e+52|0;return 0|t}(0|l[tt>>2]),l[i>>2]=Gt,Gt=0|l[l[20+(0|l[tt>>2])>>2]>>2],l[n>>2]=l[Gt>>2],l[a>>2]=l[Gt+4>>2],l[o>>2]=l[Gt+8>>2],l[c>>2]=l[Gt+12>>2],l[h>>2]=l[Gt+16>>2],l[q>>2]=128|l[q>>2],w=$,0|(Gt=1)):(mt(f,1,8019,Q),w=$,0|(Gt=0))}function re(t,e,i,n,a,s){e|=0,i|=0,n|=0,a|=0,s|=0;var o,c,h,u,d,f,p,m,g=0,_=0,y=0;if(m=w,w=w+48|0,f=m+28|0,p=m+32|0,!(128&l[(y=8+(t|=0)|0)>>2]))return w=m,0|(y=0);if((0|l[(d=t+200|0)>>2])!=(0|e))return w=m,0|(y=0);if(o=(g=0|l[t+164>>2])+(5640*e|0)|0,!(c=0|l[(_=g+(5640*e|0)+5592|0)>>2]))return Jt(o),w=m,0|(y=0);if(u=g+(5640*e|0)+5596|0,!(0|ri(0|l[(h=t+204|0)>>2],c,0|l[u>>2],e,0|l[t+196>>2],s)))return Jt(o),l[y>>2]=32768|l[y>>2],mt(s,1,12627,m),w=m,0|(y=0);if(!(0|ai(0|l[h>>2],i,n)))return w=m,0|(y=0);if(0|(g=0|l[_>>2])&&(jt(g),l[_>>2]=0,l[u>>2]=0),r[(t=t+76|0)>>0]=-2&r[t>>0],l[y>>2]=-129&l[y>>2],t=0|ut(a),256==(0|(_=0|l[y>>2]))|0==(0|t)&0==(0|M)&64==(0|_))return w=m,0|(y=1);if(2!=(0|lt(a,p,2,s)))return mt(s,2,12646,m+8|0),w=m,0|(y=1);switch(nt(p,f,2),0|l[f>>2]){case 65497:return l[d>>2]=0,l[y>>2]=256,w=m,0|(y=1);case 65424:return w=m,0|(y=1);default:return 0==(0|ut(a))&0==(0|M)?(l[y>>2]=64,mt(s,2,12690,m+16|0),w=m,0|(y=1)):(mt(s,1,12720,m+24|0),w=m,0|(y=0))}return 0}function ae(t,e,i,n,a,s,o){e|=0,i|=0,n|=0,a|=0,s|=0,o|=0;var c,h,u,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,S=0,E=0;if(u=w,w=w+112|0,E=u+96|0,h=u+88|0,c=u+80|0,S=u+72|0,A=u+64|0,x=u+56|0,b=u+48|0,g=u+40|0,m=u+32|0,p=u+24|0,f=u+16|0,y=0|l[80+(t|=0)>>2],8!=(0|l[t+8>>2]))return mt(o,1,12752,u),w=u,0|(E=0);if(!(n|i|a|s))return mt(o,4,12831,u+8|0),l[t+28>>2]=0,l[t+32>>2]=0,l[t+36>>2]=l[t+112>>2],l[t+40>>2]=l[t+116>>2],w=u,0|(E=1);if((d=0|l[(v=y+8|0)>>2])>>>0<i>>>0)return l[f>>2]=i,l[f+4>>2]=d,mt(o,1,12900,f),w=u,0|(E=0);if((d=0|l[y>>2])>>>0>i>>>0?(l[p>>2]=i,l[p+4>>2]=d,mt(o,2,12987,p),l[t+28>>2]=0,i=0|l[y>>2]):l[t+28>>2]=((i-(0|l[t+92>>2])|0)>>>0)/((0|l[t+100>>2])>>>0)|0,l[e>>2]=i,(i=0|l[(_=y+12|0)>>2])>>>0<n>>>0)return l[m>>2]=n,l[m+4>>2]=i,mt(o,1,13075,m),w=u,0|(E=0);if((i=0|l[(f=y+4|0)>>2])>>>0>n>>>0?(l[g>>2]=n,l[g+4>>2]=i,mt(o,2,13160,g),l[t+32>>2]=0,i=0|l[f>>2]):(l[t+32>>2]=((n-(0|l[t+96>>2])|0)>>>0)/((0|l[t+104>>2])>>>0)|0,i=n),l[(p=e+4|0)>>2]=i,(i=0|l[y>>2])>>>0>a>>>0)return l[b>>2]=a,l[b+4>>2]=i,mt(o,1,13246,b),w=u,0|(E=0);if((i=0|l[v>>2])>>>0<a>>>0?(l[x>>2]=a,l[x+4>>2]=i,mt(o,2,13335,x),l[t+36>>2]=l[t+112>>2],a=0|l[v>>2]):(x=0|l[t+100>>2],l[t+36>>2]=(a+-1-(0|l[t+92>>2])+x|0)/(0|x)|0),l[(d=e+8|0)>>2]=a,(a=0|l[f>>2])>>>0>s>>>0)return l[A>>2]=s,l[A+4>>2]=a,mt(o,1,13423,A),w=u,0|(E=0);(a=0|l[_>>2])>>>0<s>>>0?(l[S>>2]=s,l[S+4>>2]=a,mt(o,2,13513,S),l[t+40>>2]=l[t+116>>2],s=0|l[_>>2]):(S=0|l[t+104>>2],l[t+40>>2]=(s+-1-(0|l[t+96>>2])+S|0)/(0|S)|0),l[(S=e+12|0)>>2]=s,r[(A=t+76|0)>>0]=2|r[A>>0],A=0|l[e+16>>2],t=0|l[e>>2];t:do{if(A){for(x=(i=0|l[p>>2])-1|0,b=(a=0|l[d>>2])-1|0,v=t+-1|0,y=0,_=0|l[e+24>>2];;){if(g=(v+(e=0|l[_>>2])|0)/(0|e)|0,l[_+16>>2]=g,f=(x+(d=0|l[_+4>>2])|0)/(0|d)|0,l[_+20>>2]=f,e=(b+e|0)/(0|e)|0,m=0|Tr(1,0,0|(p=0|l[_+40>>2])),n=M,(0|(g=(e=0|Sr(0|(e=0|br(0|(e=0|br(0|e,((0|e)<0)<<31>>31|0,-1,-1)),0|M,0|m,0|n)),0|M,0|p))-(g=0|Sr(0|(g=0|br(0|(g=0|br(0|g,((0|g)<0)<<31>>31|0,-1,-1)),0|M,0|m,0|n)),0|M,0|p))|0))<0){d=29;break}if(e=(d+-1+(s=0|l[S>>2])|0)/(0|d)|0,l[_+8>>2]=g,(0|(f=(e=0|Sr(0|(e=0|br(0|(e=0|br(0|e,((0|e)<0)<<31>>31|0,-1,-1)),0|M,0|m,0|n)),0|M,0|p))-(f=0|Sr(0|(f=0|br(0|(f=0|br(0|f,((0|f)<0)<<31>>31|0,-1,-1)),0|M,0|m,0|n)),0|M,0|p))|0))<0){d=31;break}if(l[_+12>>2]=f,!((d=y+1|0)>>>0<A>>>0))break t;y=d,_=_+52|0}if(29==(0|d))return l[c>>2]=y,l[c+4>>2]=g,mt(o,1,13602,c),w=u,0|(E=0);if(31==(0|d))return l[h>>2]=y,l[h+4>>2]=f,mt(o,1,13671,h),w=u,0|(E=0)}else i=0|l[p>>2],a=0|l[d>>2],s=0|l[S>>2]}while(0);return l[E>>2]=t,l[E+4>>2]=i,l[E+8>>2]=a,l[E+12>>2]=s,mt(o,4,13740,E),w=u,0|(E=1)}function se(){var t,e=0,i=0;if(!(t=0|Ht(1,208)))return 0|(e=0);if(l[t>>2]=1,r[(e=t+184|0)>>0]=2|r[e>>0],e=0|Ht(1,5640),l[t+12>>2]=e,!e)return Xt(t),0|(e=0);if(e=0|Ht(1,1e3),l[t+16>>2]=e,!e)return Xt(t),0|(e=0);l[t+20>>2]=1e3,l[t+60>>2]=-1,l[(e=t+64|0)>>2]=0,l[e+4>>2]=0,e=0|Ht(1,48);do{if(0|e){if(l[e+32>>2]=100,l[e+24>>2]=0,i=0|Ht(100,24),l[e+28>>2]=i,!i){jt(e);break}return l[e+40>>2]=0,l[t+196>>2]=e,i=0|mi(),l[t+192>>2]=i,i?(i=0|mi(),l[t+188>>2]=i,0|i?0|(i=t):(Xt(t),0|(i=0))):(Xt(t),0|(i=0))}}while(0);return l[t+196>>2]=0,Xt(t),0|(i=0)}function oe(t,e,i){t|=0,i|=0;var n,r,a,s,o,c=0,h=0,u=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0;if(o=w,w=w+128|0,s=o+104|0,a=o+72|0,r=o+64|0,v=o+40|0,y=o+24|0,n=o+16|0,m=o+8|0,p=o,384&(e|=0)|0)return En(13778,11,1,i),void(w=o);if(1&e|0&&0|(f=0|l[t+80>>2])&&le(f,0,i),2&e|0&&0|l[(h=t+80|0)>>2]&&(En(13790,36,1,i),f=0|l[t+96>>2],l[p>>2]=l[t+92>>2],l[p+4>>2]=f,Wn(i,13827,p),p=0|l[t+104>>2],l[m>>2]=l[t+100>>2],l[m+4>>2]=p,Wn(i,13845,m),m=0|l[t+116>>2],l[n>>2]=l[t+112>>2],l[n+4>>2]=m,Wn(i,13863,n),ce(0|l[t+12>>2],0|l[16+(0|l[h>>2])>>2],i),En(13879,2,1,i)),8&e|0&&(g=0|C(0|l[t+112>>2],0|l[t+116>>2]),!(0==(0|(u=0|l[(_=t+80|0)>>2]))|0==(0|g)))&&(ce(c=0|l[t+164>>2],0|l[u+16>>2],i),1!=(0|g))){h=1;do{ce(c=c+5640|0,0|l[16+(0|l[_>>2])>>2],i),h=h+1|0}while((0|h)!=(0|g))}if(16&e){f=0|l[t+196>>2],En(13882,37,1,i),g=0|l[(e=f)+4>>2],_=0|l[(h=f+8|0)>>2],h=0|l[h+4>>2],l[(u=y)>>2]=l[e>>2],l[u+4>>2]=g,l[(u=y+8|0)>>2]=_,l[u+4>>2]=h,Wn(i,13920,y),En(13987,17,1,i),h=0|l[(u=f+28|0)>>2];t:do{if(0|h&&(b=f+24|0,0|l[b>>2]))for(c=0;;){if(e=0|l[(g=h+(24*c|0)+8|0)>>2],g=0|l[g+4>>2],y=0|l[h+(24*c|0)+16>>2],l[v>>2]=d[h+(24*c|0)>>1],l[(_=v+8|0)>>2]=e,l[_+4>>2]=g,l[v+16>>2]=y,Wn(i,14005,v),(c=c+1|0)>>>0>=(0|l[b>>2])>>>0)break t;h=0|l[u>>2]}}while(0);if(En(14036,4,1,i),0|(u=0|l[(m=f+40|0)>>2])&&0|(x=0|l[(A=f+36|0)>>2])){c=0,h=0;do{c=(0|l[u+(40*h|0)+4>>2])+c|0,h=h+1|0}while((0|h)!=(0|x));if(0|c){if(En(14041,16,1,i),0|l[A>>2]){p=0,c=0|l[m>>2];do{f=0|l[c+(40*p|0)+4>>2],l[r>>2]=p,l[r+4>>2]=f,Wn(i,14058,r),c=0|l[m>>2],u=0|l[c+(40*p|0)+16>>2];t:do{if(0!=(0|f)&0!=(0|u))for(h=0,c=u;;){if(g=0|l[(_=c+(24*h|0)|0)>>2],_=0|l[_+4>>2],y=0|l[(b=c+(24*h|0)+8|0)>>2],b=0|l[b+4>>2],v=0|l[(x=c+(24*h|0)+16|0)>>2],x=0|l[x+4>>2],l[a>>2]=h,l[(c=a+8|0)>>2]=g,l[c+4>>2]=_,l[(c=a+16|0)>>2]=y,l[c+4>>2]=b,l[(c=a+24|0)>>2]=v,l[c+4>>2]=x,Wn(i,14094,a),h=h+1|0,c=0|l[m>>2],(0|h)==(0|f))break t;c=0|l[c+(40*p|0)+16>>2]}}while(0);u=0|l[c+(40*p|0)+24>>2];t:do{if(0!=(0|u)&&0!=(0|l[c+(40*p|0)+20>>2]))for(h=0,c=u;;){if(b=0|l[(v=c+(24*h|0)+8|0)>>2],v=0|l[v+4>>2],x=0|l[c+(24*h|0)+16>>2],l[s>>2]=d[c+(24*h|0)>>1],l[(c=s+8|0)>>2]=b,l[c+4>>2]=v,l[s+16>>2]=x,Wn(i,14005,s),h=h+1|0,c=0|l[m>>2],h>>>0>=(0|l[c+(40*p|0)+20>>2])>>>0)break t;c=0|l[c+(40*p|0)+24>>2]}}while(0);p=p+1|0}while(p>>>0<(0|l[A>>2])>>>0)}En(14036,4,1,i)}}En(13879,2,1,i),w=o}else w=o}function le(t,e,i){t|=0,i|=0;var n,a,s,o,c,h,u=0,d=0,f=0;if(c=w,w=w+64|0,o=c+48|0,s=c+40|0,n=c+32|0,f=c+16|0,d=c,a=c+52|0,(e|=0)?(En(14455,36,1,0|l[665]),u=0):(En(14492,13,1,i),r[a>>0]=9,u=1),r[a+u>>0]=0,h=0|l[t>>2],u=0|l[t+4>>2],l[d>>2]=a,l[d+4>>2]=h,l[d+8>>2]=u,Wn(i,14506,d),u=0|l[t+8>>2],d=0|l[t+12>>2],l[f>>2]=a,l[f+4>>2]=u,l[f+8>>2]=d,Wn(i,14523,f),d=0|l[(f=t+16|0)>>2],l[n>>2]=a,l[n+4>>2]=d,Wn(i,14540,n),!(0|l[(d=t+24|0)>>2]))return En(13879,2,1,i),void(w=c);if(!(0|l[f>>2]))return En(13879,2,1,i),void(w=c);u=0;do{l[s>>2]=a,l[s+4>>2]=u,Wn(i,14556,s),he((0|l[d>>2])+(52*u|0)|0,e,i),l[o>>2]=a,Wn(i,14576,o),u=u+1|0}while(u>>>0<(0|l[f>>2])>>>0);En(13879,2,1,i),w=c}function ce(t,e,i){e|=0,i|=0;var n,r,a,s,o,c,h,u,d,f,p,m,g,_=0,y=0,b=0,v=0,x=0,A=0;if(g=w,w=w+128|0,m=g+120|0,p=g+112|0,f=g+104|0,d=g+96|0,u=g+88|0,h=g+80|0,c=g+72|0,o=g+64|0,s=g+56|0,a=g+48|0,r=g+40|0,n=g+32|0,v=g+24|0,b=g+16|0,y=g+8|0,_=g,t|=0){if(En(14160,17,1,i),l[_>>2]=l[t>>2],Wn(i,14178,_),l[y>>2]=l[t+4>>2],Wn(i,14191,y),l[b>>2]=l[t+8>>2],Wn(i,14203,b),l[v>>2]=l[t+16>>2],Wn(i,14220,v),(0|e)>0){b=t+5584|0,y=0;do{if(v=0|l[b>>2],l[n>>2]=y,Wn(i,14231,n),l[r>>2]=l[v+(1080*y|0)>>2],Wn(i,14245,r),_=v+(1080*y|0)+4|0,l[a>>2]=l[_>>2],Wn(i,14259,a),l[s>>2]=l[v+(1080*y|0)+8>>2],Wn(i,14282,s),l[o>>2]=l[v+(1080*y|0)+12>>2],Wn(i,14298,o),l[c>>2]=l[v+(1080*y|0)+16>>2],Wn(i,14314,c),l[h>>2]=l[v+(1080*y|0)+20>>2],Wn(i,14331,h),En(14346,23,1,i),0|l[_>>2]){t=0;do{A=0|l[v+(1080*y|0)+944+(t<<2)>>2],l[u>>2]=l[v+(1080*y|0)+812+(t<<2)>>2],l[u+4>>2]=A,Wn(i,14370,u),t=t+1|0}while(t>>>0<(0|l[_>>2])>>>0)}if(mr(10,i),A=v+(1080*y|0)+24|0,l[d>>2]=l[A>>2],Wn(i,14379,d),l[f>>2]=l[v+(1080*y|0)+804>>2],Wn(i,14394,f),En(14411,20,1,i),1!=(0|l[A>>2])?(0|(t=3*(0|l[_>>2])|0))>2&&(_=t+-2|0,x=8):(_=1,x=8),8==(0|x)){x=0,t=0;do{A=0|l[v+(1080*y|0)+28+(t<<3)>>2],l[p>>2]=l[v+(1080*y|0)+28+(t<<3)+4>>2],l[p+4>>2]=A,Wn(i,14370,p),t=t+1|0}while((0|t)!=(0|_))}mr(10,i),l[m>>2]=l[v+(1080*y|0)+808>>2],Wn(i,14432,m),En(14449,5,1,i),y=y+1|0}while((0|y)!=(0|e))}En(14036,4,1,i),w=g}else w=g}function he(t,e,i){t|=0,i|=0;var n,a,s,o,c,h=0,u=0;o=w,w=w+48|0,s=o+24|0,u=o+16|0,h=o,a=o+32|0,(n=0!=(0|(e|=0)))?(En(14581,41,1,0|l[665]),e=0):(r[a>>0]=9,r[a+1>>0]=9,e=2),r[a+e>>0]=0,c=0|l[t>>2],e=0|l[t+4>>2],l[h>>2]=a,l[h+4>>2]=c,l[h+8>>2]=e,Wn(i,14623,h),h=0|l[t+24>>2],l[u>>2]=a,l[u+4>>2]=h,Wn(i,14640,u),u=0|l[t+32>>2],l[s>>2]=a,l[s+4>>2]=u,Wn(i,14652,s),n?(En(13879,2,1,i),w=o):w=o}function ue(t){var e,i,n,r,a,s=0,o=0,c=0,h=0,u=0;if(a=w,w=w+16|0,o=a,r=0|l[16+(0|l[(s=80+(t|=0)|0)>>2])>>2],e=0|Ht(1,56),l[o>>2]=e,!e)return w=a,0|(u=0);if(s=0|l[16+(0|l[s>>2])>>2],l[e+24>>2]=s,l[e>>2]=l[t+92>>2],l[e+4>>2]=l[t+96>>2],l[e+8>>2]=l[t+100>>2],l[e+12>>2]=l[t+104>>2],l[e+16>>2]=l[t+112>>2],l[e+20>>2]=l[t+116>>2],l[e+52>>2]=0,t=0|l[t+12>>2],l[e+32>>2]=l[t>>2],l[e+36>>2]=l[t+4>>2],l[e+40>>2]=l[t+8>>2],l[e+44>>2]=l[t+16>>2],s=0|Ht(s,1080),l[(n=e+48|0)>>2]=s,!s)return St(o),w=a,0|(u=0);if(!r)return w=a,0|(u=e);for(i=t+5584|0,t=0;;){if(h=0|l[i>>2],l[s+(1080*t|0)+4>>2]=l[h+(1080*t|0)>>2],c=0|l[(o=h+(1080*t|0)+4|0)>>2],l[s+(1080*t|0)+8>>2]=c,l[s+(1080*t|0)+12>>2]=l[h+(1080*t|0)+8>>2],l[s+(1080*t|0)+16>>2]=l[h+(1080*t|0)+12>>2],l[s+(1080*t|0)+20>>2]=l[h+(1080*t|0)+16>>2],l[s+(1080*t|0)+24>>2]=l[h+(1080*t|0)+20>>2],c>>>0<33&&(Cr(s+(1080*t|0)+948|0,h+(1080*t|0)+944|0,0|c),Cr(s+(1080*t|0)+816|0,h+(1080*t|0)+812|0,0|l[o>>2])),c=0|l[h+(1080*t|0)+24>>2],l[s+(1080*t|0)+28>>2]=c,l[s+(1080*t|0)+808>>2]=l[h+(1080*t|0)+804>>2],1!=(0|c)?((o=3*(0|l[o>>2])|0)-3|0)>>>0<96&&(c=o+-2|0,u=10):(c=1,u=10),10==(0|u)){u=0,o=0;do{l[s+(1080*t|0)+32+(o<<2)>>2]=l[h+(1080*t|0)+28+(o<<3)+4>>2],l[s+(1080*t|0)+420+(o<<2)>>2]=l[h+(1080*t|0)+28+(o<<3)>>2],o=o+1|0}while((0|o)!=(0|c))}if(l[s+(1080*t|0)+812>>2]=l[h+(1080*t|0)+808>>2],(0|(t=t+1|0))==(0|r))break;s=0|l[n>>2]}return w=a,0|e}function de(t){t|=0;var e,i,n,r=0,a=0,s=0,o=0,c=0,h=0;if(!(e=0|Ht(1,48)))return 0|(h=0);if(r=0|l[(n=t+196|0)>>2],h=0|l[(c=r)+4>>2],l[(t=e)>>2]=l[c>>2],l[t+4>>2]=h,h=0|l[4+(t=r+8|0)>>2],l[(c=e+8|0)>>2]=l[t>>2],l[c+4>>2]=h,h=0|l[4+(c=r+16|0)>>2],l[(t=e+16|0)>>2]=l[c>>2],l[t+4>>2]=h,r=0|l[r+24>>2],l[(t=e+24|0)>>2]=r,r=0|zt(24*r|0),l[(h=e+28|0)>>2]=r,!r)return jt(e),0|(h=0);if((a=0|l[28+(0|l[n>>2])>>2])?Cr(0|r,0|a,24*(0|l[t>>2])|0):(jt(r),l[h>>2]=0),t=0|l[36+(0|l[n>>2])>>2],l[(i=e+36|0)>>2]=t,t=0|Ht(t,40),l[(c=e+40|0)>>2]=t,!t)return jt(0|l[h>>2]),jt(e),0|(h=0);if(!(r=0|l[40+(0|l[n>>2])>>2]))return jt(t),l[c>>2]=0,0|(h=e);if(!(0|l[i>>2]))return 0|(h=e);r=0|l[r+20>>2],l[t+20>>2]=r,r=0|zt(24*r|0),t=0|l[c>>2],l[t+24>>2]=r;t:do{if(r){for(a=0;(s=0|l[(0|l[40+(0|l[n>>2])>>2])+(40*a|0)+24>>2])?(Cr(0|r,0|s,24*(0|l[t+(40*a|0)+20>>2])|0),t=0|l[c>>2]):(jt(r),t=0|l[c>>2],l[t+(40*a|0)+24>>2]=0),r=0|l[(0|l[40+(0|l[n>>2])>>2])+(40*a|0)+4>>2],l[t+(40*a|0)+4>>2]=r,r=0|zt(24*r|0),t=0|l[c>>2],l[t+(40*a|0)+16>>2]=r,r;){if((s=0|l[(0|l[40+(0|l[n>>2])>>2])+(40*a|0)+16>>2])?(Cr(0|r,0|s,24*(0|l[t+(40*a|0)+4>>2])|0),t=0|l[c>>2]):(jt(r),t=0|l[c>>2],l[t+(40*a|0)+16>>2]=0),l[t+(40*a|0)+32>>2]=0,l[t+(40*a|0)+36>>2]=0,(a=a+1|0)>>>0>=(0|l[i>>2])>>>0){o=28;break}if(r=0|l[(0|l[40+(0|l[n>>2])>>2])+(40*a|0)+20>>2],l[t+(40*a|0)+20>>2]=r,r=0|zt(24*r|0),t=0|l[c>>2],l[t+(40*a|0)+24>>2]=r,!r)break t}if(28==(0|o))return 0|e;if(a){r=0;do{jt(0|l[t+(40*r|0)+24>>2]),jt(0|l[(0|l[c>>2])+(40*r|0)+16>>2]),r=r+1|0,t=0|l[c>>2]}while((0|r)!=(0|a))}return jt(t),jt(0|l[h>>2]),jt(e),0|(h=0)}a=0}while(0);if(a){r=0;do{jt(0|l[t+(40*r|0)+24>>2]),r=r+1|0,t=0|l[c>>2]}while((0|r)!=(0|a))}return jt(t),jt(0|l[h>>2]),jt(e),0|(h=0)}function fe(t,e,i,n){t|=0,e|=0,n|=0;var r,a,s=0,o=0,c=0,h=0;if(!(i|=0))return 0|(i=0);if(s=0|bt(),l[(a=t+84|0)>>2]=s,!s)return 0|(i=0);if(vt(i,s),_i(0|l[(h=t+188|0)>>2],28,n),r=0|yi(h=0|l[h>>2]),s=0|bi(h),r){for(o=1,c=0;o=o?0!=(0|qr[63&l[s>>2]](t,e,n)):0,(0|(c=c+1|0))!=(0|r);)s=s+4|0,o&=1;if(vi(h),!o)return yt(0|l[(i=t+80|0)>>2]),l[i>>2]=0,0|(i=0)}else vi(h);if(!(h=0|l[i+16>>2]))return 0|(i=1);c=0|l[24+(0|l[a>>2])>>2],o=0|l[i+24>>2],s=0;do{l[o+(52*s|0)+36>>2]=l[c+(52*s|0)+36>>2],i=c+(52*s|0)+44|0,l[o+(52*s|0)+44>>2]=l[i>>2],l[i>>2]=0,s=s+1|0}while(s>>>0<h>>>0);return 0|(s=1)}function pe(t,e,i,n){t|=0,i|=0,n|=0;var a=0,o=0,c=0,u=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,w=0,x=0,A=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0;if(!(0|l[(B=16+(e|=0)|0)>>2]))return 0|(B=1);for(P=0,k=0|l[e+24>>2];;){if(u=n+8|0,e=0|l[(c=n+44|0)>>2])o=n+12|0;else{if(e=0|l[u>>2],!(a=0|l[(o=n+12|0)>>2])){i=0,t=66;break}if(e>>>0>(4294967295/(a>>>0)|0)>>>0){i=0,t=66;break}if(e=0|Ht(0|C(a,e),4),l[c>>2]=e,!e){i=0,t=66;break}}p=k+36|0,l[n+36>>2]=l[p>>2],w=0|l[k+24>>2],b=0|l[t+24>>2],p=0|l[p>>2],x=3==(0|(w=(w>>>3)+(0!=(7&w|0)&1)|0)),S=(f=0|l[b+(136*p|0)+8>>2])-(a=0|l[b+(136*p|0)>>2])|0,b=(y=0|l[b+(136*p|0)+12>>2])-(p=0|l[b+(136*p|0)+4>>2])|0,c=0|l[n+16>>2],g=0|Tr(1,0,0|(m=0|l[n+40>>2])),I=M,c=0|Er(0|(c=0|br(0|(c=0|br(0|c,0,-1,-1)),0|M,0|g,0|I)),0|M,0|m),m=0|Er(0|(I=0|br(0|(T=0|br(0|l[n+20>>2],0,-1,-1)),0|M,0|g,0|I)),0|M,0|m),u=(I=0|l[u>>2])+c|0,g=(o=0|l[o>>2])+m|0;do{if(a>>>0<=c>>>0){if(a=c-a|0,f>>>0>u>>>0){T=I,A=a,_=0,v=f-u|0;break}T=S-a|0,A=a,_=0,v=0;break}v=u-a|0,T=(E=f>>>0>u>>>0)?v:S,A=0,_=a-c|0,v=E?S-v|0:0}while(0);do{if(p>>>0<=m>>>0){if(a=m-p|0,y>>>0>g>>>0){E=o,f=a,c=0,a=y-g|0;break}E=b-a|0,f=a,c=0,a=0;break}a=g-p|0,E=(y=y>>>0>g>>>0)?a:b,f=0,c=p-m|0,a=y?b-a|0:0}while(0);if((A|v|T|a|f|E|0)<0){i=0,t=66;break}switch(o=(u=0|C(f,S))+A|0,m=A+v|0,g=(0|C(a,S))-A|0,c=e+((0|C(I,c))+_<<2)|0,1073741823&(x?4:w)|0){case 1:a=i+o|0,e=0!=(0|E);do{if(0|l[k+32>>2])if(e){if(!T){i=i+(v+u+(0|C(m,E+-1|0))+(A<<1))|0;break}for(p=T+v+u+(0|C(T+A+v|0,E+-1|0))+(A<<1)|0,e=a,o=0;;){for(f=e+T|0,u=0,a=c;l[a>>2]=r[e>>0],(0|(u=u+1|0))!=(0|T);)e=e+1|0,a=a+4|0;if((0|(o=o+1|0))==(0|E))break;e=f+m|0,c=c+(I<<2)|0}i=i+p|0}else i=a;else if(e){if(!T){i=i+(v+u+(0|C(m,E+-1|0))+(A<<1))|0;break}for(p=T+v+u+(0|C(T+A+v|0,E+-1|0))+(A<<1)|0,f=0,e=a;;){for(u=e+T|0,o=0,a=c;l[a>>2]=h[e>>0],(0|(o=o+1|0))!=(0|T);)e=e+1|0,a=a+4|0;if((0|(f=f+1|0))==(0|E))break;e=u+m|0,c=c+(I<<2)|0}i=i+p|0}else i=a}while(0);i=i+g|0;break;case 2:e=i+(o<<1)|0,a=0!=(0|E);do{if(0|l[k+32>>2])if(a){if(!T){i=i+((0|C(f<<1,S))+(0|C(m<<1,E+-1|0))+(A<<2)+(v<<1))|0;break}for(i=i+((0|C(T+m<<1,E+-1|0))+(A<<2)+(T+v+u<<1))|0,f=0;;){for(u=e+(T<<1)|0,a=0,o=c;l[o>>2]=s[e>>1],(0|(a=a+1|0))!=(0|T);)e=e+2|0,o=o+4|0;if((0|(f=f+1|0))==(0|E))break;e=u+(m<<1)|0,c=c+(I<<2)|0}}else i=e;else if(a){if(!T){i=i+((0|C(f<<1,S))+(0|C(m<<1,E+-1|0))+(A<<2)+(v<<1))|0;break}for(i=i+((0|C(T+m<<1,E+-1|0))+(A<<2)+(T+v+u<<1))|0,f=0;;){for(u=e+(T<<1)|0,o=0,a=c;l[a>>2]=d[e>>1],(0|(o=o+1|0))!=(0|T);)e=e+2|0,a=a+4|0;if((0|(f=f+1|0))==(0|E))break;e=u+(m<<1)|0,c=c+(I<<2)|0}}else i=e}while(0);i=i+(g<<1)|0;break;case 4:e=i+(o<<2)|0;do{if(E){if(!T){i=i+((0|C(f<<2,S))+(0|C(m<<2,E+-1|0))+(A<<3)+(v<<2))|0;break}for(i=i+((0|C(T+m<<2,E+-1|0))+(A<<3)+(T+v+u<<2))|0,f=0;;){for(u=e+(T<<2)|0,a=0,o=c;l[o>>2]=l[e>>2],(0|(a=a+1|0))!=(0|T);)e=e+4|0,o=o+4|0;if((0|(f=f+1|0))==(0|E))break;e=u+(m<<2)|0,c=c+(I<<2)|0}}else i=e}while(0);i=i+(g<<2)|0}if((P=P+1|0)>>>0>=(0|l[B>>2])>>>0){i=1,t=66;break}t=t+52|0,n=n+52|0,k=k+52|0}return 66==(0|t)?0|i:0}function me(t,e,i,n,r){t|=0,e|=0,n|=0,r|=0;var a,s,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,S=0,E=0;if(s=w,w=w+16|0,h=s+8|0,!(i|=0))return mt(n,1,14842,s),w=s,0|(y=0);if(c=0|l[t+112>>2],(o=0|C(0|l[t+116>>2],c))>>>0<=r>>>0)return l[h>>2]=r,l[h+4>>2]=o+-1,mt(n,1,14880,h),w=s,0|(y=0);if(y=(r>>>0)%(c>>>0)|0,_=(r>>>0)/(c>>>0)|0,o=(o=0|C(0|l[(c=t+100|0)>>2],y))+(0|l[(h=t+92|0)>>2])|0,l[i>>2]=o,o=o>>>0<(u=0|l[l[(a=t+80|0)>>2]>>2])>>>0?u:o,l[i>>2]=o,h=(y=0|C(0|l[c>>2],y+1|0))+(0|l[h>>2])|0,l[(y=i+8|0)>>2]=h,h=h>>>0>(c=0|l[8+(0|l[a>>2])>>2])>>>0?c:h,l[y>>2]=h,c=(c=0|C(0|l[(y=t+104|0)>>2],_))+(0|l[(u=t+96|0)>>2])|0,l[(m=i+4|0)>>2]=c,c=c>>>0<(g=0|l[4+(0|l[a>>2])>>2])>>>0?g:c,l[m>>2]=c,u=(_=0|C(0|l[y>>2],_+1|0))+(0|l[u>>2])|0,l[(_=i+12|0)>>2]=u,u=u>>>0>(y=0|l[12+(0|l[a>>2])>>2])>>>0?y:u,l[_>>2]=u,_=i+24|0,0|(m=0|l[(y=i+16|0)>>2]))for(g=0|l[24+(0|l[a>>2])>>2],p=o+-1|0,f=c+-1|0,d=h+-1|0,h=u+-1|0,o=0,c=0|l[_>>2];u=0|l[g+(52*o|0)+40>>2],l[c+40>>2]=u,S=(p+(E=0|l[c>>2])|0)/(0|E)|0,l[c+16>>2]=S,A=(f+(b=0|l[c+4>>2])|0)/(0|b)|0,l[c+20>>2]=A,E=(d+E|0)/(0|E)|0,b=(h+b|0)/(0|b)|0,x=0|Tr(1,0,0|u),v=M,E=0|Sr(0|(E=0|br(0|(E=0|br(0|E,((0|E)<0)<<31>>31|0,-1,-1)),0|M,0|x,0|v)),0|M,0|u),S=0|Sr(0|(S=0|br(0|(S=0|br(0|S,((0|S)<0)<<31>>31|0,-1,-1)),0|M,0|x,0|v)),0|M,0|u),l[c+8>>2]=E-S,b=0|Sr(0|(b=0|br(0|(b=0|br(0|b,((0|b)<0)<<31>>31|0,-1,-1)),0|M,0|x,0|v)),0|M,0|u),u=0|Sr(0|(v=0|br(0|(A=0|br(0|A,((0|A)<0)<<31>>31|0,-1,-1)),0|M,0|x,0|v)),0|M,0|u),l[c+12>>2]=b-u,!((o=o+1|0)>>>0>=m>>>0);)c=c+52|0;if(0|(o=0|l[(f=t+84|0)>>2])&&yt(o),o=0|bt(),l[f>>2]=o,!o)return w=s,0|(E=0);if(vt(i,o),l[t+60>>2]=r,_i(0|l[(u=t+188|0)>>2],29,n),d=0|yi(u=0|l[u>>2]),o=0|bi(u),d){for(c=1,h=0;c=c?0!=(0|qr[63&l[o>>2]](t,e,n)):0,(0|(h=h+1|0))!=(0|d);)o=o+4|0,c&=1;if(vi(u),!c)return yt(0|l[a>>2]),l[a>>2]=0,w=s,0|(E=0)}else vi(u);if(!(o=0|l[y>>2]))return w=s,0|(E=1);for(d=0,u=0|l[24+(0|l[f>>2])>>2],h=0|l[_>>2];;){if(l[h+(52*d|0)+36>>2]=l[u+(52*d|0)+36>>2],(c=0|l[h+(52*d|0)+44>>2])?(jt(c),c=0|l[24+(0|l[f>>2])>>2],h=0|l[_>>2],o=0|l[y>>2]):c=u,E=c+(52*d|0)+44|0,l[h+(52*d|0)+44>>2]=l[E>>2],l[E>>2]=0,(d=d+1|0)>>>0>=o>>>0){o=1;break}u=c}return w=s,0|o}function ge(t,e,i){e|=0,i|=0;var n,r,a,s=0,o=0,c=0,h=0;a=w,w=w+16|0,r=a,l[168+(t|=0)>>2]=e,n=0|l[t+80>>2];t:do{if(0!=(0|n)&&(h=0|l[n+24>>2],0!=(0|h))&&(c=t+12|0,s=0|l[c>>2],0!=(0|s))&&(o=0|l[s+5584>>2],0!=(0|o)))if(s=0|l[n+16>>2]){if((0|l[o+4>>2])>>>0>e>>>0){t=0;do{if(l[h+(52*t|0)+40>>2]=e,(t=t+1|0)>>>0>=s>>>0){t=1;break t}}while((0|l[(0|l[5584+(0|l[c>>2])>>2])+(1080*t|0)+4>>2])>>>0>e>>>0)}mt(i,1,15074,r),t=0}else t=1;else t=0}while(0);return w=a,0|t}function _e(t,e,i){e|=0,i|=0;var n,a,o,c,h,u,d,f,p,m,g,_,y,b,v,x,A,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0;if(A=w,w=w+48|0,x=A+32|0,v=A+24|0,b=A+16|0,y=A+8|0,_=A,M=0|l[(f=204+(t|=0)|0)>>2],p=t+116|0,a=1==(0|(g=0|C(0|l[(m=t+112|0)>>2],0|l[p>>2]))),!g)return w=A,0|(V=1);o=t+200|0,c=t+12|0,h=t+164|0,u=t+8|0,d=M+20|0,n=M+24|0,U=0,P=0,M=0;t:for(;;){if((0|l[o>>2])!=(0|U)){V=5;break}if(z=U,U=U+1|0,H=0|C(0|l[p>>2],0|l[m>>2]),l[y>>2]=U,l[y+4>>2]=H,mt(i,4,15187,y),l[c>>2]=0,H=0|l[f>>2],l[H+12>>2]=l[(0|l[h>>2])+(5640*z|0)+5588>>2],l[u>>2]=0,!(0|ei(H,0|l[o>>2],i)))break;if(S=0|l[f>>2],k=0|l[16+(0|l[S+24>>2])>>2])if(a){T=0|l[20+(0|l[l[d>>2]>>2])>>2],I=0|l[24+(0|l[n>>2])>>2],E=0;do{l[T+(52*E|0)+32>>2]=l[I+(52*E|0)+44>>2],l[T+(52*E|0)+36>>2]=0,E=E+1|0}while(E>>>0<k>>>0)}else{E=0;do{if(!(0|ti((0|l[20+(0|l[l[d>>2]>>2])>>2])+(52*E|0)|0))){V=14;break t}E=E+1|0,S=0|l[f>>2]}while(E>>>0<(0|l[16+(0|l[S+24>>2])>>2])>>>0)}if(H=0|si(S),a)S=P;else{if(H>>>0>M>>>0){if(!(M=0|Wt(P,H))){V=20;break}S=M,M=H}else S=P;if(E=0|l[f>>2],T=0|l[(z=E+24|0)>>2],0|l[T+16>>2]){N=E+20|0,E=S,F=0;do{R=0|l[20+(0|l[l[N>>2]>>2])>>2],B=0|l[T+24>>2],W=((W=0|l[B+(52*F|0)+24>>2])>>>3)+(0!=(7&W|0)&1)|0,O=(k=0|l[R+(52*F|0)+8>>2])-(P=0|l[R+(52*F|0)>>2])|0,G=(L=0|l[R+(52*F|0)+12>>2])-(R=0|l[R+(52*F|0)+4>>2])|0,Z=0|l[T>>2],j=0|l[B+(52*F|0)>>2],I=0|l[B+(52*F|0)+4>>2],D=(j+~Z+(0|l[T+8>>2])|0)/(0|j)|0,I=P-((Z+-1+j|0)/(0|j)|0)+(0|C(D,R-(((0|l[T+4>>2])-1+I|0)/(0|I)|0)|0))|0,I=(0|l[B+(52*F|0)+44>>2])+(I<<2)|0;e:do{switch(1073741823&(3==(0|W)?4:W)|0){case 1:if(T=0==(0|O)|0==(0|G),0|l[B+(52*F|0)+32>>2]){if(T)break e;for(R=L+-1-R|0,L=E,T=I,I=0;;){for(k=0,P=L,B=T;r[P>>0]=l[B>>2],(0|(k=k+1|0))!=(0|O);)P=P+1|0,B=B+4|0;if((0|(I=I+1|0))==(0|G))break;L=L+O|0,T=T+(D<<2)|0}E=E+(O+(0|C(R,O)))|0;break e}if(T)break e;for(R=L+-1-R|0,B=0,L=E;;){for(T=0,k=L,P=I;r[k>>0]=l[P>>2],(0|(T=T+1|0))!=(0|O);)k=k+1|0,P=P+4|0;if((0|(B=B+1|0))==(0|G))break;L=L+O|0,I=I+(D<<2)|0}E=E+(O+(0|C(R,O)))|0;break e;case 2:if(T=0==(0|O)|0==(0|G),0|l[B+(52*F|0)+32>>2]){if(T)break e;for(R=(B=k-P<<1)+(0|C(L+-1-R|0,B))|0,B=E,L=0;;){for(T=B,k=0,P=I;s[T>>1]=l[P>>2],(0|(k=k+1|0))!=(0|O);)T=T+2|0,P=P+4|0;if((0|(L=L+1|0))==(0|G))break;B=B+(O<<1)|0,I=I+(D<<2)|0}E=E+R|0;break e}if(T)break e;for(R=(B=k-P<<1)+(0|C(L+-1-R|0,B))|0,B=E,L=0;;){for(T=0,k=B,P=I;s[k>>1]=l[P>>2],(0|(T=T+1|0))!=(0|O);)k=k+2|0,P=P+4|0;if((0|(L=L+1|0))==(0|G))break;B=B+(O<<1)|0,I=I+(D<<2)|0}E=E+R|0;break e;case 4:if(!(0==(0|O)|0==(0|G))){for(R=(B=k-P<<2)+(0|C(L+-1-R|0,B))|0,B=E,L=0;;){for(T=B,k=0,P=I;l[T>>2]=l[P>>2],(0|(k=k+1|0))!=(0|O);)T=T+4|0,P=P+4|0;if((0|(L=L+1|0))==(0|G))break;B=B+(O<<2)|0,I=I+(D<<2)|0}E=E+R|0}}}while(0);F=F+1|0,T=0|l[z>>2]}while(F>>>0<(0|l[T+16>>2])>>>0);E=0|l[f>>2]}if(!(0|oi(E,S,H))){V=61;break}}if(!(0|ye(t,e,i))){V=63;break}if(U>>>0>=g>>>0){V=65;break}P=S}if(5==(0|V))mt(i,1,15150,_);else{if(14==(0|V))return mt(i,1,15208,b),P?(jt(P),w=A,0|(Z=0)):(w=A,0|(Z=0));if(20==(0|V))return 0|P&&jt(P),mt(i,1,15246,v),w=A,0|(Z=0);if(61==(0|V))return mt(i,1,15285,x),jt(S),w=A,0|(Z=0);if(63==(0|V))return S?(jt(S),w=A,0|(Z=0)):(w=A,0|(Z=0));if(65==(0|V))return S?(jt(S),w=A,0|(Z=1)):(w=A,0|(Z=1))}return P?(jt(P),w=A,0|(Z=0)):(w=A,0|(Z=0))}function ye(t,e,i){e|=0,i|=0;var n,r,a,o,c,h,u,d,f,p,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,C=0,k=0,P=0,B=0,L=0,R=0;if(p=w,w=w+32|0,u=p+16|0,C=p+8|0,v=p,h=p+20|0,f=0|l[40+(t|=0)>>2],A=0|l[(L=t+36|0)>>2],b=0|l[(M=t+204|0)>>2],l[b+16>>2]=0,l[(a=t+8|0)>>2]=0,it(A,65424,2),it(A+2|0,10,2),it(A+4|0,0|l[(d=t+200|0)>>2],2),it(A+10|0,0|l[(o=t+12|0)>>2],1),it(A+11|0,0|l[(0|l[(c=t+164|0)>>2])+(5640*(0|l[d>>2])|0)+5588>>2],1),l[h>>2]=12,g=A+12|0,m=f+-12|0,((0|s[(x=t+88|0)>>1])-3&65535)>=4&&(_=0|l[c>>2],y=0|l[d>>2],0!=(0|l[_+(5640*y|0)+420>>2]))?(l[h>>2]=0,be(0|l[16+(0|l[t+80>>2])>>2],_,y,g,h),_=12+(B=0|l[h>>2])|0,g=g+B|0,m=m-B|0):_=12,l[h>>2]=0,it(g,65427,2),l[b+4>>2]=l[a>>2],l[b+8>>2]=l[o>>2],0|l[o>>2]||(l[840+(0|l[l[b+20>>2]>>2])>>2]=0),l[h>>2]=0,!(0|ni(b,0|l[d>>2],g+2|0,h,m+-4|0,0)))return mt(i,1,15332,v),w=p,0|(L=0);m=2+(0|l[h>>2])|0,l[h>>2]=m,it(A+6|0,m=m+_|0,4),((0|s[x>>1])-3&65535)<4&&(it(0|l[(B=t+28|0)>>2],0|l[d>>2],1),P=1+(0|l[B>>2])|0,l[B>>2]=P,it(P,m,4),l[B>>2]=4+(0|l[B>>2])),_=A+m|0,B=f-m|0,n=0|l[M>>2],r=t+88|0,T=0|l[c>>2],x=0|ve(r,0,I=0|l[d>>2]),P=t+8|0,l[o>>2]=1+(0|l[o>>2]);t:do{if(x>>>0>1){for(A=n+4|0,M=n+8|0,S=n+20|0,E=t+28|0,b=_,g=B,m=0,v=1;l[P>>2]=v,l[h>>2]=0,it(b,65424,2),it(b+2|0,10,2),it(b+4|0,0|l[d>>2],2),it(b+10|0,0|l[o>>2],1),it(b+11|0,0|l[(0|l[c>>2])+(5640*(0|l[d>>2])|0)+5588>>2],1),_=b+12|0,l[h>>2]=0,it(_,65427,2),l[A>>2]=l[a>>2],l[M>>2]=l[o>>2],0|l[o>>2]||(l[840+(0|l[l[S>>2]>>2])>>2]=0),l[h>>2]=0,0|ni(n,0|l[d>>2],b+14|0,h,g+-16|0,0);){if(R=2+(y=0|l[h>>2])|0,l[h>>2]=R,_=_+R|0,m=m+12+R|0,g=g+-12+(-2-y)|0,it(b+6|0,y=y+14|0,4),((0|s[r>>1])-3&65535)<4&&(it(0|l[E>>2],0|l[d>>2],1),R=1+(0|l[E>>2])|0,l[E>>2]=R,it(R,y,4),l[E>>2]=4+(0|l[E>>2])),l[o>>2]=1+(0|l[o>>2]),(v=v+1|0)>>>0>=x>>>0){k=12;break t}b=_}mt(i,1,15332,C)}else g=B,m=0,k=12}while(0);t:do{if(12==(0|k)){S=T+(5640*I|0)+420|0;e:do{if(0|l[S>>2]){E=n+16|0,T=n+4|0,I=n+8|0,C=n+20|0,M=t+28|0,A=1;i:for(;;){if(l[E>>2]=A,x=0|ve(r,A,0|l[d>>2]))for(v=0;;){if(l[P>>2]=v,l[h>>2]=0,it(_,65424,2),it(_+2|0,10,2),it(_+4|0,0|l[d>>2],2),it(_+10|0,0|l[o>>2],1),it(_+11|0,0|l[(0|l[c>>2])+(5640*(0|l[d>>2])|0)+5588>>2],1),y=_+12|0,l[h>>2]=0,it(y,65427,2),l[T>>2]=l[a>>2],l[I>>2]=l[o>>2],0|l[o>>2]||(l[840+(0|l[l[C>>2]>>2])>>2]=0),l[h>>2]=0,!(0|ni(n,0|l[d>>2],_+14|0,h,g+-16|0,0)))break i;if(b=2+(R=0|l[h>>2])|0,l[h>>2]=b,m=m+12+b|0,b=y+b|0,g=g+-12+(-2-R)|0,it(_+6|0,y=R+14|0,4),((0|s[r>>1])-3&65535)<4&&(it(0|l[M>>2],0|l[d>>2],1),R=1+(0|l[M>>2])|0,l[M>>2]=R,it(R,y,4),l[M>>2]=4+(0|l[M>>2])),l[o>>2]=1+(0|l[o>>2]),(v=v+1|0)>>>0>=x>>>0){_=b;break}_=b}if((A=A+1|0)>>>0>(0|l[S>>2])>>>0)break e}mt(i,1,15332,u);break t}}while(0);return R=m-B+f|0,(0|ct(e,0|l[L>>2],R,i))!=(0|R)?(w=p,0|(R=0)):(l[d>>2]=1+(0|l[d>>2]),w=p,0|(R=1))}}while(0);return w=p,0|(R=0)}function be(t,e,i,n,r){t|=0,n|=0,r|=0;var a,s,o,c,h=0,u=0,d=0,f=0,p=0,m=0;if(h=0|l[(e|=0)+(5640*(i|=0)|0)+5584>>2],c=1+(0|l[e+(5640*i|0)+420>>2])|0,o=4+(u=0|C(c,5+((s=t>>>0<257?1:2)<<1)|0))|0,it(n,65375,2),it(n+2|0,u+2|0,2),c){for(u=e+(5640*i|0)+8|0,a=h+4|0,e=e+(5640*i|0)+424|0,i=0,h=n+4|0;it(h,0|l[e>>2],1),it(h=h+1|0,0|l[e+4>>2],s),it(h=h+s|0,0|l[(p=e+8|0)>>2],2),it(h=h+2|0,0|l[(d=e+12|0)>>2],1),it(h=h+1|0,0|l[(n=e+16|0)>>2],s),it(h=h+s|0,0|l[e+36>>2],1),m=0|l[p>>2],f=0|l[u>>2],l[p>>2]=(0|m)<(0|f)?m:f,p=0|l[d>>2],f=0|l[a>>2],l[d>>2]=(0|p)<(0|f)?p:f,d=0|l[n>>2],l[n>>2]=(0|d)<(0|t)?d:t,(0|(i=i+1|0))!=(0|c);)e=e+148|0,h=h+1|0;l[r>>2]=o}else l[r>>2]=o}function ve(t,e,i){e|=0,i|=0;var n,a,s=0,o=0,c=0,u=0,d=0,f=0;for(c=0|l[76+(t|=0)>>2],s=0|l[c+(5640*i|0)+4>>2],u=696;!(-1==(0|(d=0|l[u>>2]))|(0|d)==(0|s));)u=u+12|0;if(!(8&r[t+93>>0]))return 0|(t=1);switch(d=0|h[t+92>>0],o=c+(5640*i|0)+424+(148*e|0)+92|0,n=c+(5640*i|0)+424+(148*e|0)+88|0,a=c+(5640*i|0)+424+(148*e|0)+96|0,c=c+(5640*i|0)+424+(148*e|0)+84|0,0|(e=0|r[u+4>>0])){case 67:s=o,f=8;break;case 82:s=n,f=8;break;case 80:s=a,f=8;break;case 76:s=c,f=8;break;default:s=1}if(8==(0|f)&&(s=0|l[s>>2]),(0|d)!=(0|e)){switch(0|(i=0|r[u+5>>0])){case 67:e=o,f=16;break;case 82:e=n,f=16;break;case 80:e=a,f=16;break;case 76:e=c,f=16}if(16==(0|f)&&(s=0|C(0|l[e>>2],s)),(0|d)!=(0|i)){switch(0|(i=0|r[u+6>>0])){case 67:e=o,f=22;break;case 82:e=n,f=22;break;case 80:e=a,f=22;break;case 76:e=c,f=22}if(22==(0|f)&&(s=0|C(0|l[e>>2],s)),(0|d)!=(0|i)){switch(0|(e=0|r[u+7>>0])){case 67:f=28;break;case 82:o=n,f=28;break;case 80:o=a,f=28;break;case 76:o=c,f=28}if(28==(0|f)&&(s=0|C(0|l[o>>2],s)),(0|d)!=(0|e))return 0|(t=s);o=3}else o=2}else o=1}else o=0;return l[t+84>>2]=o,0|(t=s)}function we(t,e,i){e|=0,i|=0;var n,r=0,a=0,o=0,c=0;if(!(0|_i(0|l[(r=188+(t|=0)|0)>>2],30,i)))return 0|(c=0);if(((0|s[t+88>>1])-3&65535)<4&&0==(0|_i(0|l[r>>2],31,i)))return 0|(c=0);if(!(0|_i(0|l[r>>2],32,i)))return 0|(c=0);if(!(0|_i(0|l[r>>2],33,i)))return 0|(c=0);if(!(0|_i(0|l[r>>2],34,i)))return 0|(c=0);if(n=0|yi(c=0|l[r>>2]),r=0|bi(c),n)for(a=r,r=1,o=0;r=r?0!=(0|qr[63&l[a>>2]](t,e,i)):0,r&=1,(0|(o=o+1|0))!=(0|n);)a=a+4|0;else r=1;return vi(c),0|(c=r)}function xe(t,e,i,n){t|=0,e|=0,i|=0,n|=0;var r,a,o=0,c=0,h=0,u=0;if(a=w,w=w+16|0,o=0|bt(),l[(r=t+80|0)>>2]=o,!o)return mt(n,1,15352,a),w=a,0|(n=0);if(vt(i,o),0|(h=0|l[i+24>>2])&&0|(u=0|l[i+16>>2])){o=0;do{0|(c=0|l[(i=h+(52*o|0)+44|0)>>2])&&(l[(0|l[24+(0|l[r>>2])>>2])+(52*o|0)+44>>2]=c,l[i>>2]=0),o=o+1|0}while(o>>>0<u>>>0)}if(!(0|_i(0|l[(o=t+192|0)>>2],35,n)))return w=a,0|(n=0);if(!(0|_i(0|l[o>>2],36,n)))return w=a,0|(n=0);if(!(0|_i(0|l[o>>2],37,n)))return w=a,0|(n=0);if(u=0|yi(h=0|l[o>>2]),o=0|bi(h),u){for(i=1,c=0;i=i?0!=(0|qr[63&l[o>>2]](t,e,n)):0,(0|(c=c+1|0))!=(0|u);)o=o+4|0,i&=1;if(vi(h),!i)return w=a,0|(n=0)}else vi(h);if(!(0|_i(0|l[(o=t+188|0)>>2],38,n)))return w=a,0|(n=0);if(!(0|_i(0|l[o>>2],39,n)))return w=a,0|(n=0);if(!(0|_i(0|l[o>>2],40,n)))return w=a,0|(n=0);if(!(0|_i(0|l[o>>2],41,n)))return w=a,0|(n=0);if(!(0|_i(0|l[o>>2],42,n)))return w=a,0|(n=0);if(!(0|_i(0|l[o>>2],43,n)))return w=a,0|(n=0);if(!(0|_i(0|l[o>>2],44,n)))return w=a,0|(n=0);if(((0|s[(i=t+88|0)>>1])-3&65535)<4){if(!(0|_i(0|l[o>>2],45,n)))return w=a,0|(n=0);if(4==(0|s[i>>1])&&0==(0|_i(0|l[o>>2],46,n)))return w=a,0|(n=0)}if(!(0|_i(0|l[o>>2],47,n)))return w=a,0|(n=0);if(0|l[t+108>>2]&&0==(0|_i(0|l[o>>2],48,n)))return w=a,0|(n=0);if(256&s[i>>1]&&0==(0|_i(0|l[o>>2],49,n)))return w=a,0|(n=0);if(0|l[t+196>>2]&&0==(0|_i(0|l[o>>2],50,n)))return w=a,0|(n=0);if(!(0|_i(0|l[o>>2],51,n)))return w=a,0|(n=0);if(!(0|_i(0|l[o>>2],52,n)))return w=a,0|(n=0);if(h=0|yi(u=0|l[o>>2]),o=0|bi(u),h)for(i=o,o=1,c=0;o=o?0!=(0|qr[63&l[i>>2]](t,e,n)):0,o&=1,(0|(c=c+1|0))!=(0|h);)i=i+4|0;else o=1;return vi(u),w=a,0|(n=o)}function Ae(t,e,i,n,r,a){i|=0,n|=0,r|=0,a|=0;var s,o,c,h,u=0,d=0;h=w,w=w+16|0,o=h+8|0,s=h,c=0|l[(t|=0)+(5640*(e|=0)|0)+5584>>2],e=0|l[c+(1080*i|0)+24>>2];do{if(1!=(0|e))if(u=(t=3*(0|l[c+(1080*i|0)+4>>2])|0)-2|0,e)d=7;else{if(t=t+-1|0,(0|l[r>>2])>>>0<t>>>0)return mt(a,1,15741,s),w=h,0|(r=0);if(it(n,l[c+(1080*i|0)+804>>2]<<5,1),!u)break;e=0;do{it(n=n+1|0,l[c+(1080*i|0)+28+(e<<3)>>2]<<3,1),e=e+1|0}while((0|e)!=(0|u))}else u=1,e=1,d=7}while(0);if(7==(0|d)){if(t=u<<1|1,(0|l[r>>2])>>>0<t>>>0)return mt(a,1,15741,o),w=h,0|(r=0);if(it(n,(l[c+(1080*i|0)+804>>2]<<5)+e|0,1),u)for(n=n+1|0,e=0;it(n,(l[c+(1080*i|0)+28+(e<<3)>>2]<<11)+(0|l[c+(1080*i|0)+28+(e<<3)+4>>2])|0,2),(0|(e=e+1|0))!=(0|u);)n=n+2|0}return l[r>>2]=(0|l[r>>2])-t,w=h,0|(r=1)}function Me(t,e,i,n,r){var a,s,o;if(i|=0,n|=0,r|=0,o=w,w=w+16|0,a=0|l[(t|=0)+(5640*(e|=0)|0)+5584>>2],(0|l[n>>2])>>>0<5)return mt(r,1,15813,o),w=o,0|(n=0);if(it(i,(0|l[(s=a+4|0)>>2])-1|0,1),it(i+1|0,(0|l[a+8>>2])-2|0,1),it(i+2|0,(0|l[a+12>>2])-2|0,1),it(i+3|0,0|l[a+16>>2],1),it(i+4|0,0|l[a+20>>2],1),t=(0|l[n>>2])-5|0,l[n>>2]=t,!(1&l[a>>2]))return w=o,0|(n=1);if(t>>>0<(e=0|l[s>>2])>>>0)return mt(r,1,15813,o+8|0),w=o,0|(n=0);if(e){for(t=i+5|0,i=0;it(t,(l[a+944+(i<<2)>>2]<<4)+(0|l[a+812+(i<<2)>>2])|0,1),!((i=i+1|0)>>>0>=(e=0|l[s>>2])>>>0);)t=t+1|0;t=0|l[n>>2]}else e=0;return l[n>>2]=t-e,w=o,0|(n=1)}function Se(t,e,i,n,r,a){e|=0,i|=0,n|=0,r|=0,a|=0;var s,o,c,h,u=0,d=0,f=0,p=0;if(h=w,w=w+48|0,c=h+40|0,p=h+32|0,o=h+24|0,s=h+16|0,u=h+8|0,(0|l[(d=200+(t|=0)|0)>>2])!=(0|e))return mt(a,1,15150,h),l[s>>2]=e,mt(a,1,16086,s),w=h,0;if(f=0|C(0|l[t+116>>2],0|l[t+112>>2]),l[u>>2]=e+1,l[u+4>>2]=f,mt(a,4,15187,u),l[t+12>>2]=0,u=0|l[(f=t+204|0)>>2],l[u+12>>2]=l[(0|l[t+164>>2])+(5640*e|0)+5588>>2],l[t+8>>2]=0,!(0|ei(u,0|l[d>>2],a)))return l[s>>2]=e,mt(a,1,16086,s),w=h,0;u=0|l[f>>2];t:do{if(0|l[16+(0|l[u+24>>2])>>2]){for(d=0;0|ti((0|l[20+(0|l[l[u+20>>2]>>2])>>2])+(52*d|0)|0);)if(d=d+1|0,u=0|l[f>>2],d>>>0>=(0|l[16+(0|l[u+24>>2])>>2])>>>0)break t;return mt(a,1,15208,o),w=h,0|(p=0)}}while(0);return 0|oi(u,i,n)?0|ye(t,r,a)?(w=h,0|(p=1)):(l[c>>2]=e,mt(a,1,16143,c),w=h,0|(p=0)):(mt(a,1,15285,p),w=h,0|(p=0))}function Ee(t,e,i){t|=0,i|=0;var n,a,o,c,u,f,p,m,g,_=0,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,T=0;g=w,w=w+80|0,T=g+72|0,m=g+64|0,p=g+56|0,f=g+48|0,u=g+40|0,c=g+32|0,o=g+24|0,E=g+16|0,A=g+8|0,x=g,_=0|l[8+(e|=0)>>2];t:do{if(_){S=0|l[_>>2],M=0|s[_+4>>1],y=0|l[t+16>>2],0!=(0|(_=0|l[e+12>>2]))&&0!=(0|l[_+12>>2])&&(y=0|h[_+18>>0]);e:do{if(M<<16>>16){v=0;i:for(;;){if(y>>>0<=(b=0|d[S+(6*(e=65535&v)|0)>>1])>>>0){v=14;break}switch((e=0|s[S+(6*e|0)+4>>1])<<16>>16){case 0:case-1:break;default:if((e=(65535&e)-1|0)>>>0>=y>>>0){v=17;break i}}if((65535&(v=v+1<<16>>16))>=(65535&M)){v=8;break}}if(8==(0|v))for(;;){y=y+-1|0,e=0;do{if((0|y)==(0|d[S+(6*(65535&e)|0)>>1]))break;e=e+1<<16>>16}while((65535&e)<(65535&M));if(e<<16>>16==M<<16>>16)break e;if(!y)break t;v=8}else{if(14==(0|v))return l[x>>2]=b,l[x+4>>2]=y,mt(i,1,16331,x),w=g,0|(T=0);if(17==(0|v))return l[A>>2]=e,l[A+4>>2]=y,mt(i,1,16331,A),w=g,0|(T=0)}}else if(!y)break t}while(0);return mt(i,1,16368,E),w=g,0|(T=0)}_=0|l[e+12>>2]}while(0);if(!_)return w=g,0|(T=1);if(!(a=0|l[_+12>>2]))return w=g,0|(T=1);if(n=255&(M=0|r[_+18>>0]),E=M<<24>>24==0)_=1;else{v=t+16|0,_=1,b=0,e=0;do{e=0|d[a+(e<<2)>>1],(y=0|l[v>>2])>>>0<=e>>>0&&(l[o>>2]=e,l[o+4>>2]=y,mt(i,1,16331,o),_=0),e=65535&(b=b+1<<16>>16)}while(e>>>0<n>>>0)}if(!(S=0|Ht(n,4)))return mt(i,1,16401,c),w=g,0|(T=0);if(!E){x=0,A=0;do{b=255&(y=0|r[a+(A<<2)+3>>0]);do{if((255&y)<(255&M)){if(v=S+(b<<2)|0,e=0|r[a+(A<<2)+2>>0],0!=(0|l[v>>2])&e<<24>>24==1){l[f>>2]=b,mt(i,1,16474,f),_=0;break}if(e<<24>>24!=0|y<<24>>24==0){l[v>>2]=1;break}l[p>>2]=A,l[p+4>>2]=b,mt(i,1,16505,p),_=0;break}l[u>>2]=b,mt(i,1,16418,u),_=0}while(0);A=65535&(x=x+1<<16>>16)}while(A>>>0<n>>>0);if(!E){y=0,e=0;do{0==(0|l[S+(e<<2)>>2])&&0!=(0|r[a+(e<<2)+2>>0])&&(l[m>>2]=e,mt(i,1,16541,m),_=0),e=65535&(y=y+1<<16>>16)}while(e>>>0<n>>>0)}}if(!_)return jt(S),w=g,0|(T=0);t:do{if(!(1!=(0|l[t+16>>2])|E)){for(e=0,_=0;e=e+1<<16>>16,0|l[S+(_<<2)>>2];)if((_=65535&e)>>>0>=n>>>0)break t;l[T>>2]=_,mt(i,2,16579,T),_=0,e=0;do{r[a+(e<<2)+2>>0]=1,r[a+(e<<2)+3>>0]=_,e=65535&(_=_+1<<16>>16)}while(e>>>0<n>>>0)}}while(0);return jt(S),w=g,0|(T=1)}function Te(t,e){t|=0;var i,n,a,o,c,u,f,p,m=0,g=0,_=0,y=0,b=0,v=0,w=0,x=0;if(e=0|l[(p=12+(e|=0)|0)>>2],v=0|l[e+8>>2],w=0|l[e+4>>2],a=0|l[e>>2],n=0|l[e+12>>2],e=0|r[e+18>>0],c=0|l[(o=t+24|0)>>2],f=0|zt(52*(u=255&e)|0)){if(!(i=e<<24>>24==0)){y=0,b=0;do{if(e=0|s[n+(b<<2)>>1],0|r[n+(b<<2)+2>>0]){g=c+(52*(e&=65535)|0)|0,_=52+(m=f+(52*(0|h[n+(b<<2)+3>>0])|0)|0)|0;do{l[m>>2]=l[g>>2],m=m+4|0,g=g+4|0}while((0|m)<(0|_))}else{g=c+(52*(e&=65535)|0)|0,_=52+(m=f+(52*b|0)|0)|0;do{l[m>>2]=l[g>>2],m=m+4|0,g=g+4|0}while((0|m)<(0|_))}if(_=0|zt(0|C(l[c+(52*e|0)+8>>2]<<2,0|l[c+(52*e|0)+12>>2])),l[f+(52*b|0)+44>>2]=_,!_){x=7;break}l[f+(52*b|0)+24>>2]=h[v+b>>0],l[f+(52*b|0)+32>>2]=h[w+b>>0],b=65535&(y=y+1<<16>>16)}while(b>>>0<u>>>0);if(7==(0|x))return void jt(f);if(w=(v=0|d[16+(0|l[p>>2])>>1])-1|0,!i){_=0,e=0;do{if(y=0|l[c+(52*(0|d[n+(e<<2)>>1])|0)+44>>2],g=0|h[n+(e<<2)+3>>0],b=0|C(0|l[f+(52*g|0)+12>>2],0|l[f+(52*g|0)+8>>2]),0|r[n+(e<<2)+2>>0]){if(m=0|l[f+(52*g|0)+44>>2],0|b){e=0;do{x=0|l[y+(e<<2)>>2],x=a+((0|C((0|x)<0?0:(0|x)<(0|v)?x:w,u))+g<<2)|0,l[m+(e<<2)>>2]=l[x>>2],e=e+1|0}while((0|e)!=(0|b))}}else if(m=0|l[f+(52*e|0)+44>>2],0|b){e=0;do{l[m+(e<<2)>>2]=l[y+(e<<2)>>2],e=e+1|0}while((0|e)!=(0|b))}e=65535&(_=_+1<<16>>16)}while(e>>>0<u>>>0)}}if(0|(_=0|l[(g=t+16|0)>>2])){m=0,e=0;do{0|(e=0|l[c+(52*e|0)+44>>2])&&jt(e),e=65535&(m=m+1<<16>>16)}while(_>>>0>e>>>0)}jt(c),l[o>>2]=f,l[g>>2]=u,jt(0|l[4+(0|l[p>>2])>>2]),jt(0|l[8+(0|l[p>>2])>>2]),jt(0|l[l[p>>2]>>2]),e=0|l[p>>2],(m=0|l[e+12>>2])&&(jt(m),e=0|l[p>>2]),jt(e),l[p>>2]=0}}function Ie(t,e,i){t|=0,i|=0;var n,r,a,o,c,h,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,T=0;if(h=w,w=w+80|0,o=h+8|0,a=h,r=h+16|0,u=0|l[(c=8+(e|=0)|0)>>2],e=0|l[u>>2],(n=0|s[u+4>>1])<<16>>16){for(E=t+16|0,y=t+24|0,S=65535&n,A=1,M=0;;){v=65535&(b=0|s[e+(6*M|0)>>1]),t=0|l[E>>2];t:do{if(t>>>0>v>>>0){switch((u=0|s[e+(6*M|0)+4>>1])<<16>>16){case-1:case 0:s[(0|l[y>>2])+(52*v|0)+48>>1]=0|s[e+(6*M|0)+2>>1];break t}if(x=65535+(65535&u)&65535,t>>>0<=(m=65535&(_=u+-1<<16>>16))>>>0){l[o>>2]=m,l[o+4>>2]=t,mt(i,2,16290,o);break}if(g=e+(6*M|0)+2|0,b<<16>>16!=_<<16>>16&&0==(0|s[g>>1])){f=t=(u=0|l[y>>2])+(52*v|0)|0,p=(d=r)+52|0;do{l[d>>2]=l[f>>2],d=d+4|0,f=f+4|0}while((0|d)<(0|p));f=u+(52*m|0)|0,p=(d=t)+52|0;do{l[d>>2]=l[f>>2],d=d+4|0,f=f+4|0}while((0|d)<(0|p));f=r,p=52+(d=(0|l[y>>2])+(52*m|0)|0)|0;do{l[d>>2]=l[f>>2],d=d+4|0,f=f+4|0}while((0|d)<(0|p));if((65535&n)>(M+1&65535)){d=A;do{(u=0|s[(t=e+(6*d|0)|0)>>1])<<16>>16!=b<<16>>16?u<<16>>16==_<<16>>16&&(u=b,T=14):(u=x,T=14),14==(0|T)&&(T=0,s[t>>1]=u),d=d+1|0}while(n<<16>>16!=(65535&d)<<16>>16)}}s[(0|l[y>>2])+(52*v|0)+48>>1]=0|s[g>>1]}else l[a>>2]=v,l[a+4>>2]=t,mt(i,2,16250,a)}while(0);if((0|(M=M+1|0))==(0|S))break;A=A+1|0}u=e=0|l[c>>2],e=0|l[e>>2]}return e?(jt(e),jt(T=0|l[c>>2]),l[c>>2]=0,void(w=h)):(jt(T=u),l[c>>2]=0,void(w=h))}function Ce(t){var e=0,i=0,n=0;(t|=0)&&(Xt(0|l[t>>2]),l[t>>2]=0,0|(i=0|l[(e=t+72|0)>>2])&&(jt(i),l[e>>2]=0),0|(i=0|l[(e=t+68|0)>>2])&&(jt(i),l[e>>2]=0),0|(e=0|l[(i=t+108|0)>>2])&&(jt(e),l[i>>2]=0),0|(e=0|l[(n=t+116|0)>>2])&&((i=0|l[e>>2])&&(jt(i),e=0|l[n>>2],l[e>>2]=0),jt(e),l[n>>2]=0),0|(e=0|l[(n=t+120|0)>>2])&&((i=0|l[e+12>>2])&&(jt(i),e=0|l[n>>2],l[e+12>>2]=0),(i=0|l[e+4>>2])&&(jt(i),e=0|l[n>>2],l[e+4>>2]=0),(i=0|l[e+8>>2])&&(jt(i),e=0|l[n>>2],l[e+8>>2]=0),(i=0|l[e>>2])&&(jt(i),e=0|l[n>>2],l[e>>2]=0),jt(e),l[n>>2]=0),0|(i=0|l[(e=t+4|0)>>2])&&(gi(i),l[e>>2]=0),0|(i=0|l[(e=t+8|0)>>2])&&(gi(i),l[e>>2]=0),jt(t))}function ke(t){t|=0;var e=0;return(e=0|Ht(1,136))?(t=t?0|se():0|Yt(),l[e>>2]=t,t?(l[(t=e+108|0)>>2]=0,l[t+4>>2]=0,l[t+8>>2]=0,l[t+12>>2]=0,r[t+16>>0]=0,t=0|mi(),l[e+4>>2]=t,t?(t=0|mi(),l[e+8>>2]=t,0|t?0|e:(Ce(e),0|(e=0))):(Ce(e),0|(e=0))):(Ce(e),0|(e=0))):0|e}function Pe(t,e,i,n){t|=0,e|=0,i|=0;var r=0,a=0,s=0,o=0,c=0,h=0,u=0;if(n|=0){r=0;do{o=0|l[(u=t+(r<<2)|0)>>2],s=0|l[(c=e+(r<<2)|0)>>2],h=0|l[(a=i+(r<<2)|0)>>2],l[u>>2]=(s<<1)+o+h>>2,l[c>>2]=h-s,l[a>>2]=o-s,r=r+1|0}while((0|r)!=(0|n))}}function Be(t,e,i,n){t|=0,e|=0,i|=0;var r=0,a=0,s=0,o=0,c=0,h=0,u=0;if(n|=0){r=0;do{h=t+(r<<2)|0,s=0|l[(c=e+(r<<2)|0)>>2],u=0|l[(a=i+(r<<2)|0)>>2],o=(0|l[h>>2])-(u+s>>2)|0,l[h>>2]=o+u,l[c>>2]=o,l[a>>2]=o+s,r=r+1|0}while((0|r)!=(0|n))}}function Le(t,e,i,n){t|=0,e|=0,i|=0;var r=0,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0;if(n|=0){r=0;do{v=0|l[(p=t+(r<<2)|0)>>2],b=0|l[(h=e+(r<<2)|0)>>2],y=0|l[(a=i+(r<<2)|0)>>2],g=0|Er(0|(g=0|br(0|(g=0|yr(0|v,0|(c=((0|v)<0)<<31>>31),2449,0)),0|M,4096,0)),0|M,13),_=0|Er(0|(_=0|br(0|(_=0|yr(0|b,0|(o=((0|b)<0)<<31>>31),4809,0)),0|M,4096,0)),0|M,13),m=0|Er(0|(m=0|br(0|(m=0|yr(0|y,0|(s=((0|y)<0)<<31>>31),934,0)),0|M,4096,0)),0|M,13),u=0|Er(0|(u=0|br(0|(u=0|yr(0|v,0|c,1382,0)),0|M,4096,0)),0|M,13),d=0|Er(0|(d=0|br(0|(d=0|yr(0|b,0|o,2714,0)),0|M,4096,0)),0|M,13),f=0|Er(0|(f=0|br(0|(f=0|Tr(0|y,0|s,12)),0|M,4096,0)),0|M,13),c=0|Er(0|(c=0|br(0|(c=0|Tr(0|v,0|c,12)),0|M,4096,0)),0|M,13),o=0|Er(0|(o=0|br(0|(o=0|yr(0|b,0|o,3430,0)),0|M,4096,0)),0|M,13),s=0|Er(0|(s=0|br(0|(s=0|yr(0|y,0|s,666,0)),0|M,4096,0)),0|M,13),l[p>>2]=_+g+m,l[h>>2]=f-(d+u),l[a>>2]=c-o-s,r=r+1|0}while((0|r)!=(0|n))}}function Re(t,e,i,n){t|=0,e|=0,i|=0;var r=0,a=0,s=0,o=0,l=0,c=0,h=0;if(n|=0){r=0;do{o=+m[(h=t+(r<<2)|0)>>2],s=+m[(l=e+(r<<2)|0)>>2],c=+m[(a=i+(r<<2)|0)>>2],m[h>>2]=o+1.4019999504089355*c,m[l>>2]=o-.3441300094127655*s-.714139997959137*c,m[a>>2]=o+1.7719999551773071*s,r=r+1|0}while((0|r)!=(0|n))}}function De(t,e,i,n,r){t|=0,e|=0,i|=0,r|=0;var a,s,o=0,c=0,h=0,u=0,d=0,f=0,p=0,g=0;if(!(s=0|zt((o=0|C(n|=0,n))+n<<2)))return 0|(e=0);if(a=s+(n<<2)|0,0|o)for(r=t,t=0;l[a+(t<<2)>>2]=~~(8192*+m[r>>2]),(0|(t=t+1|0))!=(0|o);)r=r+4|0;t:do{if(0|e){if(n)f=0;else for(r=0;;)if((0|(r=r+1|0))==(0|e))break t;do{r=0;do{l[s+(r<<2)>>2]=l[l[i+(r<<2)>>2]>>2],r=r+1|0}while((0|r)!=(0|n));for(t=a,o=0;;){for(u=0|l[(h=i+(o<<2)|0)>>2],l[u>>2]=0,r=0,c=t,d=0;p=0|l[c>>2],d=d+(p=0|Er(0|(p=0|br(0|(p=0|yr(0|(g=0|l[s+(r<<2)>>2]),((0|g)<0)<<31>>31|0,0|p,((0|p)<0)<<31>>31|0)),0|M,4096,0)),0|M,13))|0,l[u>>2]=d,(0|(r=r+1|0))!=(0|n);)c=c+4|0;if(l[h>>2]=u+4,(0|(o=o+1|0))==(0|n))break;t=t+(n<<2)|0}f=f+1|0}while((0|f)!=(0|e))}}while(0);return jt(s),0|(g=1)}function Oe(t,e,i,n,r){t|=0,e|=0,i|=0,r|=0;var a,s,o=0,c=0,h=0,u=0,d=0,f=0;if(!(s=0|zt((n|=0)<<3)))return 0|(e=0);a=s+(n<<2)|0;t:do{if(0|e){if(n)f=0;else for(r=0;;)if((0|(r=r+1|0))==(0|e))break t;do{r=0;do{l[s+(r<<2)>>2]=l[l[i+(r<<2)>>2]>>2],r=r+1|0}while((0|r)!=(0|n));for(o=t,h=0;;){for(m[(u=a+(h<<2)|0)>>2]=0,r=0,c=o,d=0;d+=+m[c>>2]*+m[s+(r<<2)>>2],m[u>>2]=d,(0|(r=r+1|0))!=(0|n);)c=c+4|0;if(u=0|l[(c=i+(h<<2)|0)>>2],l[c>>2]=u+4,m[u>>2]=d,(0|(h=h+1|0))==(0|n))break;o=o+(n<<2)|0}f=f+1|0}while((0|f)!=(0|e))}}while(0);return jt(s),0|(e=1)}function Ge(t,e,i){t|=0,i|=0;var n=0,r=0,a=0,s=0,o=0,l=0;if(e|=0){a=0;do{for(_[(o=t+(a<<3)|0)>>3]=0,n=0,r=a,s=0;s+=(l=+m[i+(r<<2)>>2])*l,(0|(n=n+1|0))!=(0|e);)r=r+e|0;l=+E(+s),_[o>>3]=l,a=a+1|0}while((0|a)!=(0|e))}}function Fe(t,e,i){t|=0,i|=0;var n,a,s,o,c,h,u,d,f,p,m,g,_=0,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0;if(g=w,w=w+32|0,E=g+28|0,A=g+24|0,T=g+20|0,n=g+16|0,I=g+12|0,a=g+8|0,M=g+4|0,x=g,m=0|l[(_=76+(e|=0)|0)>>2],L=1+(0|l[(u=m+(5640*i|0)+420|0)>>2])|0,!(d=0|zt(528*(0|l[(S=t+16|0)>>2])|0)))return w=g,0|(L=0);if(!(f=0|zt(l[S>>2]<<2)))return jt(d),w=g,0|(L=0);if(!(_=0|Ne(t,0|l[_>>2],i)))return jt(d),jt(f),w=g,0|(L=0);if(0|(v=0|l[S>>2]))for(y=d,b=0;l[f+(b<<2)>>2]=y,!((b=b+1|0)>>>0>=v>>>0);)y=y+528|0;if(ze(t,e,i,T,n,I,a,M,x,A,E,f),p=0|l[A>>2],o=0|C(0|l[S>>2],p),h=0|l[E>>2],s=0|C(h,o),l[(b=_+4|0)>>2]=0,s>>>0<=(4294967295/((y=1+(0|l[(c=m+(5640*i|0)+8|0)>>2])|0)>>>0)|0)>>>0&&(B=0|Ht(0|C(y,s),2),l[b>>2]=B,0|B)){if(y=0|l[_+196>>2],B=0|l[t+24>>2],P=0|l[T>>2],l[_+200>>2]=P,k=0|l[I>>2],l[_+204>>2]=k,I=0|l[n>>2],l[_+208>>2]=I,T=0|l[a>>2],l[_+212>>2]=T,l[_+20>>2]=1,l[_+16>>2]=p,l[_+12>>2]=o,l[_+8>>2]=s,0|(S=0|l[_+192>>2]))for(M=B,e=y,x=0;;){if(y=0|l[e+12>>2],b=0|l[f+(x<<2)>>2],l[e>>2]=l[M>>2],l[e+4>>2]=l[M+4>>2],0|(A=0|l[e+8>>2]))for(v=0;l[y>>2]=l[b>>2],l[y+4>>2]=l[b+4>>2],l[y+8>>2]=l[b+8>>2],l[y+12>>2]=l[b+12>>2],!((v=v+1|0)>>>0>=A>>>0);)y=y+16|0,b=b+16|0;if((x=x+1|0)>>>0>=S>>>0)break;M=M+52|0,e=e+16|0}if(L>>>0>1){M=1,E=_;do{if(y=0|l[E+428>>2],l[E+432>>2]=P,l[E+436>>2]=k,l[E+440>>2]=I,l[E+444>>2]=T,l[E+252>>2]=1,l[E+248>>2]=p,l[E+244>>2]=o,l[E+240>>2]=s,0|(t=0|l[E+424>>2]))for(S=B,x=0;;){if(b=0|l[y+12>>2],v=0|l[f+(x<<2)>>2],l[y>>2]=l[S>>2],l[y+4>>2]=l[S+4>>2],0|(A=0|l[y+8>>2]))for(e=0;l[b>>2]=l[v>>2],l[b+4>>2]=l[v+4>>2],l[b+8>>2]=l[v+8>>2],l[b+12>>2]=l[v+12>>2],!((e=e+1|0)>>>0>=A>>>0);)b=b+16|0,v=v+16|0;if((x=x+1|0)>>>0>=t>>>0)break;S=S+52|0,y=y+16|0}l[E+236>>2]=l[E+4>>2],E=E+232|0,M=M+1|0}while((0|M)!=(0|L))}if(jt(d),jt(f),y=0==(0|(x=1+(0|l[u>>2])|0)),4&r[m+(5640*i|0)+5636>>0]){if(y)return w=g,0|(L=_);for(y=m+(5640*i|0)+424|0,b=_,v=0;l[b+80>>2]=l[y+36>>2],l[b+40>>2]=1,l[b+44>>2]=l[y>>2],l[b+48>>2]=l[y+4>>2],l[b+64>>2]=0,l[b+68>>2]=0,l[b+56>>2]=l[y+12>>2],l[b+60>>2]=l[y+16>>2],l[b+52>>2]=l[y+8>>2],l[b+72>>2]=p,(0|(v=v+1|0))!=(0|x);)y=y+148|0,b=b+232|0;return w=g,0|_}if(y)return w=g,0|(L=_);for(e=0|l[m+(5640*i|0)+4>>2],v=0|l[c>>2],y=0,b=_;l[b+80>>2]=e,l[b+40>>2]=1,l[b+44>>2]=0,l[b+48>>2]=0,l[b+64>>2]=0,l[b+68>>2]=0,l[b+56>>2]=h,l[b+60>>2]=l[b+192>>2],l[b+52>>2]=v,l[b+72>>2]=p,(0|(y=y+1|0))!=(0|x);)b=b+232|0;return w=g,0|_}if(jt(d),jt(f),0|(y=0|l[b>>2])&&(jt(y),l[b>>2]=0),0|L)for(M=_,S=0;;){if(0|(y=0|l[(E=M+196|0)>>2])){if(b=0|l[(A=M+192|0)>>2]){for(x=0;(e=0|l[(v=y+12|0)>>2])&&(jt(e),l[v>>2]=0,b=0|l[A>>2]),!((x=x+1|0)>>>0>=b>>>0);)y=y+16|0;y=0|l[E>>2]}jt(y),l[E>>2]=0}if((0|(S=S+1|0))==(0|L))break;M=M+232|0}return jt(_),w=g,0|(L=0)}function Ne(t,e,i){t|=0;var n,r=0,a=0,s=0,o=0,c=0,h=0,u=0;if(!(n=0|Ht(u=1+(0|l[(e|=0)+(5640*(i|=0)|0)+420>>2])|0,232)))return 0|(u=0);if(!u)return 0|(u=n);o=e+(5640*i|0)+5584|0,a=n,s=0,t=0|l[(c=t+16|0)>>2];t:for(;;){if(e=0|Ht(t,16),l[(r=a+196|0)>>2]=e,!e){t=5;break}h=0|l[c>>2],l[a+192>>2]=h;e:do{if(h){if(t=4+(0|l[o>>2])|0,h=0|Ht(0|l[t>>2],16),l[e+12>>2]=h,!h){t=19;break t}for(i=0;;){if(l[e+(i<<4)+8>>2]=l[t>>2],(i=i+1|0)>>>0>=(t=0|l[c>>2])>>>0)break e;if(e=0|l[r>>2],t=(0|l[o>>2])+(1080*i|0)+4|0,h=0|Ht(0|l[t>>2],16),l[e+(i<<4)+12>>2]=h,!h){t=19;break t}}}else t=0}while(0);if((s=s+1|0)>>>0>=u>>>0){t=33;break}a=a+232|0}if(5==(0|t)){for((e=0|l[(t=n+4|0)>>2])?(jt(e),l[t>>2]=0,o=n,c=0):(o=n,c=0);;){if(0|(t=0|l[(h=o+196|0)>>2])){if(e=0|l[(s=o+192|0)>>2]){for(a=0;(r=0|l[(i=t+12|0)>>2])&&(jt(r),l[i>>2]=0,e=0|l[s>>2]),!((a=a+1|0)>>>0>=e>>>0);)t=t+16|0;t=0|l[h>>2]}jt(t),l[h>>2]=0}if((0|(c=c+1|0))==(0|u))break;o=o+232|0}return jt(n),0|(u=0)}if(19==(0|t)){for((e=0|l[(t=n+4|0)>>2])?(jt(e),l[t>>2]=0,o=n,c=0):(o=n,c=0);;){if(0|(t=0|l[(h=o+196|0)>>2])){if(e=0|l[(s=o+192|0)>>2]){for(a=0;(r=0|l[(i=t+12|0)>>2])&&(jt(r),l[i>>2]=0,e=0|l[s>>2]),!((a=a+1|0)>>>0>=e>>>0);)t=t+16|0;t=0|l[h>>2]}jt(t),l[h>>2]=0}if((0|(c=c+1|0))==(0|u))break;o=o+232|0}return jt(n),0|(u=0)}return 33==(0|t)?0|n:0}function ze(t,e,i,n,r,a,s,o,c,h,u,d){t|=0,i|=0,n|=0,r|=0,a|=0,s|=0,o|=0,c|=0,h|=0,u|=0,d|=0;var f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,w=0,x=0,A=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0;if(f=0|l[(0|l[76+(e|=0)>>2])+(5640*i|0)+5584>>2],p=0|l[t+24>>2],I=0|l[e+24>>2],T=(0|C(0|l[(k=e+12|0)>>2],(i>>>0)%(I>>>0)|0))+(0|l[e+4>>2])|0,E=0|l[t>>2],l[n>>2]=T>>>0>E>>>0?T:E,T=0|br(0|l[k>>2],0,0|T,0),T|=0-M,k=0|l[t+8>>2],l[r>>2]=T>>>0<k>>>0?T:k,I=(0|C(0|l[(k=e+16|0)>>2],(i>>>0)/(I>>>0)|0))+(0|l[e+8>>2])|0,T=0|l[t+4>>2],l[a>>2]=I>>>0>T>>>0?I:T,I=0|br(0|l[k>>2],0,0|I,0),I|=0-M,k=0|l[t+12>>2],l[s>>2]=I>>>0<k>>>0?I:k,l[h>>2]=0,l[u>>2]=0,l[o>>2]=2147483647,l[c>>2]=2147483647,0|l[(k=t+16|0)>>2])for(E=0;;){if(v=0|l[d+(E<<2)>>2],m=0|l[p>>2],e=((0|l[n>>2])-1+m|0)/(0|m)|0,g=0|l[(T=p+4|0)>>2],i=((0|l[a>>2])-1+g|0)/(0|g)|0,m=(m+-1+(0|l[r>>2])|0)/(0|m)|0,g=(g+-1+(0|l[s>>2])|0)/(0|g)|0,(t=0|l[(I=f+4|0)>>2])>>>0>(0|l[u>>2])>>>0&&(l[u>>2]=t,t=0|l[I>>2]),0|t)for(A=0|br(0|e,((0|e)<0)<<31>>31|0,-1,-1),S=M,w=0|br(0|i,((0|i)<0)<<31>>31|0,-1,-1),x=M,b=0|br(0|m,((0|m)<0)<<31>>31|0,-1,-1),y=M,g=0|br(0|g,((0|g)<0)<<31>>31|0,-1,-1),_=M,m=0,i=v;t=t+-1|0,e=0|l[f+812+(m<<2)>>2],v=0|l[f+944+(m<<2)>>2],l[i>>2]=e,l[i+4>>2]=v,L=l[p>>2]<<e+t,G=l[T>>2]<<v+t,R=0|l[o>>2],l[o>>2]=(0|R)<(0|L)?R:L,L=0|l[c>>2],l[c>>2]=(0|L)<(0|G)?L:G,R=0|Sr(0|(R=0|br(0|A,0|S,0|(G=0|Tr(1,0,0|t)),0|(L=M))),0|M,0|t),P=0|Sr(0|(P=0|br(0|w,0|x,0|G,0|L)),0|M,0|t),O=0|Sr(0|(O=0|br(0|b,0|y,0|G,0|L)),0|M,0|t),L=0|Sr(0|(L=0|br(0|g,0|_,0|G,0|L)),0|M,0|t),G=0|Tr(1,0,0|e),D=M,D=0|Sr(0|(D=0|br(0|(B=0|br(0|O,((0|O)<0)<<31>>31|0,-1,-1)),0|M,0|G,0|D)),0|M,0|e),G=0|Tr(1,0,0|v),B=M,B=0|Sr(0|(B=0|br(0|br(0|L,((0|L)<0)<<31>>31|0,-1,-1),0|M,0|G,0|B)),0|M,0|v),e=(0|R)==(0|O)?0:(D<<e)-(R>>e<<e)>>e,v=(0|P)==(0|L)?0:(B<<v)-(P>>v<<v)>>v,l[i+8>>2]=e,l[i+12>>2]=v,(e=0|C(v,e))>>>0>(0|l[h>>2])>>>0&&(l[h>>2]=e),!((m=m+1|0)>>>0>=(0|l[I>>2])>>>0);)i=i+16|0;if((E=E+1|0)>>>0>=(0|l[k>>2])>>>0)break;f=f+1080|0,p=p+52|0}}function He(t,e){e|=0;var i=0,n=0,r=0,a=0,s=0,o=0,c=0,h=0,u=0;if(t|=0){if(0|(n=0|l[(i=t+4|0)>>2])&&(jt(n),l[i>>2]=0),0|e)for(c=t,h=0;;){if(0|(i=0|l[(u=c+196|0)>>2])){if(n=0|l[(o=c+192|0)>>2]){for(s=0;(a=0|l[(r=i+12|0)>>2])&&(jt(a),l[r>>2]=0,n=0|l[o>>2]),!((s=s+1|0)>>>0>=n>>>0);)i=i+16|0;i=0|l[u>>2]}jt(i),l[u>>2]=0}if((0|(h=h+1|0))==(0|e))break;c=c+232|0}jt(t)}}function Ue(t,e,i,n){t|=0,i|=0,n|=0;var a,o,c,u,d,f,p,m,g,_,y,b,v,x,A,M,S,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0;if(S=w,w=w+32|0,P=S+28|0,k=S+24|0,B=S+20|0,R=S+16|0,L=S+12|0,D=S+8|0,O=S+4|0,o=S,_=0|l[(x=76+(e|=0)|0)>>2],F=1+(0|l[_+(5640*i|0)+420>>2])|0,!(y=0|zt(528*(0|l[(v=t+16|0)>>2])|0)))return w=S,0|(F=0);if(!(b=0|zt(l[v>>2]<<2)))return jt(y),w=S,0|(F=0);if(!(a=0|Ne(t,0|l[x>>2],i)))return jt(y),jt(b),w=S,0|(F=0);if(0|(I=0|l[v>>2]))for(E=y,T=0;l[b+(T<<2)>>2]=E,!((T=T+1|0)>>>0>=I>>>0);)E=E+528|0;if(ze(t,e,i,B,R,L,D,O,o,k,P,b),M=0|l[k>>2],d=0|C(0|l[v>>2],M),A=0|l[P>>2],u=0|C(A,d),r[a>>0]=(0|h[e+93>>0])>>>3&1,G=0|Ht(0|C(0|l[_+(5640*i|0)+8>>2],u),2),l[(T=a+4|0)>>2]=G,!G){if(jt(y),jt(b),0|(E=0|l[T>>2])&&(jt(E),l[T>>2]=0),0|F)for(B=a,L=0;;){if(0|(E=0|l[(R=B+196|0)>>2])){if(T=0|l[(t=B+192|0)>>2]){for(P=0;(k=0|l[(I=E+12|0)>>2])&&(jt(k),l[I>>2]=0,T=0|l[t>>2]),!((P=P+1|0)>>>0>=T>>>0);)E=E+16|0;E=0|l[R>>2]}jt(E),l[R>>2]=0}if((0|(L=L+1|0))==(0|F))break;B=B+232|0}return jt(a),w=S,0|(F=0)}if(k=0|l[a+196>>2],c=0|l[t+24>>2],G=0|l[B>>2],l[a+200>>2]=G,g=0|l[L>>2],l[a+204>>2]=g,m=0|l[R>>2],l[a+208>>2]=m,p=0|l[D>>2],l[a+212>>2]=p,f=0|l[O>>2],l[a+224>>2]=f,O=0|l[o>>2],l[a+228>>2]=O,l[a+20>>2]=1,l[a+16>>2]=M,l[a+12>>2]=d,l[a+8>>2]=u,0|(L=0|l[a+192>>2]))for(B=c,P=0;;){if(E=0|l[k+12>>2],T=0|l[b+(P<<2)>>2],l[k>>2]=l[B>>2],l[k+4>>2]=l[B+4>>2],0|(t=0|l[k+8>>2]))for(I=0;l[E>>2]=l[T>>2],l[E+4>>2]=l[T+4>>2],l[E+8>>2]=l[T+8>>2],l[E+12>>2]=l[T+12>>2],!((I=I+1|0)>>>0>=t>>>0);)E=E+16|0,T=T+16|0;if((P=P+1|0)>>>0>=L>>>0)break;B=B+52|0,k=k+16|0}if(F>>>0>1){B=1,R=a;do{if(E=0|l[R+428>>2],l[R+432>>2]=G,l[R+436>>2]=g,l[R+440>>2]=m,l[R+444>>2]=p,l[R+456>>2]=f,l[R+460>>2]=O,l[R+252>>2]=1,l[R+248>>2]=M,l[R+244>>2]=d,l[R+240>>2]=u,0|(D=0|l[R+424>>2]))for(L=c,P=0;;){if(T=0|l[E+12>>2],I=0|l[b+(P<<2)>>2],l[E>>2]=l[L>>2],l[E+4>>2]=l[L+4>>2],0|(t=0|l[E+8>>2]))for(k=0;l[T>>2]=l[I>>2],l[T+4>>2]=l[I+4>>2],l[T+8>>2]=l[I+8>>2],l[T+12>>2]=l[I+12>>2],!((k=k+1|0)>>>0>=t>>>0);)T=T+16|0,I=I+16|0;if((P=P+1|0)>>>0>=D>>>0)break;L=L+52|0,E=E+16|0}l[R+236>>2]=l[R+4>>2],R=R+232|0,B=B+1|0}while((0|B)!=(0|F))}jt(y),jt(b);do{if(4&r[_+(5640*i|0)+5636>>0]){if((65535&(E=0|s[e>>1]))>2){if(!(1==(0|n)|(65535&E)<7))break}else if(1!=(0|n))break;return Ve(0|l[x>>2],i,G,m,g,p,M,f,O),w=S,0|(F=a)}}while(0);if(t=0|l[v>>2],E=0|l[x>>2],!(I=1+(0|l[E+(5640*i|0)+420>>2])|0))return w=S,0|(F=a);for(k=0|l[E+(5640*i|0)+8>>2],P=0|l[E+(5640*i|0)+4>>2],T=0,E=E+(5640*i|0)+424|0;l[E+76>>2]=0,l[E+92>>2]=t,l[E+72>>2]=0,l[E+88>>2]=A,l[E+68>>2]=0,l[E+84>>2]=k,l[E+36>>2]=P,l[E+80>>2]=0,l[E+96>>2]=M,l[E+100>>2]=G,l[E+104>>2]=m,l[E+108>>2]=g,l[E+112>>2]=p,l[E+116>>2]=f,l[E+120>>2]=O,(0|(T=T+1|0))!=(0|I);)E=E+148|0;return w=S,0|a}function Ve(t,e,i,n,r,a,s,o,c){i|=0,n|=0,r|=0,a|=0,s|=0,o|=0,c|=0;var h,u=0;if(h=1+(0|l[(t|=0)+(5640*(e|=0)|0)+420>>2])|0,l[t+(5640*e|0)+500>>2]=l[t+(5640*e|0)+428>>2],l[t+(5640*e|0)+516>>2]=l[t+(5640*e|0)+440>>2],l[t+(5640*e|0)+496>>2]=l[t+(5640*e|0)+424>>2],l[t+(5640*e|0)+512>>2]=l[t+(5640*e|0)+436>>2],l[t+(5640*e|0)+508>>2]=l[t+(5640*e|0)+432>>2],l[t+(5640*e|0)+492>>2]=0,l[t+(5640*e|0)+460>>2]=l[t+(5640*e|0)+456>>2],l[t+(5640*e|0)+504>>2]=0,l[t+(5640*e|0)+520>>2]=s,l[t+(5640*e|0)+524>>2]=i,l[t+(5640*e|0)+528>>2]=n,l[t+(5640*e|0)+532>>2]=r,l[t+(5640*e|0)+536>>2]=a,l[t+(5640*e|0)+540>>2]=o,l[t+(5640*e|0)+544>>2]=c,!(h>>>0<=1))for(u=1,t=t+(5640*e|0)+572|0;l[t+76>>2]=l[t+4>>2],l[t+92>>2]=l[t+16>>2],l[t+72>>2]=l[t>>2],l[t+88>>2]=l[t+12>>2],e=0|l[t+8>>2],l[t+84>>2]=e,l[t+36>>2]=l[t+32>>2],l[t+80>>2]=0,l[t+68>>2]=e>>>0>(0|l[t+-64>>2])>>>0?e:0,l[t+96>>2]=s,l[t+100>>2]=i,l[t+104>>2]=n,l[t+108>>2]=r,l[t+112>>2]=a,l[t+116>>2]=o,l[t+120>>2]=c,(0|(u=u+1|0))!=(0|h);)t=t+148|0}function We(t,e,i,n,a,o,c){t|=0,i|=0,n|=0,a|=0,o|=0,c|=0;var h,u,d,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,w=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,C=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0,Y=0,X=0,J=0,q=0;q=0|l[76+(e|=0)>>2],h=0|function(t){t|=0;var e=0,i=0;for(e=696;!(-1==(0|(i=0|l[e>>2]))|(0|i)==(0|t));)e=e+12|0;return e+4|0}(0|l[(d=q+(5640*i|0)+424+(148*n|0)+36|0)>>2]),l[t+(232*n|0)+40>>2]=1,u=t+(232*n|0)+44|0,l[t+(232*n|0)+80>>2]=l[d>>2];do{if(8&r[e+93>>0]){if((65535&(f=0|s[e>>1]))>2){if(!(1==(0|c)&(65535&f)>6|(f+-3&65535)<4))break}else if(!(1==(0|c)|(f+-3&65535)<4))break;t:do{if((0|o)<3)for(y=q+(5640*i|0)+424+(148*n|0)+72|0,b=q+(5640*i|0)+424+(148*n|0)+88|0,v=t+(232*n|0)+56|0,w=q+(5640*i|0)+424+(148*n|0)+76|0,x=t+(232*n|0)+48|0,A=q+(5640*i|0)+424+(148*n|0)+92|0,M=t+(232*n|0)+60|0,S=q+(5640*i|0)+424+(148*n|0)+68|0,E=t+(232*n|0)+64|0,T=q+(5640*i|0)+424+(148*n|0)+84|0,I=t+(232*n|0)+52|0,C=q+(5640*i|0)+424+(148*n|0)+80|0,k=t+(232*n|0)+68|0,P=q+(5640*i|0)+424+(148*n|0)+96|0,B=t+(232*n|0)+72|0,L=q+(5640*i|0)+424+(148*n|0)+100|0,R=t+(232*n|0)+96|0,D=q+(5640*i|0)+424+(148*n|0)+108|0,O=t+(232*n|0)+104|0,G=q+(5640*i|0)+424+(148*n|0)+104|0,F=t+(232*n|0)+100|0,N=q+(5640*i|0)+424+(148*n|0)+112|0,z=t+(232*n|0)+108|0,f=o;;){switch(c=f,0|r[h+(f=f+1|0)>>0]){case 82:p=v,m=b,g=u,_=y,J=10;break;case 67:p=M,m=A,g=x,_=w,J=10;break;case 76:p=I,m=T,g=E,_=S,J=10;break;case 80:(0|l[d>>2])>>>0<2?(p=B,m=P,g=k,_=C,J=10):(l[R>>2]=l[L>>2],l[O>>2]=l[D>>2],p=z,m=N,g=F,_=G,J=10)}if(10==(0|J)&&(J=0,l[g>>2]=l[_>>2],l[p>>2]=l[m>>2]),(0|c)>=2)break t}}while(0);if(f=(0|o)>-1,!a){if(!f)return;for(m=q+(5640*i|0)+424+(148*n|0)+76|0,g=q+(5640*i|0)+424+(148*n|0)+132|0,_=t+(232*n|0)+48|0,y=t+(232*n|0)+60|0,b=q+(5640*i|0)+424+(148*n|0)+72|0,v=q+(5640*i|0)+424+(148*n|0)+128|0,w=t+(232*n|0)+56|0,x=q+(5640*i|0)+424+(148*n|0)+68|0,A=q+(5640*i|0)+424+(148*n|0)+124|0,M=t+(232*n|0)+64|0,S=t+(232*n|0)+52|0,E=q+(5640*i|0)+424+(148*n|0)+80|0,T=q+(5640*i|0)+424+(148*n|0)+136|0,I=t+(232*n|0)+68|0,C=t+(232*n|0)+72|0,k=q+(5640*i|0)+424+(148*n|0)+100|0,P=q+(5640*i|0)+424+(148*n|0)+140|0,B=q+(5640*i|0)+424+(148*n|0)+108|0,L=q+(5640*i|0)+424+(148*n|0)+144|0,R=t+(232*n|0)+96|0,D=q+(5640*i|0)+424+(148*n|0)+116|0,O=t+(232*n|0)+100|0,G=t+(232*n|0)+104|0,p=q+(5640*i|0)+424+(148*n|0)+120|0,c=t+(232*n|0)+108|0,f=o;;){t:do{switch(0|r[h+f>>0]){case 67:n=0|l[m>>2],l[_>>2]=n,n=n+1|0,l[y>>2]=n,l[g>>2]=n;break;case 82:n=0|l[b>>2],l[u>>2]=n,n=n+1|0,l[w>>2]=n,l[v>>2]=n;break;case 76:n=0|l[x>>2],l[M>>2]=n,n=n+1|0,l[S>>2]=n,l[A>>2]=n;break;case 80:if((0|l[d>>2])>>>0<2){n=0|l[E>>2],l[I>>2]=n,n=n+1|0,l[C>>2]=n,l[T>>2]=n;break t}n=0|l[k>>2],o=0|l[B>>2],l[R>>2]=n,i=(i=0|l[D>>2])+n-((n>>>0)%(i>>>0)|0)|0,l[O>>2]=i,l[G>>2]=o,n=(n=0|l[p>>2])+o-((o>>>0)%(n>>>0)|0)|0,l[c>>2]=n,l[P>>2]=i,l[L>>2]=n;break t}}while(0);if(!((0|f)>0))break;f=f+-1|0}return}if(!f)return;for(W=q+(5640*i|0)+424+(148*n|0)+128|0,j=q+(5640*i|0)+424+(148*n|0)+88|0,Z=q+(5640*i|0)+424+(148*n|0)+72|0,Y=t+(232*n|0)+56|0,X=q+(5640*i|0)+424+(148*n|0)+132|0,x=q+(5640*i|0)+424+(148*n|0)+92|0,A=q+(5640*i|0)+424+(148*n|0)+76|0,M=t+(232*n|0)+48|0,S=t+(232*n|0)+60|0,E=q+(5640*i|0)+424+(148*n|0)+124|0,T=q+(5640*i|0)+424+(148*n|0)+84|0,I=q+(5640*i|0)+424+(148*n|0)+68|0,C=t+(232*n|0)+64|0,k=t+(232*n|0)+52|0,P=q+(5640*i|0)+424+(148*n|0)+136|0,B=q+(5640*i|0)+424+(148*n|0)+96|0,L=q+(5640*i|0)+424+(148*n|0)+80|0,R=t+(232*n|0)+68|0,D=t+(232*n|0)+72|0,O=q+(5640*i|0)+424+(148*n|0)+140|0,G=q+(5640*i|0)+424+(148*n|0)+104|0,F=t+(232*n|0)+96|0,N=q+(5640*i|0)+424+(148*n|0)+116|0,z=t+(232*n|0)+100|0,a=q+(5640*i|0)+424+(148*n|0)+144|0,H=q+(5640*i|0)+424+(148*n|0)+112|0,U=t+(232*n|0)+104|0,V=q+(5640*i|0)+424+(148*n|0)+120|0,v=t+(232*n|0)+108|0,w=q+(5640*i|0)+424+(148*n|0)+100|0,b=q+(5640*i|0)+424+(148*n|0)+108|0,f=1,y=o;;){_=h+y|0;t:do{switch(0|r[_>>0]){case 67:c=S,p=X,m=(0|l[X>>2])-1|0,g=M,J=35;break;case 82:c=Y,p=W,m=(0|l[W>>2])-1|0,g=u,J=35;break;case 76:c=k,p=E,m=(0|l[E>>2])-1|0,g=C,J=35;break;case 80:if((0|l[d>>2])>>>0<2){c=D,p=P,m=(0|l[P>>2])-1|0,g=R,J=35;break t}g=0|l[O>>2],m=0|l[N>>2],l[F>>2]=g-m-((g>>>0)%(m>>>0)|0),l[z>>2]=g,c=v,p=a,m=(g=0|l[a>>2])-(m=0|l[V>>2])-((g>>>0)%(m>>>0)|0)|0,g=U,J=35;break t}}while(0);35==(0|J)&&(J=0,l[g>>2]=m,l[c>>2]=l[p>>2]);t:do{if(1==(0|f))switch(0|r[_>>0]){case 82:if((0|(f=0|l[W>>2]))!=(0|l[j>>2])){l[u>>2]=f,f=f+1|0,l[Y>>2]=f,l[W>>2]=f,f=0;break t}if(!(0|je(y+-1|0,e,i,n,h))){f=0;break t}f=0|l[Z>>2],l[u>>2]=f,f=f+1|0,l[Y>>2]=f,l[W>>2]=f,f=1;break t;case 67:if((0|(f=0|l[X>>2]))!=(0|l[x>>2])){l[M>>2]=f,f=f+1|0,l[S>>2]=f,l[X>>2]=f,f=0;break t}if(!(0|je(y+-1|0,e,i,n,h))){f=0;break t}f=0|l[A>>2],l[M>>2]=f,f=f+1|0,l[S>>2]=f,l[X>>2]=f,f=1;break t;case 76:if((0|(f=0|l[E>>2]))!=(0|l[T>>2])){l[C>>2]=f,f=f+1|0,l[k>>2]=f,l[E>>2]=f,f=0;break t}if(!(0|je(y+-1|0,e,i,n,h))){f=0;break t}f=0|l[I>>2],l[C>>2]=f,f=f+1|0,l[k>>2]=f,l[E>>2]=f,f=1;break t;case 80:if((0|l[d>>2])>>>0<2){if((0|(f=0|l[P>>2]))!=(0|l[B>>2])){l[R>>2]=f,f=f+1|0,l[D>>2]=f,l[P>>2]=f,f=0;break t}if(!(0|je(y+-1|0,e,i,n,h))){f=0;break t}f=0|l[L>>2],l[R>>2]=f,f=f+1|0,l[D>>2]=f,l[P>>2]=f,f=1;break t}if((f=0|l[O>>2])>>>0<(0|l[G>>2])>>>0){l[F>>2]=f,f=(o=0|l[N>>2])+f-((f>>>0)%(o>>>0)|0)|0,l[z>>2]=f,l[O>>2]=f,f=0;break t}if((c=0|l[a>>2])>>>0<(0|l[H>>2])>>>0)l[U>>2]=c,f=0,p=(o=0|l[V>>2])+c|0,c=(c>>>0)%(o>>>0)|0;else{if(!(0|je(y+-1|0,e,i,n,h))){f=0;break t}o=0|l[b>>2],l[a>>2]=o,l[U>>2]=o,f=1,p=(c=0|l[V>>2])+o|0,c=(o>>>0)%(c>>>0)|0}q=p-c|0,l[v>>2]=q,l[a>>2]=q,q=0|l[w>>2],l[F>>2]=q,o=(o=0|l[N>>2])+q-((q>>>0)%(o>>>0)|0)|0,l[z>>2]=o,l[O>>2]=o;break t;default:f=1;break t}}while(0);if(!((0|y)>0))break;y=y+-1|0}return}}while(0);l[u>>2]=l[q+(5640*i|0)+424+(148*n|0)+72>>2],l[t+(232*n|0)+56>>2]=l[q+(5640*i|0)+424+(148*n|0)+88>>2],l[t+(232*n|0)+48>>2]=l[q+(5640*i|0)+424+(148*n|0)+76>>2],l[t+(232*n|0)+60>>2]=l[q+(5640*i|0)+424+(148*n|0)+92>>2],l[t+(232*n|0)+64>>2]=l[q+(5640*i|0)+424+(148*n|0)+68>>2],l[t+(232*n|0)+52>>2]=l[q+(5640*i|0)+424+(148*n|0)+84>>2],l[t+(232*n|0)+68>>2]=l[q+(5640*i|0)+424+(148*n|0)+80>>2],l[t+(232*n|0)+72>>2]=l[q+(5640*i|0)+424+(148*n|0)+96>>2],l[t+(232*n|0)+96>>2]=l[q+(5640*i|0)+424+(148*n|0)+100>>2],l[t+(232*n|0)+104>>2]=l[q+(5640*i|0)+424+(148*n|0)+108>>2],l[t+(232*n|0)+100>>2]=l[q+(5640*i|0)+424+(148*n|0)+104>>2],l[t+(232*n|0)+108>>2]=l[q+(5640*i|0)+424+(148*n|0)+112>>2]}function je(t,e,i,n,a){t|=0,i|=0,n|=0,a|=0;var s,o=0,c=0;if(s=0|l[76+(e|=0)>>2],!((0|t)>-1))return c=0,0|(c&=1);o=t;t:for(;;){switch(0|r[a+o>>0]){case 82:c=3;break t;case 67:c=5;break t;case 76:c=7;break t;case 80:c=9;break t}o=o+-1|0}return 3==(0|c)?(0|l[s+(5640*i|0)+424+(148*n|0)+128>>2])!=(0|l[s+(5640*i|0)+424+(148*n|0)+88>>2])?(c=1,0|(c&=1)):(c=0!=(0|je(t+-1|0,e,i,n,a)),0|(c&=1)):5==(0|c)?(0|l[s+(5640*i|0)+424+(148*n|0)+132>>2])!=(0|l[s+(5640*i|0)+424+(148*n|0)+92>>2])?(c=1,0|(c&=1)):(c=0!=(0|je(t+-1|0,e,i,n,a)),0|(c&=1)):7==(0|c)?(0|l[s+(5640*i|0)+424+(148*n|0)+124>>2])!=(0|l[s+(5640*i|0)+424+(148*n|0)+84>>2])?(c=1,0|(c&=1)):(c=0!=(0|je(t+-1|0,e,i,n,a)),0|(c&=1)):9==(0|c)?(0|l[s+(5640*i|0)+424+(148*n|0)+36>>2])>>>0<2?(0|l[s+(5640*i|0)+424+(148*n|0)+136>>2])!=(0|l[s+(5640*i|0)+424+(148*n|0)+96>>2])?(c=1,0|(c&=1)):(c=0!=(0|je(o+-1|0,e,i,n,a)),0|(c&=1)):(0|l[s+(5640*i|0)+424+(148*n|0)+140>>2])!=(0|l[s+(5640*i|0)+424+(148*n|0)+104>>2])?(c=1,0|(c&=1)):(0|l[s+(5640*i|0)+424+(148*n|0)+144>>2])!=(0|l[s+(5640*i|0)+424+(148*n|0)+112>>2])?(c=1,0|(c&=1)):(c=0!=(0|je(o+-1|0,e,i,n,a)),0|(c&=1)):0}function Ze(t,e,i){t|=0,i|=0;var n,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,w=0,x=0,A=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0;if(n=0|l[76+(e|=0)>>2],O=(i>>>0)%((L=0|l[e+24>>2])>>>0)|0,L=(i>>>0)/(L>>>0)|0,R=0|l[e+4>>2],k=0|l[e+12>>2],D=(0|(I=(0|C(k,O))+R|0))>(0|(D=0|l[t>>2]))?I:D,O=(0|(R=(0|C(k,O+1|0))+R|0))<(0|(O=0|l[t+8>>2]))?R:O,R=0|l[e+8>>2],k=0|l[e+16>>2],B=(0|(I=(0|C(k,L))+R|0))>(0|(B=0|l[t+4>>2]))?I:B,L=(0|(R=(0|C(k,L+1|0))+R|0))<(0|(L=0|l[t+12>>2]))?R:L,R=0|l[t+16>>2])for(E=D+-1|0,T=B+-1|0,I=O+-1|0,k=L+-1|0,u=2147483647,S=0|l[n+(5640*i|0)+5584>>2],x=0|l[t+24>>2],A=0,h=2147483647,d=0,a=0;;){if(e=(E+(b=0|l[x>>2])|0)/(0|b)|0,t=(T+(v=0|l[x+4>>2])|0)/(0|v)|0,s=(I+b|0)/(0|b)|0,o=(k+v|0)/(0|v)|0,(w=0|l[S+4>>2])>>>0<=d>>>0?w&&(P=5):(d=w,P=5),5==(0|P)&&(P=0,_=0|br(0|e,((0|e)<0)<<31>>31|0,-1,-1),y=M,m=0|br(0|t,((0|t)<0)<<31>>31|0,-1,-1),g=M,f=0|br(0|s,((0|s)<0)<<31>>31|0,-1,-1),p=M,o=0|br(0|o,((0|o)<0)<<31>>31|0,-1,-1),c=M,F=0|l[S+812>>2],e=v<<(s=0|l[S+944>>2])+(G=w+-1|0),h=h>>>0<(z=b<<G+F)>>>0?h:z,u=u>>>0<e>>>0?u:e,N=0|Sr(0|(N=0|br(0|_,0|y,0|(e=0|Tr(1,0,0|G)),0|(z=M))),0|M,0|G),t=0|Sr(0|(t=0|br(0|m,0|g,0|e,0|z)),0|M,0|G),H=0|Sr(0|(H=0|br(0|f,0|p,0|e,0|z)),0|M,0|G),G=0|Sr(0|(z=0|br(0|o,0|c,0|e,0|z)),0|M,0|G),z=0|Sr(0|(z=0|br(0|(z=0|br(0|(z=0|Tr(1,0,0|F)),0|M,-1,-1)),0|M,0|H,((0|H)<0)<<31>>31|0)),0|M,0|F),e=0|Sr(0|(e=0|br(0|(e=0|br(0|(e=0|Tr(1,0,0|s)),0|M,-1,-1)),0|M,0|G,((0|G)<0)<<31>>31|0)),0|M,0|s),a=(s=0|C((0|N)==(0|H)?0:(z<<F)-(N>>F<<F)>>F,(0|t)==(0|G)?0:(e<<s)-(t>>s<<s)>>s))>>>0>a>>>0?s:a,w>>>0>1))for(t=-1,s=1;F=0|l[S+812+(s<<2)>>2],z=v<<(e=0|l[S+944+(s<<2)>>2])+(N=t+-1+w|0),h=h>>>0<(t=b<<N+F)>>>0?h:t,u=u>>>0<z>>>0?u:z,G=0|Sr(0|(G=0|br(0|_,0|y,0|(z=0|Tr(1,0,0|N)),0|(t=M))),0|M,0|N),H=0|Sr(0|(H=0|br(0|m,0|g,0|z,0|t)),0|M,0|N),U=0|Sr(0|(U=0|br(0|f,0|p,0|z,0|t)),0|M,0|N),N=0|Sr(0|(t=0|br(0|o,0|c,0|z,0|t)),0|M,0|N),t=0|Sr(0|(t=0|br(0|(t=0|br(0|(t=0|Tr(1,0,0|F)),0|M,-1,-1)),0|M,0|U,((0|U)<0)<<31>>31|0)),0|M,0|F),z=0|Sr(0|(z=0|br(0|(z=0|br(0|(z=0|Tr(1,0,0|e)),0|M,-1,-1)),0|M,0|N,((0|N)<0)<<31>>31|0)),0|M,0|e),a=(e=0|C((0|G)==(0|U)?0:(t<<F)-(G>>F<<F)>>F,(0|H)==(0|N)?0:(z<<e)-(H>>e<<e)>>e))>>>0>a>>>0?e:a,(e=s+1|0)>>>0<w>>>0;)t=~s,s=e;if((A=A+1|0)>>>0>=R>>>0)break;S=S+1080|0,x=x+52|0}else d=0,u=2147483647,h=2147483647,a=0;if(4&r[n+(5640*i|0)+5636>>0])Ve(n,i,D,O,B,L,a,h,u);else if(s=1+(0|l[n+(5640*i|0)+420>>2])|0)for(o=0|l[n+(5640*i|0)+8>>2],c=0|l[n+(5640*i|0)+4>>2],t=0,e=n+(5640*i|0)+424|0;l[e+76>>2]=0,l[e+92>>2]=R,l[e+72>>2]=0,l[e+88>>2]=d,l[e+68>>2]=0,l[e+84>>2]=o,l[e+36>>2]=c,l[e+80>>2]=0,l[e+96>>2]=a,l[e+100>>2]=D,l[e+104>>2]=O,l[e+108>>2]=B,l[e+112>>2]=L,l[e+116>>2]=h,l[e+120>>2]=u,(0|(t=t+1|0))!=(0|s);)e=e+148|0}function Ye(t){var e=0,i=0,n=0,a=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,w=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0,Y=0,X=0,J=0,q=0,Q=0,K=0,$=0,tt=0,et=0,it=0,nt=0,rt=0,at=0,st=0,ot=0,lt=0,ct=0,ht=0,ut=0,dt=0,ft=0,pt=0,mt=0,gt=0,_t=0,yt=0,bt=0,vt=0,wt=0,xt=0,At=0,Mt=0,St=0,Et=0,Tt=0,It=0,Ct=0,kt=0,Pt=0,Bt=0,Lt=0,Rt=0,Dt=0,Ot=0,Gt=0,Ft=0,Nt=0,zt=0,Ht=0,Ut=0,Vt=0,Wt=0,jt=0,Zt=0,Yt=0,Xt=0,Jt=0,qt=0,Qt=0,Kt=0,$t=0,te=0,ee=0,ie=0,ne=0,re=0,ae=0,se=0,oe=0,le=0,ce=0,he=0,ue=0,de=0,fe=0;switch(0|l[80+(t|=0)>>2]){case 0:for(0|l[(e=t+40|0)>>2]?(l[e>>2]=0,w=0|l[t+64>>2],l[t+36>>2]=w,i=5):(u=P=t+32|0,P=0|l[P>>2],i=18);;){if(5==(0|i)){if(w>>>0>=(0|l[t+52>>2])>>>0){fe=0,i=153;break}S=0|l[t+44>>2],l[t+28>>2]=S,i=7}else 18==(0|i)&&(c=P+1|0,l[u>>2]=c,a=u,i=14);for(;;){if(7==(0|i)){if(i=0,S>>>0>=(0|l[t+56>>2])>>>0){i=21;break}E=0|l[t+48>>2],l[(m=t+24|0)>>2]=E}else if(14==(0|i)){if(c>>>0<(0|l[t+72>>2])>>>0){i=16;break}f=B=t+24|0,B=0|l[B>>2],i=19}for(;;){if(19==(0|i)&&(i=0,E=B+1|0,l[f>>2]=E,m=f),E>>>0>=(0|l[t+60>>2])>>>0){i=20;break}if(T=0|l[t+196>>2],(I=0|l[t+28>>2])>>>0<(0|l[T+(E<<4)+8>>2])>>>0)break;f=m,B=E,i=19}20!=(0|i)?(e=0|l[T+(E<<4)+12>>2],0|r[t>>0]||(de=0|C(0|l[e+(I<<4)+12>>2],0|l[e+(I<<4)+8>>2]),l[t+72>>2]=de),c=0|l[t+68>>2],l[(a=t+32|0)>>2]=c,i=14):(S=1+(0|l[(i=t+28|0)>>2])|0,l[i>>2]=S,i=7)}if(16==(0|i)){if(i=0,k=0|C(0|l[t+8>>2],0|l[t+36>>2]),k=(k=(k=(0|C(0|l[t+12>>2],0|l[t+28>>2]))+k|0)+(0|C(0|l[t+16>>2],0|l[t+24>>2]))|0)+(0|C(0|l[t+20>>2],c))|0,k=(0|l[t+4>>2])+(k<<1)|0,0|s[k>>1]){u=a,P=c,i=18;continue}break}21!=(0|i)||(w=1+(0|l[(i=t+36|0)>>2])|0,l[i>>2]=w,i=5)}return 153==(0|i)?0|fe:(s[k>>1]=1,0|(t=1));case 1:for(0|l[(e=t+40|0)>>2]?(l[e>>2]=0,L=0|l[t+44>>2],l[t+28>>2]=L,i=25):(h=A=t+32|0,A=0|l[A>>2],i=38);;){if(25==(0|i)){if(L>>>0>=(0|l[t+56>>2])>>>0){fe=0,i=153;break}_=0|l[t+64>>2],l[t+36>>2]=_,i=27}else 38==(0|i)&&(o=A+1|0,l[h>>2]=o,n=h,i=34);for(;;){if(27==(0|i)){if(i=0,_>>>0>=(0|l[t+52>>2])>>>0){i=41;break}y=0|l[t+48>>2],l[(p=t+24|0)>>2]=y}else if(34==(0|i)){if(o>>>0<(0|l[t+72>>2])>>>0){i=36;break}d=M=t+24|0,M=0|l[M>>2],i=39}for(;;){if(39==(0|i)&&(i=0,y=M+1|0,l[d>>2]=y,p=d),y>>>0>=(0|l[t+60>>2])>>>0){i=40;break}if(b=0|l[t+196>>2],(v=0|l[t+28>>2])>>>0<(0|l[b+(y<<4)+8>>2])>>>0)break;d=p,M=y,i=39}40!=(0|i)?(e=0|l[b+(y<<4)+12>>2],0|r[t>>0]||(de=0|C(0|l[e+(v<<4)+12>>2],0|l[e+(v<<4)+8>>2]),l[t+72>>2]=de),o=0|l[t+68>>2],l[(n=t+32|0)>>2]=o,i=34):(_=1+(0|l[(i=t+36|0)>>2])|0,l[i>>2]=_,i=27)}if(36==(0|i)){if(i=0,x=0|C(0|l[t+8>>2],0|l[t+36>>2]),x=(x=(x=(0|C(0|l[t+12>>2],0|l[t+28>>2]))+x|0)+(0|C(0|l[t+16>>2],0|l[t+24>>2]))|0)+(0|C(0|l[t+20>>2],o))|0,x=(0|l[t+4>>2])+(x<<1)|0,0|s[x>>1]){h=n,A=o,i=38;continue}break}41!=(0|i)||(L=1+(0|l[(i=t+28|0)>>2])|0,l[i>>2]=L,i=25)}return 153==(0|i)?0|fe:(s[x>>1]=1,0|(t=1));case 2:if(0|l[(e=t+40|0)>>2]){if(l[e>>2]=0,l[(m=t+224|0)>>2]=0,l[(g=t+228|0)>>2]=0,0|(_=0|l[t+192>>2])){y=0|l[t+196>>2],p=0,i=0,e=0;do{if(c=0|l[y+(p<<4)+8>>2]){if(h=0|l[y+(p<<4)+12>>2],u=0|l[y+(p<<4)>>2],d=0|l[y+(p<<4)+4>>2],f=c+-1|0,Vt=u<<(0|l[h>>2])+f,Wt=d<<(0|l[h+4>>2])+f,i=0==(0|i)?Vt:i>>>0<Vt>>>0?i:Vt,e=0==(0|e)?Wt:e>>>0<Wt>>>0?e:Wt,1!=(0|c))for(a=-1,o=1;Wt=u<<(n=f+a|0)+(0|l[h+(o<<4)>>2]),n=d<<(0|l[h+(o<<4)+4>>2])+n,i=0==(0|i)?Wt:i>>>0<Wt>>>0?i:Wt,e=0==(0|e)?n:e>>>0<n>>>0?e:n,(n=o+1|0)>>>0<c>>>0;)a=~o,o=n;l[m>>2]=i,l[g>>2]=e}p=p+1|0}while((0|p)!=(0|_))}0|r[t>>0]||(l[t+104>>2]=l[t+204>>2],l[t+96>>2]=l[t+200>>2],l[t+108>>2]=l[t+212>>2],l[t+100>>2]=l[t+208>>2]),O=0|l[t+44>>2],l[t+28>>2]=O,i=54}else jt=ue=t+36|0,ue=0|l[ue>>2],i=75;for(;;){if(54==(0|i)){if(O>>>0>=(0|l[t+56>>2])>>>0){fe=0,i=153;break}Jt=0|l[t+104>>2],l[t+220>>2]=Jt,i=56}else 75==(0|i)&&(ce=ue+1|0,l[jt>>2]=ce,Zt=jt,i=71);for(;;){if(56==(0|i)){if((0|Jt)>=(0|l[t+108>>2])){i=79;break}qt=0|l[t+96>>2],l[t+216>>2]=qt,i=58}else if(71==(0|i)){if(ce>>>0<(0|l[t+52>>2])>>>0){i=73;break}Yt=de=t+24|0,de=0|l[de>>2],i=76}for(;;){if(58==(0|i)){if((0|qt)>=(0|l[t+100>>2])){i=78;break}Qt=0|l[t+48>>2],l[(Xt=t+24|0)>>2]=Qt}else 76==(0|i)&&(Qt=de+1|0,l[Yt>>2]=Qt,Xt=Yt);if(Qt>>>0>=(0|l[t+60>>2])>>>0)qt=0|l[t+224>>2],qt=(Wt=0|l[(i=t+216|0)>>2])+qt-((0|Wt)%(0|qt)|0)|0,l[i>>2]=qt,i=58;else if(i=0|l[t+196>>2],(d=0|l[t+28>>2])>>>0>=(e=0|l[i+(Qt<<4)+8>>2])>>>0)Yt=Xt,de=Qt,i=76;else{if(f=0|l[i+(Qt<<4)+12>>2],o=e+~d|0,$t=((c=0|l[t+200>>2])-1+(Kt=(h=0|l[i+(Qt<<4)>>2])<<o)|0)/(0|Kt)|0,ee=((u=0|l[t+204>>2])-1+(te=(Wt=0|l[i+(Qt<<4)+4>>2])<<o)|0)/(0|te)|0,e=((ie=Kt+-1|0)+(0|l[t+208>>2])|0)/(0|Kt)|0,i=((ne=te+-1|0)+(0|l[t+212>>2])|0)/(0|te)|0,n=(re=0|l[f+(d<<4)>>2])+o|0,a=(ae=0|l[f+(d<<4)+4>>2])+o|0,0|(0|(se=0|l[t+220>>2]))%(Wt<<a|0)){if((0|se)!=(0|u)){Yt=Xt,de=Qt,i=76;continue}if(!((ee<<o|0)%(1<<a|0)|0)){Yt=Xt,de=Qt,i=76;continue}}if(0|(0|(oe=0|l[t+216>>2]))%(h<<n|0)){if((0|oe)!=(0|c)){Yt=Xt,de=Qt,i=76;continue}if(!(($t<<o|0)%(1<<n|0)|0)){Yt=Xt,de=Qt,i=76;continue}}if(le=0|l[f+(d<<4)+8>>2]){if(!((0|ee)==(0|i)|((0|$t)==(0|e)?1:0==(0|l[f+(d<<4)+12>>2])))){i=70;break}Yt=Xt,de=Qt,i=76}else Yt=Xt,de=Qt,i=76}}70!=(0|i)?78!=(0|i)||(Jt=0|l[t+228>>2],Jt=(Wt=0|l[(i=t+220|0)>>2])+Jt-((0|Wt)%(0|Jt)|0)|0,l[i>>2]=Jt,i=56):(ce=(((ie+oe|0)/(0|Kt)|0)>>re)-($t>>re)+(0|C((((ne+se|0)/(0|te)|0)>>ae)-(ee>>ae)|0,le))|0,l[t+32>>2]=ce,ce=0|l[t+64>>2],l[(Zt=t+36|0)>>2]=ce,i=71)}if(73==(0|i)){if(i=0,he=0|C(0|l[t+8>>2],ce),he=(he=(he=(0|C(0|l[t+12>>2],0|l[t+28>>2]))+he|0)+(0|C(0|l[t+16>>2],0|l[t+24>>2]))|0)+(0|C(0|l[t+20>>2],0|l[t+32>>2]))|0,he=(0|l[t+4>>2])+(he<<1)|0,0|s[he>>1]){jt=Zt,ue=ce,i=75;continue}break}79!=(0|i)||(O=1+(0|l[(i=t+28|0)>>2])|0,l[i>>2]=O,i=54)}return 153==(0|i)?0|fe:(s[he>>1]=1,0|(t=1));case 3:if(0|l[(i=t+40|0)>>2]){if(l[i>>2]=0,l[(m=t+224|0)>>2]=0,l[(g=t+228|0)>>2]=0,0|(_=0|l[t+192>>2])){y=0|l[t+196>>2],p=0,i=0,e=0;do{if(c=0|l[y+(p<<4)+8>>2]){if(h=0|l[y+(p<<4)+12>>2],u=0|l[y+(p<<4)>>2],d=0|l[y+(p<<4)+4>>2],f=c+-1|0,ue=u<<(0|l[h>>2])+f,de=d<<(0|l[h+4>>2])+f,i=0==(0|i)?ue:i>>>0<ue>>>0?i:ue,e=0==(0|e)?de:e>>>0<de>>>0?e:de,1!=(0|c))for(a=-1,o=1;de=u<<(n=f+a|0)+(0|l[h+(o<<4)>>2]),n=d<<(0|l[h+(o<<4)+4>>2])+n,i=0==(0|i)?de:i>>>0<de>>>0?i:de,e=0==(0|e)?n:e>>>0<n>>>0?e:n,(n=o+1|0)>>>0<c>>>0;)a=~o,o=n;l[m>>2]=i,l[g>>2]=e}p=p+1|0}while((0|p)!=(0|_))}0|r[t>>0]?e=0|l[t+104>>2]:(e=0|l[t+204>>2],l[t+104>>2]=e,l[t+96>>2]=l[t+200>>2],l[t+108>>2]=l[t+212>>2],l[t+100>>2]=l[t+208>>2]),l[t+220>>2]=e,i=93}else Vt=0|l[t+24>>2],zt=t+36|0,_t=(0|l[t+196>>2])+(Vt<<4)|0,bt=zt,zt=0|l[zt>>2],i=113;for(;;){if(93==(0|i)){if((0|e)>=(0|l[t+108>>2])){fe=0,i=153;break}At=0|l[t+96>>2],l[t+216>>2]=At,i=95}else 113==(0|i)&&(Gt=zt+1|0,l[bt>>2]=Gt,gt=_t,vt=bt,Ft=Vt,i=109);for(;;){if(95==(0|i)){if((0|At)>=(0|l[t+100>>2])){i=117;break}Mt=0|l[t+48>>2],l[t+24>>2]=Mt,i=97}else if(109==(0|i)){if(Gt>>>0<(0|l[t+52>>2])>>>0){i=111;break}yt=gt,wt=Ht=t+28|0,Ht=0|l[Ht>>2],Wt=Ft,i=114}for(;;){if(97==(0|i)){if(Mt>>>0>=(0|l[t+60>>2])>>>0){i=116;break}mt=(0|l[t+196>>2])+(Mt<<4)|0,St=0|l[t+44>>2],l[(xt=t+28|0)>>2]=St,Ut=Mt}else 114==(0|i)&&(St=Ht+1|0,l[wt>>2]=St,mt=yt,xt=wt,Ut=Wt);if(St>>>0>=((de=0|l[t+56>>2])>>>0<(i=0|l[mt+8>>2])>>>0?de:i)>>>0)Mt=Ut+1|0,l[t+24>>2]=Mt,i=97;else{if(f=0|l[mt+12>>2],i=i+~St|0,Tt=((n=0|l[t+200>>2])-1+(Et=(a=0|l[mt>>2])<<i)|0)/(0|Et)|0,Ct=((o=0|l[t+204>>2])-1+(It=(de=0|l[mt+4>>2])<<i)|0)/(0|It)|0,c=((kt=Et+-1|0)+(0|l[t+208>>2])|0)/(0|Et)|0,h=((Pt=It+-1|0)+(0|l[t+212>>2])|0)/(0|It)|0,u=(Bt=0|l[f+(St<<4)>>2])+i|0,d=(Lt=0|l[f+(St<<4)+4>>2])+i|0,0|(0|(Rt=0|l[t+220>>2]))%(de<<d|0)){if((0|Rt)!=(0|o)){yt=mt,wt=xt,Ht=St,Wt=Ut,i=114;continue}if(!((Ct<<i|0)%(1<<d|0)|0)){yt=mt,wt=xt,Ht=St,Wt=Ut,i=114;continue}}if(0|(0|(Dt=0|l[t+216>>2]))%(a<<u|0)){if((0|Dt)!=(0|n)){yt=mt,wt=xt,Ht=St,Wt=Ut,i=114;continue}if(!((Tt<<i|0)%(1<<u|0)|0)){yt=mt,wt=xt,Ht=St,Wt=Ut,i=114;continue}}if(Ot=0|l[f+(St<<4)+8>>2]){if(!((0|Ct)==(0|h)|((0|Tt)==(0|c)?1:0==(0|l[f+(St<<4)+12>>2])))){i=108;break}yt=mt,wt=xt,Ht=St,Wt=Ut,i=114}else yt=mt,wt=xt,Ht=St,Wt=Ut,i=114}}108!=(0|i)?116!=(0|i)||(At=0|l[t+224>>2],At=(de=0|l[(i=t+216|0)>>2])+At-((0|de)%(0|At)|0)|0,l[i>>2]=At,i=95):(Gt=(((kt+Dt|0)/(0|Et)|0)>>Bt)-(Tt>>Bt)+(0|C((((Pt+Rt|0)/(0|It)|0)>>Lt)-(Ct>>Lt)|0,Ot))|0,l[t+32>>2]=Gt,Gt=0|l[t+64>>2],l[(vt=t+36|0)>>2]=Gt,gt=mt,Ft=Ut,i=109)}if(111==(0|i)){if(i=0,Nt=0|C(0|l[t+8>>2],Gt),Nt=(Nt=(Nt=(0|C(0|l[t+12>>2],0|l[t+28>>2]))+Nt|0)+(0|C(0|l[t+16>>2],Ft))|0)+(0|C(0|l[t+20>>2],0|l[t+32>>2]))|0,Nt=(0|l[t+4>>2])+(Nt<<1)|0,0|s[Nt>>1]){_t=gt,bt=vt,zt=Gt,Vt=Ft,i=113;continue}break}117!=(0|i)||(e=0|l[t+228>>2],e=(de=0|l[(i=t+220|0)>>2])+e-((0|de)%(0|e)|0)|0,l[i>>2]=e,i=93)}return 153==(0|i)?0|fe:(s[Nt>>1]=1,0|(t=1));case 4:for(0|l[(e=t+40|0)>>2]?(l[e>>2]=0,Z=0|l[t+48>>2],l[t+24>>2]=Z,i=121):(ut=0|l[t+24>>2],ct=t+36|0,z=(0|l[t+196>>2])+(ut<<4)|0,U=ct,ct=0|l[ct>>2],i=148);;){if(121==(0|i)){if(Z>>>0>=(0|l[t+60>>2])>>>0){fe=0,i=153;break}if(g=(e=0|l[t+196>>2])+(Z<<4)|0,l[(p=t+224|0)>>2]=0,l[(m=t+228|0)>>2]=0,0|(u=0|l[e+(Z<<4)+8>>2])){if(d=0|l[e+(Z<<4)+12>>2],f=0|l[g>>2],c=0|l[e+(Z<<4)+4>>2],h=u+-1|0,i=f<<(0|l[d>>2])+h,e=c<<(0|l[d+4>>2])+h,1!=(0|u))for(a=-1,o=1;de=f<<(n=h+a|0)+(0|l[d+(o<<4)>>2]),n=c<<(0|l[d+(o<<4)+4>>2])+n,i=0==(0|i)?de:i>>>0<de>>>0?i:de,e=0==(0|e)?n:e>>>0<n>>>0?e:n,(n=o+1|0)>>>0<u>>>0;)a=~o,o=n;l[p>>2]=i,l[m>>2]=e}0|r[t>>0]?e=0|l[t+104>>2]:(e=0|l[t+204>>2],l[t+104>>2]=e,l[t+96>>2]=l[t+200>>2],l[t+108>>2]=l[t+212>>2],l[t+100>>2]=l[t+208>>2]),l[t+220>>2]=e,R=e,D=Z,i=130}else 148==(0|i)&&(st=ct+1|0,l[U>>2]=st,N=z,V=U,ot=ut,i=144);for(;;){if(130==(0|i)){if((0|R)>=(0|l[t+108>>2])){i=152;break}Y=0|l[t+96>>2],l[t+216>>2]=Y,G=g,dt=D,i=132}else if(144==(0|i)){if(st>>>0<(0|l[t+52>>2])>>>0){i=146;break}H=N,W=ht=t+28|0,ht=0|l[ht>>2],pt=ot,i=149}for(;;){if(132==(0|i)){if((0|Y)>=(0|l[t+100>>2])){i=151;break}X=0|l[t+44>>2],l[(j=t+28|0)>>2]=X,F=G,ft=dt}else 149==(0|i)&&(X=ht+1|0,l[W>>2]=X,F=H,j=W,ft=pt);if(X>>>0>=((de=0|l[t+56>>2])>>>0<(e=0|l[F+8>>2])>>>0?de:e)>>>0)Y=0|l[t+224>>2],Y=(dt=0|l[(G=t+216|0)>>2])+Y-((0|dt)%(0|Y)|0)|0,l[G>>2]=Y,G=F,dt=ft,i=132;else{if(d=0|l[F+12>>2],e=e+~X|0,q=((i=0|l[t+200>>2])-1+(J=(n=0|l[F>>2])<<e)|0)/(0|J)|0,K=((a=0|l[t+204>>2])-1+(Q=(de=0|l[F+4>>2])<<e)|0)/(0|Q)|0,o=(($=J+-1|0)+(0|l[t+208>>2])|0)/(0|J)|0,c=((tt=Q+-1|0)+(0|l[t+212>>2])|0)/(0|Q)|0,h=(et=0|l[d+(X<<4)>>2])+e|0,u=(it=0|l[d+(X<<4)+4>>2])+e|0,0|(0|(nt=0|l[t+220>>2]))%(de<<u|0)){if((0|nt)!=(0|a)){H=F,W=j,ht=X,pt=ft,i=149;continue}if(!((K<<e|0)%(1<<u|0)|0)){H=F,W=j,ht=X,pt=ft,i=149;continue}}if(0|(0|(rt=0|l[t+216>>2]))%(n<<h|0)){if((0|rt)!=(0|i)){H=F,W=j,ht=X,pt=ft,i=149;continue}if(!((q<<e|0)%(1<<h|0)|0)){H=F,W=j,ht=X,pt=ft,i=149;continue}}if(at=0|l[d+(X<<4)+8>>2]){if(!((0|K)==(0|c)|((0|q)==(0|o)?1:0==(0|l[d+(X<<4)+12>>2])))){i=143;break}H=F,W=j,ht=X,pt=ft,i=149}else H=F,W=j,ht=X,pt=ft,i=149}}143!=(0|i)?151!=(0|i)||(R=0|l[t+228>>2],R=(D=0|l[(g=t+220|0)>>2])+R-((0|D)%(0|R)|0)|0,l[g>>2]=R,g=G,D=dt,i=130):(st=((($+rt|0)/(0|J)|0)>>et)-(q>>et)+(0|C((((tt+nt|0)/(0|Q)|0)>>it)-(K>>it)|0,at))|0,l[t+32>>2]=st,st=0|l[t+64>>2],l[(V=t+36|0)>>2]=st,N=F,ot=ft,i=144)}if(146==(0|i)){if(i=0,lt=0|C(0|l[t+8>>2],st),lt=(lt=(lt=(0|C(0|l[t+12>>2],0|l[t+28>>2]))+lt|0)+(0|C(0|l[t+16>>2],ot))|0)+(0|C(0|l[t+20>>2],0|l[t+32>>2]))|0,lt=(0|l[t+4>>2])+(lt<<1)|0,0|s[lt>>1]){z=N,U=V,ct=st,ut=ot,i=148;continue}break}152!=(0|i)||(Z=D+1|0,l[t+24>>2]=Z,i=121)}return 153==(0|i)?0|fe:(s[lt>>1]=1,0|(t=1));default:return 0|(t=0)}return 0}function Xe(t){t|=0;var e=0,i=0;return(e=0|Ht(1,44))?(r[(i=e+40|0)>>0]=-2&r[i>>0]|0!=(0|t),t=0|Ht(1,4),l[e+20>>2]=t,0|t?0|(i=e):(jt(e),0|(i=0))):0|(e=0)}function Je(t,e,i){e|=0,i|=0;var n,r,a,s,o,c,h,u,d,f,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0;if(f=w,w=w+1200|0,u=f,p=0|l[l[20+(t|=0)>>2]>>2],m=0|l[(d=p+16|0)>>2]){o=p+20|0,c=8+(0|l[t+32>>2])|0,h=88+(0|l[t+28>>2])|0,a=t+24|0,s=0==(0|e),n=0==(0|i),r=e+-1|0,H=0,p=m;do{if(y=0|l[o>>2],b=0|l[c>>2],v=0|l[(N=y+(52*H|0)+16|0)>>2],b){if(v){m=0|l[h>>2],g=.0625*+((0|l[(0|l[24+(0|l[a>>2])>>2])+(52*H|0)+24>>2])>>>0),t=0;do{_=0|C(v,t),i=0;do{z=3*(_+i|0)|0,l[u+(120*t|0)+(12*i|0)>>2]=~~(+(0|l[m+(z<<2)>>2])*g),l[u+(120*t|0)+(12*i|0)+4>>2]=~~(+(0|l[m+(z+1<<2)>>2])*g),l[u+(120*t|0)+(12*i|0)+8>>2]=~~(+(0|l[m+(z+2<<2)>>2])*g),i=i+1|0}while(i>>>0<v>>>0);t=t+1|0}while(t>>>0<b>>>0);z=9}}else z=9;if(9==(0|z)&&(z=0,v)){F=y+(52*H|0)+24|0,G=0,p=v;do{if(D=0|l[F>>2],t=0|l[(O=D+(136*G|0)+24|0)>>2]){L=D+(136*G|0)+16|0,B=0,i=0|l[(R=D+(136*G|0)+20|0)>>2],p=0|l[L>>2];do{if(0|C(i,p)){I=D+(136*G|0)+28+(36*B|0)+20|0,k=u+(120*e|0)+(12*G|0)+(B<<2)|0,P=u+(120*r|0)+(12*G|0)+(B<<2)|0,T=0;do{p=0|l[I>>2],E=0|C(0|l[p+(40*T|0)+20>>2],0|l[p+(40*T|0)+16>>2]);t:do{if(0|E){if(S=p+(40*T|0)+24|0,y=0|l[k>>2],s)for(p=0;;)if(i=0|l[S>>2],m=0|l[i+(52*p|0)+4>>2],t=(0|y)>(0|(t=(0|l[(0|l[24+(0|l[a>>2])>>2])+(52*H|0)+24>>2])-(0|l[i+(52*p|0)+28>>2])|0))?y-t|0:0,l[(_=i+(52*p|0)+44|0)>>2]=0,t=0==(0|t)?0:(3*t|0)-2|0,l[m>>2]=t,0|t&&(M=0|l[i+(52*p|0)>>2],l[m+4>>2]=l[(0|l[i+(52*p|0)+8>>2])+(24*(t+-1|0)|0)>>2],l[m+16>>2]=M,!n)&&(l[_>>2]=t),(p=p+1|0)>>>0>=E>>>0)break t;A=y-(M=0|l[P>>2])|0,b=0;do{i=(t=0|l[S>>2])+(52*b|0)|0,v=0|l[t+(52*b|0)+4>>2],p=A+(M-(x=(0|l[(0|l[24+(0|l[a>>2])>>2])+(52*H|0)+24>>2])-(0|l[t+(52*b|0)+28>>2])|0))|0,p=(0|M)>(0|x)?A:(0|p)>0?p:0,p=(y=(_=0==(0|(m=0|l[(x=t+(52*b|0)+44|0)>>2])))?0==(0|p)?0:(3*p|0)-2|0:(3*p|0)+m|0)-m|0,l[v+(24*e|0)>>2]=p;do{if(0|p){if(t=0|l[t+(52*b|0)+8>>2],p=0|l[t+(24*(y+-1|0)|0)>>2],_?t=0|l[i>>2]:(_=0|l[t+(24*(m+-1|0)|0)>>2],t=(0|l[i>>2])+_|0,p=p-_|0),l[v+(24*e|0)+4>>2]=p,l[v+(24*e|0)+16>>2]=t,n)break;l[x>>2]=y}}while(0);b=b+1|0}while(b>>>0<E>>>0)}}while(0);T=T+1|0,p=0|l[L>>2],i=0|l[R>>2]}while(T>>>0<(0|C(i,p))>>>0);t=0|l[O>>2]}B=B+1|0}while(B>>>0<t>>>0);p=0|l[N>>2]}G=G+1|0}while(G>>>0<p>>>0);p=0|l[d>>2]}H=H+1|0}while(H>>>0<p>>>0);w=f}else w=f}function qe(t,e,i,n){e|=0,i=+i,n|=0;var r,a,s,o,c,h=0,u=0,d=0,f=0,p=0,m=0,g=0,y=0,b=0,v=0,w=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0;if(t=0|l[l[20+(t|=0)>>2]>>2],_[(o=t+40+(e<<3)|0)>>3]=0,h=0|l[(c=t+16|0)>>2]){a=t+20|0,s=0==(0|e),r=0==(0|n),R=0,t=h;do{if(n=0|l[a>>2],h=0|l[(L=n+(52*R|0)+16|0)>>2]){B=n+(52*R|0)+24|0,P=0,t=h;do{if(I=0|l[B>>2],n=0|l[(k=I+(136*P|0)+24|0)>>2]){E=I+(136*P|0)+16|0,S=0,h=0|l[(T=I+(136*P|0)+20|0)>>2],t=0|l[E>>2];do{if(0|C(h,t)){M=I+(136*P|0)+28+(36*S|0)+20|0,A=0;do{if(n=0|l[M>>2],x=0|C(0|l[n+(40*A|0)+20>>2],0|l[n+(40*A|0)+16>>2])){b=n+(40*A|0)+24|0,y=0;do{if(m=(p=0|l[b>>2])+(52*y|0)|0,v=0|l[p+(52*y|0)+4>>2],w=p+(52*y|0)+44|0,s?(l[w>>2]=0,g=0):g=0|l[w>>2],g>>>0<(d=0|l[p+(52*y|0)+48>>2])>>>0){f=0|l[p+(52*y|0)+8>>2],t=g,h=g;do{n=0|l[f+(24*h|0)>>2],t?(D=t+-1|0,u=+_[f+(24*h|0)+8>>3]-+_[f+(24*D|0)+8>>3],n=n-(0|l[f+(24*D|0)>>2])|0):u=+_[f+(24*h|0)+8>>3],h=h+1|0,t=(n=n?i-u/+(n>>>0)<2.220446049250313e-16:0!=u)?h:t}while(h>>>0<d>>>0);d=t}else d=g;D=d-g|0,l[v+(24*e|0)>>2]=D,D?(n=0|l[p+(52*y|0)+8>>2],t=0|l[n+(24*(h=d+-1|0)|0)>>2],g?(D=0|l[n+(24*(g=g+-1|0)|0)>>2],l[v+(24*e|0)+16>>2]=(0|l[m>>2])+D,u=+_[n+(24*h|0)+8>>3]-+_[n+(24*g|0)+8>>3],t=t-D|0):(l[v+(24*e|0)+16>>2]=l[m>>2],u=+_[n+(24*h|0)+8>>3]),l[v+(24*e|0)+4>>2]=t,_[v+(24*e|0)+8>>3]=u,_[o>>3]=u+ +_[o>>3],r||(l[w>>2]=d)):_[v+(24*e|0)+8>>3]=0,y=y+1|0}while(y>>>0<x>>>0);h=0|l[T>>2],t=0|l[E>>2]}A=A+1|0}while(A>>>0<(0|C(h,t))>>>0);n=0|l[k>>2]}S=S+1|0}while(S>>>0<n>>>0);t=0|l[L>>2]}P=P+1|0}while(P>>>0<t>>>0);t=0|l[c>>2]}R=R+1|0}while(R>>>0<t>>>0)}}function Qe(t,e,i,n,a){e|=0,i|=0,n|=0,a|=0;var o,c,h,u,d,f,p=0,g=0,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0,Y=0,X=0,J=0,q=0,Q=0,K=0,$=0,tt=0;if(f=w,w=w+800|0,u=f,d=0|l[28+(t|=0)>>2],c=0|l[l[t+20>>2]>>2],h=0|l[t+32>>2],l[(o=c+24|0)>>2]=0,Q=0|l[c+16>>2]){K=t+24|0,q=0|l[c+20>>2],J=0,b=1.7976931348623157e308,v=0,y=0,p=0;do{if(l[(Y=q+(52*J|0)+48|0)>>2]=0,X=0|l[q+(52*J|0)+16>>2]){Z=0|l[q+(52*J|0)+24>>2],j=0,g=0;do{if(H=0|l[Z+(136*j|0)+24>>2]){V=0==(0|(U=0|C(0|l[Z+(136*j|0)+20>>2],0|l[Z+(136*j|0)+16>>2]))),z=0;do{if(!V){N=0|l[Z+(136*j|0)+28+(36*z|0)+20>>2],F=0;do{if(O=0|C(0|l[N+(40*F|0)+20>>2],0|l[N+(40*F|0)+16>>2])){G=N+(40*F|0)+24|0,D=0;do{if(L=0|l[G>>2],k=0|l[L+(52*D|0)+48>>2]){B=8+(P=0|l[L+(52*D|0)+8>>2])|0,E=0;do{S=0|l[P+(24*E|0)>>2],E?(tt=E+-1|0,x=+_[P+(24*E|0)+8>>3]-+_[P+(24*tt|0)+8>>3],S=S-(0|l[P+(24*tt|0)>>2])|0):x=+_[B>>3],S&&(b=(W=x/+(0|S))<b?W:b,v=W>v?W:v),E=E+1|0}while(E>>>0<k>>>0)}p=(tt=0|C((0|l[L+(52*D|0)+24>>2])-(0|l[L+(52*D|0)+16>>2])|0,(0|l[L+(52*D|0)+20>>2])-(0|l[L+(52*D|0)+12>>2])|0))+p|0,l[o>>2]=p,g=tt+g|0,l[Y>>2]=g,D=D+1|0}while(D>>>0<O>>>0)}F=F+1|0}while(F>>>0<U>>>0)}z=z+1|0}while(z>>>0<H>>>0)}j=j+1|0}while(j>>>0<X>>>0)}else g=0;y+=(W=+(1<<l[(0|l[24+(0|l[K>>2])>>2])+(52*J|0)+24>>2]|0)-1)*W*+(0|g),J=J+1|0}while(J>>>0<Q>>>0);W=b}else W=1.7976931348623157e308,v=0,y=0,p=0;if(V=0!=(0|a)){if(Q=0|l[a+88>>2],K=0|l[t+36>>2],l[Q+(592*K|0)+552>>2]=p,_[Q+(592*K|0)+560>>3]=+_[c+32>>3],tt=0|zt(l[(p=h+8|0)>>2]<<3),l[Q+(592*K|0)>>2]=tt,!tt)return w=f,0|(tt=0)}else p=h+8|0;if(!(0|l[p>>2]))return w=f,0|(tt=1);for(D=c+32|0,O=d+93|0,G=a+88|0,F=t+36|0,N=c+40|0,z=t+24|0,H=t+8|0,U=t+16|0,L=0;;){if(k=(K=(M=+m[h+20+(L<<2)>>2])>0)&(k=~~+I(+M)>>>0)>>>0<n>>>0?k:n,M=+m[h+5184+(L<<2)>>2],R=+_[D>>3]-y/+T(10,+M/10),0==(1&(tt=0|r[O>>0]))|1^K&&!(0!=(4&tt)&M>0))b=W;else{if(!(B=0|Ji(0|l[z>>2],d))){p=0,$=56;break}if(P=L+1|0,S=u+(L+-1<<3)|0,E=c+40+(L<<3)|0,L){g=0,b=0,A=v,M=W;do{qe(t,L,x=.5*(M+A),0);do{if(4&r[O>>0]){if(((0|s[d>>1])-3&65535)>=4){if(+_[S>>3]+ +_[E>>3]<R){b=x,A=x;break}M=x,$=47;break}0|Zi(B,0|l[F>>2],c,P,e,i,k,a,0|l[H>>2],0|l[t>>2],0|l[U>>2],0)?+_[S>>3]+ +_[E>>3]<R?(b=x,A=x):(M=x,$=47):M=x}else 0|Zi(B,0|l[F>>2],c,P,e,i,k,a,0|l[H>>2],0|l[t>>2],0|l[U>>2],0)?(b=x,A=x,$=47):M=x}while(0);47==(0|$)&&($=0),g=g+1|0}while(128!=(0|g))}else{g=0,b=0,A=v,M=W;do{qe(t,0,x=.5*(M+A),0);do{if(4&r[O>>0]){if(((0|s[d>>1])-3&65535)>=4){if(+_[N>>3]<R){b=x,A=x;break}M=x,$=39;break}0|Zi(B,0|l[F>>2],c,P,e,i,k,a,0|l[H>>2],0|l[t>>2],0|l[U>>2],0)?+_[N>>3]<R?(b=x,A=x):(M=x,$=39):M=x}else 0|Zi(B,0|l[F>>2],c,P,e,i,k,a,0|l[H>>2],0|l[t>>2],0|l[U>>2],0)?(b=x,A=x,$=39):M=x}while(0);39==(0|$)&&($=0),g=g+1|0}while(128!=(0|g))}qi(B),b=0==b?x:b}if(V&&(_[(0|l[(0|l[G>>2])+(592*(0|l[F>>2])|0)>>2])+(L<<3)>>3]=b),qe(t,L,b,1),b=L?+_[u+(L+-1<<3)>>3]+ +_[c+40+(L<<3)>>3]:+_[N>>3],_[u+(L<<3)>>3]=b,(L=L+1|0)>>>0>=(0|l[p>>2])>>>0){p=1,$=56;break}}return 56==(0|$)?(w=f,0|p):0}function Ke(t,e,i){e|=0,i|=0;var n,r=0,a=0;return l[24+(t|=0)>>2]=e,l[t+28>>2]=i,r=0|Ht(1,848),l[l[(n=t+20|0)>>2]>>2]=r,r?(a=0|Ht(0|l[(r=e+16|0)>>2],52),e=0|l[l[n>>2]>>2],l[e+20>>2]=a,a?(l[e+16>>2]=l[r>>2],l[t>>2]=l[i+84>>2],0|(a=1)):0|(a=0)):0|(i=0)}function $e(t){var e,i=0,n=0,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0;if(t|=0){i=0|l[(e=t+20|0)>>2];do{if(0|i){if(y=0==(1&r[t+40>>0])?3:4,n=0|l[i>>2]){if(i=0|l[(m=n+20|0)>>2],0|l[(p=n+16|0)>>2]){for(f=0;;){if(0|(n=0|l[(d=i+24|0)>>2])){if(u=((h=0|l[i+28>>2])>>>0)/136|0,h>>>0>135){for(h=0;;){if(0|(a=0|l[(c=n+48|0)>>2])){if(o=((s=0|l[n+52>>2])>>>0)/40|0,s>>>0>39){for(s=0;ui(0|l[(b=a+32|0)>>2]),l[b>>2]=0,ui(0|l[(b=a+36|0)>>2]),l[b>>2]=0,ia[7&y](a),!((s=s+1|0)>>>0>=o>>>0);)a=a+40|0;a=0|l[c>>2]}jt(a),l[c>>2]=0}if(0|(a=0|l[(c=n+84|0)>>2])){if(o=((b=0|l[n+88>>2])>>>0)/40|0,b>>>0>39){for(s=0;ui(0|l[(b=a+32|0)>>2]),l[b>>2]=0,ui(0|l[(b=a+36|0)>>2]),l[b>>2]=0,ia[7&y](a),!((s=s+1|0)>>>0>=o>>>0);)a=a+40|0;a=0|l[c>>2]}jt(a),l[c>>2]=0}if(0|(a=0|l[(c=n+120|0)>>2])){if(o=((b=0|l[n+124>>2])>>>0)/40|0,b>>>0>39){for(s=0;ui(0|l[(b=a+32|0)>>2]),l[b>>2]=0,ui(0|l[(b=a+36|0)>>2]),l[b>>2]=0,ia[7&y](a),!((s=s+1|0)>>>0>=o>>>0);)a=a+40|0;a=0|l[c>>2]}jt(a),l[c>>2]=0}if((h=h+1|0)>>>0>=u>>>0)break;n=n+136|0}n=0|l[d>>2]}jt(n),l[d>>2]=0}if(0|l[i+36>>2]&&0|(_=0|l[(g=i+32|0)>>2])&&(Vt(_),l[g>>2]=0,l[g+4>>2]=0,l[g+8>>2]=0,l[g+12>>2]=0),(f=f+1|0)>>>0>=(0|l[p>>2])>>>0)break;i=i+52|0}i=0|l[m>>2]}if(jt(i),l[m>>2]=0,jt(0|l[l[e>>2]>>2]),i=0|l[e>>2],l[i>>2]=0,!i)break}jt(i),l[e>>2]=0}}while(0);jt(t)}}function ti(t){var e,i,n,r=0,a=0,s=0;r=0|l[(n=32+(t|=0)|0)>>2],i=0|l[(e=t+40|0)>>2];do{if(r){if(i>>>0<=(0|l[(a=t+44|0)>>2])>>>0)return 0|(s=1);if(0|l[t+36>>2]){if(Vt(r),r=0|Ut(0|l[e>>2]),l[n>>2]=r,0|r){l[a>>2]=l[e>>2];break}return l[a>>2]=0,l[e>>2]=0,l[t+36>>2]=0,0|(s=0)}s=4}else s=4}while(0);do{if(4==(0|s)){if(s=0|Ut(i),l[n>>2]=s,s){l[t+44>>2]=l[e>>2];break}return 0|(s=0)}}while(0);return l[t+36>>2]=1,0|(s=1)}function ei(t,e,i){return 0|ii(t|=0,e|=0,1,1,52,i|=0)}function ii(t,e,i,n,a,s){e|=0,i|=0,n=+n,a|=0,s|=0;var o,c,h,u,d,f,p,g,_,y,b,v,x,A,S,E,T,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0,Y=0,X=0,J=0,q=0,Q=0,K=0,$=0,tt=0,et=0,it=0,nt=0,rt=0,at=0,st=0,ot=0,lt=0,ct=0,ht=0,ut=0,dt=0,ft=0,pt=0,gt=0,_t=0,yt=0,bt=0,vt=0,wt=0,xt=0,At=0,Mt=0,St=0,Et=0,Tt=0,It=0,Ct=0,kt=0,Pt=0,Bt=0,Lt=0,Rt=0,Dt=0,Ot=0,Gt=0,Ft=0,Nt=0,Zt=0,Yt=0,Xt=0,Jt=0,qt=0,Qt=0,Kt=0,$t=0,te=0,ee=0,ie=0;if(T=w,w=w+112|0,A=T+104|0,x=T+96|0,v=T+88|0,b=T+80|0,y=T+72|0,_=T+64|0,g=T+56|0,p=T+48|0,ee=T+40|0,E=T+32|0,S=T+24|0,P=0|l[28+(t|=0)>>2],f=0|l[l[t+20>>2]>>2],B=0|l[(0|l[P+76>>2])+(5640*e|0)+5584>>2],L=0|l[f+20>>2],k=0|l[t+24>>2],R=0|l[k+24>>2],I=0|l[P+24>>2],G=0|l[P+12>>2],D=(te=(0|C(G,(e>>>0)%(I>>>0)|0))+(0|l[P+4>>2])|0)>>>0>(D=0|l[k>>2])>>>0?te:D,l[f>>2]=D,te=0|br(0|G,0,0|te,0),G=(te|=0-M)>>>0<(G=0|l[k+8>>2])>>>0?te:G,l[(te=f+8|0)>>2]=G,!((0|D)>-1&(0|G)>(0|D)))return mt(s,1,19655,T),w=T,0|(ee=0);if(O=0|l[P+16>>2],I=(Kt=(0|C(O,(e>>>0)/(I>>>0)|0))+(0|l[P+8>>2])|0)>>>0>(I=0|l[k+4>>2])>>>0?Kt:I,l[(d=f+4|0)>>2]=I,Kt=0|br(0|O,0,0|Kt,0),O=(Kt|=0-M)>>>0<(O=0|l[k+12>>2])>>>0?Kt:O,l[(Kt=f+12|0)>>2]=O,!((0|I)>-1&(0|O)>(0|I)))return mt(s,1,19693,T+8|0),w=T,0|(ee=0);if(!(0|l[B+4>>2]))return mt(s,1,19731,T+16|0),w=T,0|(ee=0);if(!(0|l[(u=f+16|0)>>2]))return w=T,0|(ee=1);h=P+80|0,c=t+40|0,o=0==(0|i),e=0,Qt=L,k=D,P=G,t=O;t:for(;;){if(l[R+36>>2]=0,Yt=(k+-1+(Jt=0|l[R>>2])|0)/(0|Jt)|0,l[Qt>>2]=Yt,k=(I+-1+(Xt=0|l[R+4>>2])|0)/(0|Xt)|0,l[(qt=Qt+4|0)>>2]=k,P=(P+-1+Jt|0)/(0|Jt)|0,l[(Jt=Qt+8|0)>>2]=P,I=(t+-1+Xt|0)/(0|Xt)|0,l[(Xt=Qt+12|0)>>2]=I,P=P-Yt|0){if((4294967295/(P>>>0)|0)>>>0<(I=I-k|0)>>>0){$t=12;break}}else I=I-k|0;if((I=0|C(I,P))>>>0>1073741823){$t=14;break}k=I<<2,I=0|l[B+4>>2],l[(Yt=Qt+16|0)>>2]=I,P=0|l[h>>2],l[Qt+20>>2]=I>>>0<P>>>0?1:I-P|0,l[(P=Qt+40|0)>>2]=k;do{if(1&r[c>>0]){if(i=0|l[(t=Qt+32|0)>>2]){if(k>>>0<=(0|l[(L=Qt+44|0)>>2])>>>0)break;if(0|l[(I=Qt+36|0)>>2]){if(Vt(i),Zt=0|Ut(0|l[P>>2]),l[t>>2]=Zt,!Zt){$t=22;break t}l[L>>2]=l[P>>2]}else $t=19}else $t=19;if(19==(0|$t)){if($t=0,Zt=0|Ut(k),l[t>>2]=Zt,!Zt)break t;l[Qt+44>>2]=l[P>>2],I=Qt+36|0}l[I>>2]=1,I=0|l[Yt>>2]}}while(0);if(P=136*I|0,I=0|l[(t=Qt+24|0)>>2]){if(P>>>0>(0|l[(k=Qt+28|0)>>2])>>>0){if(!(I=0|Wt(I,P))){$t=31;break}l[t>>2]=I,kr(I+(Zt=0|l[k>>2])|0,0,P-Zt|0),l[k>>2]=P}}else{if(I=0|zt(P),l[t>>2]=I,!I){e=0,$t=100;break}l[Qt+28>>2]=P,kr(0|I,0,0|P)}if(Zt=0==(0|l[B+20>>2])?7:8,0|(I=0|l[Yt>>2]))for(Ot=B+8|0,Gt=B+12|0,Ft=R+24|0,Nt=B+804|0,Dt=0,Rt=0|l[t>>2],O=B+28|0;;){if(It=I,I=I+-1|0,Lt=0|l[Qt>>2],Lt=0|Sr(0|(Lt=0|br(0|(Pt=0|br(0|(Ct=0|Tr(1,0,0|I)),0|(kt=M),-1,-1)),0|(Bt=M),0|Lt,((0|Lt)<0)<<31>>31|0)),0|M,0|I),l[Rt>>2]=Lt,St=0|Sr(0|(St=0|br(0|Pt,0|Bt,0|(St=0|l[qt>>2]),((0|St)<0)<<31>>31|0)),0|M,0|I),l[Rt+4>>2]=St,k=0|Sr(0|(k=0|br(0|Pt,0|Bt,0|(k=0|l[Jt>>2]),((0|k)<0)<<31>>31|0)),0|M,0|I),l[Rt+8>>2]=k,Et=0|Sr(0|(Et=0|br(0|Pt,0|Bt,0|(Et=0|l[Xt>>2]),((0|Et)<0)<<31>>31|0)),0|M,0|I),l[Rt+12>>2]=Et,D=Lt>>(i=0|l[B+812+(Dt<<2)>>2])<<i,L=St>>(t=0|l[B+944+(Dt<<2)>>2])<<t,Tt=0|Sr(0|(Tt=0|br(0|(Tt=0|br(0|(Tt=0|Tr(1,0,0|i)),0|M,-1,-1)),0|M,0|k,((0|k)<0)<<31>>31|0)),0|M,0|i),P=0|Sr(0|(P=0|br(0|(P=0|br(0|(P=0|Tr(1,0,0|t)),0|M,-1,-1)),0|M,0|Et,((0|Et)<0)<<31>>31|0)),0|M,0|t),Tt=(Tt<<i)-D>>i,k=(0|Lt)==(0|k)?0:Tt,l[(Lt=Rt+16|0)>>2]=k,P=(0|St)==(0|Et)?0:(P<<t)-L>>t,l[Rt+20>>2]=P,0|k&&(4294967295/(Tt>>>0)|0)>>>0<P>>>0){$t=37;break t}if((St=0|C(P,k))>>>0>107374182){$t=39;break t}for(Et=40*St|0,(Tt=0==(0|Dt))?k=1:(D=0|Er(0|(D=0|br(0|D,((0|D)<0)<<31>>31|0,1,0)),0|M,1),L=0|Er(0|(L=0|br(0|L,((0|L)<0)<<31>>31|0,1,0)),0|M,1),t=t+-1|0,i=i+-1|0,k=3),l[(Mt=Rt+24|0)>>2]=k,ot=(ot=0|l[Ot>>2])>>>0<i>>>0?ot:i,lt=(lt=0|l[Gt>>2])>>>0<t>>>0?lt:t,ct=0!=(0|St),ht=0==(0|St),ut=1<<i,dt=1<<t,ft=0|br(0|(ft=0|Tr(1,0,0|ot)),0|M,-1,-1),pt=M,gt=0|br(0|(gt=0|Tr(1,0,0|lt)),0|M,-1,-1),_t=M,yt=1<<ot,bt=1<<lt,xt=0|br(0|(vt=0|Tr(1,0,0|It)),0|(wt=M),-1,-1),At=M,at=0,st=Rt+28|0;;){if(Tt?(k=0|Sr(0|(k=0|br(0|Pt,0|Bt,0|(k=0|l[Qt>>2]),((0|k)<0)<<31>>31|0)),0|M,0|I),P=0|Sr(0|(P=0|br(0|Pt,0|Bt,0|(P=0|l[qt>>2]),((0|P)<0)<<31>>31|0)),0|M,0|I),G=0|Sr(0|(G=0|br(0|Pt,0|Bt,0|(G=0|l[Jt>>2]),((0|G)<0)<<31>>31|0)),0|M,0|I),V=0,F=N=0|l[Xt>>2],N=((0|N)<0)<<31>>31,z=Ct,H=kt,U=I):(V=at+1|0,k=0|l[Qt>>2],k=0|Sr(0|(k=0|br(0|(H=0|vr(0|xt,0|At,0|(H=0|Tr(1&V|0,0,0|I)),0|M)),0|(z=M),0|k,((0|k)<0)<<31>>31|0)),0|M,0|It),P=0|l[qt>>2],P=0|Sr(0|(P=0|br(0|(G=0|vr(0|xt,0|At,0|(N=0|Tr(V>>>1|0,0,0|I)),0|(F=M))),0|M,0|P,((0|P)<0)<<31>>31|0)),0|M,0|It),G=0|Sr(0|(G=0|br(0|H,0|z,0|(G=0|l[Jt>>2]),((0|G)<0)<<31>>31|0)),0|M,0|It),F=0|vr(0|(z=0|l[Xt>>2]),((0|z)<0)<<31>>31|0,0|N,0|F),N=M,z=vt,H=wt,U=It),l[st+16>>2]=V,l[st>>2]=k,l[(rt=st+4|0)>>2]=P,l[(nt=st+8|0)>>2]=G,G=0|Sr(0|(G=0|br(0|(G=0|br(0|F,0|N,-1,-1)),0|M,0|z,0|H)),0|M,0|U),l[(it=st+12|0)>>2]=G,G=0|Xr[15&Zt](V),ie=.00048828125*+(0|l[O+4>>2])+1,ie=+dr(1,(0|l[Ft>>2])+G-(0|l[O>>2])|0)*ie*n,m[st+32>>2]=ie,l[st+28>>2]=(0|l[O>>2])-1+(0|l[Nt>>2]),ct&0==(0|(P=0|l[(G=st+20|0)>>2]))){if(k=0|zt(Et),l[G>>2]=k,!k){$t=48;break t}kr(0|k,0,0|Et),k=st+24|0,$t=54}else if((0|l[(k=st+24|0)>>2])>>>0<Et>>>0){if(!(P=0|Wt(P,Et))){$t=53;break t}l[G>>2]=P,kr(P+($t=0|l[k>>2])|0,0,Et-$t|0),$t=54}if(54==(0|$t)&&($t=0,l[k>>2]=Et),!ht)for(et=0,Z=0|l[G>>2];;){X=(Q=(((et>>>0)%((Y=0|l[Lt>>2])>>>0)|0)<<i)+D|0)+ut|0,J=(Y=(((et>>>0)/(Y>>>0)|0)<<t)+L|0)+dt|0,q=(0|Q)>(0|(q=0|l[st>>2]))?Q:q,l[Z>>2]=q,Q=(0|Y)>(0|(Q=0|l[rt>>2]))?Y:Q,l[(Y=Z+4|0)>>2]=Q,G=(0|X)<(0|(G=0|l[nt>>2]))?X:G,l[(X=Z+8|0)>>2]=G,P=(0|J)<(0|(P=0|l[it>>2]))?J:P,l[(J=Z+12|0)>>2]=P,q=q>>ot<<ot,Q=Q>>lt<<lt,G=0|Sr(0|(G=0|br(0|ft,0|pt,0|G,((0|G)<0)<<31>>31|0)),0|M,0|ot),P=0|Sr(0|(P=0|br(0|gt,0|_t,0|P,((0|P)<0)<<31>>31|0)),0|M,0|lt),G=(G<<ot)-q>>ot,l[(K=Z+16|0)>>2]=G,P=(P<<lt)-Q>>lt,l[(z=Z+20|0)>>2]=P,$=0|C(G,P),N=0|C($,a),F=0|l[(tt=Z+24|0)>>2];do{if(0==(0|F)&0!=(0|$)){if(k=0|zt(N),l[tt>>2]=k,!k){e=0,$t=100;break t}kr(0|k,0,0|N),k=Z+28|0,$t=64}else{if(N>>>0<=(0|l[(k=Z+28|0)>>2])>>>0)break;if(!(P=0|Wt(F,N))){$t=63;break t}l[tt>>2]=P,kr(P+($t=0|l[k>>2])|0,0,N-$t|0),$t=64}}while(0);if(64==(0|$t)&&($t=0,l[k>>2]=N,G=0|l[K>>2],P=0|l[z>>2]),k=(k=0|l[(F=Z+32|0)>>2])?0|hi(k,G,P,s):0|li(G,P,s),l[F>>2]=k,k||mt(s,2,19944,x),P=0|l[(F=Z+36|0)>>2],G=0|l[K>>2],k=0|l[z>>2],k=P?0|hi(P,G,k,s):0|li(G,k,s),l[F>>2]=k,k||mt(s,2,19966,A),0|$){j=0;do{V=(H=(((j>>>0)%((U=0|l[K>>2])>>>0)|0)<<ot)+q|0)+yt|0,W=(U=(((j>>>0)/(U>>>0)|0)<<lt)+Q|0)+bt|0;do{if(o){if(z=0|l[tt>>2],0|l[(k=z+(56*j|0)|0)>>2]){G=0|l[(P=z+(56*j|0)+32|0)>>2],N=44+(F=k=z+(56*j|0)+8|0)|0;do{l[F>>2]=0,F=F+4|0}while((0|F)<(0|N));l[P>>2]=G}else{if(N=0|zt(8192),l[k>>2]=N,!N){e=0,$t=100;break t}if(l[z+(56*j|0)+32>>2]=8192,N=0|Ht(10,32),l[z+(56*j|0)+4>>2]=N,!N){e=0,$t=100;break t}l[z+(56*j|0)+52>>2]=10,k=z+(56*j|0)+8|0}N=0|l[Z>>2],l[k>>2]=(0|H)>(0|N)?H:N,H=0|l[Y>>2],l[z+(56*j|0)+12>>2]=(0|U)>(0|H)?U:H,U=0|l[X>>2],l[z+(56*j|0)+16>>2]=(0|V)<(0|U)?V:U,V=0|l[J>>2],l[z+(56*j|0)+20>>2]=(0|W)<(0|V)?W:V}else{if(P=0|l[tt>>2],0==(0|l[(k=P+(52*j|0)+4|0)>>2])&&(z=0|Ht(100,24),l[k>>2]=z,0==(0|z))){e=0,$t=100;break t}if(0==(0|l[(k=P+(52*j|0)+8|0)>>2])&&(z=0|Ht(100,24),l[k>>2]=z,0==(0|z))){e=0,$t=100;break t}if(G=(0|H)>(0|(G=0|l[Z>>2]))?H:G,l[P+(52*j|0)+12>>2]=G,U=(0|U)>(0|(F=0|l[Y>>2]))?U:F,l[P+(52*j|0)+16>>2]=U,F=(0|V)<(0|(F=0|l[X>>2]))?V:F,l[P+(52*j|0)+20>>2]=F,W=(0|W)<(0|(V=0|l[J>>2]))?W:V,l[P+(52*j|0)+24>>2]=W,(G=0|C(W-U|0,F-G<<2))>>>0<=(0|l[(F=P+(52*j|0)+36|0)>>2])>>>0)break;if(0|(k=0|l[(P=P+(52*j|0)|0)>>2])&&jt(k+-1|0),k=0|zt(1|G),l[P>>2]=k,!k){$t=87;break t}l[F>>2]=G,r[k>>0]=0,l[P>>2]=1+(0|l[P>>2])}}while(0);j=j+1|0}while(j>>>0<$>>>0)}if((et=et+1|0)>>>0>=St>>>0)break;Z=Z+40|0}if(O=O+8|0,(at=at+1|0)>>>0>=(0|l[Mt>>2])>>>0)break;st=st+36|0}if((Dt=Dt+1|0)>>>0>=(0|l[Yt>>2])>>>0)break;Rt=Rt+136|0}if((e=e+1|0)>>>0>=(0|l[u>>2])>>>0){e=1,$t=100;break}B=B+1080|0,Qt=Qt+52|0,R=R+52|0,k=0|l[f>>2],I=0|l[d>>2],P=0|l[te>>2],t=0|l[Kt>>2]}switch(0|$t){case 12:return mt(s,1,19770,S),w=T,0|(ee=0);case 14:return mt(s,1,19770,E),w=T,0|(ee=0);case 22:l[L>>2]=0,l[P>>2]=0,l[I>>2]=0;break;case 31:return mt(s,1,19803,p),jt(0|l[t>>2]),l[t>>2]=0,l[k>>2]=0,w=T,0|(ee=0);case 37:return mt(s,1,19770,g),w=T,0|(ee=0);case 39:return mt(s,1,19770,_),w=T,0|(ee=0);case 48:return mt(s,1,19843,y),w=T,0|(ee=0);case 53:return mt(s,1,19843,b),jt(0|l[G>>2]),l[G>>2]=0,l[k>>2]=0,w=T,0|(ee=0);case 63:return jt(0|l[tt>>2]),l[tt>>2]=0,l[k>>2]=0,mt(s,1,19886,v),w=T,0|(ee=0);case 87:return l[F>>2]=0,w=T,0|(ee=0);case 100:return w=T,0|e}return mt(s,1,19770,ee),w=T,0|(ee=0)}function ni(t,e,i,n,a,s){e|=0,i|=0,n|=0,a|=0,s|=0;var o,c,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,M=0;if(c=w,w=w+16|0,o=c,!(0|l[8+(t|=0)>>2])){if(l[t+36>>2]=e,h=0|l[76+(0|l[(x=t+28|0)>>2])>>2],l[(M=t+32|0)>>2]=h+(5640*e|0),v=t+20|0,!(A=0==(0|s))){if(u=0|l[20+(0|l[l[v>>2]>>2])>>2],m=0|l[h+(5640*e|0)+5584>>2],0|l[(g=u+16|0)>>2]){f=0|l[u+24>>2],p=0|l[(h=s+88|0)>>2],u=0,d=0;do{b=f+(136*d|0)+16|0,l[p+(592*e|0)+20+(d<<2)>>2]=l[b>>2],y=f+(136*d|0)+20|0,l[p+(592*e|0)+152+(d<<2)>>2]=l[y>>2],u=(0|C(0|l[y>>2],0|l[b>>2]))+u|0,l[p+(592*e|0)+284+(d<<2)>>2]=l[m+812+(d<<2)>>2],l[p+(592*e|0)+416+(d<<2)>>2]=l[m+944+(d<<2)>>2],d=d+1|0}while(d>>>0<(0|l[g>>2])>>>0)}else u=0,h=s+88|0;if(b=0|Ht(0|C(0|C(0|l[s+52>>2],u),0|l[s+56>>2]),32),l[(0|l[h>>2])+(592*e|0)+548>>2]=b,!b)return w=c,0|(s=0)}if(h=0|l[l[v>>2]>>2],0|l[(b=h+16|0)>>2])for(p=0|l[M>>2],e=0,_=u=0|l[h+20>>2],y=0|l[p+5584>>2];;){if(m=0|l[_+32>>2],h=0!=(0|(g=0|C((0|l[_+12>>2])-(0|l[_+4>>2])|0,(0|l[_+8>>2])-(0|l[_>>2])|0))),1==(0|l[y+20>>2])){if(h)for(f=y+1076|0,d=0,h=m;l[h>>2]=(0|l[h>>2])-(0|l[f>>2]),(0|(d=d+1|0))!=(0|g);)h=h+4|0}else if(h)for(f=y+1076|0,h=m,d=0;l[h>>2]=(0|l[h>>2])-(0|l[f>>2])<<11,(0|(d=d+1|0))!=(0|g);)h=h+4|0;if((e=e+1|0)>>>0>=(h=0|l[b>>2])>>>0)break;_=_+52|0,y=y+1080|0}else u=0|l[h+20>>2],p=0|l[M>>2],h=0;m=0|C((0|l[u+12>>2])-(0|l[u+4>>2])|0,(0|l[u+8>>2])-(0|l[u>>2])|0);t:do{switch(0|l[p+16>>2]){case 0:break;case 2:if(0|l[p+5608>>2]){if(!(f=0|zt(h<<2)))return w=c,0|(s=0);if(h=0|l[b>>2])for(d=0;l[f+(d<<2)>>2]=l[u+32>>2],(0|(d=d+1|0))!=(0|h);)u=u+52|0;else h=0;if(b=0==(0|De(0|l[5608+(0|l[M>>2])>>2],m,f,h,0|l[32+(0|l[24+(0|l[t+24>>2])>>2])>>2])),jt(f),b)return w=c,0|(s=0)}break;default:if(d=0|l[u+32>>2],f=0|l[u+84>>2],h=0|l[u+136>>2],0|l[20+(0|l[p+5584>>2])>>2]){Pe(d,f,h,m);break t}Le(d,f,h,m);break t}}while(0);f=16+(h=0|l[l[v>>2]>>2])|0;t:do{if(0|l[f>>2]){d=0|l[5584+(0|l[M>>2])>>2],h=0|l[h+20>>2],u=0;e:for(;;){switch(0|l[d+20>>2]){case 1:if(!(0|Ti(h))){h=0,u=53;break e}break;case 0:if(!(0|Bi(h))){h=0,u=53;break e}}if((u=u+1|0)>>>0>=(0|l[f>>2])>>>0)break t;d=d+1080|0,h=h+52|0}if(53==(0|u))return w=c,0|h}}while(0);if(d=0|l[M>>2],!(f=0|zi(1)))return w=c,0|(s=0);do{if(1==(0|l[d+16>>2])){if(0|l[20+(0|l[d+5584>>2])>>2]){h=3,u=8;break}h=3,u=32;break}h=0|l[16+(0|l[t+24>>2])>>2],u=0|l[d+5600>>2]}while(0);if(v=0==(0|ji(f,0|l[l[v>>2]>>2],d,u,h)),Hi(f),v)return w=c,0|(s=0);if(h=0|l[x>>2],l[o>>2]=0,A||(l[s+12>>2]=0),5&r[h+93>>0]){if(!(0|Qe(t,i,o,a,s)))return w=c,0|(s=0)}else if(0|l[8+(0|l[M>>2])>>2]){h=0;do{Je(t,h,1),h=h+1|0}while(h>>>0<(0|l[8+(0|l[M>>2])>>2])>>>0)}}return 0|s&&(l[s+12>>2]=1),(h=0|Ji(0|l[t+24>>2],0|l[t+28>>2]))?(s=0!=(0|Zi(h,0|l[t+36>>2],0|l[l[t+20>>2]>>2],0|l[8+(0|l[t+32>>2])>>2],i,n,a,s,0|l[t+4>>2],0|l[t>>2],0|l[t+16>>2],1)),qi(h),w=c,0|(s&=1)):(w=c,0|(s=0))}function ri(t,e,i,n,r,a){e|=0,i|=0,n|=0,r|=0,a|=0;var s,o,c=0,h=0,u=0,d=0,f=0,p=0,g=0,_=0,y=0,b=0,v=0;if(o=w,w=w+16|0,d=o+8|0,u=o,c=o+12|0,l[(h=36+(t|=0)|0)>>2]=n,_=0|l[t+28>>2],l[(s=t+32|0)>>2]=(0|l[_+76>>2])+(5640*n|0),l[c>>2]=0,!(n=0|Ji(0|l[(y=t+24|0)>>2],_)))return w=o,0|(v=0);if(f=t+20|0,_=0==(0|function(t,e,i,n,r,a,s,o){e|=0,i|=0,n|=0,r|=0,a|=0,s|=0,o|=0;var c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0,Y=0,X=0,J=0,q=0,Q=0,K=0,$=0,tt=0;if(K=w,w=w+112|0,Q=K+64|0,Y=K+32|0,Z=K,W=K+96|0,j=K+92|0,c=0|l[(t|=0)>>2],V=0|l[(F=t+4|0)>>2],s=0|l[V+76>>2],N=s+(5640*e|0)|0,U=1+(0|l[(z=s+(5640*e|0)+420|0)>>2])|0,!(V=0|Fe(c,V,e)))return w=K,0|($=0);H=c+16|0,G=s+(5640*e|0)+12|0,O=i+20|0,R=c+24|0,L=V,t=a,s=n,B=0;t:for(;;){if(-1==(0|l[L+80>>2])){$=4;break}if(!(D=0|zt(l[H>>2]<<2))){$=6;break}if(kr(0|D,1,l[H>>2]<<2|0),0|Ye(L))for(T=L+24|0,I=L+28|0,k=L+36|0,P=L+32|0,E=s;;){if((0|l[G>>2])>>>0>(0|l[k>>2])>>>0)if(s=0|l[O>>2],e=0|l[T>>2],(0|l[I>>2])>>>0<(0|l[s+(52*e|0)+20>>2])>>>0){if(l[D+(e<<2)>>2]=0,S=0|l[F>>2],l[j>>2]=0,!(0|Xi(S,s,N,L,W,E,j,t,o))){$=45;break t}if(s=0|l[j>>2],0|l[W>>2]){M=t-s|0,S=E+s|0,l[j>>2]=0,e=0|l[(0|l[O>>2])+(52*(0|l[T>>2])|0)+24>>2],i=0|l[I>>2],a=0|l[(x=e+(136*i|0)+24|0)>>2];e:do{if(a){A=E+t|0,c=0,v=e+(136*i|0)+28|0,e=S,i=a;i:for(;;){if(a=0|l[v+20>>2],h=0|l[P>>2],(0|l[v+8>>2])!=(0|l[v>>2])&&(0|l[v+12>>2])!=(0|l[v+4>>2])&&0!=(0|(q=0|C(0|l[a+(40*h|0)+20>>2],0|l[a+(40*h|0)+16>>2])))){for(i=0,b=0|l[a+(40*h|0)+24>>2];;){if(0|l[(_=b+40|0)>>2]){a=0|l[(y=b+44|0)>>2],h=0|l[b+4>>2];do{if(a){if((0|l[h+((u=a+-1|0)<<5)+8>>2])!=(0|l[h+(u<<5)+20>>2])){h=h+(u<<5)|0;break}l[y>>2]=a+1,h=h+(a<<5)|0}else l[y>>2]=1,l[b+36>>2]=0}while(0);if(m=b+36|0,g=b+32|0,p=e,((a=0|l[(f=h+28|0)>>2])+p|0)>>>0<p>>>0|(e+a|0)>>>0>A>>>0){e=a;break i}for(u=a,d=0|l[m>>2],p=f;;){if((f=u+d|0)>>>0<d>>>0){$=29;break t}if(a=0|l[b>>2],f>>>0>(0|l[g>>2])>>>0){if(!(a=0|Wt(a,f))){$=33;break t}d=0|l[m>>2],u=0|l[p>>2],l[g>>2]=u+d,l[b>>2]=a}if(Cr(a+d|0,0|e,0|u),(u=0|l[(a=h+8|0)>>2])?d=0|l[m>>2]:(l[h>>2]=b,d=0|l[m>>2],l[h+4>>2]=d),tt=0|l[p>>2],e=e+tt|0,p=0|l[h+24>>2],f=p+u|0,l[a>>2]=f,p=(0|l[_>>2])-p|0,l[_>>2]=p,l[h+12>>2]=f,d=tt+d|0,l[m>>2]=d,l[(f=h+16|0)>>2]=(0|l[f>>2])+tt,!p)break;if(l[y>>2]=1+(0|l[y>>2]),tt=e,((a=0|l[(p=h+60|0)>>2])+tt|0)>>>0<tt>>>0|(e+a|0)>>>0>A>>>0){e=a;break i}h=h+32|0,u=a}l[b+48>>2]=l[y>>2]}if(!((i=i+1|0)>>>0<q>>>0))break;b=b+56|0}i=0|l[x>>2]}if(!((c=c+1|0)>>>0<i>>>0)){$=43;break e}v=v+36|0}A=0|l[P>>2],S=0|l[I>>2],tt=0|l[T>>2],l[Z>>2]=e,l[Z+4>>2]=M,l[Z+8>>2]=i,l[Z+12>>2]=A,l[Z+16>>2]=c,l[Z+20>>2]=S,l[Z+24>>2]=tt,mt(o,2,21892,Z),e=0}else e=S,$=43}while(0);43==(0|$)&&($=0,e=e-S|0,l[j>>2]=e),s=e+s|0}tt=0|l[T>>2],M=0|l[I>>2],e=(0|l[R>>2])+(52*tt|0)+36|0,S=0|l[e>>2],l[e>>2]=M>>>0>S>>>0?M:S,e=s,s=tt}else $=47;else s=0|l[O>>2],$=47;if(47==(0|$)){if($=0,tt=0|l[F>>2],l[j>>2]=0,!(0|Xi(tt,s,N,L,W,E,j,t,o)))break t;if(e=0|l[j>>2],0|l[W>>2]){if(v=t-e|0,A=0|l[T>>2],s=0|l[(0|l[O>>2])+(52*A|0)+24>>2],x=0|l[I>>2],l[j>>2]=0,y=0|l[s+(136*x|0)+24>>2]){for(b=0|l[P>>2],c=0,_=s+(136*x|0)+28|0,s=0;;){if(i=0|l[_+20>>2],(0|l[_+8>>2])!=(0|l[_>>2])&&(0|l[_+12>>2])!=(0|l[_+4>>2])&&0!=(0|(X=0|C(0|l[i+(40*b|0)+20>>2],0|l[i+(40*b|0)+16>>2]))))for(g=0|l[i+(40*b|0)+24>>2],i=0,f=s;;){if(d=0|l[(p=g+40|0)>>2]){h=0|l[(m=g+44|0)>>2],s=0|l[g+4>>2];do{if(h){if(u=h+1|0,(0|l[s+((a=h+-1|0)<<5)+8>>2])!=(0|l[s+(a<<5)+20>>2])){a=s+(a<<5)|0,u=h;break}l[m>>2]=u,a=s+(h<<5)|0}else l[m>>2]=1,l[g+36>>2]=0,a=s,u=1}while(0);if(s=0|l[a+28>>2],(h=s+f|0)>>>0<f>>>0|h>>>0>v>>>0){$=67;break t}for(f=a;tt=0|l[f+24>>2],l[(S=f+8|0)>>2]=(0|l[S>>2])+tt,d=d-tt|0;){if(u=u+1|0,l[m>>2]=u,s=0|l[f+60>>2],(a=s+h|0)>>>0<h>>>0|a>>>0>v>>>0){$=68;break t}f=f+32|0,h=a}l[p>>2]=0,s=h}else s=f;if(!((i=i+1|0)>>>0<X>>>0))break;g=g+56|0,f=s}if(!((c=c+1|0)>>>0<y>>>0))break;_=_+36|0}l[j>>2]=s}else s=0;e=s+e|0,s=A}else s=0|l[T>>2]}if(0|l[D+(s<<2)>>2]&&(J=(0|l[R>>2])+(52*s|0)+36|0,0==(0|l[J>>2]))&&(l[J>>2]=(0|l[(0|l[O>>2])+(52*s|0)+20>>2])-1),s=E+e|0,t=t-e|0,!(0|Ye(L)))break;E=s}if(jt(D),(B=B+1|0)>>>0>(0|l[z>>2])>>>0){$=79;break}L=L+232|0}if(4==(0|$))return He(V,U),w=K,0|(tt=0);if(6==(0|$))return He(V,U),w=K,0|(tt=0);if(29==(0|$))q=0|l[P>>2],Q=0|l[I>>2],tt=0|l[T>>2],l[Y>>2]=u,l[Y+4>>2]=d,l[Y+8>>2]=~u,l[Y+12>>2]=i,l[Y+16>>2]=q,l[Y+20>>2]=c,l[Y+24>>2]=Q,l[Y+28>>2]=tt,mt(o,1,21977,Y),$=45;else if(33==(0|$))jt(0|l[b>>2]),l[b>>2]=0,l[g>>2]=0,$=45;else if(67==(0|$))l[j>>2]=f,$=69;else if(68==(0|$))l[j>>2]=h,l[p>>2]=d,$=69;else if(79==(0|$))return He(V,U),l[r>>2]=s-n,w=K,0|(tt=1);return 45==(0|$)?(He(V,U),jt(D),w=K,0|(tt=0)):(69==(0|$)&&(l[Q>>2]=s,l[Q+4>>2]=v,l[Q+8>>2]=i,l[Q+12>>2]=b,l[Q+16>>2]=c,l[Q+20>>2]=x,l[Q+24>>2]=A,mt(o,1,22076,Q)),He(V,U),jt(D),w=K,0|(tt=0))}(n,0|l[h>>2],0|l[l[f>>2]>>2],e,c,i,r,a)),qi(n),_)return w=o,0|(v=0);if(n=0|l[l[f>>2]>>2],i=0|l[5584+(0|l[s>>2])>>2],t=0|l[n+20>>2],!(c=0|zi(0)))return w=o,0|(v=0);r=n+16|0;t:do{if(0|l[r>>2]){for(e=0,n=i;0|Ui(c,t,n);){if((e=e+1|0)>>>0>=(0|l[r>>2])>>>0)break t;t=t+52|0,n=n+1080|0}return Hi(c),w=o,0|(v=0)}}while(0);Hi(c),c=16+(n=0|l[l[f>>2]>>2])|0;do{if(0|l[c>>2]){for(r=0|l[5584+(0|l[s>>2])>>2],n=0|l[n+20>>2],t=0,e=0|l[24+(0|l[y>>2])>>2];;){if(i=1+(0|l[e+36>>2])|0,1==(0|l[r+20>>2])){if(!(0|Ci(n,i))){n=0,t=47;break}}else if(!(0|Di(n,i))){n=0,t=47;break}if((t=t+1|0)>>>0>=(0|l[c>>2])>>>0){t=14;break}r=r+1080|0,n=n+52|0,e=e+52|0}if(14==(0|t)){n=0|l[l[f>>2]>>2];break}if(47==(0|t))return w=o,0|n}}while(0);i=0|l[s>>2],t=0|l[n+20>>2],e=0|l[i+16>>2];do{if(0|e){if(h=0|C((0|l[t+12>>2])-(0|l[t+4>>2])|0,(0|l[t+8>>2])-(0|l[t>>2])|0),(n=0|l[(c=n+16|0)>>2])>>>0<=2){l[d>>2]=n,mt(a,1,20049,d);break}if((0|C((0|l[t+64>>2])-(0|l[t+56>>2])|0,(0|l[t+60>>2])-(0|l[t+52>>2])|0))>=(0|h)&&(0|C((0|l[t+116>>2])-(0|l[t+108>>2])|0,(0|l[t+112>>2])-(0|l[t+104>>2])|0))>=(0|h)){if(2!=(0|e)){if(n=0|l[t+32>>2],1==(0|l[20+(0|l[i+5584>>2])>>2])){Be(n,0|l[t+84>>2],0|l[t+136>>2],h);break}Re(n,0|l[t+84>>2],0|l[t+136>>2],h);break}if(!(0|l[(r=i+5604|0)>>2]))break;if(!(i=0|zt(n<<2)))return w=o,0|(v=0);if(n=0|l[c>>2])for(e=0;l[i+(e<<2)>>2]=l[t+32>>2],(0|(e=e+1|0))!=(0|n);)t=t+52|0;else n=0;if(_=0==(0|Oe(0|l[r>>2],h,i,n,0|l[32+(0|l[24+(0|l[y>>2])>>2])>>2])),jt(i),!_)break;return w=o,0|(n=0)}return mt(a,1,19988,u),w=o,0|(v=0)}}while(0);if(n=0|l[l[f>>2]>>2],!(0|l[(_=n+16|0)>>2]))return w=o,0|(v=1);for(g=0,p=0|l[n+20>>2],f=0|l[5584+(0|l[s>>2])>>2],h=0|l[24+(0|l[y>>2])>>2];;){if(d=0|l[p+24>>2],u=0|l[h+36>>2],a=(0|l[d+(136*u|0)+8>>2])-(0|l[d+(136*u|0)>>2])|0,u=(0|l[d+(136*u|0)+12>>2])-(0|l[d+(136*u|0)+4>>2])|0,d=(0|l[p+8>>2])-(0|l[p>>2])|0,n=0|l[h+24>>2],0|l[h+32>>2]?(n=c=1<<n+-1,c=0-c|0):(n=1<<n,c=0),r=n+-1|0,t=0|l[p+32>>2],n=0!=(0|u),1==(0|l[f+20>>2])){if(n&&(v=f+1076|0,0|a))for(n=0;;){for(e=0,i=t;y=(0|l[v>>2])+(0|l[i>>2])|0,l[i>>2]=(0|y)<(0|c)?c:(0|y)>(0|r)?r:y,(0|(e=e+1|0))!=(0|a);)i=i+4|0;if((0|(n=n+1|0))==(0|u))break;t=t+(d<<2)|0}}else if(n&&(b=f+1076|0,0|a))for(i=0;;){for(n=0,e=t;y=0|fr(+m[e>>2]),y=(0|l[b>>2])+y|0,l[e>>2]=(0|y)<(0|c)?c:(0|y)>(0|r)?r:y,(0|(n=n+1|0))!=(0|a);)e=e+4|0;if((0|(i=i+1|0))==(0|u))break;t=t+(d<<2)|0}if((g=g+1|0)>>>0>=(0|l[_>>2])>>>0){n=1;break}p=p+52|0,f=f+1080|0,h=h+52|0}return w=o,0|n}function ai(t,e,i){e|=0,i|=0;var n=0,a=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0;if(n=0|l[(_=24+(t|=0)|0)>>2],u=0==(0|(c=0|l[n+16>>2])))return 0|(_=1);for(d=0|l[n+24>>2],n=h=0|l[20+(0|l[l[t+20>>2]>>2])>>2],t=d,a=0,o=0;m=((m=0|l[t+24>>2])>>>3)+(0!=(7&m|0)&1)|0,g=(0|l[n+24>>2])+(136*(0|l[n+20>>2])|0)-136|0,a=(0|C(0|C(3==(0|m)?4:m,(0|l[g+8>>2])-(0|l[g>>2])|0),(0|l[g+12>>2])-(0|l[g+4>>2])|0))+a|0,(0|(o=o+1|0))!=(0|c);)n=n+52|0,t=t+52|0;if((n=a>>>0>i>>>0)|u)return 0|(_=1&(1^n));for(g=0;;){u=0|l[d+24>>2],p=0|l[h+24>>2],c=0|l[d+36>>2],f=(a=0|l[p+(136*c|0)+8>>2])-(o=0|l[p+(136*c|0)>>2])|0,p=(i=0|l[p+(136*c|0)+12>>2])-(c=0|l[p+(136*c|0)+4>>2])|0,m=(0|l[h+8>>2])-(0|l[h>>2])|0,u=(u>>>3)+(0!=(7&u|0)&1)|0;t:do{switch(1073741823&(3==(0|u)?4:u)|0){case 1:if(t=0|l[h+32>>2],n=0==(0|p)|0==(0|f),0|l[d+32>>2]){if(n)break t;for(u=a+(0|C(i+-1-c|0,f))-o|0,n=t,t=e,a=0;;){for(o=0,i=n,c=t;r[c>>0]=l[i>>2],(0|(o=o+1|0))!=(0|f);)i=i+4|0,c=c+1|0;if((0|(a=a+1|0))==(0|p))break;n=n+(m<<2)|0,t=t+f|0}e=e+u|0;break t}if(n)break t;for(u=a+(0|C(i+-1-c|0,f))-o|0,c=0,a=e;;){for(n=0,o=t,i=a;r[i>>0]=l[o>>2],(0|(n=n+1|0))!=(0|f);)o=o+4|0,i=i+1|0;if((0|(c=c+1|0))==(0|p))break;t=t+(m<<2)|0,a=a+f|0}e=e+u|0;break t;case 2:if(n=0|l[h+32>>2],t=0==(0|p)|0==(0|f),0|l[d+32>>2]){if(t)break t;for(c=e+((0|C(i+-1-c|0,(u=a<<1)-(o<<=1)|0))+u-o)|0,o=0;;){for(t=e,a=n,i=0;s[t>>1]=l[a>>2],(0|(i=i+1|0))!=(0|f);)t=t+2|0,a=a+4|0;if((0|(o=o+1|0))==(0|p)){e=c;break}e=e+(f<<1)|0,n=n+(m<<2)|0}}else{if(t)break t;for(c=e+((0|C(i+-1-c|0,(u=a<<1)-(a=o<<1)|0))+u-a)|0,a=0;;){for(t=n,o=0,i=e;s[i>>1]=l[t>>2],(0|(o=o+1|0))!=(0|f);)t=t+4|0,i=i+2|0;if((0|(a=a+1|0))==(0|p)){e=c;break}n=n+(m<<2)|0,e=e+(f<<1)|0}}break;case 4:if(!(0==(0|p)|0==(0|f)))for(c=e+((0|C(i+-1-c|0,(u=a<<2)-(n=o<<2)|0))+u-n)|0,n=0|l[h+32>>2],o=0;;){for(t=e,a=n,i=0;l[t>>2]=l[a>>2],(0|(i=i+1|0))!=(0|f);)t=t+4|0,a=a+4|0;if((0|(o=o+1|0))==(0|p)){e=c;break}e=e+(f<<2)|0,n=n+(m<<2)|0}}}while(0);if((g=g+1|0)>>>0>=(0|l[16+(0|l[_>>2])>>2])>>>0){e=1;break}h=h+52|0,d=d+52|0}return 0|e}function si(t){var e=0,i=0,n=0,r=0,a=0;if(e=0|l[24+(t|=0)>>2],!(r=0|l[e+16>>2]))return 0|(r=0);for(n=0|l[20+(0|l[l[t+20>>2]>>2])>>2],e=0|l[e+24>>2],t=0,i=0;a=((a=0|l[e+24>>2])>>>3)+(0!=(7&a|0)&1)|0,t=(0|C(0|C((0|l[n+12>>2])-(0|l[n+4>>2])|0,(0|l[n+8>>2])-(0|l[n>>2])|0),3==(0|a)?4:a))+t|0,!((i=i+1|0)>>>0>=r>>>0);)n=n+52|0,e=e+52|0;return 0|t}function oi(t,e,i){e|=0,i|=0;var n,a,o=0,c=0,u=0,f=0,p=0,m=0,g=0;if(n=0|l[24+(t|=0)>>2],m=0==(0|(p=0|l[(a=n+16|0)>>2])))o=0;else for(c=0|l[20+(0|l[l[t+20>>2]>>2])>>2],u=0|l[n+24>>2],o=0,f=0;g=((g=0|l[u+24>>2])>>>3)+(0!=(7&g|0)&1)|0,o=(0|C(0|C((0|l[c+12>>2])-(0|l[c+4>>2])|0,(0|l[c+8>>2])-(0|l[c>>2])|0),3==(0|g)?4:g))+o|0,(0|(f=f+1|0))!=(0|p);)c=c+52|0,u=u+52|0;if((o=(0|o)!=(0|i))|m)return 0|(g=1&(1^o));for(t=0|l[20+(0|l[l[t+20>>2]>>2])>>2],i=0|l[n+24>>2],m=0;;){g=0|l[i+24>>2],c=(0|l[t+8>>2])-(0|l[t>>2])|0,u=(0|l[t+12>>2])-(0|l[t+4>>2])|0,p=0|C(u,c),g=(g>>>3)+(0!=(7&g|0)&1)|0;t:do{switch(1073741823&(3==(0|g)?4:g)|0){case 1:if(c=0|l[t+32>>2],o=0!=(0|p),0|l[i+32>>2]){if(!o)break t;for(o=c,c=e,u=0;l[o>>2]=r[c>>0],(0|(u=u+1|0))!=(0|p);)o=o+4|0,c=c+1|0;e=e+p|0;break t}if(!o)break t;for(u=0,o=c,c=e;l[o>>2]=h[c>>0],(0|(u=u+1|0))!=(0|p);)o=o+4|0,c=c+1|0;e=e+p|0;break t;case 2:if(o=0|l[t+32>>2],f=0!=(0|p),0|l[i+32>>2]){if(!f)break t;for(u=e+(0|C(u<<1,c))|0,c=0;;){if(l[o>>2]=s[e>>1],(0|(c=c+1|0))==(0|p)){e=u;break}e=e+2|0,o=o+4|0}}else{if(!f)break t;for(u=e+(0|C(u<<1,c))|0,c=0;;){if(l[o>>2]=d[e>>1],(0|(c=c+1|0))==(0|p)){e=u;break}e=e+2|0,o=o+4|0}}break;case 4:if(p)for(u=e+(0|C(u<<2,c))|0,c=0|l[t+32>>2],o=0;;){if(l[c>>2]=l[e>>2],(0|(o=o+1|0))==(0|p)){e=u;break}c=c+4|0,e=e+4|0}}}while(0);if((m=m+1|0)>>>0>=(0|l[a>>2])>>>0){e=1;break}t=t+52|0,i=i+52|0}return 0|e}function li(t,e,i){t|=0,e|=0,i|=0;var n,r,a,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0;if(a=w,w=w+288|0,u=a+16|0,c=a+8|0,r=a+152|0,b=a+24|0,!(n=0|Ht(1,20)))return mt(i,1,20123,a),w=a,0|(b=0);for(l[n>>2]=t,l[(d=n+4|0)>>2]=e,l[r>>2]=t,l[b>>2]=e,l[(h=n+8|0)>>2]=0,y=0,o=0;_=0|C(e,t),t=(t+1|0)/2|0,l[r+((s=y+1|0)<<2)>>2]=t,e=(e+1|0)/2|0,l[b+(s<<2)>>2]=e,o=o+_|0,!(_>>>0<=1);)y=s;if(l[h>>2]=o,!o)return jt(n),mt(i,2,20161,c),w=a,0|(b=0);if(e=0|Ht(o,16),l[n+12>>2]=e,!e)return mt(i,1,20211,u),jt(n),w=a,0|(b=0);if(_=0|l[h>>2],l[n+16>>2]=_<<4,t=e+((0|C(0|l[d>>2],0|l[n>>2]))<<4)|0,y){g=0,o=t,s=t,t=e;do{p=0|l[b+(g<<2)>>2];t:do{if((0|p)>0){if((0|(m=0|l[r+(g<<2)>>2]))<=0)for(h=p+-1|0,i=0;;){if(c=(f=0!=(1&i|0)|(0|i)==(0|h))?s:o,o=f?s:o+(m<<4)|0,(0|(i=i+1|0))>=(0|p)){s=c;break t}s=c}d=(m+2+((0|(d=~m))>-3?d:-3)|0)>>>1,f=p+-1|0,u=0;do{for(h=s+16|0,i=m;;){if(l[t>>2]=s,c=t+16|0,1==(0|i)){t=c;break}if(l[c>>2]=s,t=t+32|0,!((0|i)>2))break;i=i+-2|0,s=s+16|0}h=h+(d<<4)|0,s=(i=0!=(1&u|0)|(0|u)==(0|f))?h:o,o=i?h:o+(m<<4)|0,u=u+1|0}while((0|u)<(0|p))}}while(0);g=g+1|0}while((0|g)!=(0|y))}else t=e;if(l[t>>2]=0,!_)return w=a,0|(b=n);for(t=0;l[e+4>>2]=999,l[e+8>>2]=0,l[e+12>>2]=0,(0|(t=t+1|0))!=(0|_);)e=e+16|0;return w=a,0|n}function ci(t){var e,i=0;if((t|=0)&&(e=0|l[t+8>>2]))for(i=0,t=0|l[t+12>>2];l[t+4>>2]=999,l[t+8>>2]=0,l[t+12>>2]=0,!((i=i+1|0)>>>0>=e>>>0);)t=t+16|0}function hi(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0;if(a=w,w=w+272|0,f=a,r=a+136|0,y=a+8|0,!(t|=0))return w=a,0|(y=0);if(d=t+4|0,(0|l[t>>2])==(0|e)&&(0|l[d>>2])==(0|i))s=t+8|0;else{for(l[t>>2]=e,l[d>>2]=i,l[r>>2]=e,l[y>>2]=i,l[(s=t+8|0)>>2]=0,_=0,o=i,c=e,u=0;g=0|C(o,c),c=(c+1|0)/2|0,l[r+((h=_+1|0)<<2)>>2]=c,o=(o+1|0)/2|0,l[y+(h<<2)>>2]=o,u=u+g|0,!(g>>>0<=1);)_=h;if(l[s>>2]=u,!u)return 0|(o=0|l[(s=t+12|0)>>2])&&(jt(o),l[s>>2]=0),jt(t),w=a,0|(y=0);c=u<<4,h=t+16|0,u=t+12|0;do{if(c>>>0>(0|l[h>>2])>>>0){if(0|(o=0|Wt(0|l[u>>2],c))){l[u>>2]=o,kr(o+(i=0|l[h>>2])|0,0,c-i|0),l[h>>2]=c,i=0|l[d>>2],e=0|l[t>>2];break}return mt(n,1,20255,f),0|(s=0|l[u>>2])&&(jt(s),l[u>>2]=0),jt(t),w=a,0|(y=0)}}while(0);if(e=(o=0|l[u>>2])+((0|C(i,e))<<4)|0,_){i=e,g=0;do{p=0|l[y+(g<<2)>>2];t:do{if((0|p)>0){if((0|(m=0|l[r+(g<<2)>>2]))<=0)for(u=p+-1|0,h=0;;){if(c=(f=0!=(1&h|0)|(0|h)==(0|u))?e:i+(m<<4)|0,e=f?e:i,(0|(h=h+1|0))>=(0|p)){i=c;break t}i=c}for(d=(m+2+((0|(d=~m))>-3?d:-3)|0)>>>1,f=p+-1|0,n=0;;){for(u=e+16|0,h=m;;){if(l[o>>2]=e,c=o+16|0,1==(0|h)){o=c;break}if(l[c>>2]=e,o=o+32|0,!((0|h)>2))break;h=h+-2|0,e=e+16|0}if(e=u+(d<<4)|0,c=(u=0!=(1&n|0)|(0|n)==(0|f))?e:i+(m<<4)|0,e=u?e:i,(0|(n=n+1|0))>=(0|p)){i=c;break}i=c}}}while(0);g=g+1|0}while((0|g)!=(0|_))}l[o>>2]=0}if(!(e=0|l[s>>2]))return w=a,0|(y=t);for(s=0,o=0|l[t+12>>2];l[o+4>>2]=999,l[o+8>>2]=0,l[o+12>>2]=0,(0|(s=s+1|0))!=(0|e);)o=o+16|0;return w=a,0|t}function ui(t){var e,i;(t|=0)&&(0|(i=0|l[(e=t+12|0)>>2])&&(jt(i),l[e>>2]=0),jt(t))}function di(t,e,i){if(e|=0,i|=0,t=(0|l[12+(t|=0)>>2])+(e<<4)|0)for(;;){if((0|l[(e=t+4|0)>>2])<=(0|i)){t=4;break}if(l[e>>2]=i,!(t=0|l[t>>2])){t=4;break}}}function fi(t,e,i,n){t|=0,i|=0,n|=0;var r,a,s=0,o=0,c=0;if(a=w,w=w+128|0,r=a,i=(0|l[12+(e|=0)>>2])+(i<<4)|0,e=0|l[i>>2])for(s=0,o=e;;){if(c=s+1|0,l[r+(s<<2)>>2]=i,!(e=0|l[o>>2])){e=0,i=o;break}i=o,s=c,o=e}else e=0,c=0;for(;;){(0|e)>(0|(s=0|l[(o=i+8|0)>>2]))?l[o>>2]=e:e=s;t:do{if((0|e)<(0|n)){for(s=i+4|0;!((0|e)>=(0|l[s>>2]));)if(Mi(t,0,1),(0|(e=e+1|0))>=(0|n))break t;0|l[(i=i+12|0)>>2]||(Mi(t,1,1),l[i>>2]=1)}}while(0);if(l[o>>2]=e,!c)break;i=0|l[r+((o=c+-1|0)<<2)>>2],c=o}w=a}function pi(t,e,i,n){t|=0,i|=0,n|=0;var r,a,s=0,o=0,c=0;if(a=w,w=w+128|0,r=a,e=(0|l[12+(e|=0)>>2])+(i<<4)|0,i=0|l[e>>2])for(s=0;;){if(o=s+1|0,l[r+(s<<2)>>2]=e,!(e=0|l[i>>2])){s=0,e=i;break}c=i,s=o,i=e,e=c}else s=0,o=0;for(;;){(0|s)>(0|(i=0|l[(c=e+8|0)>>2]))&&(l[c>>2]=s,i=s),s=e+4|0;t:do{if((0|i)<(0|n)){for(e=i;;){if((0|e)>=(0|l[s>>2]))break t;if(0|Si(t,1))break;if((0|(e=e+1|0))>=(0|n))break t}l[s>>2]=e}else e=i}while(0);if(l[c>>2]=e,!o)break;s=e,e=0|l[r+((c=o+-1|0)<<2)>>2],o=c}return w=a,(0|l[s>>2])<(0|n)|0}function mi(){var t=0,e=0;return(t=0|Ht(1,12))?(l[t+4>>2]=10,e=0|Ht(10,4),l[t+8>>2]=e,0|e?0|(e=t):(jt(t),0|(e=0))):0|(t=0)}function gi(t){var e;(t|=0)&&(0|(e=0|l[t+8>>2])&&jt(e),jt(t))}function _i(t,e,i){e|=0,i|=0;var n,r,a,s=0,o=0;a=w,w=w+16|0,r=a,o=0|l[(n=4+(t|=0)|0)>>2],s=0|l[t>>2];do{if((0|o)==(0|s)){if(o=o+10|0,l[n>>2]=o,0|(o=0|Wt(0|l[(s=t+8|0)>>2],o<<2))){l[s>>2]=o,s=0|l[t>>2];break}return jt(0|l[s>>2]),l[n>>2]=0,l[t>>2]=0,mt(i,1,20303,r),w=a,0|(e=0)}o=0|l[t+8>>2]}while(0);return l[o+(s<<2)>>2]=e,l[t>>2]=s+1,w=a,0|(e=1)}function yi(t){return 0|l[(t|=0)>>2]}function bi(t){return 0|l[8+(t|=0)>>2]}function vi(t){l[(t|=0)>>2]=0}function wi(){return 0|zt(20)}function xi(t){(t|=0)&&jt(t)}function Ai(t){return(0|l[8+(t|=0)>>2])-(0|l[t>>2])|0}function Mi(t,e,i){t|=0,e|=0;var n,a,s,o,c=0,h=0,u=0,d=0;if(i|=0){s=t+12|0,o=t+8|0,n=t+4|0,u=i+-1|0,t=0|l[(a=t+16|0)>>2];do{d=e>>>u&1,t||(t=(c=0|l[s>>2])<<8&65280,l[s>>2]=t,t=65280==(0|t)?7:8,l[a>>2]=t,h=0|l[o>>2],(0|l[n>>2])>>>0>h>>>0&&(l[o>>2]=h+1,r[h>>0]=c,t=0|l[a>>2])),t=t+-1|0,l[a>>2]=t,l[s>>2]=l[s>>2]|d<<t,u=u+-1|0}while(u>>>0<i>>>0)}}function Si(t,e){t|=0;var i,n,r,a=0,s=0,o=0,c=0,u=0;if(!(e|=0))return 0|(u=0);n=t+16|0,r=t+12|0,u=t+8|0,i=t+4|0,c=e+-1|0,t=0,a=0|l[r>>2],s=0|l[n>>2];do{s||(a=a<<8&65280,l[r>>2]=a,s=65280==(0|a)?7:8,l[n>>2]=s,o=0|l[u>>2],(0|l[i>>2])>>>0>o>>>0&&(l[u>>2]=o+1,a=0|a|h[o>>0],l[r>>2]=a)),s=s+-1|0,l[n>>2]=s,t|=(a>>>s&1)<<c,c=c+-1|0}while(c>>>0<e>>>0);return 0|t}function Ei(t){var e=0,i=0,n=0,r=0,a=0;e=0|l[(a=12+(t|=0)|0)>>2];do{if(255==(255&e|0)){if(r=e<<8&65280,l[a>>2]=r,l[(e=t+16|0)>>2]=65280==(0|r)?7:8,n=0|l[(i=t+8|0)>>2],(0|l[t+4>>2])>>>0>n>>>0){l[i>>2]=n+1,l[a>>2]=0|r|h[n>>0];break}return 0|(a=0)}e=t+16|0}while(0);return l[e>>2]=0,0|(a=1)}function Ti(t){return 0|Ii(t|=0,1)}function Ii(t,e){e|=0;var i,n=0,r=0,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,w=0,x=0,A=0,M=0,S=0;if(S=(0|l[8+(t|=0)>>2])-(0|l[t>>2])|0,n=(o=0|l[t+16>>2])-1|0,i=0|l[t+32>>2],s=(t=0|l[t+24>>2])+(136*n|0)|0,a=0==(0|n))t=0;else{r=0;do{A=t,t=t+136|0,r=(M=r>>>0<(M=(0|l[A+144>>2])-(0|l[t>>2])|0)>>>0?M:r)>>>0<(A=(0|l[A+148>>2])-(0|l[A+140>>2])|0)>>>0?A:M,n=n+-1|0}while(0!=(0|n));t=r<<2}if(!(0==(0|t)|0!=(0|(M=0|zt(t)))))return 0|(S=0);if(!a)for(A=M+4|0,b=o+-2|0;;){h=s,s=s+-136|0,x=0|l[h>>2],y=(0|l[h+8>>2])-x|0,d=0|l[h+4>>2],v=(0|l[h+12>>2])-d|0,w=(0|l[h+-128>>2])-(0|l[s>>2])|0,x&=1,d&=1,f=v-(h=(0|l[h+-124>>2])-(0|l[h+-132>>2])|0)|0,_=(0|y)>0;t:do{if(_){if(c=0==(0|h),p=0==(0|f),m=A+(0-d<<2)|0,g=0|C(h,S),u=M+(d<<2)|0,(0|v)>0)for(o=0;;){a=i+(o<<2)|0,t=0;do{r=a+((0|C(t,S))<<2)|0,l[M+(t<<2)>>2]=l[r>>2],t=t+1|0}while((0|t)!=(0|v));if(aa[3&e](M,f,h,d),!c)for(t=a,n=h,r=u;n=n+-1|0,l[t>>2]=l[r>>2],n;)t=t+(S<<2)|0,r=r+8|0;if(!p)for(t=a+(g<<2)|0,n=f,r=m;n=n+-1|0,l[t>>2]=l[r>>2],n;)t=t+(S<<2)|0,r=r+8|0;if((0|(o=o+1|0))==(0|y))break t}if(c)for(t=0;;){if(aa[3&e](M,f,0,d),!p)for(n=i+(t<<2)+(g<<2)|0,r=f,a=m;r=r+-1|0,l[n>>2]=l[a>>2],r;)n=n+(S<<2)|0,a=a+8|0;if((0|(t=t+1|0))==(0|y))break t}else o=0;do{for(a=i+(o<<2)|0,aa[3&e](M,f,h,d),t=a,n=h,r=u;n=n+-1|0,l[t>>2]=l[r>>2],n;)t=t+(S<<2)|0,r=r+8|0;if(!p)for(t=a+(g<<2)|0,n=f,r=m;n=n+-1|0,l[t>>2]=l[r>>2],n;)t=t+(S<<2)|0,r=r+8|0;o=o+1|0}while((0|o)!=(0|y))}}while(0);u=y-w|0;t:do{if((0|v)>0){if(c=(0|w)>0,h=M+(x<<2)|0,d=(0|u)>0,f=A+(0-x<<2)|0,_)for(o=0;;){a=i+((0|C(o,S))<<2)|0,t=0;do{l[M+(t<<2)>>2]=l[a+(t<<2)>>2],t=t+1|0}while((0|t)!=(0|y));if(aa[3&e](M,u,w,x),c)for(t=a,n=0,r=h;l[t>>2]=l[r>>2],(0|(n=n+1|0))!=(0|w);)t=t+4|0,r=r+8|0;if(d)for(t=a+(w<<2)|0,n=0,r=f;l[t>>2]=l[r>>2],(0|(n=n+1|0))!=(0|u);)t=t+4|0,r=r+8|0;if((0|(o=o+1|0))==(0|v))break t}if(c)o=0;else for(t=0;;){if(aa[3&e](M,u,w,x),d)for(n=i+((0|C(t,S))<<2)+(w<<2)|0,r=0,a=f;l[n>>2]=l[a>>2],(0|(r=r+1|0))!=(0|u);)n=n+4|0,a=a+8|0;if((0|(t=t+1|0))==(0|v))break t}do{for(a=i+((0|C(o,S))<<2)|0,aa[3&e](M,u,w,x),t=a,n=0,r=h;l[t>>2]=l[r>>2],(0|(n=n+1|0))!=(0|w);)t=t+4|0,r=r+8|0;if(d)for(t=a+(w<<2)|0,n=0,r=f;l[t>>2]=l[r>>2],(0|(n=n+1|0))!=(0|u);)t=t+4|0,r=r+8|0;o=o+1|0}while((0|o)!=(0|v))}}while(0);if(!b)break;b=b+-1|0}return jt(M),0|(S=1)}function Ci(t,e){e|=0;var i,n,r,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0;if(r=w,w=w+32|0,n=r+16|0,L=r,h=0|l[24+(t|=0)>>2],c=(0|l[h+8>>2])-(0|l[h>>2])|0,u=(0|l[h+12>>2])-(0|l[h+4>>2])|0,i=(0|l[t+8>>2])-(0|l[t>>2])|0,1==(0|e))return w=r,0|(L=1);if(o=0==(0|(d=e+-1|0)))e=0;else{e=h,a=0,s=d;do{P=e,e=e+136|0,a=(B=a>>>0<(B=(0|l[P+144>>2])-(0|l[e>>2])|0)>>>0?B:a)>>>0<(P=(0|l[P+148>>2])-(0|l[P+140>>2])|0)>>>0?P:B,s=s+-1|0}while(0!=(0|s));e=a<<2}if(B=0|Ut(e),l[n>>2]=B,!B)return w=r,0|(L=0);if(l[L>>2]=B,!o){A=t+32|0,M=n+8|0,S=L+8|0,E=n+4|0,T=n+12|0,I=L+4|0,k=L+12|0,P=B+4|0;do{if(x=0|l[A>>2],y=h,h=h+136|0,l[M>>2]=c,l[S>>2]=u,a=0|l[h>>2],g=c,c=(0|l[y+144>>2])-a|0,e=0|l[(_=y+140|0)>>2],v=u,u=(0|l[y+148>>2])-e|0,y=c-g|0,l[E>>2]=y,a=(0|a)%2|0,l[T>>2]=a,!(b=0==(0|u))){for(f=c<<2,p=0==(0|g),m=0==(0|y),e=0;;){if(t=x+((0|C(e,i))<<2)|0,p)s=0;else{for(a=B+(a<<2)|0,s=t,o=g;o=o+-1|0,l[a>>2]=l[s>>2],o;)a=a+8|0,s=s+4|0;a=0|l[T>>2],s=g}if(!m)for(o=P+(0-a<<2)|0,a=t+(s<<2)|0,s=y;s=s+-1|0,l[o>>2]=l[a>>2],s;)o=o+8|0,a=a+4|0;if(ki(n),Cr(0|t,0|B,0|f),(0|(e=e+1|0))==(0|u))break;a=0|l[T>>2]}e=0|l[_>>2]}m=u-v|0,l[I>>2]=m,a=(0|e)%2|0,l[k>>2]=a;t:do{if(0|c){if(f=0==(0|v),p=0==(0|m),b)for(e=0;;){if(t=x+(e<<2)|0,f)s=0;else{for(a=B+(a<<2)|0,s=t,o=v;o=o+-1|0,l[a>>2]=l[s>>2],o;)a=a+8|0,s=s+(i<<2)|0;a=0|l[k>>2],s=v}if(!p)for(o=P+(0-a<<2)|0,a=t+((0|C(s,i))<<2)|0,s=m;s=s+-1|0,l[o>>2]=l[a>>2],s;)o=o+8|0,a=a+(i<<2)|0;if(ki(L),(0|(e=e+1|0))==(0|c))break t;a=0|l[k>>2]}else e=0;for(;;){if(t=x+(e<<2)|0,f)s=0;else{for(a=B+(a<<2)|0,s=t,o=v;o=o+-1|0,l[a>>2]=l[s>>2],o;)a=a+8|0,s=s+(i<<2)|0;a=0|l[k>>2],s=v}if(!p)for(o=P+(0-a<<2)|0,a=t+((0|C(s,i))<<2)|0,s=m;s=s+-1|0,l[o>>2]=l[a>>2],s;)o=o+8|0,a=a+(i<<2)|0;ki(L),a=0;do{b=x+((0|C(a,i))+e<<2)|0,l[b>>2]=l[B+(a<<2)>>2],a=a+1|0}while((0|a)!=(0|u));if((0|(e=e+1|0))==(0|c))break t;a=0|l[k>>2]}}}while(0);d=d+-1|0}while(0!=(0|d))}return Vt(B),w=r,0|(L=1)}function ki(t){var e,i,n,r=0,a=0,s=0;if(e=0|l[(t|=0)>>2],i=0|l[t+4>>2],n=0|l[t+8>>2],0|l[t+12>>2])if(1==(0|i)&0==(0|n))l[e>>2]=(0|l[e>>2])/2|0;else{if((0|n)>0){r=i+-1|0,t=0;do{a=t,t=t+1|0,l[(s=e+((a<<1|1)<<2)|0)>>2]=(0|l[s>>2])-(2+(0|l[e+(((0|a)>=(0|i)?r:a)<<1<<2)>>2])+(0|l[e+(((0|t)>=(0|i)?r:t)<<1<<2)>>2])>>2)}while((0|t)!=(0|n))}if(!((0|i)<=0)){r=n+-1|0,t=0;do{l[(s=e+(t<<1<<2)|0)>>2]=((0|l[e+(((0|t)<1?1:(((0|t)>(0|n)?n:t)<<1)-1|0)<<2)>>2])+(0|l[e+((((0|t)>=(0|n)?r:t)<<1|1)<<2)>>2])>>1)+(0|l[s>>2]),t=t+1|0}while((0|t)!=(0|i))}}else{if(!((a=(0|i)>0)|(0|n)>1))return;if((0|n)>0){r=i+-1|0,t=0;do{l[(s=e+(t<<1<<2)|0)>>2]=(0|l[s>>2])-(2+(0|l[e+(((0|t)<1?1:(((0|t)>(0|i)?i:t)<<1)-1|0)<<2)>>2])+(0|l[e+((((0|t)>=(0|i)?r:t)<<1|1)<<2)>>2])>>2),t=t+1|0}while((0|t)!=(0|n))}if(!a)return;r=n+-1|0,t=0;do{a=t,t=t+1|0,l[(s=e+((a<<1|1)<<2)|0)>>2]=((0|l[e+(((0|t)>=(0|n)?r:t)<<1<<2)>>2])+(0|l[e+(((0|a)>=(0|n)?r:a)<<1<<2)>>2])>>1)+(0|l[s>>2])}while((0|t)!=(0|i))}}function Pi(t,e){return+ +_[56+(80*(e|=0)|0)+((t|=0)<<3)>>3]}function Bi(t){return 0|Ii(t|=0,2)}function Li(t,e){return+ +_[376+(80*(e|=0)|0)+((t|=0)<<3)>>3]}function Ri(t,e){e|=0;var i,n,r,a,s=0,o=0,c=0,h=0,u=0,d=0,f=0;if(n=(3*(0|l[(i=4+(t|=0)|0)>>2])|0)-2|0){r=t+20|0,a=t+24|0,f=0;do{if(f?(o=1+(((c=f+-1|0)>>>0)%3|0)|0,c=1+((c>>>0)/3|0)|0):(o=0,c=0),h=0==(0|o)|0==(0|l[r>>2])?0:(o+-1|0)>>>0<2?1:2,s=0|l[a>>2]?+(1<<h|0)/+_[376+(80*o|0)+((0|l[i>>2])+~c<<3)>>3]:1,u=h+e|0,(0|(d=~~+S(8192*s)))>1){for(o=d,h=0;;){if(!(o>>>0>3)){o=d,c=0;break}o>>>=1,h=h+1|0}for(;o>>>0>3;)o>>>=1,c=c+1|0;c=10-c|0,o=h+-12|0}else c=11,o=-13;l[t+28+(f<<3)+4>>2]=2047&((0|c)<0?d>>0-c:d<<c),l[t+28+(f<<3)>>2]=u-o,f=f+1|0}while((0|f)!=(0|n))}}function Di(t,e){e|=0;var i,n,r,a,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0;if(a=w,w=w+32|0,r=a+16|0,j=a,f=0|l[24+(t|=0)>>2],h=0|l[f+8>>2],u=0|l[f>>2],_=0|l[f+12>>2],y=0|l[f+4>>2],n=(m=0|l[(i=t+8|0)>>2])-(g=0|l[t>>2])|0,c=0==(0|(d=e+-1|0)))e=80;else{e=f,s=0,o=d;do{U=e,e=e+136|0,s=(V=s>>>0<(V=(0|l[U+144>>2])-(0|l[e>>2])|0)>>>0?V:s)>>>0<(U=(0|l[U+148>>2])-(0|l[U+140>>2])|0)>>>0?U:V,o=o+-1|0}while(0!=(0|o));e=80+(s<<4)|0}if(p=0|Ut(e),l[r>>2]=p,!p)return w=a,0|(j=0);l[j>>2]=p;t:do{if(c)e=p;else for(k=t+32|0,P=t+12|0,B=t+4|0,L=r+8|0,R=j+8|0,D=r+4|0,O=r+12|0,G=n<<2,F=n<<1,N=3*n|0,z=j+4|0,H=j+12|0,U=m-g<<2,V=g-m<<2,b=h-u|0,s=d,e=p,o=p,h=m,c=g,M=_-y|0,_=p;;){S=0|l[k>>2],c=0|C((0|l[P>>2])-(0|l[B>>2])|0,h-c|0),l[L>>2]=b,l[R>>2]=M,E=f+136|0,T=(y=0|l[f+144>>2])-(v=0|l[E>>2])|0,I=(u=0|l[f+148>>2])-(h=0|l[(g=f+140|0)>>2])|0,l[D>>2]=T-b,l[O>>2]=(0|v)%2|0;do{if((0|I)>3){if(m=S+(G<<2)+((0|C(U,p=(u+4+((0|(p=h+-1-u|0))>-8?p:-8)-h|0)>>>2))<<2)|0,p=0|C(V,p),!((0|T)>0)){for(h=I,u=c,d=S;Oi(r,d,n,u),Gi(r),(0|h)>7;)h=h+-4|0,u=u-G|0,d=d+(G<<2)|0;c=V+c+p|0,u=m;break}for(h=I,u=c,d=S;;){Oi(r,d,n,u),Gi(r),f=T;do{A=f,l[d+((f=f+-1|0)<<2)>>2]=l[_+(f<<4)>>2],l[d+(f+n<<2)>>2]=l[_+(f<<4)+4>>2],l[d+(f+F<<2)>>2]=l[_+(f<<4)+8>>2],l[d+(f+N<<2)>>2]=l[_+(f<<4)+12>>2]}while((0|A)>1);if(!((0|h)>7))break;h=h+-4|0,u=u-G|0,d=d+(G<<2)|0}c=V+c+p|0,u=m}else u=S}while(0);e:do{if(3&I){if(Oi(r,u,n,c),Gi(r),c=T+-1|0,(0|T)<=0){m=I-M|0,l[z>>2]=m,p=(0|l[g>>2])%2|0,l[H>>2]=p,g=S;break}switch(h=0|l[r>>2],3&I){case 3:for(e=c;;){if(l[u+(e+F<<2)>>2]=l[h+(e<<4)+8>>2],l[u+(e+n<<2)>>2]=l[h+(e<<4)+4>>2],l[u+(e<<2)>>2]=l[h+(e<<4)>>2],!((0|e)>0)){e=h,A=h,W=22;break}e=e+-1|0}break;case 2:for(e=c;;){if(l[u+(e+n<<2)>>2]=l[h+(e<<4)+4>>2],l[u+(e<<2)>>2]=l[h+(e<<4)>>2],!((0|e)>0)){e=h,A=h,W=22;break}e=e+-1|0}break;case 1:for(e=c;;){if(l[u+(e<<2)>>2]=l[h+(e<<4)>>2],!((0|e)>0)){e=h,A=h,W=22;break}e=e+-1|0}break;default:e=h,A=h,W=22;break e}}else A=_,W=22}while(0);do{if(22==(0|W))if(W=0,x=I-M|0,l[z>>2]=x,b=(0|l[g>>2])%2|0,l[H>>2]=b,(0|T)>3){if(y=y+4+((0|(_=v+-1-y|0))>-8?_:-8)-v&-4,!I){for(p=(0|M)>0,m=0|C(M,n),g=0-b|0,_=(0|x)>0,d=S,f=T;;){if(h=(o=0|l[j>>2])+(b<<4)|0,p){c=0;do{v=h+(c<<1<<4)|0,u=d+((0|C(c,n))<<2)|0,l[v>>2]=l[u>>2],l[v+4>>2]=l[u+4>>2],l[v+8>>2]=l[u+8>>2],l[v+12>>2]=l[u+12>>2],c=c+1|0}while((0|c)!=(0|M))}if(h=d+(m<<2)|0,u=o+16+(g<<4)|0,_){c=0;do{v=u+(c<<1<<4)|0,Z=h+((0|C(c,n))<<2)|0,l[v>>2]=l[Z>>2],l[v+4>>2]=l[Z+4>>2],l[v+8>>2]=l[Z+8>>2],l[v+12>>2]=l[Z+12>>2],c=c+1|0}while((0|c)!=(0|x))}if(Gi(j),!((0|f)>7))break;d=d+16|0,f=f+-4|0}g=S+16+(y<<2)|0,p=b,m=x,_=A;break}for(p=(0|(f=0|l[R>>2]))>0,m=0|C(f,n),g=0-b|0,_=(0|x)>0,u=S,d=T;;){if(h=o+(b<<4)|0,p){c=0;do{Z=h+(c<<1<<4)|0,M=u+((0|C(c,n))<<2)|0,l[Z>>2]=l[M>>2],l[Z+4>>2]=l[M+4>>2],l[Z+8>>2]=l[M+8>>2],l[Z+12>>2]=l[M+12>>2],c=c+1|0}while((0|c)!=(0|f))}if(h=u+(m<<2)|0,c=o+16+(g<<4)|0,_){o=0;do{Z=c+(o<<1<<4)|0,M=h+((0|C(o,n))<<2)|0,l[Z>>2]=l[M>>2],l[Z+4>>2]=l[M+4>>2],l[Z+8>>2]=l[M+8>>2],l[Z+12>>2]=l[M+12>>2],o=o+1|0}while((0|o)!=(0|x))}Gi(j),c=0;do{Z=u+((0|C(c,n))<<2)|0,M=(o=0|l[j>>2])+(c<<4)|0,l[Z>>2]=l[M>>2],l[Z+4>>2]=l[M+4>>2],l[Z+8>>2]=l[M+8>>2],l[Z+12>>2]=l[M+12>>2],c=c+1|0}while((0|c)!=(0|I));if(!((0|d)>7))break;u=u+16|0,d=d+-4|0}g=S+16+(y<<2)|0,p=b,m=x,_=A}else g=S,p=b,m=x,_=A}while(0);if(d=3&T){if(c=(f=0|l[j>>2])+(p<<4)|0,(0|(h=0|l[R>>2]))>0){u=d<<2,o=0;do{Cr(c+(o<<1<<4)|0,g+((0|C(o,n))<<2)|0,0|u),o=o+1|0}while((0|o)!=(0|h))}if(u=g+((0|C(h,n))<<2)|0,c=f+16+(0-p<<4)|0,(0|m)>0){h=d<<2,o=0;do{Cr(c+(o<<1<<4)|0,u+((0|C(o,n))<<2)|0,0|h),o=o+1|0}while((0|o)!=(0|m))}if(Gi(j),I){c=d<<2,o=0;do{Cr(g+((0|C(o,n))<<2)|0,f+(o<<4)|0,0|c),o=o+1|0}while((0|o)!=(0|I));o=f}else o=f}if(!(s=s+-1|0))break t;b=T,f=E,h=0|l[i>>2],c=0|l[t>>2],M=I}}while(0);return Vt(e),w=a,0|(Z=1)}function Oi(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o,c,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0;if(u=(d=0|l[(t|=0)>>2])+((r=0|l[t+12>>2])<<4)|0,a=0|l[t+8>>2],s=3*i|0,c=d+16+(0-r<<4)|0,o=0|l[t+4>>2],(a+s|0)<(0|n)&&0==(15&e|0)&&0==(15&(u|i)|0)){if((0|a)>0){t=0;do{l[d+(r<<4)+((u=t<<3)<<2)>>2]=l[e+(t<<2)>>2],_=t+i|0,l[d+(r<<4)+((1|u)<<2)>>2]=l[e+(_<<2)>>2],_=_+i|0,l[d+(r<<4)+((2|u)<<2)>>2]=l[e+(_<<2)>>2],l[d+(r<<4)+((3|u)<<2)>>2]=l[e+(_+i<<2)>>2],t=t+1|0}while((0|t)!=(0|a))}}else h=2;if(2==(0|h)&&(0|a)>0){t=0;do{l[d+(r<<4)+((h=t<<3)<<2)>>2]=l[e+(t<<2)>>2],(0|(u=t+i|0))<(0|n)&&(l[d+(r<<4)+((1|h)<<2)>>2]=l[e+(u<<2)>>2],(0|(f=u+i|0))<(0|n))&&(l[d+(r<<4)+((2|h)<<2)>>2]=l[e+(f<<2)>>2],(0|(p=f+i|0))<(0|n))&&(l[d+(r<<4)+((3|h)<<2)>>2]=l[e+(p<<2)>>2]),t=t+1|0}while((0|t)!=(0|a))}if(d=e+(a<<2)|0,(o+s|0)<(0|(e=n-a|0))&&0==(15&d|0)&&0==(15&(c|i)|0)){if(!((0|o)>0))return;t=0;do{l[c+((_=t<<3)<<2)>>2]=l[d+(t<<2)>>2],g=t+i|0,l[c+((1|_)<<2)>>2]=l[d+(g<<2)>>2],g=g+i|0,l[c+((2|_)<<2)>>2]=l[d+(g<<2)>>2],l[c+((3|_)<<2)>>2]=l[d+(g+i<<2)>>2],t=t+1|0}while((0|t)!=(0|o))}else if((0|o)>0){t=0;do{l[c+((h=t<<3)<<2)>>2]=l[d+(t<<2)>>2],(0|(u=t+i|0))<(0|e)&&(l[c+((1|h)<<2)>>2]=l[d+(u<<2)>>2],(0|(m=u+i|0))<(0|e))&&(l[c+((2|h)<<2)>>2]=l[d+(m<<2)>>2],(0|(g=m+i|0))<(0|e))&&(l[c+((3|h)<<2)>>2]=l[d+(g<<2)>>2]),t=t+1|0}while((0|t)!=(0|o))}}function Gi(t){t|=0;var e=0,i=0,n=0,r=0,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0;do{if(0|l[t+12>>2]){if((0|(n=0|l[t+8>>2]))<=0){if((0|l[t+4>>2])>1){r=1,s=0,a=0|l[t>>2];break}return}i=0,e=1,o=7}else{if(n=0|l[t+8>>2],(0|l[t+4>>2])>0){if(e=0|l[t>>2],(0|n)>0){r=0,i=1,a=e,o=9;break}r=0,s=1,a=e;break}if(!((0|n)>1))return;i=1,e=0,o=7}}while(0);if(7==(0|o)&&(r=e,a=0|l[t>>2],o=9),9==(0|o)){e=0;do{f=a+(r<<4)+((o=e<<3)<<2)|0,d=+m[(u=a+(r<<4)+((1|o)<<2)|0)>>2],h=+m[(s=a+(r<<4)+((2|o)<<2)|0)>>2],c=+m[(o=a+(r<<4)+((3|o)<<2)|0)>>2],m[f>>2]=1.2301740646362305*+m[f>>2],m[u>>2]=1.2301740646362305*d,m[s>>2]=1.2301740646362305*h,m[o>>2]=1.2301740646362305*c,e=e+1|0}while((0|e)!=(0|n));s=i}if((0|(i=0|l[t+4>>2]))>0){e=0;do{o=a+(s<<4)+((f=e<<3)<<2)|0,c=+m[(t=a+(s<<4)+((1|f)<<2)|0)>>2],h=+m[(u=a+(s<<4)+((2|f)<<2)|0)>>2],d=+m[(f=a+(s<<4)+((3|f)<<2)|0)>>2],m[o>>2]=1.625732421875*+m[o>>2],m[t>>2]=1.625732421875*c,m[u>>2]=1.625732421875*h,m[f>>2]=1.625732421875*d,e=e+1|0}while((0|e)!=(0|i))}Fi(e=a+(s<<4)|0,a=16+(t=a+(r<<4)|0)|0,n,o=(0|n)<(0|(o=i-r|0))?n:o,-.4435068666934967),Fi(t,u=e+16|0,i,f=(0|i)<(0|(f=n-s|0))?i:f,-.8829110860824585),Fi(e,a,n,o,.05298011749982834),Fi(t,u,i,f,1.5861343145370483)}function Fi(t,e,i,n,r){t|=0,e|=0,i|=0,r=+r;var a=0,s=0,o=0,l=0,c=0,h=0,u=0,d=0,f=0,p=0,g=0,_=0,y=0,b=0,v=0,w=0,x=0,A=0;if((0|(n|=0))>0){for(u=(d=n<<1)-2|0,c=e,h=0,s=+m[t>>2],o=+m[t+4>>2],l=+m[t+8>>2],a=+m[t+12>>2];x=c+-16|0,w=+m[(b=c+-12|0)>>2],y=+m[(g=c+-8|0)>>2],p=+m[(t=c+-4|0)>>2],A=s,s=+m[c>>2],v=o,o=+m[c+4>>2],_=l,l=+m[c+8>>2],f=a,a=+m[c+12>>2],m[x>>2]=+m[x>>2]+(A+s)*r,m[b>>2]=w+(v+o)*r,m[g>>2]=y+(_+l)*r,m[t>>2]=p+(f+a)*r,(0|(h=h+1|0))!=(0|n);)c=c+32|0;t=e+(u<<4)|0,e=e+(d<<4)|0}if(!((0|n)>=(0|i)))for(s=(a=r+r)*+m[t>>2],o=a*+m[t+4>>2],l=a*+m[t+8>>2],a*=+m[t+12>>2];d=e+-16|0,v=+m[(g=e+-12|0)>>2],w=+m[(b=e+-8|0)>>2],A=+m[(x=e+-4|0)>>2],m[d>>2]=s+ +m[d>>2],m[g>>2]=o+v,m[b>>2]=l+w,m[x>>2]=a+A,(0|(n=n+1|0))!=(0|i);)e=e+32|0}function Ni(t,e,i){t|=0,e|=0;var n,r,a,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,g=0,_=0,y=0,b=0,v=0,w=0,x=0,A=0,M=0,S=0;if(r=(i|=0)<<2,!(a=0|zt(i<<4)))return 0|(S=0);if(S=a+r|0,kr(0|a,0,0|r),x=i+-1|0,!(n=0==(0|i)))for(s=a,o=0;l[s>>2]=o,(0|(o=o+1|0))!=(0|i);)s=s+4|0;t:do{if(0|x){for(g=1,_=t,y=0,s=0,b=a,w=i;v=_+(y<<2)|0,y>>>0<i>>>0;){for(o=v,c=0,h=y;s=(M=(p=(p=+m[o>>2])>0?p:-p)>c)?h:s,c=M?p:c,(0|(h=h+1|0))!=(0|i);)o=o+(i<<2)|0;if(0==c)break;if((0|s)!=(0|y)&&(M=b+(s<<2)+(0-y<<2)|0,A=0|l[b>>2],l[b>>2]=l[M>>2],l[M>>2]=A,Cr(0|S,0|(M=_+((0|C(s-y|0,i))<<2)|0),0|r),Cr(0|M,0|_,0|r),Cr(0|_,0|S,0|r)),c=+m[v>>2],g>>>0<i>>>0)for(h=v+(i<<2)|0,d=g;;){p=+m[h>>2]/c,m[h>>2]=p,o=g,u=h,f=v;do{f=f+4|0,m[(u=u+4|0)>>2]=+m[u>>2]-p*+m[f>>2],o=o+1|0}while((0|o)!=(0|i));if((0|(d=d+1|0))==(0|i))break;h=h+(w<<2)+(y<<2)|0}if((y=y+1|0)>>>0>=x>>>0)break t;g=g+1|0,_=_+(i<<2)|0,b=b+4|0,w=w+-1|0}return jt(a),0|(S=0)}}while(0);if(A=S+(i<<2)|0,M=S+(i<<1<<2)|0,!n)for(b=A+(i<<2)|0,v=M+(i<<2)|0,w=t+((0|C(i,i))<<2)+-4|0,x=~i,y=0;;){for(kr(0|S,0,0|r),m[S+(y<<2)>>2]=1,u=a,d=t,f=M,g=0,_=1;;){if(g)for(s=d,o=M,c=0,h=1;c+=+m[s>>2]*+m[o>>2],(0|(h=h+1|0))!=(0|_);)s=s+4|0,o=o+4|0;else c=0;if(m[f>>2]=+m[S+(l[u>>2]<<2)>>2]-c,(0|(g=g+1|0))==(0|i)){u=i,d=w,f=b,g=v;break}u=u+4|0,d=d+(i<<2)|0,f=f+4|0,_=_+1|0}for(;;){if(g=g+-4|0,p=+m[d>>2],u>>>0<i>>>0)for(s=d,o=f,c=0,h=u;c+=+m[(s=s+4|0)>>2]*+m[o>>2],(0|(h=h+1|0))!=(0|i);)o=o+4|0;else c=0;if(u=u+-1|0,m[(f=f+-4|0)>>2]=(+m[g>>2]-c)/p,!u){s=e,o=0;break}d=d+(x<<2)|0}for(;l[s>>2]=l[A+(o<<2)>>2],(0|(o=o+1|0))!=(0|i);)s=s+(i<<2)|0;if((0|(y=y+1|0))==(0|i))break;e=e+4|0}return jt(a),0|(S=1)}function zi(t){t|=0;var e=0,i=0,n=0,r=0,a=0,s=0;return(a=0|Ht(1,44))?(s=0|zt(104),l[a>>2]=s,s?(s=0|zt(28),l[(e=a+4|0)>>2]=s,0|s?(l[a+40>>2]=t,0|(s=a)):(Qi(0|l[a>>2]),l[a>>2]=0,fn(0|l[e>>2]),l[e>>2]=0,0==(0|l[a+40>>2])&&0|(r=0|l[(n=a+8|0)>>2])&&(Vt(r),l[n>>2]=0),0|(i=0|l[(e=a+12|0)>>2])&&(Vt(i),l[e>>2]=0),jt(a),0|(s=0))):(Qi(0),l[a>>2]=0,fn(0|l[(s=a+4|0)>>2]),l[s>>2]=0,0==(0|l[a+40>>2])&&0|(i=0|l[(e=a+8|0)>>2])&&(Vt(i),l[e>>2]=0),0|(i=0|l[(e=a+12|0)>>2])&&(Vt(i),l[e>>2]=0),jt(a),0|(s=0))):0|(a=0)}function Hi(t){var e,i=0,n=0;(t|=0)&&(Qi(0|l[t>>2]),l[t>>2]=0,fn(0|l[(e=t+4|0)>>2]),l[e>>2]=0,0==(0|l[t+40>>2])&&0|(n=0|l[(i=t+8|0)>>2])&&(Vt(n),l[i>>2]=0),0|(n=0|l[(i=t+12|0)>>2])&&(Vt(n),l[i>>2]=0),jt(t))}function Ui(t,e,i){t|=0,i|=0;var n,r,a,o,c,u,f,p,g,_,y,b,v=0,w=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0,Y=0,X=0,J=0,q=0,Q=0,K=0,$=0,tt=0,et=0,it=0,nt=0,rt=0,at=0,st=0,ot=0,lt=0,ct=0,ht=0,ut=0,dt=0,ft=0,pt=0,mt=0,gt=0,_t=0,yt=0,bt=0,vt=0,wt=0,xt=0,At=0,Mt=0,St=0,Et=0,Tt=0,It=0;if(b=(0|l[8+(e|=0)>>2])-(0|l[e>>2])|0,!(v=0|l[(Tt=e+20|0)>>2]))return 0|(Tt=1);c=e+24|0,u=i+808|0,f=i+16|0,p=t+4|0,g=t+8|0,_=t+16|0,y=t+20|0,o=i+20|0,n=e+32|0,r=t+12|0,a=t+32|0,St=0,i=v;t:for(;;){if(At=0|l[c>>2],e=0|l[(Mt=At+(136*St|0)+24|0)>>2]){vt=At+(136*St|0)+16|0,xt=St+-1|0,bt=0,v=0|l[(wt=At+(136*St|0)+20|0)>>2],i=0|l[vt>>2];do{if(0|C(v,i)){pt=At+(136*St|0)+28+(36*bt|0)+20|0,mt=At+(136*St|0)+28+(36*bt|0)+16|0,gt=At+(136*St|0)+28+(36*bt|0)|0,_t=At+(136*St|0)+28+(36*bt|0)+4|0,yt=At+(136*St|0)+28+(36*bt|0)+32|0,ft=0;do{if(ut=(e=0|l[pt>>2])+(40*ft|0)+16|0,0|C(0|l[(dt=e+(40*ft|0)+20|0)>>2],0|l[ut>>2])){ht=e+(40*ft|0)+24|0,ct=0;do{if(i=0|l[ht>>2],it=0|l[mt>>2],v=0|l[u>>2],e=0|l[f>>2],nt=0|l[p>>2],rt=0|l[t>>2],at=i+(56*ct|0)+8|0,lt=i+(56*ct|0)+12|0,!(0|Vi(t,(0|l[i+(56*ct|0)+16>>2])-(0|l[at>>2])|0,(0|l[i+(56*ct|0)+20>>2])-(0|l[lt>>2])|0))){i=0,W=219;break t}if(w=0|l[(st=i+(56*ct|0)+24|0)>>2],sn(rt),on(rt,18,0,46),on(rt,17,0,3),on(rt,0,0,4),0|l[(ot=i+(56*ct|0)+48|0)>>2]){Q=i+(56*ct|0)+4|0,K=0!=(1&e|0),$=0==(2&e|0),tt=0==(8&e|0),et=it<<8,q=0==(32&e|0),J=0,e=2,i=w+v|0;do{x=0|l[Q>>2],X=K&(e>>>0<2?(0|i)<=((0|l[st>>2])-4|0):0),v=0|l[x+(J<<5)>>2];e:do{if(v){if(v=(0|l[v>>2])+(0|l[x+(J<<5)+4>>2])|0,w=0|l[x+(J<<5)+16>>2],X)pn(nt,v,w);else if(!(0|un(rt,v,w))){i=0,W=219;break t}if((0|i)>0&0!=(0|l[(Z=x+(J<<5)+12|0)>>2]))for(Y=$|X,j=0;;){i:do{switch(0|e){case 0:if(X){if(R=1<<i,R|=R>>1,!(v=0|l[y>>2]))break i;for(L=0-R|0,B=0,w=0|l[_>>2];;){if(P=B,B=B+4|0,w){I=-4==(0|P),k=3|P,T=0;do{n:do{if(!I)if(tt){v=P;do{if(v>>>0>=(0|l[y>>2])>>>0)break n;M=v,v=v+1|0,A=(w=0|l[r>>2])+(1+(x=(0|C(0|l[a>>2],v))+T|0)<<1)|0,M=(0|l[g>>2])+((0|C(0|l[_>>2],M))+T<<2)|0,S=0|l[p>>2],0!=(255&(W=0|s[A>>1])|0)&0==(20480&W|0)&&(0|mn(S)&&(V=0|mn(S),l[M>>2]=0|V?L:R,U=A+(0-(W=0|l[a>>2])<<1)|0,W=A+(W<<1)|0,s[(H=U+-2|0)>>1]=2|s[H>>1],s[U>>1]=s[U>>1]|s[3160+(V<<1)>>1],s[(U=U+2|0)>>1]=4|s[U>>1],s[(U=w+(x<<1)|0)>>1]=s[U>>1]|s[3160+(V+2<<1)>>1],s[A>>1]=4096|s[A>>1],s[(U=A+2|0)>>1]=s[U>>1]|s[3160+(V+4<<1)>>1],s[(U=W+-2|0)>>1]=1|s[U>>1],s[W>>1]=s[W>>1]|s[3160+(V+6<<1)>>1],s[(W=W+2|0)>>1]=8|s[W>>1]),s[A>>1]=16384|s[A>>1])}while(v>>>0<B>>>0)}else{v=P;do{if(v>>>0>=(w=0|l[y>>2])>>>0)break n;V=v,v=v+1|0,M=(x=0|l[r>>2])+(1+(A=(0|C(0|l[a>>2],v))+T|0)<<1)|0,S=(0|l[g>>2])+((0|C(0|l[_>>2],V))+T<<2)|0,E=0|l[p>>2],W=0|s[M>>1],0!=(255&(W=(0|V)==(0|k)|(0|V)==(w+-1|0)?-1095&W:W)|0)&0==(20480&W|0)&&(0|mn(E)&&(V=0|mn(E),l[S>>2]=0|V?L:R,U=M+(0-(W=0|l[a>>2])<<1)|0,W=M+(W<<1)|0,s[(H=U+-2|0)>>1]=2|s[H>>1],s[U>>1]=s[U>>1]|s[3160+(V<<1)>>1],s[(U=U+2|0)>>1]=4|s[U>>1],s[(U=x+(A<<1)|0)>>1]=s[U>>1]|s[3160+(V+2<<1)>>1],s[M>>1]=4096|s[M>>1],s[(U=M+2|0)>>1]=s[U>>1]|s[3160+(V+4<<1)>>1],s[(U=W+-2|0)>>1]=1|s[U>>1],s[W>>1]=s[W>>1]|s[3160+(V+6<<1)>>1],s[(W=W+2|0)>>1]=8|s[W>>1]),s[M>>1]=16384|s[M>>1])}while(v>>>0<B>>>0)}}while(0);T=T+1|0,w=0|l[_>>2]}while(T>>>0<w>>>0);v=0|l[y>>2]}else w=0;if(B>>>0>=v>>>0){W=187;break i}}}if(!tt){if(D=1<<i,D|=D>>1,!(v=0|l[y>>2])){W=187;break i}for(O=0-D|0,R=0,x=w=0|l[_>>2];;){if(L=R,R=R+4|0,w){for(P=-4==(0|L),B=3|L,k=0;;){if(P)v=x;else{A=L;do{if(A>>>0>=(v=0|l[y>>2])>>>0)break;W=A,A=A+1|0,E=(M=0|l[r>>2])+(1+(S=(0|C(0|l[a>>2],A))+k|0)<<1)|0,T=(0|l[g>>2])+((0|C(0|l[_>>2],W))+k<<2)|0,I=0|l[t>>2],w=0|s[E>>1],0!=(0|(w=255&(v=(0|W)==(0|B)|(0|W)==(v+-1|0)?-1095&w:w)))&0==(20480&v|0)&&(l[(x=I+100|0)>>2]=I+24+(h[20356+(w|et)>>0]<<2),0|dn(I)&&(V=v>>>4&255,l[x>>2]=I+24+(h[21380+V>>0]<<2),V=(W=0|dn(I))^h[21636+V>>0],l[T>>2]=0|V?O:D,U=E+(0-(W=0|l[a>>2])<<1)|0,W=E+(W<<1)|0,s[(H=U+-2|0)>>1]=2|s[H>>1],s[U>>1]=s[U>>1]|s[3160+(V<<1)>>1],s[(U=U+2|0)>>1]=4|s[U>>1],s[(U=M+(S<<1)|0)>>1]=s[U>>1]|s[3160+(V+2<<1)>>1],s[E>>1]=4096|s[E>>1],s[(U=E+2|0)>>1]=s[U>>1]|s[3160+(V+4<<1)>>1],s[(U=W+-2|0)>>1]=1|s[U>>1],s[W>>1]=s[W>>1]|s[3160+(V+6<<1)>>1],s[(W=W+2|0)>>1]=8|s[W>>1]),s[E>>1]=16384|s[E>>1])}while(A>>>0<R>>>0);v=0|l[_>>2]}if((k=k+1|0)>>>0>=v>>>0)break;x=v}x=v,w=v,v=0|l[y>>2]}else w=0;if(R>>>0>=v>>>0){W=187;break i}}}if(w=0|l[g>>2],v=2+(0|l[r>>2])|0,R=1<<i,R|=R>>1,(A=0|l[y>>2])>>>0>3){L=0-R|0,S=0,M=x=0|l[_>>2];do{if(x){B=0,x=M;do{I=w+(B<<2)|0,k=v+(B<<1)+((A=0|l[a>>2])<<1)|0,T=0|l[t>>2],0!=(0|(E=255&(M=0|s[k>>1])))&0==(20480&M|0)&&(l[(x=T+100|0)>>2]=T+24+(h[20356+(E|et)>>0]<<2),0|dn(T)?(V=M>>>4&255,l[x>>2]=T+24+(h[21380+V>>0]<<2),V=(A=0|dn(T))^h[21636+V>>0],l[I>>2]=0|V?L:R,W=k+((A=0|l[a>>2])<<1)|0,s[(H=(U=k+(0-A<<1)|0)-2|0)>>1]=2|s[H>>1],s[U>>1]=s[U>>1]|s[3160+(V<<1)>>1],s[(U=U+2|0)>>1]=4|s[U>>1],s[(U=k+-2|0)>>1]=s[U>>1]|s[3160+(V+2<<1)>>1],s[k>>1]=4096|s[k>>1],s[(U=k+2|0)>>1]=s[U>>1]|s[3160+(V+4<<1)>>1],s[(U=W+-2|0)>>1]=1|s[U>>1],s[W>>1]=s[W>>1]|s[3160+(V+6<<1)>>1],s[(W=W+2|0)>>1]=8|s[W>>1]):A=0|l[a>>2],s[k>>1]=16384|s[k>>1],x=0|l[_>>2],T=0|l[t>>2]),I=I+(x<<2)|0,0!=(0|(E=255&(M=0|s[(k=k+(A<<1)|0)>>1])))&0==(20480&M|0)&&(l[(x=T+100|0)>>2]=T+24+(h[20356+(E|et)>>0]<<2),0|dn(T)?(V=M>>>4&255,l[x>>2]=T+24+(h[21380+V>>0]<<2),V=(A=0|dn(T))^h[21636+V>>0],l[I>>2]=0|V?L:R,W=k+((A=0|l[a>>2])<<1)|0,s[(H=(U=k+(0-A<<1)|0)-2|0)>>1]=2|s[H>>1],s[U>>1]=s[U>>1]|s[3160+(V<<1)>>1],s[(U=U+2|0)>>1]=4|s[U>>1],s[(U=k+-2|0)>>1]=s[U>>1]|s[3160+(V+2<<1)>>1],s[k>>1]=4096|s[k>>1],s[(U=k+2|0)>>1]=s[U>>1]|s[3160+(V+4<<1)>>1],s[(U=W+-2|0)>>1]=1|s[U>>1],s[W>>1]=s[W>>1]|s[3160+(V+6<<1)>>1],s[(W=W+2|0)>>1]=8|s[W>>1]):A=0|l[a>>2],s[k>>1]=16384|s[k>>1],x=0|l[_>>2],T=0|l[t>>2]),P=I+(x<<2)|0,0!=(0|(E=255&(M=0|s[(k=k+(A<<1)|0)>>1])))&0==(20480&M|0)?(l[(x=T+100|0)>>2]=T+24+(h[20356+(E|et)>>0]<<2),0|dn(T)?(V=M>>>4&255,l[x>>2]=T+24+(h[21380+V>>0]<<2),V=(A=0|dn(T))^h[21636+V>>0],l[P>>2]=0|V?L:R,W=k+((A=0|l[a>>2])<<1)|0,s[(H=(U=k+(0-A<<1)|0)-2|0)>>1]=2|s[H>>1],s[U>>1]=s[U>>1]|s[3160+(V<<1)>>1],s[(U=U+2|0)>>1]=4|s[U>>1],s[(U=k+-2|0)>>1]=s[U>>1]|s[3160+(V+2<<1)>>1],s[k>>1]=4096|s[k>>1],s[(U=k+2|0)>>1]=s[U>>1]|s[3160+(V+4<<1)>>1],s[(U=W+-2|0)>>1]=1|s[U>>1],s[W>>1]=s[W>>1]|s[3160+(V+6<<1)>>1],s[(W=W+2|0)>>1]=8|s[W>>1]):A=0|l[a>>2],s[k>>1]=16384|s[k>>1],x=0|l[_>>2],I=0|l[t>>2]):I=T,T=P+(x<<2)|0,0!=(0|(E=255&(M=0|s[(A=k+(A<<1)|0)>>1])))&0==(20480&M|0)&&(l[(x=I+100|0)>>2]=I+24+(h[20356+(E|et)>>0]<<2),0|dn(I)&&(V=M>>>4&255,l[x>>2]=I+24+(h[21380+V>>0]<<2),V=(W=0|dn(I))^h[21636+V>>0],l[T>>2]=0|V?L:R,U=A+(0-(W=0|l[a>>2])<<1)|0,W=A+(W<<1)|0,s[(H=U+-2|0)>>1]=2|s[H>>1],s[U>>1]=s[U>>1]|s[3160+(V<<1)>>1],s[(U=U+2|0)>>1]=4|s[U>>1],s[(U=A+-2|0)>>1]=s[U>>1]|s[3160+(V+2<<1)>>1],s[A>>1]=4096|s[A>>1],s[(U=A+2|0)>>1]=s[U>>1]|s[3160+(V+4<<1)>>1],s[(U=W+-2|0)>>1]=1|s[U>>1],s[W>>1]=s[W>>1]|s[3160+(V+6<<1)>>1],s[(W=W+2|0)>>1]=8|s[W>>1]),s[A>>1]=16384|s[A>>1],x=0|l[_>>2]),B=B+1|0}while(B>>>0<x>>>0);M=x,A=0|l[y>>2]}else x=0;w=w+(x<<2<<2)|0,v=v+(l[a>>2]<<2<<1)|0,S=S+4|0}while(S>>>0<(-4&A)>>>0);x=M}else S=0,x=0|l[_>>2];if(!x){W=187;break i}L=0-R|0,B=0;do{if(S>>>0<A>>>0)for(I=S,k=v+(B<<1)|0,P=w+(B<<2)|0;k=k+(l[a>>2]<<1)|0,M=0|l[t>>2],0!=(0|(T=255&(E=0|s[k>>1])))&0==(20480&E|0)&&(l[(x=M+100|0)>>2]=M+24+(h[20356+(T|et)>>0]<<2),0|dn(M)&&(V=E>>>4&255,l[x>>2]=M+24+(h[21380+V>>0]<<2),V=(W=0|dn(M))^h[21636+V>>0],l[P>>2]=0|V?L:R,U=k+(0-(W=0|l[a>>2])<<1)|0,W=k+(W<<1)|0,s[(H=U+-2|0)>>1]=2|s[H>>1],s[U>>1]=s[U>>1]|s[3160+(V<<1)>>1],s[(U=U+2|0)>>1]=4|s[U>>1],s[(U=k+-2|0)>>1]=s[U>>1]|s[3160+(V+2<<1)>>1],s[k>>1]=4096|s[k>>1],s[(U=k+2|0)>>1]=s[U>>1]|s[3160+(V+4<<1)>>1],s[(U=W+-2|0)>>1]=1|s[U>>1],s[W>>1]=s[W>>1]|s[3160+(V+6<<1)>>1],s[(W=W+2|0)>>1]=8|s[W>>1]),s[k>>1]=16384|s[k>>1],x=0|l[_>>2],A=0|l[y>>2]),!((I=I+1|0)>>>0>=A>>>0);)P=P+(x<<2)|0;B=B+1|0}while(B>>>0<x>>>0);W=187;break;case 1:if(X){if(I=0-(T=1<<i>>1)|0,!(v=0|l[y>>2]))break i;for(E=0,x=w=0|l[_>>2];;){S=E,E=E+4|0;do{if(w){if(-4==(0|S)){A=x,w=x;break}M=0;do{w=M,M=M+1|0,v=S;do{if(v>>>0>=(0|l[y>>2])>>>0)break;A=v,v=v+1|0,x=(0|l[r>>2])+((0|C(0|l[a>>2],v))+M<<1)|0,A=(0|l[g>>2])+((0|C(0|l[_>>2],A))+w<<2)|0,4096==(20480&s[x>>1])&&(V=(V=0!=(0|mn(0|l[p>>2])))?T:I,W=0|l[A>>2],l[A>>2]=((0|W)<0?0-V|0:V)+W,s[x>>1]=8192|s[x>>1])}while(v>>>0<E>>>0);v=0|l[_>>2]}while(M>>>0<v>>>0);A=v,w=v,v=0|l[y>>2]}else A=x,w=0}while(0);if(E>>>0>=v>>>0){W=187;break i}x=A}}if(!tt){if(B=0-(P=1<<i>>1)|0,!(v=0|l[y>>2])){W=187;break i}for(k=0,A=w=0|l[_>>2];;){I=k,k=k+4|0;do{if(w){if(T=3|I,-4==(0|I)){x=A,w=A;break}E=0;do{x=E,E=E+1|0,w=I;do{if(w>>>0>=(v=0|l[y>>2])>>>0)break;V=w,w=w+1|0,M=(0|l[r>>2])+((0|C(0|l[a>>2],w))+E<<1)|0,S=(0|l[g>>2])+((0|C(0|l[_>>2],V))+x<<2)|0,A=0|l[t>>2],W=0|s[M>>1],4096==(20480&(v=(0|V)==(0|T)|(0|V)==(v+-1|0)?-1095&W:W)|0)&&(l[A+100>>2]=A+24+((8192&v|0?16:255&v|0?15:14)<<2),V=(V=0!=(0|dn(A)))?P:B,W=0|l[S>>2],l[S>>2]=((0|W)<0?0-V|0:V)+W,s[M>>1]=8192|s[M>>1])}while(w>>>0<k>>>0);v=0|l[_>>2]}while(E>>>0<v>>>0);x=v,w=v,v=0|l[y>>2]}else x=A,w=0}while(0);if(k>>>0>=v>>>0){W=187;break i}A=x}}if(w=0|l[g>>2],v=2+(0|l[r>>2])|0,L=0-(B=1<<i>>1)|0,A=0|l[y>>2],x=0|l[_>>2],A>>>0>3){S=0,M=x;do{if(x){P=0,x=M;do{T=w+(P<<2)|0,I=v+(P<<1)+((E=0|l[a>>2])<<1)|0,A=0|l[t>>2],4096==(20480&(M=0|s[I>>1])|0)&&(l[A+100>>2]=A+24+((8192&M|0?16:255&M|0?15:14)<<2),x=(x=0!=(0|dn(A)))?B:L,A=0|l[T>>2],l[T>>2]=((0|A)<0?0-x|0:x)+A,s[I>>1]=8192|s[I>>1],A=0|l[t>>2],x=0|l[_>>2],E=0|l[a>>2]),T=T+(x<<2)|0,4096==(20480&(M=0|s[(I=I+(E<<1)|0)>>1])|0)&&(l[A+100>>2]=A+24+((8192&M|0?16:255&M|0?15:14)<<2),x=(x=0!=(0|dn(A)))?B:L,A=0|l[T>>2],l[T>>2]=((0|A)<0?0-x|0:x)+A,s[I>>1]=8192|s[I>>1],A=0|l[t>>2],x=0|l[_>>2],E=0|l[a>>2]),k=T+(x<<2)|0,4096==(20480&(M=0|s[(I=I+(E<<1)|0)>>1])|0)?(l[A+100>>2]=A+24+((8192&M|0?16:255&M|0?15:14)<<2),x=(x=0!=(0|dn(A)))?B:L,T=0|l[k>>2],l[k>>2]=((0|T)<0?0-x|0:x)+T,s[I>>1]=8192|s[I>>1],T=0|l[t>>2],x=0|l[_>>2],A=0|l[a>>2]):(T=A,A=E),E=k+(x<<2)|0,4096==(20480&(M=0|s[(A=I+(A<<1)|0)>>1])|0)&&(l[T+100>>2]=T+24+((8192&M|0?16:255&M|0?15:14)<<2),W=(W=0!=(0|dn(T)))?B:L,x=0|l[E>>2],l[E>>2]=((0|x)<0?0-W|0:W)+x,s[A>>1]=8192|s[A>>1],x=0|l[_>>2]),P=P+1|0}while(P>>>0<x>>>0);M=x,A=0|l[y>>2]}else x=0;w=w+(x<<2<<2)|0,v=v+(l[a>>2]<<2<<1)|0,S=S+4|0}while(S>>>0<(-4&A)>>>0);x=M}else S=0;if(!x){W=187;break i}P=0;do{if(S>>>0<A>>>0)for(T=S,I=v+(P<<1)|0,k=w+(P<<2)|0;I=I+(l[a>>2]<<1)|0,M=0|l[t>>2],4096==(20480&(E=0|s[I>>1])|0)&&(l[M+100>>2]=M+24+((8192&E|0?16:255&E|0?15:14)<<2),A=(A=0!=(0|dn(M)))?B:L,x=0|l[k>>2],l[k>>2]=((0|x)<0?0-A|0:A)+x,s[I>>1]=8192|s[I>>1],x=0|l[_>>2],A=0|l[y>>2]),!((T=T+1|0)>>>0>=A>>>0);)k=k+(x<<2)|0;P=P+1|0}while(P>>>0<x>>>0);W=187;break;case 2:U=0|l[t>>2],V=1<<i,V|=V>>1;do{if(tt){if(x=0|l[g>>2],w=2+(0|l[r>>2])|0,(v=0|l[y>>2])>>>0>3)for(L=U+92|0,R=U+100|0,D=U+96|0,O=0-V|0,A=w,S=0,M=W=0|l[_>>2],w=W;;){if(M){k=1+(I=1|S)|0,P=3|S,B=I+3|0,T=0;do{w=x+(T<<2)|0,M=A+(T<<1)|0,W=0|l[r>>2],v=0|l[a>>2],T=T+1|0,z=W+((0|C(v,I))+T<<1)|0,N=W+((0|C(v,k))+T<<1)|0,H=W+((0|C(v,P))+T<<1)|0,W=W+((0|C(v,B))+T<<1)|0;n:do{if(20735&(s[N>>1]|s[z>>1]|s[H>>1]|s[W>>1]))Wi(t,H=M+(v<<1)|0,w,it,V),W=w+(l[_>>2]<<2)|0,Wi(t,H=H+(l[a>>2]<<1)|0,W,it,V),W=W+(l[_>>2]<<2)|0,Wi(t,H=H+(l[a>>2]<<1)|0,W,it,V),Wi(t,H+(l[a>>2]<<1)|0,W+(l[_>>2]<<2)|0,it,V);else{if(l[R>>2]=L,!(0|dn(U)))break;if(l[R>>2]=D,(E=0|(E=(0|dn(U))<<1)|dn(U))>>>0>=4)break;for(w=w+((0|C(0|l[_>>2],E))<<2)|0,v=M+((0|C(0|l[a>>2],E))<<1)|0,M=E;;){if(M>>>0>=(0|l[y>>2])>>>0)break n;if(v=v+(l[a>>2]<<1)|0,(0|M)==(0|E)?(W=0|l[t>>2],H=(0|d[v>>1])>>>4&255,l[W+100>>2]=W+24+(h[21380+H>>0]<<2),H=(W=0|dn(W))^h[21636+H>>0],l[w>>2]=0|H?O:V,z=v+(0-(W=0|l[a>>2])<<1)|0,W=v+(W<<1)|0,s[(N=z+-2|0)>>1]=2|s[N>>1],s[z>>1]=s[z>>1]|s[3160+(H<<1)>>1],s[(z=z+2|0)>>1]=4|s[z>>1],s[(z=v+-2|0)>>1]=s[z>>1]|s[3160+(H+2<<1)>>1],s[v>>1]=4096|s[v>>1],s[(z=v+2|0)>>1]=s[z>>1]|s[3160+(H+4<<1)>>1],s[(z=W+-2|0)>>1]=1|s[z>>1],s[W>>1]=s[W>>1]|s[3160+(H+6<<1)>>1],s[(W=W+2|0)>>1]=8|s[W>>1],s[v>>1]=-16385&s[v>>1]):Wi(t,v,w,it,V),(M=M+1|0)>>>0>=4)break;w=w+(l[_>>2]<<2)|0}}}while(0);w=0|l[_>>2]}while(T>>>0<w>>>0);M=w,v=0|l[y>>2]}else M=0;if(x=x+(M<<2<<2)|0,A=A+(l[a>>2]<<2<<1)|0,(S=S+4|0)>>>0>=(-4&v)>>>0){I=A,T=x;break}}else I=w,T=x,S=0,w=0|l[_>>2];if(!w)break;E=0;do{if(S>>>0<v>>>0)for(x=I+(E<<1)|0,A=T+(E<<2)|0,M=S;Wi(t,x=x+(l[a>>2]<<1)|0,A,it,V),w=0|l[_>>2],!((M=M+1|0)>>>0>=(v=0|l[y>>2])>>>0);)A=A+(w<<2)|0;E=E+1|0}while(E>>>0<w>>>0)}else{if(!(v=0|l[y>>2]))break;F=U+92|0,N=U+100|0,z=U+96|0,H=0-V|0,x=0,w=0|l[_>>2];do{if(w)for(L=3|x,D=1+(R=1|x)|0,O=R+3|0,G=x+4|0,B=0;;){do{if(L>>>0<v>>>0){if(v=0|l[r>>2],w=0|l[a>>2],A=B+1|0,P=v+((0|C(w,R))+A<<1)|0,20735&s[P>>1]){v=0,P=0,W=152;break}if(P=v+((0|C(w,D))+A<<1)|0,20735&s[P>>1]){v=0,P=0,W=152;break}if(P=v+((0|C(w,L))+A<<1)|0,20735&s[P>>1]){v=0,P=0,W=152;break}if(P=v+((0|C(w,O))+A<<1)|0,20665&s[P>>1]){v=0,P=0,W=152;break}if(l[N>>2]=F,!(0|dn(U)))break;l[N>>2]=z,v=0|(v=(0|dn(U))<<1)|dn(U),P=1,W=152}else v=0,P=0,W=152}while(0);n:do{if(152==(0|W)){if(W=0,!((M=v+x|0)>>>0<G>>>0))break;A=M;do{if(A>>>0>=(v=0|l[y>>2])>>>0)break n;It=A,A=A+1|0,T=(S=0|l[r>>2])+(1+(E=(0|C(0|l[a>>2],A))+B|0)<<1)|0,I=(0|l[g>>2])+((0|C(0|l[_>>2],It))+B<<2)|0,k=0|l[t>>2],w=0|s[T>>1],w=(0|It)==(0|L)|(0|It)==(v+-1|0)?-1095&w:w;do{if(P&(0|It)==(0|M))v=k+100|0,W=158;else{if(20480&w|0)break;l[(v=k+100|0)>>2]=k+24+(h[20356+(255&w|et)>>0]<<2),0|dn(k)&&(W=158)}}while(0);158==(0|W)&&(W=0,It=w>>>4&255,l[v>>2]=k+24+(h[21380+It>>0]<<2),k=0|dn(k),k^=h[21636+It>>0],l[I>>2]=0|k?H:V,I=T+(0-(It=0|l[a>>2])<<1)|0,It=T+(It<<1)|0,s[(w=I+-2|0)>>1]=2|s[w>>1],s[I>>1]=s[I>>1]|s[3160+(k<<1)>>1],s[(I=I+2|0)>>1]=4|s[I>>1],s[(I=S+(E<<1)|0)>>1]=s[I>>1]|s[3160+(k+2<<1)>>1],s[T>>1]=4096|s[T>>1],s[(I=T+2|0)>>1]=s[I>>1]|s[3160+(k+4<<1)>>1],s[(I=It+-2|0)>>1]=1|s[I>>1],s[It>>1]=s[It>>1]|s[3160+(k+6<<1)>>1],s[(It=It+2|0)>>1]=8|s[It>>1]),s[T>>1]=-16385&s[T>>1]}while(A>>>0<G>>>0)}}while(0);if(B=B+1|0,w=0|l[_>>2],v=0|l[y>>2],B>>>0>=w>>>0){x=G;break}}else x=x+4|0,w=0}while(x>>>0<v>>>0)}}while(0);if(q){W=187;break i}l[U+100>>2]=U+96,dn(U),dn(U),dn(U),dn(U),W=187;break;default:W=187}}while(0);do{if(187==(0|W)){if(W=0,Y)break;sn(rt),on(rt,18,0,46),on(rt,17,0,3),on(rt,0,0,4)}}while(0);if(i=i+((It=3==(0|(e=e+1|0)))<<31>>31)|0,e=It?0:e,j=j+1|0,!((0|i)>0&&j>>>0<(0|l[Z>>2])>>>0))break e}}}while(0);J=J+1|0}while(J>>>0<(0|l[ot>>2])>>>0)}if(i=(0|l[at>>2])-(0|l[gt>>2])|0,e=(0|l[lt>>2])-(0|l[_t>>2])|0,1&(v=0|l[mt>>2])&&(It=0|l[c>>2],i=(0|l[It+(136*xt|0)+8>>2])+i-(0|l[It+(136*xt|0)>>2])|0),2&v&&(It=0|l[c>>2],e=(0|l[It+(136*xt|0)+12>>2])+e-(0|l[It+(136*xt|0)+4>>2])|0),E=0|l[g>>2],T=0|l[_>>2],I=0|l[y>>2],0|(v=0|l[u>>2])&&(Et=1<<v,!(0==(0|I)|0==(0|T)))){v=0;do{x=0|C(v,T),w=0;do{(0|(S=(0|(M=0|l[(A=E+(w+x<<2)|0)>>2]))>-1?M:0-M|0))>=(0|Et)&&(It=S>>l[u>>2],l[A>>2]=(0|M)<0?0-It|0:It),w=w+1|0}while((0|w)!=(0|T));v=v+1|0}while((0|v)!=(0|I))}if(A=(0|l[n>>2])+((0|C(e,b))+i<<2)|0,i=0==(0|I)|0==(0|T),1==(0|l[o>>2])){if(!i){i=0;do{v=0|C(i,T),w=0|C(i,b),e=0;do{l[A+(e+w<<2)>>2]=(0|l[E+(e+v<<2)>>2])/2|0,e=e+1|0}while((0|e)!=(0|T));i=i+1|0}while((0|i)!=(0|I))}}else if(!i)for(e=E,w=0;;){for(i=A,v=e,x=0;m[i>>2]=+m[yt>>2]*+(0|l[v>>2]),(0|(x=x+1|0))!=(0|T);)i=i+4|0,v=v+4|0;if((0|(w=w+1|0))==(0|I))break;A=A+(b<<2)|0,e=e+(T<<2)|0}ct=ct+1|0}while(ct>>>0<(0|C(0|l[dt>>2],0|l[ut>>2]))>>>0);v=0|l[wt>>2],i=0|l[vt>>2]}ft=ft+1|0}while(ft>>>0<(0|C(v,i))>>>0);e=0|l[Mt>>2]}bt=bt+1|0}while(bt>>>0<e>>>0);i=0|l[Tt>>2]}if((St=St+1|0)>>>0>=i>>>0){i=1,W=219;break}}return 219==(0|W)?0|i:0}function Vi(t,e,i){t|=0;var n,r=0,a=0,s=0,o=0;if(o=0|C(i|=0,e|=0),!(0|l[t+40>>2])){a=t+24|0,r=t+8|0;do{if(o>>>0>(0|l[a>>2])>>>0){if(Vt(0|l[r>>2]),s=0|Ut(o<<2),l[r>>2]=s,s){l[a>>2]=o,a=s,r=s;break}return 0|(i=0)}a=r=0|l[r>>2]}while(0);0|a&&kr(0|r,0,o<<2|0)}s=e+2|0,l[t+32>>2]=s,s=0|C(i+2|0,s),o=t+28|0,r=0|l[(n=t+12|0)>>2];do{if(s>>>0>(0|l[o>>2])>>>0){if(Vt(r),r=0|Ut(a=s<<1),l[n>>2]=r,r){l[o>>2]=s;break}return 0|(i=0)}a=s<<1}while(0);return kr(0|r,0,0|a),l[t+16>>2]=e,l[t+20>>2]=i,0|(i=1)}function Wi(t,e,i,n,r){e|=0,i|=0,n|=0,r|=0;var a,o=0,c=0;return o=0|l[(t|=0)>>2],20480&(c=0|s[e>>1])|0?(c=0|s[e>>1],c&=-16385,void(s[e>>1]=c)):(l[(a=o+100|0)>>2]=o+24+(h[20356+(255&c|n<<8)>>0]<<2),0|dn(o)?(c=c>>>4&255,l[a>>2]=o+24+(h[21380+c>>0]<<2),o=0|dn(o),o^=h[21636+c>>0],l[i>>2]=0|o?0-r|0:r,r=e+(0-(c=0|l[t+32>>2])<<1)|0,c=e+(c<<1)|0,s[(n=r+-2|0)>>1]=2|s[n>>1],s[r>>1]=s[r>>1]|s[3160+(o<<1)>>1],s[(r=r+2|0)>>1]=4|s[r>>1],s[(r=e+-2|0)>>1]=s[r>>1]|s[3160+(o+2<<1)>>1],s[e>>1]=4096|s[e>>1],s[(r=e+2|0)>>1]=s[r>>1]|s[3160+(o+4<<1)>>1],s[(r=c+-2|0)>>1]=1|s[r>>1],s[c>>1]=s[c>>1]|s[3160+(o+6<<1)>>1],s[(c=c+2|0)>>1]=8|s[c>>1],c=0|s[e>>1],c&=-16385,void(s[e>>1]=c)):(c=0|s[e>>1],c&=-16385,void(s[e>>1]=c)))}function ji(t,e,i,n,a){t|=0,i|=0,n|=0,a|=0;var o,c,u,d,f,p,g,y,b,v,w=0,x=0,A=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0,Y=0,X=0,J=0,q=0,Q=0,K=0,$=0,tt=0,et=0,it=0,nt=0,rt=0,at=0,st=0,ot=0,lt=0,ct=0,ht=0,ut=0,dt=0,ft=0,pt=0,mt=0,gt=0,_t=0,yt=0,bt=0,vt=0,wt=0,xt=0,At=0,Mt=0,St=0,Et=0,Tt=0,It=0,Ct=0,kt=0,Pt=0,Bt=0,Lt=0,Rt=0,Dt=0,Ot=0,Gt=0,Ft=0,Nt=0,zt=0,Ht=0,Ut=0,Vt=0,Wt=0,jt=0,Zt=0,Yt=0,Xt=0,Jt=0,qt=0,Qt=0,Kt=0;if(_[(v=32+(e|=0)|0)>>3]=0,!(w=0|l[(Qt=e+16|0)>>2]))return 0|(Qt=1);b=e+20|0,o=i+5584|0,c=t+16|0,u=t+20|0,d=t+8|0,f=t+36|0,p=0!=(0|n),g=t+12|0,y=t+32|0,qt=0,e=w;t:for(;;){if(i=0|l[b>>2],w=0|l[o>>2],Xt=(0|l[i+(52*qt|0)+8>>2])-(0|l[i+(52*qt|0)>>2])|0,x=0|l[(Jt=i+(52*qt|0)+16|0)>>2]){Yt=i+(52*qt|0)+24|0,jt=i+(52*qt|0)+32|0,Zt=w+(1080*qt|0)+20|0,Ut=w+(1080*qt|0)+16|0,Wt=p&qt>>>0<a>>>0,Vt=n+(qt<<3)|0,Ht=0,e=x;do{if(Ft=0|l[Yt>>2],i=0|l[(Nt=Ft+(136*Ht|0)+24|0)>>2]){Rt=Ft+(136*Ht|0)+16|0,Ot=~Ht,Gt=Ht+-1|0,Lt=0,w=0|l[(Dt=Ft+(136*Ht|0)+20|0)>>2],e=0|l[Rt>>2];do{if(Bt=Ft+(136*Ht|0)+28+(36*Lt|0)+32|0,0|C(w,e)){Tt=Ft+(136*Ht|0)+28+(36*Lt|0)+20|0,It=Ft+(136*Ht|0)+28+(36*Lt|0)|0,Ct=Ft+(136*Ht|0)+28+(36*Lt|0)+4|0,kt=Ft+(136*Ht|0)+28+(36*Lt|0)+16|0,Pt=((0|(Et=67108864/(0|~~+S(8192*+m[Bt>>2]))|0))<0)<<31>>31,St=0;do{if(At=(i=0|l[Tt>>2])+(40*St|0)+16|0,0|C(0|l[(Mt=i+(40*St|0)+20|0)>>2],0|l[At>>2])){xt=i+(40*St|0)+24|0,wt=0;do{if(vt=0|l[xt>>2],e=(x=0|l[vt+(52*wt|0)+12>>2])-(0|l[It>>2])|0,i=(A=0|l[vt+(52*wt|0)+16>>2])-(0|l[Ct>>2])|0,1&(w=0|l[kt>>2])&&(bt=0|l[Yt>>2],e=(0|l[bt+(136*Gt|0)+8>>2])+e-(0|l[bt+(136*Gt|0)>>2])|0),2&w&&(bt=0|l[Yt>>2],i=(0|l[bt+(136*Gt|0)+12>>2])+i-(0|l[bt+(136*Gt|0)+4>>2])|0),!(0|Vi(t,(0|l[vt+(52*wt|0)+20>>2])-x|0,(0|l[vt+(52*wt|0)+24>>2])-A|0))){e=0,zt=163;break t}A=0|l[c>>2],E=0|l[u>>2],k=(0|l[jt>>2])+((0|C(i,Xt))+e<<2)|0,l[d>>2]=k,l[f>>2]=Xt,e=0|l[Zt>>2],i=0!=(0|E);do{if(1==(0|e))if(i){if(!A){zt=27;break}for(e=0,i=0;;){for(w=0,x=e;l[(zt=k+(x<<2)|0)>>2]=l[zt>>2]<<6,(0|(w=w+1|0))!=(0|A);)x=x+1|0;if((0|(i=i+1|0))==(0|E)){zt=27;break}e=Xt+e|0}}else e=1;else if(i){if(!A){zt=27;break}for(e=0,w=0;;){for(i=0,x=w;bt=0|Er(0|(bt=0|br(0|(bt=0|yr(0|(bt=0|l[(zt=k+(x<<2)|0)>>2]),((0|bt)<0)<<31>>31|0,0|Et,0|Pt)),0|M,4096,0)),0|M,18),l[zt>>2]=bt,(0|(i=i+1|0))!=(0|A);)x=x+1|0;if((0|(e=e+1|0))==(0|E)){zt=27;break}w=Xt+w|0}}}while(0);27==(0|zt)&&(zt=0,e=0|l[Zt>>2]),mt=0|l[kt>>2],gt=(0|l[Jt>>2])+Ot|0,_t=+m[Bt>>2],yt=0|l[Ut>>2],bt=0|l[t>>2],E=0|l[c>>2];do{if(E){if(!(T=0|l[u>>2])){i=0;break}A=0|l[f>>2],x=0,w=0;do{i=0;do{pt=k+((0|C(i,A))+x<<2)|0,w=(0|w)>(0|(pt=(0|(pt=0|l[pt>>2]))>-1?pt:0-pt|0))?w:pt,i=i+1|0}while((0|i)!=(0|T));x=x+1|0}while((0|x)!=(0|E));if(!w){i=0;break}if((0|w)>1)for(i=0;i=i+1|0,w>>>0>3;)w>>>=1;else i=0;i=i+-5|0}else i=0}while(0);l[(ft=vt+(52*wt|0)+28|0)>>2]=i,i=i+-1|0,sn(bt),on(bt,18,0,46),on(bt,17,0,3),on(bt,0,0,4),$i(bt,0|l[(pt=vt+(52*wt|0)|0)>>2]);e:do{if((0|i)>-1)for(ut=vt+(52*wt|0)+8|0,dt=0!=(0|(it=1&yt)),nt=1==(0|e),rt=0==(4&yt|0),it=0==(0|it),at=0==(2&yt|0),st=0!=(0|(lt=8&yt)),ot=mt<<8,ct=0==(32&yt|0),ht=1^(lt=0==(0|lt)),e=0,tt=2,w=0,et=0;;){$=0|l[ut>>2],W=dt&(tt>>>0<2?(0|i)<((0|l[ft>>2])-4|0):0);i:do{switch(0|tt){case 0:if(U=1<<i+6,!(x=0|l[u>>2])){w=0;break i}V=0==(0|i)?3176:3432,H=0,w=0,A=E=0|l[c>>2];do{if(z=H,H=H+4|0,A){for(F=-4==(0|z),N=3|z,G=0;;){if(F)A=E;else{O=z;do{if(O>>>0>=(x=0|l[u>>2])>>>0)break;K=O,O=O+1|0,D=(B=0|l[g>>2])+(1+(L=(0|C(0|l[y>>2],O))+G|0)<<1)|0,T=(0|l[d>>2])+((0|C(0|l[f>>2],K))+G<<2)|0,R=0|l[t>>2],k=0|s[D>>1],0!=(0|(x=255&(k=st&((0|K)==(0|N)|(0|K)==(x+-1|0))?-1095&k:k)))&0==(20480&k|0)&&(E=1&(A=0!=(((0|(A=0|l[T>>2]))<0?0-A|0:A)&U|0)),l[(P=R+100|0)>>2]=R+24+(h[20356+(x|ot)>>0]<<2),W?rn(R,E):tn(R,E),A&&(A=(x=0|l[T>>2])>>>31,w=w+(0|s[V+((((0|x)<0?0-x|0:x)>>>i&127)<<1)>>1])|0,x=k>>>4&255,l[P>>2]=R+24+(h[21380+x>>0]<<2),W?rn(R,A):tn(R,A^h[21636+x>>0]),Q=D+(0-(K=0|l[y>>2])<<1)|0,K=D+(K<<1)|0,s[(q=Q+-2|0)>>1]=2|s[q>>1],s[Q>>1]=s[Q>>1]|s[3160+(A<<1)>>1],s[(Q=Q+2|0)>>1]=4|s[Q>>1],s[(Q=B+(L<<1)|0)>>1]=s[Q>>1]|s[3160+((2|A)<<1)>>1],s[D>>1]=4096|s[D>>1],s[(Q=D+2|0)>>1]=s[Q>>1]|s[3160+((4|A)<<1)>>1],s[(Q=K+-2|0)>>1]=1|s[Q>>1],s[K>>1]=s[K>>1]|s[3160+((6|A)<<1)>>1],s[(K=K+2|0)>>1]=8|s[K>>1]),s[D>>1]=16384|s[D>>1])}while(O>>>0<H>>>0);A=0|l[c>>2]}if((G=G+1|0)>>>0>=A>>>0)break;E=A}x=0|l[u>>2],E=A}else A=0}while(H>>>0<x>>>0);break;case 1:if(G=1<<i+6,!(x=0|l[u>>2])){w=0;break i}F=0==(0|i)?3688:3944,O=0,w=0,A=0|l[c>>2];do{if(D=O,O=O+4|0,A){L=-4==(0|D),R=3|D,B=0;do{P=B,B=B+1|0;n:do{if(!L)if(lt)if(W){k=D;do{if(k>>>0>=(0|l[u>>2])>>>0)break n;x=k,k=k+1|0,E=(0|l[g>>2])+((0|C(0|l[y>>2],k))+B<<1)|0,A=0|l[t>>2],4096==(20480&(T=0|s[E>>1])|0)&&(K=(0|l[d>>2])+((0|C(0|l[f>>2],x))+P<<2)|0,K=0|l[K>>2],w=w+(0|s[F+(((K=(0|K)<0?0-K|0:K)>>>i&127)<<1)>>1])|0,l[A+100>>2]=A+24+((8192&T|0?16:255&T|0?15:14)<<2),rn(A,0!=(K&G|0)&1),s[E>>1]=8192|s[E>>1])}while(k>>>0<O>>>0)}else{k=D;do{if(k>>>0>=(0|l[u>>2])>>>0)break n;x=k,k=k+1|0,E=(0|l[g>>2])+((0|C(0|l[y>>2],k))+B<<1)|0,A=0|l[t>>2],4096==(20480&(T=0|s[E>>1])|0)&&(K=(0|l[d>>2])+((0|C(0|l[f>>2],x))+P<<2)|0,K=0|l[K>>2],w=w+(0|s[F+(((K=(0|K)<0?0-K|0:K)>>>i&127)<<1)>>1])|0,l[A+100>>2]=A+24+((8192&T|0?16:255&T|0?15:14)<<2),tn(A,0!=(K&G|0)&1),s[E>>1]=8192|s[E>>1])}while(k>>>0<O>>>0)}else if(W){k=D;do{if(k>>>0>=(x=0|l[u>>2])>>>0)break n;A=k,k=k+1|0,T=(0|l[g>>2])+((0|C(0|l[y>>2],k))+B<<1)|0,E=0|l[t>>2],K=0|s[T>>1],4096==(20480&(x=(0|A)==(0|R)|(0|A)==(x+-1|0)?-1095&K:K)|0)&&(K=(0|l[d>>2])+((0|C(0|l[f>>2],A))+P<<2)|0,K=0|l[K>>2],w=w+(0|s[F+(((K=(0|K)<0?0-K|0:K)>>>i&127)<<1)>>1])|0,l[E+100>>2]=E+24+((8192&x|0?16:255&x|0?15:14)<<2),rn(E,0!=(K&G|0)&1),s[T>>1]=8192|s[T>>1])}while(k>>>0<O>>>0)}else{k=D;do{if(k>>>0>=(x=0|l[u>>2])>>>0)break n;A=k,k=k+1|0,T=(0|l[g>>2])+((0|C(0|l[y>>2],k))+B<<1)|0,E=0|l[t>>2],K=0|s[T>>1],4096==(20480&(x=(0|A)==(0|R)|(0|A)==(x+-1|0)?-1095&K:K)|0)&&(K=(0|l[d>>2])+((0|C(0|l[f>>2],A))+P<<2)|0,K=0|l[K>>2],w=w+(0|s[F+(((K=(0|K)<0?0-K|0:K)>>>i&127)<<1)>>1])|0,l[E+100>>2]=E+24+((8192&x|0?16:255&x|0?15:14)<<2),tn(E,0!=(K&G|0)&1),s[T>>1]=8192|s[T>>1])}while(k>>>0<O>>>0)}}while(0);A=0|l[c>>2]}while(B>>>0<A>>>0);x=0|l[u>>2]}else A=0}while(O>>>0<x>>>0);break;case 2:if(Y=0|l[t>>2],X=1<<i+6,x=0|l[u>>2]){J=Y+92|0,q=Y+100|0,Q=Y+96|0,K=0==(0|i)?3176:3432,E=0,w=0,A=0|l[c>>2];do{if(A)for(N=3|E,H=1+(z=1|E)|0,U=z+3|0,Z=E+4|0,V=E+1|0,W=E+2|0,j=E+3|0,F=0;;){do{if(N>>>0<x>>>0){if(x=0|l[g>>2],A=0|l[y>>2],T=F+1|0,k=x+((0|C(A,z))+T<<1)|0,k=0|s[k>>1],lt){if(D=x+((0|C(A,H))+T<<1)|0,O=x+((0|C(A,N))+T<<1)|0,G=x+((0|C(A,U))+T<<1)|0,20735&(s[D>>1]|k|s[O>>1]|s[G>>1])){G=0,x=0,zt=105;break}}else{if(20735&k){G=0,x=0,zt=105;break}if(G=x+((0|C(A,H))+T<<1)|0,20735&s[G>>1]){G=0,x=0,zt=105;break}if(G=x+((0|C(A,N))+T<<1)|0,20735&s[G>>1]){G=0,x=0,zt=105;break}if(G=x+((0|C(A,U))+T<<1)|0,20665&s[G>>1]){G=0,x=0,zt=105;break}}x=0|l[d>>2],A=0|l[f>>2],G=x+((0|C(A,E))+F<<2)|0,G=0|l[G>>2];do{if(((0|G)<0?0-G|0:G)&X)x=0;else{if(G=x+((0|C(A,V))+F<<2)|0,((0|(G=0|l[G>>2]))<0?0-G|0:G)&X|0){x=1;break}if(G=x+((0|C(A,W))+F<<2)|0,((0|(G=0|l[G>>2]))<0?0-G|0:G)&X|0){x=2;break}x=x+((0|C(A,j))+F<<2)|0,x=0==(((0|(x=0|l[x>>2]))<0?0-x|0:x)&X|0)?4:3}}while(0);if(l[q>>2]=J,tn(Y,4!=(0|x)&1),4==(0|x))break;l[q>>2]=Q,tn(Y,x>>>1),tn(Y,1&x),G=1,zt=105}else G=0,x=0,zt=105}while(0);n:do{if(105==(0|zt)){if(zt=0,!((O=x+E|0)>>>0<Z>>>0))break;D=O;do{if(D>>>0>=(x=0|l[u>>2])>>>0)break n;Kt=D,D=D+1|0,R=(k=0|l[g>>2])+(1+(P=(0|C(0|l[y>>2],D))+F|0)<<1)|0,B=(0|l[d>>2])+((0|C(0|l[f>>2],Kt))+F<<2)|0,L=0|l[t>>2],A=0|s[R>>1],T=((0|Kt)==(0|N)|(0|Kt)==(x+-1|0))&ht?-1095&A:A;do{if(G&(0|Kt)==(0|O))x=L+100|0,zt=111;else{if(20480&A|0)break;l[(x=L+100|0)>>2]=L+24+(h[20356+(255&T|ot)>>0]<<2),tn(L,1&(Kt=0!=(((0|(Kt=0|l[B>>2]))<0?0-Kt|0:Kt)&X|0))),Kt&&(zt=111)}}while(0);111==(0|zt)&&(zt=0,B=0|l[B>>2],w=w+(0|s[K+((((0|B)<0?0-B|0:B)>>>i&127)<<1)>>1])|0,Kt=T>>>4&255,l[x>>2]=L+24+(h[21380+Kt>>0]<<2),tn(L,(B>>>=31)^h[21636+Kt>>0]),L=R+(0-(Kt=0|l[y>>2])<<1)|0,Kt=R+(Kt<<1)|0,s[(T=L+-2|0)>>1]=2|s[T>>1],s[L>>1]=s[L>>1]|s[3160+(B<<1)>>1],s[(L=L+2|0)>>1]=4|s[L>>1],s[(L=k+(P<<1)|0)>>1]=s[L>>1]|s[3160+((2|B)<<1)>>1],s[R>>1]=4096|s[R>>1],s[(L=R+2|0)>>1]=s[L>>1]|s[3160+((4|B)<<1)>>1],s[(L=Kt+-2|0)>>1]=1|s[L>>1],s[Kt>>1]=s[Kt>>1]|s[3160+((6|B)<<1)>>1],s[(Kt=Kt+2|0)>>1]=8|s[Kt>>1]),s[R>>1]=-16385&s[R>>1]}while(D>>>0<Z>>>0)}}while(0);if(F=F+1|0,A=0|l[c>>2],x=0|l[u>>2],F>>>0>=A>>>0){E=Z;break}}else E=E+4|0,A=0}while(E>>>0<x>>>0)}else w=0;if(ct)break i;hn(bt)}}while(0);I=(Wt?+_[Vt>>3]:1)*(I=nt?+Pi(gt,mt):+Li(gt,mt))*_t*+(1<<i|0),et+=I*=I*+(0|w)*.0001220703125,_[v>>3]=+_[v>>3]+I;do{if(rt)zt=127;else{if((0|i)<1&2==(0|tt)){zt=127;break}en(bt),A=1|r[(x=$+(24*e|0)+20|0)>>0],r[x>>0]=A,x=1}}while(0);do{if(127==(0|zt)){if(130==(0|(zt=0!=(0|tt)&(0|i)<(0|(x=(0|l[ft>>2])-4|0))?it?131:130:it|2!=(0|tt)|(0|i)!=(0|x)?131:130))){zt=0,en(bt),A=1|r[(x=$+(24*e|0)+20|0)>>0],r[x>>0]=A,x=1;break}if(131==(0|zt)){zt=0,A=-2&r[(x=$+(24*e|0)+20|0)>>0],r[x>>0]=A,x=3;break}}}while(0);tt=(Kt=3==(0|(K=tt+1|0)))?0:K,i=i+(Kt<<31>>31)|0;do{if((0|i)>0&0!=(1&A)){if(dt&(tt>>>0<2?(0|i)<((0|l[ft>>2])-4|0):0)){nn(bt);break}ln(bt);break}}while(0);if(_[$+(24*e|0)+8>>3]=et,Kt=(0|Ki(bt))+x|0,l[$+(24*e|0)>>2]=Kt,at||an(bt),e=e+1|0,(0|i)<=-1)break e}else e=0}while(0);do{if(16&yt)cn(bt);else{if(1&yt|0)break;en(bt)}}while(0);if(l[(T=vt+(52*wt|0)+48|0)>>2]=e,0|e){A=vt+(52*wt|0)+8|0,x=0;do{E=0|l[A>>2],(Kt=0|l[(i=E+(24*x|0)|0)>>2])>>>0>(0|Ki(bt))>>>0?(e=0|Ki(bt),l[i>>2]=e):e=0|l[i>>2];do{if(e>>>0>1){if(w=e+-1|0,-1!=(0|r[(0|l[pt>>2])+w>>0]))break;l[i>>2]=w,e=w}}while(0);i=x?0|l[(0|l[A>>2])+(24*(x+-1|0)|0)>>2]:0,l[E+(24*x|0)+16>>2]=e-i,x=x+1|0}while(x>>>0<(0|l[T>>2])>>>0)}wt=wt+1|0}while(wt>>>0<(0|C(0|l[Mt>>2],0|l[At>>2]))>>>0);w=0|l[Dt>>2],e=0|l[Rt>>2]}St=St+1|0}while(St>>>0<(0|C(w,e))>>>0);i=0|l[Nt>>2]}Lt=Lt+1|0}while(Lt>>>0<i>>>0);e=0|l[Jt>>2]}Ht=Ht+1|0}while(Ht>>>0<e>>>0);e=0|l[Qt>>2]}if((qt=qt+1|0)>>>0>=e>>>0){e=1,zt=163;break}}return 163==(0|zt)?0|e:0}function Zi(t,e,i,n,r,a,o,c,u,d,f,p){t|=0,e|=0,i|=0,n|=0,r|=0,a|=0,o|=0,c|=0,u|=0,d|=0,f|=0,p|=0;var m,g,_,y,b,v=0,x=0,A=0,S=0,E=0,T=0,I=0,C=0,k=0,P=0,B=0,L=0;if(b=w,w=w+16|0,l[(_=b)>>2]=0,v=0|l[t>>2],P=0|l[t+4>>2],m=(t=0|l[P+76>>2])+(5640*e|0)|0,x=4==(0|s[P>>1])?2:1,S=0|l[(A=P+80|0)>>2]?0|l[v+16>>2]:1,y=1+(0|l[t+(5640*e|0)+420>>2])|0,!(g=0|Ue(v,P,e,p)))return w=b,0|(a=0);l[a>>2]=0;t:do{if(p){if(We(g,P,e,f,u,d,p),k=g+(232*f|0)|0,-1==(0|l[g+(232*f|0)+80>>2]))return He(g,y),w=b,0|(a=0);I=g+(232*f|0)+36|0,C=i+840|0,d=c+12|0,E=c+8|0,T=c+88|0,S=P+93|0,A=t+(5640*e|0)+5636|0;e:do{if(c)for(;;){do{if(!(0|Ye(k)))break t}while((0|l[I>>2])>>>0>=n>>>0);if(l[_>>2]=0,!(0|Yi(e,i,m,k,r,_,o,c)))break e;if(r=r+(x=0|l[_>>2])|0,o=o-x|0,l[a>>2]=(0|l[a>>2])+x,0|l[d>>2]){v=0|l[T>>2],u=(f=0|l[v+(592*e|0)+548>>2])+((t=0|l[E>>2])<<5)|0;do{if(t){if(1&((0|h[A>>0])>>>2|(0|h[S>>0])>>>3)&&!(0==(0|(B=0|l[(L=u)>>2]))&0==(0|(L=0|l[L+4>>2])))){v=B,p=L;break}v=0|br(0|l[(v=f+(t+-1<<5)+16|0)>>2],0|l[v+4>>2],1,0),p=M}else v=p=1+(0|l[v+(592*e|0)+12>>2])|0,p=((0|p)<0)<<31>>31}while(0);l[u>>2]=v,l[u+4>>2]=p,x=0|br(0|(p=0|br(0|v,0|p,-1,-1)),0|(u=M),0|x,0),l[(P=f+(t<<5)+16|0)>>2]=x,l[P+4>>2]=M,x=0|br(0|p,0|u,0|l[(x=P=f+(t<<5)+8|0)>>2],0|l[x+4>>2]),l[P>>2]=x,l[P+4>>2]=M}else t=0|l[E>>2];l[E>>2]=t+1,l[C>>2]=1+(0|l[C>>2])}else for(;;){do{if(!(0|Ye(k)))break t}while((0|l[I>>2])>>>0>=n>>>0);if(l[_>>2]=0,!(0|Yi(e,i,m,k,r,_,o,0)))break e;c=0|l[_>>2],l[a>>2]=(0|l[a>>2])+c,l[C>>2]=1+(0|l[C>>2]),o=o-c|0,r=r+c|0}}while(0);return He(g,y),w=b,0|(a=0)}if(0|S){p=0;e:for(;;){for(t=0,u=0,f=g;;){if(We(g,P,e,u,p,d,0),-1==(0|l[f+80>>2])){r=9;break e}v=f+36|0;i:for(;;){do{if(!(0|Ye(f)))break i}while((0|l[v>>2])>>>0>=n>>>0);if(l[_>>2]=0,!(0|Yi(e,i,m,f,r,_,o,c))){r=13;break e}L=0|l[_>>2],l[a>>2]=(0|l[a>>2])+L,t=L+t|0,o=o-L|0,r=r+L|0}if(0!=(0|(L=0|l[A>>2]))&t>>>0>L>>>0){r=17;break e}if((u=u+1|0)>>>0>=x>>>0)break;f=f+232|0}if((p=p+1|0)>>>0>=S>>>0)break t}if(9==(0|r))return He(g,y),w=b,0|(a=0);if(13==(0|r))return He(g,y),w=b,0|(a=0);if(17==(0|r))return He(g,y),w=b,0|(a=0)}}while(0);return He(g,y),w=b,0|(a=1)}function Yi(t,e,i,n,a,s,o,c){t|=0,e|=0,i|=0,a|=0,s|=0,o|=0,c|=0;var h,u,d,f,p=0,m=0,g=0,y=0,b=0,v=0,w=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0;if(A=0|l[28+(n|=0)>>2],d=0|l[n+32>>2],f=0|l[n+36>>2],x=0|l[(0|l[e+20>>2])+(52*(0|l[n+24>>2])|0)+24>>2],2&l[i>>2]?(r[a>>0]=-1,r[a+1>>0]=-111,r[a+2>>0]=0,r[a+3>>0]=4,O=e+840|0,r[a+4>>0]=(0|l[O>>2])>>>8,r[a+5>>0]=l[O>>2],o=o+-6|0,O=a+6|0):O=a,0==(0|f)&&0|l[(w=x+(136*A|0)+24|0)>>2])for(g=0,y=x+(136*A|0)+28|0;;){if(n=0|l[y+20>>2],ci(0|l[n+(40*d|0)+32>>2]),ci(0|l[(b=n+(40*d|0)+36|0)>>2]),0|(v=0|C(0|l[n+(40*d|0)+20>>2],0|l[n+(40*d|0)+16>>2]))){e=n+(40*d|0)+24|0,m=y+28|0,n=0;do{G=0|l[e>>2],l[G+(52*n|0)+40>>2]=0,di(0|l[b>>2],n,(0|l[m>>2])-(0|l[G+(52*n|0)+28>>2])|0),n=n+1|0}while((0|n)!=(0|v))}if((g=g+1|0)>>>0>=(0|l[w>>2])>>>0)break;y=y+36|0}if(!(h=0|wi()))return 0|(s=0);if(function(t,e,i){e|=0,i|=0,l[(t|=0)>>2]=e,l[t+4>>2]=e+i,l[t+8>>2]=e,l[t+12>>2]=0,l[t+16>>2]=8}(h,O,o),Mi(h,1,1),u=x+(136*A|0)+28|0,0|l[(G=x+(136*A|0)+24|0)>>2])for(R=f+1|0,B=0,L=u;;){if(b=(y=0|l[L+20>>2])+(40*d|0)+24|0,!(m=0==(0|(D=0|C(0|l[y+(40*d|0)+20>>2],0|l[y+(40*d|0)+16>>2]))))){for(g=y+(40*d|0)+32|0,n=0|l[b>>2],e=0;0==(0|l[n+40>>2])&&0|l[(0|l[n+4>>2])+(24*f|0)>>2]&&di(0|l[g>>2],e,f),(0|(e=e+1|0))!=(0|D);)n=n+52|0;if(!m)for(P=y+(40*d|0)+32|0,k=y+(40*d|0)+36|0,E=0|l[b>>2],T=0;;){if(n=(0|l[E+4>>2])+(24*f|0)|0,0|l[(I=E+40|0)>>2]?Mi(h,0!=(0|l[n>>2])&1,1):fi(h,0|l[P>>2],T,R),0|(e=0|l[n>>2])){0|l[I>>2]||(l[E+32>>2]=3,fi(h,0|l[k>>2],T,999),e=0|l[n>>2]);t:do{switch(0|e){case 1:Mi(h,0,1);break;case 2:Mi(h,2,2);break;default:if(e>>>0<6){Mi(h,e+-3|12,4);break t}if(e>>>0<37){Mi(h,e+-6|480,9);break t}e>>>0<165&&Mi(h,e+-37|65408,16)}}while(0);if(M=E+8|0,(g=0|l[I>>2])>>>0<(S=(e=0|l[n>>2])+g|0)>>>0){for(A=E+32|0,x=g+-1+e|0,w=g,m=0,e=0,y=0,v=(0|l[M>>2])+(24*g|0)|0;;){if(g=e+1|0,m=(0|l[v+16>>2])+m|0,0!=(1&r[v+20>>0])|(0|w)==(0|x)){if((0|m)>1)for(e=0;;){if(e=e+1|0,!(m>>>0>3)){m=e;break}m>>>=1}else m=0;if(b=0|l[A>>2],(0|g)>1)for(e=0;e=e+1|0,g>>>0>3;)g>>>=1;else e=0;b=m+1-b-e|0,m=0,g=0,y=(0|y)>(0|b)?y:b}if((0|(w=w+1|0))==(0|S))break;e=g,v=v+24|0}if((0|y)>0)for(e=y;;){if(Mi(h,1,1),!((0|e)>1)){e=y;break}e=e+-1|0}else e=y}else m=0,g=0,e=0;if(Mi(h,0,1),l[(w=E+32|0)>>2]=(0|l[w>>2])+e,(e=0|l[I>>2])>>>0<S>>>0)for(v=e,b=(0|l[M>>2])+(24*e|0)|0,e=g;;){if(e=e+1|0,m=(0|l[b+16>>2])+m|0,0!=(1&r[b+20>>0])||(0|v)==((0|l[I>>2])-1+(0|l[n>>2])|0)){if(y=0|l[w>>2],(0|e)>1)for(g=0;;){if(g=g+1|0,!(e>>>0>3)){e=g;break}e>>>=1}else e=0;Mi(h,m,e+y|0),m=0,e=0}if((0|(v=v+1|0))==(0|S))break;b=b+24|0}}if((0|(T=T+1|0))==(0|D))break;E=E+52|0}}if((B=B+1|0)>>>0>=(0|l[G>>2])>>>0)break;L=L+36|0}if(!(0|function(t){var e,i,n,a,s=0,o=0;return o=(s=0|l[(i=12+(t|=0)|0)>>2])<<8&65280,l[i>>2]=o,l[(a=t+16|0)>>2]=65280==(0|o)?7:8,e=0|l[(o=t+8|0)>>2],(0|l[(n=t+4|0)>>2])>>>0<=e>>>0?0|(o=0):(l[o>>2]=e+1,r[e>>0]=s,7!=(0|l[a>>2])?0|(o=1):(t=(s=0|l[i>>2])<<8&65280,l[i>>2]=t,l[a>>2]=65280==(0|t)?7:8,t=0|l[o>>2],(0|l[n>>2])>>>0<=t>>>0?0|(o=0):(l[o>>2]=t+1,r[t>>0]=s,0|(o=1))))}(h)))return xi(h),0|(s=0);n=O+(e=0|Ai(h))|0,e=o-e|0,xi(h),4&l[i>>2]&&(r[n>>0]=-1,r[n+1>>0]=-110,e=e+-2|0,n=n+2|0),(M=0!=(0|c))&&0|l[c+12>>2]&&(O=n-a|0,i=(0|l[(0|l[c+88>>2])+(592*t|0)+548>>2])+(l[c+8>>2]<<5)+8|0,l[i>>2]=O,l[i+4>>2]=((0|O)<0)<<31>>31);t:do{if(0|l[G>>2]){S=c+12|0,E=c+88|0,T=c+8|0,A=0,x=u;e:for(;;){m=0|l[x+20>>2],w=0|C(0|l[m+(40*d|0)+20>>2],0|l[m+(40*d|0)+16>>2]),m=0|l[m+(40*d|0)+24>>2];i:do{if(w){n:do{if(M)for(v=0;;){if(b=0|l[m+4>>2],0|l[(o=b+(24*f|0)|0)>>2])if((y=0|l[(g=b+(24*f|0)+4|0)>>2])>>>0>e>>>0)o=1;else{Cr(0|n,0|l[b+(24*f|0)+16>>2],0|y),l[(i=m+40|0)>>2]=(0|l[i>>2])+(0|l[o>>2]),n=n+(i=0|l[g>>2])|0,e=e-i|0;do{if(0|l[S>>2]){if(i=(0|l[(0|l[E>>2])+(592*t|0)+548>>2])+(l[T>>2]<<5)+24|0,p=+_[b+(24*f|0)+8>>3]+ +_[i>>3],_[i>>3]=p,!(+_[c>>3]<p))break;_[c>>3]=p}}while(0);o=0,m=m+52|0}else o=28,m=m+52|0;switch(31&o){case 28:case 0:break;default:break n}if((v=v+1|0)>>>0>=w>>>0){F=83;break i}}else for(v=0;;){switch(o=0|l[m+4>>2],0|l[(g=o+(24*f|0)|0)>>2]?(b=0|l[(y=o+(24*f|0)+4|0)>>2])>>>0>e>>>0?o=1:(Cr(0|n,0|l[o+(24*f|0)+16>>2],0|b),l[(i=m+40|0)>>2]=(0|l[i>>2])+(0|l[g>>2]),o=0,e=e-(i=0|l[y>>2])|0,n=n+i|0,m=m+52|0):(o=28,m=m+52|0),31&o){case 28:case 0:break;default:break n}if((v=v+1|0)>>>0>=w>>>0){F=83;break i}}}while(0);if(o){n=0;break e}o=x}else F=83}while(0);if(83==(0|F)&&(F=0,o=x+36|0),(A=A+1|0)>>>0>=(0|l[G>>2])>>>0)break t;x=o}return 0|n}}while(0);return l[s>>2]=n-a+(0|l[s>>2]),0|(s=1)}function Xi(t,e,i,n,a,s,o,c,h){t|=0,e|=0,i|=0,n|=0,a|=0,o|=0,c|=0,h|=0;var u,d,f,p,m,g,_,y,b,v,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0;v=w,w=w+64|0,_=v+48|0,y=v+40|0,D=v+32|0,R=v+24|0,B=v+16|0,P=v+8|0,k=v,L=v+56|0,H=s|=0,l[(b=v+52|0)>>2]=H,u=0|l[e+(52*(0|l[(g=n+24|0)>>2])|0)+24>>2],d=0|l[n+28>>2],m=n+36|0;t:do{if(0==(0|l[m>>2])&&(I=u+(136*d|0)+24|0,0|l[I>>2])){for(E=n+32|0,A=0,S=u+(136*d|0)+28|0;;){if((0|l[S+8>>2])!=(0|l[S>>2])&&(0|l[S+12>>2])!=(0|l[S+4>>2])){if(e=0|l[S+20>>2],(x=0|l[E>>2])>>>0>=(((0|l[S+24>>2])>>>0)/40|0)>>>0)break;if(ci(0|l[e+(40*x|0)+32>>2]),ci(0|l[e+(40*x|0)+36>>2]),0|(T=0|C(0|l[e+(40*x|0)+20>>2],0|l[e+(40*x|0)+16>>2])))for(M=0,e=0|l[e+(40*x|0)+24>>2];l[e+44>>2]=0,l[e+48>>2]=0,(0|(M=M+1|0))!=(0|T);)e=e+56|0}if((A=A+1|0)>>>0>=(0|l[I>>2])>>>0)break t;S=S+36|0}return mt(h,1,22161,k),w=v,0|(H=0)}}while(0);do{if(2&l[i>>2]){if(c>>>0<6){mt(h,2,22179,P),e=H;break}if(-1==(0|r[s>>0])&&-111==(0|r[s+1>>0])){e=s+6|0,l[b>>2]=e;break}mt(h,2,22221,B),e=H}else e=H}while(0);if(!(p=0|wi()))return w=v,0|(H=0);do{if(!(1&r[t+96>>0])){if(2&r[i+5636>>0]){z=N=i+5168|0,N=0|l[N>>2],L=i+5180|0;break}l[L>>2]=s+c-e,z=b,N=e;break}z=N=t+40|0,N=0|l[N>>2],L=t+44|0}while(0);if(function(t,e,i){e|=0,i|=0,l[(t|=0)>>2]=e,l[t+4>>2]=e+i,l[t+8>>2]=e,l[t+12>>2]=0,l[t+16>>2]=0}(p,N,0|l[L>>2]),!(0|Si(p,1))){Ei(p),e=N+(0|Ai(p))|0,xi(p);do{if(4&l[i>>2]){if(((0|l[L>>2])-e+(0|l[z>>2])|0)>>>0<2){mt(h,2,22242,R),x=z;break}if(-1==(0|r[e>>0])&&-110==(0|r[e+1>>0])){e=e+2|0,x=z;break}mt(h,2,22284,D),x=z}else x=z}while(0);return h=e-(i=0|l[x>>2])|0,l[L>>2]=(0|l[L>>2])-h,l[z>>2]=i+h,l[a>>2]=0,l[o>>2]=(0|l[b>>2])-H,w=v,0|(H=1)}f=u+(136*d|0)+24|0;t:do{if(0|l[f>>2]){G=n+32|0,F=i+5584|0,D=0,e=u+(136*d|0)+28|0;e:for(;;){x=0|l[e+20>>2],A=0|l[G>>2];i:do{if((0|l[e+8>>2])!=(0|l[e>>2])&&(0|l[e+12>>2])!=(0|l[e+4>>2])){c=0|C(0|l[x+(40*A|0)+20>>2],0|l[x+(40*A|0)+16>>2]);n:do{if(0|c){t=x+(40*A|0)+32|0,n=x+(40*A|0)+36|0,R=e+28|0,s=0,x=0|l[x+(40*A|0)+24>>2];r:for(;;){A=0|l[(M=x+44|0)>>2]?0|Si(p,1):0|pi(p,0|l[t>>2],s,1+(0|l[m>>2])|0);a:do{if(A){if(!(0|l[M>>2])){for(A=0;!(0|pi(p,0|l[n>>2],s,A));)A=A+1|0;l[x+24>>2]=1-A+(0|l[R>>2]),l[x+28>>2]=3}do{if(0|Si(p,1)){if(!(0|Si(p,1))){A=2;break}if(3!=(0|(A=0|Si(p,2)))){A=A+3|0;break}if(31==(0|(A=0|Si(p,5)))){A=37+(0|Si(p,7))|0;break}A=A+6|0;break}A=1}while(0);for(l[(k=x+40|0)>>2]=A,A=0;0|Si(p,1);)A=A+1|0;l[(B=x+28|0)>>2]=(0|l[B>>2])+A,T=0|l[M>>2];do{if(T){if(A=T+-1|0,M=0|l[(I=x+4|0)>>2],(0|l[M+(A<<5)+8>>2])!=(0|l[M+(A<<5)+20>>2]))break;E=0|l[(0|l[F>>2])+(1080*(0|l[g>>2])|0)+16>>2],A=0|l[(S=x+52|0)>>2];do{if((T+1|0)>>>0>A>>>0){if(A=A+10|0,l[S>>2]=A,A=0|Wt(M,A<<5)){l[I>>2]=A,M=A;break}jt(0|l[I>>2]),l[I>>2]=0,l[S>>2]=0,xi(p),A=1;break a}}while(0);l[(A=M+(T<<5)|0)>>2]=0,l[A+4>>2]=0,l[A+8>>2]=0,l[A+12>>2]=0,l[A+16>>2]=0,l[A+20>>2]=0,l[A+24>>2]=0,l[A+28>>2]=0;do{if(4&E)A=1;else{if(!(1&E)){A=109;break}A=1==(0|(A=0|l[A+-32+20>>2]))|10==(0|A)?2:1}}while(0);S=T,E=I,M=M+(T<<5)+20|0,O=77}else{E=0|l[(0|l[F>>2])+(1080*(0|l[g>>2])|0)+16>>2],A=x+52|0;do{if(!(0|l[A>>2])){if(l[A>>2]=10,S=0|Wt(0|l[(M=x+4|0)>>2],320)){l[M>>2]=S,A=S,M=S;break}jt(0|l[M>>2]),l[M>>2]=0,l[A>>2]=0,xi(p),A=1;break a}A=M=0|l[x+4>>2]}while(0);l[A>>2]=0,l[A+4>>2]=0,l[A+8>>2]=0,l[A+12>>2]=0,l[A+16>>2]=0,l[A+20>>2]=0,l[A+24>>2]=0,l[A+28>>2]=0,A=4&E?1:0==(1&E|0)?109:10,S=0,E=x+4|0,M=M+20|0,O=77}}while(0);for(77==(0|O)&&(l[M>>2]=A,A=S,I=E),P=x+52|0,E=0|l[k>>2],k=A;;){if(S=0|l[I>>2],A=(0|(A=(0|l[S+(k<<5)+20>>2])-(0|l[S+(k<<5)+8>>2])|0))<(0|E)?A:E,l[S+(k<<5)+24>>2]=A,S=0|l[B>>2],A>>>0>1)for(M=A,A=0;A=A+1|0,M>>>0>3;)M>>>=1;else A=0;if(O=0|Si(p,A+S|0),M=0|l[I>>2],l[M+(k<<5)+28>>2]=O,(0|(E=E-(0|l[M+(k<<5)+24>>2])|0))<=0){O=90;break}if(T=k+1|0,S=0|l[(0|l[F>>2])+(1080*(0|l[g>>2])|0)+16>>2],(k+2|0)>>>0>(A=0|l[P>>2])>>>0){if(A=A+10|0,l[P>>2]=A,!(A=0|Wt(M,A<<5))){O=89;break}l[I>>2]=A,M=A}l[(O=M+(T<<5)|0)>>2]=0,l[O+4>>2]=0,l[O+8>>2]=0,l[O+12>>2]=0,l[O+16>>2]=0,l[O+20>>2]=0,l[O+24>>2]=0,l[O+28>>2]=0;do{if(4&S)A=1;else{if(!(1&S)){A=109;break}A=1==(0|(A=0|l[M+(k<<5)+20>>2]))|10==(0|A)?2:1}}while(0);l[M+(T<<5)+20>>2]=A,k=T}if(89==(0|O)){O=0,jt(0|l[I>>2]),l[I>>2]=0,l[P>>2]=0,xi(p),A=1;break}if(90==(0|O)){O=0,A=0,x=x+56|0;break}}else l[x+40>>2]=0,A=13,x=x+56|0}while(0);switch(15&A){case 13:case 0:break;default:break r}if((s=s+1|0)>>>0>=c>>>0)break n}if(A){e=0;break e}break i}}while(0);e=e+36|0}else O=39}while(0);if(39==(0|O)&&(O=0,e=e+36|0),(D=D+1|0)>>>0>=(0|l[f>>2])>>>0)break t}return w=v,0|e}}while(0);if(!(0|Ei(p)))return xi(p),w=v,0|(H=0);e=N+(0|Ai(p))|0,xi(p);do{if(4&l[i>>2]){if(((0|l[L>>2])-e+(0|l[z>>2])|0)>>>0<2){mt(h,2,22242,y),x=z;break}if(-1==(0|r[e>>0])&&-110==(0|r[e+1>>0])){e=e+2|0,x=z;break}mt(h,2,22284,_),x=z}else x=z}while(0);return h=e-(i=0|l[x>>2])|0,l[L>>2]=(0|l[L>>2])-h,l[z>>2]=i+h,l[a>>2]=1,l[o>>2]=(0|l[b>>2])-H,w=v,0|(H=1)}function Ji(t,e){t|=0,e|=0;var i=0;return(i=0|Ht(1,8))?(l[i>>2]=t,l[i+4>>2]=e,0|i):0|(i=0)}function qi(t){(t|=0)&&jt(t)}function Qi(t){(t|=0)&&jt(t)}function Ki(t){return(0|l[12+(t|=0)>>2])-(0|l[t+16>>2])|0}function $i(t,e){e|=0,l[100+(t|=0)>>2]=t+24,l[t+4>>2]=32768,l[t>>2]=0,l[t+12>>2]=e+-1,l[t+8>>2]=12,l[t+16>>2]=e}function tn(t,e){e|=0;var i,n=0,a=0,s=0,o=0,c=0,h=0,u=0;if(a=0|l[100+(t|=0)>>2],s=0|l[a>>2],u=(0|l[s+4>>2])==(0|e),n=0|l[s>>2],e=(0|l[(i=t+4|0)>>2])-n|0,l[i>>2]=e,u)if(32768&e|0)l[t>>2]=(0|l[t>>2])+n;else for(e>>>0<n>>>0?(l[i>>2]=n,e=n,u=t,n=0|l[t>>2]):(n=(0|l[t>>2])+n|0,l[t>>2]=n,u=t),l[a>>2]=l[s+8>>2],c=t+8|0,h=t+12|0,o=t+16|0,t=n,n=0|l[c>>2];;){if(e<<=1,l[i>>2]=e,a=t<<1,l[u>>2]=a,n=n+-1|0,l[c>>2]=n,!n){e=0|l[h>>2];do{if((0|e)!=((0|l[o>>2])-1|0)){if((n=0|r[e>>0])<<24>>24==-1){s=e+1|0,l[h>>2]=s,n=7,a=1048575,e=t>>>19&4095;break}if(!(134217728&a)){s=e+1|0,l[h>>2]=s,n=8,a=524287,e=t>>>18&8191;break}if(r[e>>0]=n+1<<24>>24,e=0|l[h>>2],-1==(0|r[e>>0])){t=134217727&l[u>>2],l[u>>2]=t,s=e+1|0,l[h>>2]=s,n=7,a=1048575,e=t>>>20;break}s=e+1|0,l[h>>2]=s,n=8,a=524287,e=(0|l[u>>2])>>>19;break}s=e+1|0,l[h>>2]=s,n=8,a=524287,e=t>>>18&8191}while(0);r[s>>0]=e,a=l[u>>2]&a,l[u>>2]=a,l[c>>2]=n,e=0|l[i>>2]}if(32768&e)break;t=a}else for(e>>>0<n>>>0?(n=(0|l[t>>2])+n|0,l[t>>2]=n,u=t):(l[i>>2]=n,e=n,u=t,n=0|l[t>>2]),l[a>>2]=l[s+12>>2],c=t+8|0,h=t+12|0,o=t+16|0,t=n,a=0|l[c>>2];;){if(e<<=1,l[i>>2]=e,n=t<<1,l[u>>2]=n,a=a+-1|0,l[c>>2]=a,!a){e=0|l[h>>2];do{if((0|e)!=((0|l[o>>2])-1|0)){if((a=0|r[e>>0])<<24>>24==-1){a=e+1|0,l[h>>2]=a,s=7,n=1048575,e=t>>>19&4095;break}if(!(134217728&n)){a=e+1|0,l[h>>2]=a,s=8,n=524287,e=t>>>18&8191;break}if(r[e>>0]=a+1<<24>>24,e=0|l[h>>2],-1==(0|r[e>>0])){t=134217727&l[u>>2],l[u>>2]=t,a=e+1|0,l[h>>2]=a,s=7,n=1048575,e=t>>>20;break}a=e+1|0,l[h>>2]=a,s=8,n=524287,e=(0|l[u>>2])>>>19;break}a=e+1|0,l[h>>2]=a,s=8,n=524287,e=t>>>18&8191}while(0);r[a>>0]=e,n=l[u>>2]&n,l[u>>2]=n,l[c>>2]=s,e=0|l[i>>2],a=s}if(32768&e)break;t=n}}function en(t){var e,i=0,n=0,a=0,s=0,o=0,c=0,h=0;e=8+(t|=0)|0,o=((o=65535|(h=0|l[t>>2]))>>>0<((0|l[t+4>>2])+h|0)>>>0?o:o+-32768|0)<<l[e>>2],l[t>>2]=o,i=0|l[(h=t+12|0)>>2],c=t+16|0;do{if((0|i)!=((0|l[c>>2])-1|0)){if((n=0|r[i>>0])<<24>>24==-1){s=i+1|0,l[h>>2]=s,n=7,a=1048575,i=o>>>20;break}if(!(134217728&o)){s=i+1|0,l[h>>2]=s,n=8,a=524287,i=o>>>19;break}if(r[i>>0]=n+1<<24>>24,i=0|l[h>>2],-1==(0|r[i>>0])){o=134217727&l[t>>2],l[t>>2]=o,s=i+1|0,l[h>>2]=s,n=7,a=1048575,i=o>>>20;break}s=i+1|0,l[h>>2]=s,n=8,a=524287,i=(0|l[t>>2])>>>19;break}s=i+1|0,l[h>>2]=s,n=8,a=524287,i=o>>>19}while(0);r[s>>0]=i,o=l[t>>2]&a,l[e>>2]=n,o<<=n,l[t>>2]=o,n=0|l[h>>2];do{if((0|n)!=((0|l[c>>2])-1|0)){if((i=0|r[n>>0])<<24>>24==-1){s=n+1|0,l[h>>2]=s,n=7,a=1048575,i=o>>>20;break}if(!(134217728&o)){s=n+1|0,l[h>>2]=s,n=8,a=524287,i=o>>>19;break}if(r[n>>0]=i+1<<24>>24,i=0|l[h>>2],-1==(0|r[i>>0])){c=134217727&l[t>>2],l[t>>2]=c,s=i+1|0,l[h>>2]=s,n=7,a=1048575,i=c>>>20;break}s=i+1|0,l[h>>2]=s,n=8,a=524287,i=(0|l[t>>2])>>>19;break}s=n+1|0,l[h>>2]=s,n=8,a=524287,i=o>>>19}while(0);r[s>>0]=i,l[t>>2]=l[t>>2]&a,l[e>>2]=n,i=0|l[h>>2],-1!=(0|r[i>>0])&&(l[h>>2]=i+1)}function nn(t){l[(t|=0)>>2]=0,l[t+8>>2]=8}function rn(t,e){e|=0;var i,n,a=0;a=(0|l[(i=8+(t|=0)|0)>>2])-1|0,l[i>>2]=a,e=(0|l[t>>2])+(e<<a)|0,l[t>>2]=e,0|a||(n=1+(0|l[(a=t+12|0)>>2])|0,l[a>>2]=n,r[n>>0]=e,l[i>>2]=8,l[i>>2]=-1==(0|r[l[a>>2]>>0])?7:8,l[t>>2]=0)}function an(t){l[28+(t|=0)>>2]=1156,l[t+32>>2]=1156,l[t+36>>2]=1156,l[t+40>>2]=1156,l[t+44>>2]=1156,l[t+48>>2]=1156,l[t+52>>2]=1156,l[t+56>>2]=1156,l[t+60>>2]=1156,l[t+64>>2]=1156,l[t+68>>2]=1156,l[t+72>>2]=1156,l[t+76>>2]=1156,l[t+80>>2]=1156,l[t+84>>2]=1156,l[t+88>>2]=1156,l[t+96>>2]=2628,l[t+92>>2]=1252,l[t+24>>2]=1284}function sn(t){l[24+(t|=0)>>2]=1156,l[t+28>>2]=1156,l[t+32>>2]=1156,l[t+36>>2]=1156,l[t+40>>2]=1156,l[t+44>>2]=1156,l[t+48>>2]=1156,l[t+52>>2]=1156,l[t+56>>2]=1156,l[t+60>>2]=1156,l[t+64>>2]=1156,l[t+68>>2]=1156,l[t+72>>2]=1156,l[t+76>>2]=1156,l[t+80>>2]=1156,l[t+84>>2]=1156,l[t+88>>2]=1156,l[t+92>>2]=1156,l[t+96>>2]=1156}function on(t,e,i,n){i|=0,n|=0,l[24+(t|=0)+((e|=0)<<2)>>2]=1156+((n<<1)+i<<4)}function ln(t){var e,i;l[100+(t|=0)>>2]=t+24,l[t+4>>2]=32768,l[t>>2]=0,l[(e=t+8|0)>>2]=12,t=(0|l[(i=t+12|0)>>2])-1|0,l[i>>2]=t,-1==(0|r[t>>0])&&(l[e>>2]=13)}function cn(t){var e,i=0,n=0,a=0,s=0,o=0,c=0,h=0,u=0;if((0|(i=12-(n=0|l[(e=8+(t|=0)|0)>>2])|0))>0){a=t+12|0,u=t+16|0,h=i,s=0|l[t>>2],i=n;do{c=s<<i,l[t>>2]=c,l[e>>2]=0,i=0|l[a>>2];do{if((0|i)!=((0|l[u>>2])-1|0)){if((n=0|r[i>>0])<<24>>24==-1){o=i+1|0,l[a>>2]=o,i=7,s=1048575,n=c>>>20;break}if(!(134217728&c)){o=i+1|0,l[a>>2]=o,i=8,s=524287,n=c>>>19;break}if(r[i>>0]=n+1<<24>>24,i=0|l[a>>2],-1==(0|r[i>>0])){n=134217727&l[t>>2],l[t>>2]=n,o=i+1|0,l[a>>2]=o,i=7,s=1048575,n>>>=20;break}o=i+1|0,l[a>>2]=o,i=8,s=524287,n=(0|l[t>>2])>>>19;break}o=i+1|0,l[a>>2]=o,i=8,s=524287,n=c>>>19}while(0);r[o>>0]=n,s=l[t>>2]&s,l[t>>2]=s,l[e>>2]=i,h=h-i|0}while((0|h)>0)}else a=t+12|0;if(i=0|l[a>>2],(n=0|r[i>>0])<<24>>24!=-1){do{if((0|i)!=((0|l[t+16>>2])-1|0)){if(!(134217728&(c=0|l[t>>2]))){o=i+1|0,l[a>>2]=o,n=t,a=8,s=524287,i=c>>>19;break}if(r[i>>0]=n+1<<24>>24,i=0|l[a>>2],-1==(0|r[i>>0])){u=134217727&l[t>>2],l[t>>2]=u,o=i+1|0,l[a>>2]=o,n=t,a=7,s=1048575,i=u>>>20;break}o=i+1|0,l[a>>2]=o,n=t,a=8,s=524287,i=(0|l[t>>2])>>>19;break}o=i+1|0,l[a>>2]=o,n=t,a=8,s=524287,i=(0|l[t>>2])>>>19}while(0);r[o>>0]=i,l[n>>2]=l[n>>2]&s,l[e>>2]=a}}function hn(t){l[100+(t|=0)>>2]=t+96,tn(t,1),tn(t,0),tn(t,1),tn(t,0)}function un(t,e,i){e|=0,i|=0;var n,a=0,s=0,o=0;l[100+(t|=0)>>2]=t+24,l[t+16>>2]=e,l[t+20>>2]=e+i,l[(n=t+12|0)>>2]=e;do{if(i){if(a=h[e>>0]<<16,l[t>>2]=a,s=e+1|0,o=1==(0|i)?255:0|h[s>>0],-1==(0|r[e>>0])){if(o>>>0>143){s=8,e=65280,i=t;break}e=9,i=7}else e=8,i=8;l[n>>2]=s,s=i,e=o<<e,i=t}else l[t>>2]=16711680,s=8,e=65280,a=16711680,i=t}while(0);return l[i>>2]=a+e<<7,l[t+8>>2]=s+-7,l[t+4>>2]=32768,1}function dn(t){var e=0,i=0,n=0,a=0,s=0,o=0,c=0,u=0,d=0,f=0,p=0,m=0;if(e=0|l[100+(t|=0)>>2],i=0|l[e>>2],a=0|l[i>>2],s=(0|l[(m=t+4|0)>>2])-a|0,l[m>>2]=s,(n=0|l[t>>2])>>>16>>>0<a>>>0){f=s>>>0<a>>>0,l[m>>2]=a,p=0|l[i+4>>2],l[e>>2]=l[(f?i+8|0:i+12|0)>>2],u=t+12|0,d=t+20|0,e=0|l[(c=t+8|0)>>2],i=n,o=a;do{if(!e){n=0|l[u>>2],e=0|l[d>>2];do{if((0|n)==(0|e))a=8,e=65280;else{if(s=(0|(a=n+1|0))==(0|e)?255:0|h[a>>0],-1==(0|r[n>>0])){if(s>>>0>143){a=8,e=65280;break}n=9,e=7}else n=8,e=8;l[u>>2]=a,a=e,e=s<<n}}while(0);i=i+e|0,l[t>>2]=i,l[c>>2]=a,e=a}o<<=1,l[m>>2]=o,i<<=1,l[t>>2]=i,e=e+-1|0,l[c>>2]=e}while(o>>>0<32768);return 0|(m=f?p:1-p|0)}if(n=n-(a<<16)|0,l[t>>2]=n,32768&s|0)return 0|(m=0|l[i+4>>2]);f=s>>>0<a>>>0,p=0|l[i+4>>2],l[e>>2]=l[(f?i+12|0:i+8|0)>>2],u=t+12|0,d=t+20|0,e=0|l[(c=t+8|0)>>2],i=n,o=s;do{if(!e){n=0|l[u>>2],e=0|l[d>>2];do{if((0|n)==(0|e))a=8,e=65280;else{if(s=(0|(a=n+1|0))==(0|e)?255:0|h[a>>0],-1==(0|r[n>>0])){if(s>>>0>143){a=8,e=65280;break}n=9,e=7}else n=8,e=8;l[u>>2]=a,a=e,e=s<<n}}while(0);i=i+e|0,l[t>>2]=i,l[c>>2]=a,e=a}o<<=1,l[m>>2]=o,i<<=1,l[t>>2]=i,e=e+-1|0,l[c>>2]=e}while(o>>>0<32768);return 0|(m=f?1-p|0:p)}function fn(t){(t|=0)&&jt(t)}function pn(t,e,i){e|=0,i|=0,l[20+(t|=0)>>2]=e,l[t+8>>2]=i,l[t+12>>2]=0,r[t>>0]=0,l[t+4>>2]=0}function mn(t){var e,i=0,n=0,a=0,s=0;i=0|l[(e=4+(t|=0)|0)>>2];do{if(i)n=i,i=0|r[t>>0];else{if(l[e>>2]=8,(0|(a=0|l[(i=t+12|0)>>2]))==(0|l[t+8>>2])){r[t>>0]=-1,n=8,i=-1;break}-1==(0|r[t>>0])?(l[e>>2]=7,n=7):n=8,s=0|r[(0|l[t+20>>2])+a>>0],r[t>>0]=s,l[i>>2]=a+1,i=s}}while(0);return s=n+-1|0,l[e>>2]=s,(255&i)>>>s&1|0}function gn(t){t|=0;var e,i=0,n=0,r=0,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0;e=w,w=w+16|0,m=e;do{if(t>>>0<245){if(t=(d=t>>>0<11?16:t+11&-8)>>>3,3&(n=(p=0|l[6184])>>>t)|0)return r=0|l[(n=8+(t=24776+((i=(1&n^1)+t|0)<<1<<2)|0)|0)>>2],(0|(s=0|l[(a=r+8|0)>>2]))==(0|t)?l[6184]=p&~(1<<i):(l[s+12>>2]=t,l[n>>2]=s),A=i<<3,l[r+4>>2]=3|A,l[(A=r+A+4|0)>>2]=1|l[A>>2],w=e,0|(A=a);if(d>>>0>(f=0|l[6186])>>>0){if(0|n)return i=((i=n<<t&((i=2<<t)|0-i))&0-i)-1|0,s=0|l[(t=8+(i=24776+((r=((n=(i>>>=c=i>>>12&16)>>>5&8)|c|(s=(i>>>=n)>>>2&4)|(t=(i>>>=s)>>>1&2)|(r=(i>>>=t)>>>1&1))+(i>>>r)|0)<<1<<2)|0)|0)>>2],(0|(n=0|l[(c=s+8|0)>>2]))==(0|i)?(t=p&~(1<<r),l[6184]=t):(l[n+12>>2]=i,l[t>>2]=n,t=p),o=(A=r<<3)-d|0,l[s+4>>2]=3|d,l[4+(a=s+d|0)>>2]=1|o,l[s+A>>2]=o,0|f&&(r=0|l[6189],n=24776+((i=f>>>3)<<1<<2)|0,t&(i=1<<i)?i=0|l[(t=n+8|0)>>2]:(l[6184]=t|i,i=n,t=n+8|0),l[t>>2]=r,l[i+12>>2]=r,l[r+8>>2]=i,l[r+12>>2]=n),l[6186]=o,l[6189]=a,w=e,0|(A=c);if(h=0|l[6185]){if(n=(h&0-h)-1|0,t=0|l[25040+(((o=(n>>>=c=n>>>12&16)>>>5&8)|c|(u=(n>>>=o)>>>2&4)|(r=(n>>>=u)>>>1&2)|(t=(n>>>=r)>>>1&1))+(n>>>t)<<2)>>2],n=(-8&l[t+4>>2])-d|0,r=0|l[t+16+((0==(0|l[t+16>>2])&1)<<2)>>2]){do{n=(u=(c=(-8&l[r+4>>2])-d|0)>>>0<n>>>0)?c:n,t=u?r:t,r=0|l[r+16+((0==(0|l[r+16>>2])&1)<<2)>>2]}while(0!=(0|r));u=t,o=n}else u=t,o=n;if((c=u+d|0)>>>0>u>>>0){a=0|l[u+24>>2],i=0|l[u+12>>2];do{if((0|i)==(0|u)){if(!(i=0|l[(t=u+20|0)>>2])&&!(i=0|l[(t=u+16|0)>>2])){n=0;break}for(;;)if(0|(r=0|l[(n=i+20|0)>>2]))i=r,t=n;else{if(!(r=0|l[(n=i+16|0)>>2]))break;i=r,t=n}l[t>>2]=0,n=i}else n=0|l[u+8>>2],l[n+12>>2]=i,l[i+8>>2]=n,n=i}while(0);do{if(0|a){if(i=0|l[u+28>>2],(0|u)==(0|l[(t=25040+(i<<2)|0)>>2])){if(l[t>>2]=n,!n){l[6185]=h&~(1<<i);break}}else if(l[a+16+(((0|l[a+16>>2])!=(0|u)&1)<<2)>>2]=n,!n)break;l[n+24>>2]=a,0|(i=0|l[u+16>>2])&&(l[n+16>>2]=i,l[i+24>>2]=n),0|(i=0|l[u+20>>2])&&(l[n+20>>2]=i,l[i+24>>2]=n)}}while(0);return o>>>0<16?(A=o+d|0,l[u+4>>2]=3|A,l[(A=u+A+4|0)>>2]=1|l[A>>2]):(l[u+4>>2]=3|d,l[c+4>>2]=1|o,l[c+o>>2]=o,0|f&&(r=0|l[6189],n=24776+((i=f>>>3)<<1<<2)|0,p&(i=1<<i)?i=0|l[(t=n+8|0)>>2]:(l[6184]=p|i,i=n,t=n+8|0),l[t>>2]=r,l[i+12>>2]=r,l[r+8>>2]=i,l[r+12>>2]=n),l[6186]=o,l[6189]=c),w=e,0|(A=u+8|0)}f=d}else f=d}else f=d}else if(t>>>0<=4294967231)if(d=-8&(t=t+11|0),u=0|l[6185]){r=0-d|0,h=(t>>>=8)?d>>>0>16777215?31:d>>>(7+(h=14-((f=(520192+(x=t<<(p=(t+1048320|0)>>>16&8))|0)>>>16&4)|p|(h=(245760+(x<<=f)|0)>>>16&2))+(x<<h>>>15)|0)|0)&1|h<<1:0,n=0|l[25040+(h<<2)>>2];t:do{if(n)for(t=0,c=n,o=d<<(31==(0|h)?0:25-(h>>>1)|0),n=0;;){if((a=(-8&l[c+4>>2])-d|0)>>>0<r>>>0){if(!a){r=0,n=c,t=c,x=61;break t}t=c,r=a}if(n=0==(0|(a=0|l[c+20>>2]))|(0|a)==(0|(c=0|l[c+16+(o>>>31<<2)>>2]))?n:a,a=0==(0|c)){x=57;break}o<<=1&(1^a)}else n=0,t=0,x=57}while(0);if(57==(0|x)){if(0==(0|n)&0==(0|t)){if(!(t=u&((t=2<<h)|0-t))){f=d;break}p=(t&0-t)-1|0,t=0,n=0|l[25040+(((o=(p>>>=c=p>>>12&16)>>>5&8)|c|(h=(p>>>=o)>>>2&4)|(f=(p>>>=h)>>>1&2)|(n=(p>>>=f)>>>1&1))+(p>>>n)<<2)>>2]}n?x=61:(c=t,o=r)}if(61==(0|x))for(;;){if(x=0,r=(p=(f=(-8&l[n+4>>2])-d|0)>>>0<r>>>0)?f:r,t=p?n:t,!(n=0|l[n+16+((0==(0|l[n+16>>2])&1)<<2)>>2])){c=t,o=r;break}x=61}if(0!=(0|c)&&o>>>0<((0|l[6186])-d|0)>>>0){if((s=c+d|0)>>>0<=c>>>0)return w=e,0|(A=0);a=0|l[c+24>>2],i=0|l[c+12>>2];do{if((0|i)==(0|c)){if(!(i=0|l[(t=c+20|0)>>2])&&!(i=0|l[(t=c+16|0)>>2])){i=0;break}for(;;)if(0|(r=0|l[(n=i+20|0)>>2]))i=r,t=n;else{if(!(r=0|l[(n=i+16|0)>>2]))break;i=r,t=n}l[t>>2]=0}else A=0|l[c+8>>2],l[A+12>>2]=i,l[i+8>>2]=A}while(0);do{if(a){if(t=0|l[c+28>>2],(0|c)==(0|l[(n=25040+(t<<2)|0)>>2])){if(l[n>>2]=i,!i){r=u&~(1<<t),l[6185]=r;break}}else if(l[a+16+(((0|l[a+16>>2])!=(0|c)&1)<<2)>>2]=i,!i){r=u;break}l[i+24>>2]=a,0|(t=0|l[c+16>>2])&&(l[i+16>>2]=t,l[t+24>>2]=i),(t=0|l[c+20>>2])?(l[i+20>>2]=t,l[t+24>>2]=i,r=u):r=u}else r=u}while(0);do{if(o>>>0>=16){if(l[c+4>>2]=3|d,l[s+4>>2]=1|o,l[s+o>>2]=o,i=o>>>3,o>>>0<256){n=24776+(i<<1<<2)|0,(t=0|l[6184])&(i=1<<i)?i=0|l[(t=n+8|0)>>2]:(l[6184]=t|i,i=n,t=n+8|0),l[t>>2]=s,l[i+12>>2]=s,l[s+8>>2]=i,l[s+12>>2]=n;break}if(n=25040+((i=(i=o>>>8)?o>>>0>16777215?31:o>>>(7+(i=14-((v=(520192+(A=i<<(x=(i+1048320|0)>>>16&8))|0)>>>16&4)|x|(i=(245760+(A<<=v)|0)>>>16&2))+(A<<i>>>15)|0)|0)&1|i<<1:0)<<2)|0,l[s+28>>2]=i,l[4+(t=s+16|0)>>2]=0,l[t>>2]=0,!(r&(t=1<<i))){l[6185]=r|t,l[n>>2]=s,l[s+24>>2]=n,l[s+12>>2]=s,l[s+8>>2]=s;break}for(t=o<<(31==(0|i)?0:25-(i>>>1)|0),n=0|l[n>>2];;){if((-8&l[n+4>>2]|0)==(0|o)){x=97;break}if(!(i=0|l[(r=n+16+(t>>>31<<2)|0)>>2])){x=96;break}t<<=1,n=i}if(96==(0|x)){l[r>>2]=s,l[s+24>>2]=n,l[s+12>>2]=s,l[s+8>>2]=s;break}if(97==(0|x)){A=0|l[(x=n+8|0)>>2],l[A+12>>2]=s,l[x>>2]=s,l[s+8>>2]=A,l[s+12>>2]=n,l[s+24>>2]=0;break}}else A=o+d|0,l[c+4>>2]=3|A,l[(A=c+A+4|0)>>2]=1|l[A>>2]}while(0);return w=e,0|(A=c+8|0)}f=d}else f=d;else f=-1}while(0);if((n=0|l[6186])>>>0>=f>>>0)return i=n-f|0,t=0|l[6189],i>>>0>15?(A=t+f|0,l[6189]=A,l[6186]=i,l[A+4>>2]=1|i,l[t+n>>2]=i,l[t+4>>2]=3|f):(l[6186]=0,l[6189]=0,l[t+4>>2]=3|n,l[(A=t+n+4|0)>>2]=1|l[A>>2]),w=e,0|(A=t+8|0);if((c=0|l[6187])>>>0>f>>>0)return v=c-f|0,l[6187]=v,x=(A=0|l[6190])+f|0,l[6190]=x,l[x+4>>2]=1|v,l[A+4>>2]=3|f,w=e,0|(A=A+8|0);if(0|l[6302]?t=0|l[6304]:(l[6304]=4096,l[6303]=4096,l[6305]=-1,l[6306]=-1,l[6307]=0,l[6295]=0,l[6302]=-16&m^1431655768,t=4096),h=f+48|0,(d=(o=t+(u=f+47|0)|0)&(a=0-t|0))>>>0<=f>>>0)return w=e,0|(A=0);if(0|(t=0|l[6294])&&(m=(p=0|l[6292])+d|0)>>>0<=p>>>0|m>>>0>t>>>0)return w=e,0|(A=0);t:do{if(4&l[6295])i=0,x=133;else{n=0|l[6190];e:do{if(n){for(r=25184;!((t=0|l[r>>2])>>>0<=n>>>0&&(t+(0|l[(y=r+4|0)>>2])|0)>>>0>n>>>0);){if(!(t=0|l[r+8>>2])){x=118;break e}r=t}if((i=o-c&a)>>>0<2147483647)if((0|(t=0|Lr(0|i)))==((0|l[r>>2])+(0|l[y>>2])|0)){if(-1!=(0|t)){o=i,s=t,x=135;break t}}else r=t,x=126;else i=0}else x=118}while(0);do{if(118==(0|x))if(-1!=(0|(n=0|Lr(0)))&&(i=n,_=(i=(0==((_=(g=0|l[6303])-1|0)&i|0)?0:(_+i&0-g)-i|0)+d|0)+(g=0|l[6292])|0,i>>>0>f>>>0&i>>>0<2147483647)){if(0|(y=0|l[6294])&&_>>>0<=g>>>0|_>>>0>y>>>0){i=0;break}if((0|(t=0|Lr(0|i)))==(0|n)){o=i,s=n,x=135;break t}r=t,x=126}else i=0}while(0);do{if(126==(0|x)){if(n=0-i|0,!(h>>>0>i>>>0&i>>>0<2147483647&-1!=(0|r))){if(-1==(0|r)){i=0;break}o=i,s=r,x=135;break t}if((t=u-i+(t=0|l[6304])&0-t)>>>0>=2147483647){o=i,s=r,x=135;break t}if(-1==(0|Lr(0|t))){Lr(0|n),i=0;break}o=t+i|0,s=r,x=135;break t}}while(0);l[6295]=4|l[6295],x=133}}while(0);if(133==(0|x)&&d>>>0<2147483647&&!(-1==(0|(s=0|Lr(0|d)))|1^(v=(b=(y=0|Lr(0))-s|0)>>>0>(f+40|0)>>>0)|s>>>0<y>>>0&-1!=(0|s)&-1!=(0|y)^1)&&(o=v?b:i,x=135),135==(0|x)){i=(0|l[6292])+o|0,l[6292]=i,i>>>0>(0|l[6293])>>>0&&(l[6293]=i),h=0|l[6190];do{if(h){for(i=25184;;){if((0|s)==((t=0|l[i>>2])+(r=0|l[(n=i+4|0)>>2])|0)){x=143;break}if(!(a=0|l[i+8>>2]))break;i=a}if(143==(0|x)&&0==(8&l[i+12>>2]|0)&&s>>>0>h>>>0&t>>>0<=h>>>0){l[n>>2]=r+o,A=(0|l[6187])+o|0,x=h+(v=0==(7&(v=h+8|0)|0)?0:0-v&7)|0,v=A-v|0,l[6190]=x,l[6187]=v,l[x+4>>2]=1|v,l[h+A+4>>2]=40,l[6191]=l[6306];break}for(s>>>0<(0|l[6188])>>>0&&(l[6188]=s),t=s+o|0,i=25184;;){if((0|l[i>>2])==(0|t)){x=151;break}if(!(i=0|l[i+8>>2])){t=25184;break}}if(151==(0|x)){if(!(8&l[i+12>>2])){l[i>>2]=s,l[(d=i+4|0)>>2]=(0|l[d>>2])+o,u=(d=s+(0==(7&(d=s+8|0)|0)?0:0-d&7)|0)+f|0,c=(i=t+(0==(7&(i=t+8|0)|0)?0:0-i&7)|0)-d-f|0,l[d+4>>2]=3|f;do{if((0|h)!=(0|i)){if((0|l[6189])==(0|i)){A=(0|l[6186])+c|0,l[6186]=A,l[6189]=u,l[u+4>>2]=1|A,l[u+A>>2]=A;break}if(1==(3&(t=0|l[i+4>>2])|0)){o=-8&t,r=t>>>3;t:do{if(t>>>0<256){if(t=0|l[i+8>>2],(0|(n=0|l[i+12>>2]))==(0|t)){l[6184]=l[6184]&~(1<<r);break}l[t+12>>2]=n,l[n+8>>2]=t;break}s=0|l[i+24>>2],t=0|l[i+12>>2];do{if((0|t)==(0|i)){if(!(t=0|l[(n=4+(r=i+16|0)|0)>>2])){if(!(t=0|l[r>>2])){t=0;break}n=r}for(;;)if(0|(a=0|l[(r=t+20|0)>>2]))t=a,n=r;else{if(!(a=0|l[(r=t+16|0)>>2]))break;t=a,n=r}l[n>>2]=0}else A=0|l[i+8>>2],l[A+12>>2]=t,l[t+8>>2]=A}while(0);if(!s)break;r=25040+((n=0|l[i+28>>2])<<2)|0;do{if((0|l[r>>2])==(0|i)){if(l[r>>2]=t,0|t)break;l[6185]=l[6185]&~(1<<n);break t}if(l[s+16+(((0|l[s+16>>2])!=(0|i)&1)<<2)>>2]=t,!t)break t}while(0);if(l[t+24>>2]=s,0|(r=0|l[(n=i+16|0)>>2])&&(l[t+16>>2]=r,l[r+24>>2]=t),!(n=0|l[n+4>>2]))break;l[t+20>>2]=n,l[n+24>>2]=t}while(0);i=i+o|0,a=o+c|0}else a=c;if(l[(i=i+4|0)>>2]=-2&l[i>>2],l[u+4>>2]=1|a,l[u+a>>2]=a,i=a>>>3,a>>>0<256){n=24776+(i<<1<<2)|0,(t=0|l[6184])&(i=1<<i)?i=0|l[(t=n+8|0)>>2]:(l[6184]=t|i,i=n,t=n+8|0),l[t>>2]=u,l[i+12>>2]=u,l[u+8>>2]=i,l[u+12>>2]=n;break}i=a>>>8;do{if(i){if(a>>>0>16777215){i=31;break}i=a>>>(7+(i=14-((v=(520192+(A=i<<(x=(i+1048320|0)>>>16&8))|0)>>>16&4)|x|(i=(245760+(A<<=v)|0)>>>16&2))+(A<<i>>>15)|0)|0)&1|i<<1}else i=0}while(0);if(r=25040+(i<<2)|0,l[u+28>>2]=i,l[4+(t=u+16|0)>>2]=0,l[t>>2]=0,!((t=0|l[6185])&(n=1<<i))){l[6185]=t|n,l[r>>2]=u,l[u+24>>2]=r,l[u+12>>2]=u,l[u+8>>2]=u;break}for(t=a<<(31==(0|i)?0:25-(i>>>1)|0),n=0|l[r>>2];;){if((-8&l[n+4>>2]|0)==(0|a)){x=192;break}if(!(i=0|l[(r=n+16+(t>>>31<<2)|0)>>2])){x=191;break}t<<=1,n=i}if(191==(0|x)){l[r>>2]=u,l[u+24>>2]=n,l[u+12>>2]=u,l[u+8>>2]=u;break}if(192==(0|x)){A=0|l[(x=n+8|0)>>2],l[A+12>>2]=u,l[x>>2]=u,l[u+8>>2]=A,l[u+12>>2]=n,l[u+24>>2]=0;break}}else A=(0|l[6187])+c|0,l[6187]=A,l[6190]=u,l[u+4>>2]=1|A}while(0);return w=e,0|(A=d+8|0)}t=25184}for(;!((i=0|l[t>>2])>>>0<=h>>>0&&(A=i+(0|l[t+4>>2])|0)>>>0>h>>>0);)t=0|l[t+8>>2];i=(t=(t=(a=A+-47|0)+(0==(7&(t=a+8|0)|0)?0:0-t&7)|0)>>>0<(a=h+16|0)>>>0?h:t)+8|0,n=o+-40|0,x=s+(v=0==(7&(v=s+8|0)|0)?0:0-v&7)|0,v=n-v|0,l[6190]=x,l[6187]=v,l[x+4>>2]=1|v,l[s+n+4>>2]=40,l[6191]=l[6306],l[(n=t+4|0)>>2]=27,l[i>>2]=l[6296],l[i+4>>2]=l[6297],l[i+8>>2]=l[6298],l[i+12>>2]=l[6299],l[6296]=s,l[6297]=o,l[6299]=0,l[6298]=i,i=t+24|0;do{x=i,l[(i=i+4|0)>>2]=7}while((x+8|0)>>>0<A>>>0);if((0|t)!=(0|h)){if(s=t-h|0,l[n>>2]=-2&l[n>>2],l[h+4>>2]=1|s,l[t>>2]=s,i=s>>>3,s>>>0<256){n=24776+(i<<1<<2)|0,(t=0|l[6184])&(i=1<<i)?i=0|l[(t=n+8|0)>>2]:(l[6184]=t|i,i=n,t=n+8|0),l[t>>2]=h,l[i+12>>2]=h,l[h+8>>2]=i,l[h+12>>2]=n;break}if(r=25040+((n=(i=s>>>8)?s>>>0>16777215?31:s>>>(7+(n=14-((v=(520192+(A=i<<(x=(i+1048320|0)>>>16&8))|0)>>>16&4)|x|(n=(245760+(A<<=v)|0)>>>16&2))+(A<<n>>>15)|0)|0)&1|n<<1:0)<<2)|0,l[h+28>>2]=n,l[h+20>>2]=0,l[a>>2]=0,!((i=0|l[6185])&(t=1<<n))){l[6185]=i|t,l[r>>2]=h,l[h+24>>2]=r,l[h+12>>2]=h,l[h+8>>2]=h;break}for(t=s<<(31==(0|n)?0:25-(n>>>1)|0),n=0|l[r>>2];;){if((-8&l[n+4>>2]|0)==(0|s)){x=213;break}if(!(i=0|l[(r=n+16+(t>>>31<<2)|0)>>2])){x=212;break}t<<=1,n=i}if(212==(0|x)){l[r>>2]=h,l[h+24>>2]=n,l[h+12>>2]=h,l[h+8>>2]=h;break}if(213==(0|x)){A=0|l[(x=n+8|0)>>2],l[A+12>>2]=h,l[x>>2]=h,l[h+8>>2]=A,l[h+12>>2]=n,l[h+24>>2]=0;break}}}else 0==(0|(A=0|l[6188]))|s>>>0<A>>>0&&(l[6188]=s),l[6296]=s,l[6297]=o,l[6299]=0,l[6193]=l[6302],l[6192]=-1,l[6197]=24776,l[6196]=24776,l[6199]=24784,l[6198]=24784,l[6201]=24792,l[6200]=24792,l[6203]=24800,l[6202]=24800,l[6205]=24808,l[6204]=24808,l[6207]=24816,l[6206]=24816,l[6209]=24824,l[6208]=24824,l[6211]=24832,l[6210]=24832,l[6213]=24840,l[6212]=24840,l[6215]=24848,l[6214]=24848,l[6217]=24856,l[6216]=24856,l[6219]=24864,l[6218]=24864,l[6221]=24872,l[6220]=24872,l[6223]=24880,l[6222]=24880,l[6225]=24888,l[6224]=24888,l[6227]=24896,l[6226]=24896,l[6229]=24904,l[6228]=24904,l[6231]=24912,l[6230]=24912,l[6233]=24920,l[6232]=24920,l[6235]=24928,l[6234]=24928,l[6237]=24936,l[6236]=24936,l[6239]=24944,l[6238]=24944,l[6241]=24952,l[6240]=24952,l[6243]=24960,l[6242]=24960,l[6245]=24968,l[6244]=24968,l[6247]=24976,l[6246]=24976,l[6249]=24984,l[6248]=24984,l[6251]=24992,l[6250]=24992,l[6253]=25e3,l[6252]=25e3,l[6255]=25008,l[6254]=25008,l[6257]=25016,l[6256]=25016,l[6259]=25024,l[6258]=25024,A=o+-40|0,x=s+(v=0==(7&(v=s+8|0)|0)?0:0-v&7)|0,v=A-v|0,l[6190]=x,l[6187]=v,l[x+4>>2]=1|v,l[s+A+4>>2]=40,l[6191]=l[6306]}while(0);if((i=0|l[6187])>>>0>f>>>0)return v=i-f|0,l[6187]=v,x=(A=0|l[6190])+f|0,l[6190]=x,l[x+4>>2]=1|v,l[A+4>>2]=3|f,w=e,0|(A=A+8|0)}return l[(A=25296)>>2]=12,w=e,0|(A=0)}function _n(t){var e=0,i=0,n=0,r=0,a=0,s=0,o=0,c=0;if(t|=0){i=t+-8|0,r=0|l[6188],c=i+(e=-8&(t=0|l[t+-4>>2]))|0;do{if(1&t)o=i,s=i;else{if(n=0|l[i>>2],!(3&t))return;if(a=n+e|0,(s=i+(0-n)|0)>>>0<r>>>0)return;if((0|l[6189])==(0|s)){if(3!=(3&(e=0|l[(t=c+4|0)>>2])|0)){o=s,e=a;break}return l[6186]=a,l[t>>2]=-2&e,l[s+4>>2]=1|a,void(l[s+a>>2]=a)}if(i=n>>>3,n>>>0<256){if(t=0|l[s+8>>2],(0|(e=0|l[s+12>>2]))==(0|t)){l[6184]=l[6184]&~(1<<i),o=s,e=a;break}l[t+12>>2]=e,l[e+8>>2]=t,o=s,e=a;break}r=0|l[s+24>>2],t=0|l[s+12>>2];do{if((0|t)==(0|s)){if(!(t=0|l[(e=4+(i=s+16|0)|0)>>2])){if(!(t=0|l[i>>2])){t=0;break}e=i}for(;;)if(0|(n=0|l[(i=t+20|0)>>2]))t=n,e=i;else{if(!(n=0|l[(i=t+16|0)>>2]))break;t=n,e=i}l[e>>2]=0}else o=0|l[s+8>>2],l[o+12>>2]=t,l[t+8>>2]=o}while(0);if(r){if(e=0|l[s+28>>2],(0|l[(i=25040+(e<<2)|0)>>2])==(0|s)){if(l[i>>2]=t,!t){l[6185]=l[6185]&~(1<<e),o=s,e=a;break}}else if(l[r+16+(((0|l[r+16>>2])!=(0|s)&1)<<2)>>2]=t,!t){o=s,e=a;break}l[t+24>>2]=r,0|(i=0|l[(e=s+16|0)>>2])&&(l[t+16>>2]=i,l[i+24>>2]=t),(e=0|l[e+4>>2])?(l[t+20>>2]=e,l[e+24>>2]=t,o=s,e=a):(o=s,e=a)}else o=s,e=a}}while(0);if(!(s>>>0>=c>>>0)&&1&(n=0|l[(t=c+4|0)>>2])){if(2&n)l[t>>2]=-2&n,l[o+4>>2]=1|e,l[s+e>>2]=e,r=e;else{if((0|l[6190])==(0|c)){if(c=(0|l[6187])+e|0,l[6187]=c,l[6190]=o,l[o+4>>2]=1|c,(0|o)!=(0|l[6189]))return;return l[6189]=0,void(l[6186]=0)}if((0|l[6189])==(0|c))return c=(0|l[6186])+e|0,l[6186]=c,l[6189]=s,l[o+4>>2]=1|c,void(l[s+c>>2]=c);r=(-8&n)+e|0,i=n>>>3;do{if(n>>>0<256){if(e=0|l[c+8>>2],(0|(t=0|l[c+12>>2]))==(0|e)){l[6184]=l[6184]&~(1<<i);break}l[e+12>>2]=t,l[t+8>>2]=e;break}a=0|l[c+24>>2],t=0|l[c+12>>2];do{if((0|t)==(0|c)){if(!(t=0|l[(e=4+(i=c+16|0)|0)>>2])){if(!(t=0|l[i>>2])){i=0;break}e=i}for(;;)if(0|(n=0|l[(i=t+20|0)>>2]))t=n,e=i;else{if(!(n=0|l[(i=t+16|0)>>2]))break;t=n,e=i}l[e>>2]=0,i=t}else i=0|l[c+8>>2],l[i+12>>2]=t,l[t+8>>2]=i,i=t}while(0);if(0|a){if(t=0|l[c+28>>2],(0|l[(e=25040+(t<<2)|0)>>2])==(0|c)){if(l[e>>2]=i,!i){l[6185]=l[6185]&~(1<<t);break}}else if(l[a+16+(((0|l[a+16>>2])!=(0|c)&1)<<2)>>2]=i,!i)break;l[i+24>>2]=a,0|(e=0|l[(t=c+16|0)>>2])&&(l[i+16>>2]=e,l[e+24>>2]=i),0|(t=0|l[t+4>>2])&&(l[i+20>>2]=t,l[t+24>>2]=i)}}while(0);if(l[o+4>>2]=1|r,l[s+r>>2]=r,(0|o)==(0|l[6189]))return void(l[6186]=r)}if(t=r>>>3,r>>>0<256)return i=24776+(t<<1<<2)|0,(e=0|l[6184])&(t=1<<t)?t=0|l[(e=i+8|0)>>2]:(l[6184]=e|t,t=i,e=i+8|0),l[e>>2]=o,l[t+12>>2]=o,l[o+8>>2]=t,void(l[o+12>>2]=i);n=25040+((t=(t=r>>>8)?r>>>0>16777215?31:r>>>(7+(t=14-((a=(520192+(c=t<<(s=(t+1048320|0)>>>16&8))|0)>>>16&4)|s|(t=(245760+(c<<=a)|0)>>>16&2))+(c<<t>>>15)|0)|0)&1|t<<1:0)<<2)|0,l[o+28>>2]=t,l[o+20>>2]=0,l[o+16>>2]=0,e=0|l[6185],i=1<<t;do{if(e&i){for(e=r<<(31==(0|t)?0:25-(t>>>1)|0),i=0|l[n>>2];;){if((-8&l[i+4>>2]|0)==(0|r)){t=73;break}if(!(t=0|l[(n=i+16+(e>>>31<<2)|0)>>2])){t=72;break}e<<=1,i=t}if(72==(0|t)){l[n>>2]=o,l[o+24>>2]=i,l[o+12>>2]=o,l[o+8>>2]=o;break}if(73==(0|t)){c=0|l[(s=i+8|0)>>2],l[c+12>>2]=o,l[s>>2]=o,l[o+8>>2]=c,l[o+12>>2]=i,l[o+24>>2]=0;break}}else l[6185]=e|i,l[n>>2]=o,l[o+24>>2]=n,l[o+12>>2]=o,l[o+8>>2]=o}while(0);if(c=(0|l[6192])-1|0,l[6192]=c,!c){for(t=25192;t=0|l[t>>2];)t=t+8|0;l[6192]=-1}}}}function yn(t,e){var i=0,n=0,r=0,a=0,s=0,o=0;o=(t|=0)+(e|=0)|0,i=0|l[t+4>>2];do{if(1&i)s=t;else{if(r=0|l[t>>2],!(3&i))return;if(s=t+(0-r)|0,e=r+e|0,(0|l[6189])==(0|s)){if(3!=(3&(i=0|l[(t=o+4|0)>>2])|0))break;return l[6186]=e,l[t>>2]=-2&i,l[s+4>>2]=1|e,void(l[o>>2]=e)}if(n=r>>>3,r>>>0<256){if(t=0|l[s+8>>2],(0|(i=0|l[s+12>>2]))==(0|t)){l[6184]=l[6184]&~(1<<n);break}l[t+12>>2]=i,l[i+8>>2]=t;break}a=0|l[s+24>>2],t=0|l[s+12>>2];do{if((0|t)==(0|s)){if(!(t=0|l[(i=4+(n=s+16|0)|0)>>2])){if(!(t=0|l[n>>2])){t=0;break}i=n}for(;;)if(0|(r=0|l[(n=t+20|0)>>2]))t=r,i=n;else{if(!(r=0|l[(n=t+16|0)>>2]))break;t=r,i=n}l[i>>2]=0}else r=0|l[s+8>>2],l[r+12>>2]=t,l[t+8>>2]=r}while(0);if(a){if(i=0|l[s+28>>2],(0|l[(n=25040+(i<<2)|0)>>2])==(0|s)){if(l[n>>2]=t,!t){l[6185]=l[6185]&~(1<<i);break}}else if(l[a+16+(((0|l[a+16>>2])!=(0|s)&1)<<2)>>2]=t,!t)break;l[t+24>>2]=a,0|(n=0|l[(i=s+16|0)>>2])&&(l[t+16>>2]=n,l[n+24>>2]=t),(i=0|l[i+4>>2])&&(l[t+20>>2]=i,l[i+24>>2]=t)}}}while(0);if(2&(n=0|l[(t=o+4|0)>>2]))l[t>>2]=-2&n,l[s+4>>2]=1|e,l[s+e>>2]=e,r=e;else{if((0|l[6190])==(0|o)){if(o=(0|l[6187])+e|0,l[6187]=o,l[6190]=s,l[s+4>>2]=1|o,(0|s)!=(0|l[6189]))return;return l[6189]=0,void(l[6186]=0)}if((0|l[6189])==(0|o))return o=(0|l[6186])+e|0,l[6186]=o,l[6189]=s,l[s+4>>2]=1|o,void(l[s+o>>2]=o);r=(-8&n)+e|0,i=n>>>3;do{if(n>>>0<256){if(t=0|l[o+8>>2],(0|(e=0|l[o+12>>2]))==(0|t)){l[6184]=l[6184]&~(1<<i);break}l[t+12>>2]=e,l[e+8>>2]=t;break}a=0|l[o+24>>2],e=0|l[o+12>>2];do{if((0|e)==(0|o)){if(!(e=0|l[(t=4+(i=o+16|0)|0)>>2])){if(!(e=0|l[i>>2])){i=0;break}t=i}for(;;)if(0|(n=0|l[(i=e+20|0)>>2]))e=n,t=i;else{if(!(n=0|l[(i=e+16|0)>>2]))break;e=n,t=i}l[t>>2]=0,i=e}else i=0|l[o+8>>2],l[i+12>>2]=e,l[e+8>>2]=i,i=e}while(0);if(0|a){if(e=0|l[o+28>>2],(0|l[(t=25040+(e<<2)|0)>>2])==(0|o)){if(l[t>>2]=i,!i){l[6185]=l[6185]&~(1<<e);break}}else if(l[a+16+(((0|l[a+16>>2])!=(0|o)&1)<<2)>>2]=i,!i)break;l[i+24>>2]=a,0|(t=0|l[(e=o+16|0)>>2])&&(l[i+16>>2]=t,l[t+24>>2]=i),0|(e=0|l[e+4>>2])&&(l[i+20>>2]=e,l[e+24>>2]=i)}}while(0);if(l[s+4>>2]=1|r,l[s+r>>2]=r,(0|s)==(0|l[6189]))return void(l[6186]=r)}if(e=r>>>3,r>>>0<256)return i=24776+(e<<1<<2)|0,(t=0|l[6184])&(e=1<<e)?e=0|l[(t=i+8|0)>>2]:(l[6184]=t|e,e=i,t=i+8|0),l[t>>2]=s,l[e+12>>2]=s,l[s+8>>2]=e,void(l[s+12>>2]=i);if(e=(e=r>>>8)?r>>>0>16777215?31:r>>>(7+(e=14-((n=(520192+(o=e<<(a=(e+1048320|0)>>>16&8))|0)>>>16&4)|a|(e=(245760+(o<<=n)|0)>>>16&2))+(o<<e>>>15)|0)|0)&1|e<<1:0,n=25040+(e<<2)|0,l[s+28>>2]=e,l[s+20>>2]=0,l[s+16>>2]=0,!((t=0|l[6185])&(i=1<<e)))return l[6185]=t|i,l[n>>2]=s,l[s+24>>2]=n,l[s+12>>2]=s,void(l[s+8>>2]=s);for(t=r<<(31==(0|e)?0:25-(e>>>1)|0),i=0|l[n>>2];;){if((-8&l[i+4>>2]|0)==(0|r)){e=69;break}if(!(e=0|l[(n=i+16+(t>>>31<<2)|0)>>2])){e=68;break}t<<=1,i=e}return 68==(0|e)?(l[n>>2]=s,l[s+24>>2]=i,l[s+12>>2]=s,void(l[s+8>>2]=s)):69==(0|e)?(o=0|l[(a=i+8|0)>>2],l[o+12>>2]=s,l[a>>2]=s,l[s+8>>2]=o,l[s+12>>2]=i,void(l[s+24>>2]=0)):void 0}function bn(t,e){e|=0;var i,n=0,r=0,a=0,s=0,o=0;if((t=(t|=0)>>>0>16?t:16)+-1&t)for(n=16;;){if(!(n>>>0<t>>>0)){t=n;break}n<<=1}if((-64-t|0)>>>0<=e>>>0)return l[(s=25296)>>2]=12,0|(s=0);if(!(n=0|gn(12+(i=e>>>0<11?16:e+11&-8)+t|0)))return 0|(s=0);a=n+-8|0;do{if(t+-1&n){if(e=(r=((r=(n+t+-1&0-t)-8|0)-(e=a)|0)>>>0>15?r:r+t|0)-e|0,n=(-8&(o=0|l[(t=n+-4|0)>>2]))-e|0,3&o){l[(o=r+4|0)>>2]=n|1&l[o>>2]|2,l[(n=r+n+4|0)>>2]=1|l[n>>2],l[t>>2]=e|1&l[t>>2]|2,l[o>>2]=1|l[o>>2],yn(a,e),t=r,e=r;break}l[r>>2]=(0|l[a>>2])+e,l[r+4>>2]=n,t=r,e=r;break}t=a,e=a}while(0);return 3&(n=0|l[(t=t+4|0)>>2])|0&&(s=-8&n)>>>0>(i+16|0)>>>0&&(o=s-i|0,a=e+i|0,l[t>>2]=i|1&n|2,l[a+4>>2]=3|o,l[(s=e+s+4|0)>>2]=1|l[s>>2],yn(a,o)),0|(o=e+8|0)}function vn(t,e,i){t|=0,e|=0,i|=0;var n=0;do{if(8!=(0|e)){if(0!=(3&e|0)|0==(0|(n=e>>>2)))return 0|(t=22);if(n+1073741823&n|0)return 0|(t=22);if((-64-e|0)>>>0<i>>>0)return 0|(t=12);e=0|bn(e>>>0>16?e:16,i);break}e=0|gn(i)}while(0);return e?(l[t>>2]=e,0|(t=0)):0|(t=12)}function wn(t,e,i){e|=0,i|=0;var n,r,a,s,o,c=0,h=0,u=0,d=0,f=0,p=0;o=w,w=w+48|0,s=o+16|0,u=o,h=o+32|0,c=0|l[(r=28+(t|=0)|0)>>2],l[h>>2]=c,c=(0|l[(a=t+20|0)>>2])-c|0,l[h+4>>2]=c,l[h+8>>2]=e,l[h+12>>2]=i,c=c+i|0,n=t+60|0,l[u>>2]=l[n>>2],l[u+4>>2]=h,l[u+8>>2]=2,u=0|xn(0|N(146,0|u));t:do{if((0|c)!=(0|u)){for(e=2;!((0|u)<0);)if(c=c-u|0,h=(f=u>>>0>(p=0|l[h+4>>2])>>>0)?h+8|0:h,e=e+(f<<31>>31)|0,p=u-(f?p:0)|0,l[h>>2]=(0|l[h>>2])+p,l[(f=h+4|0)>>2]=(0|l[f>>2])-p,l[s>>2]=l[n>>2],l[s+4>>2]=h,l[s+8>>2]=e,(0|c)==(0|(u=0|xn(0|N(146,0|s))))){d=3;break t}l[t+16>>2]=0,l[r>>2]=0,l[a>>2]=0,l[t>>2]=32|l[t>>2],i=2==(0|e)?0:i-(0|l[h+4>>2])|0}else d=3}while(0);return 3==(0|d)&&(p=0|l[t+44>>2],l[t+16>>2]=p+(0|l[t+48>>2]),l[r>>2]=p,l[a>>2]=p),w=o,0|i}function xn(t){return(t|=0)>>>0>4294963200&&(l[6324]=0-t,t=-1),0|t}function An(t,e){e|=0;var i=0,n=0;if(i=0|r[(t|=0)>>0],n=0|r[e>>0],i<<24>>24==0||i<<24>>24!=n<<24>>24)t=n;else{do{e=e+1|0,i=0|r[(t=t+1|0)>>0],n=0|r[e>>0]}while(i<<24>>24!=0&&i<<24>>24==n<<24>>24);t=n}return(255&i)-(255&t)|0}function Mn(t){var e,i=0,n=0;e=t|=0;t:do{if(3&e)for(i=e;;){if(!(0|r[t>>0])){t=i;break t}if(!(3&(i=t=t+1|0))){n=4;break}}else n=4}while(0);if(4==(0|n)){for(;!((-2139062144&(i=0|l[t>>2])^-2139062144)&i+-16843009);)t=t+4|0;if((255&i)<<24>>24)do{t=t+1|0}while(0!=(0|r[t>>0]))}return t-e|0}function Sn(t,e){var i;return e|=0,((0|En(t|=0,1,i=0|Mn(t),e))!=(0|i))<<31>>31|0}function En(t,e,i,n){t|=0,n|=0;var r,a=0;return r=0|C(i|=0,e|=0),i=0==(0|e)?0:i,(0|l[n+76>>2])>-1?(a=0==(0|Cn()),t=0|Bn(t,r,n),a||In()):t=0|Bn(t,r,n),(0|t)!=(0|r)&&(i=(t>>>0)/(e>>>0)|0),0|i}function Tn(t){var e=0;0|l[68+(t|=0)>>2]&&(e=0|l[t+116>>2],t=t+112|0,0|e&&(l[e+112>>2]=l[t>>2]),t=0|l[t>>2],l[(t=t?t+116|0:3024)>>2]=e)}function In(t){}function Cn(t){return 0}function kn(t,e){t|=0;var i,n,a,s=0,o=0,c=0,u=0;a=w,w=w+16|0,n=255&(e|=0),r[(i=a)>>0]=n,(c=0|l[(o=t+16|0)>>2])?u=4:0|Pn(t)?s=-1:(c=0|l[o>>2],u=4);do{if(4==(0|u)){if((o=0|l[(u=t+20|0)>>2])>>>0<c>>>0&&(0|(s=255&e))!=(0|r[t+75>>0])){l[u>>2]=o+1,r[o>>0]=n;break}s=1==(0|qr[63&l[t+36>>2]](t,i,1))?0|h[i>>0]:-1}}while(0);return w=a,0|s}function Pn(t){var e=0,i=0;return i=0|r[(e=74+(t|=0)|0)>>0],r[e>>0]=i+255|i,8&(e=0|l[t>>2])?(l[t>>2]=32|e,t=-1):(l[t+8>>2]=0,l[t+4>>2]=0,i=0|l[t+44>>2],l[t+28>>2]=i,l[t+20>>2]=i,l[t+16>>2]=i+(0|l[t+48>>2]),t=0),0|t}function Bn(t,e,i){t|=0,e|=0;var n=0,a=0,s=0,o=0,c=0;(a=0|l[(n=16+(i|=0)|0)>>2])?s=5:0|Pn(i)?n=0:(a=0|l[n>>2],s=5);t:do{if(5==(0|s)){if(n=o=0|l[(c=i+20|0)>>2],(a-o|0)>>>0<e>>>0){n=0|qr[63&l[i+36>>2]](i,t,e);break}e:do{if((0|r[i+75>>0])>-1){for(o=e;;){if(!o){s=0,a=t;break e}if(10==(0|r[t+(a=o+-1|0)>>0]))break;o=a}if((n=0|qr[63&l[i+36>>2]](i,t,o))>>>0<o>>>0)break t;s=o,a=t+o|0,e=e-o|0,n=0|l[c>>2]}else s=0,a=t}while(0);Cr(0|n,0|a,0|e),l[c>>2]=(0|l[c>>2])+e,n=s+e|0}}while(0);return 0|n}function Ln(t,e,i){e|=0,i|=0;var n,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0;n=1794895138+(0|l[(t|=0)>>2])|0,o=0|Rn(0|l[t+8>>2],n),a=0|Rn(0|l[t+12>>2],n),s=0|Rn(0|l[t+16>>2],n);t:do{if(o>>>0<e>>>2>>>0&&(p=e-(o<<2)|0,a>>>0<p>>>0&s>>>0<p>>>0)&&0==(3&(s|a)|0)){for(p=a>>>2,f=s>>>2,d=0;;){if(a=0|Rn(0|l[t+((s=(c=(u=d+(h=o>>>1)|0)<<1)+p|0)<<2)>>2],n),!((s=0|Rn(0|l[t+(s+1<<2)>>2],n))>>>0<e>>>0&a>>>0<(e-s|0)>>>0)){a=0;break t}if(0|r[t+(s+a)>>0]){a=0;break t}if(!(a=0|An(i,t+s|0)))break;if(a=(0|a)<0,1==(0|o)){a=0;break t}d=a?d:u,o=a?h:o-h|0}s=0|Rn(0|l[t+((a=c+f|0)<<2)>>2],n),a=(a=0|Rn(0|l[t+(a+1<<2)>>2],n))>>>0<e>>>0&s>>>0<(e-a|0)>>>0&&0==(0|r[t+(a+s)>>0])?t+a|0:0}else a=0}while(0);return 0|a}function Rn(t,e){var i;return e|=0,i=0|Ir(0|(t|=0)),0|(0==(0|e)?t:i)}function Dn(t,e){t|=0;var i,n,a,s=0,o=0;return a=w,w=w+48|0,n=a+32|0,i=a+16|0,s=a,0|On(22305,0|r[(e|=0)>>0],4)?(o=0|function(t){var e=0,i=0,n=0;return i=0==(0|Gn(t|=0,43)),e=0|r[t>>0],i=i?e<<24>>24!=114&1:2,n=0==(0|Gn(t,120)),i=n?i:128|i,t=(t=0==(0|Gn(t,101)))?i:524288|i,t=e<<24>>24==114?t:64|t,t=e<<24>>24==119?512|t:t,0|(e<<24>>24==97?1024|t:t)}(e),l[s>>2]=t,l[s+4>>2]=32768|o,l[s+8>>2]=438,(0|(s=0|xn(0|H(5,0|s))))>=0?(524288&o|0&&(l[i>>2]=s,l[i+4>>2]=2,l[i+8>>2]=1,z(221,0|i)),(t=0|function(t,e){t|=0;var i=0,n=0,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0;if(f=w,w=w+64|0,d=f+40|0,h=f+24|0,c=f+16|0,a=f,u=f+56|0,0|On(22305,(n=0|r[(e|=0)>>0])<<24>>24,4))if(i=0|gn(1156)){o=(s=i)+124|0;do{l[s>>2]=0,s=s+4|0}while((0|s)<(0|o));0|Gn(e,43)||(l[i>>2]=n<<24>>24==114?8:4),0|Gn(e,101)&&(l[a>>2]=t,l[a+4>>2]=2,l[a+8>>2]=1,z(221,0|a),n=0|r[e>>0]),n<<24>>24==97?(l[c>>2]=t,l[c+4>>2]=3,1024&(n=0|z(221,0|c))||(l[h>>2]=t,l[h+4>>2]=4,l[h+8>>2]=1024|n,z(221,0|h)),e=128|l[i>>2],l[i>>2]=e):e=0|l[i>>2],l[i+60>>2]=t,l[i+44>>2]=i+132,l[i+48>>2]=1024,r[(n=i+75|0)>>0]=-1,0==(8&e|0)&&(l[d>>2]=t,l[d+4>>2]=21523,l[d+8>>2]=u,0==(0|U(54,0|d)))&&(r[n>>0]=10),l[i+32>>2]=62,l[i+36>>2]=61,l[i+40>>2]=2,l[i+12>>2]=1,0|l[6309]||(l[i+76>>2]=-1),function(t){t|=0;var e=0,i=0;e=0|Fn(),l[t+56>>2]=l[e>>2],0|(i=0|l[e>>2])&&(l[i+52>>2]=t),l[e>>2]=t,Nn()}(i)}else i=0;else l[(i=25296)>>2]=22,i=0;return w=f,0|i}(s,e))||(l[n>>2]=s,V(6,0|n),t=0)):t=0):(l[(t=25296)>>2]=22,t=0),w=a,0|t}function On(t,e,i){t|=0;var n=0,a=0,s=0,o=0;s=255&(e|=0),n=0!=(0|(i|=0));t:do{if(n&0!=(3&t|0))for(a=255&e;;){if((0|r[t>>0])==a<<24>>24){o=6;break t}if(!((n=0!=(0|(i=i+-1|0)))&0!=(3&(t=t+1|0)|0))){o=5;break}}else o=5}while(0);5==(0|o)&&(n?o=6:i=0);t:do{if(6==(0|o)&&(a=255&e,(0|r[t>>0])!=a<<24>>24)){n=0|C(s,16843009);e:do{if(i>>>0>3){for(;!((-2139062144&(s=l[t>>2]^n)^-2139062144)&s+-16843009|0);)if(t=t+4|0,(i=i+-4|0)>>>0<=3){o=11;break e}}else o=11}while(0);if(11==(0|o)&&!i){i=0;break}for(;;){if((0|r[t>>0])==a<<24>>24)break t;if(t=t+1|0,!(i=i+-1|0)){i=0;break}}}}while(0);return 0|(0|i?t:0)}function Gn(t,e){return t=0|function(t,e){t|=0;var i=0,n=0,a=0;n=255&(e|=0);t:do{if(n){if(3&t){i=255&e;do{if((a=0|r[t>>0])<<24>>24==0||a<<24>>24==i<<24>>24)break t;t=t+1|0}while(0!=(3&t|0))}n=0|C(n,16843009),i=0|l[t>>2];e:do{if(!((-2139062144&i^-2139062144)&i+-16843009))do{if((-2139062144&(a=i^n)^-2139062144)&a+-16843009|0)break e;i=0|l[(t=t+4|0)>>2]}while(!((-2139062144&i^-2139062144)&i+-16843009|0))}while(0);for(i=255&e;(a=0|r[t>>0])<<24>>24!=0&&a<<24>>24!=i<<24>>24;)t=t+1|0}else t=t+(0|Mn(t))|0}while(0);return 0|t}(t|=0,e|=0),0|((0|r[t>>0])==(255&e)<<24>>24?t:0)}function Fn(){return D(25300),25308}function Nn(){W(25300)}function zn(t){var e,i=0,n=0,r=0,a=0;return a=(0|l[76+(t|=0)>>2])>-1?0|Cn():0,Tn(t),(e=0!=(1&l[t>>2]|0))||(r=0|Fn(),i=t+56|0,0|(n=0|l[t+52>>2])&&(l[n+56>>2]=l[i>>2]),0|(i=0|l[i>>2])&&(l[i+52>>2]=n),(0|l[r>>2])==(0|t)&&(l[r>>2]=i),Nn()),i=0|function t(e){e|=0;var i=0,n=0;do{if(e){if((0|l[e+76>>2])<=-1){i=0|Hn(e);break}n=0==(0|Cn()),i=0|Hn(e),n||In()}else{if(i=0|l[697]?0|t(0|l[697]):0,e=0|Fn(),e=0|l[e>>2])do{n=(0|l[e+76>>2])>-1?0|Cn():0,(0|l[e+20>>2])>>>0>(0|l[e+28>>2])>>>0&&(i=0|Hn(e)|i),0|n&&In(),e=0|l[e+56>>2]}while(0!=(0|e));Nn()}}while(0);return 0|i}(t),i=0|Xr[15&l[t+12>>2]](t)|i,0|(n=0|l[t+92>>2])&&_n(n),e?0|a&&In():_n(t),0|i}function Hn(t){var e,i,n=0,r=0,a=0,s=0;return i=28+(t|=0)|0,(0|l[(e=t+20|0)>>2])>>>0>(0|l[i>>2])>>>0&&(qr[63&l[t+36>>2]](t,0,0),0==(0|l[e>>2]))?t=-1:((r=0|l[(n=t+4|0)>>2])>>>0<(s=0|l[(a=t+8|0)>>2])>>>0&&qr[63&l[t+40>>2]](t,r-s|0,1),l[t+16>>2]=0,l[i>>2]=0,l[e>>2]=0,l[a>>2]=0,l[n>>2]=0,t=0),0|t}function Un(t){var e=0,i=0;return i=0|r[(e=74+(t|=0)|0)>>0],r[e>>0]=i+255|i,i=t+28|0,(0|l[(e=t+20|0)>>2])>>>0>(0|l[i>>2])>>>0&&qr[63&l[t+36>>2]](t,0,0),l[t+16>>2]=0,l[i>>2]=0,l[e>>2]=0,4&(e=0|l[t>>2])?(l[t>>2]=32|e,e=-1):(i=(0|l[t+44>>2])+(0|l[t+48>>2])|0,l[t+8>>2]=i,l[t+4>>2]=i,e=e<<27>>31),0|e}function Vn(t,e,i){return 0|function(t,e,i){e|=0,i|=0;var n=0;return(0|l[76+(t|=0)>>2])>-1?(n=0==(0|Cn()),e=0|or(t,e,i),n||In()):e=0|or(t,e,i),0|e}(t|=0,e|=0,i|=0)}function Wn(t,e,i){var n,r;return t|=0,e|=0,i|=0,n=w,w=w+16|0,l[(r=n)>>2]=i,i=0|jn(t,e,r),w=n,0|i}function jn(t,e,i){t|=0,e|=0,i|=0;var n,a,s,o,c,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0;c=w,w=w+224|0,n=c+120|0,s=c,o=c+136|0,u=40+(h=a=c+80|0)|0;do{l[h>>2]=0,h=h+4|0}while((0|h)<(0|u));return l[n>>2]=l[i>>2],(0|Zn(0,e,n,s,a))<0?i=-1:(_=(0|l[t+76>>2])>-1?0|Cn():0,g=32&(i=0|l[t>>2]),(0|r[t+74>>0])<1&&(l[t>>2]=-33&i),0|l[(h=t+48|0)>>2]?i=0|Zn(t,e,n,s,a):(d=0|l[(u=t+44|0)>>2],l[u>>2]=o,l[(f=t+28|0)>>2]=o,l[(p=t+20|0)>>2]=o,l[h>>2]=80,l[(m=t+16|0)>>2]=o+80,i=0|Zn(t,e,n,s,a),d&&(qr[63&l[t+36>>2]](t,0,0),i=0==(0|l[p>>2])?-1:i,l[u>>2]=d,l[h>>2]=0,l[m>>2]=0,l[f>>2]=0,l[p>>2]=0)),h=0|l[t>>2],l[t>>2]=h|g,0|_&&In(),i=0==(32&h|0)?i:-1),w=c,0|i}function Zn(t,e,i,n,a){t|=0,e|=0,i|=0,n|=0,a|=0;var o,c,h,u,d,f,p,m,g,y=0,b=0,v=0,x=0,A=0,S=0,E=0,T=0,I=0,C=0,k=0,P=0,B=0,L=0;g=w,w=w+64|0,f=g,L=g+24|0,p=g+8|0,m=g+20|0,l[(d=g+16|0)>>2]=e,o=0!=(0|t),h=c=L+40|0,L=L+39|0,u=p+4|0,b=0,y=0,S=0;t:for(;;){do{if((0|y)>-1){if((0|b)>(2147483647-y|0)){l[(y=25296)>>2]=75,y=-1;break}y=b+y|0;break}}while(0);if(!((b=0|r[e>>0])<<24>>24)){B=86;break}v=e;e:for(;;){switch(b<<24>>24){case 37:b=v,B=9;break e;case 0:b=v;break e}P=v+1|0,l[d>>2]=P,b=0|r[P>>0],v=P}e:do{if(9==(0|B))for(;;){if(B=0,37!=(0|r[v+1>>0]))break e;if(b=b+1|0,v=v+2|0,l[d>>2]=v,37!=(0|r[v>>0]))break;B=9}}while(0);if(b=b-e|0,o&&Yn(t,e,b),0|b)e=v;else{if((b=(0|r[(x=v+1|0)>>0])-48|0)>>>0<10?(C=(P=36==(0|r[v+2>>0]))?b:-1,S=P?1:S,x=P?v+3|0:x):C=-1,l[d>>2]=x,(P=((b=0|r[x>>0])<<24>>24)-32|0)>>>0>31|0==(1<<P&75913|0))v=0;else{v=0;do{v|=1<<(b<<24>>24)-32,x=x+1|0,l[d>>2]=x,P=((b=0|r[x>>0])<<24>>24)-32|0}while(!(P>>>0>31|0==(1<<P&75913|0)))}if(b<<24>>24==42){if((b=(0|r[(A=x+1|0)>>0])-48|0)>>>0<10&&36==(0|r[x+2>>0]))l[a+(b<<2)>>2]=10,b=0|l[n+((0|r[A>>0])-48<<3)>>2],S=1,x=x+3|0;else{if(0|S){y=-1;break}o?(S=3+(0|l[i>>2])&-4,b=0|l[S>>2],l[i>>2]=S+4,S=0,x=A):(b=0,S=0,x=A)}l[d>>2]=x,b=(k=(0|b)<0)?0-b|0:b,k=k?8192|v:v}else{if((0|(b=0|Xn(d)))<0){y=-1;break}k=v,x=0|l[d>>2]}do{if(46==(0|r[x>>0])){if(42!=(0|r[x+1>>0])){l[d>>2]=x+1,v=0|Xn(d),x=0|l[d>>2];break}if((v=(0|r[(A=x+2|0)>>0])-48|0)>>>0<10&&36==(0|r[x+3>>0])){l[a+(v<<2)>>2]=10,v=0|l[n+((0|r[A>>0])-48<<3)>>2],x=x+4|0,l[d>>2]=x;break}if(0|S){y=-1;break t}o?(P=3+(0|l[i>>2])&-4,v=0|l[P>>2],l[i>>2]=P+4):v=0,l[d>>2]=A,x=A}else v=-1}while(0);for(I=0;;){if(((0|r[x>>0])-65|0)>>>0>57){y=-1;break t}if(P=x+1|0,l[d>>2]=P,!(((E=255&(A=0|r[(0|r[x>>0])-65+(22309+(58*I|0))>>0]))-1|0)>>>0<8))break;I=E,x=P}if(!(A<<24>>24)){y=-1;break}T=(0|C)>-1;do{if(A<<24>>24==19){if(T){y=-1;break t}B=48}else{if(T){l[a+(C<<2)>>2]=E,C=0|l[4+(T=n+(C<<3)|0)>>2],l[(B=f)>>2]=l[T>>2],l[B+4>>2]=C,B=48;break}if(!o){y=0;break t}Jn(f,E,i)}}while(0);if(48!=(0|B)||(B=0,o)){x=0!=(0|I)&3==(15&(x=0|r[x>>0])|0)?-33&x:x,C=-65537&k,k=0==(8192&k|0)?k:C;e:do{switch(0|x){case 110:switch((255&I)<<24>>24){case 0:case 1:l[l[f>>2]>>2]=y,b=0,e=P;continue t;case 2:b=0|l[f>>2],l[b>>2]=y,l[b+4>>2]=((0|y)<0)<<31>>31,b=0,e=P;continue t;case 3:s[l[f>>2]>>1]=y,b=0,e=P;continue t;case 4:r[l[f>>2]>>0]=y,b=0,e=P;continue t;case 6:l[l[f>>2]>>2]=y,b=0,e=P;continue t;case 7:b=0|l[f>>2],l[b>>2]=y,l[b+4>>2]=((0|y)<0)<<31>>31,b=0,e=P;continue t;default:b=0,e=P;continue t}case 112:x=120,v=v>>>0>8?v:8,e=8|k,B=60;break;case 88:case 120:e=k,B=60;break;case 111:A=0,E=22773,v=0==(8&k|0)|(0|v)>(0|(I=h-(T=0|Qn(e=0|l[(x=f)>>2],x=0|l[x+4>>2],c))|0))?v:I+1|0,I=k,B=66;break;case 105:case 100:if(e=0|l[(x=f)>>2],(0|(x=0|l[x+4>>2]))<0){e=0|vr(0,0,0|e,0|x),x=M,l[(A=f)>>2]=e,l[A+4>>2]=x,A=1,E=22773,B=65;break e}A=0!=(2049&k|0)&1,E=0==(2048&k|0)?0==(1&k|0)?22773:22775:22774,B=65;break e;case 117:A=0,E=22773,e=0|l[(x=f)>>2],x=0|l[x+4>>2],B=65;break;case 99:r[L>>0]=l[f>>2],e=L,A=0,E=22773,T=c,x=1,v=C;break;case 109:x=0|$n(0|l[(x=25296)>>2]),B=70;break;case 115:x=0|(x=0|l[f>>2])?x:22783,B=70;break;case 67:l[p>>2]=l[f>>2],l[u>>2]=0,l[f>>2]=p,T=-1,x=p,B=74;break;case 83:e=0|l[f>>2],v?(T=v,x=e,B=74):(tr(t,32,b,0,k),e=0,B=83);break;case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:b=0|ir(t,+_[f>>3],b,v,k,x),e=P;continue t;default:A=0,E=22773,T=c,x=v,v=k}}while(0);e:do{if(60==(0|B))T=0|qn(C=0|l[(k=f)>>2],k=0|l[k+4>>2],c,32&x),A=(E=0==(8&e|0)|0==(0|C)&0==(0|k))?0:2,E=E?22773:22773+(x>>4)|0,I=e,e=C,x=k,B=66;else if(65==(0|B))T=0|Kn(e,x,c),I=k,B=66;else if(70==(0|B))B=0,e=x,A=0,E=22773,T=(I=0==(0|(k=0|On(x,0,v))))?x+v|0:k,x=I?v:k-x|0,v=C;else if(74==(0|B)){for(B=0,E=x,e=0,v=0;(A=0|l[E>>2])&&!((0|(v=0|er(m,A)))<0|v>>>0>(T-e|0)>>>0)&&T>>>0>(e=v+e|0)>>>0;)E=E+4|0;if((0|v)<0){y=-1;break t}if(tr(t,32,b,e,k),e)for(A=0;;){if(!(v=0|l[x>>2])){B=83;break e}if((0|(A=(v=0|er(m,v))+A|0))>(0|e)){B=83;break e}if(Yn(t,m,v),A>>>0>=e>>>0){B=83;break}x=x+4|0}else e=0,B=83}}while(0);if(66==(0|B))B=0,k=0!=(0|v)|(x=0!=(0|e)|0!=(0|x)),x=h-T+(1&(1^x))|0,e=k?T:c,T=c,x=k?(0|v)>(0|x)?v:x:v,v=(0|v)>-1?-65537&I:I;else if(83==(0|B)){B=0,tr(t,32,b,e,8192^k),b=(0|b)>(0|e)?b:e,e=P;continue}tr(t,32,b=(0|b)<(0|(k=(I=(0|x)<(0|(C=T-e|0))?C:x)+A|0))?k:b,k,v),Yn(t,E,A),tr(t,48,b,k,65536^v),tr(t,48,I,C,0),Yn(t,e,C),tr(t,32,b,k,8192^v),e=P}else b=0,e=P}}t:do{if(86==(0|B)&&!t)if(S){for(y=1;e=0|l[a+(y<<2)>>2];){if(Jn(n+(y<<3)|0,e,i),e=y+1|0,!((0|y)<9)){y=e;break}y=e}if((0|y)<10)for(;;){if(0|l[a+(y<<2)>>2]){y=-1;break t}if(!((0|y)<9)){y=1;break}y=y+1|0}else y=1}else y=0}while(0);return w=g,0|y}function Yn(t,e,i){e|=0,i|=0,32&l[(t|=0)>>2]||Bn(e,i,t)}function Xn(t){var e=0,i=0,n=0;if(i=0|l[(t|=0)>>2],(n=(0|r[i>>0])-48|0)>>>0<10){e=0;do{e=n+(10*e|0)|0,i=i+1|0,l[t>>2]=i,n=(0|r[i>>0])-48|0}while(n>>>0<10)}else e=0;return 0|e}function Jn(t,e,i){t|=0,e|=0,i|=0;var n=0,r=0,a=0;t:do{if(e>>>0<=20)switch(0|e){case 9:n=3+(0|l[i>>2])&-4,e=0|l[n>>2],l[i>>2]=n+4,l[t>>2]=e;break t;case 10:n=3+(0|l[i>>2])&-4,e=0|l[n>>2],l[i>>2]=n+4,l[(n=t)>>2]=e,l[n+4>>2]=((0|e)<0)<<31>>31;break t;case 11:n=3+(0|l[i>>2])&-4,e=0|l[n>>2],l[i>>2]=n+4,l[(n=t)>>2]=e,l[n+4>>2]=0;break t;case 12:n=7+(0|l[i>>2])&-8,r=0|l[(e=n)>>2],e=0|l[e+4>>2],l[i>>2]=n+8,l[(n=t)>>2]=r,l[n+4>>2]=e;break t;case 13:r=3+(0|l[i>>2])&-4,n=0|l[r>>2],l[i>>2]=r+4,n=(65535&n)<<16>>16,l[(r=t)>>2]=n,l[r+4>>2]=((0|n)<0)<<31>>31;break t;case 14:r=3+(0|l[i>>2])&-4,n=0|l[r>>2],l[i>>2]=r+4,l[(r=t)>>2]=65535&n,l[r+4>>2]=0;break t;case 15:r=3+(0|l[i>>2])&-4,n=0|l[r>>2],l[i>>2]=r+4,n=(255&n)<<24>>24,l[(r=t)>>2]=n,l[r+4>>2]=((0|n)<0)<<31>>31;break t;case 16:r=3+(0|l[i>>2])&-4,n=0|l[r>>2],l[i>>2]=r+4,l[(r=t)>>2]=255&n,l[r+4>>2]=0;break t;case 17:case 18:r=7+(0|l[i>>2])&-8,a=+_[r>>3],l[i>>2]=r+8,_[t>>3]=a;break t;default:break t}}while(0)}function qn(t,e,i,n){if(i|=0,n|=0,!(0==(0|(t|=0))&0==(0|(e|=0))))do{r[(i=i+-1|0)>>0]=0|h[22825+(15&t)>>0]|n,t=0|Er(0|t,0|e,4),e=M}while(!(0==(0|t)&0==(0|e)));return 0|i}function Qn(t,e,i){if(i|=0,!(0==(0|(t|=0))&0==(0|(e|=0))))do{r[(i=i+-1|0)>>0]=7&t|48,t=0|Er(0|t,0|e,3),e=M}while(!(0==(0|t)&0==(0|e)));return 0|i}function Kn(t,e,i){i|=0;var n=0;if((e|=0)>>>0>0|0==(0|e)&(t|=0)>>>0>4294967295){for(;n=0|Mr(0|t,0|e,10,0),r[(i=i+-1|0)>>0]=255&n|48,n=t,t=0|Ar(0|t,0|e,10,0),e>>>0>9|9==(0|e)&n>>>0>4294967295;)e=M;e=t}else e=t;if(e)for(;r[(i=i+-1|0)>>0]=48|(e>>>0)%10,!(e>>>0<10);)e=(e>>>0)/10|0;return 0|i}function $n(t){return 0|sr(t|=0,0|l[745])}function tr(t,e,i,n,r){var a,s;if(t|=0,e|=0,s=w,w=w+256|0,a=s,(0|(i|=0))>(0|(n|=0))&0==(73728&(r|=0)|0)){if(kr(0|a,0|e,0|((r=i-n|0)>>>0<256?r:256)),r>>>0>255){e=i-n|0;do{Yn(t,a,256),r=r+-256|0}while(r>>>0>255);r=255&e}Yn(t,a,r)}w=s}function er(t,e){return e|=0,0|(t=(t|=0)?0|ar(t,e):0)}function ir(t,e,i,n,a,s){t|=0,e=+e,i|=0,n|=0,a|=0,s|=0;var o,c=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0;o=w,w=w+560|0,d=o+8|0,L=R=o+524|0,f=o+512|0,l[(v=o)>>2]=0,B=f+12|0,nr(e),(0|M)<0?(e=-e,k=1,I=22790):(k=0!=(2049&a|0)&1,I=0==(2048&a|0)?0==(1&a|0)?22791:22796:22793),nr(e);do{if(!0&2146435072==(2146435072&M|0))R=0!=(32&s|0),tr(t,32,i,c=k+3|0,-65537&a),Yn(t,I,k),Yn(t,e!=e|!1?R?22817:22821:R?22809:22813,3),tr(t,32,i,c,8192^a);else{if((c=0!=(_=2*+rr(e,v)))&&(l[v>>2]=(0|l[v>>2])-1),97==(0|(A=32|s))){y=0==(0|(m=32&s))?I:I+9|0,g=2|k,c=12-n|0;do{if(!(n>>>0>11|0==(0|c))){e=8;do{c=c+-1|0,e*=16}while(0!=(0|c));if(45==(0|r[y>>0])){e=-(e+(-_-e));break}e=_+e-e;break}e=_}while(0);(0|(c=0|Kn(c=(0|(u=0|l[v>>2]))<0?0-u|0:u,((0|c)<0)<<31>>31,B)))==(0|B)&&(r[(c=f+11|0)>>0]=48),r[c+-1>>0]=43+(u>>31&2),r[(p=c+-2|0)>>0]=s+15,d=(0|n)<1,f=0==(8&a|0),c=R;do{P=~~e,u=c+1|0,r[c>>0]=m|h[22825+P>>0],e=16*(e-+(0|P)),1!=(u-L|0)||f&d&0==e?c=u:(r[u>>0]=46,c=c+2|0)}while(0!=e);0!=(0|n)&&(-2-L+c|0)<(0|n)?(u=c-L|0,c=n+2|0):u=c=c-L|0,tr(t,32,i,L=(B=B-p|0)+g+c|0,a),Yn(t,y,g),tr(t,48,i,L,65536^a),Yn(t,R,u),tr(t,48,c-u|0,0,0),Yn(t,p,B),tr(t,32,i,L,8192^a),c=L;break}u=(0|n)<0?6:n,c?(c=(0|l[v>>2])-28|0,l[v>>2]=c,e=268435456*_):(e=_,c=0|l[v>>2]),d=P=(0|c)<0?d:d+288|0;do{E=~~e>>>0,l[d>>2]=E,d=d+4|0,e=1e9*(e-+(E>>>0))}while(0!=e);if((0|c)>0)for(f=P,m=d;;){if(p=(0|c)<29?c:29,(c=m+-4|0)>>>0>=f>>>0){d=0;do{x=0|Mr(0|(S=0|br(0|(S=0|Tr(0|l[c>>2],0,0|p)),0|M,0|d,0)),0|(E=M),1e9,0),l[c>>2]=x,d=0|Ar(0|S,0|E,1e9,0),c=c+-4|0}while(c>>>0>=f>>>0);d&&(l[(f=f+-4|0)>>2]=d)}for(d=m;!(d>>>0<=f>>>0||0|l[(c=d+-4|0)>>2]);)d=c;if(c=(0|l[v>>2])-p|0,l[v>>2]=c,!((0|c)>0))break;m=d}else f=P;if((0|c)<0){n=1+((u+25|0)/9|0)|0,b=102==(0|A);do{if(y=(0|(y=0-c|0))<9?y:9,f>>>0<d>>>0){p=(1<<y)-1|0,m=1e9>>>y,g=0,c=f;do{E=0|l[c>>2],l[c>>2]=(E>>>y)+g,g=0|C(E&p,m),c=c+4|0}while(c>>>0<d>>>0);c=0==(0|l[f>>2])?f+4|0:f,g?(l[d>>2]=g,f=c,c=d+4|0):(f=c,c=d)}else f=0==(0|l[f>>2])?f+4|0:f,c=d;d=(c-(d=b?P:f)>>2|0)>(0|n)?d+(n<<2)|0:c,c=(0|l[v>>2])+y|0,l[v>>2]=c}while((0|c)<0);c=f,n=d}else c=f,n=d;if(E=P,c>>>0<n>>>0){if(d=9*(E-c>>2)|0,(p=0|l[c>>2])>>>0>=10){f=10;do{f=10*f|0,d=d+1|0}while(p>>>0>=f>>>0)}}else d=0;if(b=103==(0|A),x=0!=(0|u),(0|(f=u-(102!=(0|A)?d:0)+((x&b)<<31>>31)|0))<((9*(n-E>>2)|0)-9|0)){if(y=P+4+(((0|(f=f+9216|0))/9|0)-1024<<2)|0,(0|(f=(0|f)%9|0))<8)for(p=10;p=10*p|0,(0|f)<7;)f=f+1|0;else p=10;if((f=(y+4|0)==(0|n))&0==(0|(g=((m=0|l[y>>2])>>>0)%(p>>>0)|0)))f=y;else if(_=0==(1&((m>>>0)/(p>>>0)|0)|0)?9007199254740992:9007199254740994,e=g>>>0<(S=(0|p)/2|0)>>>0?.5:f&(0|g)==(0|S)?1:1.5,k&&(e=(S=45==(0|r[I>>0]))?-e:e,_=S?-_:_),f=m-g|0,l[y>>2]=f,_+e!=_){if(S=f+p|0,l[y>>2]=S,S>>>0>999999999)for(d=y;f=d+-4|0,l[d>>2]=0,f>>>0<c>>>0&&(l[(c=c+-4|0)>>2]=0),S=1+(0|l[f>>2])|0,l[f>>2]=S,S>>>0>999999999;)d=f;else f=y;if(d=9*(E-c>>2)|0,(m=0|l[c>>2])>>>0>=10){p=10;do{p=10*p|0,d=d+1|0}while(m>>>0>=p>>>0)}}else f=y;f=n>>>0>(f=f+4|0)>>>0?f:n,S=c}else f=n,S=c;for(A=f;;){if(A>>>0<=S>>>0){v=0;break}if(0|l[(c=A+-4|0)>>2]){v=1;break}A=c}n=0-d|0;do{if(b){if((0|(c=u+(1&(1^x))|0))>(0|d)&(0|d)>-5?(p=s+-1|0,u=c+-1-d|0):(p=s+-2|0,u=c+-1|0),!(c=8&a)){if(v&&0!=(0|(T=0|l[A+-4>>2])))if((T>>>0)%10|0)f=0;else{f=0,c=10;do{c=10*c|0,f=f+1|0}while(!(0|(T>>>0)%(c>>>0)))}else f=9;if(c=(9*(A-E>>2)|0)-9|0,102==(32|p)){u=(0|u)<(0|(y=(0|(y=c-f|0))>0?y:0))?u:y,y=0;break}u=(0|u)<(0|(y=(0|(y=c+d-f|0))>0?y:0))?u:y,y=0;break}y=c}else p=s,y=8&a}while(0);if(m=0!=(0|(b=u|y))&1,g=102==(32|p))x=0,c=(0|d)>0?d:0;else{if(((f=B)-(c=0|Kn(c=(0|d)<0?n:d,((0|c)<0)<<31>>31,B))|0)<2)do{r[(c=c+-1|0)>>0]=48}while((f-c|0)<2);r[c+-1>>0]=43+(d>>31&2),r[(c=c+-2|0)>>0]=p,x=c,c=f-c|0}if(tr(t,32,i,c=k+1+u+m+c|0,a),Yn(t,I,k),tr(t,48,i,c,65536^a),g){m=y=R+9|0,g=R+8|0,f=p=S>>>0>P>>>0?P:S;do{if(d=0|Kn(0|l[f>>2],0,y),(0|f)==(0|p))(0|d)==(0|y)&&(r[g>>0]=48,d=g);else if(d>>>0>R>>>0){kr(0|R,48,d-L|0);do{d=d+-1|0}while(d>>>0>R>>>0)}Yn(t,d,m-d|0),f=f+4|0}while(f>>>0<=P>>>0);if(0|b&&Yn(t,22841,1),f>>>0<A>>>0&(0|u)>0)for(;;){if((d=0|Kn(0|l[f>>2],0,y))>>>0>R>>>0){kr(0|R,48,d-L|0);do{d=d+-1|0}while(d>>>0>R>>>0)}if(Yn(t,d,(0|u)<9?u:9),d=u+-9|0,!((f=f+4|0)>>>0<A>>>0&(0|u)>9)){u=d;break}u=d}tr(t,48,u+9|0,9,0)}else{if(b=v?A:S+4|0,(0|u)>-1){y=0==(0|y),n=v=R+9|0,m=0-L|0,g=R+8|0,p=S;do{(0|(d=0|Kn(0|l[p>>2],0,v)))==(0|v)&&(r[g>>0]=48,d=g);do{if((0|p)==(0|S)){if(f=d+1|0,Yn(t,d,1),y&(0|u)<1){d=f;break}Yn(t,22841,1),d=f}else{if(d>>>0<=R>>>0)break;kr(0|R,48,d+m|0);do{d=d+-1|0}while(d>>>0>R>>>0)}}while(0);Yn(t,d,(0|u)>(0|(L=n-d|0))?L:u),u=u-L|0,p=p+4|0}while(p>>>0<b>>>0&(0|u)>-1)}tr(t,48,u+18|0,18,0),Yn(t,x,B-x|0)}tr(t,32,i,c,8192^a)}}while(0);return w=o,0|((0|c)<(0|i)?i:c)}function nr(t){var e;return t=+t,_[v>>3]=t,e=0|l[v>>2],M=0|l[v+4>>2],0|e}function rr(t,e){return+ +function t(e,i){e=+e,i|=0;var n=0,r=0,a=0;switch(_[v>>3]=e,n=0|l[v>>2],r=0|l[v+4>>2],2047&(a=0|Er(0|n,0|r,52))){case 0:0!=e?(e=+t(0x10000000000000000*e,i),n=(0|l[i>>2])-64|0):n=0,l[i>>2]=n;break;case 2047:break;default:l[i>>2]=(2047&a)-1022,l[v>>2]=n,l[v+4>>2]=-2146435073&r|1071644672,e=+_[v>>3]}return+e}(t=+t,e|=0)}function ar(t,e,i){t|=0,e|=0;do{if(t){if(e>>>0<128){r[t>>0]=e,t=1;break}if(!(0|l[l[745]>>2])){if(57216==(-128&e|0)){r[t>>0]=e,t=1;break}l[(t=25296)>>2]=84,t=-1;break}if(e>>>0<2048){r[t>>0]=e>>>6|192,r[t+1>>0]=63&e|128,t=2;break}if(e>>>0<55296|57344==(-8192&e|0)){r[t>>0]=e>>>12|224,r[t+1>>0]=e>>>6&63|128,r[t+2>>0]=63&e|128,t=3;break}if((e+-65536|0)>>>0<1048576){r[t>>0]=e>>>18|240,r[t+1>>0]=e>>>12&63|128,r[t+2>>0]=e>>>6&63|128,r[t+3>>0]=63&e|128,t=4;break}l[(t=25296)>>2]=84,t=-1;break}t=1}while(0);return 0|t}function sr(t,e){t|=0,e|=0;var i=0,n=0;for(n=0;;){if((0|h[22843+n>>0])==(0|t)){t=2;break}if(87==(0|(i=n+1|0))){i=22931,n=87,t=5;break}n=i}if(2==(0|t)&&(n?(i=22931,t=5):i=22931),5==(0|t))for(;;){do{t=i,i=i+1|0}while(0!=(0|r[t>>0]));if(!(n=n+-1|0))break;t=5}return 0|function(t,e){return 0|function(t,e){return t|=0,0|(0|(e=(e|=0)?0|Ln(0|l[e>>2],0|l[e+4>>2],t):0)?e:t)}(t|=0,e|=0)}(i,0|l[e+20>>2])}function or(t,e,i){var n,r;return t|=0,e|=0,1==(0|(i|=0))&&(e=e-(0|l[t+8>>2])+(0|l[t+4>>2])|0),r=t+28|0,(0|l[(n=t+20|0)>>2])>>>0>(0|l[r>>2])>>>0&&(qr[63&l[t+36>>2]](t,0,0),0==(0|l[n>>2]))?e=-1:(l[t+16>>2]=0,l[r>>2]=0,l[n>>2]=0,(0|qr[63&l[t+40>>2]](t,e,i))<0?e=-1:(l[t+8>>2]=0,l[t+4>>2]=0,l[t>>2]=-17&l[t>>2],e=0)),0|e}function lr(t,e,i,n){t|=0,e|=0,i|=0,n|=0;var a,s,o=0,c=0,h=0,u=0,d=0;s=w,w=w+128|0,o=s+124|0,h=3036,a=(c=d=s)+124|0;do{l[c>>2]=l[h>>2],c=c+4|0,h=h+4|0}while((0|c)<(0|a));return(e+-1|0)>>>0>2147483646?e?(l[(e=25296)>>2]=75,e=-1):(t=o,e=1,u=4):u=4,4==(0|u)&&(u=e>>>0>(u=-2-t|0)>>>0?u:e,l[d+48>>2]=u,l[(o=d+20|0)>>2]=t,l[d+44>>2]=t,e=t+u|0,l[(t=d+16|0)>>2]=e,l[d+28>>2]=e,e=0|jn(d,i,n),u&&(d=0|l[o>>2],r[d+(((0|d)==(0|l[t>>2]))<<31>>31)>>0]=0)),w=s,0|e}function cr(t,e){return hr(t|=0,e|=0),0|t}function hr(t,e){t|=0;var i=0,n=0;i=e|=0;t:do{if(3&(i^t))n=8;else{if(3&i)do{if(i=0|r[e>>0],r[t>>0]=i,!(i<<24>>24))break t;e=e+1|0,t=t+1|0}while(0!=(3&e|0));if(!((-2139062144&(i=0|l[e>>2])^-2139062144)&i+-16843009))for(n=t;e=e+4|0,t=n+4|0,l[n>>2]=i,!((-2139062144&(i=0|l[e>>2])^-2139062144)&i+-16843009|0);)n=t;n=8}}while(0);if(8==(0|n)&&(n=0|r[e>>0],r[t>>0]=n,n<<24>>24))do{t=t+1|0,n=0|r[(e=e+1|0)>>0],r[t>>0]=n}while(n<<24>>24!=0);return 0|t}function ur(t,e,i){var n,r;return t|=0,e|=0,i|=0,n=w,w=w+16|0,l[(r=n)>>2]=i,i=0|function(t,e,i){return 0|lr(t|=0,2147483647,e|=0,i|=0)}(t,e,r),w=n,0|i}function dr(t,e){return+ +function(t,e){t=+t;var i=0,n=0;return(0|(e|=0))<=1023?(0|e)<-1022&&(t*=2.2250738585072014e-308,i=e+2044|0,t=(n=(0|e)<-2044)?2.2250738585072014e-308*t:t,e=n?(0|i)>-1022?i:-1022:e+1022|0):(t*=8.98846567431158e307,n=e+-2046|0,t=(i=(0|e)>2046)?8.98846567431158e307*t:t,e=i?(0|n)<1023?n:1023:e+-1023|0),i=0|Tr(e+1023|0,0,52),n=M,l[v>>2]=i,l[v+4>>2]=n,+t*+_[v>>3]}(t=+t,e|=0)}function fr(t){return 0|~~+Br(+(t=+t))}function pr(t,e,i,n){t|=0,n|=0;var a,s,o=0,c=0,h=0,u=0,d=0;a=0|C(i|=0,e|=0),i=0==(0|e)?0:i,u=(0|l[n+76>>2])>-1?0|Cn():0,c=0|r[(o=n+74|0)>>0],r[o>>0]=c+255|c,c=0|l[(o=n+4|0)>>2],h=(s=(0|l[n+8>>2])-c|0)>>>0<a>>>0?s:a,(0|s)>0?(Cr(0|t,0|c,0|h),l[o>>2]=c+h,o=a-h|0,t=t+h|0):o=a;t:do{if(o){for(h=n+32|0;!(0|Un(n)||(1+(c=0|qr[63&l[h>>2]](n,t,o))|0)>>>0<2);){if(!(o=o-c|0)){d=13;break t}t=t+c|0}0|u&&In(),i=((a-o|0)>>>0)/(e>>>0)|0}else d=13}while(0);return 13==(0|d)&&u&&In(),0|i}function mr(t,e){t|=0;var i=0,n=0,a=0,s=0,o=0,c=0,h=0;(0|l[76+(e|=0)>>2])>=0&&0!=(0|Cn())?(n=255&t,(0|(i=255&t))!=(0|r[e+75>>0])&&(c=0|l[(o=e+20|0)>>2])>>>0<(0|l[e+16>>2])>>>0?(l[o>>2]=c+1,r[c>>0]=n):i=0|kn(e,t),In()):h=3;do{if(3==(0|h)){if(n=255&t,(0|(i=255&t))!=(0|r[e+75>>0])&&(s=0|l[(a=e+20|0)>>2])>>>0<(0|l[e+16>>2])>>>0){l[a>>2]=s+1,r[s>>0]=n;break}i=0|kn(e,t)}}while(0);return 0|i}function gr(t){t|=0;var e,i=0,n=0,a=0;e=0|l[665],a=(0|l[e+76>>2])>-1?0|Cn():0;do{if((0|Sn(t,e))<0)t=-1;else{if(10!=(0|r[e+75>>0])&&(n=0|l[(i=e+20|0)>>2])>>>0<(0|l[e+16>>2])>>>0){l[i>>2]=n+1,r[n>>0]=10,t=0;break}t=(0|kn(e,10))>>31}}while(0);return 0|a&&In(),0|t}function _r(t){var e=0;return e=128&l[(t|=0)>>2]&&(0|l[t+20>>2])>>>0>(0|l[t+28>>2])>>>0?2:1,(0|(e=0|qr[63&l[t+40>>2]](t,0,e)))>=0&&(e=e-(0|l[t+8>>2])+(0|l[t+4>>2])+(0|l[t+20>>2])-(0|l[t+28>>2])|0),0|e}function yr(t,e,i,n){var r,a;return e|=0,n|=0,i=0|function(t,e){var i,n,r,a=0;return t=((i=0|C(a=65535&(e|=0),r=65535&(t|=0)))>>>16)+(0|C(a,n=t>>>16))|0,e=0|C(a=e>>>16,r),0|(M=(t>>>16)+(0|C(a,n))+(((65535&t)+e|0)>>>16)|0,t+e<<16|65535&i|0)}(r=t|=0,a=i|=0),t=M,0|(M=(0|C(e,a))+(0|C(n,r))+t|0&t,0|i)}function br(t,e,i,n){return 0|(M=(e|=0)+(n|=0)+((i=(t|=0)+(i|=0)>>>0)>>>0<t>>>0|0)>>>0,0|i)}function vr(t,e,i,n){return 0|(M=n=(e|=0)-(n|=0)-((i|=0)>>>0>(t|=0)>>>0|0)>>>0,t-i>>>0|0)}function wr(t){var e=0;return(0|(e=0|r[x+(255&(t|=0))>>0]))<8?0|e:(0|(e=0|r[x+(t>>8&255)>>0]))<8?e+8|0:(0|(e=0|r[x+(t>>16&255)>>0]))<8?e+16|0:24+(0|r[x+(t>>>24)>>0])|0}function xr(t,e,i,n,r){r|=0;var a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0;if(u=t|=0,s=i|=0,o=f=n|=0,!(h=c=e|=0))return a=0!=(0|r),o?a?(l[r>>2]=0|t,l[r+4>>2]=0&e,0|(M=f=0,r=0)):0|(M=f=0,r=0):(a&&(l[r>>2]=(u>>>0)%(s>>>0),l[r+4>>2]=0),0|(M=f=0,r=(u>>>0)/(s>>>0)>>>0));a=0==(0|o);do{if(s){if(!a){if((a=(0|k(0|o))-(0|k(0|h))|0)>>>0<=31){s=d=a+1|0,t=u>>>(d>>>0)&(e=a-31>>31)|h<<(o=31-a|0),e&=h>>>(d>>>0),a=0,o=u<<o;break}return r?(l[r>>2]=0|t,l[r+4>>2]=c|0&e,0|(M=f=0,r=0)):0|(M=f=0,r=0)}if((a=s-1|0)&s|0){s=o=33+(0|k(0|s))-(0|k(0|h))|0,t=(d=32-o|0)-1>>31&h>>>((p=o-32|0)>>>0)|(h<<d|u>>>(o>>>0))&(e=p>>31),e&=h>>>(o>>>0),a=u<<(m=64-o|0)&(c=d>>31),o=(h<<m|u>>>(p>>>0))&c|u<<d&o-33>>31;break}return 0|r&&(l[r>>2]=a&u,l[r+4>>2]=0),1==(0|s)?0|(M=p=c|0&e,m=0|t):(m=0|wr(0|s),0|(M=p=h>>>(m>>>0)|0,m=h<<32-m|u>>>(m>>>0)|0))}if(a)return 0|r&&(l[r>>2]=(h>>>0)%(s>>>0),l[r+4>>2]=0),0|(M=p=0,m=(h>>>0)/(s>>>0)>>>0);if(!u)return 0|r&&(l[r>>2]=0,l[r+4>>2]=(h>>>0)%(o>>>0)),0|(M=p=0,m=(h>>>0)/(o>>>0)>>>0);if(!((a=o-1|0)&o))return 0|r&&(l[r>>2]=0|t,l[r+4>>2]=a&h|0&e),p=0,m=h>>>((0|wr(0|o))>>>0),0|(M=p,m);if((a=(0|k(0|o))-(0|k(0|h))|0)>>>0<=30){s=e=a+1|0,t=h<<(o=31-a|0)|u>>>(e>>>0),e=h>>>(e>>>0),a=0,o=u<<o;break}return r?(l[r>>2]=0|t,l[r+4>>2]=c|0&e,0|(M=p=0,m=0)):0|(M=p=0,m=0)}while(0);if(s){h=0|br(0|(d=0|i),0|(u=f|0&n),-1,-1),i=M,c=o,o=0;do{n=c,c=a>>>31|c<<1,a=o|a<<1,vr(0|h,0|i,0|(n=t<<1|n>>>31|0),0|(f=t>>>31|e<<1|0)),o=1&(p=(m=M)>>31|((0|m)<0?-1:0)<<1),t=0|vr(0|n,0|f,p&d|0,(((0|m)<0?-1:0)>>31|((0|m)<0?-1:0)<<1)&u|0),e=M,s=s-1|0}while(0!=(0|s));h=c,c=0}else h=o,c=0,o=0;return s=0,0|r&&(l[r>>2]=t,l[r+4>>2]=e),0|(M=p=(0|a)>>>31|(h|s)<<1|0&(s<<1|a>>>31)|c,m=-2&(a<<1|0)|o)}function Ar(t,e,i,n){return 0|xr(t|=0,e|=0,i|=0,n|=0,0)}function Mr(t,e,i,n){var r,a;return a=w,w=w+16|0,xr(t|=0,e|=0,i|=0,n|=0,r=0|a),w=a,0|(M=0|l[r+4>>2],0|l[r>>2])}function Sr(t,e,i){return t|=0,e|=0,(0|(i|=0))<32?(M=e>>i,t>>>i|(e&(1<<i)-1)<<32-i):(M=(0|e)<0?-1:0,e>>i-32|0)}function Er(t,e,i){return t|=0,e|=0,(0|(i|=0))<32?(M=e>>>i,t>>>i|(e&(1<<i)-1)<<32-i):(M=0,e>>>i-32|0)}function Tr(t,e,i){return t|=0,e|=0,(0|(i|=0))<32?(M=e<<i|(t&(1<<i)-1<<32-i)>>>32-i,t<<i):(M=t<<i-32,0)}function Ir(t){return(255&(t|=0))<<24|(t>>8&255)<<16|(t>>16&255)<<8|t>>>24|0}function Cr(t,e,i){t|=0,e|=0;var n,a,s=0;if((0|(i|=0))>=8192)return 0|j(0|t,0|e,0|i);if(a=0|t,n=t+i|0,(3&t)==(3&e)){for(;3&t;){if(!i)return 0|a;r[t>>0]=0|r[e>>0],t=t+1|0,e=e+1|0,i=i-1|0}for(s=(i=-4&n|0)-64|0;(0|t)<=(0|s);)l[t>>2]=l[e>>2],l[t+4>>2]=l[e+4>>2],l[t+8>>2]=l[e+8>>2],l[t+12>>2]=l[e+12>>2],l[t+16>>2]=l[e+16>>2],l[t+20>>2]=l[e+20>>2],l[t+24>>2]=l[e+24>>2],l[t+28>>2]=l[e+28>>2],l[t+32>>2]=l[e+32>>2],l[t+36>>2]=l[e+36>>2],l[t+40>>2]=l[e+40>>2],l[t+44>>2]=l[e+44>>2],l[t+48>>2]=l[e+48>>2],l[t+52>>2]=l[e+52>>2],l[t+56>>2]=l[e+56>>2],l[t+60>>2]=l[e+60>>2],t=t+64|0,e=e+64|0;for(;(0|t)<(0|i);)l[t>>2]=l[e>>2],t=t+4|0,e=e+4|0}else for(i=n-4|0;(0|t)<(0|i);)r[t>>0]=0|r[e>>0],r[t+1>>0]=0|r[e+1>>0],r[t+2>>0]=0|r[e+2>>0],r[t+3>>0]=0|r[e+3>>0],t=t+4|0,e=e+4|0;for(;(0|t)<(0|n);)r[t>>0]=0|r[e>>0],t=t+1|0,e=e+1|0;return 0|a}function kr(t,e,i){e|=0;var n,a=0,s=0,o=0;if(n=(t|=0)+(i|=0)|0,e&=255,(0|i)>=67){for(;3&t;)r[t>>0]=e,t=t+1|0;for(s=(a=-4&n|0)-64|0,o=e|e<<8|e<<16|e<<24;(0|t)<=(0|s);)l[t>>2]=o,l[t+4>>2]=o,l[t+8>>2]=o,l[t+12>>2]=o,l[t+16>>2]=o,l[t+20>>2]=o,l[t+24>>2]=o,l[t+28>>2]=o,l[t+32>>2]=o,l[t+36>>2]=o,l[t+40>>2]=o,l[t+44>>2]=o,l[t+48>>2]=o,l[t+52>>2]=o,l[t+56>>2]=o,l[t+60>>2]=o,t=t+64|0;for(;(0|t)<(0|a);)l[t>>2]=o,t=t+4|0}for(;(0|t)<(0|n);)r[t>>0]=e,t=t+1|0;return n-i|0}function Pr(t){return(t=+t)>=0?+S(t+.5):+I(t-.5)}function Br(t){return(t=+t)-+S(t)!=.5?+Pr(t):2*+Pr(t/2)}function Lr(t){var e,i;return(0|(i=15+(t|=0)&-16|0))>0&(0|(t=(e=0|l[b>>2])+i|0))<(0|e)|(0|t)<0?(R(),O(12),-1):(l[b>>2]=t,(0|t)>(0|L())&&0==(0|B())?(l[b>>2]=e,O(12),-1):0|e)}function Rr(t){return P(0),0}function Dr(t){return P(1),0}function Or(t,e){return P(2),0}function Gr(t,e,i){return P(3),0}function Fr(t,e,i,n){return P(4),0}function Nr(t,e,i,n,r){return P(5),0}function zr(t,e,i,n,r,a){return P(6),0}function Hr(t,e,i,n,r,a,s){return P(7),0}function Ur(t,e,i,n,r,a,s,o,l,c,h){return P(8),0}function Vr(t){P(9)}function Wr(t,e){P(10)}function jr(t,e,i){P(11)}function Zr(t,e,i,n){P(12)}e._llvm_ceil_f32,e._llvm_floor_f32,e._llvm_floor_f64,e._llvm_pow_f64,e.flush_NO_FILESYSTEM;var Yr=[Rr,function(t){return 0},function(t){return+ +(((14*(0|l[5588+(t|=0)>>2])|0)-14|0)>>>0)},Rr],Xr=[Dr,function(t){var e,i;return e=w,w=w+16|0,i=e,t=0|function(t){return 0|(t|=0)}(0|l[60+(t|=0)>>2]),l[i>>2]=t,t=0|xn(0|V(6,0|i)),w=e,0|t},ue,de,function(t){return 0|ue(0|l[(t|=0)>>2])},function(t){return 0|de(0|l[(t|=0)>>2])},zn,function(t){return 0},function(t){return 0|(0==(0|(t|=0))?0:(t+-1|0)>>>0<2?1:2)},Dr,Dr,Dr,Dr,Dr,Dr,Dr],Jr=[Or,function(t,e){t|=0,e|=0;var i=0;return(i=0|Ht(1,22))?(it(i,22,4),it(i+4|0,1768449138,4),it(i+8|0,0|l[t+16>>2],4),it(i+12|0,0|l[t+12>>2],4),it(i+16|0,0|l[t+20>>2],2),it(i+18|0,0|l[t+24>>2],1),it(i+19|0,0|l[t+28>>2],1),it(i+20|0,0|l[t+32>>2],1),it(i+21|0,0|l[t+36>>2],1),l[e>>2]=22,0|i):0|(i=0)},function(t,e){e|=0;var i,n=0,r=0,a=0,s=0,o=0;switch(0|l[(n=40+(t|=0)|0)>>2]){case 1:s=15;break;case 2:s=11+(0|l[t+112>>2])|0;break;default:return 0|(o=0)}if(!(o=0|Ht(1,s)))return 0|(o=0);switch(it(o,s,4),it(o+4|0,1668246642,4),it(o+8|0,0|l[n>>2],1),it(o+9|0,0|l[t+52>>2],1),it(o+10|0,0|l[t+44>>2],1),i=o+11|0,0|l[n>>2]){case 1:it(i,0|l[t+48>>2],4);break;case 2:if(0|l[(a=t+112|0)>>2])for(r=t+108|0,n=i,t=0;it(n,0|h[(0|l[r>>2])+t>>0],1),!((t=t+1|0)>>>0>=(0|l[a>>2])>>>0);)n=n+1|0}return l[e>>2]=s,0|o},function(t,e){e|=0;var i,n,r,a=0,o=0,c=0;if(!(r=0|zt(n=10+(6*(0|d[4+(0|l[(i=116+(t|=0)|0)>>2])>>1])|0)|0)))return 0|(e=0);if(it(r,n,4),it(r+4|0,1667523942,4),it(r+8|0,0|d[4+(0|l[i>>2])>>1],2),t=0|l[i>>2],0|s[t+4>>1])for(o=r+10|0,c=0,a=0;it(o,0|d[(0|l[t>>2])+(6*a|0)>>1],2),it(o+2|0,0|d[(0|l[l[i>>2]>>2])+(6*a|0)+2>>1],2),it(o+4|0,0|d[(0|l[l[i>>2]>>2])+(6*a|0)+4>>1],2),a=c+1<<16>>16,t=0|l[i>>2],!((65535&a)>=(0|d[t+4>>1]));)o=o+6|0,c=a,a&=65535;return l[e>>2]=n,0|(e=r)},function(t,e){e|=0;var i,n,r=0,a=0,s=0;if(!(s=0|Ht(1,n=8+(0|l[(i=20+(t|=0)|0)>>2])|0)))return 0|(s=0);if(it(s,n,4),it(s+4|0,1651532643,4),0|l[i>>2])for(a=t+72|0,t=0,r=s+8|0;it(r,0|l[(0|l[a>>2])+(12*t|0)+8>>2],1),!((t=t+1|0)>>>0>=(0|l[i>>2])>>>0);)r=r+1|0;return l[e>>2]=n,0|s},Or,Or,Or],qr=[Gr,function(t,e,i){e|=0,i|=0;var n,a=0;return n=w,w=w+32|0,a=n,l[36+(t|=0)>>2]=61,0==(64&l[t>>2]|0)&&(l[a>>2]=l[t+60>>2],l[a+4>>2]=21523,l[a+8>>2]=n+16,0|U(54,0|a))&&(r[t+75>>0]=-1),a=0|wn(t,e,i),w=n,0|a},function(t,e,i){var n,r,a;return t|=0,e|=0,i|=0,r=w,w=w+32|0,n=r+20|0,l[(a=r)>>2]=l[t+60>>2],l[a+4>>2]=0,l[a+8>>2]=e,l[a+12>>2]=n,l[a+16>>2]=i,(0|xn(0|G(140,0|a)))<0?(l[n>>2]=-1,t=-1):t=0|l[n>>2],w=r,0|t},function(t,e,i){var n,r;return e|=0,i|=0,Cr(0|(r=0|l[(n=20+(t|=0)|0)>>2]),0|e,0|(t=(t=(0|l[t+16>>2])-r|0)>>>0>i>>>0?i:t)),l[n>>2]=(0|l[n>>2])+t,0|i},function(t,e,i){return-1},function(t,e,i){return-1},function(t,e,i){return M=-1,-1},function(t,e,i){return 0},_e,we,function(t,e,i){return e|=0,i|=0,0|_e(0|l[(t|=0)>>2],e,i)},function(t,e,i){e|=0,i|=0;var n,r=0,a=0,s=0,o=0;if(!(0|_i(0|l[(r=8+(t|=0)|0)>>2],54,i)))return 0|(o=0);if(!(0|we(0|l[t>>2],e,i)))return 0|(o=0);if(n=0|yi(o=0|l[r>>2]),r=0|bi(o),n)for(a=r,r=1,s=0;r=r?0!=(0|qr[63&l[a>>2]](t,e,i)):0,r&=1,(0|(s=s+1|0))!=(0|n);)a=a+4|0;else r=1;return vi(o),0|(o=r)},$t,ge,function(t,e,i){e|=0,i|=0;var n,r,a=0,s=0,o=0;if(!(0|_i(0|l[(a=8+(t|=0)|0)>>2],53,i)))return 0|(i=0);if(r=0|yi(n=0|l[a>>2]),a=0|bi(n),r){for(s=1,o=0;s=s?0!=(0|qr[63&l[a>>2]](t,e,i)):0,(0|(o=o+1|0))!=(0|r);)a=a+4|0,s&=1;if(vi(n),!s)return 0|(i=0)}else vi(n);return 0|(i=0|$t(l[t>>2]))},function(t,e,i){return e|=0,i|=0,0|ge(0|l[(t|=0)>>2],e,i)},function(t,e,i){t|=0,e|=0;var n,r=0;return r=0|l[(n=4+(i|=0)|0)>>2],(i=(0|l[i>>2])+(0|l[i+8>>2])-r|0)?(Cr(0|t,0|r,0|(e=i>>>0>e>>>0?e:i)),l[n>>2]=(0|l[n>>2])+e,0|(r=e)):0|(r=-1)},function(t,e,i){t|=0,e|=0;var n,r,a=0,s=0,o=0,c=0;for(a=0|l[(c=4+(i|=0)|0)>>2],s=0|l[(n=i+8|0)>>2],r=a-(0|l[i>>2])|0,o=0==(0|s)?1:s;(o-r|0)>>>0<e>>>0;)o<<=1;if((0|o)!=(0|s)){if(!(a=0|zt(o)))return 0|(c=-1);0|(s=0|l[i>>2])&&(Cr(0|a,0|s,0|r),jt(0|l[i>>2])),l[i>>2]=a,a=a+r|0,l[c>>2]=a,l[n>>2]=o}return Cr(0|a,0|t,0|e),l[c>>2]=(0|l[c>>2])+e,0|(c=e)},function(t,e,i){t|=0,e|=0;var n,r,a=0,s=0;return s=0|l[(a=4+(i|=0)|0)>>2],n=((0|(i=(0|l[i>>2])+(0|l[i+8>>2])-s|0))<0)<<31>>31,i?(r=(0|n)>(0|e)|(0|n)==(0|e)&i>>>0>t>>>0,l[a>>2]=s+t,M=a=r?e:n,0|(s=r?t:i)):(M=a=-1,0|(s=-1))},function(t,e,i){var n;return t|=0,e|=0,n=0|l[8+(i|=0)>>2],l[i+4>>2]=(0|l[i>>2])+(0>(0|e)|0==(0|e)&n>>>0>t>>>0?t:n),1},function(t,e,i){return 0|(0|(i=0|pr(t|=0,1,e|=0,i|=0))?i:-1)},function(t,e,i){return 0|En(t|=0,1,e|=0,i|=0)},function(t,e,i){return e|=0,i=0==(0|Vn(i|=0,t|=0,1)),M=i?e:-1,0|(i?t:-1)},function(t,e,i){return 0==(0|Vn(i|=0,t|=0,0))|0},function(t,e,i){return 1},function(t,e,i){return 0==(0|l[8+(t|=0)>>2])&0!=(0|l[t+188>>2])&0!=(0|l[t+192>>2])&1|0},function(t,e,i){e|=0,i|=0;var n,a,o,c,h,u,d,f,p,m,g,_,y,b,v,x,A,S,E,T,I,C,k,P,B,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0,Z=0,Y=0,X=0,J=0;B=w,w=w+224|0,J=B+200|0,k=B+192|0,C=B+184|0,T=B+176|0,E=B+168|0,S=B+160|0,Z=B+152|0,A=B+144|0,x=B+136|0,b=B+128|0,y=B+120|0,_=B+112|0,g=B+104|0,m=B+96|0,p=B+88|0,f=B+80|0,d=B+72|0,u=B+64|0,h=B+56|0,c=B+48|0,o=B+40|0,v=B+32|0,H=B+24|0,z=B+16|0,N=B+8|0,I=B,L=B+216|0,R=B+212|0,n=B+208|0,a=B+204|0,l[(P=8+(t|=0)|0)>>2]=1;t:do{if(2==(0|lt(e,L,2,i))&&(nt(L,R,2),65359==(0|l[R>>2]))){l[P>>2]=2,F=0|br(0|(F=0|ht(e)),0|M,-2,-1),G=M,R=0|l[(X=t+196|0)>>2],l[R>>2]=F,l[R+4>>2]=G,l[(R=I)>>2]=F,l[R+4>>2]=G,mt(i,4,8053,I),R=0|l[X>>2],G=0|l[R>>2],L=0|l[(F=R+24|0)>>2],D=0|l[(O=R+32|0)>>2];do{if((L+1|0)>>>0>D>>>0){if(j=~~(+(D>>>0)+100)>>>0,l[O>>2]=j,R=0|Wt(0|l[(L=R+28|0)>>2],24*j|0)){l[L>>2]=R,L=0|l[F>>2];break}jt(0|l[L>>2]),l[L>>2]=0,l[O>>2]=0,l[F>>2]=0,mt(i,1,8090,N);break t}R=0|l[R+28>>2]}while(0);if(s[R+(24*L|0)>>1]=-177,W=0|Sr(0,0|G,32),l[(j=R+(24*L|0)+8|0)>>2]=W,l[j+4>>2]=M,l[R+(24*L|0)+16>>2]=2,l[F>>2]=L+1,2!=(0|lt(e,0|l[(j=t+16|0)>>2],2,i)))return mt(i,1,8150,H),w=B,0|(J=0);if(nt(0|l[j>>2],n,2),65424!=(0|(O=0|l[n>>2]))){W=t+20|0,D=0,R=0,L=0;e:do{if(O>>>0<65280){Y=14;break}for(G=784;!((N=0==(0|(F=0|l[G>>2])))|(0|F)==(0|O));)G=G+12|0;if(N){mt(i,2,8219,o),V=2;i:for(;;){for(;;){if(2!=(0|lt(e,0|l[j>>2],2,i))){Y=20;break e}if(nt(0|l[j>>2],I,2),(O=0|l[I>>2])>>>0>=65280){U=784;break}}for(;!(0==(0|(G=0|l[U>>2]))|(0|G)==(0|O));)U=U+12|0;if(!(l[U+4>>2]&l[P>>2])){Y=24;break e}if((0|G)>=65424){Y=99;break}switch(0|G){case 0:break;default:break i}V=V+2|0}if(99==(0|Y))switch(Y=0,0|G){case 65424:Y=26;break e}if(G=0|l[X>>2],z=(z=0|ht(e))-V|0,(1+(O=0|l[(H=G+24|0)>>2])|0)>>>0>(F=0|l[(N=G+32|0)>>2])>>>0){if(F=~~(+(F>>>0)+100)>>>0,l[N>>2]=F,!(G=0|Wt(0|l[(O=G+28|0)>>2],24*F|0))){Y=31;break}l[O>>2]=G,O=0|l[H>>2]}else G=0|l[G+28>>2];if(s[G+(24*O|0)>>1]=0,l[(N=G+(24*O|0)+8|0)>>2]=z,l[N+4>>2]=((0|z)<0)<<31>>31,l[G+(24*O|0)+16>>2]=V,l[H>>2]=O+1,G=0|l[U>>2],l[n>>2]=G,65424==(0|G))break;for(O=784;;){if(0==(0|(F=0|l[O>>2]))|(0|F)==(0|G)){N=O;break}O=O+12|0}}else N=G;if(L=65361==(0|F)?1:L,R=65362==(0|F)?1:R,D=65372==(0|F)?1:D,!(l[N+4>>2]&l[P>>2])){Y=37;break}if(2!=(0|lt(e,0|l[j>>2],2,i))){Y=39;break}if(nt(0|l[j>>2],a,2),G=(0|l[a>>2])-2|0,l[a>>2]=G,O=0|l[j>>2],G>>>0>(0|l[W>>2])>>>0){if(!(O=0|Wt(O,G))){Y=42;break}l[j>>2]=O,G=0|l[a>>2],l[W>>2]=G}if((0|(O=0|lt(e,O,G,i)))!=(0|l[a>>2])){Y=45;break}if(!(0|Qr[63&l[N+8>>2]](t,0|l[j>>2],O,i))){Y=47;break}if(F=0|l[X>>2],z=0|l[N>>2],H=0|ht(e),H=-4-(U=0|l[a>>2])+H|0,U=U+4|0,(1+(O=0|l[(V=F+24|0)>>2])|0)>>>0>(G=0|l[(N=F+32|0)>>2])>>>0){if(G=~~(+(G>>>0)+100)>>>0,l[N>>2]=G,!(G=0|Wt(0|l[(O=F+28|0)>>2],24*G|0))){Y=52;break}l[O>>2]=G,O=0|l[V>>2]}else G=0|l[F+28>>2];if(s[G+(24*O|0)>>1]=z,l[(z=G+(24*O|0)+8|0)>>2]=H,l[z+4>>2]=((0|H)<0)<<31>>31,l[G+(24*O|0)+16>>2]=U,l[V>>2]=O+1,2!=(0|lt(e,0|l[j>>2],2,i))){Y=54;break}nt(0|l[j>>2],n,2),O=0|l[n>>2]}while(65424!=(0|O));switch(0|Y){case 14:return l[v>>2]=O,mt(i,1,8168,v),w=B,0|(J=0);case 20:mt(i,1,8150,c),Y=33;break;case 24:mt(i,1,8235,h),Y=33;break;case 26:l[n>>2]=65424;break;case 31:jt(0|l[O>>2]),l[O>>2]=0,l[N>>2]=0,l[H>>2]=0,mt(i,1,8090,u),Y=33;break;case 37:return mt(i,1,8235,f),w=B,0|(J=0);case 39:return mt(i,1,8150,p),w=B,0|(J=0);case 42:return jt(0|l[j>>2]),l[j>>2]=0,l[W>>2]=0,mt(i,1,8333,m),w=B,0|(J=0);case 45:return mt(i,1,8150,g),w=B,0|(J=0);case 47:return mt(i,1,8367,_),w=B,0|(J=0);case 52:return jt(0|l[O>>2]),l[O>>2]=0,l[N>>2]=0,l[V>>2]=0,mt(i,1,8090,y),w=B,0|(J=0);case 54:return mt(i,1,8150,b),w=B,0|(J=0)}if(33==(0|Y))return mt(i,1,8278,d),w=B,0|(J=0);if(0|L){if(!R)return mt(i,1,8472,A),w=B,0|(J=0);if(!D)return mt(i,1,8518,Z),w=B,0|(J=0);e:do{if(1&r[t+184>>0]){L=0|l[(W=t+120|0)>>2];do{if(L){H=t+124|0,N=0,R=0,z=0;i:for(;;){if(D=0|l[H>>2],G=0|l[D+(z<<3)>>2]){if(F=(D=0|l[D+(z<<3)+4>>2])-N|0,D=(O=N>>>0<D>>>0)?0:N-D|0,!(0==(0|F)|1^O)){for(L=O?G+N|0:G;;){if(F>>>0<4){Y=72;break i}if(nt(L,I,4),L=L+4|0,Z=F+-4|0,R=(O=0|l[I>>2])+R|0,D=(G=Z>>>0<O>>>0)?O-Z|0:D,!(F=G?0:Z-O|0))break;L=G?L:L+O|0}L=0|l[W>>2]}}else D=N;if((z=z+1|0)>>>0>=L>>>0)break;N=D}if(72==(0|Y)){mt(i,1,8564,S);break}D?mt(i,1,8595,E):Y=76}else R=0,Y=76}while(0);i:do{if(76==(0|Y)){if(D=0|zt(R),l[(H=t+144|0)>>2]=D,!D){mt(i,1,8618,T);break}l[(U=t+132|0)>>2]=R,O=0|l[W>>2],V=t+124|0;do{if(O){z=0,G=0,N=0,R=L=0|l[V>>2];n:for(;;){if(F=0|l[R+(z<<3)>>2]){R=0|l[R+(z<<3)+4>>2],L=(0|l[H>>2])+G|0;r:do{if(N>>>0<R>>>0){if(Cr(0|L,0|F,0|N),L=G+N|0,!(D=R-N|0)){D=0;break}for(R=F+N|0;;){if(D>>>0<4){Y=91;break n}if(nt(R,I,4),G=R+4|0,O=D+-4|0,R=0|l[I>>2],D=(0|l[H>>2])+L|0,O>>>0<R>>>0)break;if(Cr(0|D,0|G,0|R),L=(R=0|l[I>>2])+L|0,!(D=O-R|0)){D=0;break r}R=G+R|0}Cr(0|D,0|G,0|O),D=(0|l[I>>2])-O|0,L=O+L|0}else Cr(0|L,0|F,0|R),D=N-R|0,L=R+G|0}while(0);jt(0|l[(0|l[V>>2])+(z<<3)>>2]),R=0|l[V>>2],l[R+(z<<3)>>2]=0,l[R+(z<<3)+4>>2]=0,G=L,O=0|l[W>>2],L=R}else D=N;if((z=z+1|0)>>>0>=O>>>0){Y=93;break}N=D}if(91==(0|Y)){mt(i,1,8564,C);break i}if(93==(0|Y)){D=0|l[H>>2],R=0|l[U>>2];break}}else L=0|l[V>>2]}while(0);l[t+128>>2]=D,l[t+152>>2]=R,l[W>>2]=0,jt(L),l[V>>2]=0;break e}}while(0);return mt(i,1,8656,k),w=B,0|(J=0)}}while(0);return mt(i,4,8682,J),i=0|ht(e),J=8+(0|l[X>>2])|0,l[J>>2]=i+-2,l[J+4>>2]=0,l[P>>2]=8,w=B,0|(J=1)}}return mt(i,1,8426,x),w=B,0|(J=0)}}while(0);return mt(i,1,8126,z),w=B,0|(J=0)},function(t,e,i){e|=0,i|=0;var n,a,s,o,c,h,u,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0;u=w,w=w+16|0,h=u,o=0|l[80+(t|=0)>>2],c=t+88|0,n=0|C(0|l[t+112>>2],0|l[t+116>>2]),a=1080*(A=0|l[o+16>>2])|0,s=0|l[t+12>>2],A=0|C(A<<2,A);t:do{if(0|n){M=s+5604|0,S=s+5620|0,E=s+5612|0,T=s+5616|0,I=s+5632|0,k=s+5624|0,P=s+5584|0,v=0|l[t+164>>2],x=0;e:for(;;){if(B=0|l[(g=v+5584|0)>>2],Cr(0|v,0|s,5640),r[(e=v+5636|0)>>0]=-4&r[e>>0],l[v+5168>>2]=0,l[(e=v+5604|0)>>2]=0,l[(_=v+5620|0)>>2]=0,l[(L=v+5612|0)>>2]=0,l[(y=v+5632|0)>>2]=0,l[(b=v+5624|0)>>2]=0,l[g>>2]=B,0|l[M>>2]){if(d=0|zt(A),l[e>>2]=d,!d){e=0,d=25;break}Cr(0|d,0|l[M>>2],0|A)}if(d=0|zt(e=20*(0|l[S>>2])|0),l[L>>2]=d,!d){e=0,d=25;break}if(Cr(0|d,0|l[E>>2],0|e),0|(e=0|l[T>>2]))for(p=0|l[L>>2],m=0|l[E>>2],g=0;;){if(0|l[(f=m+12|0)>>2]){if(d=0|zt(0|l[(e=m+16|0)>>2]),l[p+12>>2]=d,!d){e=0,d=25;break e}Cr(0|d,0|l[f>>2],0|l[e>>2]),e=0|l[T>>2]}if(l[_>>2]=1+(0|l[_>>2]),(g=g+1|0)>>>0>=e>>>0)break;p=p+20|0,m=m+20|0}if(d=0|zt(e=20*(0|l[I>>2])|0),l[b>>2]=d,!d){e=0,d=25;break}if(Cr(0|d,0|l[k>>2],0|e),l[y>>2]=l[I>>2],0|(m=0|l[I>>2]))for(p=0|l[k>>2],d=0|l[b>>2],f=0;0|(e=0|l[p+8>>2])&&(l[d+8>>2]=(0|l[L>>2])+(20*((e-(0|l[E>>2])|0)/20|0)|0)),0|(e=0|l[p+12>>2])&&(l[d+12>>2]=(0|l[L>>2])+(20*((e-(0|l[E>>2])|0)/20|0)|0)),!((f=f+1|0)>>>0>=m>>>0);)p=p+20|0,d=d+20|0;if(Cr(0|B,0|l[P>>2],0|a),(x=x+1|0)>>>0>=n>>>0)break t;v=v+5640|0}if(25==(0|d))return w=u,0|e}}while(0);return d=0|Xe(1),l[(e=t+204|0)>>2]=d,d?0|Ke(d,o,c)?(w=u,0|(i=1)):($e(0|l[e>>2]),l[e>>2]=0,mt(i,1,8019,h),w=u,0|(i=0)):(w=u,0|(i=0))},function(t,e,i){t|=0,e|=0,i|=0;var n,r,a,s,o,c,h,u,d,f,p,m,g,_,y,b,v=0,x=0,A=0,S=0,E=0,T=0,I=0,k=0;if(b=w,w=w+80|0,p=b+32|0,m=b+24|0,k=b+16|0,I=b+8|0,y=b+60|0,c=b+56|0,h=b+52|0,u=b+48|0,d=b+44|0,f=b+40|0,n=b+36|0,l[(o=b+64|0)>>2]=1,!(v=0|zt(1e3)))return mt(i,1,14664,b),w=b,0|(k=0);for(g=t+116|0,_=t+112|0,r=t+204|0,a=t+84|0,s=t+8|0,T=0,x=1e3;;){if(!(0|ne(t,y,c,h,u,d,f,n,o,e,i))){x=5;break}if(!(0|l[o>>2])){x=17;break}if((E=0|l[c>>2])>>>0>x>>>0){if(!(x=0|Wt(v,E))){x=9;break}v=x,S=E}else S=x;if(!(0|re(t,A=0|l[y>>2],v,E,e,i))){x=11;break}if(x=A+1|0,E=0|C(0|l[_>>2],0|l[g>>2]),l[m>>2]=x,l[m+4>>2]=E,mt(i,4,14768,m),E=0|l[r>>2],!(0|pe(0|l[20+(0|l[l[E+20>>2]>>2])>>2],0|l[E+24>>2],v,0|l[24+(0|l[a>>2])>>2]))){x=13;break}if(l[p>>2]=x,mt(i,4,14798,p),0==(0|(E=0|ut(e)))&0==(0|M)&&64==(0|l[s>>2])){x=17;break}if((0|(T=T+1|0))==(0|C(0|l[_>>2],0|l[g>>2]))){x=17;break}x=S}return 5==(0|x)?(jt(v),w=b,0|(k=0)):9==(0|x)?(jt(v),k=0|C(0|l[_>>2],0|l[g>>2]),l[I>>2]=1+(0|l[y>>2]),l[I+4>>2]=k,mt(i,1,14699,I),w=b,0|(k=0)):11==(0|x)?(jt(v),I=0|C(0|l[_>>2],0|l[g>>2]),l[k>>2]=A+1,l[k+4>>2]=I,mt(i,1,14739,k),w=b,0|(k=0)):13==(0|x)?(jt(v),w=b,0|(k=0)):17==(0|x)?(jt(v),w=b,0|(k=1)):0},function(t,e,i){t|=0,e|=0,i|=0;var n,r,a,s,o,c,h,u,d,f,p,m,g,_,y,b=0,v=0,x=0,A=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0;if(y=w,w=w+96|0,m=y+56|0,p=y+48|0,f=y+40|0,_=y+32|0,g=y+24|0,E=y+16|0,S=y+8|0,s=y+88|0,o=y+84|0,c=y+80|0,h=y+76|0,u=y+72|0,d=y+68|0,n=y+64|0,l[(a=y+92|0)>>2]=1,!(b=0|zt(1e3)))return mt(i,1,14941,y),w=y,0|(B=0);v=0|l[(r=t+196|0)>>2],x=0|l[v+40>>2];t:do{if(!x){x=0|C(0|l[t+116>>2],0|l[t+112>>2]),l[v+36>>2]=x,x=0|Ht(x,40),v=0|l[r>>2],l[v+40>>2]=x;e:do{if(0|x){if(0|l[v+36>>2]){A=0;do{if(l[x+(40*A|0)+28>>2]=100,l[x+(40*A|0)+20>>2]=0,P=0|Ht(100,24),v=0|l[r>>2],x=0|l[v+40>>2],l[x+(40*A|0)+24>>2]=P,A=A+1|0,!P)break e}while(A>>>0<(0|l[v+36>>2])>>>0)}if(v=0|l[t+60>>2],x){A=v,B=11;break t}break t}}while(0);return jt(b),w=y,0|(B=0)}A=0|l[t+60>>2],B=11}while(0);if(11==(0|B))if(0|l[x+16>>2]){if(0|l[x+(40*A|0)+4>>2]){if(P=0|l[x+(40*A|0)+16>>2],!(0|et(e,P=0|br(0|l[P>>2],0|l[P+4>>2],2,0),M,i)))return mt(i,1,14979,E),jt(b),w=y,0|(B=0)}else if(!(0|et(e,P=0|br(0|l[(P=t+64|0)>>2],0|l[P+4>>2],2,0),M,i)))return mt(i,1,14979,S),jt(b),w=y,0|(B=0);256==(0|l[(v=t+8|0)>>2])?(l[v>>2]=8,v=A):v=A}else v=A;t:do{if(0|ne(t,s,o,c,h,u,d,n,a,e,i)){for(E=t+116|0,T=t+112|0,I=t+204|0,k=t+84|0,P=v+1|0,x=1e3;0|l[a>>2];){if((A=0|l[o>>2])>>>0>x>>>0){if(!(x=0|Wt(b,A))){B=25;break}b=x,x=A}if(!(0|re(t,S=0|l[s>>2],b,A,e,i))){B=27;break}if(A=S+1|0,L=0|C(0|l[T>>2],0|l[E>>2]),l[_>>2]=A,l[_+4>>2]=L,mt(i,4,14768,_),L=0|l[I>>2],!(0|pe(0|l[20+(0|l[l[L+20>>2]>>2])>>2],0|l[L+24>>2],b,0|l[24+(0|l[k>>2])>>2]))){B=29;break}if(l[f>>2]=A,mt(i,4,14798,f),(0|S)==(0|v)){B=31;break}if(l[m>>2]=A,l[m+4>>2]=P,mt(i,2,15007,m),!(0|ne(t,s,o,c,h,u,d,n,a,e,i)))break t}return 25==(0|B)?(jt(b),L=0|C(0|l[T>>2],0|l[E>>2]),l[g>>2]=1+(0|l[s>>2]),l[g+4>>2]=L,mt(i,1,14699,g),w=y,0|(L=0)):27==(0|B)?(jt(b),w=y,0|(L=0)):29==(0|B)?(jt(b),w=y,0|(L=0)):31!=(0|B)||(L=8+(0|l[r>>2])|0,0|et(e,L=0|br(0|l[L>>2],0|l[L+4>>2],2,0),M,i))?(jt(b),w=y,0|(L=1)):(mt(i,1,14979,p),jt(b),w=y,0|(L=0))}}while(0);return jt(b),w=y,0|(L=0)},function(t,e,i){return e|=0,i|=0,it(0|l[(t=44+(t|=0)|0)>>2],65497,2),2!=(0|ct(e,0|l[t>>2],2,i))?0|(i=0):0|(i=0!=(0|function(t,e){e|=0;var i,n,r,a,s=0,o=0,c=0,h=0,u=0;a=w,w=w+16|0,r=a,s=0|l[(i=32+(t|=0)|0)>>2],l[(u=t+36|0)>>2]=s,o=0|l[(n=t+48|0)>>2];do{if(o){for(c=t+20|0;-1!=(0|(o=0|qr[63&l[c>>2]](s,o,0|l[t>>2])));)if(s=(0|l[u>>2])+o|0,l[u>>2]=s,o=(0|l[n>>2])-o|0,l[n>>2]=o,!o){h=6;break}if(6==(0|h)){s=0|l[i>>2];break}return l[(u=t+68|0)>>2]=8|l[u>>2],mt(e,4,4360,r),w=a,0|(u=0)}}while(0);return l[u>>2]=s,w=a,0|(u=1)}(e,i))&1)},function(t,e,i){e|=0,i|=0;var n,r,a,s,o=0;return a=5*(0|l[32+(t|=0)>>2])|0,o=0|br(0|l[(o=t+16|0)>>2],0|l[o+4>>2],6,0),s=M,n=0|ht(e),r=M,0|ft(e,o,s,i)?(0|ct(e,0|l[t+24>>2],a,i))!=(0|a)?0|(o=0):0|(o=0!=(0|ft(e,n,r,i))&1):0|(o=0)},function(t,e,i){return e|=0,i|=0,(t=0|l[196+(t|=0)>>2])?(i=0|vr(0|(e=0|ht(e)),0|M,0|l[(i=t)>>2],0|l[i+4>>2]),l[(e=t+16|0)>>2]=i,l[e+4>>2]=M,1):1},function(t,e,i){return e|=0,i|=0,$e(0|l[(e=204+(t|=0)|0)>>2]),l[e>>2]=0,0|(i=0|l[(e=t+24|0)>>2])&&(jt(i),l[e>>2]=0,l[t+28>>2]=0),(e=0|l[(i=t+36|0)>>2])?(jt(e),l[i>>2]=0,l[(t=t+40|0)>>2]=0,1):(l[(t=t+40|0)>>2]=0,1)},function(t,e,i){return e|=0,i|=0,0|(i=0|l[(e=44+(t|=0)|0)>>2])&&(jt(i),l[e>>2]=0),l[t+48>>2]=0,1},function(t,e,i){return 1},function(t,e,i){var n,r;return e|=0,i|=0,r=w,w=w+32|0,n=0==(0|l[8+(t|=0)>>2])&0!=(0|l[t+188>>2])&0!=(0|l[t+192>>2])&1,(e=(0|l[4+(0|l[5584+(0|l[t+164>>2])>>2])>>2])-1|0)>>>0>31?(mt(i,1,16016,r),w=r,0|(i=0)):(e=1<<e,(0|l[t+100>>2])>>>0<e>>>0?(mt(i,1,16016,r+8|0),w=r,0|(i=0)):(0|l[t+104>>2])>>>0>=e>>>0?(w=r,0|(i=n)):(mt(i,1,16016,r+16|0),w=r,0|(i=0)))},function(t,e,i){e|=0,i|=0;var n,r=0,a=0,o=0,c=0;if((-32256&s[88+(t|=0)>>1])<<16>>16!=-32256)return 0|(c=1);if(!(n=0|C(0|l[t+112>>2],0|l[t+116>>2])))return 0|(c=1);for(c=t+80|0,a=0|l[t+164>>2],e=1,o=0;;){if(2==(0|l[a+16>>2])&&(e&=0!=(0|l[a+5608>>2]),r=0|l[16+(0|l[c>>2])>>2]))for(i=0,t=0|l[a+5584>>2];e=(1&l[t+20>>2]^1)&e,!((i=i+1|0)>>>0>=r>>>0);)t=t+1080|0;if((0|(o=o+1|0))==(0|n))break;a=a+5640|0}return 0|e},function(t,e,i){e|=0,i|=0;var n,r,a,s,o=0,c=0,h=0;if(r=88+(t|=0)|0,a=t+32|0,s=0|l[t+80>>2],n=0|C(0|l[t+116>>2],0|l[t+112>>2]),l[a>>2]=0,!n)return 1;for(t=0|l[t+164>>2],o=0;;){Ze(s,r,o),c=t+420|0,e=0,i=0;do{h=0|ve(r,e,o),l[a>>2]=(0|l[a>>2])+h,i=h+i|0,e=e+1|0}while(e>>>0<=(0|l[c>>2])>>>0);if(l[t+5588>>2]=i,(0|(o=o+1|0))==(0|n))break;t=t+5640|0}return 1},function(t,e,i){return e|=0,i|=0,it(t=0|l[44+(t|=0)>>2],65359,2),2==(0|ct(e,t,2,i))|0},function(t,e,i){e|=0,i|=0;var n,r,a,s,o,c,h=0,u=0,f=0,p=0;c=w,w=w+16|0,n=c,r=0|l[80+(t|=0)>>2],p=40+(a=3*(0|l[(o=r+16|0)>>2])|0)|0,f=0|l[r+24>>2],u=t+48|0,h=0|l[(s=t+44|0)>>2];do{if(p>>>0>(0|l[u>>2])>>>0){if(0|(h=0|Wt(h,p))){l[s>>2]=h,l[u>>2]=p;break}return jt(0|l[s>>2]),l[s>>2]=0,l[u>>2]=0,mt(i,1,15978,n),w=c,0|(p=0)}}while(0);if(it(h,65361,2),it(h+2|0,a+38|0,2),it(h+4|0,0|d[t+88>>1],2),it(h+6|0,0|l[r+8>>2],4),it(h+10|0,0|l[r+12>>2],4),it(h+14|0,0|l[r>>2],4),it(h+18|0,0|l[r+4>>2],4),it(h+22|0,0|l[t+100>>2],4),it(h+26|0,0|l[t+104>>2],4),it(h+30|0,0|l[t+92>>2],4),it(h+34|0,0|l[t+96>>2],4),it(h+38|0,0|l[o>>2],2),0|l[o>>2])for(h=h+40|0,u=0;it(h,(0|l[f+24>>2])-1+(l[f+32>>2]<<7)|0,1),it(h+1|0,0|l[f>>2],1),it(h+2|0,0|l[f+4>>2],1),!((u=u+1|0)>>>0>=(0|l[o>>2])>>>0);)f=f+52|0,h=h+3|0;return p=(0|ct(e,0|l[s>>2],p,i))==(0|p)&1,w=c,0|p},function(t,e,i){e|=0,i|=0;var n,r,a,s,o,c,h,u,d,f,p=0,m=0,g=0;f=w,w=w+32|0,g=f+16|0,d=f+8|0,a=f,s=f+20|0,c=0|l[(o=164+(t|=0)|0)>>2],u=0|l[(h=t+200|0)>>2],p=0|l[c+(5640*u|0)+5584>>2],r=9+(m=1&l[p>>2]?5+(0|l[p+4>>2])|0:5)|0,l[s>>2]=r,n=t+48|0,p=0|l[(t=t+44|0)>>2];do{if(r>>>0>(0|l[n>>2])>>>0){if(0|(p=0|Wt(p,r))){l[t>>2]=p,l[n>>2]=r;break}return jt(0|l[t>>2]),l[t>>2]=0,l[n>>2]=0,mt(i,1,15913,a),w=f,0|(g=0)}}while(0);return it(p,65362,2),it(p+2|0,m+7|0,2),it(p+4|0,0|l[c+(5640*u|0)>>2],1),it(p+5|0,0|l[c+(5640*u|0)+4>>2],1),it(p+6|0,0|l[c+(5640*u|0)+8>>2],2),it(p+8|0,0|l[c+(5640*u|0)+16>>2],1),l[s>>2]=m,0|Me(0|l[o>>2],0|l[h>>2],p+9|0,s,i)?0|l[s>>2]?(mt(i,1,15952,g),w=f,0|(g=0)):(g=(0|ct(e,0|l[t>>2],r,i))==(0|r)&1,w=f,0|g):(mt(i,1,15952,d),w=f,0|(g=0))},function(t,e,i){e|=0,i|=0;var n,r,a,s,o,c,h,u,d=0,f=0,p=0;u=w,w=w+32|0,p=u+16|0,h=u+8|0,a=u,o=u+20|0,c=200+(t|=0)|0,d=0|l[(0|l[(s=t+164|0)>>2])+(5640*(0|l[c>>2])|0)+5584>>2],d=1==(0|(f=0|l[d+24>>2]))?1:(3*(0|l[d+4>>2])|0)-2|0,r=4+(n=0==(0|f)?d+1|0:d<<1|1)|0,l[o>>2]=r,f=t+48|0,d=0|l[(t=t+44|0)>>2];do{if(r>>>0>(0|l[f>>2])>>>0){if(0|(d=0|Wt(d,r))){l[t>>2]=d,l[f>>2]=r;break}return jt(0|l[t>>2]),l[t>>2]=0,l[f>>2]=0,mt(i,1,15848,a),w=u,0|(p=0)}}while(0);return it(d,65372,2),it(d+2|0,n+2|0,2),l[o>>2]=n,0|Ae(0|l[s>>2],0|l[c>>2],0,d+4|0,o,i)?0|l[o>>2]?(mt(i,1,15887,p),w=u,0|(p=0)):(p=(0|ct(e,0|l[t>>2],r,i))==(0|r)&1,w=u,0|p):(mt(i,1,15887,h),w=u,0|(p=0))},function(t,e,i){e|=0,i|=0;var n,r,a,s,o,c,h,u,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0;if(u=w,w=w+16|0,h=u,s=u+4|0,(d=0|l[16+(0|l[(o=80+(t|=0)|0)>>2])>>2])>>>0<=1)return w=u,0|(x=1);for(r=t+164|0,a=t+200|0,c=t+48|0,n=t+44|0,b=1,t=d;;){f=0|l[r>>2],m=0|l[a>>2],p=0|l[f+(5640*m|0)+5584>>2],g=0|l[p+(1080*b|0)>>2];t:do{if((0|l[p>>2])==(0|g)&&(v=0|l[p+4>>2],(0|v)==(0|l[p+(1080*b|0)+4>>2]))&&(0|l[p+8>>2])==(0|l[p+(1080*b|0)+8>>2])&&(0|l[p+12>>2])==(0|l[p+(1080*b|0)+12>>2])&&(0|l[p+16>>2])==(0|l[p+(1080*b|0)+16>>2])&&(0|l[p+20>>2])==(0|l[p+(1080*b|0)+20>>2])){if(v){d=0;do{if((0|l[p+812+(d<<2)>>2])!=(0|l[p+(1080*b|0)+812+(d<<2)>>2])){x=13;break t}if((0|l[p+944+(d<<2)>>2])!=(0|l[p+(1080*b|0)+944+(d<<2)>>2])){x=13;break t}d=d+1|0}while(d>>>0<v>>>0)}}else x=13}while(0);if(13==(0|x)){if(x=0,y=(d=1&g?5+(0|l[p+(1080*b|0)+4>>2])|0:5)+(t>>>0<257?6:7)|0,d=0|l[n>>2],y>>>0>(0|l[c>>2])>>>0){if(!(d=0|Wt(d,y))){x=17;break}l[n>>2]=d,l[c>>2]=y,_=0|l[r>>2],m=0|l[a>>2],p=0|l[_+(5640*m|0)+5584>>2],t=0|l[16+(0|l[o>>2])>>2],g=0|l[p+(1080*b|0)>>2]}else _=f;if(f=t>>>0<257?1:2,t=1&g?5+(0|l[p+(1080*b|0)+4>>2])|0:5,it(d,65363,2),it(d+2|0,f+3+t|0,2),it(g=d+4|0,b,f),it(g=g+f|0,0|l[(0|l[_+(5640*m|0)+5584>>2])+(1080*b|0)>>2],1),l[s>>2]=t,Me(0|l[r>>2],0|l[a>>2],g+1|0,s,i),(0|ct(e,0|l[n>>2],y,i))!=(0|y)){t=0,x=24;break}t=0|l[16+(0|l[o>>2])>>2]}if((b=b+1|0)>>>0>=t>>>0){t=1,x=24;break}}return 17==(0|x)?(jt(0|l[n>>2]),l[n>>2]=0,l[c>>2]=0,mt(i,1,15774,h),w=u,0|(x=0)):24==(0|x)?(w=u,0|t):0},function(t,e,i){e|=0,i|=0;var n,r,a,s,o,c,h,u,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0;if(u=w,w=w+16|0,h=u,s=u+4|0,(d=0|l[16+(0|l[(o=80+(t|=0)|0)>>2])>>2])>>>0<=1)return w=u,0|(b=1);for(r=t+164|0,a=t+200|0,c=t+48|0,n=t+44|0,y=1,t=d;;){g=0|l[(0|l[r>>2])+(5640*(0|l[a>>2])|0)+5584>>2],p=0|l[g+24>>2],m=0|l[g+(1080*y|0)+24>>2];t:do{if((0|p)==(0|m)&&(0|l[g+804>>2])==(0|l[g+(1080*y|0)+804>>2])){if(1!=(0|p)){if(d=(_=3*(0|l[g+4>>2])|0)-2|0,(0|_)!=(3*(0|l[g+(1080*y|0)+4>>2])|0)){b=14;break}if(!d)break;f=d}else f=1;d=0;do{if((0|l[g+28+(d<<3)>>2])!=(0|l[g+(1080*y|0)+28+(d<<3)>>2])){b=14;break t}d=d+1|0}while(d>>>0<f>>>0);if(p){d=0;do{if((0|l[g+28+(d<<3)+4>>2])!=(0|l[g+(1080*y|0)+28+(d<<3)+4>>2])){b=14;break t}d=d+1|0}while(d>>>0<f>>>0)}}else b=14}while(0);if(14==(0|b)){if(b=0,d=1==(0|m)?1:(3*(0|l[g+(1080*y|0)+4>>2])|0)-2|0,_=5+(0==(0|m)?d+1|0:d<<1|1)+(t>>>0>256&1)|0,t=0|l[n>>2],_>>>0>(0|l[c>>2])>>>0){if(!(t=0|Wt(t,_))){b=18;break}l[n>>2]=t,l[c>>2]=_,d=0|l[(0|l[r>>2])+(5640*(0|l[a>>2])|0)+5584>>2],f=0|l[d+(1080*y|0)+24>>2],p=t}else f=m,d=g,p=t;if(t=1==(0|f)?1:(3*(0|l[d+(1080*y|0)+4>>2])|0)-2|0,d=0==(0|f)?t+1|0:t<<1|1,l[s>>2]=d+6,it(p,65373,2),t=p+2|0,(0|l[16+(0|l[o>>2])>>2])>>>0<257?(it(t,d+3|0,2),it(p+4|0,y,1),t=5):(it(t,d+4|0,2),it(p+4|0,y,2),t=6),l[s>>2]=d,Ae(0|l[r>>2],0|l[a>>2],y,p+t|0,s,i),(0|ct(e,0|l[n>>2],_,i))!=(0|_)){t=0,b=28;break}t=0|l[16+(0|l[o>>2])>>2]}if((y=y+1|0)>>>0>=t>>>0){t=1,b=28;break}}return 18==(0|b)?(jt(0|l[n>>2]),l[n>>2]=0,l[c>>2]=0,mt(i,1,15702,h),w=u,0|(b=0)):28==(0|b)?(w=u,0|t):0},function(t,e,i){e|=0,i|=0;var n,r,a,s,o=0,c=0,h=0;s=w,w=w+16|0,c=s,h=6+(a=5*(0|l[32+(t|=0)>>2])|0)|0,n=t+48|0,o=0|l[(r=t+44|0)>>2];do{if(h>>>0>(0|l[n>>2])>>>0){if(0|(o=0|Wt(o,h))){l[r>>2]=o,l[n>>2]=h;break}return jt(0|l[r>>2]),l[r>>2]=0,l[n>>2]=0,mt(i,1,15663,c),w=s,0|(h=0)}}while(0);return c=0|ht(e),l[(t=t+16|0)>>2]=c,l[t+4>>2]=M,it(o,65365,2),it(o+2|0,a+4|0,2),it(o+4|0,0,1),it(o+5|0,80,1),h=(0|ct(e,0|l[r>>2],h,i))==(0|h)&1,w=s,0|h},function(t,e,i){t|=0,e|=0,i|=0;var n,r,a,s,o,c,h,u,d=0,f=0,p=0,m=0;u=w,w=w+16|0,a=u,l[(m=u+4|0)>>2]=0,f=0|l[(s=t+164|0)>>2],d=0|l[(o=t+200|0)>>2],p=0|l[16+(0|l[(r=t+80|0)>>2])>>2],h=4+(0|C(p>>>0<257?7:9,1+(0|l[f+(5640*d|0)+420>>2])|0))|0,n=t+48|0,t=0|l[(c=t+44|0)>>2];do{if(h>>>0>(0|l[n>>2])>>>0){if(0|(t=0|Wt(t,h))){l[c>>2]=t,l[n>>2]=h,p=0|l[16+(0|l[r>>2])>>2],f=0|l[s>>2],d=0|l[o>>2];break}return jt(0|l[c>>2]),l[c>>2]=0,l[n>>2]=0,mt(i,1,15624,a),w=u,0|(m=0)}}while(0);return be(p,f,d,t,m),m=(0|ct(e,0|l[c>>2],h,i))==(0|h)&1,w=u,0|m},function(t,e,i){e|=0,i|=0;var n,r,a=0,s=0,o=0,c=0,h=0,u=0;if(r=164+(t|=0)|0,s=0|l[(h=t+80|0)>>2],!(a=0|l[s+16>>2]))return 0|(h=1);for(n=t+44|0,o=0,c=0|l[5584+(0|l[r>>2])>>2],t=s;;){if(0|l[c+808>>2]){if(t=0|l[5584+(0|l[r>>2])>>2],s=6+(a=a>>>0<257?1:2)|0,it(u=0|l[n>>2],65374,2),it(u+2|0,4|a,2),it(u=u+4|0,o,a),it(a=u+a|0,0,1),it(a+1|0,0|l[t+(1080*o|0)+808>>2],1),(0|ct(e,0|l[n>>2],s,i))!=(0|s)){t=0,a=7;break}t=0|l[h>>2]}if((o=o+1|0)>>>0>=(a=0|l[t+16>>2])>>>0){t=1,a=7;break}c=c+1080|0}return 7==(0|a)?0|t:0},function(t,e,i){e|=0,i|=0;var n,r,a,s,o,c,h=0;c=w,w=w+16|0,a=c,h=6+(o=0|Mn(s=0|l[108+(t|=0)>>2]))|0,r=t+48|0,t=0|l[(n=t+44|0)>>2];do{if(h>>>0>(0|l[r>>2])>>>0){if(0|(t=0|Wt(t,h))){l[n>>2]=t,l[r>>2]=h;break}return jt(0|l[n>>2]),l[n>>2]=0,l[r>>2]=0,mt(i,1,15581,a),w=c,0|(h=0)}}while(0);return it(t,65380,2),it(t+2|0,o+4|0,2),it(t+4|0,1,2),Cr(t+6|0,0|s,0|o),h=(0|ct(e,0|l[n>>2],h,i))==(0|h)&1,w=c,0|h},function(t,e,i){e|=0,i|=0;var n,a,s,o,c,h,u,d=0,f=0,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0;u=w,w=w+32|0,c=u+24|0,s=u+16|0,v=u+8|0,f=u,p=0|l[80+(t|=0)>>2],_=6+(m=0|l[(g=p+16|0)>>2])|0,o=t+48|0,d=0|l[(h=t+44|0)>>2];do{if(_>>>0>(0|l[o>>2])>>>0){if(0|(d=0|Wt(d,_))){l[h>>2]=d,l[o>>2]=_;break}return jt(0|l[h>>2]),l[h>>2]=0,l[o>>2]=0,mt(i,1,15425,f),w=u,0|(i=0)}}while(0);if(it(d,65400,2),it(d+2|0,m+4|0,2),it(d+4|0,0|l[g>>2],2),0|l[g>>2])for(p=0|l[p+24>>2],d=d+6|0,f=0;it(d,(0|l[p+24>>2])-1|l[p+32>>2]<<7,1),!((f=f+1|0)>>>0>=(0|l[g>>2])>>>0);)p=p+52|0,d=d+1|0;if((0|ct(e,0|l[h>>2],_,i))!=(0|_))return w=u,0|(i=0);m=(b=0|l[(n=t+164|0)>>2])+(5640*(y=0|l[(a=t+200|0)>>2])|0)+5616|0;t:do{if(0|l[m>>2]){for(f=0|l[b+(5640*y|0)+5612>>2],p=0;;){if(t=10+(_=0|l[(g=f+16|0)>>2])|0,d=0|l[h>>2],t>>>0>(0|l[o>>2])>>>0){if(!(d=0|Wt(d,t)))break;l[h>>2]=d,l[o>>2]=t}if(it(d,65396,2),it(d+2|0,_+8|0,2),it(d+4|0,0,2),it(d+6|0,l[f+4>>2]<<8|255&l[f+8>>2]|l[f>>2]<<10,2),it(d+8|0,0,2),Cr(d+10|0,0|l[f+12>>2],0|l[g>>2]),(0|ct(e,0|l[h>>2],t,i))!=(0|t)){x=0,A=41;break}if((p=p+1|0)>>>0>=(0|l[m>>2])>>>0)break t;f=f+20|0}return 41==(0|A)?(w=u,0|x):(jt(0|l[h>>2]),l[h>>2]=0,l[o>>2]=0,mt(i,1,15464,v),w=u,0|(i=0))}}while(0);v=b+(5640*y|0)+5628|0;t:do{if(0|l[v>>2]){for(t=0|l[b+(5640*y|0)+5624>>2],y=0;;){if(g=(m=(f=0|l[(_=t+4|0)>>2])>>>0>255)?2:1,m=m?32768:0,b=19+(f=0|C(g,f<<1))|0,d=0|l[h>>2],b>>>0>(0|l[o>>2])>>>0){if(!(d=0|Wt(d,b)))break;l[h>>2]=d,l[o>>2]=b}if(it(d,65397,2),it(d+2|0,f+17|0,2),it(d+4|0,0,2),it(d+6|0,0|l[t>>2],1),it(d+7|0,0,2),it(d+9|0,1,2),it(d+11|0,1,1),it(d+12|0,l[_>>2]|m,2),d=d+14|0,0|l[_>>2]){p=0;do{it(d,p,g),d=d+g|0,p=p+1|0,f=0|l[_>>2]}while(p>>>0<f>>>0)}else f=0;if(it(d,f|m,2),d=d+2|0,0|l[_>>2]){f=0;do{it(d,f,g),d=d+g|0,f=f+1|0}while(f>>>0<(0|l[_>>2])>>>0);p=d}else p=d;if(d=(255&(1&r[t+16>>0]^1))<<16,(f=0|l[t+8>>2])&&(d=l[f+8>>2]|d),(f=0|l[t+12>>2])&&(d=l[f+8>>2]<<8|d),it(p,d,3),(0|ct(e,0|l[h>>2],b,i))!=(0|b)){x=0,A=41;break}if((y=y+1|0)>>>0>=(0|l[v>>2])>>>0)break t;t=t+20|0}return 41==(0|A)?(w=u,0|x):(jt(0|l[h>>2]),l[h>>2]=0,l[o>>2]=0,mt(i,1,15503,s),w=u,0|(i=0))}}while(0);g=0|l[n>>2],m=0|l[a>>2],t=5+(f=0|l[(_=g+(5640*m|0)+5628|0)>>2])|0,d=0|l[h>>2];do{if(t>>>0>(0|l[o>>2])>>>0){if(0|(d=0|Wt(d,t))){l[h>>2]=d,l[o>>2]=t;break}return jt(0|l[h>>2]),l[h>>2]=0,l[o>>2]=0,mt(i,1,15542,c),w=u,0|(i=0)}}while(0);if(it(d,65399,2),it(d+2|0,f+3|0,2),it(d+4|0,0|l[_>>2],1),0|l[_>>2])for(p=0,f=0|l[g+(5640*m|0)+5624>>2],d=d+5|0;it(d,0|l[f>>2],1),!((p=p+1|0)>>>0>=(0|l[_>>2])>>>0);)f=f+20|0,d=d+1|0;return i=(0|ct(e,0|l[h>>2],t,i))==(0|t)&1,w=u,0|i},function(t,e,i){return t|=0,i|=0,e=0|ht(e|=0),i=8+(0|l[t+196>>2])|0,l[i>>2]=e,l[i+4>>2]=M,1},function(t,e,i){var n,r;return t|=0,e|=0,i|=0,r=w,w=w+16|0,e=0|Xe(0),l[(n=t+204|0)>>2]=e,e?0|Ke(e,0|l[t+80>>2],t+88|0)?(w=r,0|(i=1)):($e(0|l[n>>2]),l[n>>2]=0,w=r,0|(i=0)):(mt(i,1,15385,r),w=r,0|(i=0))},function(t,e,i){e|=0,i|=0;var n,a,o,c,h,u,d=0,f=0,p=0,g=0,_=0,y=0,b=0,v=0,w=0,x=0,A=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0,H=0,U=0,V=0,W=0,j=0;if(n=0|l[(c=80+(t|=0)|0)>>2],f=0|l[(j=t+164|0)>>2],G=0|l[(W=n+24|0)>>2],d=0|l[G>>2],i=0|l[G+4>>2],o=n+16|0,G=0|C(0|l[G+24>>2],0|l[o>>2]),O=0|ht(e),e=0|l[(h=t+116|0)>>2],p=0|l[(u=t+112|0)>>2],a=(+(O>>>0)+4294967296*+(0|M))/+((0|C(p,e))>>>0),O=0==(8&r[t+181>>0])?1:2,0|e){for(S=t+92|0,T=t+100|0,P=t+96|0,B=t+104|0,L=n+4|0,R=n+8|0,D=n+12|0,k=+((0|C(d<<3,i))>>>0),w=0,d=p,i=p;;){if(v=w,w=w+1|0,i){y=0;do{if(I=+Yr[3&O](f),I/=+((_=0|l[f+8>>2])>>>0),A=0|l[S>>2],d=0|l[T>>2],i=(0|(g=(0|C(d,y))+A|0))>(0|(i=0|l[n>>2]))?g:i,g=0|l[P>>2],p=0|l[B>>2],e=(0|(x=(0|C(p,v))+g|0))>(0|(e=0|l[L>>2]))?x:e,d=(0|(A=(0|C(d,y=y+1|0))+A|0))<(0|(d=0|l[R>>2]))?A:d,p=(0|(g=(0|C(p,w))+g|0))<(0|(p=0|l[D>>2]))?g:p,(b=+m[(g=f+20|0)>>2])>0&&(E=+((0|C(0|C(d-i|0,G),p-e|0))>>>0)/(b*k)-I,m[g>>2]=E),_>>>0>1)for(b=+((0|C(0|C(d-i|0,G),p-e|0))>>>0),i=f+24|0,e=1;(E=+m[i>>2])>0&&(m[i>>2]=b/(E*k)-I),!((e=e+1|0)>>>0>=_>>>0);)i=i+4|0;f=f+5640|0,i=0|l[u>>2]}while(y>>>0<i>>>0);A=0|l[h>>2],x=i}else A=e,x=d,i=0;if(w>>>0>=A>>>0)break;d=x,e=A}if(0|A&&(z=a+2,0|x))for(y=0,i=0|l[j>>2];;){for(v=0,w=i,_=i+16|0;;){if((b=+m[(i=w+20|0)>>2])>0&&(k=b-a,m[i>>2]=k,k<30)&&(m[i>>2]=30),e=w+24|0,g=(i=0|l[w+8>>2])-1|0,f=(b=+m[e>>2])>0,g>>>0>1){p=_+(i<<2)|0,d=1,i=f;do{i&&(k=b-a,m[e>>2]=k,k<10+(U=+m[e+-4>>2]))&&(m[e>>2]=U+20),d=d+1|0,i=(b=+m[(e=e+4|0)>>2])>0}while((0|d)!=(0|g));i&&(F=p,N=b,V=25)}else f&&(F=e,N=b,V=25);if(25==(0|V)&&(V=0,k=N-z,m[F>>2]=k,k<10+(H=+m[F+-4>>2]))&&(m[F>>2]=H+20),w=w+5640|0,(v=v+1|0)>>>0>=x>>>0)break;_=_+5640|0}if((y=y+1|0)>>>0>=A>>>0)break;i=w}}if(f=0|l[o>>2]){for(p=(0|l[t+100>>2])-1|0,g=(0|l[t+104>>2])-1|0,d=0,i=0|l[W>>2],e=0;W=0|l[i>>2],V=0|l[i+4>>2],W=0|C(((g+V|0)>>>0)/(V>>>0)|0,((p+W|0)>>>0)/(W>>>0)|0),d=(0|C(W,0|l[i+24>>2]))+d|0,!((e=e+1|0)>>>0>=f>>>0);)i=i+52|0;T=~~(.1625*+(d>>>0))>>>0}else T=0;if(A=(v=0|l[16+(0|l[c>>2])>>2])-1|0,i=0|l[j>>2],w=0==(0|(S=0|C(0|l[h>>2],0|l[u>>2]))))f=0;else{for(e=0,d=0,f=i;e=e>>>0>(j=0|l[f+5588>>2])>>>0?e:j,(0|(d=d+1|0))!=(0|S);)f=f+5640|0;f=12*e|0}if(((0|s[(x=t+88|0)>>1])-3&65535)>=4){if(0==(0|v)|w)d=6,e=6;else{p=0,e=0;do{_=0|l[i+(5640*p|0)+5584>>2],g=0;do{e=e>>>0>(d=1&l[_+(1080*g|0)>>2]?5+(0|l[_+(1080*g|0)+4>>2])|0:5)>>>0?e:d,g=g+1|0}while((0|g)!=(0|v));p=p+1|0}while((0|p)!=(0|S));e=e+6|0,g=0,d=0;do{y=0|l[i+(5640*g|0)+5584>>2],_=0;do{d=d>>>0>(p=1&l[y+(1080*_|0)>>2]?5+(0|l[y+(1080*_|0)+4>>2])|0:5)>>>0?d:p,_=_+1|0}while((0|_)!=(0|v));g=g+1|0}while((0|g)!=(0|S));d=d+6|0}f=(0|C(d+e|0,A))+f|0}if(w)i=13;else{for(d=0,e=0;d=d>>>0>(j=0|l[i+420>>2])>>>0?d:j,(0|(e=e+1|0))!=(0|S);)i=i+5640|0;i=13+(9*d|0)|0}return j=f+T+i|0,l[t+40>>2]=j,j=0|zt(j),l[t+36>>2]=j,j?((0|s[x>>1])-3&65535)>=4?0|(t=1):(i=0|zt(5*(0|l[t+32>>2])|0),l[t+24>>2]=i,i?(l[t+28>>2]=i,0|(t=1)):0|(t=0)):0|(t=0)},function(t,e,i){t|=0,e|=0,i|=0;var n,r,a,s,o,c,h,u,d,f,p,m,g,_,y,b,v,x,A=0,S=0,E=0,T=0,I=0,C=0,k=0,P=0,B=0,L=0,R=0,D=0;if(x=w,w=w+192|0,b=x+152|0,y=x+144|0,_=x+136|0,g=x+128|0,m=x+120|0,f=x+88|0,d=x+80|0,u=x+64|0,h=x+48|0,L=x+40|0,v=x+32|0,D=x+24|0,p=x+16|0,c=x+8|0,n=x+176|0,r=x+168|0,a=x+156|0,!(A=0|Ht(1,1024)))return mt(i,1,17104,x),w=x,0|(D=0);s=n+4|0,o=a+4|0,R=t+100|0,P=A,k=1024;t:for(;8==(0|lt(e,n,8,i));){e:for(;;){switch(nt(n,a,4),nt(s,o,4),0|l[a>>2]){case 0:if(A=0|ut(e),(0|(B=M))>0|0==(0|B)&A>>>0>4294967287){B=6;break t}l[a>>2]=A+8,T=8;break;case 1:if(8!=(0|lt(e,n,8,i))){B=12;break t}if(nt(n,r,4),0|l[r>>2]){B=10;break t}nt(s,a,4),T=16;break;default:T=8}if(1785737827==(0|(E=0|l[o>>2]))){B=14;break t}if(!(I=0|l[a>>2])){B=18;break t}if(I>>>0<T>>>0){B=20;break t}i:do{if((0|E)<1718909296){if((0|E)<1668112752){if((0|E)<1667523942){switch(0|E){case 1651532643:break;default:B=43;break i}S=1124,B=30;break}switch(0|E){case 1667523942:break;default:B=43;break i}S=1148,B=30;break}if((0|E)<1668246642){switch(0|E){case 1668112752:break;default:B=43;break i}S=1140,B=30;break}switch(0|E){case 1668246642:break;default:B=43;break i}S=1116,B=30;break}if((0|E)<1783636e3)if((0|E)<1768449138)switch(0|E){case 1718909296:B=27;break e;default:B=43;break i}else switch(0|E){case 1768449138:S=1108,B=30;break i;default:B=43;break i}if((0|E)<1785737832)switch(0|E){case 1783636e3:A=1084,B=29;break e;default:B=43;break i}if((0|E)<1885564018)switch(0|E){case 1785737832:B=28;break e;default:B=43;break i}switch(0|E){case 1885564018:break;default:B=43;break i}S=1132,B=30}while(0);if(30==(0|B)){if(B=0,A=I-T|0,l[h>>2]=E>>>24,l[h+4>>2]=E>>>16&255,l[h+8>>2]=E>>>8&255,l[h+12>>2]=255&E,mt(i,2,17288,h),4&l[R>>2]|0){C=S,E=A;break}if(C=0|l[o>>2],l[u>>2]=C>>>24,l[u+4>>2]=C>>>16&255,l[u+8>>2]=C>>>8&255,l[u+12>>2]=255&C,mt(i,2,17339,u),l[R>>2]=2147483647|l[R>>2],!((0|(C=0|dt(e,A,0,i)))==(0|A)&0==(0|M))){B=32;break t}}else if(43==(0|B)){if(B=0,A=I-T|0,!(1&(S=0|l[R>>2]))){B=44;break t}if(!(2&S)){B=46;break t}if(l[R>>2]=2147483647|S,!((0|(C=0|dt(e,A,0,i)))==(0|A)&0==(0|M))){B=49;break t}}if(8!=(0|lt(e,n,8,i)))break t}if(27==(0|B)?(A=1092,B=29):28==(0|B)&&(A=1100,B=29),29==(0|B)&&(B=0,C=A,E=I-T|0),I=0|ut(e),(0|(T=M))<0|0==(0|T)&I>>>0<E>>>0){B=34;break}if(E>>>0>k>>>0){if(!(A=0|Wt(P,E))){B=37;break}S=E}else A=P,S=k;if((0|lt(e,A,E,i))!=(0|E)){B=39;break}if(!(0|Qr[63&l[C+4>>2]](t,A,E,i))){B=42;break}P=A,k=S}switch(0|B){case 6:mt(i,1,17154,c);break;case 10:mt(i,1,17154,p);break;case 12:break;case 14:return 4&(A=0|l[R>>2])?(l[R>>2]=8|A,jt(P),w=x,0|(D=1)):(mt(i,1,17196,D),jt(P),w=x,0|(D=0));case 18:return mt(i,1,17224,v),jt(P),w=x,0|(D=0);case 20:return l[L>>2]=I,l[L+4>>2]=E,mt(i,1,17262,L),jt(P),w=x,0|(D=0);case 32:return mt(i,1,17405,d),jt(P),w=x,0|(D=0);case 34:return L=0|l[a>>2],R=0|l[o>>2],D=0|ut(e),l[f>>2]=L,l[f+4>>2]=R>>>24,l[f+8>>2]=R>>>16&255,l[f+12>>2]=R>>>8&255,l[f+16>>2]=255&R,l[f+20>>2]=E,l[f+24>>2]=D,mt(i,1,17455,f),jt(P),w=x,0|(D=0);case 37:return jt(P),mt(i,1,17531,m),w=x,0|(D=0);case 39:return mt(i,1,17573,g),jt(A),w=x,0|(D=0);case 42:return jt(A),w=x,0|(D=0);case 44:return mt(i,1,17622,_),jt(P),w=x,0|(D=0);case 46:return mt(i,1,17692,y),jt(P),w=x,0|(D=0);case 49:return mt(i,1,17405,b),jt(P),w=x,0|(D=0)}return jt(P),w=x,0|(D=1)},function(t,e,i){t|=0,i|=0;var n,r,a,s,o=0;return s=w,w=w+32|0,it(n=s+24|0,o=0|vr(0|(r=0|ht(e|=0)),0|(a=M),0|l[(o=t=t+80|0)>>2],0|l[o+4>>2]),4),it(n+4|0,1785737827,4),0|ft(e,0|l[t>>2],0|l[t+4>>2],i)?8!=(0|ct(e,n,8,i))?(mt(i,1,19383,s+8|0),w=s,0|(o=0)):0|ft(e,r,a,i)?(w=s,0|(o=1)):(mt(i,1,19383,s+16|0),w=s,0|(o=0)):(mt(i,1,19383,s),w=s,0|(o=0))},function(t,e,i){e|=0,i|=0;var n,r=0,a=0;if(i=(0|l[(t|=0)>>2]?0==(l[t+104>>2]|l[t+100>>2]|0):0)&0!=(0|l[t+8>>2])&0!=(0|l[t+4>>2])&0!=(0|l[t+64>>2])&0!=(0|l[t+16>>2])&0!=(0|l[t+12>>2])&1,!(n=0|l[t+20>>2]))return a=i,t=(t=(t=0|l[(t=t+40|0)>>2])-1|0)>>>0<2,t&=1,e=0|pt(e),e&=a,0|(e&=t);a=0|l[t+72>>2],r=0;do{i&=(126&l[a+(12*r|0)+8>>2])>>>0<38,r=r+1|0}while(r>>>0<n>>>0);return t=(t=(t=0|l[(t=t+40|0)>>2])-1|0)>>>0<2,t&=1,e=0|pt(e),e&=i,0|(e&=t)},function(t,e,i){var n;return t|=0,e|=0,i|=0,t=w,w=w+16|0,it(n=t,12,4),it(n+4|0,1783636e3,4),it(n+8|0,218793738,4),i=12==(0|ct(e,n,12,i))&1,w=t,0|i},function(t,e,i){e|=0,i|=0;var n,r,a,s,o,c=0,h=0;if(o=w,w=w+16|0,h=o+8|0,!(s=0|Ht(1,a=16+(l[(r=64+(t|=0)|0)>>2]<<2)|0)))return mt(i,1,19500,o),w=o,0|(h=0);if(it(s,a,4),it(s+4|0,1718909296,4),it(s+8|0,0|l[t+56>>2],4),it(s+12|0,0|l[t+60>>2],4),n=s+16|0,0|l[r>>2]){c=t+68|0,t=0;do{it(n,0|l[(0|l[c>>2])+(t<<2)>>2],4),t=t+1|0}while(t>>>0<(0|l[r>>2])>>>0)}return(t=(0|ct(e,s,a,i))==(0|a))||mt(i,1,19539,h),jt(s),w=o,0|(h=1&t)},function(t,e,i){t|=0,e|=0,i|=0;var n,r,a,s,o,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0;o=w,w=w+80|0,s=o+16|0,a=o+8|0,r=o,n=o+72|0,u=48+(c=h=o+24|0)|0;do{l[c>>2]=0,c=c+4|0}while((0|c)<(0|u));for(255==(0|l[t+24>>2])?(l[h>>2]=1,c=3,u=2,d=1,f=4):(c=2,u=1,d=0,f=1),l[h+(12*d|0)>>2]=f,l[h+(12*u|0)>>2]=2,0|l[t+116>>2]?(l[h+(12*c|0)>>2]=3,m=c+1|0):m=c,it(n+4|0,1785737832,4),c=8,u=0,d=h;;){if(f=d+8|0,g=0|Jr[7&l[d>>2]](t,f),l[d+4>>2]=g,!g){p=7;break}if(c=(0|l[f>>2])+c|0,(0|(u=u+1|0))>=(0|m))break;d=d+12|0}if(7==(0|p)){for(mt(i,1,19414,r),u=0,c=h;;){if(0|(h=0|l[c+4>>2])&&jt(h),(0|(u=u+1|0))>=(0|m)){c=0;break}c=c+12|0}return w=o,0|c}it(n,c,4);t:do{if(8==(0|ct(e,n,8,i))){for(c=0,u=h;g=u+8|0,(0|(p=0|ct(e,0|l[u+4>>2],0|l[g>>2],i)))==(0|l[g>>2]);){if((0|(c=c+1|0))>=(0|m)){c=1;break t}u=u+12|0}mt(i,1,19457,s),c=0}else mt(i,1,19457,a),c=0}while(0);for(u=0;0|(d=0|l[h+4>>2])&&jt(d),!((0|(u=u+1|0))>=(0|m));)h=h+12|0;return w=o,0|c},function(t,e,i){var n;return t|=0,i|=0,n=0|ht(e|=0),l[(t=t+88|0)>>2]=n,l[t+4>>2]=M,24==(0|(i=0|dt(e,24,0,i)))&0==(0|M)&1|0},function(t,e,i){var n;return t|=0,i|=0,n=0|ht(e|=0),l[(t=t+80|0)>>2]=n,l[t+4>>2]=M,8==(0|(i=0|dt(e,8,0,i)))&0==(0|M)&1|0},wn,function(t,e,i){t|=0,e|=0,i|=0;var n,a,s,o=0,c=0,h=0,u=0;return a=w,w=w+32|0,o=a,l[(u=a+16|0)>>2]=e,c=u+4|0,s=0|l[(n=t+48|0)>>2],l[c>>2]=i-(0!=(0|s)&1),h=t+44|0,l[u+8>>2]=l[h>>2],l[u+12>>2]=s,l[o>>2]=l[t+60>>2],l[o+4>>2]=u,l[o+8>>2]=2,(0|(o=0|xn(0|F(145,0|o))))>=1?o>>>0>(u=0|l[c>>2])>>>0&&(c=0|l[h>>2],l[(h=t+4|0)>>2]=c,l[t+8>>2]=c+(o-u),0|l[n>>2]?(l[h>>2]=c+1,r[e+(i+-1)>>0]=0|r[c>>0],o=i):o=i):l[t>>2]=l[t>>2]|48&o^16,w=a,0|o},Gr],Qr=[Fr,function(t,e,i,n){t|=0,e|=0,i|=0,n|=0;var a,s,o,c,u,d,f,p,m,g,_,y=0,b=0,v=0,x=0,A=0,M=0,S=0,E=0,T=0;if(_=w,w=w+112|0,E=_+88|0,g=_+80|0,M=_+72|0,m=_+64|0,A=_+56|0,d=_+48|0,o=_+40|0,a=_+32|0,v=_+24|0,y=_+16|0,f=_+100|0,S=_+92|0,l[(p=_+96|0)>>2]=0,T=t+200|0,8!=(0|i))return mt(n,1,11669,_),mt(n,1,11669,_+8|0),w=_,0|(T=0);if(nt(e,T,2),nt(e+2|0,f,4),nt(e+6|0,S,1),nt(e+7|0,p,1),s=0|l[T>>2],e=0|l[t+112>>2],s>>>0>=(0|C(0|l[t+116>>2],e))>>>0)return l[y>>2]=s,mt(n,1,11695,y),w=_,0|(T=0);i=0|l[t+164>>2],u=(s>>>0)%(e>>>0)|0,c=(s>>>0)/(e>>>0)|0,e=0|l[f>>2];do{if((e+-1|0)>>>0<13){if(12==(0|e)){l[v>>2]=12,mt(n,2,11719,v),e=0|l[f>>2];break}return l[a>>2]=e,mt(n,1,11756,a),w=_,0|(T=0)}}while(0);e||(mt(n,4,11817,o),l[t+72>>2]=1),e=0|l[p>>2];do{if(e){if(b=e+((0|h[t+76>>0])>>>4&1)|0,l[p>>2]=b,((y=0|l[(i=i+(5640*s|0)+5588|0)>>2])-1|0)>>>0<(e=0|l[S>>2])>>>0)return l[d>>2]=e,l[d+4>>2]=y,mt(n,1,11928,d),l[t+72>>2]=1,w=_,0|(T=0);if(e>>>0<b>>>0){l[i>>2]=b,x=18;break}return l[A>>2]=e,l[A+4>>2]=b,mt(n,1,12027,A),l[t+72>>2]=1,w=_,0|(T=0)}0|(e=0|l[i+(5640*s|0)+5588>>2])&&(b=e,x=18)}while(0);if(18==(0|x)&&(0|b)==(1+(0|l[S>>2])|0)&&(r[(A=t+76|0)>>0]=1|r[A>>0]),l[t+24>>2]=0==(0|l[t+72>>2])?(0|l[f>>2])-12|0:0,l[t+8>>2]=16,e=-1==(0|(e=0|l[t+60>>2]))?u>>>0>=(0|l[t+28>>2])>>>0&&u>>>0<(0|l[t+36>>2])>>>0&&c>>>0>=(0|l[t+32>>2])>>>0?(c>>>0>=(0|l[t+40>>2])>>>0&1)<<2&255:4:((0|l[T>>2])!=(0|e)&1)<<2&255,r[(v=t+76|0)>>0]=-5&r[v>>0]|e,!(e=0|l[(v=t+196|0)>>2]))return w=_,0|(T=1);if(b=0|l[T>>2],e=0|l[e+40>>2],l[e+(40*b|0)>>2]=b,y=0|l[S>>2],l[e+(40*b|0)+12>>2]=y,0|(i=0|l[p>>2]))return l[e+(40*b|0)+4>>2]=i,l[e+(40*b|0)+8>>2]=i,(e=0|l[e+(40*b|0)+16>>2])?(e=0|Wt(e,24*i|0),i=(0|l[40+(0|l[v>>2])>>2])+(40*(0|l[T>>2])|0)+16|0,e?(l[i>>2]=e,w=_,0|(T=1)):(jt(0|l[i>>2]),l[(0|l[40+(0|l[v>>2])>>2])+(40*(0|l[T>>2])|0)+16>>2]=0,mt(n,1,12135,M),w=_,0|(T=0))):(E=0|Ht(i,24),l[(0|l[40+(0|l[v>>2])>>2])+(40*(0|l[T>>2])|0)+16>>2]=E,0|E?(w=_,0|(T=1)):(mt(n,1,12135,m),w=_,0|(T=0)));do{if(!(0|l[e+(40*b|0)+16>>2])){if(l[e+(40*b|0)+8>>2]=10,M=0|Ht(10,24),e=0|l[40+(0|l[v>>2])>>2],i=0|l[T>>2],l[e+(40*i|0)+16>>2]=M,0|M){b=i,y=0|l[S>>2];break}return l[e+(40*i|0)+8>>2]=0,mt(n,1,12135,g),w=_,0|(T=0)}}while(0);return y>>>0<(0|l[(i=e+(40*b|0)+8|0)>>2])>>>0?(w=_,0|(T=1)):(S=y+1|0,l[i>>2]=S,e=0|Wt(0|l[e+(40*b|0)+16>>2],24*S|0),i=(0|l[40+(0|l[v>>2])>>2])+(40*(0|l[T>>2])|0)+16|0,e?(l[i>>2]=e,w=_,0|(T=1)):(jt(0|l[i>>2]),S=0|l[40+(0|l[v>>2])>>2],T=0|l[T>>2],l[S+(40*T|0)+16>>2]=0,l[S+(40*T|0)+8>>2]=0,mt(n,1,12135,E),w=_,0|(T=0)))},function(t,e,i,n){t|=0,e|=0,i|=0,n|=0;var a,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0,m=0,g=0,_=0;if(a=w,w=w+64|0,m=a+48|0,g=a+40|0,h=a+32|0,c=a+56|0,l[(f=a+52|0)>>2]=i,u=0|l[(_=t+80|0)>>2],d=16==(0|l[(p=t+8|0)>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],1&(o=0|r[(s=d+5636|0)>>0]))return mt(n,1,11436,a),w=a,0|(_=0);if(r[s>>0]=1|o,i>>>0<5)return mt(n,1,11500,a+8|0),w=a,0|(_=0);if(nt(e,d,1),(0|l[d>>2])>>>0>7)return mt(n,1,11526,a+16|0),w=a,0|(_=0);if(nt(e+1|0,c,1),c=0|l[c>>2],l[(s=d+4|0)>>2]=c,(0|c)>4&&(mt(n,1,11560,a+24|0),l[s>>2]=-1),nt(e+2|0,s=d+8|0,2),((s=0|l[s>>2])-1|0)>>>0>65534)return l[h>>2]=s,mt(n,1,11601,h),w=a,0|(_=0);if(h=0|l[t+172>>2],l[d+12>>2]=0==(0|h)?s:h,nt(e+4|0,d+16|0,1),h=e+5|0,l[f>>2]=i+-5,0|(c=0|l[u+16>>2])){e=1&l[d>>2],o=0|l[d+5584>>2],s=0;do{l[o+(1080*s|0)>>2]=e,s=s+1|0}while(s>>>0<c>>>0)}if(!(0|ie(t,0,h,f,n)))return mt(n,1,11500,g),w=a,0|(_=0);if(0|l[f>>2])return mt(n,1,11500,m),w=a,0|(_=0);if(s=16==(0|l[p>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],s=0|l[s+5584>>2],d=(o=0|l[(u=s+4|0)>>2])<<2,(0|l[16+(0|l[_>>2])>>2])>>>0<=1)return w=a,0|(_=1);if(t=s+8|0,n=s+12|0,f=s+16|0,p=s+20|0,m=s+812|0,g=s+944|0,l[s+1084>>2]=o,c=0|l[t>>2],l[s+1088>>2]=c,e=0|l[n>>2],l[s+1092>>2]=e,h=0|l[f>>2],l[s+1096>>2]=h,i=0|l[p>>2],l[s+1100>>2]=i,Cr(s+1892|0,0|m,0|d),Cr(s+2024|0,0|g,0|d),(0|l[16+(0|l[_>>2])>>2])>>>0<=2)return w=a,0|(_=1);if(l[s+2164>>2]=o,l[s+2168>>2]=c,l[s+2172>>2]=e,l[s+2176>>2]=h,l[s+2180>>2]=i,Cr(s+2972|0,0|m,0|d),Cr(s+3104|0,0|g,0|d),!((0|l[16+(0|l[_>>2])>>2])>>>0>3))return w=a,0|(_=1);for(o=3;;){if(c=0|l[t>>2],e=0|l[n>>2],h=0|l[f>>2],i=0|l[p>>2],l[s+3244>>2]=l[u>>2],l[s+3248>>2]=c,l[s+3252>>2]=e,l[s+3256>>2]=h,l[s+3260>>2]=i,Cr(s+4052|0,0|m,0|d),Cr(s+4184|0,0|g,0|d),(o=o+1|0)>>>0>=(0|l[16+(0|l[_>>2])>>2])>>>0){s=1;break}s=s+1080|0}return w=a,0|s},function(t,e,i,n){t|=0,e|=0,i|=0,n|=0;var r,a,s,o,c=0,h=0;return o=w,w=w+48|0,h=o+32|0,l[(s=o+28|0)>>2]=i,c=16==(0|l[t+8>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],a=16+(0|l[t+80>>2])|0,(r=(0|l[a>>2])>>>0<257?1:2)>>>0>=i>>>0?(mt(n,1,10929,o),w=o,0|(h=0)):(l[s>>2]=i+-1-r,nt(e,h,r),e=e+r|0,(i=0|l[h>>2])>>>0>=(0|l[a>>2])>>>0?(mt(n,1,10955,o+8|0),w=o,0|(h=0)):(nt(e,(0|l[c+5584>>2])+(1080*i|0)|0,1),0|ie(t,0|l[h>>2],e+1|0,s,n)?0|l[s>>2]?(mt(n,1,10929,o+24|0),w=o,0|(h=0)):(w=o,0|(h=1)):(mt(n,1,10929,o+16|0),w=o,0|(h=0))))},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o,c=0,h=0;return o=w,w=w+32|0,h=o+8|0,a=o+20|0,(2+(r=(s=0|l[16+(0|l[80+(t|=0)>>2])>>2])>>>0<257?1:2)|0)!=(0|i)?(mt(n,1,10846,o),w=o,0|(h=0)):(c=16==(0|l[t+8>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],nt(e,a,r),nt(i=e+r|0,o+16|0,1),(t=0|l[a>>2])>>>0<s>>>0?(nt(i+1|0,(0|l[c+5584>>2])+(1080*t|0)+808|0,1),w=o,0|(h=1)):(l[h>>2]=t,l[h+4>>2]=s,mt(n,1,10872,h),w=o,0|(h=0)))},function(t,e,i,n){t|=0,e|=0,i|=0,n|=0;var r,a=0,s=0;if(r=w,w=w+16|0,l[(a=r+12|0)>>2]=i,!(0|ee(t,0,e,a,n)))return mt(n,1,10820,r),w=r,0|(s=0);if(0|l[a>>2])return mt(n,1,10820,r+8|0),w=r,0|(s=0);if(e=16==(0|l[t+8>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],e=0|l[e+5584>>2],(0|l[16+(0|l[(n=t+80|0)>>2])>>2])>>>0<=1)return w=r,0|(s=1);for(a=e+24|0,t=e+804|0,s=e+28|0,i=1;;){if(l[e+1104>>2]=l[a>>2],l[e+1884>>2]=l[t>>2],Cr(e+1108|0,0|s,776),(i=i+1|0)>>>0>=(0|l[16+(0|l[n>>2])>>2])>>>0){e=1;break}e=e+1080|0}return w=r,0|e},function(t,e,i,n){t|=0,e|=0,i|=0,n|=0;var r,a,s,o,c,h,u=0,d=0,f=0,p=0;h=w,w=w+48|0,p=h+32|0,c=h+24|0,o=h+16|0,d=h+8|0,u=h,r=h+40|0,l[(s=h+36|0)>>2]=i,a=t+80|0;do{if((0|l[16+(0|l[a>>2])>>2])>>>0<257){if(0|i){nt(e,r,1),u=-1,f=1;break}return mt(n,1,10473,u),w=h,0|(p=0)}if(i>>>0>=2){nt(e,r,2),u=-2,f=2;break}return mt(n,1,10473,d),w=h,0|(p=0)}while(0);return l[s>>2]=u+i,(d=0|l[r>>2])>>>0>=(u=0|l[16+(0|l[a>>2])>>2])>>>0?(l[o>>2]=d,l[o+4>>2]=u,mt(n,1,10499,o),w=h,0|(p=0)):0|ee(t,d,e+f|0,s,n)?0|l[s>>2]?(mt(n,1,10473,p),w=h,0|(p=0)):(w=h,0|(p=1)):(mt(n,1,10473,c),w=h,0|(p=0))},function(t,e,i,n){e|=0,n|=0;var a,s,o,c,h=0,u=0,d=0,f=0,p=0,m=0;if(c=w,w=w+16|0,d=c+8|0,o=c+12|0,0!=(0|((i|=0)>>>0)%((h=5+((s=(m=0|l[16+(0|l[80+(t|=0)>>2])>>2])>>>0<257?1:2)<<1)|0)>>>0))|h>>>0>i>>>0)return mt(n,1,10429,c),w=c,0|(m=0);if(p=16==(0|l[t+8>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],(a=(f=4&(u=0|r[(t=p+5636|0)>>0])?1+(0|l[p+420>>2])|0:0)+((i>>>0)/(h>>>0)|0)|0)>>>0>31)return l[d>>2]=a,mt(n,1,10455,d),w=c,0|(m=0);if(r[t>>0]=4|u,f>>>0<a>>>0)for(u=p+8|0,t=e,i=f,h=p+424+(148*f|0)|0;nt(t,h,1),nt(t=t+1|0,h+4|0,s),nt(t=t+s|0,f=h+8|0,2),d=0|l[f>>2],e=0|l[u>>2],l[f>>2]=d>>>0<e>>>0?d:e,nt(t=t+2|0,h+12|0,1),nt(t=t+1|0,f=h+16|0,s),nt(t=t+s|0,o,1),l[h+36>>2]=l[o>>2],e=0|l[f>>2],l[f>>2]=e>>>0<m>>>0?e:m,!((i=i+1|0)>>>0>=a>>>0);)t=t+1|0,h=h+148|0;return l[p+420>>2]=a+-1,w=c,0|(m=1)},function(t,e,i,n){e|=0,i|=0,n|=0;var a,o,c,h,u,d,f,p,m,g,_,y,b,v,x=0,A=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0,F=0,N=0,z=0;if(v=w,w=w+160|0,z=v+144|0,O=v+136|0,b=v+128|0,y=v+120|0,D=v+112|0,R=v+104|0,p=v+96|0,f=v+80|0,o=v+72|0,a=v+64|0,P=v+56|0,L=v+48|0,B=v+32|0,E=v+24|0,S=v+16|0,x=v+152|0,u=v+148|0,F=0|l[80+(t|=0)>>2],N=t+88|0,i>>>0<36)return mt(n,1,9677,v),w=v,0|(n=0);if(k=((G=i+-36|0)>>>0)/3|0,0|(G>>>0)%3)return mt(n,1,9677,v+8|0),w=v,0|(n=0);if(nt(e,x,2),s[N>>1]=l[x>>2],nt(e+2|0,d=F+8|0,4),nt(e+6|0,_=F+12|0,4),nt(e+10|0,F,4),nt(e+14|0,I=F+4|0,4),nt(e+18|0,h=t+100|0,4),nt(e+22|0,g=t+104|0,4),nt(e+26|0,c=t+92|0,4),nt(e+30|0,m=t+96|0,4),nt(e+34|0,x,2),A=e+36|0,(i=0|l[x>>2])>>>0>=16385)return l[S>>2]=i,mt(n,1,9705,S),w=v,0|(n=0);if(i&=65535,l[(G=F+16|0)>>2]=i,(0|i)!=(0|k))return l[E>>2]=i,l[E+4>>2]=k,mt(n,1,9766,E),w=v,0|(n=0);if((E=0|l[F>>2])>>>0<(T=0|l[d>>2])>>>0){if((S=0|l[I>>2])>>>0<(e=0|l[_>>2])>>>0){if(x=0|l[h>>2],i=0|l[g>>2],x){if(i){if((4294967295/(T>>>0)|0)>>>0<e>>>0)return l[P>>2]=T,l[P+4>>2]=e,mt(n,1,10007,P),w=v,0|(n=0);if(B=0|br(0|(T=0|l[c>>2]),0,0|x,0),P=M,L=0|br(0|(I=0|l[m>>2]),0,0|i,0),T>>>0<=E>>>0&&I>>>0<=S>>>0&(0-P|B)>>>0>E>>>0&(0-M|L)>>>0>S>>>0){if(i=0|Ht(k,52),l[(k=F+24|0)>>2]=i,!i)return l[G>>2]=0,mt(n,1,10093,o),w=v,0|(n=0);t:do{if(0|l[G>>2]){for(T=t+168|0,E=i,S=0;;){if(nt(A,u,1),e=0|l[u>>2],l[(i=E+24|0)>>2]=1+(127&e),l[E+32>>2]=e>>>7,nt(A+1|0,u,1),l[E>>2]=l[u>>2],nt(A+2|0,u,1),e=0|l[u>>2],l[E+4>>2]=e,(e+-1|0)>>>0>254|((x=0|l[E>>2])-1|0)>>>0>254){i=26;break}if((e=0|l[i>>2])>>>0>38){i=28;break}if(l[E+36>>2]=0,l[E+40>>2]=l[T>>2],!((i=S+1|0)>>>0<(0|l[G>>2])>>>0))break t;E=E+52|0,A=A+3|0,S=i}return 26==(0|i)?(l[f>>2]=S,l[f+4>>2]=x,l[f+8>>2]=e,mt(n,1,10141,f)):28==(0|i)&&(l[p>>2]=S,l[p+4>>2]=e,mt(n,1,10246,p)),w=v,0|(n=0)}}while(0);if(T=0|l[c>>2],E=0|l[h>>2],A=((0|l[d>>2])-1-T+E|0)/(0|E)|0,l[t+112>>2]=A,S=0|l[m>>2],x=0|l[g>>2],i=((0|l[_>>2])-1-S+x|0)/(0|x)|0,l[t+116>>2]=i,!(0==(0|i)|0==(0|A))&&A>>>0<=(65535/(i>>>0)|0)>>>0){if(I=0|C(A,i),e=t+28|0,2&r[t+76>>0]?(l[e>>2]=(((0|l[e>>2])-T|0)>>>0)/(E>>>0)|0,l[(i=t+32|0)>>2]=(((0|l[i>>2])-S|0)>>>0)/(x>>>0)|0,l[(i=t+36|0)>>2]=((0|l[i>>2])-1-T+E|0)/(0|E)|0,e=i=t+40|0,i=((0|l[i>>2])-1-S+x|0)/(0|x)|0):(l[e>>2]=0,l[t+32>>2]=0,l[t+36>>2]=A,e=t+40|0),l[e>>2]=i,R=0|Ht(I,5640),l[(S=t+164|0)>>2]=R,!R)return mt(n,1,10093,D),w=v,0|(n=0);if(D=0|Ht(0|l[G>>2],1080),l[5584+(0|l[(A=t+12|0)>>2])>>2]=D,!(0|l[5584+(0|l[A>>2])>>2]))return mt(n,1,10093,y),w=v,0|(n=0);if(i=0|Ht(10,20),l[5612+(0|l[A>>2])>>2]=i,i=0|l[A>>2],!(0|l[i+5612>>2]))return mt(n,1,10093,b),w=v,0|(n=0);if(l[i+5620>>2]=10,i=0|Ht(10,20),l[5624+(0|l[A>>2])>>2]=i,i=0|l[A>>2],!(0|l[i+5624>>2]))return mt(n,1,10093,O),w=v,0|(n=0);if(l[i+5632>>2]=10,0|(x=0|l[G>>2])){e=0|l[k>>2],i=0;do{0|l[e+(52*i|0)+32>>2]||(l[(0|l[5584+(0|l[A>>2])>>2])+(1080*i|0)+1076>>2]=1<<(0|l[e+(52*i|0)+24>>2])-1),i=i+1|0}while(i>>>0<x>>>0)}t:do{if(0|I){if(i=0|l[S>>2],O=0|Ht(x,1080),l[i+5584>>2]=O,0|O)for(e=0;;){if((e=e+1|0)>>>0>=I>>>0)break t;if(O=0|Ht(0|l[G>>2],1080),l[i+11224>>2]=O,!O)break;i=i+5640|0}return mt(n,1,10093,z),w=v,0|(n=0)}}while(0);return l[t+8>>2]=4,function(t,e){t|=0;var i,n=0,r=0,a=0,s=0,o=0,c=0,h=0,u=0,d=0,f=0,p=0;if(n=0|l[4+(e|=0)>>2],r=0|l[t>>2],s=0|l[e+8>>2],o=0|l[t+4>>2],a=0|l[e+12>>2],u=(0|C((0|l[e+24>>2])-1|0,a))+n|0,c=0|l[e+16>>2],h=(0|C((0|l[e+28>>2])-1|0,c))+s|0,e=0|br(0|u,0,0|a,0),e|=0-M,a=0|l[t+8>>2],c=0|br(0|h,0,0|c,0),c|=0-M,h=0|l[t+12>>2],u=0|l[t+16>>2])for(i=(n>>>0>r>>>0?n:r)+-1|0,s=(s>>>0>o>>>0?s:o)+-1|0,a=(e>>>0<a>>>0?e:a)+-1|0,r=(c>>>0<h>>>0?c:h)+-1|0,n=0,e=0|l[t+24>>2];h=((i+(o=0|l[e>>2])|0)>>>0)/(o>>>0)|0,t=((s+(p=0|l[e+4>>2])|0)>>>0)/(p>>>0)|0,f=0|Tr(1,0,0|(c=0|l[e+40>>2])),d=M,o=0|Er(0|(o=0|br(0|(o=0|br((((a+o|0)>>>0)/(o>>>0)|0)-h|0,0,-1,-1)),0|M,0|f,0|d)),0|M,0|c),c=0|Er(0|(d=0|br(0|(p=0|br((((r+p|0)>>>0)/(p>>>0)|0)-t|0,0,-1,-1)),0|M,0|f,0|d)),0|M,0|c),l[e+8>>2]=o,l[e+12>>2]=c,l[e+16>>2]=h,l[e+20>>2]=t,!((n=n+1|0)>>>0>=u>>>0);)e=e+52|0}(F,N),w=v,0|(n=1)}return l[R>>2]=A,l[R+4>>2]=i,mt(n,1,10346,R),w=v,0|(n=0)}return mt(n,1,10049,a),w=v,0|(n=0)}i=0}return l[L>>2]=x,l[L+4>>2]=i,mt(n,1,9946,L),w=v,0|(n=0)}i=S}else e=0|l[_>>2],i=0|l[I>>2];return t=0|vr(0|T,0,0|E,0),F=M,N=0|vr(0|e,0,0|i,0),l[(z=B)>>2]=t,l[z+4>>2]=F,l[(z=B+8|0)>>2]=N,l[z+4>>2]=M,mt(n,1,9880,B),w=v,0|(n=0)},function(t,e,i,n){var r;return t|=0,e|=0,n|=0,r=w,w=w+32|0,t=r+12|0,(i|=0)>>>0<2?(mt(n,1,9651,r),w=r,0|(n=0)):(nt(e,r+16|0,1),nt(e+1|0,t,1),((i+-2|0)>>>0)%((2+((e=0|l[t>>2])>>>5&2)+(e>>>4&3)|0)>>>0)|0?(mt(n,1,9651,r+8|0),w=r,0|(n=0)):(w=r,0|(n=1)))},function(t,e,i,n){return t|=0,e|=0,n|=0,e=w,w=w+16|0,(i|=0)?t=1:(mt(n,1,9625,e),t=0),w=e,0|t},function(t,e,i,n){t|=0,e|=0,n|=0;var r,a,s,o,c=0;if(o=w,w=w+32|0,s=o+8|0,a=o+12|0,!(i|=0))return mt(n,1,9599,o),w=o,0|(n=0);if(nt(e,o+16|0,1),!(r=i+-1|0))return w=o,0|(n=1);c=0,t=e,i=0;do{nt(t=t+1|0,a,1),c=0==(128&(e=0|l[a>>2])|0)?0:(127&e|c)<<7,i=i+1|0}while((0|i)!=(0|r));return c?(mt(n,1,9599,s),w=o,0|(n=0)):(w=o,0|(n=1))},function(t,e,i,n){t|=0,e|=0,n|=0;var a,s,o,c,h,u,d=0,f=0,p=0;if(u=w,w=w+48|0,p=u+32|0,o=u+24|0,a=u+16|0,d=u+8|0,h=u+36|0,(i|=0)>>>0<2)return mt(n,1,9551,u),w=u,0|(p=0);r[(f=t+184|0)>>0]=1|r[f>>0],nt(e,h,1),f=e+1|0,c=i+-1|0,i=0|l[(s=t+124|0)>>2];do{if(!i){if(i=0|Ht(e=1+(0|l[h>>2])|0,8),l[s>>2]=i,0|i){l[t+120>>2]=e;break}return mt(n,1,8618,d),w=u,0|(p=0)}if(d=t+120|0,e=0|l[h>>2],(0|l[d>>2])>>>0<=e>>>0){if(0|(e=0|Wt(i,(t=e+1|0)<<3))){l[s>>2]=e,kr(e+((i=0|l[d>>2])<<3)|0,0,t-i<<3|0),l[d>>2]=t,i=0|l[s>>2];break}return mt(n,1,8618,a),w=u,0|(p=0)}}while(0);return e=0|l[h>>2],0|l[i+(e<<3)>>2]?(l[o>>2]=e,mt(n,1,9577,o),w=u,0|(p=0)):(t=0|zt(c),i=0|l[s>>2],e=0|l[h>>2],l[i+(e<<3)>>2]=t,t?(l[i+(e<<3)+4>>2]=c,Cr(0|t,0|f,0|c),w=u,0|(p=1)):(mt(n,1,8618,p),w=u,0|(p=0)))},function(t,e,i,n){t|=0,e|=0,n|=0;var a,s,o,c,h,u,d,f,p=0,m=0,g=0;if(f=w,w=w+48|0,g=f+40|0,u=f+32|0,o=f+24|0,s=f+16|0,d=f+44|0,(i|=0)>>>0<2)return mt(n,1,9364,f),w=f,0|(g=0);if(1&r[t+184>>0])return mt(n,1,9390,f+8|0),w=f,0|(g=0);a=0|l[t+164>>2],p=0|l[t+200>>2],r[(m=a+(5640*p|0)+5636|0)>>0]=2|r[m>>0],nt(e,d,1),m=e+1|0,h=i+-1|0,e=0|l[(c=a+(5640*p|0)+5164|0)>>2];do{if(!e){if(e=0|Ht(t=1+(0|l[d>>2])|0,8),l[c>>2]=e,0|e){l[a+(5640*p|0)+5160>>2]=t;break}return mt(n,1,9491,s),w=f,0|(g=0)}if(p=a+(5640*p|0)+5160|0,t=0|l[d>>2],(0|l[p>>2])>>>0<=t>>>0){if(0|(t=0|Wt(e,(i=t+1|0)<<3))){l[c>>2]=t,kr(t+((e=0|l[p>>2])<<3)|0,0,i-e<<3|0),l[p>>2]=i,e=0|l[c>>2];break}return mt(n,1,9491,o),w=f,0|(g=0)}}while(0);return t=0|l[d>>2],0|l[e+(t<<3)>>2]?(l[u>>2]=t,mt(n,1,9529,u),w=f,0|(g=0)):(i=0|zt(h),e=0|l[c>>2],t=0|l[d>>2],l[e+(t<<3)>>2]=i,i?(l[e+(t<<3)+4>>2]=h,Cr(0|i,0|m,0|h),w=f,0|(g=1)):(mt(n,1,9491,g),w=f,0|(g=0)))},function(t,e,i,n){return e|=0,i|=0,n|=0,e=w,w=w+16|0,(l[16+(0|l[80+(t|=0)>>2])>>2]<<2|0)==(0|i)?(w=e,0|(n=1)):(mt(n,1,9338,e),w=e,0|(n=0))},function(t,e,i,n){return 1},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o,c,h,u,d=0,f=0,p=0,m=0,g=0,_=0;if(u=w,w=w+48|0,_=u+40|0,h=u+32|0,a=u+24|0,c=u+44|0,m=16==(0|l[8+(t|=0)>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],i>>>0<2)return mt(n,1,9170,u),w=u,0|(_=0);if(nt(e,c,2),0|l[c>>2])return mt(n,2,9196,u+8|0),w=u,0|(_=1);if(i>>>0<7)return mt(n,1,9170,u+16|0),w=u,0|(_=0);nt(e+2|0,c,2),o=e+4|0,g=255&l[c>>2],d=0|l[(r=m+5612|0)>>2],t=0|l[(s=m+5616|0)>>2];t:do{if(t){f=d,p=0;do{if((0|l[f+8>>2])==(0|g))break t;f=f+20|0,p=p+1|0}while(p>>>0<t>>>0)}else f=d,p=0}while(0);if((0|p)==(0|t)){f=m+5620|0;do{if((0|t)==(0|l[f>>2])){if(t=t+10|0,l[f>>2]=t,0|(t=0|Wt(d,20*t|0))){l[r>>2]=t,kr(t+(20*(d=0|l[s>>2])|0)|0,0,20*((0|l[f>>2])-d|0)|0),d=0|l[r>>2],t=0|l[s>>2];break}return jt(0|l[r>>2]),l[r>>2]=0,l[f>>2]=0,l[s>>2]=0,mt(n,1,9256,a),w=u,0|(_=0)}}while(0);l[s>>2]=t+1,f=d+(20*t|0)|0}return 0|(t=0|l[(p=f+12|0)>>2])&&(jt(t),l[p>>2]=0),l[f+8>>2]=g,g=0|l[c>>2],l[f+4>>2]=g>>>8&3,l[f>>2]=g>>>10&3,nt(o,c,2),0|l[c>>2]?(mt(n,2,9294,h),w=u,0|(_=1)):(d=0|zt(t=i+-6|0),l[p>>2]=d,d?(Cr(0|d,e+6|0,0|t),l[f+16>>2]=t,w=u,0|(_=1)):(mt(n,1,9170,_),w=u,0|(_=0)))},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o=0;if(s=w,w=w+32|0,r=s+16|0,o=s+12|0,(2+(a=0|l[16+(0|l[(t=80+(t|=0)|0)>>2])>>2])|0)!=(0|i))return mt(n,1,9144,s),w=s,0|(o=0);if(nt(e,r,2),(0|l[r>>2])!=(0|a))return mt(n,1,9144,s+8|0),w=s,0|(o=0);if(!a)return w=s,0|(o=1);for(n=0,i=e+2|0,t=0|l[24+(0|l[t>>2])>>2];;){if(nt(i,o,1),e=0|l[o>>2],l[t+32>>2]=e>>>7&1,l[t+24>>2]=1+(127&e),(0|(n=n+1|0))==(0|a)){t=1;break}i=i+1|0,t=t+52|0}return w=s,0|t},function(t,e,i,n){e|=0,i|=0,n|=0;var a,s,o,c,h,u,d,f,p,m,g,_,y,b,v,x=0,A=0,M=0,S=0,E=0,T=0,I=0,k=0,P=0,B=0,L=0,R=0,D=0,O=0,G=0;if(v=w,w=w+144|0,G=v+120|0,b=v+112|0,y=v+104|0,_=v+96|0,g=v+88|0,m=v+80|0,p=v+72|0,f=v+64|0,d=v+56|0,u=v+48|0,P=v+40|0,k=v+32|0,T=v+24|0,a=v+136|0,s=v+132|0,o=v+128|0,c=v+124|0,B=16==(0|l[8+(t|=0)>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],i>>>0<2)return mt(n,1,8804,v),w=v,0|(G=0);if(nt(e,a,2),0|l[a>>2])return mt(n,2,8830,v+8|0),w=v,0|(G=1);if(i>>>0<7)return mt(n,1,8804,v+16|0),w=v,0|(G=0);nt(e+2|0,s,1),I=e+3|0,x=0|l[(E=B+5624|0)>>2],t=0|l[(h=B+5628|0)>>2];t:do{if(t){S=0|l[s>>2],M=x,A=0;do{if((0|l[M>>2])==(0|S))break t;M=M+20|0,A=A+1|0}while(A>>>0<t>>>0)}else M=x,A=0}while(0);if((0|A)==(0|t)){A=B+5632|0;do{if((0|t)==(0|l[A>>2])){if(t=t+10|0,l[A>>2]=t,0|(t=0|Wt(x,20*t|0))){l[E>>2]=t,kr(t+(20*(x=0|l[h>>2])|0)|0,0,20*((0|l[A>>2])-x|0)|0),x=0|l[E>>2],t=0|l[h>>2];break}return jt(0|l[E>>2]),l[E>>2]=0,l[A>>2]=0,l[h>>2]=0,mt(n,1,8876,T),w=v,0|(G=0)}}while(0);O=1,A=x+(20*t|0)|0}else O=0,A=M;if(l[A>>2]=l[s>>2],nt(I,a,2),0|l[a>>2])return mt(n,2,8830,k),w=v,0|(G=1);if(nt(e+5|0,o,2),(x=0|l[o>>2])>>>0>1)return mt(n,2,8914,P),w=v,0|(G=1);t=i+-7|0;t:do{if(x){L=A+4|0,R=A+16|0,D=A+8|0,i=A+12|0,P=B+5612|0,k=B+5616|0,T=e+7|0,I=0;e:for(;;){if(t>>>0<3){x=27;break}if(nt(T,a,1),1!=(0|l[a>>2])){x=29;break}if(nt(T+1|0,c,2),x=t+-3|0,S=1+((M=0|l[c>>2])>>>15)|0,M&=32767,l[L>>2]=M,x>>>0<(A=2+(0|C(S,M))|0)>>>0){x=31;break}if(t=T+3|0,E=x-A|0,M){x=0;do{if(nt(t,a,S),(0|l[a>>2])!=(0|x)){x=34;break e}t=t+S|0,x=x+1|0}while(x>>>0<(0|l[L>>2])>>>0)}if(nt(t,c,2),x=t+2|0,M=1+((A=0|l[c>>2])>>>15)|0,A&=32767,l[c>>2]=A,(0|A)!=(0|l[L>>2])){x=37;break}if(E>>>0<(t=3+(0|C(M,A))|0)>>>0){x=39;break}if(t=E-t|0,A){A=0;do{if(nt(x,a,M),(0|l[a>>2])!=(0|A)){x=42;break e}x=x+M|0,A=A+1|0}while(A>>>0<(0|l[L>>2])>>>0)}if(nt(x,a,3),T=x+3|0,M=0|l[a>>2],r[R>>0]=1&(M>>>16^1)|-2&r[R>>0],l[D>>2]=0,l[i>>2]=0,S=255&M,l[s>>2]=S,0|S){if(!(E=0|l[k>>2])){x=50;break}for(x=0|l[P>>2],A=0;(0|l[x+8>>2])!=(0|S);){if((A=A+1|0)>>>0>=E>>>0){x=50;break e}x=x+20|0}l[D>>2]=x}if(M=M>>>8&255,l[s>>2]=M,0|M){if(!(S=0|l[k>>2])){x=57;break}for(x=0|l[P>>2],A=0;(0|l[x+8>>2])!=(0|M);){if((A=A+1|0)>>>0>=S>>>0){x=57;break e}x=x+20|0}l[i>>2]=x}if((I=I+1|0)>>>0>=(0|l[o>>2])>>>0)break t}if(27==(0|x))return mt(n,1,8804,u),w=v,0|(G=0);if(29==(0|x))return mt(n,2,8958,d),w=v,0|(G=1);if(31==(0|x))return mt(n,1,8804,f),w=v,0|(G=0);if(34==(0|x))return mt(n,2,9024,p),w=v,0|(G=1);if(37==(0|x))return mt(n,2,9078,m),w=v,0|(G=1);if(39==(0|x))return mt(n,1,8804,g),w=v,0|(G=0);if(42==(0|x))return mt(n,2,9024,_),w=v,0|(G=1);if(50==(0|x))return mt(n,1,8804,y),w=v,0|(G=0);if(57==(0|x))return mt(n,1,8804,b),w=v,0|(G=0)}}while(0);return 0|t?(mt(n,1,8804,G),w=v,0|(G=0)):O?(l[h>>2]=1+(0|l[h>>2]),w=v,0|(G=1)):(w=v,0|(G=1))},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o,c,h,u,d=0,f=0,p=0,m=0,g=0,_=0;if(u=w,w=w+32|0,c=u+24|0,h=u+20|0,d=0|l[(_=80+(t|=0)|0)>>2],f=16==(0|l[t+8>>2])?(0|l[t+164>>2])+(5640*(0|l[t+200>>2])|0)|0:0|l[t+12>>2],!i)return mt(n,1,8723,u),w=u,0|(_=0);if(nt(e,h,1),(t=0|l[h>>2])>>>0>1)return mt(n,2,8749,u+8|0),w=u,0|(_=1);if((t+1|0)!=(0|i))return mt(n,2,8723,u+16|0),w=u,0|(_=0);if(o=f+5584|0,0|(d=0|l[d+16>>2]))for(i=0|l[o>>2],n=0;l[i+1076>>2]=0,!((n=n+1|0)>>>0>=d>>>0);)i=i+1080|0;if((i=0|l[(s=f+5604|0)>>2])&&(jt(i),l[s>>2]=0,t=0|l[h>>2]),!t)return w=u,0|(_=1);for(a=f+5624|0,r=f+5628|0,p=0;;){if(nt(e=e+1|0,c,1),t=0|l[_>>2],d=0|l[a>>2],0|l[r>>2]&&(0|l[d>>2])==(0|l[c>>2])&&(0|(m=0|l[d+4>>2]))==(0|l[(g=t+16|0)>>2])){if(0|(t=0|l[d+8>>2])){if(i=0|C(m,m),f=0|C(0|l[1036+(l[t>>2]<<2)>>2],i),(0|l[t+16>>2])!=(0|f)){t=0,i=32;break}if(n=0|zt(i<<2),l[s>>2]=n,!n){t=0,i=32;break}ra[15&l[1052+(l[t>>2]<<2)>>2]](0|l[t+12>>2],n,i)}if(0|(t=0|l[d+12>>2])){if(i=0|l[g>>2],f=0|C(i,0|l[1036+(l[t>>2]<<2)>>2]),(0|l[t+16>>2])!=(0|f)){t=0,i=32;break}if(!(f=0|zt(i<<2))){t=0,i=32;break}if(ra[15&l[1068+(l[t>>2]<<2)>>2]](0|l[t+12>>2],f,i),0|(d=0|l[g>>2]))for(t=f,i=0|l[o>>2],n=0;l[i+1076>>2]=l[t>>2],(0|(n=n+1|0))!=(0|d);)t=t+4|0,i=i+1080|0;jt(f)}}if((p=p+1|0)>>>0>=(0|l[h>>2])>>>0){t=1,i=32;break}}return 32==(0|i)?(w=u,0|t):0},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a=0;return r=w,w=w+32|0,a=r+20|0,0|l[(t=100+(t|=0)|0)>>2]?(mt(n,1,19251,r),w=r,0|(a=0)):4!=(0|i)?(mt(n,1,19305,r+8|0),w=r,0|(a=0)):(nt(e,a,4),218793738==(0|l[a>>2])?(l[t>>2]=1|l[t>>2],w=r,0|(a=1)):(mt(n,1,19339,r+16|0),w=r,0|(a=0)))},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o=0;if(s=w,w=w+32|0,a=s+24|0,1!=(0|l[(o=100+(t|=0)|0)>>2]))return mt(n,1,19132,s),w=s,0|(o=0);if(i>>>0<8)return mt(n,1,19182,s+8|0),w=s,0|(o=0);if(nt(e,t+56|0,4),nt(e+4|0,t+60|0,4),e=e+8|0,3&(i=i+-8|0)|0)return mt(n,1,19182,s+16|0),w=s,0|(o=0);if(i>>>=2,l[(r=t+64|0)>>2]=i,0|i){if(i=0|Ht(i,4),l[t+68>>2]=i,!i)return mt(n,1,19218,a),w=s,0|(o=0);if(0|l[r>>2])for(t=t+68|0,i=0;nt(e,(0|l[t>>2])+(i<<2)|0,4),!((i=i+1|0)>>>0>=(0|l[r>>2])>>>0);)e=e+4|0}return l[o>>2]=2|l[o>>2],w=s,0|(o=1)},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o,c,h,u,d,f,p,m,g,_,y=0,b=0,v=0,x=0,A=0,M=0,S=0;if(_=w,w=w+96|0,f=_+72|0,d=_+64|0,u=_+56|0,h=_+48|0,S=_+40|0,g=_+32|0,m=_+24|0,p=_+16|0,c=_+8|0,a=_+80|0,s=_+76|0,!(2&l[(o=100+(t|=0)|0)>>2]))return mt(n,1,18800,_),w=_,0|(S=0);l[(r=t+104|0)>>2]=0;do{if(0|i){x=0;t:for(;;){if(i>>>0<8){v=6;break}switch(nt(e,a,4),y=0|l[a>>2],nt(e+4|0,a,4),M=0|l[a>>2],0|y){case 0:v=15;break t;case 1:if(i>>>0<16){v=9;break t}if(nt(e+8|0,s,4),0|l[s>>2]){v=11;break t}if(nt(e+12|0,a,4),!(y=0|l[a>>2])){v=13;break t}A=16;break;default:A=8}if(y>>>0<A>>>0){v=17;break}if(i>>>0<y>>>0){v=20;break}e:do{if((0|M)<1668246642){if((0|M)<1667523942){switch(0|M){case 1651532643:break;default:v=28;break e}b=1124,v=27;break}if((0|M)<1668112752){switch(0|M){case 1667523942:break;default:v=28;break e}b=1148,v=27;break}switch(0|M){case 1668112752:break;default:v=28;break e}b=1140,v=27;break}if((0|M)<1768449138){switch(0|M){case 1668246642:break;default:v=28;break e}b=1116,v=27;break}if((0|M)<1885564018)switch(0|M){case 1768449138:b=1108,v=27;break e;default:v=28;break e}switch(0|M){case 1885564018:break;default:v=28;break e}b=1132,v=27}while(0);if(27==(0|v)){if(!(0|Qr[63&l[b+4>>2]](t,e+A|0,y-A|0,n))){e=0,v=33;break}}else 28==(0|v)&&(l[r>>2]=2147483647|l[r>>2]);if(x=1768449138==(0|M)?1:x,!(i=i-y|0)){v=30;break}e=e+y|0}if(6==(0|v))mt(n,1,18845,c);else if(9==(0|v))mt(n,1,18885,p);else if(11==(0|v))mt(n,1,17154,m);else if(13==(0|v))mt(n,1,17224,g);else if(15==(0|v))mt(n,1,17224,S);else if(17==(0|v))mt(n,1,18929,h);else{if(20==(0|v))return mt(n,1,19001,d),w=_,0|(S=0);if(30==(0|v)){if(!x)break;return l[o>>2]=4|l[o>>2],w=_,0|(S=1)}if(33==(0|v))return w=_,0|e}return mt(n,1,18958,u),w=_,0|(S=0)}}while(0);return mt(n,1,19073,f),w=_,0|(S=0)},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s=0;return a=w,w=w+48|0,s=a+32|0,0|l[(r=72+(t|=0)|0)>>2]?(mt(n,2,18543,a),w=a,0|(s=1)):14!=(0|i)?(mt(n,1,18591,a+8|0),w=a,0|(s=0)):(nt(e,t+16|0,4),nt(e+4|0,t+12|0,4),nt(e+8|0,i=t+20|0,2),((i=0|l[i>>2])-1|0)>>>0>16383?(mt(n,1,18624,a+16|0),w=a,0|(s=0)):(i=0|Ht(i,12),l[r>>2]=i,i?(nt(e+10|0,t+24|0,1),nt(e+11|0,i=t+28|0,1),7!=(0|(i=0|l[i>>2]))&&(l[s>>2]=i,mt(n,4,18710,s)),nt(e+12|0,t+32|0,1),nt(e+13|0,t+36|0,1),w=a,0|(s=1)):(mt(n,1,18661,a+24|0),w=a,0|(s=0))))},function(t,e,i,n){t|=0,e|=0,n|=0;var a,s,o,c,h,u,d,f,p,m,g=0,_=0,y=0,b=0,v=0,x=0,A=0,M=0;if(m=w,w=w+96|0,y=m+48|0,s=m+40|0,x=m+32|0,v=m+24|0,b=m+16|0,A=m+80|0,a=m+76|0,h=m+72|0,o=m+68|0,u=m+64|0,c=m+60|0,d=m+56|0,f=m+52|0,(i|=0)>>>0<3)return mt(n,1,18186,m),w=m,0|(M=0);if(p=t+108|0,0|r[(M=t+124|0)>>0])return mt(n,4,18218,m+8|0),w=m,0|(M=1);switch(nt(e,_=t+40|0,1),nt(e+1|0,t+52|0,1),nt(e+2|0,t+44|0,1),g=e+3|0,0|(_=0|l[_>>2])){case 1:if(i>>>0<7)return l[b>>2]=i,mt(n,1,18327,b),w=m,0|(M=0);if(_=t+48|0,7!=(0|i)&&14!=(0|l[_>>2])&&(l[v>>2]=i,mt(n,2,18327,v)),nt(g,_,4),y=e+7|0,14==(0|l[_>>2])){if(!(A=0|zt(36)))return mt(n,1,18363,x),w=m,0|(M=0);switch(l[A>>2]=14,l[d>>2]=0,l[u>>2]=0,l[h>>2]=0,l[c>>2]=0,l[o>>2]=0,l[a>>2]=0,l[f>>2]=4470064,l[(g=A+4|0)>>2]=1145390592,0|i){case 35:nt(y,a,4),nt(e+11|0,h,4),nt(e+15|0,o,4),nt(e+19|0,u,4),nt(e+23|0,c,4),nt(e+27|0,d,4),nt(e+31|0,f,4),l[g>>2]=0,e=0|l[a>>2],x=0|l[o>>2],v=0|l[c>>2],b=0|l[h>>2],y=0|l[u>>2],_=0|l[d>>2],g=0|l[f>>2];break;case 7:e=0,x=0,v=0,b=0,y=0,_=0,g=4470064;break;default:l[s>>2]=i,mt(n,2,18393,s),e=0,x=0,v=0,b=0,y=0,_=0,g=4470064}l[A+8>>2]=e,l[A+16>>2]=x,l[A+24>>2]=v,l[A+12>>2]=b,l[A+20>>2]=y,l[A+28>>2]=_,l[A+32>>2]=g,l[p>>2]=A,l[t+112>>2]=0}return r[M>>0]=1,w=m,0|(M=1);case 2:if(y=i+-3|0,l[(_=t+112|0)>>2]=y,t=0|Ht(1,y),l[p>>2]=t,!t)return l[_>>2]=0,w=m,0|(M=0);if((0|i)>3)for(_=0;nt(g,A,1),r[(0|l[p>>2])+_>>0]=l[A>>2],(0|(_=_+1|0))!=(0|y);)g=g+1|0;return r[M>>0]=1,w=m,0|(M=1);default:return _>>>0<=2?(w=m,0|(M=1)):(l[y>>2]=_,mt(n,4,18437,y),w=m,0|(M=1))}return 0},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a=0,s=0,o=0;if(r=w,w=w+16|0,s=r,255!=(0|(a=0|l[24+(t|=0)>>2]))&&(l[s>>2]=a,mt(n,2,18040,s)),(0|l[(o=t+20|0)>>2])!=(0|i))return mt(n,1,18154,r+8|0),w=r,0|(o=0);if(!i)return w=r,0|(o=1);for(s=t+72|0,a=0;;){if(nt(e,(0|l[s>>2])+(12*a|0)+8|0,1),(a=a+1|0)>>>0>=(0|l[o>>2])>>>0){e=1;break}e=e+1|0}return w=r,0|e},function(t,e,i,n){e|=0,n|=0;var a,o,c,u,d,f=0,p=0,m=0,g=0,_=0;if(d=w,w=w+16|0,f=d,_=d+12|0,(i|=0)>>>0<3|0!=(0|l[(p=120+(t|=0)|0)>>2]))return w=d,0|(_=0);if(nt(e,_,2),((u=65535&(m=0|l[_>>2]))-1|0)>>>0>1023)return l[f>>2]=u,mt(n,1,17957,f),w=d,0|(_=0);if(nt(e+2|0,_,1),!(c=65535&l[_>>2]))return mt(n,1,17995,d+8|0),w=d,0|(_=0);if((c+3|0)>>>0>i>>>0)return w=d,0|(_=0);if(!(a=0|zt(0|C(u<<2,c))))return w=d,0|(_=0);if(!(o=0|zt(c)))return jt(a),w=d,0|(_=0);if(!(g=0|zt(c)))return jt(a),jt(o),w=d,0|(_=0);if(!(t=0|zt(20)))return jt(a),jt(o),jt(g),w=d,0|(_=0);l[t+4>>2]=g,l[t+8>>2]=o,l[t>>2]=a,s[t+16>>1]=m,r[t+18>>0]=l[_>>2],l[t+12>>2]=0,l[p>>2]=t,t=0,n=e+3|0,f=0;do{nt(n,_,1),n=n+1|0,r[o+f>>0]=1+(127&l[_>>2]),r[g+f>>0]=(0|l[_>>2])>>>7&1,f=65535&(t=t+1<<16>>16)}while(c>>>0>f>>>0);if(!u)return w=d,0|(_=1);g=e,m=0,f=a,t=n;t:for(;;){p=0,n=t,t=0;do{if((n-g+(t=(t=(7+(0|h[o+t>>0])|0)>>>3)>>>0<4?t:4)|0)>(0|i)){t=0,f=22;break t}nt(n,_,t),n=n+t|0,l[f>>2]=l[_>>2],f=f+4|0,t=65535&(p=p+1<<16>>16)}while(c>>>0>t>>>0);if(u>>>0<=(65535&(m=m+1<<16>>16))>>>0){t=1,f=22;break}t=n}return 22==(0|f)?(w=d,0|t):0},function(t,e,i,n){e|=0,i|=0,n|=0;var a,o,c,h=0,u=0;if(c=w,w=w+32|0,u=c+20|0,!(t=0|l[(o=120+(t|=0)|0)>>2]))return mt(n,1,17847,c),w=c,0|(u=0);if(0|l[t+12>>2])return mt(n,1,17893,c+8|0),w=c,0|(u=0);if((t=(a=255&(h=0|r[t+18>>0]))<<2)>>>0>i>>>0)return mt(n,1,17924,c+16|0),w=c,0|(u=0);if(!(i=0|zt(t)))return w=c,0|(u=0);if(h<<24>>24)for(t=e,h=0;nt(t,u,2),s[i+(h<<2)>>1]=l[u>>2],nt(t+2|0,u,1),r[i+(h<<2)+2>>0]=l[u>>2],nt(t+3|0,u,1),r[i+(h<<2)+3>>0]=l[u>>2],(0|(h=h+1|0))!=(0|a);)t=t+4|0;return l[12+(0|l[o>>2])>>2]=i,w=c,0|(u=1)},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,o=0,c=0;if(a=w,w=w+32|0,c=a+20|0,0|l[(r=116+(t|=0)|0)>>2])return w=a,0|(c=0);if(i>>>0<2)return mt(n,1,17753,a),w=a,0|(c=0);if(nt(e,c,2),!(t=65535&(o=0|l[c>>2])))return mt(n,1,17786,a+8|0),w=a,0|(c=0);if((2+(6*t|0)|0)>>>0>i>>>0)return mt(n,1,17753,a+16|0),w=a,0|(c=0);if(!(o=0|zt(6*o|0)))return w=a,0|(c=0);if(t=0|zt(8),l[r>>2]=t,!t)return jt(o),w=a,0|(c=0);if(l[t>>2]=o,n=65535&l[c>>2],s[t+4>>1]=n,!(n<<16>>16))return w=a,0|(c=1);t=0;do{n=65535&t,nt(e+2|0,c,2),s[o+(6*n|0)>>1]=l[c>>2],nt(e+4|0,c,2),e=e+6|0,s[o+(6*n|0)+2>>1]=l[c>>2],nt(e,c,2),s[o+(6*n|0)+4>>1]=l[c>>2],t=t+1<<16>>16}while((65535&t)<(0|d[4+(0|l[r>>2])>>1]));return w=a,0|(e=1)},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o,c=0,h=0,u=0,d=0,f=0,p=0,m=0;if(o=w,w=w+16|0,m=o+8|0,r=o,8&l[(s=68+(t|=0)|0)>>2]|0)return M=m=-1,w=o,0|(t=-1);c=0|l[(f=t+32|0)>>2],l[(a=t+36|0)>>2]=c,h=0|l[(u=t+48|0)>>2];do{if(h){for(d=t+20|0;-1!=(0|(h=0|qr[63&l[d>>2]](c,h,0|l[t>>2])));)if(c=(0|l[a>>2])+h|0,l[a>>2]=c,h=(0|l[u>>2])-h|0,l[u>>2]=h,!h){p=6;break}if(6==(0|p)){c=0|l[f>>2];break}return l[s>>2]=8|l[s>>2],mt(n,4,4360,r),l[s>>2]=8|l[s>>2],l[u>>2]=0,M=m=-1,w=o,0|(t=-1)}}while(0);l[a>>2]=c;t:do{if((0|i)>0|0==(0|i)&e>>>0>0){for(f=t+24|0,h=0,c=0;!(-1==(0|(u=0|qr[63&l[f>>2]](e,i,0|l[t>>2])))&-1==(0|(d=M)));)if(e=0|vr(0|e,0|i,0|u,0|d),i=M,h=0|br(0|u,0|d,0|h,0|c),c=M,!((0|i)>0|0==(0|i)&e>>>0>0))break t;return mt(n,4,4412,m),l[s>>2]=8|l[s>>2],m=0|br(0|l[(m=t=t+56|0)>>2],0|l[m+4>>2],0|h,0|c),l[t>>2]=m,l[t+4>>2]=M,M=m=(t=0!=(0|h)|0!=(0|c))?c:-1,w=o,0|(t=t?h:-1)}h=0,c=0}while(0);return t=0|br(0|l[(t=m=t+56|0)>>2],0|l[t+4>>2],0|h,0|c),l[m>>2]=t,l[m+4>>2]=M,M=m=c,w=o,0|(t=h)},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s=0,o=0,c=0,h=0,u=0,d=0;if(a=w,w=w+16|0,d=a,(o=0|l[(s=48+(t|=0)|0)>>2])>>>0>=e>>>0)return l[(d=t+36|0)>>2]=(0|l[d>>2])+e,l[s>>2]=o-e,t=0|br(0|l[(t=d=t+56|0)>>2],0|l[t+4>>2],0|e,0|i),l[d>>2]=t,l[d+4>>2]=M,M=d=i,w=a,0|(t=e);if(4&l[(r=t+68|0)>>2]|0)return l[(d=t+36|0)>>2]=(0|l[d>>2])+o,l[s>>2]=0,d=0|br(0|l[(d=t=t+56|0)>>2],0|l[d+4>>2],0|o,0),l[t>>2]=d,l[t+4>>2]=M,M=d=(t=0!=(0|o))?0:-1,w=a,0|(t=t?o:-1);o?(l[t+36>>2]=l[t+32>>2],e=0|vr(0|e,0|i,0|o,0),l[s>>2]=0,s=0,i=M):(o=0,s=0);t:do{if((0|i)>0|0==(0|i)&e>>>0>0){for(u=t+24|0;!(-1==(0|(c=0|qr[63&l[u>>2]](e,i,0|l[t>>2])))&-1==(0|(h=M)));)if(e=0|vr(0|e,0|i,0|c,0|h),i=M,o=0|br(0|c,0|h,0|o,0|s),s=M,!((0|i)>0|0==(0|i)&e>>>0>0))break t;return mt(n,4,4386,d),l[r>>2]=4|l[r>>2],d=0|br(0|l[(d=t=t+56|0)>>2],0|l[d+4>>2],0|o,0|s),l[t>>2]=d,l[t+4>>2]=M,M=d=(t=0!=(0|o)|0!=(0|s))?s:-1,w=a,0|(t=t?o:-1)}}while(0);return t=0|br(0|l[(t=d=t+56|0)>>2],0|l[t+4>>2],0|o,0|s),l[d>>2]=t,l[d+4>>2]=M,M=d=s,w=a,0|(t=o)},function(t,e,i,n){e|=0,i|=0,n|=0;var r,a,s,o,c=0,h=0,u=0,d=0,f=0;o=w,w=w+16|0,r=o,c=0|l[(a=32+(t|=0)|0)>>2],l[(s=t+36|0)>>2]=c,h=0|l[(f=t+48|0)>>2];do{if(h){for(u=t+20|0;-1!=(0|(h=0|qr[63&l[u>>2]](c,h,0|l[t>>2])));)if(c=(0|l[s>>2])+h|0,l[s>>2]=c,h=(0|l[f>>2])-h|0,l[f>>2]=h,!h){d=6;break}if(6==(0|d)){h=t,c=0|l[a>>2];break}return l[(f=t+68|0)>>2]=8|l[f>>2],mt(n,4,4360,r),l[f>>2]=8|l[f>>2],w=o,0|(f=0)}h=t}while(0);return l[s>>2]=c,l[f>>2]=0,0|qr[63&l[t+28>>2]](e,i,0|l[h>>2])?(l[(f=t+56|0)>>2]=e,l[f+4>>2]=i,w=o,0|(f=1)):(l[(f=t+68|0)>>2]=8|l[f>>2],w=o,0|(f=0))},et,xe,Qt,function(t,e,i,n){e|=0,i|=0,n|=0;var r=0,a=0,s=0,o=0,c=0;if(!(0|_i(0|l[(r=4+(t|=0)|0)>>2],55,n)))return 0|(n=0);if(c=0|yi(o=0|l[r>>2]),r=0|bi(o),c){for(a=1,s=0;a=a?0!=(0|qr[63&l[r>>2]](t,e,n)):0,(0|(s=s+1|0))!=(0|c);)r=r+4|0,a&=1;if(vi(o),!a)return 0|(n=0)}else vi(o);if(!(0|_i(0|l[(r=t+8|0)>>2],56,n)))return 0|(n=0);if(!(0|_i(0|l[r>>2],57,n)))return 0|(n=0);if(!(0|_i(0|l[r>>2],58,n)))return 0|(n=0);if(0|l[t+96>>2]&&0==(0|_i(0|l[r>>2],59,n)))return 0|(n=0);if(!(0|_i(0|l[r>>2],60,n)))return 0|(n=0);if(c=0|yi(o=0|l[r>>2]),r=0|bi(o),c){for(a=1,s=0;a=a?0!=(0|qr[63&l[r>>2]](t,e,n)):0,(0|(s=s+1|0))!=(0|c);)r=r+4|0,a&=1;if(vi(o),!a)return 0|(n=0)}else vi(o);return 0|(n=0|xe(0|l[t>>2],e,i,n))},function(t,e,i,n){n|=0;var a,o,c,h,u,d,f,p=0,m=0,g=0,_=0,y=0,b=0,v=0,x=0,A=0;if(f=w,w=w+80|0,x=f+64|0,u=f+56|0,o=f+48|0,v=f+40|0,h=f+32|0,c=f+24|0,!(0!=(0|(t|=0))&0!=(0|(e|=0))&0!=(0|(i|=0))))return w=f,0|(e=0);if(((0|l[(d=i+16|0)>>2])-1|0)>>>0>16383)return mt(n,1,16630,f),w=f,0|(e=0);if(!(0|Qt(0|l[t>>2],e,i,n)))return w=f,0|(e=0);if(l[t+56>>2]=1785737760,l[t+60>>2]=0,l[t+64>>2]=1,p=0|zt(4),l[t+68>>2]=p,!p)return mt(n,1,16699,f+8|0),w=f,0|(e=0);if(l[p>>2]=1785737760,b=0|l[d>>2],l[t+20>>2]=b,b=0|zt(12*b|0),l[t+72>>2]=b,!b)return mt(n,1,16699,f+16|0),w=f,0|(e=0);if(l[t+16>>2]=(0|l[i+12>>2])-(0|l[i+4>>2]),l[t+12>>2]=(0|l[i+8>>2])-(0|l[i>>2]),a=0|l[(A=i+24|0)>>2],m=0|l[a+24>>2],g=0|l[a+32>>2],l[(_=t+24|0)>>2]=m+-1+(g<<7),(y=0|l[d>>2])>>>0>1){p=1;do{(0|m)!=(0|l[a+(52*p|0)+24>>2])&&(l[_>>2]=255),p=p+1|0}while(p>>>0<y>>>0)}if(l[t+28>>2]=7,l[t+32>>2]=0,l[t+36>>2]=0,0|y&&(l[b+8>>2]=m+-1+(g<<7),1!=(0|y))){p=1;do{l[b+(12*p|0)+8>>2]=(0|l[a+(52*p|0)+24>>2])-1+(l[a+(52*p|0)+32>>2]<<7),p=p+1|0}while(p>>>0<y>>>0)}m=0|l[(p=i+32|0)>>2],g=t+40|0;t:do{if(m)l[g>>2]=2,l[t+48>>2]=0,l[t+112>>2]=m,y=0|Ht(1,m),l[t+108>>2]=y,Cr(0|y,0|l[i+28>>2],0|l[p>>2]),r[t+124>>0]=1,y=0|l[d>>2];else switch(l[g>>2]=1,0|l[i+20>>2]){case 1:l[t+48>>2]=16;break t;case 2:l[t+48>>2]=17;break t;case 3:l[t+48>>2]=18;break t;default:break t}}while(0);t:do{if(0|y){g=0|l[A>>2],_=0,p=0,m=0;do{p=p+(1&(1^(i=0==(0|s[g+(52*m|0)+48>>1]))))|0,_=i?_:m,m=m+1|0}while(m>>>0<y>>>0);switch(0|p){case 0:break t;case 1:break;default:mt(n,2,16995,o);break t}switch(0|l[t+48>>2]){case 18:case 16:p=3;break;case 17:p=1;break;default:mt(n,2,16745,c);break t}if(y>>>0<=p>>>0){mt(n,2,16819,h);break}if(_>>>0<p>>>0){mt(n,2,16912,v);break}if(v=0|zt(8),l[(m=t+116|0)>>2]=v,!v)return mt(n,1,17060,u),w=f,0|(e=0);if(_=0|zt(6*(0|l[d>>2])|0),m=0|l[m>>2],l[m>>2]=_,!_)return mt(n,1,17060,x),w=f,0|(e=0);g=0|l[d>>2],s[m+4>>1]=g,m=0;do{s[_+(6*m|0)>>1]=m,s[_+(6*m|0)+2>>1]=0,x=m,m=m+1|0,s[_+(6*x|0)+4>>1]=m}while((0|m)!=(0|p));if(p>>>0<g>>>0){m=0|l[A>>2];do{A=0==(0|s[m+(52*p|0)+48>>1]),s[_+(6*p|0)>>1]=p,s[_+(6*p|0)+2>>1]=A?-1:1,s[_+(6*p|0)+4>>1]=A<<31>>31,p=p+1|0}while(p>>>0<g>>>0)}}}while(0);return l[t+52>>2]=0,l[t+44>>2]=0,l[t+96>>2]=l[e+18692>>2],w=f,0|(e=1)},fe,te,function(t,e,i,n){t|=0,e|=0,n|=0;var r,a,s,o=0;if(s=w,w=w+16|0,!(i|=0))return w=s,0|(i=0);if(!(0|fe(0|l[t>>2],e,i,n)))return mt(n,1,16201,s),w=s,0|(i=0);if(0|l[t+128>>2])return w=s,0|(i=1);if(!(0|Ee(i,a=t+108|0,n)))return w=s,0|(i=0);switch(0|(e=0|l[t+48>>2])){case 16:l[i+20>>2]=1;break;case 17:l[i+20>>2]=2;break;case 18:l[i+20>>2]=3;break;case 24:l[i+20>>2]=4;break;default:l[i+20>>2]=12==(0|e)?5:-1}e=0|l[(r=t+120|0)>>2];do{if(0|e){if(0|l[e+12>>2]){Te(i,a);break}jt(0|l[e+4>>2]),jt(0|l[8+(0|l[r>>2])>>2]),jt(0|l[l[r>>2]>>2]),e=0|l[r>>2],(o=0|l[e+12>>2])&&(jt(o),e=0|l[r>>2]),jt(e),l[r>>2]=0}}while(0);return 0|l[t+116>>2]&&Ie(i,a,n),(e=0|l[a>>2])?(l[i+28>>2]=e,l[i+32>>2]=l[t+112>>2],l[a>>2]=0,w=s,0|(i=1)):(w=s,0|(i=1))},function(t,e,i,n){t|=0,i|=0,n|=0;var r,a=0,s=0,o=0,c=0,h=0;if(!(0|_i(0|l[(c=8+(e|=0)|0)>>2],53,n)))return 0|(n=0);if(r=0|yi(h=0|l[e+4>>2]),a=0|bi(h),r){for(s=1,o=0;s=s?0!=(0|qr[63&l[a>>2]](e,t,n)):0,(0|(o=o+1|0))!=(0|r);)a=a+4|0,s&=1;if(vi(h),!s)return 0|(n=0)}else vi(h);if(h=0|yi(c=0|l[c>>2]),a=0|bi(c),h){for(s=1,o=0;s=s?0!=(0|qr[63&l[a>>2]](e,t,n)):0,(0|(o=o+1|0))!=(0|h);)a=a+4|0,s&=1;if(vi(c),!s)return 0|(n=0)}else vi(c);return 0|(n=0|te(t,0|l[e>>2],i,n))},Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr,Fr],Kr=[Nr,me,function(t,e,i,n,r){var a,s,o;if(t|=0,e|=0,n|=0,r|=0,o=w,w=w+16|0,!(i|=0))return w=o,0|(i=0);if(mt(n,2,19580,o),!(0|me(0|l[t>>2],e,i,n,r)))return mt(n,1,16201,o+8|0),w=o,0|(i=0);if(!(0|Ee(i,s=t+108|0,n)))return w=o,0|(i=0);switch(0|(e=0|l[t+48>>2])){case 16:l[i+20>>2]=1;break;case 17:l[i+20>>2]=2;break;case 18:l[i+20>>2]=3;break;case 24:l[i+20>>2]=4;break;default:l[i+20>>2]=12==(0|e)?5:-1}e=0|l[(a=t+120|0)>>2];do{if(0|e){if(0|l[e+12>>2]){Te(i,s);break}jt(0|l[e+4>>2]),jt(0|l[8+(0|l[a>>2])>>2]),jt(0|l[l[a>>2]>>2]),e=0|l[a>>2],(r=0|l[e+12>>2])&&(jt(r),e=0|l[a>>2]),jt(e),l[a>>2]=0}}while(0);return 0|l[t+116>>2]&&Ie(i,s,n),(e=0|l[s>>2])?(l[i+28>>2]=e,l[i+32>>2]=l[t+112>>2],l[s>>2]=0,w=o,0|(i=1)):(w=o,0|(i=1))},Nr],$r=[zr,Se,function(t,e,i,n,r,a){return e|=0,i|=0,n|=0,r|=0,a|=0,0|Se(0|l[(t|=0)>>2],e,i,n,r,a)},re,function(t,e,i,n,r,a){return e|=0,i|=0,n|=0,r|=0,a|=0,0|re(0|l[(t|=0)>>2],e,i,n,r,a)},zr,zr,zr],ta=[Hr,ae,function(t,e,i,n,r,a,s){return e|=0,i|=0,n|=0,r|=0,a|=0,s|=0,0|ae(0|l[(t|=0)>>2],e,i,n,r,a,s)},Hr],ea=[Ur,ne,function(t,e,i,n,r,a,s,o,c,h,u){return e|=0,i|=0,n|=0,r|=0,a|=0,s|=0,o|=0,c|=0,h|=0,u|=0,0|ne(0|l[(t|=0)>>2],e,i,n,r,a,s,o,c,h,u)},Ur],ia=[Vr,Xt,Ce,function(t){var e,i,n=0,r=0,a=0;if(n=0|l[(i=24+(t|=0)|0)>>2]){if(e=((a=0|l[t+28>>2])>>>0)/52|0,a>>>0>51){for(a=0;0|(t=0|l[n>>2])&&(jt(t+-1|0),l[n>>2]=0),0|(r=0|l[(t=n+4|0)>>2])&&(jt(r),l[t>>2]=0),0|(r=0|l[(t=n+8|0)>>2])&&(jt(r),l[t>>2]=0),!((a=a+1|0)>>>0>=e>>>0);)n=n+52|0;n=0|l[i>>2]}jt(n),l[i>>2]=0}},function(t){var e,i,n=0,r=0,a=0;if(n=0|l[(i=24+(t|=0)|0)>>2]){if(e=((a=0|l[t+28>>2])>>>0)/56|0,a>>>0>55){for(a=0;0|(t=0|l[n>>2])&&(jt(t),l[n>>2]=0),0|(r=0|l[(t=n+4|0)>>2])&&(jt(r),l[t>>2]=0),!((a=a+1|0)>>>0>=e>>>0);)n=n+56|0;n=0|l[i>>2]}jt(n),l[i>>2]=0}},Vr,Vr,Vr],na=[Wr,function(t,e){},function(t,e){},function(t,e){var i;t|=0,e|=0,e=w,w=w+16|0,l[(i=e)>>2]=t,function(t,e){t|=0,e|=0;var i=0,n=0;i=w,w=w+16|0,l[(n=i)>>2]=e,e=0|jn(0|l[665],t,n),w=i}(4200,i),w=e},function(t,e){},Zt,function(t,e){e|=0,Zt(0|l[(t|=0)>>2],e),r[t+124>>0]=0,l[t+128>>2]=1&l[e+8248>>2]},Wr],ra=[jr,function(t,e,i){t|=0,e|=0;var n=0;if(i|=0)for(n=0;it(e,~~+m[t>>2]>>>0,2),(0|(n=n+1|0))!=(0|i);)t=t+4|0,e=e+2|0},function(t,e,i){t|=0,e|=0;var n=0;if(i|=0)for(n=0;it(e,~~+m[t>>2]>>>0,4),(0|(n=n+1|0))!=(0|i);)t=t+4|0,e=e+4|0},function(t,e,i){t|=0,e|=0;var n=0;if(i|=0)for(n=0;st(e,+m[t>>2]),(0|(n=n+1|0))!=(0|i);)t=t+4|0,e=e+4|0},function(t,e,i){t|=0,e|=0;var n=0;if(i|=0)for(n=0;rt(e,+m[t>>2]),(0|(n=n+1|0))!=(0|i);)t=t+4|0,e=e+8|0},function(t,e,i){t|=0,e|=0;var n,r,a=0;if(r=w,w=w+16|0,n=r,i|=0){for(a=0;nt(t,n,2),m[e>>2]=+((0|l[n>>2])>>>0),(0|(a=a+1|0))!=(0|i);)e=e+4|0,t=t+2|0;w=r}else w=r},function(t,e,i){t|=0,e|=0;var n,r,a=0;if(r=w,w=w+16|0,n=r,i|=0){for(a=0;nt(t,n,4),m[e>>2]=+((0|l[n>>2])>>>0),(0|(a=a+1|0))!=(0|i);)e=e+4|0,t=t+4|0;w=r}else w=r},function(t,e,i){t|=0,e|=0;var n,r,a=0;if(r=w,w=w+16|0,n=r,i|=0){for(a=0;ot(t,n),l[e>>2]=l[n>>2],(0|(a=a+1|0))!=(0|i);)e=e+4|0,t=t+4|0;w=r}else w=r},function(t,e,i){t|=0,e|=0;var n,r,a=0;if(r=w,w=w+16|0,n=r,i|=0){for(a=0;at(t,n),m[e>>2]=+_[n>>3],(0|(a=a+1|0))!=(0|i);)e=e+4|0,t=t+8|0;w=r}else w=r},function(t,e,i){t|=0,e|=0;var n,r,a=0;if(r=w,w=w+16|0,n=r,i|=0){for(a=0;nt(t,n,2),l[e>>2]=l[n>>2],(0|(a=a+1|0))!=(0|i);)e=e+4|0,t=t+2|0;w=r}else w=r},function(t,e,i){t|=0,e|=0;var n,r,a=0;if(r=w,w=w+16|0,n=r,i|=0){for(a=0;nt(t,n,4),l[e>>2]=l[n>>2],(0|(a=a+1|0))!=(0|i);)e=e+4|0,t=t+4|0;w=r}else w=r},function(t,e,i){t|=0,e|=0;var n,r,a=0;if(r=w,w=w+16|0,n=r,i|=0){for(a=0;ot(t,n),l[e>>2]=~~+m[n>>2],(0|(a=a+1|0))!=(0|i);)e=e+4|0,t=t+4|0;w=r}else w=r},function(t,e,i){t|=0,e|=0;var n,r,a=0;if(r=w,w=w+16|0,n=r,i|=0){for(a=0;at(t,n),l[e>>2]=~~+_[n>>3],(0|(a=a+1|0))!=(0|i);)e=e+4|0,t=t+8|0;w=r}else w=r},oe,function(t,e,i){e|=0,i|=0,oe(0|l[(t|=0)>>2],e,i)},jr],aa=[Zr,function(t,e,i,n){t|=0,e|=0,i|=0;var r=0,a=0,s=0;if(n|=0)if(1==(0|e)&0==(0|i))l[t>>2]=l[t>>2]<<1;else{if((0|e)>0){r=i+-1|0,n=0;do{l[(s=t+(n<<1<<2)|0)>>2]=(0|l[s>>2])-((0|l[t+(((0|n)<1?1:(((0|n)>(0|i)?i:n)<<1)-1|0)<<2)>>2])+(0|l[t+((((0|n)>=(0|i)?r:n)<<1|1)<<2)>>2])>>1),n=n+1|0}while((0|n)!=(0|e))}if(!((0|i)<=0)){r=e+-1|0,n=0;do{a=n,n=n+1|0,l[(s=t+((a<<1|1)<<2)|0)>>2]=(2+(0|l[t+(((0|a)>=(0|e)?r:a)<<1<<2)>>2])+(0|l[t+(((0|n)>=(0|e)?r:n)<<1<<2)>>2])>>2)+(0|l[s>>2])}while((0|n)!=(0|i))}}else{if(!((n=(0|e)>0)|(0|i)>1))return;if(n){r=i+-1|0,n=0;do{s=n,n=n+1|0,l[(a=t+((s<<1|1)<<2)|0)>>2]=(0|l[a>>2])-((0|l[t+(((0|n)>=(0|i)?r:n)<<1<<2)>>2])+(0|l[t+(((0|s)>=(0|i)?r:s)<<1<<2)>>2])>>1)}while((0|n)!=(0|e))}if((0|i)<=0)return;r=e+-1|0,n=0;do{l[(s=t+(n<<1<<2)|0)>>2]=(2+(0|l[t+(((0|n)<1?1:(((0|n)>(0|e)?e:n)<<1)-1|0)<<2)>>2])+(0|l[t+((((0|n)>=(0|e)?r:n)<<1|1)<<2)>>2])>>2)+(0|l[s>>2]),n=n+1|0}while((0|n)!=(0|i))}},function(t,e,i,n){t|=0,e|=0,i|=0;var r=0,a=0,s=0,o=0,c=0;if(n|=0){if(!((0|e)>1|(s=(0|i)>0)))return;if(a=(0|e)>0){r=i+-1|0,n=0;do{o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=(0|l[t+(((0|n)<1?1:(((0|n)>(0|i)?i:n)<<1)-1|0)<<2)>>2])+(0|l[t+((((0|n)>=(0|i)?r:n)<<1|1)<<2)>>2])|0),((0|o)<0)<<31>>31|0,12993,0)),0|M,4096,0)),0|M,13),l[(c=t+(n<<1<<2)|0)>>2]=(0|l[c>>2])-o,n=n+1|0}while((0|n)!=(0|e))}if(s){r=e+-1|0,n=0;do{c=n,o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=(0|l[t+(((0|(n=n+1|0))>=(0|e)?r:n)<<1<<2)>>2])+(0|l[t+(((0|c)>=(0|e)?r:c)<<1<<2)>>2])|0),((0|o)<0)<<31>>31|0,434,0)),0|M,4096,0)),0|M,13),l[(c=t+((c<<1|1)<<2)|0)>>2]=(0|l[c>>2])-o}while((0|n)!=(0|i))}if(a){r=i+-1|0,n=0;do{o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=(0|l[t+(((0|n)<1?1:(((0|n)>(0|i)?i:n)<<1)-1|0)<<2)>>2])+(0|l[t+((((0|n)>=(0|i)?r:n)<<1|1)<<2)>>2])|0),((0|o)<0)<<31>>31|0,7233,0)),0|M,4096,0)),0|M,13),l[(c=t+(n<<1<<2)|0)>>2]=(0|l[c>>2])+o,n=n+1|0}while((0|n)!=(0|e))}if(s){r=e+-1|0,n=0;do{c=n,o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=(0|l[t+(((0|(n=n+1|0))>=(0|e)?r:n)<<1<<2)>>2])+(0|l[t+(((0|c)>=(0|e)?r:c)<<1<<2)>>2])|0),((0|o)<0)<<31>>31|0,3633,0)),0|M,4096,0)),0|M,13),l[(c=t+((c<<1|1)<<2)|0)>>2]=(0|l[c>>2])+o}while((0|n)!=(0|i))}if(a){n=0;do{o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=0|l[(c=t+(n<<1<<2)|0)>>2]),((0|o)<0)<<31>>31|0,5038,0)),0|M,4096,0)),0|M,13),l[c>>2]=o,n=n+1|0}while((0|n)!=(0|e))}if(!s)return;n=0;do{o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=0|l[(c=t+((n<<1|1)<<2)|0)>>2]),((0|o)<0)<<31>>31|0,6659,0)),0|M,4096,0)),0|M,13),l[c>>2]=o,n=n+1|0}while((0|n)!=(0|i))}else if((s=(0|e)>0)|(0|i)>1){if(s){r=i+-1|0,n=0;do{a=n,o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=(0|l[t+(((0|(n=n+1|0))>=(0|i)?r:n)<<1<<2)>>2])+(0|l[t+(((0|a)>=(0|i)?r:a)<<1<<2)>>2])|0),((0|o)<0)<<31>>31|0,12993,0)),0|M,4096,0)),0|M,13),l[(a=t+((a<<1|1)<<2)|0)>>2]=(0|l[a>>2])-o}while((0|n)!=(0|e))}if(a=(0|i)>0){r=e+-1|0,n=0;do{c=0|Er(0|(c=0|br(0|(c=0|yr(0|(c=(0|l[t+((((0|n)>=(0|e)?r:n)<<1|1)<<2)>>2])+(0|l[t+(((0|n)<1?1:(((0|n)>(0|e)?e:n)<<1)-1|0)<<2)>>2])|0),((0|c)<0)<<31>>31|0,434,0)),0|M,4096,0)),0|M,13),l[(o=t+(n<<1<<2)|0)>>2]=(0|l[o>>2])-c,n=n+1|0}while((0|n)!=(0|i))}if(s){r=i+-1|0,n=0;do{c=n,o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=(0|l[t+(((0|(n=n+1|0))>=(0|i)?r:n)<<1<<2)>>2])+(0|l[t+(((0|c)>=(0|i)?r:c)<<1<<2)>>2])|0),((0|o)<0)<<31>>31|0,7233,0)),0|M,4096,0)),0|M,13),l[(c=t+((c<<1|1)<<2)|0)>>2]=(0|l[c>>2])+o}while((0|n)!=(0|e))}if(a){r=e+-1|0,n=0;do{o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=(0|l[t+((((0|n)>=(0|e)?r:n)<<1|1)<<2)>>2])+(0|l[t+(((0|n)<1?1:(((0|n)>(0|e)?e:n)<<1)-1|0)<<2)>>2])|0),((0|o)<0)<<31>>31|0,3633,0)),0|M,4096,0)),0|M,13),l[(c=t+(n<<1<<2)|0)>>2]=(0|l[c>>2])+o,n=n+1|0}while((0|n)!=(0|i))}if(s){n=0;do{o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=0|l[(c=t+((n<<1|1)<<2)|0)>>2]),((0|o)<0)<<31>>31|0,5038,0)),0|M,4096,0)),0|M,13),l[c>>2]=o,n=n+1|0}while((0|n)!=(0|e))}if(a){n=0;do{o=0|Er(0|(o=0|br(0|(o=0|yr(0|(o=0|l[(c=t+(n<<1<<2)|0)>>2]),((0|o)<0)<<31>>31|0,6659,0)),0|M,4096,0)),0|M,13),l[c>>2]=o,n=n+1|0}while((0|n)!=(0|i))}}},Zr];return{___muldi3:yr,___udivdi3:Ar,___uremdi3:Mr,_bitshift64Ashr:Sr,_bitshift64Lshr:Er,_bitshift64Shl:Tr,_emscripten_replace_memory:function(t){return!(16777215&y(t)||y(t)<=16777215||y(t)>2147483648||(r=new n(t),s=new a(t),l=new o(t),h=new c(t),d=new u(t),new f(t),m=new p(t),_=new g(t),i=t,0))},_free:_n,_i64Add:br,_i64Subtract:vr,_jp2_decode:function(t,e,i,n,r,a,s,o,c,h,u){t|=0,e|=0,i|=0,n|=0,r|=0,a|=0,s|=0,o|=0,c|=0,h|=0,u|=0;var d,f,p,m=0,g=0;if(p=w,w=w+8272|0,g=p+16|0,m=p,l[(d=p+12|0)>>2]=0,Bt(f=0|xt(1375686655==(0|l[t>>2])?0:2),1,0),Lt(f,2,0),Pt(f,3,0),Ct(g),l[m>>2]=t,l[m+4>>2]=t,l[m+8>>2]=e,m=0|Gt(m,1),!(0|Rt(f,g)))return gr(4211),X(m),Mt(f),w=p,0|(g=1);if(!(0|It(m,f,d)))return gr(4263),X(m),Mt(f),yt(0|l[d>>2]),w=p,0|(g=1);if(!(0|At(f,m,0|l[d>>2])))return gr(4313),Mt(f),X(m),yt(0|l[d>>2]),w=p,0|(g=1);switch(t=0|l[d>>2],l[r>>2]=l[t+8>>2],l[a>>2]=l[t+12>>2],l[s>>2]=l[t+16>>2],g=0|l[(e=t+24|0)>>2],l[c>>2]=l[g+24>>2],l[h>>2]=l[g+32>>2],l[o>>2]=l[g+28>>2],l[u>>2]=l[t+20>>2],t=0|C(0|C(l[r>>2]<<2,0|l[a>>2]),0|l[s>>2]),l[n>>2]=t,h=0|gn(t),l[i>>2]=h,0|l[s>>2]){case 1:Cr(0|h,0|l[44+(0|l[e>>2])>>2],0|t);break;case 3:if((0|(c=0|C(0|l[a>>2],0|l[r>>2])))>0){o=0|l[e>>2],e=0|l[o+44>>2],u=0|l[o+96>>2],o=0|l[o+148>>2],t=0;do{l[h+((g=3*t|0)<<2)>>2]=l[e+(t<<2)>>2],l[h+(g+1<<2)>>2]=l[u+(t<<2)>>2],l[h+(g+2<<2)>>2]=l[o+(t<<2)>>2],t=t+1|0}while((0|t)<(0|c))}}return X(m),Mt(f),yt(0|l[d>>2]),w=p,0|(g=0)},_jp2_encode:function(t,e,i,n,r,a,s,o,c,u){t|=0,e|=0,i|=0,n|=0,r|=0,a|=0,s|=0,o|=0,c|=0,u|=0;var f,p,g,_=0,y=0,b=0,v=0,x=0,A=0,M=0;g=w,w=w+18880|0,_=g+16|0,x=g,kt(p=g+160|0),l[p+18200>>2]=0,l[p+4788>>2]=1,l[p+20>>2]=1;t:do{if(r)m[p+4792>>2]=+(0|r);else switch(0|n){case 0:case 100:m[p+4792>>2]=0;break t;default:m[p+5192>>2]=+(0|n),l[p+28>>2]=1;break t}}while(0);if(l[_+24>>2]=i,l[_+28>>2]=i,l[_+32>>2]=0,l[_>>2]=1,l[_+4>>2]=1,l[_+8>>2]=t,l[_+12>>2]=e,l[_+60>>2]=i,l[_+64>>2]=i,l[_+68>>2]=0,l[_+36>>2]=1,l[_+40>>2]=1,l[_+44>>2]=t,l[_+48>>2]=e,l[_+96>>2]=i,l[_+100>>2]=i,l[_+104>>2]=0,l[_+72>>2]=1,l[_+76>>2]=1,l[_+80>>2]=t,l[_+84>>2]=e,l[_+132>>2]=i,l[_+136>>2]=i,l[_+140>>2]=0,l[_+108>>2]=1,l[_+112>>2]=1,l[_+116>>2]=t,l[_+120>>2]=e,!(f=0|_t(4,_,1)))return w=g,0|(u=0);if(16==(0|i)){if((0|e)>0&(0|t)>0){b=0|l[f+24>>2],r=0|l[b+200>>2],i=0|l[b+44>>2],y=0|l[b+96>>2],b=0|l[b+148>>2],_=0;do{v=0|C(_,t),n=0;do{M=(A=n+v|0)<<2,l[i+(A<<2)>>2]=d[a+(M<<1)>>1],l[y+(A<<2)>>2]=d[a+((1|M)<<1)>>1],l[b+(A<<2)>>2]=d[a+((2|M)<<1)>>1],l[r+(A<<2)>>2]=d[a+((3|M)<<1)>>1],n=n+1|0}while((0|n)!=(0|t));_=_+1|0}while((0|_)!=(0|e))}}else if((0|e)>0&(0|t)>0){b=0|l[f+24>>2],r=0|l[b+200>>2],i=0|l[b+44>>2],y=0|l[b+96>>2],b=0|l[b+148>>2],_=0;do{v=0|C(_,t),n=0;do{A=(M=n+v|0)<<2,l[i+(M<<2)>>2]=h[a+A>>0],l[y+(M<<2)>>2]=h[a+(1|A)>>0],l[b+(M<<2)>>2]=h[a+(2|A)>>0],l[r+(M<<2)>>2]=h[a+(3|A)>>0],n=n+1|0}while((0|n)!=(0|t));_=_+1|0}while((0|_)!=(0|e))}return l[f>>2]=0,l[f+4>>2]=0,l[f+8>>2]=t,l[f+12>>2]=e,(0|o)>0&&(l[f+28>>2]=s,l[f+32>>2]=o),Bt(0,1,0),Lt(0,2,0),Pt(0,3,0),Bt(r=0|wt(2),1,0),Lt(r,2,0),Pt(r,3,0),Dt(r,p,f),n=0|gn(67108864),l[x>>2]=n,l[(_=x+4|0)>>2]=n,l[x+8>>2]=67108864,(n=0|Gt(x,0))?0|Ot(r,f,n)&&0|Et(r,n)&&0|Tt(r,n)?(A=0|l[x>>2],x=0|gn(M=(0|l[_>>2])-A|0),l[c>>2]=x,Cr(0|x,0|A,0|M),l[u>>2]=M,X(n),Mt(r),yt(f),w=g,0|(M=1)):(X(n),Mt(r),yt(f),w=g,0|(M=0)):(w=g,0|(M=0))},_jp2_version:function(){return 4427},_llvm_bswap_i32:Ir,_malloc:gn,_memcpy:Cr,_memset:kr,_opj_create_compress:wt,_opj_create_decompress:xt,_opj_decode:At,_opj_decode_tile_data:function(t,e,i,n,r){return e|=0,n|=0,0!=(0|(t|=0))&0!=(0|(i|=0))&0!=(0|(r|=0))&&0|l[t+68>>2]?0|(r=0|$r[7&l[t+12>>2]](0|l[t+40>>2],e,i,n,r,t+44|0)):0|(r=0)},_opj_destroy_codec:Mt,_opj_destroy_cstr_index:function(t){var e;(e=0|l[(t|=0)>>2])&&(qt(e),l[t>>2]=0)},_opj_destroy_cstr_info:St,_opj_dump_codec:function(t,e,i){e|=0,i|=0,(t|=0)&&ra[15&l[t+72>>2]](0|l[t+40>>2],e,i)},_opj_encode:Et,_opj_end_compress:Tt,_opj_end_decompress:function(t,e){return 0!=(0|(t|=0))&0!=(0|(e|=0))&&0|l[t+68>>2]?0|(e=0|qr[63&l[t+16>>2]](0|l[t+40>>2],e,t+44|0)):0|(e=0)},_opj_get_cstr_index:function(t){return(t|=0)?0|(t=0|Xr[15&l[t+80>>2]](0|l[t+40>>2])):0|(t=0)},_opj_get_cstr_info:function(t){return(t|=0)?0|(t=0|Xr[15&l[t+76>>2]](0|l[t+40>>2])):0|(t=0)},_opj_get_decoded_tile:function(t,e,i,n){return i|=0,n|=0,0!=(0|(t|=0))&0!=(0|(e|=0))&&0|l[t+68>>2]?0|(n=0|Kr[3&l[t+32>>2]](0|l[t+40>>2],e,i,t+44|0,n)):0|(n=0)},_opj_image_create:_t,_opj_image_destroy:yt,_opj_image_tile_create:function(t,e,i){var n,r;if(t|=0,e|=0,i|=0,!(n=0|Ht(1,36)))return 0|(e=n);if(l[n+20>>2]=i,l[n+16>>2]=t,r=0|Ht(t,52),l[n+24>>2]=r,r){if(!t)return 0|(e=n);i=0;do{l[r+(52*i|0)>>2]=l[e+(36*i|0)>>2],l[r+(52*i|0)+4>>2]=l[e+(36*i|0)+4>>2],l[r+(52*i|0)+8>>2]=l[e+(36*i|0)+8>>2],l[r+(52*i|0)+12>>2]=l[e+(36*i|0)+12>>2],l[r+(52*i|0)+16>>2]=l[e+(36*i|0)+16>>2],l[r+(52*i|0)+20>>2]=l[e+(36*i|0)+20>>2],l[r+(52*i|0)+24>>2]=l[e+(36*i|0)+24>>2],l[r+(52*i|0)+32>>2]=l[e+(36*i|0)+32>>2],l[r+(52*i|0)+44>>2]=0,i=i+1|0}while((0|i)!=(0|t));return 0|n}return 0|(i=0|l[n+28>>2])&&jt(i),jt(n),0|(e=0)},_opj_read_header:It,_opj_read_tile_header:function(t,e,i,n,r,a,s,o,c,h){return r|=0,a|=0,s|=0,o|=0,c|=0,h|=0,0!=(0|(i|=0))&0!=(0|(t|=0))&0!=(0|(e|=0))&0!=(0|(n|=0))&&0|l[t+68>>2]?0|(h=0|ea[3&l[t+8>>2]](0|l[t+40>>2],i,n,r,a,s,o,c,h,e,t+44|0)):0|(h=0)},_opj_set_MCT:function(t,e,i,n){t|=0,e|=0,i|=0;var a,o=0,c=0;return a=0|C(c=(n|=0)<<2,n),n=0|d[(o=t+18704|0)>>1],s[o>>1]=0==(32768&n|0)?-32512:65535&(256|n),l[t+5608>>2]=1,r[t+18690>>0]=2,o=0|zt(a+c|0),l[(n=t+18696|0)>>2]=o,o?(Cr(0|o,0|e,0|a),Cr((0|l[n>>2])+a|0,0|i,0|c),0|(c=1)):0|(c=0)},_opj_set_decode_area:function(t,e,i,n,r,a){return e|=0,i|=0,n|=0,r|=0,a|=0,(t|=0)&&0|l[t+68>>2]?0|(a=0|ta[3&l[t+28>>2]](0|l[t+40>>2],e,i,n,r,a,t+44|0)):0|(a=0)},_opj_set_decoded_resolution_factor:function(t,e){return e|=0,(t|=0)?0|(e=0|qr[63&l[t+36>>2]](0|l[t+40>>2],e,t+44|0)):0|(e=0)},_opj_set_default_decoder_parameters:Ct,_opj_set_default_encoder_parameters:kt,_opj_set_error_handler:Pt,_opj_set_info_handler:Bt,_opj_set_warning_handler:Lt,_opj_setup_decoder:Rt,_opj_setup_encoder:Dt,_opj_start_compress:Ot,_opj_stream_create:Z,_opj_stream_create_buffer_stream:Gt,_opj_stream_create_default_file_stream:function(t,e){return 0|Ft(t|=0,1048576,e|=0)},_opj_stream_create_file_stream:Ft,_opj_stream_default_create:Y,_opj_stream_destroy:X,_opj_stream_set_read_function:J,_opj_stream_set_seek_function:q,_opj_stream_set_skip_function:Q,_opj_stream_set_user_data:K,_opj_stream_set_user_data_length:$,_opj_stream_set_write_function:tt,_opj_version:Nt,_opj_write_tile:function(t,e,i,n,r){return e|=0,n|=0,0!=(0|(i|=0))&0!=(0|(t|=0))&0!=(0|(r|=0))?0|l[t+68>>2]?0|(r=0):0|(r=0|$r[7&l[t+8>>2]](0|l[t+40>>2],e,i,n,r,t+44|0)):0|(r=0)},_rintf:Br,_sbrk:Lr,dynCall_di:function(t,e){return e|=0,+Yr[3&(t|=0)](0|e)},dynCall_ii:function(t,e){return e|=0,0|Xr[15&(t|=0)](0|e)},dynCall_iii:function(t,e,i){return e|=0,i|=0,0|Jr[7&(t|=0)](0|e,0|i)},dynCall_iiii:function(t,e,i,n){return e|=0,i|=0,n|=0,0|qr[63&(t|=0)](0|e,0|i,0|n)},dynCall_iiiii:function(t,e,i,n,r){return e|=0,i|=0,n|=0,r|=0,0|Qr[63&(t|=0)](0|e,0|i,0|n,0|r)},dynCall_iiiiii:function(t,e,i,n,r,a){return e|=0,i|=0,n|=0,r|=0,a|=0,0|Kr[3&(t|=0)](0|e,0|i,0|n,0|r,0|a)},dynCall_iiiiiii:function(t,e,i,n,r,a,s){return e|=0,i|=0,n|=0,r|=0,a|=0,s|=0,0|$r[7&(t|=0)](0|e,0|i,0|n,0|r,0|a,0|s)},dynCall_iiiiiiii:function(t,e,i,n,r,a,s,o){return e|=0,i|=0,n|=0,r|=0,a|=0,s|=0,o|=0,0|ta[3&(t|=0)](0|e,0|i,0|n,0|r,0|a,0|s,0|o)},dynCall_iiiiiiiiiiii:function(t,e,i,n,r,a,s,o,l,c,h,u){return e|=0,i|=0,n|=0,r|=0,a|=0,s|=0,o|=0,l|=0,c|=0,h|=0,u|=0,0|ea[3&(t|=0)](0|e,0|i,0|n,0|r,0|a,0|s,0|o,0|l,0|c,0|h,0|u)},dynCall_vi:function(t,e){e|=0,ia[7&(t|=0)](0|e)},dynCall_vii:function(t,e,i){e|=0,i|=0,na[7&(t|=0)](0|e,0|i)},dynCall_viii:function(t,e,i,n){e|=0,i|=0,n|=0,ra[15&(t|=0)](0|e,0|i,0|n)},dynCall_viiii:function(t,e,i,n,r){e|=0,i|=0,n|=0,r|=0,aa[3&(t|=0)](0|e,0|i,0|n,0|r)},establishStackSpace:function(t,e){w=t|=0,0},getTempRet0:function(){return 0|M},runPostSets:function(){},setTempRet0:function(t){M=t|=0},setThrew:function(t,e){t|=0,0,A||(A=t)},stackAlloc:function(t){var e;return e=w,w=15+(w=w+(t|=0)|0)&-16,0|e},stackRestore:function(t){w=t|=0},stackSave:function(){return 0|w}}}(a.asmGlobalArg,a.asmLibraryArg,T),kt=(a.___muldi3=Ct.___muldi3,a.___udivdi3=Ct.___udivdi3,a.___uremdi3=Ct.___uremdi3,a._bitshift64Ashr=Ct._bitshift64Ashr,a._bitshift64Lshr=Ct._bitshift64Lshr,a._bitshift64Shl=Ct._bitshift64Shl,a._emscripten_replace_memory=Ct._emscripten_replace_memory),Pt=(a._free=Ct._free,a._i64Add=Ct._i64Add,a._i64Subtract=Ct._i64Subtract,a._jp2_decode=Ct._jp2_decode,a._jp2_encode=Ct._jp2_encode,a._jp2_version=Ct._jp2_version,a._llvm_bswap_i32=Ct._llvm_bswap_i32,a._malloc=Ct._malloc),Bt=(a._memcpy=Ct._memcpy,a._memset=Ct._memset,a._opj_create_compress=Ct._opj_create_compress,a._opj_create_decompress=Ct._opj_create_decompress,a._opj_decode=Ct._opj_decode,a._opj_decode_tile_data=Ct._opj_decode_tile_data,a._opj_destroy_codec=Ct._opj_destroy_codec,a._opj_destroy_cstr_index=Ct._opj_destroy_cstr_index,a._opj_destroy_cstr_info=Ct._opj_destroy_cstr_info,a._opj_dump_codec=Ct._opj_dump_codec,a._opj_encode=Ct._opj_encode,a._opj_end_compress=Ct._opj_end_compress,a._opj_end_decompress=Ct._opj_end_decompress,a._opj_get_cstr_index=Ct._opj_get_cstr_index,a._opj_get_cstr_info=Ct._opj_get_cstr_info,a._opj_get_decoded_tile=Ct._opj_get_decoded_tile,a._opj_image_create=Ct._opj_image_create,a._opj_image_destroy=Ct._opj_image_destroy,a._opj_image_tile_create=Ct._opj_image_tile_create,a._opj_read_header=Ct._opj_read_header,a._opj_read_tile_header=Ct._opj_read_tile_header,a._opj_set_MCT=Ct._opj_set_MCT,a._opj_set_decode_area=Ct._opj_set_decode_area,a._opj_set_decoded_resolution_factor=Ct._opj_set_decoded_resolution_factor,a._opj_set_default_decoder_parameters=Ct._opj_set_default_decoder_parameters,a._opj_set_default_encoder_parameters=Ct._opj_set_default_encoder_parameters,a._opj_set_error_handler=Ct._opj_set_error_handler,a._opj_set_info_handler=Ct._opj_set_info_handler,a._opj_set_warning_handler=Ct._opj_set_warning_handler,a._opj_setup_decoder=Ct._opj_setup_decoder,a._opj_setup_encoder=Ct._opj_setup_encoder,a._opj_start_compress=Ct._opj_start_compress,a._opj_stream_create=Ct._opj_stream_create,a._opj_stream_create_buffer_stream=Ct._opj_stream_create_buffer_stream,a._opj_stream_create_default_file_stream=Ct._opj_stream_create_default_file_stream,a._opj_stream_create_file_stream=Ct._opj_stream_create_file_stream,a._opj_stream_default_create=Ct._opj_stream_default_create,a._opj_stream_destroy=Ct._opj_stream_destroy,a._opj_stream_set_read_function=Ct._opj_stream_set_read_function,a._opj_stream_set_seek_function=Ct._opj_stream_set_seek_function,a._opj_stream_set_skip_function=Ct._opj_stream_set_skip_function,a._opj_stream_set_user_data=Ct._opj_stream_set_user_data,a._opj_stream_set_user_data_length=Ct._opj_stream_set_user_data_length,a._opj_stream_set_write_function=Ct._opj_stream_set_write_function,a._opj_version=Ct._opj_version,a._opj_write_tile=Ct._opj_write_tile,a._rintf=Ct._rintf,a._sbrk=Ct._sbrk,a.establishStackSpace=Ct.establishStackSpace,a.getTempRet0=Ct.getTempRet0,a.runPostSets=Ct.runPostSets,a.setTempRet0=Ct.setTempRet0,a.setThrew=Ct.setThrew,a.stackAlloc=Ct.stackAlloc),Lt=a.stackRestore=Ct.stackRestore,Rt=a.stackSave=Ct.stackSave;a.dynCall_di=Ct.dynCall_di,a.dynCall_ii=Ct.dynCall_ii,a.dynCall_iii=Ct.dynCall_iii,a.dynCall_iiii=Ct.dynCall_iiii,a.dynCall_iiiii=Ct.dynCall_iiiii,a.dynCall_iiiiii=Ct.dynCall_iiiiii,a.dynCall_iiiiiii=Ct.dynCall_iiiiiii,a.dynCall_iiiiiiii=Ct.dynCall_iiiiiiii,a.dynCall_iiiiiiiiiiii=Ct.dynCall_iiiiiiiiiiii,a.dynCall_vi=Ct.dynCall_vi,a.dynCall_vii=Ct.dynCall_vii,a.dynCall_viii=Ct.dynCall_viii,a.dynCall_viiii=Ct.dynCall_viiii;if(a.asm=Ct,a.ccall=function(t,e,i,n,r){var s=function(t){var e=a["_"+t];return y(e,"Cannot call unknown function "+t+", make sure it is exported"),e}(t),o=[],l=0;if(n)for(var c=0;c<n.length;c++){var h=v[i[c]];h?(0===l&&(l=Rt()),o[c]=h(n[c])):o[c]=n[c]}var u=s.apply(null,o);return"string"===e&&(u=M(u)),0!==l&&Lt(l),u},a.getValue=function(t,e,i){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return I[t>>0];case"i16":return k[t>>1];case"i32":case"i64":return P[t>>2];case"float":return B[t>>2];case"double":return L[t>>3];default:Ut("invalid type for getValue: "+e)}return null},a.writeArrayToMemory=rt,ft)if(mt(ft)||("function"==typeof a.locateFile?ft=a.locateFile(ft):a.memoryInitializerPrefixURL&&(ft=a.memoryInitializerPrefixURL+ft)),u||d){var Dt=a.readBinary(ft);C.set(Dt,8)}else{ht++,a.monitorRunDependencies&&a.monitorRunDependencies(ht);var Ot=function(t){t.byteLength&&(t=new Uint8Array(t)),C.set(t,8),a.memoryInitializerRequest&&delete a.memoryInitializerRequest.response,function(t){if(ht--,a.monitorRunDependencies&&a.monitorRunDependencies(ht),0==ht&&(null!==ut&&(clearInterval(ut),ut=null),dt)){var e=dt;dt=null,e()}}()};function Gt(){a.readAsync(ft,Ot,function(){throw"could not load memory initializer "+ft})}var Ft=Tt(ft);if(Ft)Ot(Ft.buffer);else if(a.memoryInitializerRequest){function Nt(){var t=a.memoryInitializerRequest,e=t.response;if(200!==t.status&&0!==t.status){var i=Tt(a.memoryInitializerRequestURL);if(!i)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+t.status+", retrying "+ft),void Gt();e=i.buffer}Ot(e)}a.memoryInitializerRequest.response?setTimeout(Nt,0):a.memoryInitializerRequest.addEventListener("load",Nt)}else Gt()}function zt(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Ht(t){function e(){a.calledRun||(a.calledRun=!0,_||(et||(et=!0,J(Q)),J(K),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)nt(a.postRun.shift());J(tt)}()))}t=t||a.arguments,ht>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)it(a.preRun.shift());J(q)}(),ht>0||a.calledRun||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),e()},1)):e()))}function Ut(t){throw a.onAbort&&a.onAbort(t),void 0!==t?(a.print(t),a.printErr(t),t=JSON.stringify(t)):t="",_=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}if(a.then=function(t){if(a.calledRun)t(a);else{var e=a.onRuntimeInitialized;a.onRuntimeInitialized=function(){e&&e(),t(a)}}return a},zt.prototype=new Error,zt.prototype.constructor=zt,dt=function t(){a.calledRun||Ht(),a.calledRun||(dt=t)},a.run=Ht,a.exit=function(t,i){i&&a.noExitRuntime&&0===t||(a.noExitRuntime||(_=!0,O=It,J($),a.onExit&&a.onExit(t)),u&&e.exit(t),a.quit(t,new zt(t)))},a.abort=Ut,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return a.noExitRuntime=!0,Ht(),t}}).call(this,i(62),i(145).Buffer)},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(1);let r={0:{color:[0,0,0],opacity:0,label:"background"},1:{color:[255,0,0],opacity:1,label:"white matter"}};class a{constructor(t,e=r){n.default.isString(t)?this._dom=document.getElementById(t):this._dom=t,this._segmentation=e,this.initCanvas(),this.paintCanvas()}initCanvas(){this._canvasContainer=this.initCanvasContainer(this._dom),this._canvasBg=this.createCanvas(),this._canvasContainer.appendChild(this._canvasBg),this._canvas=this.createCanvas(),this._canvasContainer.appendChild(this._canvas)}initCanvasContainer(t){let e=t;return e.style.width="256 px",e.style.height="128 px",e.style.border="1px solid #F9F9F9",e}createCanvas(){let t=document.createElement("canvas");return t.height=128,t.width=256,t}paintCanvas(){let t=this._canvas.getContext("2d");t.clearRect(0,0,this._canvas.width,this._canvas.height),t.globalCompositeOperation="source-over",t.lineWidth=1;for(let e in this._segmentation){let i=e%this._canvas.width,n=Math.floor(e/this._canvas.width),r=void 0!==this._segmentation[e].opacity?this._segmentation[e].opacity:1,a=this._segmentation[e].color;t.fillStyle=`rgba( ${Math.round(a[0])}, ${Math.round(a[1])}, ${Math.round(a[2])}, ${r})`,t.fillRect(i,n,1,1)}}get texture(){let t=new THREE.Texture(this._canvas);return t.mapping=THREE.UVMapping,t.wrapS=t.wrapT=THREE.ClampToEdgeWrapping,t.magFilter=t.minFilter=THREE.NearestFilter,t.premultiplyAlpha=!0,t.needsUpdate=!0,t}set segmentation(t){this._segmentation=t,this.paintCanvas()}get segmentation(){return this._segmentation}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(1);class r{constructor(t,e){t&&this._isFunction(t.emit)?(n.default.isString(e)?this._dom=document.getElementById(e):this._dom=e,n.default.isElement(this._dom)?(this._emitter=t,this.initContainerDom(),this.initEventListenner(),this.loaded=0,this.totalFile=0):window.console.error("please give the id of container dom or directly a dom instance")):window.console.error("please give the this._emitter instance")}_isFunction(t){return"[object Function]"===Object.prototype.toString.call(t)}initEventListenner(){const t=this;this._emitter.on("load-start",function(e){const i=e.files.length;t.totalFile=i,t._domTotalFile.innerHTML=i}),this._emitter.on("fetch-start",function(e){const i=document.createElement("li"),n=document.createElement("div");n.innerHTML="file: "+e.file,n.style.color="#ffffff",i.append(n),i.className="fetch-file",i.id="file-"+e.file,i.style.marginBottom="7px",i.style.border="1px solid #ffffff;",i.style.width="60%";const r=document.createElement("div");r.id="file-fetch-"+e.file,r.style.width="0%",i.append(r),t._domProcessList.append(i)}),this._emitter.on("fetch-progress",function(t){const e="file-fetch-"+t.file,i=document.getElementById(e);i.style.width=t.loaded/t.total*100+"%",i.style.border="1px solid red"}),this._emitter.on("fetch-success",function(t){const e=document.getElementById("file-"+t.file),i=document.createElement("div");i.id="file-result-"+t.file,i.innerHTML="fetch-success",i.style.color="#ffffff",e.append(i)}),this._emitter.on("fetch-error",function(t){}),this._emitter.on("fetch-abort",function(t){}),this._emitter.on("fetch-end",function(t){}),this._emitter.on("fetch-timeout",function(t){}),this._emitter.on("parse-start",function(t){const e=document.getElementById("file-"+t.file),i=document.createElement("div");i.id="file-parse-"+t.file,i.style.width="0%",e.append(i)}),this._emitter.on("parsing",function(t){const e="file-parse-"+t.file,i=document.getElementById(e);i.style.width=t.parsed/t.total*100+"%",i.style.border="1px solid yellow"}),this._emitter.on("parse-success",function(e){t.loaded+=1,t._domCurrentFile.innerHTML=t.loaded,t._domCurrentProgress.style.width=t.loaded/t.totalFile*100+"%";const i=document.getElementById("file-"+e.file),n=document.createElement("div");n.id="file-result-"+e.file,n.innerHTML="parse-success",n.style.color="#ffffff",i.append(n)})}initContainerDom(){const t=document.createElement("div");t.innerHTML='\n      <div id="ami-progress-bar-container" style="background-color: rgb(33, 33, 33); color: #ffffff;">\n      <div>\n      <label for="progress-bar" id="progress-label" style="width: 60%; border: 1px solid #ffffff; text-align: center;">\n      <span id="current-file-index">0</span>\n      <span id="total-file">0</span>\n      </label>\n      <div id="progress-bar" style="width: 60%; border: 1px solid #ffffff; text-align: center;">\n      <div id="current-progress" style="border: 1px solid red; width: 0%;"></div>\n      </div>\n      </div>\n      <ul id="process-list" style="list-style-type: none; padding: 0; overflow-y: auto;">\n      </ul>\n      </div>',this._dom.append(t),this._domCurrentFile=document.getElementById("current-file-index"),this._domTotalFile=document.getElementById("total-file"),this._domProcessList=document.getElementById("process-list"),this._domCurrentProgress=document.getElementById("current-progress")}}},function(t,e,i){"use strict";i.d(e,"a",function(){return p});var n=i(112),r=i(1),a=i(35),s=i(36),o=i(37),l=i(39),c=i(115),h=i(38),u=i(40),d=i(41);const f=i(56);class p extends n.a{parse(t){return this.emit("parse-start",{file:t.url,time:new Date}),this._progressBar&&this._progressBar.update(0,100,"parse",t.url),new Promise((e,i)=>{setTimeout(()=>{e(new Promise((e,i)=>{let n=t;if(Array.isArray(n)||(n=[n]),n.forEach(t=>{this._preprocess(t)}),1===n.length)n=n[0];else{let t=n.filter(this._filterByExtension.bind(null,"MHD")),e=n.filter(this._filterByExtension.bind(null,"RAW"));2===n.length&&1===t.length&&1===e.length&&(n.url=t[0].url,n.extension=t[0].extension,n.mhdBuffer=t[0].buffer,n.rawBuffer=e[0].buffer)}let r=this._parser(n.extension);r||(this.emit("parse-error",{file:t.url,time:new Date,error:n.filename+"can not be parsed."}),i(n.filename+" can not be parsed."));let o=null;try{o=new r(n,0)}catch(e){console.warn(e),this.emit("parse-error",{file:t.url,time:new Date,error:e}),i(e)}let l=new a.a;l.rawHeader=o.rawHeader(),l.seriesInstanceUID=o.seriesInstanceUID(),l.transferSyntaxUID=o.transferSyntaxUID(),l.seriesDate=o.seriesDate(),l.seriesDescription=o.seriesDescription(),l.studyDate=o.studyDate(),l.studyDescription=o.studyDescription(),l.numberOfFrames=o.numberOfFrames(),l.numberOfFrames||(l.numberOfFrames=1),l.numberOfChannels=o.numberOfChannels(),l.modality=o.modality(),"SEG"===l.modality&&(l.segmentationType=o.segmentationType(),l.segmentationSegments=o.segmentationSegments()),l.patientID=o.patientID(),l.patientName=o.patientName(),l.patientAge=o.patientAge(),l.patientBirthdate=o.patientBirthdate(),l.patientSex=o.patientSex();let c=new s.a;c.numberOfChannels=o.numberOfChannels(),c.pixelRepresentation=o.pixelRepresentation(),c.pixelType=o.pixelType(),c.invert=o.invert(),c.spacingBetweenSlices=o.spacingBetweenSlices(),c.modality=l.modality,"SEG"===c.modality&&(c.segmentationType=l.segmentationType,c.segmentationSegments=l.segmentationSegments),l.stack.push(c),setTimeout(this.parseFrameClosure(l,c,t.url,0,o,e,i),0)}))},10)})}parseFrameClosure(t,e,i,n,r,a,s){return()=>{this.parseFrame(t,e,i,n,r,a,s)}}parseFrame(t,e,i,n,r,a,s){let l=new o.a;l.sopInstanceUID=r.sopInstanceUID(n),l.url=i,l.index=n,l.invert=e.invert,l.frameTime=r.frameTime(n),l.ultrasoundRegions=r.ultrasoundRegions(n),l.rows=r.rows(n),l.columns=r.columns(n),l.numberOfChannels=e.numberOfChannels,l.pixelPaddingValue=r.pixelPaddingValue(n),l.pixelRepresentation=e.pixelRepresentation,l.pixelType=e.pixelType,l.pixelData=r.extractPixelData(n),l.pixelSpacing=r.pixelSpacing(n),l.spacingBetweenSlices=r.spacingBetweenSlices(n),l.sliceThickness=r.sliceThickness(n),l.imageOrientation=r.imageOrientation(n),l.rightHanded=r.rightHanded(),e.rightHanded=l.rightHanded,null===l.imageOrientation&&(l.imageOrientation=[1,0,0,0,1,0]),l.imagePosition=r.imagePosition(n),l.dimensionIndexValues=r.dimensionIndexValues(n),l.bitsAllocated=r.bitsAllocated(n),l.instanceNumber=r.instanceNumber(n),l.windowCenter=r.windowCenter(n),l.windowWidth=r.windowWidth(n),l.rescaleSlope=r.rescaleSlope(n),l.rescaleIntercept=r.rescaleIntercept(n),l.minMax=r.minMaxPixelData(l.pixelData),"SEG"===t.modality&&(l.referencedSegmentNumber=r.referencedSegmentNumber(n)),e.frame.push(l),this._parsed=n+1,this._totalParsed=t.numberOfFrames,this._progressBar&&this._progressBar.update(this._parsed,this._totalParsed,"parse",i),this.emit("parsing",{file:i,total:this._totalParsed,parsed:this._parsed,time:new Date}),this._parsed===this._totalParsed?(this.emit("parse-success",{file:i,total:this._totalParsed,parsed:this._parsed,time:new Date}),a(t)):setTimeout(this.parseFrameClosure(t,e,i,this._parsed,r,a,s),0)}_parser(t){let e=null;switch(t.toUpperCase()){case"NII":case"NII_":e=h.a;break;case"DCM":case"DIC":case"DICOM":case"IMA":case"":e=l.a;break;case"MHD":e=c.a;break;case"NRRD":e=u.a;break;case"MGH":case"MGZ":e=d.a;break;default:return console.warn("unsupported extension: "+t),!1}return e}_preprocess(t){const e=r.default.parseUrl(t.url);if(t.filename=e.filename,t.extension=e.extension,t.pathname=e.pathname,t.query=e.query,"gz"===t.extension?(t.gzcompressed=!0,t.extension=t.filename.split(".gz").shift().split(".").pop()):"mgz"===t.extension?(t.gzcompressed=!0,t.extension="mgh"):"zraw"===t.extension?(t.gzcompressed=!0,t.extension="raw"):t.gzcompressed=!1,t.gzcompressed){let e=f.inflate(t.buffer);t.buffer=e.buffer}}_filterByExtension(t,e){return e.extension.toUpperCase()===t.toUpperCase()}}},function(t,e,i){"use strict";t.exports=function(t,e,i,n){for(var r=65535&t|0,a=t>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{a=a+(r=r+e[n++]|0)|0}while(--s);r%=65521,a%=65521}return r|a<<16|0}},function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,r){var a=n,s=r+i;t^=-1;for(var o=r;o<s;o++)t=t>>>8^a[255&(t^e[o])];return-1^t}},function(t,e,i){"use strict";var n=i(11),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){a=!1}for(var s=new n.Buf8(256),o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function l(t,e){if(e<65537&&(t.subarray&&a||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var i="",s=0;s<e;s++)i+=String.fromCharCode(t[s]);return i}s[254]=s[254]=1,e.string2buf=function(t){var e,i,r,a,s,o=t.length,l=0;for(a=0;a<o;a++)55296==(64512&(i=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=t.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(r-56320),a++),l+=i<128?1:i<2048?2:i<65536?3:4;for(e=new n.Buf8(l),s=0,a=0;s<l;a++)55296==(64512&(i=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=t.charCodeAt(a+1)))&&(i=65536+(i-55296<<10)+(r-56320),a++),i<128?e[s++]=i:i<2048?(e[s++]=192|i>>>6,e[s++]=128|63&i):i<65536?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),i=0,r=e.length;i<r;i++)e[i]=t.charCodeAt(i);return e},e.buf2string=function(t,e){var i,n,r,a,o=e||t.length,c=new Array(2*o);for(n=0,i=0;i<o;)if((r=t[i++])<128)c[n++]=r;else if((a=s[r])>4)c[n++]=65533,i+=a-1;else{for(r&=2===a?31:3===a?15:7;a>1&&i<o;)r=r<<6|63&t[i++],a--;a>1?c[n++]=65533:r<65536?c[n++]=r:(r-=65536,c[n++]=55296|r>>10&1023,c[n++]=56320|1023&r)}return l(c,n)},e.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0?e:0===i?e:i+s[t[i]]>e?i:e}},function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,i){"use strict";t.exports=Math.floor},function(t,e,i){"use strict";t.exports=Math.ceil},function(t,e,i){"use strict";var n=n||{};n.Utils=n.Utils||i(61),n.NIFTI1=n.NIFTI1||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.isHDR=!1,this.extensionFlag=[0,0,0,0],this.extensionSize=0,this.extensionCode=0},n.NIFTI1.TYPE_NONE=0,n.NIFTI1.TYPE_BINARY=1,n.NIFTI1.TYPE_UINT8=2,n.NIFTI1.TYPE_INT16=4,n.NIFTI1.TYPE_INT32=8,n.NIFTI1.TYPE_FLOAT32=16,n.NIFTI1.TYPE_COMPLEX64=32,n.NIFTI1.TYPE_FLOAT64=64,n.NIFTI1.TYPE_RGB24=128,n.NIFTI1.TYPE_INT8=256,n.NIFTI1.TYPE_UINT16=512,n.NIFTI1.TYPE_UINT32=768,n.NIFTI1.TYPE_INT64=1024,n.NIFTI1.TYPE_UINT64=1280,n.NIFTI1.TYPE_FLOAT128=1536,n.NIFTI1.TYPE_COMPLEX128=1792,n.NIFTI1.TYPE_COMPLEX256=2048,n.NIFTI1.XFORM_UNKNOWN=0,n.NIFTI1.XFORM_SCANNER_ANAT=1,n.NIFTI1.XFORM_ALIGNED_ANAT=2,n.NIFTI1.XFORM_TALAIRACH=3,n.NIFTI1.XFORM_MNI_152=4,n.NIFTI1.SPATIAL_UNITS_MASK=7,n.NIFTI1.TEMPORAL_UNITS_MASK=56,n.NIFTI1.UNITS_UNKNOWN=0,n.NIFTI1.UNITS_METER=1,n.NIFTI1.UNITS_MM=2,n.NIFTI1.UNITS_MICRON=3,n.NIFTI1.UNITS_SEC=8,n.NIFTI1.UNITS_MSEC=16,n.NIFTI1.UNITS_USEC=24,n.NIFTI1.UNITS_HZ=32,n.NIFTI1.UNITS_PPM=40,n.NIFTI1.UNITS_RADS=48,n.NIFTI1.MAGIC_COOKIE=348,n.NIFTI1.MAGIC_NUMBER_LOCATION=344,n.NIFTI1.MAGIC_NUMBER=[110,43,49],n.NIFTI1.MAGIC_NUMBER2=[110,105,49],n.NIFTI1.EXTENSION_HEADER_SIZE=8,n.NIFTI1.prototype.readHeader=function(t){var e,i,r,a,s=new DataView(t),o=n.Utils.getIntAt(s,0,this.littleEndian);if(o!==n.NIFTI1.MAGIC_COOKIE&&(this.littleEndian=!0,o=n.Utils.getIntAt(s,0,this.littleEndian)),o!==n.NIFTI1.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.dim_info=n.Utils.getByteAt(s,39),e=0;e<8;e+=1)a=40+2*e,this.dims[e]=n.Utils.getShortAt(s,a,this.littleEndian);for(this.intent_p1=n.Utils.getFloatAt(s,56,this.littleEndian),this.intent_p2=n.Utils.getFloatAt(s,60,this.littleEndian),this.intent_p3=n.Utils.getFloatAt(s,64,this.littleEndian),this.intent_code=n.Utils.getShortAt(s,68,this.littleEndian),this.datatypeCode=n.Utils.getShortAt(s,70,this.littleEndian),this.numBitsPerVoxel=n.Utils.getShortAt(s,72,this.littleEndian),this.slice_start=n.Utils.getShortAt(s,74,this.littleEndian),e=0;e<8;e+=1)a=76+4*e,this.pixDims[e]=n.Utils.getFloatAt(s,a,this.littleEndian);for(this.vox_offset=n.Utils.getFloatAt(s,108,this.littleEndian),this.scl_slope=n.Utils.getFloatAt(s,112,this.littleEndian),this.scl_inter=n.Utils.getFloatAt(s,116,this.littleEndian),this.slice_end=n.Utils.getShortAt(s,120,this.littleEndian),this.slice_code=n.Utils.getByteAt(s,122),this.xyzt_units=n.Utils.getByteAt(s,123),this.cal_max=n.Utils.getFloatAt(s,124,this.littleEndian),this.cal_min=n.Utils.getFloatAt(s,128,this.littleEndian),this.slice_duration=n.Utils.getFloatAt(s,132,this.littleEndian),this.toffset=n.Utils.getFloatAt(s,136,this.littleEndian),this.description=n.Utils.getStringAt(s,148,228),this.aux_file=n.Utils.getStringAt(s,228,252),this.qform_code=n.Utils.getShortAt(s,252,this.littleEndian),this.sform_code=n.Utils.getShortAt(s,254,this.littleEndian),this.quatern_b=n.Utils.getFloatAt(s,256,this.littleEndian),this.quatern_c=n.Utils.getFloatAt(s,260,this.littleEndian),this.quatern_d=n.Utils.getFloatAt(s,264,this.littleEndian),this.qoffset_x=n.Utils.getFloatAt(s,268,this.littleEndian),this.qoffset_y=n.Utils.getFloatAt(s,272,this.littleEndian),this.qoffset_z=n.Utils.getFloatAt(s,276,this.littleEndian),i=0;i<3;i+=1)for(r=0;r<4;r+=1)a=280+4*(4*i+r),this.affine[i][r]=n.Utils.getFloatAt(s,a,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.intent_name=n.Utils.getStringAt(s,328,344),this.magic=n.Utils.getStringAt(s,344,348),this.isHDR=this.magic===n.NIFTI1.MAGIC_NUMBER2,s.byteLength>n.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=n.Utils.getByteAt(s,348),this.extensionFlag[1]=n.Utils.getByteAt(s,349),this.extensionFlag[2]=n.Utils.getByteAt(s,350),this.extensionFlag[3]=n.Utils.getByteAt(s,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(s),this.extensionCode=this.getExtensionCode(s)))},n.NIFTI1.prototype.toFormattedString=function(){var t=n.Utils.formatNumber,e="";return e+="Dim Info = "+this.dim_info+"\n",e+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",e+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",e+="Intent Code = "+this.intent_code+"\n",e+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",e+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n",e+="Slice Start = "+this.slice_start+"\n",e+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+"\n",e+="Image Offset = "+this.vox_offset+"\n",e+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+"\n",e+="Slice End = "+this.slice_end+"\n",e+="Slice Code = "+this.slice_code+"\n",e+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(n.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(n.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",e+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+"\n",e+="Slice Duration = "+this.slice_duration+"\n",e+="Time Axis Shift = "+this.toffset+"\n",e+='Description: "'+this.description+'"\n',e+='Auxiliary File: "'+this.aux_file+'"\n',e+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",e+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",e+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+"\n",e+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",e+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+"\n",e+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+"\n",e+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+"\n",e+='Intent Name: "'+this.intent_name+'"\n',this.extensionFlag[0]&&(e+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n"),e},n.NIFTI1.prototype.getDatatypeCodeString=function(t){return t===n.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":t===n.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":t===n.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":t===n.NIFTI1.TYPE_FLOAT32?"4-Byte Float":t===n.NIFTI1.TYPE_FLOAT64?"8-Byte Float":t===n.NIFTI1.TYPE_RGB24?"RGB":t===n.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":t===n.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":t===n.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":t===n.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":t===n.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"},n.NIFTI1.prototype.getTransformCodeString=function(t){return t===n.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":t===n.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":t===n.NIFTI1.XFORM_TALAIRACH?"Talairach":t===n.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"},n.NIFTI1.prototype.getUnitsCodeString=function(t){return t===n.NIFTI1.UNITS_METER?"Meters":t===n.NIFTI1.UNITS_MM?"Millimeters":t===n.NIFTI1.UNITS_MICRON?"Microns":t===n.NIFTI1.UNITS_SEC?"Seconds":t===n.NIFTI1.UNITS_MSEC?"Milliseconds":t===n.NIFTI1.UNITS_USEC?"Microseconds":t===n.NIFTI1.UNITS_HZ?"Hz":t===n.NIFTI1.UNITS_PPM?"PPM":t===n.NIFTI1.UNITS_RADS?"Rads":"Unknown"},n.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])},n.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=function(t,e,i,n,r,a,s,o,l,c){var h,u,d,f,p=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],m=t,g=e,_=i;return p[3][0]=p[3][1]=p[3][2]=0,p[3][3]=1,(h=1-(m*m+g*g+_*_))<1e-7?(m*=h=1/Math.sqrt(m*m+g*g+_*_),g*=h,_*=h,h=0):h=Math.sqrt(h),u=s>0?s:1,d=o>0?o:1,f=l>0?l:1,c<0&&(f=-f),p[0][0]=(h*h+m*m-g*g-_*_)*u,p[0][1]=2*(m*g-h*_)*d,p[0][2]=2*(m*_+h*g)*f,p[1][0]=2*(m*g+h*_)*u,p[1][1]=(h*h+g*g-m*m-_*_)*d,p[1][2]=2*(g*_-h*m)*f,p[2][0]=2*(m*_-h*g)*u,p[2][1]=2*(g*_+h*m)*d,p[2][2]=(h*h+_*_-g*g-m*m)*f,p[0][3]=n,p[1][3]=r,p[2][3]=a,p},n.NIFTI1.prototype.convertNiftiSFormToNEMA=function(t){var e,i,n,r,a,s,o,l,c,h,u,d,f,p,m,g,_,y,b,v,w,x,A,M,S,E,T,I,C,k,P,B,L;if(p=0,E=[[0,0,0],[0,0,0],[0,0,0]],T=[[0,0,0],[0,0,0],[0,0,0]],e=t[0][0],i=t[0][1],n=t[0][2],r=t[1][0],a=t[1][1],s=t[1][2],o=t[2][0],l=t[2][1],c=t[2][2],0===(h=Math.sqrt(e*e+r*r+o*o)))return null;if(e/=h,r/=h,o/=h,0===(h=Math.sqrt(i*i+a*a+l*l)))return null;if(h=e*(i/=h)+r*(a/=h)+o*(l/=h),Math.abs(h)>1e-4){if(i-=h*e,a-=h*r,l-=h*o,0===(h=Math.sqrt(i*i+a*a+l*l)))return null;i/=h,a/=h,l/=h}if(0===(h=Math.sqrt(n*n+s*s+c*c))?(n=r*l-o*a,s=o*i-l*e,c=e*a-r*i):(n/=h,s/=h,c/=h),h=e*n+r*s+o*c,Math.abs(h)>1e-4){if(n-=h*e,s-=h*r,c-=h*o,0===(h=Math.sqrt(n*n+s*s+c*c)))return null;n/=h,s/=h,c/=h}if(h=i*n+a*s+l*c,Math.abs(h)>1e-4){if(n-=h*i,s-=h*a,c-=h*l,0===(h=Math.sqrt(n*n+s*s+c*c)))return null;n/=h,s/=h,c/=h}if(E[0][0]=e,E[0][1]=i,E[0][2]=n,E[1][0]=r,E[1][1]=a,E[1][2]=s,E[2][0]=o,E[2][1]=l,E[2][2]=c,0===(u=this.nifti_mat33_determ(E)))return null;for(S=-666,y=w=x=A=1,b=2,v=3,d=1;d<=3;d+=1)for(f=1;f<=3;f+=1)if(d!==f)for(p=1;p<=3;p+=1)if(d!==p&&f!==p)for(T[0][0]=T[0][1]=T[0][2]=T[1][0]=T[1][1]=T[1][2]=T[2][0]=T[2][1]=T[2][2]=0,m=-1;m<=1;m+=2)for(g=-1;g<=1;g+=2)for(_=-1;_<=1;_+=2)T[0][d-1]=m,T[1][f-1]=g,T[2][p-1]=_,this.nifti_mat33_determ(T)*u>0&&(h=(M=this.nifti_mat33_mul(T,E))[0][0]+M[1][1]+M[2][2])>S&&(S=h,y=d,b=f,v=p,w=m,x=g,A=_);switch(I=C=k=P=B=L=0,y*w){case 1:I="X",P="+";break;case-1:I="X",P="-";break;case 2:I="Y",P="+";break;case-2:I="Y",P="-";break;case 3:I="Z",P="+";break;case-3:I="Z",P="-"}switch(b*x){case 1:C="X",B="+";break;case-1:C="X",B="-";break;case 2:C="Y",B="+";break;case-2:C="Y",B="-";break;case 3:C="Z",B="+";break;case-3:C="Z",B="-"}switch(v*A){case 1:k="X",L="+";break;case-1:k="X",L="-";break;case 2:k="Y",L="+";break;case-2:k="Y",L="-";break;case 3:k="Z",L="+";break;case-3:k="Z",L="-"}return I+C+k+P+B+L},n.NIFTI1.prototype.nifti_mat33_mul=function(t,e){var i,n,r=[[0,0,0],[0,0,0],[0,0,0]];for(i=0;i<3;i+=1)for(n=0;n<3;n+=1)r[i][n]=t[i][0]*e[0][n]+t[i][1]*e[1][n]+t[i][2]*e[2][n];return r},n.NIFTI1.prototype.nifti_mat33_determ=function(t){var e,i,n,r,a,s,o,l,c;return e=t[0][0],i=t[0][1],n=t[0][2],r=t[1][0],a=t[1][1],s=t[1][2],o=t[2][0],l=t[2][1],e*a*(c=t[2][2])-e*l*s-r*i*c+r*l*n+o*i*s-o*a*n},n.NIFTI1.prototype.getExtensionLocation=function(){return n.NIFTI1.MAGIC_COOKIE+4},n.NIFTI1.prototype.getExtensionSize=function(t){return n.Utils.getIntAt(t,this.getExtensionLocation(),this.littleEndian)},n.NIFTI1.prototype.getExtensionCode=function(t){return n.Utils.getIntAt(t,this.getExtensionLocation()+4,this.littleEndian)},"undefined"!==typeof t&&t.exports&&(t.exports=n.NIFTI1)},function(t,e,i){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.ComponentSpec=n.lossless.ComponentSpec||function(){this.hSamp=0,this.quantTableSel=0,this.vSamp=0},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.ComponentSpec)},function(t,e,i){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.DataStream=n.lossless.DataStream||i(12),n.lossless.Utils=n.lossless.Utils||i(26),n.lossless.HuffmanTable=n.lossless.HuffmanTable||function(){this.l=n.lossless.Utils.createArray(4,2,16),this.th=[],this.v=n.lossless.Utils.createArray(4,2,16,200),this.tc=n.lossless.Utils.createArray(4,2),this.tc[0][0]=0,this.tc[1][0]=0,this.tc[2][0]=0,this.tc[3][0]=0,this.tc[0][1]=0,this.tc[1][1]=0,this.tc[2][1]=0,this.tc[3][1]=0,this.th[0]=0,this.th[1]=0,this.th[2]=0,this.th[3]=0},n.lossless.HuffmanTable.MSB=2147483648,n.lossless.HuffmanTable.prototype.read=function(t,e){var i,n,r,a,s,o,l=0;for(i=t.get16(),l+=2;l<i;){if(l+=1,(r=15&(n=t.get8()))>3)throw new Error("ERROR: Huffman table ID > 3");if((a=n>>4)>2)throw new Error("ERROR: Huffman table [Table class > 2 ]");for(this.th[r]=1,this.tc[r][a]=1,s=0;s<16;s+=1)this.l[r][a][s]=t.get8(),l+=1;for(s=0;s<16;s+=1)for(o=0;o<this.l[r][a][s];o+=1){if(l>i)throw new Error("ERROR: Huffman table format error [count>Lh]");this.v[r][a][s][o]=t.get8(),l+=1}}if(l!==i)throw new Error("ERROR: Huffman table format error [count!=Lf]");for(s=0;s<4;s+=1)for(o=0;o<2;o+=1)0!==this.tc[s][o]&&this.buildHuffTable(e[s][o],this.l[s][o],this.v[s][o]);return 1},n.lossless.HuffmanTable.prototype.buildHuffTable=function(t,e,i){var r,a,s,o,l;for(256,a=0,s=0;s<8;s+=1)for(o=0;o<e[s];o+=1)for(l=0;l<256>>s+1;l+=1)t[a]=i[s][o]|s+1<<8,a+=1;for(s=1;a<256;s+=1,a+=1)t[a]=s|n.lossless.HuffmanTable.MSB;for(r=1,a=0,s=8;s<16;s+=1)for(o=0;o<e[s];o+=1){for(l=0;l<256>>s-7;l+=1)t[256*r+a]=i[s][o]|s+1<<8,a+=1;if(a>=256){if(a>256)throw new Error("ERROR: Huffman table error(1)!");a=0,r+=1}}},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.HuffmanTable)},function(t,e,i){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.DataStream=n.lossless.DataStream||i(12),n.lossless.Utils=n.lossless.Utils||i(26),n.lossless.QuantizationTable=n.lossless.QuantizationTable||function(){this.precision=[],this.tq=[],this.quantTables=n.lossless.Utils.createArray(4,64),this.tq[0]=0,this.tq[1]=0,this.tq[2]=0,this.tq[3]=0},n.lossless.QuantizationTable.enhanceQuantizationTable=function(t,e){var i;for(i=0;i<8;i+=1)t[e[0+i]]*=90,t[e[32+i]]*=90,t[e[16+i]]*=118,t[e[48+i]]*=49,t[e[40+i]]*=71,t[e[8+i]]*=126,t[e[56+i]]*=25,t[e[24+i]]*=106;for(i=0;i<8;i+=1)t[e[0+8*i]]*=90,t[e[4+8*i]]*=90,t[e[2+8*i]]*=118,t[e[6+8*i]]*=49,t[e[5+8*i]]*=71,t[e[1+8*i]]*=126,t[e[7+8*i]]*=25,t[e[3+8*i]]*=106;for(i=0;i<64;i+=1)t[i]>>=6},n.lossless.QuantizationTable.prototype.read=function(t,e){var i,r,a,s,o=0;for(i=t.get16(),o+=2;o<i;){if(o+=1,(a=15&(r=t.get8()))>3)throw new Error("ERROR: Quantization table ID > 3");if(this.precision[a]=r>>4,0===this.precision[a])this.precision[a]=8;else{if(1!==this.precision[a])throw new Error("ERROR: Quantization table precision error");this.precision[a]=16}if(this.tq[a]=1,8===this.precision[a]){for(s=0;s<64;s+=1){if(o>i)throw new Error("ERROR: Quantization table format error");this.quantTables[a][s]=t.get8(),o+=1}n.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[a],e)}else{for(s=0;s<64;s+=1){if(o>i)throw new Error("ERROR: Quantization table format error");this.quantTables[a][s]=t.get16(),o+=2}n.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[a],e)}}if(o!==i)throw new Error("ERROR: Quantization table error [count!=Lq]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.QuantizationTable)},function(t,e,i){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.DataStream=n.lossless.DataStream||i(12),n.lossless.ScanComponent=n.lossless.ScanComponent||i(94),n.lossless.ScanHeader=n.lossless.ScanHeader||function(){this.ah=0,this.al=0,this.numComp=0,this.selection=0,this.spectralEnd=0,this.components=[]},n.lossless.ScanHeader.prototype.read=function(t){var e,i,r,a=0;for(e=t.get16(),a+=2,this.numComp=t.get8(),a+=1,i=0;i<this.numComp;i+=1){if(this.components[i]=new n.lossless.ScanComponent,a>e)throw new Error("ERROR: scan header format error");this.components[i].scanCompSel=t.get8(),a+=1,r=t.get8(),a+=1,this.components[i].dcTabSel=r>>4,this.components[i].acTabSel=15&r}if(this.selection=t.get8(),a+=1,this.spectralEnd=t.get8(),a+=1,r=t.get8(),this.ah=r>>4,this.al=15&r,(a+=1)!==e)throw new Error("ERROR: scan header format error [count!=Ns]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.ScanHeader)},function(t,e,i){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.ScanComponent=n.lossless.ScanComponent||function(){this.acTabSel=0,this.dcTabSel=0,this.scanCompSel=0},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.ScanComponent)},function(t,e,i){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.ComponentSpec=n.lossless.ComponentSpec||i(90),n.lossless.DataStream=n.lossless.DataStream||i(12),n.lossless.FrameHeader=n.lossless.FrameHeader||function(){this.components=[],this.dimX=0,this.dimY=0,this.numComp=0,this.precision=0},n.lossless.FrameHeader.prototype.read=function(t){var e,i,r,a,s=0;for(e=t.get16(),s+=2,this.precision=t.get8(),s+=1,this.dimY=t.get16(),s+=2,this.dimX=t.get16(),s+=2,this.numComp=t.get8(),s+=1,i=1;i<=this.numComp;i+=1){if(s>e)throw new Error("ERROR: frame format error");if(r=t.get8(),(s+=1)>=e)throw new Error("ERROR: frame format error [c>=Lf]");a=t.get8(),s+=1,this.components[r]||(this.components[r]=new n.lossless.ComponentSpec),this.components[r].hSamp=a>>4,this.components[r].vSamp=15&a,this.components[r].quantTableSel=t.get8(),s+=1}if(s!==e)throw new Error("ERROR: frame format error [Lf!=count]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.FrameHeader)},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(116);class r{constructor(t="Freesurfer"){this._presetID=t,this._presets=this.presetSegs()}set preset(t){this._presetID=t}get preset(){return this.fetchPreset(this._presetID)}fetchPreset(t){return this._presets[t]}addPreset(t){this._presets.push(t)}presetsAvailable(t="segmentation"){let e=[],i=this._presets;for(let t in i)e.push(t);return e}presetSegs(){return{Freesurfer:n.a}}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(117);class r{static uniforms(){return{uTextureBackTest0:{type:"t",value:[],typeGLSL:"sampler2D"},uTextureBackTest1:{type:"t",value:[],typeGLSL:"sampler2D"},uOpacity0:{type:"f",value:1,typeGLSL:"float"},uOpacity1:{type:"f",value:1,typeGLSL:"float"},uType0:{type:"i",value:0,typeGLSL:"int"},uType1:{type:"i",value:1,typeGLSL:"int"},uTrackMouse:{type:"i",value:0,typeGLSL:"int"},uMouse:{type:"v2",value:new n.a,typeGLSL:"vec2"}}}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{constructor(t){this._uniforms=t,this._functions={},this._main=""}functions(){""===this._main&&this.main();let t="";for(let e in this._functions)t+=this._functions[e]+"\n";return t}uniforms(){let t="";for(let e in this._uniforms){let i=this._uniforms[e];t+=`uniform ${i.typeGLSL} ${e}`,i&&i.length&&(t+=`[${i.length}]`),t+=";\n"}return t}main(){this._main="\nvoid main(void) {\n\n  vec2 texc = vec2(((vProjectedCoords.x / vProjectedCoords.w) + 1.0 ) / 2.0,\n                ((vProjectedCoords.y / vProjectedCoords.w) + 1.0 ) / 2.0 );\n\n  // just silence warning for\n  // vec4 dummy = vPos;\n\n  //The back position is the world space position stored in the texture.\n  vec4 baseColor0 = texture2D(uTextureBackTest0, texc);\n  vec4 baseColor1 = texture2D(uTextureBackTest1, texc);\n\n  if( uTrackMouse == 1 ){\n\n      if( vProjectedCoords.x < uMouse.x ){\n\n        gl_FragColor = baseColor0;\n\n      }\n      else{\n\n        gl_FragColor = mix( baseColor0, baseColor1, uOpacity1 );\n\n      }\n\n  }\n  else{\n\n    if( uType1 == 0 ){\n\n      //merge an image into\n      gl_FragColor = mix( baseColor0, baseColor1, uOpacity1 );\n\n    }\n    else{\n\n      float opacity = baseColor1.a;\n      gl_FragColor = mix( baseColor0, baseColor1, opacity * uOpacity1 );\n\n    }\n\n  }\n\n  return;\n}\n   "}compute(){return`\n// uniforms\n${this.uniforms()}\n\n// varying (should fetch it from vertex directly)\n// varying vec4      vPos;\nvarying vec4      vProjectedCoords;\n\n// tailored functions\n${this.functions()}\n\n// main loop\n${this._main}\n      `}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{compute(){return"\n// varying vec4 vPos;\nvarying vec4 vProjectedCoords;\n\n//\n// main\n//\nvoid main() {\n\n  vec4 vPos = modelMatrix * vec4(position, 1.0 );\n  vProjectedCoords =  projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0 );\n\n}\n        "}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(43);class r{constructor(t=0,e=0,i=0,n=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=i,this._w=n}static slerp(t,e,i,n){return i.copy(t).slerp(e,n)}static slerpFlat(t,e,i,n,r,a,s){let o=i[n+0],l=i[n+1],c=i[n+2],h=i[n+3];const u=r[a+0],d=r[a+1],f=r[a+2],p=r[a+3];if(h!==p||o!==u||l!==d||c!==f){let t=1-s;const e=o*u+l*d+c*f+h*p,i=e>=0?1:-1,n=1-e*e;if(n>Number.EPSILON){const r=Math.sqrt(n),a=Math.atan2(r,e*i);t=Math.sin(t*a)/r,s=Math.sin(s*a)/r}const r=s*i;if(o=o*t+u*r,l=l*t+d*r,c=c*t+f*r,h=h*t+p*r,t===1-s){const t=1/Math.sqrt(o*o+l*l+c*c+h*h);o*=t,l*=t,c*=t,h*=t}}t[e]=o,t[e+1]=l,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,i,n,r,a){const s=i[n],o=i[n+1],l=i[n+2],c=i[n+3],h=r[a],u=r[a+1],d=r[a+2],f=r[a+3];return t[e]=s*f+c*h+o*d-l*u,t[e+1]=o*f+c*u+l*h-s*d,t[e+2]=l*f+c*d+s*u-o*h,t[e+3]=c*f-s*h-o*u-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,n=t._y,r=t._z,a=t._order,s=Math.cos,o=Math.sin,l=s(i/2),c=s(n/2),h=s(r/2),u=o(i/2),d=o(n/2),f=o(r/2);switch(a){case"XYZ":this._x=u*c*h+l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h-u*d*f;break;case"YXZ":this._x=u*c*h+l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h+u*d*f;break;case"ZXY":this._x=u*c*h-l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h-u*d*f;break;case"ZYX":this._x=u*c*h-l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h+u*d*f;break;case"YZX":this._x=u*c*h+l*d*f,this._y=l*d*h+u*c*f,this._z=l*c*f-u*d*h,this._w=l*c*h-u*d*f;break;case"XZY":this._x=u*c*h-l*d*f,this._y=l*d*h-u*c*f,this._z=l*c*f+u*d*h,this._w=l*c*h+u*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],n=e[4],r=e[8],a=e[1],s=e[5],o=e[9],l=e[2],c=e[6],h=e[10],u=i+s+h;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(c-o)*t,this._y=(r-l)*t,this._z=(a-n)*t}else if(i>s&&i>h){const t=2*Math.sqrt(1+i-s-h);this._w=(c-o)/t,this._x=.25*t,this._y=(n+a)/t,this._z=(r+l)/t}else if(s>h){const t=2*Math.sqrt(1+s-i-h);this._w=(r-l)/t,this._x=(n+a)/t,this._y=.25*t,this._z=(o+c)/t}else{const t=2*Math.sqrt(1+h-i-s);this._w=(a-n)/t,this._x=(r+l)/t,this._y=(o+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(n.a.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,n=t._y,r=t._z,a=t._w,s=e._x,o=e._y,l=e._z,c=e._w;return this._x=i*c+a*s+n*l-r*o,this._y=n*c+a*o+r*s-i*l,this._z=r*c+a*l+i*o-n*s,this._w=a*c-i*s-n*o-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,n=this._y,r=this._z,a=this._w;let s=a*t._w+i*t._x+n*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=a,this._x=i,this._y=n,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const t=1-e;return this._w=t*a+e*this._w,this._x=t*i+e*this._x,this._y=t*n+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),h=Math.sin((1-e)*c)/l,u=Math.sin(e*c)/l;return this._w=a*h+this._w*u,this._x=i*h+this._x*u,this._y=n*h+this._y*u,this._z=r*h+this._z*u,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(0);class r{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new n.a(1/0,1/0,1/0),this.max=void 0!==e?e:new n.a(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=t.length;o<l;o+=3){const l=t[o],c=t[o+1],h=t[o+2];l<e&&(e=l),c<i&&(i=c),h<n&&(n=h),l>r&&(r=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(e,i,n),this.max.set(r,a,s),this}setFromBufferAttribute(t){let e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0;for(let o=0,l=t.count;o<l;o++){const l=t.getX(o),c=t.getY(o),h=t.getZ(o);l<e&&(e=l),c<i&&(i=c),h<n&&(n=h),l>r&&(r=l),c>a&&(a=c),h>s&&(s=h)}return this.min.set(e,i,n),this.max.set(r,a,s),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=o.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new n.a),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new n.a),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),l.copy(e.boundingBox),l.applyMatrix4(t.matrixWorld),this.union(l));const i=t.children;for(let t=0,e=i.length;t<e;t++)this.expandByObject(i[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new n.a),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,o),o.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(m),g.subVectors(this.max,m),c.subVectors(t.a,m),h.subVectors(t.b,m),u.subVectors(t.c,m),d.subVectors(h,c),f.subVectors(u,h),p.subVectors(c,u);let e=[0,-d.z,d.y,0,-f.z,f.y,0,-p.z,p.y,d.z,0,-d.x,f.z,0,-f.x,p.z,0,-p.x,-d.y,d.x,0,-f.y,f.x,0,-p.y,p.x,0];return!!a(e,c,h,u,g)&&(!!a(e=[1,0,0,0,1,0,0,0,1],c,h,u,g)&&(_.crossVectors(d,f),a(e=[_.x,_.y,_.z],c,h,u,g)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new n.a),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return o.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(o).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(s[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),s[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),s[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),s[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),s[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),s[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),s[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),s[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(s),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function a(t,e,i,n,r){for(let a=0,s=t.length-3;a<=s;a+=3){y.fromArray(t,a);const s=r.x*Math.abs(y.x)+r.y*Math.abs(y.y)+r.z*Math.abs(y.z),o=e.dot(y),l=i.dot(y),c=n.dot(y);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const s=[new n.a,new n.a,new n.a,new n.a,new n.a,new n.a,new n.a,new n.a],o=new n.a,l=new r,c=new n.a,h=new n.a,u=new n.a,d=new n.a,f=new n.a,p=new n.a,m=new n.a,g=new n.a,_=new n.a,y=new n.a},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(103),r=i(104);function a(t,e,i,a){this.ray=new n.a(t,e),this.near=i||0,this.far=a||1/0,this.camera=null,this.layers=new r.a,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function s(t,e){return t.distance-e.distance}function o(t,e,i,n){if(t.layers.test(e.layers)&&t.raycast(e,i),!0===n){const n=t.children;for(let t=0,r=n.length;t<r;t++)o(n[t],e,i,!0)}}Object.assign(a.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,i){const n=i||[];return o(t,this,n,e),n.sort(s),n},intersectObjects:function(t,e,i){const n=i||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(let i=0,r=t.length;i<r;i++)o(t[i],this,n,e);return n.sort(s),n}})},function(t,e,i){"use strict";i.d(e,"a",function(){return u});var n=i(0);const r=new n.a,a=new n.a,s=new n.a,o=new n.a,l=new n.a,c=new n.a,h=new n.a;class u{constructor(t,e){this.origin=void 0!==t?t:new n.a,this.direction=void 0!==e?e:new n.a(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new n.a),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,r)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new n.a),e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=r.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(r.copy(this.direction).multiplyScalar(e).add(this.origin),r.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){a.copy(t).add(e).multiplyScalar(.5),s.copy(e).sub(t).normalize(),o.copy(this.origin).sub(a);const r=.5*t.distanceTo(e),l=-this.direction.dot(s),c=o.dot(this.direction),h=-o.dot(s),u=o.lengthSq(),d=Math.abs(1-l*l);let f,p,m,g;if(d>0)if(p=l*c-h,g=r*d,(f=l*h-c)>=0)if(p>=-g)if(p<=g){const t=1/d;m=(f*=t)*(f+l*(p*=t)+2*c)+p*(l*f+p+2*h)+u}else p=r,m=-(f=Math.max(0,-(l*p+c)))*f+p*(p+2*h)+u;else p=-r,m=-(f=Math.max(0,-(l*p+c)))*f+p*(p+2*h)+u;else p<=-g?m=-(f=Math.max(0,-(-l*r+c)))*f+(p=f>0?-r:Math.min(Math.max(-r,-h),r))*(p+2*h)+u:p<=g?(f=0,m=(p=Math.min(Math.max(-r,-h),r))*(p+2*h)+u):m=-(f=Math.max(0,-(l*r+c)))*f+(p=f>0?r:Math.min(Math.max(-r,-h),r))*(p+2*h)+u;else p=l>0?-r:r,m=-(f=Math.max(0,-(l*p+c)))*f+p*(p+2*h)+u;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),n&&n.copy(s).multiplyScalar(p).add(a),m}intersectSphere(t,e){r.subVectors(t.center,this.origin);const i=r.dot(this.direction),n=r.dot(r)-i*i,a=t.radius*t.radius;if(n>a)return null;const s=Math.sqrt(a-n),o=i-s,l=i+s;return o<0&&l<0?null:o<0?this.at(l,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,u=this.origin;return l>=0?(i=(t.min.x-u.x)*l,n=(t.max.x-u.x)*l):(i=(t.max.x-u.x)*l,n=(t.min.x-u.x)*l),c>=0?(r=(t.min.y-u.y)*c,a=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,a=(t.min.y-u.y)*c),i>a||r>n?null:((r>i||i!=i)&&(i=r),(a<n||n!=n)&&(n=a),h>=0?(s=(t.min.z-u.z)*h,o=(t.max.z-u.z)*h):(s=(t.max.z-u.z)*h,o=(t.min.z-u.z)*h),i>o||s>n?null:((s>i||i!=i)&&(i=s),(o<n||n!=n)&&(n=o),n<0?null:this.at(i>=0?i:n,e)))}intersectsBox(t){return null!==this.intersectBox(t,r)}intersectTriangle(t,e,i,n,r){l.subVectors(e,t),c.subVectors(i,t),h.crossVectors(l,c);let a,s=this.direction.dot(h);if(s>0){if(n)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}o.subVectors(this.origin,t);const u=a*this.direction.dot(c.crossVectors(o,c));if(u<0)return null;const d=a*this.direction.dot(l.cross(o));if(d<0)return null;if(u+d>s)return null;const f=-a*o.dot(h);return f<0?null:this.at(f/s,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}},function(t,e,i){"use strict";i.d(e,"a",function(){return m});var n=i(0),r=i(106);const a=new n.a,s=new n.a,o=new n.a,l=new n.a,c=new n.a,h=new n.a,u=new n.a,d=new n.a,f=new n.a,p=new n.a;class m{constructor(t,e,i){this.a=void 0!==t?t:new n.a,this.b=void 0!==e?e:new n.a,this.c=void 0!==i?i:new n.a}static getNormal(t,e,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new n.a),r.subVectors(i,e),a.subVectors(t,e),r.cross(a);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,i,r,l){a.subVectors(r,e),s.subVectors(i,e),o.subVectors(t,e);const c=a.dot(a),h=a.dot(s),u=a.dot(o),d=s.dot(s),f=s.dot(o),p=c*d-h*h;if(void 0===l&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),l=new n.a),0===p)return l.set(-2,-1,-1);const m=1/p,g=(d*u-h*f)*m,_=(c*f-h*u)*m;return l.set(1-g-_,_,g)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,l),l.x>=0&&l.y>=0&&l.x+l.y<=1}static getUV(t,e,i,n,r,a,s,o){return this.getBarycoord(t,e,i,n,l),o.set(0,0),o.addScaledVector(r,l.x),o.addScaledVector(a,l.y),o.addScaledVector(s,l.z),o}static isFrontFacing(t,e,i,n){return a.subVectors(i,e),s.subVectors(t,e),a.cross(s).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return a.subVectors(this.c,this.b),s.subVectors(this.a,this.b),.5*a.cross(s).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new n.a),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return m.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new r.a),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return m.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,i,n,r){return m.getUV(t,this.a,this.b,this.c,e,i,n,r)}containsPoint(t){return m.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return m.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new n.a);const i=this.a,r=this.b,a=this.c;let s,o;c.subVectors(r,i),h.subVectors(a,i),d.subVectors(t,i);const l=c.dot(d),m=h.dot(d);if(l<=0&&m<=0)return e.copy(i);f.subVectors(t,r);const g=c.dot(f),_=h.dot(f);if(g>=0&&_<=g)return e.copy(r);const y=l*_-g*m;if(y<=0&&l>=0&&g<=0)return s=l/(l-g),e.copy(i).addScaledVector(c,s);p.subVectors(t,a);const b=c.dot(p),v=h.dot(p);if(v>=0&&b<=v)return e.copy(a);const w=b*m-l*v;if(w<=0&&m>=0&&v<=0)return o=m/(m-v),e.copy(i).addScaledVector(h,o);const x=g*v-b*_;if(x<=0&&_-g>=0&&b-v>=0)return u.subVectors(a,r),o=(_-g)/(_-g+(b-v)),e.copy(r).addScaledVector(u,o);const A=1/(x+w+y);return s=w*A,o=y*A,e.copy(i).addScaledVector(c,s).addScaledVector(h,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}},function(t,e,i){"use strict";i.d(e,"a",function(){return l});var n=i(107),r=i(0);const a=new r.a,s=new r.a,o=new n.a;class l{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new r.a(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const n=a.subVectors(i,e).cross(s.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new r.a),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new r.a);const i=t.delta(a),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const s=-(t.start.dot(this.normal)+this.constant)/n;return s<0||s>1?void 0:e.copy(i).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new r.a),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||o.getNormalMatrix(t),n=this.coplanarPoint(a).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,i,n,r,a,s,o,l){const c=this.elements;return c[0]=t,c[1]=n,c[2]=s,c[3]=e,c[4]=r,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,n=e.elements,r=this.elements,a=i[0],s=i[3],o=i[6],l=i[1],c=i[4],h=i[7],u=i[2],d=i[5],f=i[8],p=n[0],m=n[3],g=n[6],_=n[1],y=n[4],b=n[7],v=n[2],w=n[5],x=n[8];return r[0]=a*p+s*_+o*v,r[3]=a*m+s*y+o*w,r[6]=a*g+s*b+o*x,r[1]=l*p+c*_+h*v,r[4]=l*m+c*y+h*w,r[7]=l*g+c*b+h*x,r[2]=u*p+d*_+f*v,r[5]=u*m+d*y+f*w,r[8]=u*g+d*b+f*x,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],s=t[5],o=t[6],l=t[7],c=t[8];return e*a*c-e*s*l-i*r*c+i*s*o+n*r*l-n*a*o}getInverse(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const i=t.elements,n=this.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],c=i[5],h=i[6],u=i[7],d=i[8],f=d*l-c*u,p=c*h-d*o,m=u*o-l*h,g=r*f+a*p+s*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const _=1/g;return n[0]=f*_,n[1]=(s*u-d*a)*_,n[2]=(c*a-s*l)*_,n[3]=p*_,n[4]=(d*r-s*h)*_,n[5]=(s*o-c*r)*_,n[6]=m*_,n[7]=(a*h-u*r)*_,n[8]=(l*r-a*o)*_,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).getInverse(this).transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,r,a,s){const o=Math.cos(r),l=Math.sin(r);this.set(i*o,i*l,-i*(o*a+l*s)+a+t,-n*l,n*o,-n*(-l*a+o*s)+s+e,0,0,1)}scale(t,e){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.elements,r=n[0],a=n[3],s=n[6],o=n[1],l=n[4],c=n[7];return n[0]=e*r+i*o,n[3]=e*a+i*l,n[6]=e*s+i*c,n[1]=-i*r+e*o,n[4]=-i*a+e*l,n[7]=-i*s+e*c,this}translate(t,e){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}}},function(t,e,i){"use strict";var n=i(9);e.a=new class extends n.a{constructor(){super(),this.name="texture3d",this._dataCoordinates="dataCoordinates",this._dataValue="dataValue",this._offset="offset"}api(t=this._base,e=this._dataCoordinates,i=this._dataValue,n=this._offset){return this._base=t,this.compute(e,i,n)}compute(t,e,i){return this.computeDefinition(),this._base._functions[this._name]=this._definition,`${this._name}(${t}, ${e}, ${i});`}computeDefinition(){let t="\n      step( abs( textureIndexF - 0.0 ), 0.0 ) * texture2D(uTextureContainer[0], uv) +\n      step( abs( textureIndexF - 1.0 ), 0.0 ) * texture2D(uTextureContainer[1], uv) +\n      step( abs( textureIndexF - 2.0 ), 0.0 ) * texture2D(uTextureContainer[2], uv) +\n      step( abs( textureIndexF - 3.0 ), 0.0 ) * texture2D(uTextureContainer[3], uv) +\n      step( abs( textureIndexF - 4.0 ), 0.0 ) * texture2D(uTextureContainer[4], uv) +\n      step( abs( textureIndexF - 5.0 ), 0.0 ) * texture2D(uTextureContainer[5], uv) +\n      step( abs( textureIndexF - 6.0 ), 0.0 ) * texture2D(uTextureContainer[6], uv)";14===this._base._uniforms.uTextureContainer.length&&(t+=" +\n      step( abs( textureIndexF - 7.0 ), 0.0 ) * texture2D(uTextureContainer[7], uv) +\n      step( abs( textureIndexF - 8.0 ), 0.0 ) * texture2D(uTextureContainer[8], uv) +\n      step( abs( textureIndexF - 9.0 ), 0.0 ) * texture2D(uTextureContainer[9], uv) +\n      step( abs( textureIndexF - 10.0 ), 0.0 ) * texture2D(uTextureContainer[10], uv) +\n      step( abs( textureIndexF - 11.0 ), 0.0 ) * texture2D(uTextureContainer[11], uv) +\n      step( abs( textureIndexF - 12.0 ), 0.0 ) * texture2D(uTextureContainer[12], uv) +\n      step( abs( textureIndexF - 13.0 ), 0.0 ) * texture2D(uTextureContainer[13], uv)"),this._definition=`\nvoid ${this._name}(in ivec3 dataCoordinates, out vec4 dataValue, out int offset){\n  float textureSizeF = float(uTextureSize);\n  int voxelsPerTexture = uTextureSize*uTextureSize;\n\n  int index = dataCoordinates.x\n            + dataCoordinates.y * uDataDimensions.x\n            + dataCoordinates.z * uDataDimensions.y * uDataDimensions.x;\n  \n  // dividing an integer by an integer will give you an integer result, rounded down\n  // can not get float numbers to work :(\n  int packedIndex = index/uPackedPerPixel;\n  offset = index - uPackedPerPixel*packedIndex;\n\n  // Map data index to right sampler2D texture\n  int textureIndex = packedIndex/voxelsPerTexture;\n  int inTextureIndex = packedIndex - voxelsPerTexture*textureIndex;\n\n  // Get row and column in the texture\n  int rowIndex = inTextureIndex/uTextureSize;\n  float rowIndexF = float(rowIndex);\n  float colIndex = float(inTextureIndex - uTextureSize * rowIndex);\n\n  // Map row and column to uv\n  vec2 uv = vec2(0,0);\n  uv.x = (0.5 + colIndex) / textureSizeF;\n  uv.y = 1. - (0.5 + rowIndexF) / textureSizeF;\n\n  float textureIndexF = float(textureIndex);\n  dataValue = vec4(0.) + ${t};\n}\n    `}}},function(t,e,i){"use strict";var n=i(9);e.a=new class extends n.a{constructor(){super(),this.name="unpack",this._packedData="packedData",this._offset="offset",this._unpackedData="unpackedData",this._base._uniforms={uNumberOfChannels:{value:1},uBitsAllocated:{value:16},uPixelType:{value:0}}}api(t=this._base,e=this._packedData,i=this._offset,n=this._unpackedData){return this._base=t,this.compute(e,i,n)}compute(t,e,i){return this.computeDefinition(),this._base._functions[this._name]=this._definition,`${this._name}(${t}, ${e}, ${i});`}computeDefinition(){let t="";if(1===this._base._uniforms.uNumberOfChannels.value)switch(this._base._uniforms.uBitsAllocated.value){case 1:case 8:t=this.upack8();break;case 16:t=this.upack16();break;case 32:t=this.upack32();break;default:t=this.upackIdentity()}else t=this.upackIdentity();this._definition=`\nvoid ${this._name}(in vec4 packedData, in int offset, out vec4 unpackedData){\n\n${t}\n\n}  \n    `}upack8(){return this._base._functions.uInt8=this.uInt8(),"\nfloat floatedOffset = float(offset);\nfloat floatedOffsetSquared = floatedOffset * floatedOffset;\nuInt8(\n  step( floatedOffsetSquared , 0.0 ) * packedData.r +\n  step( floatedOffsetSquared - 2. * floatedOffset + 1., 0.0 ) * packedData.g +\n  step( floatedOffsetSquared - 2. * 2. *  floatedOffset + 4., 0.0 ) * packedData.b +\n  step( floatedOffsetSquared - 2. * 3. *  floatedOffset + 9., 0.0 ) * packedData.a\n  ,\n  unpackedData.x);\n    "}upack16(){return this._base._functions.uInt16=this.uInt16(),"\nfloat floatedOffset = float(offset);\nuInt16(\n  packedData.r * (1. - floatedOffset) + packedData.b * floatedOffset,\n  packedData.g * (1. - floatedOffset) + packedData.a * floatedOffset,\n  unpackedData.x);\n    "}upack32(){return 0===this._base._uniforms.uPixelType.value?(this._base._functions.uInt32=this.uInt32(),"\nuInt32(\n  packedData.r,\n  packedData.g,\n  packedData.b,\n  packedData.a,\n  unpackedData.x);\n      "):(this._base._functions.uFloat32=this.uFloat32(),"\nuFloat32(\n  packedData.r,\n  packedData.g,\n  packedData.b,\n  packedData.a,\n  unpackedData.x);\n      ")}upackIdentity(){return"\nunpackedData = packedData;\n      "}uInt8(){return"\nvoid uInt8(in float r, out float value){\n  value = r * 255.;\n}\n    "}uInt16(){return"\nvoid uInt16(in float r, in float a, out float value){\n  value = r * 255. + a * 255. * 256.;\n}\n    "}uInt32(){return"\nvoid uInt32(in float r, in float g, in float b, in float a, out float value){\n  value = r * 255. + g * 255. * 256. + b * 255. * 256. * 256. + a * 255. * 256. * 256. * 256.;\n  // value = r * 255. + g * 65025. + b * 16581375. + a * 4228250625.;\n}\n    "}uFloat32(){return"\nvoid uFloat32(in float r, in float g, in float b, in float a, out float value){\n\n  // create arrays containing bits for rgba values\n  // value between 0 and 255\n  value = r * 255.;\n  int bytemeR[8];\n  bytemeR[0] = int(floor(value / 128.));\n  value -= float(bytemeR[0] * 128);\n  bytemeR[1] = int(floor(value / 64.));\n  value -= float(bytemeR[1] * 64);\n  bytemeR[2] = int(floor(value / 32.));\n  value -= float(bytemeR[2] * 32);\n  bytemeR[3] = int(floor(value / 16.));\n  value -= float(bytemeR[3] * 16);\n  bytemeR[4] = int(floor(value / 8.));\n  value -= float(bytemeR[4] * 8);\n  bytemeR[5] = int(floor(value / 4.));\n  value -= float(bytemeR[5] * 4);\n  bytemeR[6] = int(floor(value / 2.));\n  value -= float(bytemeR[6] * 2);\n  bytemeR[7] = int(floor(value));\n\n  value = g * 255.;\n  int bytemeG[8];\n  bytemeG[0] = int(floor(value / 128.));\n  value -= float(bytemeG[0] * 128);\n  bytemeG[1] = int(floor(value / 64.));\n  value -= float(bytemeG[1] * 64);\n  bytemeG[2] = int(floor(value / 32.));\n  value -= float(bytemeG[2] * 32);\n  bytemeG[3] = int(floor(value / 16.));\n  value -= float(bytemeG[3] * 16);\n  bytemeG[4] = int(floor(value / 8.));\n  value -= float(bytemeG[4] * 8);\n  bytemeG[5] = int(floor(value / 4.));\n  value -= float(bytemeG[5] * 4);\n  bytemeG[6] = int(floor(value / 2.));\n  value -= float(bytemeG[6] * 2);\n  bytemeG[7] = int(floor(value));\n\n  value = b * 255.;\n  int bytemeB[8];\n  bytemeB[0] = int(floor(value / 128.));\n  value -= float(bytemeB[0] * 128);\n  bytemeB[1] = int(floor(value / 64.));\n  value -= float(bytemeB[1] * 64);\n  bytemeB[2] = int(floor(value / 32.));\n  value -= float(bytemeB[2] * 32);\n  bytemeB[3] = int(floor(value / 16.));\n  value -= float(bytemeB[3] * 16);\n  bytemeB[4] = int(floor(value / 8.));\n  value -= float(bytemeB[4] * 8);\n  bytemeB[5] = int(floor(value / 4.));\n  value -= float(bytemeB[5] * 4);\n  bytemeB[6] = int(floor(value / 2.));\n  value -= float(bytemeB[6] * 2);\n  bytemeB[7] = int(floor(value));\n\n  value = a * 255.;\n  int bytemeA[8];\n  bytemeA[0] = int(floor(value / 128.));\n  value -= float(bytemeA[0] * 128);\n  bytemeA[1] = int(floor(value / 64.));\n  value -= float(bytemeA[1] * 64);\n  bytemeA[2] = int(floor(value / 32.));\n  value -= float(bytemeA[2] * 32);\n  bytemeA[3] = int(floor(value / 16.));\n  value -= float(bytemeA[3] * 16);\n  bytemeA[4] = int(floor(value / 8.));\n  value -= float(bytemeA[4] * 8);\n  bytemeA[5] = int(floor(value / 4.));\n  value -= float(bytemeA[5] * 4);\n  bytemeA[6] = int(floor(value / 2.));\n  value -= float(bytemeA[6] * 2);\n  bytemeA[7] = int(floor(value));\n\n  // compute float32 value from bit arrays\n\n  // sign\n  int issigned = 1 - 2 * bytemeR[0];\n  //   issigned = int(pow(-1., float(bytemeR[0])));\n\n  // exponent\n  int exponent = 0;\n\n  exponent += bytemeR[1] * int(pow(2., 7.));\n  exponent += bytemeR[2] * int(pow(2., 6.));\n  exponent += bytemeR[3] * int(pow(2., 5.));\n  exponent += bytemeR[4] * int(pow(2., 4.));\n  exponent += bytemeR[5] * int(pow(2., 3.));\n  exponent += bytemeR[6] * int(pow(2., 2.));\n  exponent += bytemeR[7] * int(pow(2., 1.));\n\n  exponent += bytemeG[0];\n\n\n  // fraction\n  float fraction = 0.;\n\n  fraction = float(bytemeG[1]) * pow(2., -1.);\n  fraction += float(bytemeG[2]) * pow(2., -2.);\n  fraction += float(bytemeG[3]) * pow(2., -3.);\n  fraction += float(bytemeG[4]) * pow(2., -4.);\n  fraction += float(bytemeG[5]) * pow(2., -5.);\n  fraction += float(bytemeG[6]) * pow(2., -6.);\n  fraction += float(bytemeG[7]) * pow(2., -7.);\n\n  fraction += float(bytemeB[0]) * pow(2., -8.);\n  fraction += float(bytemeB[1]) * pow(2., -9.);\n  fraction += float(bytemeB[2]) * pow(2., -10.);\n  fraction += float(bytemeB[3]) * pow(2., -11.);\n  fraction += float(bytemeB[4]) * pow(2., -12.);\n  fraction += float(bytemeB[5]) * pow(2., -13.);\n  fraction += float(bytemeB[6]) * pow(2., -14.);\n  fraction += float(bytemeB[7]) * pow(2., -15.);\n\n  fraction += float(bytemeA[0]) * pow(2., -16.);\n  fraction += float(bytemeA[1]) * pow(2., -17.);\n  fraction += float(bytemeA[2]) * pow(2., -18.);\n  fraction += float(bytemeA[3]) * pow(2., -19.);\n  fraction += float(bytemeA[4]) * pow(2., -20.);\n  fraction += float(bytemeA[5]) * pow(2., -21.);\n  fraction += float(bytemeA[6]) * pow(2., -22.);\n  fraction += float(bytemeA[7]) * pow(2., -23.);\n\n  value = float(issigned) * pow( 2., float(exponent - 127)) * (1. + fraction);\n}\n    "}}},function(t,e,i){"use strict";var n=i(9),r=i(7);e.a=new class extends n.a{constructor(){super(),this.name="interpolationTrilinear",this._currentVoxel="currentVoxel",this._dataValue="dataValue",this._gradient="gradient"}api(t=this._base,e=this._currentVoxel,i=this._dataValue,n=this._gradient){return this._base=t,this.compute(e,i,n)}compute(t,e,i){return this.computeDefinition(),this._base._functions[this._name]=this._definition,`${this._name}(${t}, ${e}, ${i});`}computeDefinition(){this._definition=`\nvoid trilinearInterpolation(\n  in vec3 normalizedPosition,\n  out vec4 interpolatedValue,\n  in vec4 v000, in vec4 v100,\n  in vec4 v001, in vec4 v101,\n  in vec4 v010, in vec4 v110,\n  in vec4 v011, in vec4 v111) {\n  // https://en.wikipedia.org/wiki/Trilinear_interpolation\n  vec4 c00 = v000 * ( 1.0 - normalizedPosition.x ) + v100 * normalizedPosition.x;\n  vec4 c01 = v001 * ( 1.0 - normalizedPosition.x ) + v101 * normalizedPosition.x;\n  vec4 c10 = v010 * ( 1.0 - normalizedPosition.x ) + v110 * normalizedPosition.x;\n  vec4 c11 = v011 * ( 1.0 - normalizedPosition.x ) + v111 * normalizedPosition.x;\n\n  // c0 and c1\n  vec4 c0 = c00 * ( 1.0 - normalizedPosition.y) + c10 * normalizedPosition.y;\n  vec4 c1 = c01 * ( 1.0 - normalizedPosition.y) + c11 * normalizedPosition.y;\n\n  // c\n  vec4 c = c0 * ( 1.0 - normalizedPosition.z) + c1 * normalizedPosition.z;\n  interpolatedValue = c;\n}\n\nvoid ${this._name}(in vec3 currentVoxel, out vec4 dataValue, out vec3 gradient){\n\n  vec3 lower_bound = floor(currentVoxel);\n  lower_bound = max(vec3(0.), lower_bound);\n  \n  vec3 higher_bound = lower_bound + vec3(1.);\n\n  vec3 normalizedPosition = (currentVoxel - lower_bound);\n  normalizedPosition =  max(vec3(0.), normalizedPosition);\n\n  vec4 interpolatedValue = vec4(0.);\n\n  //\n  // fetch values required for interpolation\n  //\n  vec4 v000 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c000 = vec3(lower_bound.x, lower_bound.y, lower_bound.z);\n  ${r.a.api(this._base,"c000","v000")}\n\n  //\n  vec4 v100 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c100 = vec3(higher_bound.x, lower_bound.y, lower_bound.z);\n  ${r.a.api(this._base,"c100","v100")}\n\n  //\n  vec4 v001 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c001 = vec3(lower_bound.x, lower_bound.y, higher_bound.z);\n  ${r.a.api(this._base,"c001","v001")}\n\n  //\n  vec4 v101 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c101 = vec3(higher_bound.x, lower_bound.y, higher_bound.z);\n  ${r.a.api(this._base,"c101","v101")}\n  \n  //\n  vec4 v010 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c010 = vec3(lower_bound.x, higher_bound.y, lower_bound.z);\n  ${r.a.api(this._base,"c010","v010")}\n\n  vec4 v110 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c110 = vec3(higher_bound.x, higher_bound.y, lower_bound.z);\n  ${r.a.api(this._base,"c110","v110")}\n\n  //\n  vec4 v011 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c011 = vec3(lower_bound.x, higher_bound.y, higher_bound.z);\n  ${r.a.api(this._base,"c011","v011")}\n\n  vec4 v111 = vec4(0.0, 0.0, 0.0, 0.0);\n  vec3 c111 = vec3(higher_bound.x, higher_bound.y, higher_bound.z);\n  ${r.a.api(this._base,"c111","v111")}\n\n  // compute interpolation at position\n  trilinearInterpolation(normalizedPosition, interpolatedValue ,v000, v100, v001, v101, v010,v110, v011,v111);\n  dataValue = interpolatedValue;\n\n  // That breaks shading in volume rendering\n  // if (gradient.x == 1.) { // skip gradient calculation for slice helper\n  //  return;\n  // }\n\n  // compute gradient\n  float gradientStep = 0.005;\n\n  // x axis\n  vec3 g100 = vec3(1., 0., 0.);\n  vec3 ng100 = normalizedPosition + g100 * gradientStep;\n  ng100.x = min(1., ng100.x);\n\n  vec4 vg100 = vec4(0.);\n  trilinearInterpolation(ng100, vg100 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go100 = -g100;\n  vec3 ngo100 = normalizedPosition + go100 * gradientStep;\n  ngo100.x = max(0., ngo100.x);\n\n  vec4 vgo100 = vec4(0.);\n  trilinearInterpolation(ngo100, vgo100 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.x = (g100.x * vg100.x + go100.x * vgo100.x);\n\n  // y axis\n  vec3 g010 = vec3(0., 1., 0.);\n  vec3 ng010 = normalizedPosition + g010 * gradientStep;\n  ng010.y = min(1., ng010.y);\n\n  vec4 vg010 = vec4(0.);\n  trilinearInterpolation(ng010, vg010 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go010 = -g010;\n  vec3 ngo010 = normalizedPosition + go010 * gradientStep;\n  ngo010.y = max(0., ngo010.y);\n\n  vec4 vgo010 = vec4(0.);\n  trilinearInterpolation(ngo010, vgo010 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.y = (g010.y * vg010.x + go010.y * vgo010.x);\n\n  // z axis\n  vec3 g001 = vec3(0., 0., 1.);\n  vec3 ng001 = normalizedPosition + g001 * gradientStep;\n  ng001.z = min(1., ng001.z);\n\n  vec4 vg001 = vec4(0.);\n  trilinearInterpolation(ng001, vg001 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  vec3 go001 = -g001;\n  vec3 ngo001 = normalizedPosition + go001 * gradientStep;\n  ngo001.z = max(0., ngo001.z);\n\n  vec4 vgo001 = vec4(0.);\n  trilinearInterpolation(ngo001, vgo001 ,v000, v100, v001, v101, v010,v110, v011,v111);\n\n  gradient.z = (g001.z * vg001.x + go001.z * vgo001.x);\n\n  // normalize gradient\n  // +0.0001  instead of if?\n  float gradientMagnitude = length(gradient);\n  if (gradientMagnitude > 0.0) {\n    gradient = -(1. / gradientMagnitude) * gradient;\n  }\n}\n    `}}},function(t,e,i){"use strict";var n=i(9);e.a=new class extends n.a{constructor(){super(),this.name="intersectBox",this._rayOrigin="rayOrigin",this._rayDirection="rayDirection",this._aabbMin="aabbMin",this._aabbMax="aabbMax",this._tNear="tNear",this._tFar="tFar",this._intersect="intersect"}api(t=this._base,e=this._rayOrigin,i=this._rayDirection,n=this._aabbMin,r=this._aabbMax,a=this._tNear,s=this._tFar,o=this._intersect){return this._base=t,this.compute(e,i,n,r,a,s,o)}compute(t,e,i,n,r,a,s){return this.computeDefinition(),this._base._functions[this._name]=this._definition,`${this._name}(${t}, ${e}, ${i}, ${n}, ${r}, ${a}, ${s});`}computeDefinition(){this._definition=`\nvoid ${this._name}(vec3 rayOrigin, vec3 rayDirection, vec3 boxMin, vec3 boxMax, out float tNear, out float tFar, out bool intersect){\n  // compute intersection of ray with all six bbox planes\n  vec3 invRay = vec3(1.) / rayDirection;\n  vec3 tBot = invRay * (boxMin - rayOrigin);\n  vec3 tTop = invRay * (boxMax - rayOrigin);\n  // re-order intersections to find smallest and largest on each axis\n  vec3 tMin = min(tTop, tBot);\n  vec3 tMax = max(tTop, tBot);\n  // find the largest tMin and the smallest tMax\n  float largest_tMin = max(max(tMin.x, tMin.y), max(tMin.x, tMin.z));\n  float smallest_tMax = min(min(tMax.x, tMax.y), min(tMax.x, tMax.z));\n  tNear = largest_tMin;\n  tFar = smallest_tMax;\n  intersect = smallest_tMax > largest_tMin;\n}\n\n    `}}},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i(29),r=i(113),a=i.n(r);class s extends a.a{constructor(t=null,e=n.a){super(),this._loaded=-1,this._totalLoaded=-1,this._parsed=-1,this._totalParsed=-1,this._data=[],this._container=t,this._progressBar=null,this._container&&e&&(this._progressBar=new e(this._container))}free(){this._data=[],this._container=null,this._progressBar&&(this._progressBar.free(),this._progressBar=null)}fetch(t,e){return new Promise((i,n)=>{const r=new XMLHttpRequest;r.open("GET",t),r.crossOrigin=!0,r.responseType="arraybuffer",r.onloadstart=(e=>{this.emit("fetch-start",{file:t,time:new Date})}),r.onload=(e=>{if(200===r.status||0===r.status){this._loaded=e.loaded,this._totalLoaded=e.total,this._progressBar&&this._progressBar.update(this._loaded,this._totalLoaded,"load",t);let n=r.response,a={url:t,buffer:n};this.emit("fetch-success",{file:t,time:new Date,totalLoaded:e.total}),i(a)}else n(r.statusText)}),r.onerror=(()=>{this.emit("fetch-error",{file:t,time:new Date}),n(r.statusText)}),r.onabort=(e=>{this.emit("fetch-abort",{file:t,time:new Date}),n(r.statusText||"Aborted")}),r.ontimeout=(()=>{this.emit("fetch-timeout",{file:t,time:new Date}),n(r.statusText)}),r.onprogress=(e=>{this._loaded=e.loaded,this._totalLoaded=e.total,this.emit("fetch-progress",{file:t,total:e.total,loaded:e.loaded,time:new Date}),this._progressBar&&this._progressBar.update(this._loaded,this._totalLoaded,"load",t)}),r.onloadend=(e=>{this.emit("fetch-end",{file:t,time:new Date})}),e instanceof Map&&e.set(t,r),r.send()})}parse(t){return new Promise((e,i)=>{e(t)})}loadSequenceGroup(t,e){const i=[];return t.forEach(t=>{i.push(this.fetch(t,e))}),Promise.all(i).then(t=>this.parse(t)).then(t=>(this._data.push(t),t)).catch(function(t){"Aborted"!==t&&(window.console.log("oops... something went wrong..."),window.console.log(t))})}loadSequence(t,e){return this.fetch(t,e).then(t=>this.parse(t)).then(t=>(this._data.push(t),t)).catch(function(t){"Aborted"!==t&&(window.console.log("oops... something went wrong..."),window.console.log(t))})}load(t,e){Array.isArray(t)||(t=[t]),this._progressBar&&(this._progressBar.totalFiles=t.length,this._progressBar.requests=e),this.emit("load-start",{files:t,time:new Date});const i=[];return t.forEach(t=>{Array.isArray(t)?i.push(this.loadSequenceGroup(t,e)):i.push(this.loadSequence(t,e))}),Promise.all(i)}set data(t){this._data=t}get data(){return this._data}}},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,s,o,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(a(i=this._events[t]))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(r(i))for(o=Array.prototype.slice.call(arguments,1),s=(c=i.slice()).length,l=0;l<s;l++)c[l].apply(this,o);return!0},i.prototype.addListener=function(t,e){var s;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(s=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},i.prototype.removeListener=function(t,e){var i,a,s,o;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(i=this._events[t]).length,a=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(i)){for(o=s;o-- >0;)if(i[o]===e||i[o].listener&&i[o].listener===e){a=o;break}if(a<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});const n=function(t,e){if(8===t.bitsAllocated)return t.planarConfiguration?function(t,e){const i=e,n=t.rows*t.columns,r=new ArrayBuffer(n*t.samplesPerPixel),a=new DataView(i.buffer,i.byteOffset),s=new Int8Array(i.buffer,i.byteOffset),o=new Int8Array(r);let l=0;const c=a.getInt32(0,!0);for(let t=0;t<c;++t){l=t*n;let e=a.getInt32(4*(t+1),!0),r=a.getInt32(4*(t+2),!0);0===r&&(r=i.length);const h=n*c;for(;e<r;){const t=s[e++];if(t>=0&&t<=127)for(let i=0;i<t+1&&l<h;++i)o[l]=s[e++],l++;else if(t<=-1&&t>=-127){const i=s[e++];for(let e=0;e<1-t&&l<h;++e)o[l]=i,l++}}}return t.pixelData=new Uint8Array(r),t}(t,e):function(t,e){const i=e,n=t.rows*t.columns,r=new ArrayBuffer(n*t.samplesPerPixel),a=new DataView(i.buffer,i.byteOffset),s=new Int8Array(i.buffer,i.byteOffset),o=new Int8Array(r);let l=0;const c=a.getInt32(0,!0);for(let e=0;e<c;++e){l=e;let r=a.getInt32(4*(e+1),!0),h=a.getInt32(4*(e+2),!0);0===h&&(h=i.length);const u=n*c;for(;r<h;){const e=s[r++];if(e>=0&&e<=127)for(let i=0;i<e+1&&l<u;++i)o[l]=s[r++],l+=t.samplesPerPixel;else if(e<=-1&&e>=-127){const i=s[r++];for(let n=0;n<1-e&&l<u;++n)o[l]=i,l+=t.samplesPerPixel}}}return t.pixelData=new Uint8Array(r),t}(t,e);if(16===t.bitsAllocated)return function(t,e){const i=e,n=t.rows*t.columns,r=new ArrayBuffer(n*t.samplesPerPixel*2),a=new DataView(i.buffer,i.byteOffset),s=new Int8Array(i.buffer,i.byteOffset),o=new Int8Array(r),l=a.getInt32(0,!0);for(let t=0;t<l;++t){let e=0;const r=0===t?1:0;let l=a.getInt32(4*(t+1),!0),c=a.getInt32(4*(t+2),!0);for(0===c&&(c=i.length);l<c;){const t=s[l++];if(t>=0&&t<=127)for(let i=0;i<t+1&&e<n;++i)o[2*e+r]=s[l++],e++;else if(t<=-1&&t>=-127){const i=s[l++];for(let a=0;a<1-t&&e<n;++a)o[2*e+r]=i,e++}}}return 0===t.pixelRepresentation?t.pixelData=new Uint16Array(r):t.pixelData=new Int16Array(r),t}(t,e);throw new Error("unsupported pixel format for RLE")}},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(10),r=i(0);class a extends n.a{constructor(t,e){super(),this._id=e,this._url=t.url,this._header={},this._buffer=null;try{(new TextDecoder).decode(t.mhdBuffer).split("\n").forEach(t=>{let e=t.split("=");2===e.length&&(this._header[e[0].trim()]=e[1].trim())}),this._header.DimSize=this._header.DimSize.split(" "),this._header.ElementSpacing=this._header.ElementSpacing.split(" "),this._header.TransformMatrix=this._header.TransformMatrix.split(" "),this._header.Offset=this._header.Offset.split(" "),this._buffer=t.rawBuffer}catch(t){window.console.log("ooops... :(")}}rightHanded(){let t=this._header.AnatomicalOrientation;return this._rightHanded="RAS"===t||"RPI"===t||"LPS"===t||"LAI"===t,this._rightHanded}seriesInstanceUID(){return this._url}numberOfFrames(){return parseInt(this._header.DimSize[2],10)}sopInstanceUID(t=0){return t}rows(t=0){return parseInt(this._header.DimSize[1],10)}columns(t=0){return parseInt(this._header.DimSize[0],10)}pixelType(t=0){let e=0;return"MET_UFLOAT"!==this._header.ElementType&&"MET_FLOAT"!==this._header.ElementType||(e=1),e}bitsAllocated(t=0){let e=1;return"MET_UCHAR"===this._header.ElementType||"MET_CHAR"===this._header.ElementType?e=8:"MET_USHORT"===this._header.ElementType||"MET_SHORT"===this._header.ElementType?e=16:"MET_UINT"!==this._header.ElementType&&"MET_INT"!==this._header.ElementType&&"MET_UFLOAT"!==this._header.ElementType&&"MET_FLOAT"!==this._header.ElementType||(e=32),e}pixelSpacing(t=0){return[parseFloat(this._header.ElementSpacing[1],10),parseFloat(this._header.ElementSpacing[0],10),parseFloat(this._header.ElementSpacing[2],10)]}imageOrientation(t=0){let e=this._header.AnatomicalOrientation.match(/L/)?-1:1,i=this._header.AnatomicalOrientation.match(/P/)?-1:1,n=new r.a(parseFloat(this._header.TransformMatrix[0])*e,parseFloat(this._header.TransformMatrix[1])*i,parseFloat(this._header.TransformMatrix[2]));n.normalize();let a=new r.a(parseFloat(this._header.TransformMatrix[3])*e,parseFloat(this._header.TransformMatrix[4])*i,parseFloat(this._header.TransformMatrix[5]));return a.normalize(),[n.x,n.y,n.z,a.x,a.y,a.z]}imagePosition(t=0){return[parseFloat(this._header.Offset[0]),parseFloat(this._header.Offset[1]),parseFloat(this._header.Offset[2])]}extractPixelData(t=0){return this._decompressUncompressed(t)}_decompressUncompressed(t=0){let e=this._buffer,i=this.numberOfChannels(),n=this.rows(t)*this.columns(t)*i;this.rightHanded()||(t=this.numberOfFrames()-1-t);let r=t*n;return"MET_CHAR"===this._header.ElementType?new Int8Array(e,r,n):"MET_UCHAR"===this._header.ElementType?new Uint8Array(e,r,n):"MET_SHORT"===this._header.ElementType?(r*=2,new Int16Array(e,r,n)):"MET_USHORT"===this._header.ElementType?(r*=2,new Uint16Array(e,r,n)):"MET_INT"===this._header.ElementType?(r*=4,new Int32Array(e,r,n)):"MET_UINT"===this._header.ElementType?(r*=4,new Uint32Array(e,r,n)):"MET_FLOAT"===this._header.ElementType?(r*=4,new Float32Array(e,r,n)):void 0}}},function(t,e,i){"use strict";e.a={0:{color:[0,0,0],opacity:0,label:"Unknown"},1:{color:[70,130,180],opacity:1,label:"Left-Cerebral-Exterior"},2:{color:[245,245,245],opacity:1,label:"Left-Cerebral-White-Matter"},3:{color:[205,62,78],opacity:1,label:"Left-Cerebral-Cortex"},4:{color:[120,18,134],opacity:1,label:"Left-Lateral-Ventricle"},5:{color:[196,58,250],opacity:1,label:"Left-Inf-Lat-Vent"},6:{color:[0,148,0],opacity:1,label:"Left-Cerebellum-Exterior"},7:{color:[220,248,164],opacity:1,label:"Left-Cerebellum-White-Matter"},8:{color:[230,148,34],opacity:1,label:"Left-Cerebellum-Cortex"},9:{color:[0,118,14],opacity:1,label:"Left-Thalamus"},10:{color:[0,118,14],opacity:1,label:"Left-Thalamus-Proper"},11:{color:[122,186,220],opacity:1,label:"Left-Caudate"},12:{color:[236,13,176],opacity:1,label:"Left-Putamen"},13:{color:[12,48,255],opacity:1,label:"Left-Pallidum"},14:{color:[204,182,142],opacity:1,label:"3rd-Ventricle"},15:{color:[42,204,164],opacity:1,label:"4th-Ventricle"},16:{color:[119,159,176],opacity:1,label:"Brain-Stem"},17:{color:[220,216,20],opacity:1,label:"Left-Hippocampus"},18:{color:[103,255,255],opacity:1,label:"Left-Amygdala"},19:{color:[80,196,98],opacity:1,label:"Left-Insula"},20:{color:[60,58,210],opacity:1,label:"Left-Operculum"},21:{color:[60,58,210],opacity:1,label:"Line-1"},22:{color:[60,58,210],opacity:1,label:"Line-2"},23:{color:[60,58,210],opacity:1,label:"Line-3"},24:{color:[60,60,60],opacity:1,label:"CSF"},25:{color:[255,165,0],opacity:1,label:"Left-Lesion"},26:{color:[255,165,0],opacity:1,label:"Left-Accumbens-area"},27:{color:[0,255,127],opacity:1,label:"Left-Substancia-Nigra"},28:{color:[165,42,42],opacity:1,label:"Left-VentralDC"},29:{color:[135,206,235],opacity:1,label:"Left-undetermined"},30:{color:[160,32,240],opacity:1,label:"Left-vessel"},31:{color:[0,200,200],opacity:1,label:"Left-choroid-plexus"},32:{color:[100,50,100],opacity:1,label:"Left-F3orb"},33:{color:[135,50,74],opacity:1,label:"Left-lOg"},34:{color:[122,135,50],opacity:1,label:"Left-aOg"},35:{color:[51,50,135],opacity:1,label:"Left-mOg"},36:{color:[74,155,60],opacity:1,label:"Left-pOg"},37:{color:[120,62,43],opacity:1,label:"Left-Stellate"},38:{color:[74,155,60],opacity:1,label:"Left-Porg"},39:{color:[122,135,50],opacity:1,label:"Left-Aorg"},40:{color:[70,130,180],opacity:1,label:"Right-Cerebral-Exterior"},41:{color:[245,245,245],opacity:1,label:"Right-Cerebral-White-Matter"},42:{color:[205,62,78],opacity:1,label:"Right-Cerebral-Cortex"},43:{color:[120,18,134],opacity:1,label:"Right-Lateral-Ventricle"},44:{color:[196,58,250],opacity:1,label:"Right-Inf-Lat-Vent"},45:{color:[0,148,0],opacity:1,label:"Right-Cerebellum-Exterior"},46:{color:[220,248,164],opacity:1,label:"Right-Cerebellum-White-Matter"},47:{color:[230,148,34],opacity:1,label:"Right-Cerebellum-Cortex"},48:{color:[0,118,14],opacity:1,label:"Right-Thalamus"},49:{color:[0,118,14],opacity:1,label:"Right-Thalamus-Proper"},50:{color:[122,186,220],opacity:1,label:"Right-Caudate"},51:{color:[236,13,176],opacity:1,label:"Right-Putamen"},52:{color:[13,48,255],opacity:1,label:"Right-Pallidum"},53:{color:[220,216,20],opacity:1,label:"Right-Hippocampus"},54:{color:[103,255,255],opacity:1,label:"Right-Amygdala"},55:{color:[80,196,98],opacity:1,label:"Right-Insula"},56:{color:[60,58,210],opacity:1,label:"Right-Operculum"},57:{color:[255,165,0],opacity:1,label:"Right-Lesion"},58:{color:[255,165,0],opacity:1,label:"Right-Accumbens-area"},59:{color:[0,255,127],opacity:1,label:"Right-Substancia-Nigra"},60:{color:[165,42,42],opacity:1,label:"Right-VentralDC"},61:{color:[135,206,235],opacity:1,label:"Right-undetermined"},62:{color:[160,32,240],opacity:1,label:"Right-vessel"},63:{color:[0,200,221],opacity:1,label:"Right-choroid-plexus"},64:{color:[100,50,100],opacity:1,label:"Right-F3orb"},65:{color:[135,50,74],opacity:1,label:"Right-lOg"},66:{color:[122,135,50],opacity:1,label:"Right-aOg"},67:{color:[51,50,135],opacity:1,label:"Right-mOg"},68:{color:[74,155,60],opacity:1,label:"Right-pOg"},69:{color:[120,62,43],opacity:1,label:"Right-Stellate"},70:{color:[74,155,60],opacity:1,label:"Right-Porg"},71:{color:[122,135,50],opacity:1,label:"Right-Aorg"},72:{color:[120,190,150],opacity:1,label:"5th-Ventricle"},73:{color:[122,135,50],opacity:1,label:"Left-Interior"},74:{color:[122,135,50],opacity:1,label:"Right-Interior"},77:{color:[200,70,255],opacity:1,label:"WM-hypointensities"},78:{color:[255,148,10],opacity:1,label:"Left-WM-hypointensities"},79:{color:[255,148,10],opacity:1,label:"Right-WM-hypointensities"},80:{color:[164,108,226],opacity:1,label:"non-WM-hypointensities"},81:{color:[164,108,226],opacity:1,label:"Left-non-WM-hypointensities"},82:{color:[164,108,226],opacity:1,label:"Right-non-WM-hypointensities"},83:{color:[255,218,185],opacity:1,label:"Left-F1"},84:{color:[255,218,185],opacity:1,label:"Right-F1"},85:{color:[234,169,30],opacity:1,label:"Optic-Chiasm"},192:{color:[250,255,50],opacity:1,label:"Corpus_Callosum"},86:{color:[200,120,255],opacity:1,label:"Left_future_WMSA"},87:{color:[200,121,255],opacity:1,label:"Right_future_WMSA"},88:{color:[200,122,255],opacity:1,label:"future_WMSA"},96:{color:[205,10,125],opacity:1,label:"Left-Amygdala-Anterior"},97:{color:[205,10,125],opacity:1,label:"Right-Amygdala-Anterior"},98:{color:[160,32,240],opacity:1,label:"Dura"},100:{color:[124,140,178],opacity:1,label:"Left-wm-intensity-abnormality"},101:{color:[125,140,178],opacity:1,label:"Left-caudate-intensity-abnormality"},102:{color:[126,140,178],opacity:1,label:"Left-putamen-intensity-abnormality"},103:{color:[127,140,178],opacity:1,label:"Left-accumbens-intensity-abnormality"},104:{color:[124,141,178],opacity:1,label:"Left-pallidum-intensity-abnormality"},105:{color:[124,142,178],opacity:1,label:"Left-amygdala-intensity-abnormality"},106:{color:[124,143,178],opacity:1,label:"Left-hippocampus-intensity-abnormality"},107:{color:[124,144,178],opacity:1,label:"Left-thalamus-intensity-abnormality"},108:{color:[124,140,179],opacity:1,label:"Left-VDC-intensity-abnormality"},109:{color:[124,140,178],opacity:1,label:"Right-wm-intensity-abnormality"},110:{color:[125,140,178],opacity:1,label:"Right-caudate-intensity-abnormality"},111:{color:[126,140,178],opacity:1,label:"Right-putamen-intensity-abnormality"},112:{color:[127,140,178],opacity:1,label:"Right-accumbens-intensity-abnormality"},113:{color:[124,141,178],opacity:1,label:"Right-pallidum-intensity-abnormality"},114:{color:[124,142,178],opacity:1,label:"Right-amygdala-intensity-abnormality"},115:{color:[124,143,178],opacity:1,label:"Right-hippocampus-intensity-abnormality"},116:{color:[124,144,178],opacity:1,label:"Right-thalamus-intensity-abnormality"},117:{color:[124,140,179],opacity:1,label:"Right-VDC-intensity-abnormality"},118:{color:[255,20,147],opacity:1,label:"Epidermis"},119:{color:[205,179,139],opacity:1,label:"Conn-Tissue"},120:{color:[238,238,209],opacity:1,label:"SC-Fat-Muscle"},121:{color:[200,200,200],opacity:1,label:"Cranium"},122:{color:[74,255,74],opacity:1,label:"CSF-SA"},123:{color:[238,0,0],opacity:1,label:"Muscle"},124:{color:[0,0,139],opacity:1,label:"Ear"},125:{color:[173,255,47],opacity:1,label:"Adipose"},126:{color:[133,203,229],opacity:1,label:"Spinal-Cord"},127:{color:[26,237,57],opacity:1,label:"Soft-Tissue"},128:{color:[34,139,34],opacity:1,label:"Nerve"},129:{color:[30,144,255],opacity:1,label:"Bone"},130:{color:[147,19,173],opacity:1,label:"Air"},131:{color:[238,59,59],opacity:1,label:"Orbital-Fat"},132:{color:[221,39,200],opacity:1,label:"Tongue"},133:{color:[238,174,238],opacity:1,label:"Nasal-Structures"},134:{color:[255,0,0],opacity:1,label:"Globe"},135:{color:[72,61,139],opacity:1,label:"Teeth"},136:{color:[21,39,132],opacity:1,label:"Left-Caudate-Putamen"},137:{color:[21,39,132],opacity:1,label:"Right-Caudate-Putamen"},138:{color:[65,135,20],opacity:1,label:"Left-Claustrum"},139:{color:[65,135,20],opacity:1,label:"Right-Claustrum"},140:{color:[134,4,160],opacity:1,label:"Cornea"},142:{color:[221,226,68],opacity:1,label:"Diploe"},143:{color:[255,255,254],opacity:1,label:"Vitreous-Humor"},144:{color:[52,209,226],opacity:1,label:"Lens"},145:{color:[239,160,223],opacity:1,label:"Aqueous-Humor"},146:{color:[70,130,180],opacity:1,label:"Outer-Table"},147:{color:[70,130,181],opacity:1,label:"Inner-Table"},148:{color:[139,121,94],opacity:1,label:"Periosteum"},149:{color:[224,224,224],opacity:1,label:"Endosteum"},150:{color:[255,0,0],opacity:1,label:"R-C-S"},151:{color:[205,205,0],opacity:1,label:"Iris"},152:{color:[238,238,209],opacity:1,label:"SC-Adipose-Muscle"},153:{color:[139,121,94],opacity:1,label:"SC-Tissue"},154:{color:[238,59,59],opacity:1,label:"Orbital-Adipose"},155:{color:[238,59,59],opacity:1,label:"Left-IntCapsule-Ant"},156:{color:[238,59,59],opacity:1,label:"Right-IntCapsule-Ant"},157:{color:[62,10,205],opacity:1,label:"Left-IntCapsule-Pos"},158:{color:[62,10,205],opacity:1,label:"Right-IntCapsule-Pos"},159:{color:[0,118,14],opacity:1,label:"Left-Cerebral-WM-unmyelinated"},160:{color:[0,118,14],opacity:1,label:"Right-Cerebral-WM-unmyelinated"},161:{color:[220,216,21],opacity:1,label:"Left-Cerebral-WM-myelinated"},162:{color:[220,216,21],opacity:1,label:"Right-Cerebral-WM-myelinated"},163:{color:[122,186,220],opacity:1,label:"Left-Subcortical-Gray-Matter"},164:{color:[122,186,220],opacity:1,label:"Right-Subcortical-Gray-Matter"},165:{color:[120,120,120],opacity:1,label:"Skull"},166:{color:[14,48,255],opacity:1,label:"Posterior-fossa"},167:{color:[166,42,42],opacity:1,label:"Scalp"},168:{color:[121,18,134],opacity:1,label:"Hematoma"},169:{color:[236,13,127],opacity:1,label:"Left-Basal-Ganglia"},176:{color:[236,13,126],opacity:1,label:"Right-Basal-Ganglia"},170:{color:[119,159,176],opacity:1,label:"brainstem"},171:{color:[119,0,176],opacity:1,label:"DCG"},172:{color:[119,100,176],opacity:1,label:"Vermis"},173:{color:[242,104,76],opacity:1,label:"Midbrain"},174:{color:[206,195,58],opacity:1,label:"Pons"},175:{color:[119,159,176],opacity:1,label:"Medulla"},177:{color:[119,50,176],opacity:1,label:"Vermis-White-Matter"},178:{color:[142,182,0],opacity:1,label:"SCP"},179:{color:[19,100,176],opacity:1,label:"Floculus"},180:{color:[73,61,139],opacity:1,label:"Left-Cortical-Dysplasia"},181:{color:[73,62,139],opacity:1,label:"Right-Cortical-Dysplasia"},182:{color:[10,100,176],opacity:1,label:"CblumNodulus"},193:{color:[0,196,255],opacity:1,label:"Left-hippocampal_fissure"},194:{color:[255,164,164],opacity:1,label:"Left-CADG-head"},195:{color:[196,196,0],opacity:1,label:"Left-subiculum"},196:{color:[0,100,255],opacity:1,label:"Left-fimbria"},197:{color:[128,196,164],opacity:1,label:"Right-hippocampal_fissure"},198:{color:[0,126,75],opacity:1,label:"Right-CADG-head"},199:{color:[128,96,64],opacity:1,label:"Right-subiculum"},200:{color:[0,50,128],opacity:1,label:"Right-fimbria"},201:{color:[255,204,153],opacity:1,label:"alveus"},202:{color:[255,128,128],opacity:1,label:"perforant_pathway"},203:{color:[255,255,0],opacity:1,label:"parasubiculum"},204:{color:[64,0,64],opacity:1,label:"presubiculum"},205:{color:[0,0,255],opacity:1,label:"subiculum"},206:{color:[255,0,0],opacity:1,label:"CA1"},207:{color:[128,128,255],opacity:1,label:"CA2"},208:{color:[0,128,0],opacity:1,label:"CA3"},209:{color:[196,160,128],opacity:1,label:"CA4"},210:{color:[32,200,255],opacity:1,label:"GC-DG"},211:{color:[128,255,128],opacity:1,label:"HATA"},212:{color:[204,153,204],opacity:1,label:"fimbria"},213:{color:[121,17,136],opacity:1,label:"lateral_ventricle"},214:{color:[128,0,0],opacity:1,label:"molecular_layer_HP"},215:{color:[128,32,255],opacity:1,label:"hippocampal_fissure"},216:{color:[255,204,102],opacity:1,label:"entorhinal_cortex"},217:{color:[128,128,128],opacity:1,label:"molecular_layer_subiculum"},218:{color:[104,255,255],opacity:1,label:"Amygdala"},219:{color:[0,226,0],opacity:1,label:"Cerebral_White_Matter"},220:{color:[205,63,78],opacity:1,label:"Cerebral_Cortex"},221:{color:[197,58,250],opacity:1,label:"Inf_Lat_Vent"},222:{color:[33,150,250],opacity:1,label:"Perirhinal"},223:{color:[226,0,0],opacity:1,label:"Cerebral_White_Matter_Edge"},224:{color:[100,100,100],opacity:1,label:"Background"},225:{color:[197,150,250],opacity:1,label:"Ectorhinal"},226:{color:[170,170,255],opacity:1,label:"HP_tail"},250:{color:[255,0,0],opacity:1,label:"Fornix"},251:{color:[0,0,64],opacity:1,label:"CC_Posterior"},252:{color:[0,0,112],opacity:1,label:"CC_Mid_Posterior"},253:{color:[0,0,160],opacity:1,label:"CC_Central"},254:{color:[0,0,208],opacity:1,label:"CC_Mid_Anterior"},255:{color:[0,0,255],opacity:1,label:"CC_Anterior"},256:{color:[0,0,0],opacity:1,label:"Voxel-Unchanged"},257:{color:[60,60,60],opacity:1,label:"CSF-ExtraCerebral"},258:{color:[150,150,200],opacity:1,label:"Head-ExtraCerebral"},259:{color:[120,120,120],opacity:1,label:"SkullApprox"},260:{color:[119,159,176],opacity:1,label:"BoneOrAir"},261:{color:[120,18,134],opacity:1,label:"PossibleFluid"},262:{color:[119,159,176],opacity:1,label:"Sinus"},263:{color:[119,159,176],opacity:1,label:"Left-Eustachian"},264:{color:[119,159,176],opacity:1,label:"Right-Eustachian"},331:{color:[255,0,0],opacity:1,label:"Aorta"},332:{color:[255,80,0],opacity:1,label:"Left-Common-IliacA"},333:{color:[255,160,0],opacity:1,label:"Right-Common-IliacA"},334:{color:[255,255,0],opacity:1,label:"Left-External-IliacA"},335:{color:[0,255,0],opacity:1,label:"Right-External-IliacA"},336:{color:[255,0,160],opacity:1,label:"Left-Internal-IliacA"},337:{color:[255,0,255],opacity:1,label:"Right-Internal-IliacA"},338:{color:[255,50,80],opacity:1,label:"Left-Lateral-SacralA"},339:{color:[80,255,50],opacity:1,label:"Right-Lateral-SacralA"},340:{color:[160,255,50],opacity:1,label:"Left-ObturatorA"},341:{color:[160,200,255],opacity:1,label:"Right-ObturatorA"},342:{color:[0,255,160],opacity:1,label:"Left-Internal-PudendalA"},343:{color:[0,0,255],opacity:1,label:"Right-Internal-PudendalA"},344:{color:[80,50,255],opacity:1,label:"Left-UmbilicalA"},345:{color:[160,0,255],opacity:1,label:"Right-UmbilicalA"},346:{color:[255,210,0],opacity:1,label:"Left-Inf-RectalA"},347:{color:[0,160,255],opacity:1,label:"Right-Inf-RectalA"},348:{color:[255,200,80],opacity:1,label:"Left-Common-IliacV"},349:{color:[255,200,160],opacity:1,label:"Right-Common-IliacV"},350:{color:[255,80,200],opacity:1,label:"Left-External-IliacV"},351:{color:[255,160,200],opacity:1,label:"Right-External-IliacV"},352:{color:[30,255,80],opacity:1,label:"Left-Internal-IliacV"},353:{color:[80,200,255],opacity:1,label:"Right-Internal-IliacV"},354:{color:[80,255,200],opacity:1,label:"Left-ObturatorV"},355:{color:[195,255,200],opacity:1,label:"Right-ObturatorV"},356:{color:[120,200,20],opacity:1,label:"Left-Internal-PudendalV"},357:{color:[170,10,200],opacity:1,label:"Right-Internal-PudendalV"},358:{color:[20,130,180],opacity:1,label:"Pos-Lymph"},359:{color:[20,180,130],opacity:1,label:"Neg-Lymph"},400:{color:[206,62,78],opacity:1,label:"V1"},401:{color:[121,18,134],opacity:1,label:"V2"},402:{color:[199,58,250],opacity:1,label:"BA44"},403:{color:[1,148,0],opacity:1,label:"BA45"},404:{color:[221,248,164],opacity:1,label:"BA4a"},405:{color:[231,148,34],opacity:1,label:"BA4p"},406:{color:[1,118,14],opacity:1,label:"BA6"},407:{color:[120,118,14],opacity:1,label:"BA2"},408:{color:[123,186,221],opacity:1,label:"BA1_old"},409:{color:[238,13,177],opacity:1,label:"BAun2"},410:{color:[123,186,220],opacity:1,label:"BA1"},411:{color:[138,13,206],opacity:1,label:"BA2b"},412:{color:[238,130,176],opacity:1,label:"BA3a"},413:{color:[218,230,76],opacity:1,label:"BA3b"},414:{color:[38,213,176],opacity:1,label:"MT"},415:{color:[1,225,176],opacity:1,label:"AIPS_AIP_l"},416:{color:[1,225,176],opacity:1,label:"AIPS_AIP_r"},417:{color:[200,2,100],opacity:1,label:"AIPS_VIP_l"},418:{color:[200,2,100],opacity:1,label:"AIPS_VIP_r"},419:{color:[5,200,90],opacity:1,label:"IPL_PFcm_l"},420:{color:[5,200,90],opacity:1,label:"IPL_PFcm_r"},421:{color:[100,5,200],opacity:1,label:"IPL_PF_l"},422:{color:[25,255,100],opacity:1,label:"IPL_PFm_l"},423:{color:[25,255,100],opacity:1,label:"IPL_PFm_r"},424:{color:[230,7,100],opacity:1,label:"IPL_PFop_l"},425:{color:[230,7,100],opacity:1,label:"IPL_PFop_r"},426:{color:[100,5,200],opacity:1,label:"IPL_PF_r"},427:{color:[150,10,200],opacity:1,label:"IPL_PFt_l"},428:{color:[150,10,200],opacity:1,label:"IPL_PFt_r"},429:{color:[175,10,176],opacity:1,label:"IPL_PGa_l"},430:{color:[175,10,176],opacity:1,label:"IPL_PGa_r"},431:{color:[10,100,255],opacity:1,label:"IPL_PGp_l"},432:{color:[10,100,255],opacity:1,label:"IPL_PGp_r"},433:{color:[150,45,70],opacity:1,label:"Visual_V3d_l"},434:{color:[150,45,70],opacity:1,label:"Visual_V3d_r"},435:{color:[45,200,15],opacity:1,label:"Visual_V4_l"},436:{color:[45,200,15],opacity:1,label:"Visual_V4_r"},437:{color:[227,45,100],opacity:1,label:"Visual_V5_b"},438:{color:[227,45,100],opacity:1,label:"Visual_VP_l"},439:{color:[227,45,100],opacity:1,label:"Visual_VP_r"},498:{color:[143,188,143],opacity:1,label:"wmsa"},499:{color:[255,248,220],opacity:1,label:"other_wmsa"},500:{color:[17,85,136],opacity:1,label:"right_CA2_3"},501:{color:[119,187,102],opacity:1,label:"right_alveus"},502:{color:[204,68,34],opacity:1,label:"right_CA1"},503:{color:[204,0,255],opacity:1,label:"right_fimbria"},504:{color:[221,187,17],opacity:1,label:"right_presubiculum"},505:{color:[153,221,238],opacity:1,label:"right_hippocampal_fissure"},506:{color:[51,17,17],opacity:1,label:"right_CA4_DG"},507:{color:[0,119,85],opacity:1,label:"right_subiculum"},508:{color:[20,100,200],opacity:1,label:"right_fornix"},550:{color:[17,85,137],opacity:1,label:"left_CA2_3"},551:{color:[119,187,103],opacity:1,label:"left_alveus"},552:{color:[204,68,35],opacity:1,label:"left_CA1"},553:{color:[204,0,254],opacity:1,label:"left_fimbria"},554:{color:[221,187,16],opacity:1,label:"left_presubiculum"},555:{color:[153,221,239],opacity:1,label:"left_hippocampal_fissure"},556:{color:[51,17,18],opacity:1,label:"left_CA4_DG"},557:{color:[0,119,86],opacity:1,label:"left_subiculum"},558:{color:[20,100,201],opacity:1,label:"left_fornix"},600:{color:[254,254,254],opacity:1,label:"Tumor"},601:{color:[70,130,180],opacity:1,label:"Cbm_Left_I_IV"},602:{color:[245,245,245],opacity:1,label:"Cbm_Right_I_IV"},603:{color:[205,62,78],opacity:1,label:"Cbm_Left_V"},604:{color:[120,18,134],opacity:1,label:"Cbm_Right_V"},605:{color:[196,58,250],opacity:1,label:"Cbm_Left_VI"},606:{color:[0,148,0],opacity:1,label:"Cbm_Vermis_VI"},607:{color:[220,248,164],opacity:1,label:"Cbm_Right_VI"},608:{color:[230,148,34],opacity:1,label:"Cbm_Left_CrusI"},609:{color:[0,118,14],opacity:1,label:"Cbm_Vermis_CrusI"},610:{color:[0,118,14],opacity:1,label:"Cbm_Right_CrusI"},611:{color:[122,186,220],opacity:1,label:"Cbm_Left_CrusII"},612:{color:[236,13,176],opacity:1,label:"Cbm_Vermis_CrusII"},613:{color:[12,48,255],opacity:1,label:"Cbm_Right_CrusII"},614:{color:[204,182,142],opacity:1,label:"Cbm_Left_VIIb"},615:{color:[42,204,164],opacity:1,label:"Cbm_Vermis_VIIb"},616:{color:[119,159,176],opacity:1,label:"Cbm_Right_VIIb"},617:{color:[220,216,20],opacity:1,label:"Cbm_Left_VIIIa"},618:{color:[103,255,255],opacity:1,label:"Cbm_Vermis_VIIIa"},619:{color:[80,196,98],opacity:1,label:"Cbm_Right_VIIIa"},620:{color:[60,58,210],opacity:1,label:"Cbm_Left_VIIIb"},621:{color:[60,58,210],opacity:1,label:"Cbm_Vermis_VIIIb"},622:{color:[60,58,210],opacity:1,label:"Cbm_Right_VIIIb"},623:{color:[60,58,210],opacity:1,label:"Cbm_Left_IX"},624:{color:[60,60,60],opacity:1,label:"Cbm_Vermis_IX"},625:{color:[255,165,0],opacity:1,label:"Cbm_Right_IX"},626:{color:[255,165,0],opacity:1,label:"Cbm_Left_X"},627:{color:[0,255,127],opacity:1,label:"Cbm_Vermis_X"},628:{color:[165,42,42],opacity:1,label:"Cbm_Right_X"},640:{color:[204,0,0],opacity:1,label:"Cbm_Right_I_V_med"},641:{color:[255,0,0],opacity:1,label:"Cbm_Right_I_V_mid"},642:{color:[0,0,255],opacity:1,label:"Cbm_Right_VI_med"},643:{color:[30,144,255],opacity:1,label:"Cbm_Right_VI_mid"},644:{color:[100,212,237],opacity:1,label:"Cbm_Right_VI_lat"},645:{color:[218,165,32],opacity:1,label:"Cbm_Right_CrusI_med"},646:{color:[255,215,0],opacity:1,label:"Cbm_Right_CrusI_mid"},647:{color:[255,255,166],opacity:1,label:"Cbm_Right_CrusI_lat"},648:{color:[153,0,204],opacity:1,label:"Cbm_Right_CrusII_med"},649:{color:[153,141,209],opacity:1,label:"Cbm_Right_CrusII_mid"},650:{color:[204,204,255],opacity:1,label:"Cbm_Right_CrusII_lat"},651:{color:[31,212,194],opacity:1,label:"Cbm_Right_7med"},652:{color:[3,255,237],opacity:1,label:"Cbm_Right_7mid"},653:{color:[204,255,255],opacity:1,label:"Cbm_Right_7lat"},654:{color:[86,74,147],opacity:1,label:"Cbm_Right_8med"},655:{color:[114,114,190],opacity:1,label:"Cbm_Right_8mid"},656:{color:[184,178,255],opacity:1,label:"Cbm_Right_8lat"},657:{color:[126,138,37],opacity:1,label:"Cbm_Right_PUNs"},658:{color:[189,197,117],opacity:1,label:"Cbm_Right_TONs"},659:{color:[240,230,140],opacity:1,label:"Cbm_Right_FLOs"},660:{color:[204,0,0],opacity:1,label:"Cbm_Left_I_V_med"},661:{color:[255,0,0],opacity:1,label:"Cbm_Left_I_V_mid"},662:{color:[0,0,255],opacity:1,label:"Cbm_Left_VI_med"},663:{color:[30,144,255],opacity:1,label:"Cbm_Left_VI_mid"},664:{color:[100,212,237],opacity:1,label:"Cbm_Left_VI_lat"},665:{color:[218,165,32],opacity:1,label:"Cbm_Left_CrusI_med"},666:{color:[255,215,0],opacity:1,label:"Cbm_Left_CrusI_mid"},667:{color:[255,255,166],opacity:1,label:"Cbm_Left_CrusI_lat"},668:{color:[153,0,204],opacity:1,label:"Cbm_Left_CrusII_med"},669:{color:[153,141,209],opacity:1,label:"Cbm_Left_CrusII_mid"},670:{color:[204,204,255],opacity:1,label:"Cbm_Left_CrusII_lat"},671:{color:[31,212,194],opacity:1,label:"Cbm_Left_7med"},672:{color:[3,255,237],opacity:1,label:"Cbm_Left_7mid"},673:{color:[204,255,255],opacity:1,label:"Cbm_Left_7lat"},674:{color:[86,74,147],opacity:1,label:"Cbm_Left_8med"},675:{color:[114,114,190],opacity:1,label:"Cbm_Left_8mid"},676:{color:[184,178,255],opacity:1,label:"Cbm_Left_8lat"},677:{color:[126,138,37],opacity:1,label:"Cbm_Left_PUNs"},678:{color:[189,197,117],opacity:1,label:"Cbm_Left_TONs"},679:{color:[240,230,140],opacity:1,label:"Cbm_Left_FLOs"},690:{color:[122,135,50],opacity:1,label:"CbmWM_Gyri_Left"},691:{color:[122,135,50],opacity:1,label:"CbmWM_Gyri_Right"},701:{color:[120,18,134],opacity:1,label:"CSF-FSL-FAST"},702:{color:[205,62,78],opacity:1,label:"GrayMatter-FSL-FAST"},703:{color:[0,225,0],opacity:1,label:"WhiteMatter-FSL-FAST"},999:{color:[255,100,100],opacity:1,label:"SUSPICIOUS"},1000:{color:[25,5,25],opacity:1,label:"ctx-lh-unknown"},1001:{color:[25,100,40],opacity:1,label:"ctx-lh-bankssts"},1002:{color:[125,100,160],opacity:1,label:"ctx-lh-caudalanteriorcingulate"},1003:{color:[100,25,0],opacity:1,label:"ctx-lh-caudalmiddlefrontal"},1004:{color:[120,70,50],opacity:1,label:"ctx-lh-corpuscallosum"},1005:{color:[220,20,100],opacity:1,label:"ctx-lh-cuneus"},1006:{color:[220,20,10],opacity:1,label:"ctx-lh-entorhinal"},1007:{color:[180,220,140],opacity:1,label:"ctx-lh-fusiform"},1008:{color:[220,60,220],opacity:1,label:"ctx-lh-inferiorparietal"},1009:{color:[180,40,120],opacity:1,label:"ctx-lh-inferiortemporal"},1010:{color:[140,20,140],opacity:1,label:"ctx-lh-isthmuscingulate"},1011:{color:[20,30,140],opacity:1,label:"ctx-lh-lateraloccipital"},1012:{color:[35,75,50],opacity:1,label:"ctx-lh-lateralorbitofrontal"},1013:{color:[225,140,140],opacity:1,label:"ctx-lh-lingual"},1014:{color:[200,35,75],opacity:1,label:"ctx-lh-medialorbitofrontal"},1015:{color:[160,100,50],opacity:1,label:"ctx-lh-middletemporal"},1016:{color:[20,220,60],opacity:1,label:"ctx-lh-parahippocampal"},1017:{color:[60,220,60],opacity:1,label:"ctx-lh-paracentral"},1018:{color:[220,180,140],opacity:1,label:"ctx-lh-parsopercularis"},1019:{color:[20,100,50],opacity:1,label:"ctx-lh-parsorbitalis"},1020:{color:[220,60,20],opacity:1,label:"ctx-lh-parstriangularis"},1021:{color:[120,100,60],opacity:1,label:"ctx-lh-pericalcarine"},1022:{color:[220,20,20],opacity:1,label:"ctx-lh-postcentral"},1023:{color:[220,180,220],opacity:1,label:"ctx-lh-posteriorcingulate"},1024:{color:[60,20,220],opacity:1,label:"ctx-lh-precentral"},1025:{color:[160,140,180],opacity:1,label:"ctx-lh-precuneus"},1026:{color:[80,20,140],opacity:1,label:"ctx-lh-rostralanteriorcingulate"},1027:{color:[75,50,125],opacity:1,label:"ctx-lh-rostralmiddlefrontal"},1028:{color:[20,220,160],opacity:1,label:"ctx-lh-superiorfrontal"},1029:{color:[20,180,140],opacity:1,label:"ctx-lh-superiorparietal"},1030:{color:[140,220,220],opacity:1,label:"ctx-lh-superiortemporal"},1031:{color:[80,160,20],opacity:1,label:"ctx-lh-supramarginal"},1032:{color:[100,0,100],opacity:1,label:"ctx-lh-frontalpole"},1033:{color:[70,70,70],opacity:1,label:"ctx-lh-temporalpole"},1034:{color:[150,150,200],opacity:1,label:"ctx-lh-transversetemporal"},1035:{color:[255,192,32],opacity:1,label:"ctx-lh-insula"},2000:{color:[25,5,25],opacity:1,label:"ctx-rh-unknown"},2001:{color:[25,100,40],opacity:1,label:"ctx-rh-bankssts"},2002:{color:[125,100,160],opacity:1,label:"ctx-rh-caudalanteriorcingulate"},2003:{color:[100,25,0],opacity:1,label:"ctx-rh-caudalmiddlefrontal"},2004:{color:[120,70,50],opacity:1,label:"ctx-rh-corpuscallosum"},2005:{color:[220,20,100],opacity:1,label:"ctx-rh-cuneus"},2006:{color:[220,20,10],opacity:1,label:"ctx-rh-entorhinal"},2007:{color:[180,220,140],opacity:1,label:"ctx-rh-fusiform"},2008:{color:[220,60,220],opacity:1,label:"ctx-rh-inferiorparietal"},2009:{color:[180,40,120],opacity:1,label:"ctx-rh-inferiortemporal"},2010:{color:[140,20,140],opacity:1,label:"ctx-rh-isthmuscingulate"},2011:{color:[20,30,140],opacity:1,label:"ctx-rh-lateraloccipital"},2012:{color:[35,75,50],opacity:1,label:"ctx-rh-lateralorbitofrontal"},2013:{color:[225,140,140],opacity:1,label:"ctx-rh-lingual"},2014:{color:[200,35,75],opacity:1,label:"ctx-rh-medialorbitofrontal"},2015:{color:[160,100,50],opacity:1,label:"ctx-rh-middletemporal"},2016:{color:[20,220,60],opacity:1,label:"ctx-rh-parahippocampal"},2017:{color:[60,220,60],opacity:1,label:"ctx-rh-paracentral"},2018:{color:[220,180,140],opacity:1,label:"ctx-rh-parsopercularis"},2019:{color:[20,100,50],opacity:1,label:"ctx-rh-parsorbitalis"},2020:{color:[220,60,20],opacity:1,label:"ctx-rh-parstriangularis"},2021:{color:[120,100,60],opacity:1,label:"ctx-rh-pericalcarine"},2022:{color:[220,20,20],opacity:1,label:"ctx-rh-postcentral"},2023:{color:[220,180,220],opacity:1,label:"ctx-rh-posteriorcingulate"},2024:{color:[60,20,220],opacity:1,label:"ctx-rh-precentral"},2025:{color:[160,140,180],opacity:1,label:"ctx-rh-precuneus"},2026:{color:[80,20,140],opacity:1,label:"ctx-rh-rostralanteriorcingulate"},2027:{color:[75,50,125],opacity:1,label:"ctx-rh-rostralmiddlefrontal"},2028:{color:[20,220,160],opacity:1,label:"ctx-rh-superiorfrontal"},2029:{color:[20,180,140],opacity:1,label:"ctx-rh-superiorparietal"},2030:{color:[140,220,220],opacity:1,label:"ctx-rh-superiortemporal"},2031:{color:[80,160,20],opacity:1,label:"ctx-rh-supramarginal"},2032:{color:[100,0,100],opacity:1,label:"ctx-rh-frontalpole"},2033:{color:[70,70,70],opacity:1,label:"ctx-rh-temporalpole"},2034:{color:[150,150,200],opacity:1,label:"ctx-rh-transversetemporal"},2035:{color:[255,192,32],opacity:1,label:"ctx-rh-insula"},3000:{color:[230,250,230],opacity:1,label:"wm-lh-unknown"},3001:{color:[230,155,215],opacity:1,label:"wm-lh-bankssts"},3002:{color:[130,155,95],opacity:1,label:"wm-lh-caudalanteriorcingulate"},3003:{color:[155,230,255],opacity:1,label:"wm-lh-caudalmiddlefrontal"},3004:{color:[135,185,205],opacity:1,label:"wm-lh-corpuscallosum"},3005:{color:[35,235,155],opacity:1,label:"wm-lh-cuneus"},3006:{color:[35,235,245],opacity:1,label:"wm-lh-entorhinal"},3007:{color:[75,35,115],opacity:1,label:"wm-lh-fusiform"},3008:{color:[35,195,35],opacity:1,label:"wm-lh-inferiorparietal"},3009:{color:[75,215,135],opacity:1,label:"wm-lh-inferiortemporal"},3010:{color:[115,235,115],opacity:1,label:"wm-lh-isthmuscingulate"},3011:{color:[235,225,115],opacity:1,label:"wm-lh-lateraloccipital"},3012:{color:[220,180,205],opacity:1,label:"wm-lh-lateralorbitofrontal"},3013:{color:[30,115,115],opacity:1,label:"wm-lh-lingual"},3014:{color:[55,220,180],opacity:1,label:"wm-lh-medialorbitofrontal"},3015:{color:[95,155,205],opacity:1,label:"wm-lh-middletemporal"},3016:{color:[235,35,195],opacity:1,label:"wm-lh-parahippocampal"},3017:{color:[195,35,195],opacity:1,label:"wm-lh-paracentral"},3018:{color:[35,75,115],opacity:1,label:"wm-lh-parsopercularis"},3019:{color:[235,155,205],opacity:1,label:"wm-lh-parsorbitalis"},3020:{color:[35,195,235],opacity:1,label:"wm-lh-parstriangularis"},3021:{color:[135,155,195],opacity:1,label:"wm-lh-pericalcarine"},3022:{color:[35,235,235],opacity:1,label:"wm-lh-postcentral"},3023:{color:[35,75,35],opacity:1,label:"wm-lh-posteriorcingulate"},3024:{color:[195,235,35],opacity:1,label:"wm-lh-precentral"},3025:{color:[95,115,75],opacity:1,label:"wm-lh-precuneus"},3026:{color:[175,235,115],opacity:1,label:"wm-lh-rostralanteriorcingulate"},3027:{color:[180,205,130],opacity:1,label:"wm-lh-rostralmiddlefrontal"},3028:{color:[235,35,95],opacity:1,label:"wm-lh-superiorfrontal"},3029:{color:[235,75,115],opacity:1,label:"wm-lh-superiorparietal"},3030:{color:[115,35,35],opacity:1,label:"wm-lh-superiortemporal"},3031:{color:[175,95,235],opacity:1,label:"wm-lh-supramarginal"},3032:{color:[155,255,155],opacity:1,label:"wm-lh-frontalpole"},3033:{color:[185,185,185],opacity:1,label:"wm-lh-temporalpole"},3034:{color:[105,105,55],opacity:1,label:"wm-lh-transversetemporal"},3035:{color:[20,220,160],opacity:1,label:"wm-lh-insula"},4000:{color:[230,250,230],opacity:1,label:"wm-rh-unknown"},4001:{color:[230,155,215],opacity:1,label:"wm-rh-bankssts"},4002:{color:[130,155,95],opacity:1,label:"wm-rh-caudalanteriorcingulate"},4003:{color:[155,230,255],opacity:1,label:"wm-rh-caudalmiddlefrontal"},4004:{color:[135,185,205],opacity:1,label:"wm-rh-corpuscallosum"},4005:{color:[35,235,155],opacity:1,label:"wm-rh-cuneus"},4006:{color:[35,235,245],opacity:1,label:"wm-rh-entorhinal"},4007:{color:[75,35,115],opacity:1,label:"wm-rh-fusiform"},4008:{color:[35,195,35],opacity:1,label:"wm-rh-inferiorparietal"},4009:{color:[75,215,135],opacity:1,label:"wm-rh-inferiortemporal"},4010:{color:[115,235,115],opacity:1,label:"wm-rh-isthmuscingulate"},4011:{color:[235,225,115],opacity:1,label:"wm-rh-lateraloccipital"},4012:{color:[220,180,205],opacity:1,label:"wm-rh-lateralorbitofrontal"},4013:{color:[30,115,115],opacity:1,label:"wm-rh-lingual"},4014:{color:[55,220,180],opacity:1,label:"wm-rh-medialorbitofrontal"},4015:{color:[95,155,205],opacity:1,label:"wm-rh-middletemporal"},4016:{color:[235,35,195],opacity:1,label:"wm-rh-parahippocampal"},4017:{color:[195,35,195],opacity:1,label:"wm-rh-paracentral"},4018:{color:[35,75,115],opacity:1,label:"wm-rh-parsopercularis"},4019:{color:[235,155,205],opacity:1,label:"wm-rh-parsorbitalis"},4020:{color:[35,195,235],opacity:1,label:"wm-rh-parstriangularis"},4021:{color:[135,155,195],opacity:1,label:"wm-rh-pericalcarine"},4022:{color:[35,235,235],opacity:1,label:"wm-rh-postcentral"},4023:{color:[35,75,35],opacity:1,label:"wm-rh-posteriorcingulate"},4024:{color:[195,235,35],opacity:1,label:"wm-rh-precentral"},4025:{color:[95,115,75],opacity:1,label:"wm-rh-precuneus"},4026:{color:[175,235,115],opacity:1,label:"wm-rh-rostralanteriorcingulate"},4027:{color:[180,205,130],opacity:1,label:"wm-rh-rostralmiddlefrontal"},4028:{color:[235,35,95],opacity:1,label:"wm-rh-superiorfrontal"},4029:{color:[235,75,115],opacity:1,label:"wm-rh-superiorparietal"},4030:{color:[115,35,35],opacity:1,label:"wm-rh-superiortemporal"},4031:{color:[175,95,235],opacity:1,label:"wm-rh-supramarginal"},4032:{color:[155,255,155],opacity:1,label:"wm-rh-frontalpole"},4033:{color:[185,185,185],opacity:1,label:"wm-rh-temporalpole"},4034:{color:[105,105,55],opacity:1,label:"wm-rh-transversetemporal"},4035:{color:[20,220,160],opacity:1,label:"wm-rh-insula"},3201:{color:[235,35,95],opacity:1,label:"wm-lh-frontal-lobe"},3203:{color:[35,75,35],opacity:1,label:"wm-lh-cingulate-lobe"},3204:{color:[135,155,195],opacity:1,label:"wm-lh-occiptal-lobe"},3205:{color:[115,35,35],opacity:1,label:"wm-lh-temporal-lobe"},3206:{color:[35,195,35],opacity:1,label:"wm-lh-parietal-lobe"},3207:{color:[20,220,160],opacity:1,label:"wm-lh-insula-lobe"},4201:{color:[235,35,95],opacity:1,label:"wm-rh-frontal-lobe"},4203:{color:[35,75,35],opacity:1,label:"wm-rh-cingulate-lobe"},4204:{color:[135,155,195],opacity:1,label:"wm-rh-occiptal-lobe"},4205:{color:[115,35,35],opacity:1,label:"wm-rh-temporal-lobe"},4206:{color:[35,195,35],opacity:1,label:"wm-rh-parietal-lobe"},4207:{color:[20,220,160],opacity:1,label:"wm-rh-insula-lobe"},1100:{color:[0,0,0],opacity:1,label:"ctx-lh-Unknown"},1101:{color:[50,50,50],opacity:1,label:"ctx-lh-Corpus_callosum"},1102:{color:[180,20,30],opacity:1,label:"ctx-lh-G_and_S_Insula_ONLY_AVERAGE"},1103:{color:[60,25,25],opacity:1,label:"ctx-lh-G_cingulate-Isthmus"},1104:{color:[25,60,60],opacity:1,label:"ctx-lh-G_cingulate-Main_part"},1200:{color:[25,60,61],opacity:1,label:"ctx-lh-G_cingulate-caudal_ACC"},1201:{color:[25,90,60],opacity:1,label:"ctx-lh-G_cingulate-rostral_ACC"},1202:{color:[25,120,60],opacity:1,label:"ctx-lh-G_cingulate-posterior"},1205:{color:[25,150,60],opacity:1,label:"ctx-lh-S_cingulate-caudal_ACC"},1206:{color:[25,180,60],opacity:1,label:"ctx-lh-S_cingulate-rostral_ACC"},1207:{color:[25,210,60],opacity:1,label:"ctx-lh-S_cingulate-posterior"},1210:{color:[25,150,90],opacity:1,label:"ctx-lh-S_pericallosal-caudal"},1211:{color:[25,180,90],opacity:1,label:"ctx-lh-S_pericallosal-rostral"},1212:{color:[25,210,90],opacity:1,label:"ctx-lh-S_pericallosal-posterior"},1105:{color:[180,20,20],opacity:1,label:"ctx-lh-G_cuneus"},1106:{color:[220,20,100],opacity:1,label:"ctx-lh-G_frontal_inf-Opercular_part"},1107:{color:[140,60,60],opacity:1,label:"ctx-lh-G_frontal_inf-Orbital_part"},1108:{color:[180,220,140],opacity:1,label:"ctx-lh-G_frontal_inf-Triangular_part"},1109:{color:[140,100,180],opacity:1,label:"ctx-lh-G_frontal_middle"},1110:{color:[180,20,140],opacity:1,label:"ctx-lh-G_frontal_superior"},1111:{color:[140,20,140],opacity:1,label:"ctx-lh-G_frontomarginal"},1112:{color:[21,10,10],opacity:1,label:"ctx-lh-G_insular_long"},1113:{color:[225,140,140],opacity:1,label:"ctx-lh-G_insular_short"},1114:{color:[23,60,180],opacity:1,label:"ctx-lh-G_and_S_occipital_inferior"},1115:{color:[180,60,180],opacity:1,label:"ctx-lh-G_occipital_middle"},1116:{color:[20,220,60],opacity:1,label:"ctx-lh-G_occipital_superior"},1117:{color:[60,20,140],opacity:1,label:"ctx-lh-G_occipit-temp_lat-Or_fusiform"},1118:{color:[220,180,140],opacity:1,label:"ctx-lh-G_occipit-temp_med-Lingual_part"},1119:{color:[65,100,20],opacity:1,label:"ctx-lh-G_occipit-temp_med-Parahippocampal_part"},1120:{color:[220,60,20],opacity:1,label:"ctx-lh-G_orbital"},1121:{color:[60,100,60],opacity:1,label:"ctx-lh-G_paracentral"},1122:{color:[20,60,220],opacity:1,label:"ctx-lh-G_parietal_inferior-Angular_part"},1123:{color:[100,100,60],opacity:1,label:"ctx-lh-G_parietal_inferior-Supramarginal_part"},1124:{color:[220,180,220],opacity:1,label:"ctx-lh-G_parietal_superior"},1125:{color:[20,180,140],opacity:1,label:"ctx-lh-G_postcentral"},1126:{color:[60,140,180],opacity:1,label:"ctx-lh-G_precentral"},1127:{color:[25,20,140],opacity:1,label:"ctx-lh-G_precuneus"},1128:{color:[20,60,100],opacity:1,label:"ctx-lh-G_rectus"},1129:{color:[60,220,20],opacity:1,label:"ctx-lh-G_subcallosal"},1130:{color:[60,20,220],opacity:1,label:"ctx-lh-G_subcentral"},1131:{color:[220,220,100],opacity:1,label:"ctx-lh-G_temporal_inferior"},1132:{color:[180,60,60],opacity:1,label:"ctx-lh-G_temporal_middle"},1133:{color:[60,60,220],opacity:1,label:"ctx-lh-G_temp_sup-G_temp_transv_and_interm_S"},1134:{color:[220,60,220],opacity:1,label:"ctx-lh-G_temp_sup-Lateral_aspect"},1135:{color:[65,220,60],opacity:1,label:"ctx-lh-G_temp_sup-Planum_polare"},1136:{color:[25,140,20],opacity:1,label:"ctx-lh-G_temp_sup-Planum_tempolare"},1137:{color:[13,0,250],opacity:1,label:"ctx-lh-G_and_S_transverse_frontopolar"},1138:{color:[61,20,220],opacity:1,label:"ctx-lh-Lat_Fissure-ant_sgt-ramus_horizontal"},1139:{color:[61,20,60],opacity:1,label:"ctx-lh-Lat_Fissure-ant_sgt-ramus_vertical"},1140:{color:[61,60,100],opacity:1,label:"ctx-lh-Lat_Fissure-post_sgt"},1141:{color:[25,25,25],opacity:1,label:"ctx-lh-Medial_wall"},1142:{color:[140,20,60],opacity:1,label:"ctx-lh-Pole_occipital"},1143:{color:[220,180,20],opacity:1,label:"ctx-lh-Pole_temporal"},1144:{color:[63,180,180],opacity:1,label:"ctx-lh-S_calcarine"},1145:{color:[221,20,10],opacity:1,label:"ctx-lh-S_central"},1146:{color:[21,220,20],opacity:1,label:"ctx-lh-S_central_insula"},1147:{color:[183,100,20],opacity:1,label:"ctx-lh-S_cingulate-Main_part_and_Intracingulate"},1148:{color:[221,20,100],opacity:1,label:"ctx-lh-S_cingulate-Marginalis_part"},1149:{color:[221,60,140],opacity:1,label:"ctx-lh-S_circular_insula_anterior"},1150:{color:[221,20,220],opacity:1,label:"ctx-lh-S_circular_insula_inferior"},1151:{color:[61,220,220],opacity:1,label:"ctx-lh-S_circular_insula_superior"},1152:{color:[100,200,200],opacity:1,label:"ctx-lh-S_collateral_transverse_ant"},1153:{color:[10,200,200],opacity:1,label:"ctx-lh-S_collateral_transverse_post"},1154:{color:[221,220,20],opacity:1,label:"ctx-lh-S_frontal_inferior"},1155:{color:[141,20,100],opacity:1,label:"ctx-lh-S_frontal_middle"},1156:{color:[61,220,100],opacity:1,label:"ctx-lh-S_frontal_superior"},1157:{color:[21,220,60],opacity:1,label:"ctx-lh-S_frontomarginal"},1158:{color:[141,60,20],opacity:1,label:"ctx-lh-S_intermedius_primus-Jensen"},1159:{color:[143,20,220],opacity:1,label:"ctx-lh-S_intraparietal-and_Parietal_transverse"},1160:{color:[61,20,180],opacity:1,label:"ctx-lh-S_occipital_anterior"},1161:{color:[101,60,220],opacity:1,label:"ctx-lh-S_occipital_middle_and_Lunatus"},1162:{color:[21,20,140],opacity:1,label:"ctx-lh-S_occipital_superior_and_transversalis"},1163:{color:[221,140,20],opacity:1,label:"ctx-lh-S_occipito-temporal_lateral"},1164:{color:[141,100,220],opacity:1,label:"ctx-lh-S_occipito-temporal_medial_and_S_Lingual"},1165:{color:[101,20,20],opacity:1,label:"ctx-lh-S_orbital-H_shapped"},1166:{color:[221,100,20],opacity:1,label:"ctx-lh-S_orbital_lateral"},1167:{color:[181,200,20],opacity:1,label:"ctx-lh-S_orbital_medial-Or_olfactory"},1168:{color:[21,180,140],opacity:1,label:"ctx-lh-S_paracentral"},1169:{color:[101,100,180],opacity:1,label:"ctx-lh-S_parieto_occipital"},1170:{color:[181,220,20],opacity:1,label:"ctx-lh-S_pericallosal"},1171:{color:[21,140,200],opacity:1,label:"ctx-lh-S_postcentral"},1172:{color:[21,20,240],opacity:1,label:"ctx-lh-S_precentral-Inferior-part"},1173:{color:[21,20,200],opacity:1,label:"ctx-lh-S_precentral-Superior-part"},1174:{color:[61,180,60],opacity:1,label:"ctx-lh-S_subcentral_ant"},1175:{color:[61,180,250],opacity:1,label:"ctx-lh-S_subcentral_post"},1176:{color:[21,20,60],opacity:1,label:"ctx-lh-S_suborbital"},1177:{color:[101,60,60],opacity:1,label:"ctx-lh-S_subparietal"},1178:{color:[21,220,220],opacity:1,label:"ctx-lh-S_supracingulate"},1179:{color:[21,180,180],opacity:1,label:"ctx-lh-S_temporal_inferior"},1180:{color:[223,220,60],opacity:1,label:"ctx-lh-S_temporal_superior"},1181:{color:[221,60,60],opacity:1,label:"ctx-lh-S_temporal_transverse"},2100:{color:[0,0,0],opacity:1,label:"ctx-rh-Unknown"},2101:{color:[50,50,50],opacity:1,label:"ctx-rh-Corpus_callosum"},2102:{color:[180,20,30],opacity:1,label:"ctx-rh-G_and_S_Insula_ONLY_AVERAGE"},2103:{color:[60,25,25],opacity:1,label:"ctx-rh-G_cingulate-Isthmus"},2104:{color:[25,60,60],opacity:1,label:"ctx-rh-G_cingulate-Main_part"},2105:{color:[180,20,20],opacity:1,label:"ctx-rh-G_cuneus"},2106:{color:[220,20,100],opacity:1,label:"ctx-rh-G_frontal_inf-Opercular_part"},2107:{color:[140,60,60],opacity:1,label:"ctx-rh-G_frontal_inf-Orbital_part"},2108:{color:[180,220,140],opacity:1,label:"ctx-rh-G_frontal_inf-Triangular_part"},2109:{color:[140,100,180],opacity:1,label:"ctx-rh-G_frontal_middle"},2110:{color:[180,20,140],opacity:1,label:"ctx-rh-G_frontal_superior"},2111:{color:[140,20,140],opacity:1,label:"ctx-rh-G_frontomarginal"},2112:{color:[21,10,10],opacity:1,label:"ctx-rh-G_insular_long"},2113:{color:[225,140,140],opacity:1,label:"ctx-rh-G_insular_short"},2114:{color:[23,60,180],opacity:1,label:"ctx-rh-G_and_S_occipital_inferior"},2115:{color:[180,60,180],opacity:1,label:"ctx-rh-G_occipital_middle"},2116:{color:[20,220,60],opacity:1,label:"ctx-rh-G_occipital_superior"},2117:{color:[60,20,140],opacity:1,label:"ctx-rh-G_occipit-temp_lat-Or_fusiform"},2118:{color:[220,180,140],opacity:1,label:"ctx-rh-G_occipit-temp_med-Lingual_part"},2119:{color:[65,100,20],opacity:1,label:"ctx-rh-G_occipit-temp_med-Parahippocampal_part"},2120:{color:[220,60,20],opacity:1,label:"ctx-rh-G_orbital"},2121:{color:[60,100,60],opacity:1,label:"ctx-rh-G_paracentral"},2122:{color:[20,60,220],opacity:1,label:"ctx-rh-G_parietal_inferior-Angular_part"},2123:{color:[100,100,60],opacity:1,label:"ctx-rh-G_parietal_inferior-Supramarginal_part"},2124:{color:[220,180,220],opacity:1,label:"ctx-rh-G_parietal_superior"},2125:{color:[20,180,140],opacity:1,label:"ctx-rh-G_postcentral"},2126:{color:[60,140,180],opacity:1,label:"ctx-rh-G_precentral"},2127:{color:[25,20,140],opacity:1,label:"ctx-rh-G_precuneus"},2128:{color:[20,60,100],opacity:1,label:"ctx-rh-G_rectus"},2129:{color:[60,220,20],opacity:1,label:"ctx-rh-G_subcallosal"},2130:{color:[60,20,220],opacity:1,label:"ctx-rh-G_subcentral"},2131:{color:[220,220,100],opacity:1,label:"ctx-rh-G_temporal_inferior"},2132:{color:[180,60,60],opacity:1,label:"ctx-rh-G_temporal_middle"},2133:{color:[60,60,220],opacity:1,label:"ctx-rh-G_temp_sup-G_temp_transv_and_interm_S"},2134:{color:[220,60,220],opacity:1,label:"ctx-rh-G_temp_sup-Lateral_aspect"},2135:{color:[65,220,60],opacity:1,label:"ctx-rh-G_temp_sup-Planum_polare"},2136:{color:[25,140,20],opacity:1,label:"ctx-rh-G_temp_sup-Planum_tempolare"},2137:{color:[13,0,250],opacity:1,label:"ctx-rh-G_and_S_transverse_frontopolar"},2138:{color:[61,20,220],opacity:1,label:"ctx-rh-Lat_Fissure-ant_sgt-ramus_horizontal"},2139:{color:[61,20,60],opacity:1,label:"ctx-rh-Lat_Fissure-ant_sgt-ramus_vertical"},2140:{color:[61,60,100],opacity:1,label:"ctx-rh-Lat_Fissure-post_sgt"},2141:{color:[25,25,25],opacity:1,label:"ctx-rh-Medial_wall"},2142:{color:[140,20,60],opacity:1,label:"ctx-rh-Pole_occipital"},2143:{color:[220,180,20],opacity:1,label:"ctx-rh-Pole_temporal"},2144:{color:[63,180,180],opacity:1,label:"ctx-rh-S_calcarine"},2145:{color:[221,20,10],opacity:1,label:"ctx-rh-S_central"},2146:{color:[21,220,20],opacity:1,label:"ctx-rh-S_central_insula"},2147:{color:[183,100,20],opacity:1,label:"ctx-rh-S_cingulate-Main_part_and_Intracingulate"},2148:{color:[221,20,100],opacity:1,label:"ctx-rh-S_cingulate-Marginalis_part"},2149:{color:[221,60,140],opacity:1,label:"ctx-rh-S_circular_insula_anterior"},2150:{color:[221,20,220],opacity:1,label:"ctx-rh-S_circular_insula_inferior"},2151:{color:[61,220,220],opacity:1,label:"ctx-rh-S_circular_insula_superior"},2152:{color:[100,200,200],opacity:1,label:"ctx-rh-S_collateral_transverse_ant"},2153:{color:[10,200,200],opacity:1,label:"ctx-rh-S_collateral_transverse_post"},2154:{color:[221,220,20],opacity:1,label:"ctx-rh-S_frontal_inferior"},2155:{color:[141,20,100],opacity:1,label:"ctx-rh-S_frontal_middle"},2156:{color:[61,220,100],opacity:1,label:"ctx-rh-S_frontal_superior"},2157:{color:[21,220,60],opacity:1,label:"ctx-rh-S_frontomarginal"},2158:{color:[141,60,20],opacity:1,label:"ctx-rh-S_intermedius_primus-Jensen"},2159:{color:[143,20,220],opacity:1,label:"ctx-rh-S_intraparietal-and_Parietal_transverse"},2160:{color:[61,20,180],opacity:1,label:"ctx-rh-S_occipital_anterior"},2161:{color:[101,60,220],opacity:1,label:"ctx-rh-S_occipital_middle_and_Lunatus"},2162:{color:[21,20,140],opacity:1,label:"ctx-rh-S_occipital_superior_and_transversalis"},2163:{color:[221,140,20],opacity:1,label:"ctx-rh-S_occipito-temporal_lateral"},2164:{color:[141,100,220],opacity:1,label:"ctx-rh-S_occipito-temporal_medial_and_S_Lingual"},2165:{color:[101,20,20],opacity:1,label:"ctx-rh-S_orbital-H_shapped"},2166:{color:[221,100,20],opacity:1,label:"ctx-rh-S_orbital_lateral"},2167:{color:[181,200,20],opacity:1,label:"ctx-rh-S_orbital_medial-Or_olfactory"},2168:{color:[21,180,140],opacity:1,label:"ctx-rh-S_paracentral"},2169:{color:[101,100,180],opacity:1,label:"ctx-rh-S_parieto_occipital"},2170:{color:[181,220,20],opacity:1,label:"ctx-rh-S_pericallosal"},2171:{color:[21,140,200],opacity:1,label:"ctx-rh-S_postcentral"},2172:{color:[21,20,240],opacity:1,label:"ctx-rh-S_precentral-Inferior-part"},2173:{color:[21,20,200],opacity:1,label:"ctx-rh-S_precentral-Superior-part"},2174:{color:[61,180,60],opacity:1,label:"ctx-rh-S_subcentral_ant"},2175:{color:[61,180,250],opacity:1,label:"ctx-rh-S_subcentral_post"},2176:{color:[21,20,60],opacity:1,label:"ctx-rh-S_suborbital"},2177:{color:[101,60,60],opacity:1,label:"ctx-rh-S_subparietal"},2178:{color:[21,220,220],opacity:1,label:"ctx-rh-S_supracingulate"},2179:{color:[21,180,180],opacity:1,label:"ctx-rh-S_temporal_inferior"},2180:{color:[223,220,60],opacity:1,label:"ctx-rh-S_temporal_superior"},2181:{color:[221,60,60],opacity:1,label:"ctx-rh-S_temporal_transverse"},2200:{color:[25,60,61],opacity:1,label:"ctx-rh-G_cingulate-caudal_ACC"},2201:{color:[25,90,60],opacity:1,label:"ctx-rh-G_cingulate-rostral_ACC"},2202:{color:[25,120,60],opacity:1,label:"ctx-rh-G_cingulate-posterior"},2205:{color:[25,150,60],opacity:1,label:"ctx-rh-S_cingulate-caudal_ACC"},2206:{color:[25,180,60],opacity:1,label:"ctx-rh-S_cingulate-rostral_ACC"},2207:{color:[25,210,60],opacity:1,label:"ctx-rh-S_cingulate-posterior"},2210:{color:[25,150,90],opacity:1,label:"ctx-rh-S_pericallosal-caudal"},2211:{color:[25,180,90],opacity:1,label:"ctx-rh-S_pericallosal-rostral"},2212:{color:[25,210,90],opacity:1,label:"ctx-rh-S_pericallosal-posterior"},3100:{color:[0,0,0],opacity:1,label:"wm-lh-Unknown"},3101:{color:[50,50,50],opacity:1,label:"wm-lh-Corpus_callosum"},3102:{color:[180,20,30],opacity:1,label:"wm-lh-G_and_S_Insula_ONLY_AVERAGE"},3103:{color:[60,25,25],opacity:1,label:"wm-lh-G_cingulate-Isthmus"},3104:{color:[25,60,60],opacity:1,label:"wm-lh-G_cingulate-Main_part"},3105:{color:[180,20,20],opacity:1,label:"wm-lh-G_cuneus"},3106:{color:[220,20,100],opacity:1,label:"wm-lh-G_frontal_inf-Opercular_part"},3107:{color:[140,60,60],opacity:1,label:"wm-lh-G_frontal_inf-Orbital_part"},3108:{color:[180,220,140],opacity:1,label:"wm-lh-G_frontal_inf-Triangular_part"},3109:{color:[140,100,180],opacity:1,label:"wm-lh-G_frontal_middle"},3110:{color:[180,20,140],opacity:1,label:"wm-lh-G_frontal_superior"},3111:{color:[140,20,140],opacity:1,label:"wm-lh-G_frontomarginal"},3112:{color:[21,10,10],opacity:1,label:"wm-lh-G_insular_long"},3113:{color:[225,140,140],opacity:1,label:"wm-lh-G_insular_short"},3114:{color:[23,60,180],opacity:1,label:"wm-lh-G_and_S_occipital_inferior"},3115:{color:[180,60,180],opacity:1,label:"wm-lh-G_occipital_middle"},3116:{color:[20,220,60],opacity:1,label:"wm-lh-G_occipital_superior"},3117:{color:[60,20,140],opacity:1,label:"wm-lh-G_occipit-temp_lat-Or_fusiform"},3118:{color:[220,180,140],opacity:1,label:"wm-lh-G_occipit-temp_med-Lingual_part"},3119:{color:[65,100,20],opacity:1,label:"wm-lh-G_occipit-temp_med-Parahippocampal_part"},3120:{color:[220,60,20],opacity:1,label:"wm-lh-G_orbital"},3121:{color:[60,100,60],opacity:1,label:"wm-lh-G_paracentral"},3122:{color:[20,60,220],opacity:1,label:"wm-lh-G_parietal_inferior-Angular_part"},3123:{color:[100,100,60],opacity:1,label:"wm-lh-G_parietal_inferior-Supramarginal_part"},3124:{color:[220,180,220],opacity:1,label:"wm-lh-G_parietal_superior"},3125:{color:[20,180,140],opacity:1,label:"wm-lh-G_postcentral"},3126:{color:[60,140,180],opacity:1,label:"wm-lh-G_precentral"},3127:{color:[25,20,140],opacity:1,label:"wm-lh-G_precuneus"},3128:{color:[20,60,100],opacity:1,label:"wm-lh-G_rectus"},3129:{color:[60,220,20],opacity:1,label:"wm-lh-G_subcallosal"},3130:{color:[60,20,220],opacity:1,label:"wm-lh-G_subcentral"},3131:{color:[220,220,100],opacity:1,label:"wm-lh-G_temporal_inferior"},3132:{color:[180,60,60],opacity:1,label:"wm-lh-G_temporal_middle"},3133:{color:[60,60,220],opacity:1,label:"wm-lh-G_temp_sup-G_temp_transv_and_interm_S"},3134:{color:[220,60,220],opacity:1,label:"wm-lh-G_temp_sup-Lateral_aspect"},3135:{color:[65,220,60],opacity:1,label:"wm-lh-G_temp_sup-Planum_polare"},3136:{color:[25,140,20],opacity:1,label:"wm-lh-G_temp_sup-Planum_tempolare"},3137:{color:[13,0,250],opacity:1,label:"wm-lh-G_and_S_transverse_frontopolar"},3138:{color:[61,20,220],opacity:1,label:"wm-lh-Lat_Fissure-ant_sgt-ramus_horizontal"},3139:{color:[61,20,60],opacity:1,label:"wm-lh-Lat_Fissure-ant_sgt-ramus_vertical"},3140:{color:[61,60,100],opacity:1,label:"wm-lh-Lat_Fissure-post_sgt"},3141:{color:[25,25,25],opacity:1,label:"wm-lh-Medial_wall"},3142:{color:[140,20,60],opacity:1,label:"wm-lh-Pole_occipital"},3143:{color:[220,180,20],opacity:1,label:"wm-lh-Pole_temporal"},3144:{color:[63,180,180],opacity:1,label:"wm-lh-S_calcarine"},3145:{color:[221,20,10],opacity:1,label:"wm-lh-S_central"},3146:{color:[21,220,20],opacity:1,label:"wm-lh-S_central_insula"},3147:{color:[183,100,20],opacity:1,label:"wm-lh-S_cingulate-Main_part_and_Intracingulate"},3148:{color:[221,20,100],opacity:1,label:"wm-lh-S_cingulate-Marginalis_part"},3149:{color:[221,60,140],opacity:1,label:"wm-lh-S_circular_insula_anterior"},3150:{color:[221,20,220],opacity:1,label:"wm-lh-S_circular_insula_inferior"},3151:{color:[61,220,220],opacity:1,label:"wm-lh-S_circular_insula_superior"},3152:{color:[100,200,200],opacity:1,label:"wm-lh-S_collateral_transverse_ant"},3153:{color:[10,200,200],opacity:1,label:"wm-lh-S_collateral_transverse_post"},3154:{color:[221,220,20],opacity:1,label:"wm-lh-S_frontal_inferior"},3155:{color:[141,20,100],opacity:1,label:"wm-lh-S_frontal_middle"},3156:{color:[61,220,100],opacity:1,label:"wm-lh-S_frontal_superior"},3157:{color:[21,220,60],opacity:1,label:"wm-lh-S_frontomarginal"},3158:{color:[141,60,20],opacity:1,label:"wm-lh-S_intermedius_primus-Jensen"},3159:{color:[143,20,220],opacity:1,label:"wm-lh-S_intraparietal-and_Parietal_transverse"},3160:{color:[61,20,180],opacity:1,label:"wm-lh-S_occipital_anterior"},3161:{color:[101,60,220],opacity:1,label:"wm-lh-S_occipital_middle_and_Lunatus"},3162:{color:[21,20,140],opacity:1,label:"wm-lh-S_occipital_superior_and_transversalis"},3163:{color:[221,140,20],opacity:1,label:"wm-lh-S_occipito-temporal_lateral"},3164:{color:[141,100,220],opacity:1,label:"wm-lh-S_occipito-temporal_medial_and_S_Lingual"},3165:{color:[101,20,20],opacity:1,label:"wm-lh-S_orbital-H_shapped"},3166:{color:[221,100,20],opacity:1,label:"wm-lh-S_orbital_lateral"},3167:{color:[181,200,20],opacity:1,label:"wm-lh-S_orbital_medial-Or_olfactory"},3168:{color:[21,180,140],opacity:1,label:"wm-lh-S_paracentral"},3169:{color:[101,100,180],opacity:1,label:"wm-lh-S_parieto_occipital"},3170:{color:[181,220,20],opacity:1,label:"wm-lh-S_pericallosal"},3171:{color:[21,140,200],opacity:1,label:"wm-lh-S_postcentral"},3172:{color:[21,20,240],opacity:1,label:"wm-lh-S_precentral-Inferior-part"},3173:{color:[21,20,200],opacity:1,label:"wm-lh-S_precentral-Superior-part"},3174:{color:[61,180,60],opacity:1,label:"wm-lh-S_subcentral_ant"},3175:{color:[61,180,250],opacity:1,label:"wm-lh-S_subcentral_post"},3176:{color:[21,20,60],opacity:1,label:"wm-lh-S_suborbital"},3177:{color:[101,60,60],opacity:1,label:"wm-lh-S_subparietal"},3178:{color:[21,220,220],opacity:1,label:"wm-lh-S_supracingulate"},3179:{color:[21,180,180],opacity:1,label:"wm-lh-S_temporal_inferior"},3180:{color:[223,220,60],opacity:1,label:"wm-lh-S_temporal_superior"},3181:{color:[221,60,60],opacity:1,label:"wm-lh-S_temporal_transverse"},4100:{color:[0,0,0],opacity:1,label:"wm-rh-Unknown"},4101:{color:[50,50,50],opacity:1,label:"wm-rh-Corpus_callosum"},4102:{color:[180,20,30],opacity:1,label:"wm-rh-G_and_S_Insula_ONLY_AVERAGE"},4103:{color:[60,25,25],opacity:1,label:"wm-rh-G_cingulate-Isthmus"},4104:{color:[25,60,60],opacity:1,label:"wm-rh-G_cingulate-Main_part"},4105:{color:[180,20,20],opacity:1,label:"wm-rh-G_cuneus"},4106:{color:[220,20,100],opacity:1,label:"wm-rh-G_frontal_inf-Opercular_part"},4107:{color:[140,60,60],opacity:1,label:"wm-rh-G_frontal_inf-Orbital_part"},4108:{color:[180,220,140],opacity:1,label:"wm-rh-G_frontal_inf-Triangular_part"},4109:{color:[140,100,180],opacity:1,label:"wm-rh-G_frontal_middle"},4110:{color:[180,20,140],opacity:1,label:"wm-rh-G_frontal_superior"},4111:{color:[140,20,140],opacity:1,label:"wm-rh-G_frontomarginal"},4112:{color:[21,10,10],opacity:1,label:"wm-rh-G_insular_long"},4113:{color:[225,140,140],opacity:1,label:"wm-rh-G_insular_short"},4114:{color:[23,60,180],opacity:1,label:"wm-rh-G_and_S_occipital_inferior"},4115:{color:[180,60,180],opacity:1,label:"wm-rh-G_occipital_middle"},4116:{color:[20,220,60],opacity:1,label:"wm-rh-G_occipital_superior"},4117:{color:[60,20,140],opacity:1,label:"wm-rh-G_occipit-temp_lat-Or_fusiform"},4118:{color:[220,180,140],opacity:1,label:"wm-rh-G_occipit-temp_med-Lingual_part"},4119:{color:[65,100,20],opacity:1,label:"wm-rh-G_occipit-temp_med-Parahippocampal_part"},4120:{color:[220,60,20],opacity:1,label:"wm-rh-G_orbital"},4121:{color:[60,100,60],opacity:1,label:"wm-rh-G_paracentral"},4122:{color:[20,60,220],opacity:1,label:"wm-rh-G_parietal_inferior-Angular_part"},4123:{color:[100,100,60],opacity:1,label:"wm-rh-G_parietal_inferior-Supramarginal_part"},4124:{color:[220,180,220],opacity:1,label:"wm-rh-G_parietal_superior"},4125:{color:[20,180,140],opacity:1,label:"wm-rh-G_postcentral"},4126:{color:[60,140,180],opacity:1,label:"wm-rh-G_precentral"},4127:{color:[25,20,140],opacity:1,label:"wm-rh-G_precuneus"},4128:{color:[20,60,100],opacity:1,label:"wm-rh-G_rectus"},4129:{color:[60,220,20],opacity:1,label:"wm-rh-G_subcallosal"},4130:{color:[60,20,220],opacity:1,label:"wm-rh-G_subcentral"},4131:{color:[220,220,100],opacity:1,label:"wm-rh-G_temporal_inferior"},4132:{color:[180,60,60],opacity:1,label:"wm-rh-G_temporal_middle"},4133:{color:[60,60,220],opacity:1,label:"wm-rh-G_temp_sup-G_temp_transv_and_interm_S"},4134:{color:[220,60,220],opacity:1,label:"wm-rh-G_temp_sup-Lateral_aspect"},4135:{color:[65,220,60],opacity:1,label:"wm-rh-G_temp_sup-Planum_polare"},4136:{color:[25,140,20],opacity:1,label:"wm-rh-G_temp_sup-Planum_tempolare"},4137:{color:[13,0,250],opacity:1,label:"wm-rh-G_and_S_transverse_frontopolar"},4138:{color:[61,20,220],opacity:1,label:"wm-rh-Lat_Fissure-ant_sgt-ramus_horizontal"},4139:{color:[61,20,60],opacity:1,label:"wm-rh-Lat_Fissure-ant_sgt-ramus_vertical"},4140:{color:[61,60,100],opacity:1,label:"wm-rh-Lat_Fissure-post_sgt"},4141:{color:[25,25,25],opacity:1,label:"wm-rh-Medial_wall"},4142:{color:[140,20,60],opacity:1,label:"wm-rh-Pole_occipital"},4143:{color:[220,180,20],opacity:1,label:"wm-rh-Pole_temporal"},4144:{color:[63,180,180],opacity:1,label:"wm-rh-S_calcarine"},4145:{color:[221,20,10],opacity:1,label:"wm-rh-S_central"},4146:{color:[21,220,20],opacity:1,label:"wm-rh-S_central_insula"},4147:{color:[183,100,20],opacity:1,label:"wm-rh-S_cingulate-Main_part_and_Intracingulate"},4148:{color:[221,20,100],opacity:1,label:"wm-rh-S_cingulate-Marginalis_part"},4149:{color:[221,60,140],opacity:1,label:"wm-rh-S_circular_insula_anterior"},4150:{color:[221,20,220],opacity:1,label:"wm-rh-S_circular_insula_inferior"},4151:{color:[61,220,220],opacity:1,label:"wm-rh-S_circular_insula_superior"},4152:{color:[100,200,200],opacity:1,label:"wm-rh-S_collateral_transverse_ant"},4153:{color:[10,200,200],opacity:1,label:"wm-rh-S_collateral_transverse_post"},4154:{color:[221,220,20],opacity:1,label:"wm-rh-S_frontal_inferior"},4155:{color:[141,20,100],opacity:1,label:"wm-rh-S_frontal_middle"},4156:{color:[61,220,100],opacity:1,label:"wm-rh-S_frontal_superior"},4157:{color:[21,220,60],opacity:1,label:"wm-rh-S_frontomarginal"},4158:{color:[141,60,20],opacity:1,label:"wm-rh-S_intermedius_primus-Jensen"},4159:{color:[143,20,220],opacity:1,label:"wm-rh-S_intraparietal-and_Parietal_transverse"},4160:{color:[61,20,180],opacity:1,label:"wm-rh-S_occipital_anterior"},4161:{color:[101,60,220],opacity:1,label:"wm-rh-S_occipital_middle_and_Lunatus"},4162:{color:[21,20,140],opacity:1,label:"wm-rh-S_occipital_superior_and_transversalis"},4163:{color:[221,140,20],opacity:1,label:"wm-rh-S_occipito-temporal_lateral"},4164:{color:[141,100,220],opacity:1,label:"wm-rh-S_occipito-temporal_medial_and_S_Lingual"},4165:{color:[101,20,20],opacity:1,label:"wm-rh-S_orbital-H_shapped"},4166:{color:[221,100,20],opacity:1,label:"wm-rh-S_orbital_lateral"},4167:{color:[181,200,20],opacity:1,label:"wm-rh-S_orbital_medial-Or_olfactory"},4168:{color:[21,180,140],opacity:1,label:"wm-rh-S_paracentral"},4169:{color:[101,100,180],opacity:1,label:"wm-rh-S_parieto_occipital"},4170:{color:[181,220,20],opacity:1,label:"wm-rh-S_pericallosal"},4171:{color:[21,140,200],opacity:1,label:"wm-rh-S_postcentral"},4172:{color:[21,20,240],opacity:1,label:"wm-rh-S_precentral-Inferior-part"},4173:{color:[21,20,200],opacity:1,label:"wm-rh-S_precentral-Superior-part"},4174:{color:[61,180,60],opacity:1,label:"wm-rh-S_subcentral_ant"},4175:{color:[61,180,250],opacity:1,label:"wm-rh-S_subcentral_post"},4176:{color:[21,20,60],opacity:1,label:"wm-rh-S_suborbital"},4177:{color:[101,60,60],opacity:1,label:"wm-rh-S_subparietal"},4178:{color:[21,220,220],opacity:1,label:"wm-rh-S_supracingulate"},4179:{color:[21,180,180],opacity:1,label:"wm-rh-S_temporal_inferior"},4180:{color:[223,220,60],opacity:1,label:"wm-rh-S_temporal_superior"},4181:{color:[221,60,60],opacity:1,label:"wm-rh-S_temporal_transverse"},5001:{color:[20,30,40],opacity:1,label:"Left-UnsegmentedWhiteMatter"},5002:{color:[20,30,40],opacity:1,label:"Right-UnsegmentedWhiteMatter"},5100:{color:[204,102,102],opacity:1,label:"fmajor"},5101:{color:[204,102,102],opacity:1,label:"fminor"},5102:{color:[255,255,102],opacity:1,label:"lh.atr"},5103:{color:[153,204,0],opacity:1,label:"lh.cab"},5104:{color:[0,153,153],opacity:1,label:"lh.ccg"},5105:{color:[204,153,255],opacity:1,label:"lh.cst"},5106:{color:[255,153,51],opacity:1,label:"lh.ilf"},5107:{color:[204,204,204],opacity:1,label:"lh.slfp"},5108:{color:[153,255,255],opacity:1,label:"lh.slft"},5109:{color:[102,153,255],opacity:1,label:"lh.unc"},5110:{color:[255,255,102],opacity:1,label:"rh.atr"},5111:{color:[153,204,0],opacity:1,label:"rh.cab"},5112:{color:[0,153,153],opacity:1,label:"rh.ccg"},5113:{color:[204,153,255],opacity:1,label:"rh.cst"},5114:{color:[255,153,51],opacity:1,label:"rh.ilf"},5115:{color:[204,204,204],opacity:1,label:"rh.slfp"},5116:{color:[153,255,255],opacity:1,label:"rh.slft"},5117:{color:[102,153,255],opacity:1,label:"rh.unc"},5200:{color:[204,102,102],opacity:1,label:"CC-ForcepsMajor"},5201:{color:[204,102,102],opacity:1,label:"CC-ForcepsMinor"},5202:{color:[255,255,102],opacity:1,label:"LAntThalRadiation"},5203:{color:[153,204,0],opacity:1,label:"LCingulumAngBundle"},5204:{color:[0,153,153],opacity:1,label:"LCingulumCingGyrus"},5205:{color:[204,153,255],opacity:1,label:"LCorticospinalTract"},5206:{color:[255,153,51],opacity:1,label:"LInfLongFas"},5207:{color:[204,204,204],opacity:1,label:"LSupLongFasParietal"},5208:{color:[153,255,255],opacity:1,label:"LSupLongFasTemporal"},5209:{color:[102,153,255],opacity:1,label:"LUncinateFas"},5210:{color:[255,255,102],opacity:1,label:"RAntThalRadiation"},5211:{color:[153,204,0],opacity:1,label:"RCingulumAngBundle"},5212:{color:[0,153,153],opacity:1,label:"RCingulumCingGyrus"},5213:{color:[204,153,255],opacity:1,label:"RCorticospinalTract"},5214:{color:[255,153,51],opacity:1,label:"RInfLongFas"},5215:{color:[204,204,204],opacity:1,label:"RSupLongFasParietal"},5216:{color:[153,255,255],opacity:1,label:"RSupLongFasTemporal"},5217:{color:[102,153,255],opacity:1,label:"RUncinateFas"},6000:{color:[0,255,0],opacity:1,label:"CST-orig"},6001:{color:[255,255,0],opacity:1,label:"CST-hammer"},6002:{color:[0,255,255],opacity:1,label:"CST-CVS"},6003:{color:[0,0,255],opacity:1,label:"CST-flirt"},6010:{color:[236,16,231],opacity:1,label:"Left-SLF1"},6020:{color:[237,18,232],opacity:1,label:"Right-SLF1"},6030:{color:[236,13,227],opacity:1,label:"Left-SLF3"},6040:{color:[236,17,228],opacity:1,label:"Right-SLF3"},6050:{color:[1,255,1],opacity:1,label:"Left-CST"},6060:{color:[2,255,1],opacity:1,label:"Right-CST"},6070:{color:[236,14,230],opacity:1,label:"Left-SLF2"},6080:{color:[237,14,230],opacity:1,label:"Right-SLF2"},7001:{color:[72,132,181],opacity:1,label:"Lateral-nucleus"},7002:{color:[243,243,243],opacity:1,label:"Basolateral-nucleus"},7003:{color:[207,63,79],opacity:1,label:"Basal-nucleus"},7004:{color:[121,20,135],opacity:1,label:"Centromedial-nucleus"},7005:{color:[197,60,248],opacity:1,label:"Central-nucleus"},7006:{color:[2,149,2],opacity:1,label:"Medial-nucleus"},7007:{color:[221,249,166],opacity:1,label:"Cortical-nucleus"},7008:{color:[232,146,35],opacity:1,label:"Accessory-Basal-nucleus"},7009:{color:[20,60,120],opacity:1,label:"Corticoamygdaloid-transitio"},7010:{color:[250,250,0],opacity:1,label:"Anterior-amygdaloid-area-AAA"},7011:{color:[122,187,222],opacity:1,label:"Fusion-amygdala-HP-FAH"},7012:{color:[237,12,177],opacity:1,label:"Hippocampal-amygdala-transition-HATA"},7013:{color:[10,49,255],opacity:1,label:"Endopiriform-nucleus"},7014:{color:[205,184,144],opacity:1,label:"Lateral-nucleus-olfactory-tract"},7015:{color:[45,205,165],opacity:1,label:"Paralaminar-nucleus"},7016:{color:[117,160,175],opacity:1,label:"Intercalated-nucleus"},7017:{color:[221,217,21],opacity:1,label:"Prepiriform-cortex"},7018:{color:[20,60,120],opacity:1,label:"Periamygdaloid-cortex"},7019:{color:[141,21,100],opacity:1,label:"Envelope-Amygdala"},7020:{color:[225,140,141],opacity:1,label:"Extranuclear-Amydala"},7100:{color:[42,201,168],opacity:1,label:"Brainstem-inferior-colliculus"},7101:{color:[168,104,162],opacity:1,label:"Brainstem-cochlear-nucleus"},8001:{color:[74,130,181],opacity:1,label:"Thalamus-Anterior"},8002:{color:[242,241,240],opacity:1,label:"Thalamus-Ventral-anterior"},8003:{color:[206,65,78],opacity:1,label:"Thalamus-Lateral-dorsal"},8004:{color:[120,21,133],opacity:1,label:"Thalamus-Lateral-posterior"},8005:{color:[195,61,246],opacity:1,label:"Thalamus-Ventral-lateral"},8006:{color:[3,147,6],opacity:1,label:"Thalamus-Ventral-posterior-medial"},8007:{color:[220,251,163],opacity:1,label:"Thalamus-Ventral-posterior-lateral"},8008:{color:[232,146,33],opacity:1,label:"Thalamus-intralaminar"},8009:{color:[4,114,14],opacity:1,label:"Thalamus-centromedian"},8010:{color:[121,184,220],opacity:1,label:"Thalamus-mediodorsal"},8011:{color:[235,11,175],opacity:1,label:"Thalamus-medial"},8012:{color:[12,46,250],opacity:1,label:"Thalamus-pulvinar"},8013:{color:[203,182,143],opacity:1,label:"Thalamus-lateral-geniculate"},8014:{color:[42,204,167],opacity:1,label:"Thalamus-medial-geniculate"},9000:{color:[50,100,30],opacity:1,label:"ctx-lh-prefrontal"},9001:{color:[30,100,45],opacity:1,label:"ctx-lh-primary-motor"},9002:{color:[130,100,165],opacity:1,label:"ctx-lh-premotor"},9003:{color:[105,25,5],opacity:1,label:"ctx-lh-temporal"},9004:{color:[125,70,55],opacity:1,label:"ctx-lh-posterior-parietal"},9005:{color:[225,20,105],opacity:1,label:"ctx-lh-prim-sec-somatosensory"},9006:{color:[225,20,15],opacity:1,label:"ctx-lh-occipital"},9500:{color:[50,200,30],opacity:1,label:"ctx-rh-prefrontal"},9501:{color:[30,150,45],opacity:1,label:"ctx-rh-primary-motor"},9502:{color:[130,150,165],opacity:1,label:"ctx-rh-premotor"},9503:{color:[105,75,5],opacity:1,label:"ctx-rh-temporal"},9504:{color:[125,120,55],opacity:1,label:"ctx-rh-posterior-parietal"},9505:{color:[225,70,105],opacity:1,label:"ctx-rh-prim-sec-somatosensory"},9506:{color:[225,70,15],opacity:1,label:"ctx-rh-occipital"},11100:{color:[0,0,0],opacity:1,label:"ctx_lh_Unknown"},11101:{color:[23,220,60],opacity:1,label:"ctx_lh_G_and_S_frontomargin"},11102:{color:[23,60,180],opacity:1,label:"ctx_lh_G_and_S_occipital_inf"},11103:{color:[63,100,60],opacity:1,label:"ctx_lh_G_and_S_paracentral"},11104:{color:[63,20,220],opacity:1,label:"ctx_lh_G_and_S_subcentral"},11105:{color:[13,0,250],opacity:1,label:"ctx_lh_G_and_S_transv_frontopol"},11106:{color:[26,60,0],opacity:1,label:"ctx_lh_G_and_S_cingul-Ant"},11107:{color:[26,60,75],opacity:1,label:"ctx_lh_G_and_S_cingul-Mid-Ant"},11108:{color:[26,60,150],opacity:1,label:"ctx_lh_G_and_S_cingul-Mid-Post"},11109:{color:[25,60,250],opacity:1,label:"ctx_lh_G_cingul-Post-dorsal"},11110:{color:[60,25,25],opacity:1,label:"ctx_lh_G_cingul-Post-ventral"},11111:{color:[180,20,20],opacity:1,label:"ctx_lh_G_cuneus"},11112:{color:[220,20,100],opacity:1,label:"ctx_lh_G_front_inf-Opercular"},11113:{color:[140,60,60],opacity:1,label:"ctx_lh_G_front_inf-Orbital"},11114:{color:[180,220,140],opacity:1,label:"ctx_lh_G_front_inf-Triangul"},11115:{color:[140,100,180],opacity:1,label:"ctx_lh_G_front_middle"},11116:{color:[180,20,140],opacity:1,label:"ctx_lh_G_front_sup"},11117:{color:[23,10,10],opacity:1,label:"ctx_lh_G_Ins_lg_and_S_cent_ins"},11118:{color:[225,140,140],opacity:1,label:"ctx_lh_G_insular_short"},11119:{color:[180,60,180],opacity:1,label:"ctx_lh_G_occipital_middle"},11120:{color:[20,220,60],opacity:1,label:"ctx_lh_G_occipital_sup"},11121:{color:[60,20,140],opacity:1,label:"ctx_lh_G_oc-temp_lat-fusifor"},11122:{color:[220,180,140],opacity:1,label:"ctx_lh_G_oc-temp_med-Lingual"},11123:{color:[65,100,20],opacity:1,label:"ctx_lh_G_oc-temp_med-Parahip"},11124:{color:[220,60,20],opacity:1,label:"ctx_lh_G_orbital"},11125:{color:[20,60,220],opacity:1,label:"ctx_lh_G_pariet_inf-Angular"},11126:{color:[100,100,60],opacity:1,label:"ctx_lh_G_pariet_inf-Supramar"},11127:{color:[220,180,220],opacity:1,label:"ctx_lh_G_parietal_sup"},11128:{color:[20,180,140],opacity:1,label:"ctx_lh_G_postcentral"},11129:{color:[60,140,180],opacity:1,label:"ctx_lh_G_precentral"},11130:{color:[25,20,140],opacity:1,label:"ctx_lh_G_precuneus"},11131:{color:[20,60,100],opacity:1,label:"ctx_lh_G_rectus"},11132:{color:[60,220,20],opacity:1,label:"ctx_lh_G_subcallosal"},11133:{color:[60,60,220],opacity:1,label:"ctx_lh_G_temp_sup-G_T_transv"},11134:{color:[220,60,220],opacity:1,label:"ctx_lh_G_temp_sup-Lateral"},11135:{color:[65,220,60],opacity:1,label:"ctx_lh_G_temp_sup-Plan_polar"},11136:{color:[25,140,20],opacity:1,label:"ctx_lh_G_temp_sup-Plan_tempo"},11137:{color:[220,220,100],opacity:1,label:"ctx_lh_G_temporal_inf"},11138:{color:[180,60,60],opacity:1,label:"ctx_lh_G_temporal_middle"},11139:{color:[61,20,220],opacity:1,label:"ctx_lh_Lat_Fis-ant-Horizont"},11140:{color:[61,20,60],opacity:1,label:"ctx_lh_Lat_Fis-ant-Vertical"},11141:{color:[61,60,100],opacity:1,label:"ctx_lh_Lat_Fis-post"},11142:{color:[25,25,25],opacity:1,label:"ctx_lh_Medial_wall"},11143:{color:[140,20,60],opacity:1,label:"ctx_lh_Pole_occipital"},11144:{color:[220,180,20],opacity:1,label:"ctx_lh_Pole_temporal"},11145:{color:[63,180,180],opacity:1,label:"ctx_lh_S_calcarine"},11146:{color:[221,20,10],opacity:1,label:"ctx_lh_S_central"},11147:{color:[221,20,100],opacity:1,label:"ctx_lh_S_cingul-Marginalis"},11148:{color:[221,60,140],opacity:1,label:"ctx_lh_S_circular_insula_ant"},11149:{color:[221,20,220],opacity:1,label:"ctx_lh_S_circular_insula_inf"},11150:{color:[61,220,220],opacity:1,label:"ctx_lh_S_circular_insula_sup"},11151:{color:[100,200,200],opacity:1,label:"ctx_lh_S_collat_transv_ant"},11152:{color:[10,200,200],opacity:1,label:"ctx_lh_S_collat_transv_post"},11153:{color:[221,220,20],opacity:1,label:"ctx_lh_S_front_inf"},11154:{color:[141,20,100],opacity:1,label:"ctx_lh_S_front_middle"},11155:{color:[61,220,100],opacity:1,label:"ctx_lh_S_front_sup"},11156:{color:[141,60,20],opacity:1,label:"ctx_lh_S_interm_prim-Jensen"},11157:{color:[143,20,220],opacity:1,label:"ctx_lh_S_intrapariet_and_P_trans"},11158:{color:[101,60,220],opacity:1,label:"ctx_lh_S_oc_middle_and_Lunatus"},11159:{color:[21,20,140],opacity:1,label:"ctx_lh_S_oc_sup_and_transversal"},11160:{color:[61,20,180],opacity:1,label:"ctx_lh_S_occipital_ant"},11161:{color:[221,140,20],opacity:1,label:"ctx_lh_S_oc-temp_lat"},11162:{color:[141,100,220],opacity:1,label:"ctx_lh_S_oc-temp_med_and_Lingual"},11163:{color:[221,100,20],opacity:1,label:"ctx_lh_S_orbital_lateral"},11164:{color:[181,200,20],opacity:1,label:"ctx_lh_S_orbital_med-olfact"},11165:{color:[101,20,20],opacity:1,label:"ctx_lh_S_orbital-H_Shaped"},11166:{color:[101,100,180],opacity:1,label:"ctx_lh_S_parieto_occipital"},11167:{color:[181,220,20],opacity:1,label:"ctx_lh_S_pericallosal"},11168:{color:[21,140,200],opacity:1,label:"ctx_lh_S_postcentral"},11169:{color:[21,20,240],opacity:1,label:"ctx_lh_S_precentral-inf-part"},11170:{color:[21,20,200],opacity:1,label:"ctx_lh_S_precentral-sup-part"},11171:{color:[21,20,60],opacity:1,label:"ctx_lh_S_suborbital"},11172:{color:[101,60,60],opacity:1,label:"ctx_lh_S_subparietal"},11173:{color:[21,180,180],opacity:1,label:"ctx_lh_S_temporal_inf"},11174:{color:[223,220,60],opacity:1,label:"ctx_lh_S_temporal_sup"},11175:{color:[221,60,60],opacity:1,label:"ctx_lh_S_temporal_transverse"},12100:{color:[0,0,0],opacity:1,label:"ctx_rh_Unknown"},12101:{color:[23,220,60],opacity:1,label:"ctx_rh_G_and_S_frontomargin"},12102:{color:[23,60,180],opacity:1,label:"ctx_rh_G_and_S_occipital_inf"},12103:{color:[63,100,60],opacity:1,label:"ctx_rh_G_and_S_paracentral"},12104:{color:[63,20,220],opacity:1,label:"ctx_rh_G_and_S_subcentral"},12105:{color:[13,0,250],opacity:1,label:"ctx_rh_G_and_S_transv_frontopol"},12106:{color:[26,60,0],opacity:1,label:"ctx_rh_G_and_S_cingul-Ant"},12107:{color:[26,60,75],opacity:1,label:"ctx_rh_G_and_S_cingul-Mid-Ant"},12108:{color:[26,60,150],opacity:1,label:"ctx_rh_G_and_S_cingul-Mid-Post"},12109:{color:[25,60,250],opacity:1,label:"ctx_rh_G_cingul-Post-dorsal"},12110:{color:[60,25,25],opacity:1,label:"ctx_rh_G_cingul-Post-ventral"},12111:{color:[180,20,20],opacity:1,label:"ctx_rh_G_cuneus"},12112:{color:[220,20,100],opacity:1,label:"ctx_rh_G_front_inf-Opercular"},12113:{color:[140,60,60],opacity:1,label:"ctx_rh_G_front_inf-Orbital"},12114:{color:[180,220,140],opacity:1,label:"ctx_rh_G_front_inf-Triangul"},12115:{color:[140,100,180],opacity:1,label:"ctx_rh_G_front_middle"},12116:{color:[180,20,140],opacity:1,label:"ctx_rh_G_front_sup"},12117:{color:[23,10,10],opacity:1,label:"ctx_rh_G_Ins_lg_and_S_cent_ins"},12118:{color:[225,140,140],opacity:1,label:"ctx_rh_G_insular_short"},12119:{color:[180,60,180],opacity:1,label:"ctx_rh_G_occipital_middle"},12120:{color:[20,220,60],opacity:1,label:"ctx_rh_G_occipital_sup"},12121:{color:[60,20,140],opacity:1,label:"ctx_rh_G_oc-temp_lat-fusifor"},12122:{color:[220,180,140],opacity:1,label:"ctx_rh_G_oc-temp_med-Lingual"},12123:{color:[65,100,20],opacity:1,label:"ctx_rh_G_oc-temp_med-Parahip"},12124:{color:[220,60,20],opacity:1,label:"ctx_rh_G_orbital"},12125:{color:[20,60,220],opacity:1,label:"ctx_rh_G_pariet_inf-Angular"},12126:{color:[100,100,60],opacity:1,label:"ctx_rh_G_pariet_inf-Supramar"},12127:{color:[220,180,220],opacity:1,label:"ctx_rh_G_parietal_sup"},12128:{color:[20,180,140],opacity:1,label:"ctx_rh_G_postcentral"},12129:{color:[60,140,180],opacity:1,label:"ctx_rh_G_precentral"},12130:{color:[25,20,140],opacity:1,label:"ctx_rh_G_precuneus"},12131:{color:[20,60,100],opacity:1,label:"ctx_rh_G_rectus"},12132:{color:[60,220,20],opacity:1,label:"ctx_rh_G_subcallosal"},12133:{color:[60,60,220],opacity:1,label:"ctx_rh_G_temp_sup-G_T_transv"},12134:{color:[220,60,220],opacity:1,label:"ctx_rh_G_temp_sup-Lateral"},12135:{color:[65,220,60],opacity:1,label:"ctx_rh_G_temp_sup-Plan_polar"},12136:{color:[25,140,20],opacity:1,label:"ctx_rh_G_temp_sup-Plan_tempo"},12137:{color:[220,220,100],opacity:1,label:"ctx_rh_G_temporal_inf"},12138:{color:[180,60,60],opacity:1,label:"ctx_rh_G_temporal_middle"},12139:{color:[61,20,220],opacity:1,label:"ctx_rh_Lat_Fis-ant-Horizont"},12140:{color:[61,20,60],opacity:1,label:"ctx_rh_Lat_Fis-ant-Vertical"},12141:{color:[61,60,100],opacity:1,label:"ctx_rh_Lat_Fis-post"},12142:{color:[25,25,25],opacity:1,label:"ctx_rh_Medial_wall"},12143:{color:[140,20,60],opacity:1,label:"ctx_rh_Pole_occipital"},12144:{color:[220,180,20],opacity:1,label:"ctx_rh_Pole_temporal"},12145:{color:[63,180,180],opacity:1,label:"ctx_rh_S_calcarine"},12146:{color:[221,20,10],opacity:1,label:"ctx_rh_S_central"},12147:{color:[221,20,100],opacity:1,label:"ctx_rh_S_cingul-Marginalis"},12148:{color:[221,60,140],opacity:1,label:"ctx_rh_S_circular_insula_ant"},12149:{color:[221,20,220],opacity:1,label:"ctx_rh_S_circular_insula_inf"},12150:{color:[61,220,220],opacity:1,label:"ctx_rh_S_circular_insula_sup"},12151:{color:[100,200,200],opacity:1,label:"ctx_rh_S_collat_transv_ant"},12152:{color:[10,200,200],opacity:1,label:"ctx_rh_S_collat_transv_post"},12153:{color:[221,220,20],opacity:1,label:"ctx_rh_S_front_inf"},12154:{color:[141,20,100],opacity:1,label:"ctx_rh_S_front_middle"},12155:{color:[61,220,100],opacity:1,label:"ctx_rh_S_front_sup"},12156:{color:[141,60,20],opacity:1,label:"ctx_rh_S_interm_prim-Jensen"},12157:{color:[143,20,220],opacity:1,label:"ctx_rh_S_intrapariet_and_P_trans"},12158:{color:[101,60,220],opacity:1,label:"ctx_rh_S_oc_middle_and_Lunatus"},12159:{color:[21,20,140],opacity:1,label:"ctx_rh_S_oc_sup_and_transversal"},12160:{color:[61,20,180],opacity:1,label:"ctx_rh_S_occipital_ant"},12161:{color:[221,140,20],opacity:1,label:"ctx_rh_S_oc-temp_lat"},12162:{color:[141,100,220],opacity:1,label:"ctx_rh_S_oc-temp_med_and_Lingual"},12163:{color:[221,100,20],opacity:1,label:"ctx_rh_S_orbital_lateral"},12164:{color:[181,200,20],opacity:1,label:"ctx_rh_S_orbital_med-olfact"},12165:{color:[101,20,20],opacity:1,label:"ctx_rh_S_orbital-H_Shaped"},12166:{color:[101,100,180],opacity:1,label:"ctx_rh_S_parieto_occipital"},12167:{color:[181,220,20],opacity:1,label:"ctx_rh_S_pericallosal"},12168:{color:[21,140,200],opacity:1,label:"ctx_rh_S_postcentral"},12169:{color:[21,20,240],opacity:1,label:"ctx_rh_S_precentral-inf-part"},12170:{color:[21,20,200],opacity:1,label:"ctx_rh_S_precentral-sup-part"},12171:{color:[21,20,60],opacity:1,label:"ctx_rh_S_suborbital"},12172:{color:[101,60,60],opacity:1,label:"ctx_rh_S_subparietal"},12173:{color:[21,180,180],opacity:1,label:"ctx_rh_S_temporal_inf"},12174:{color:[223,220,60],opacity:1,label:"ctx_rh_S_temporal_sup"},12175:{color:[221,60,60],opacity:1,label:"ctx_rh_S_temporal_transverse"},13100:{color:[0,0,0],opacity:1,label:"wm_lh_Unknown"},13101:{color:[23,220,60],opacity:1,label:"wm_lh_G_and_S_frontomargin"},13102:{color:[23,60,180],opacity:1,label:"wm_lh_G_and_S_occipital_inf"},13103:{color:[63,100,60],opacity:1,label:"wm_lh_G_and_S_paracentral"},13104:{color:[63,20,220],opacity:1,label:"wm_lh_G_and_S_subcentral"},13105:{color:[13,0,250],opacity:1,label:"wm_lh_G_and_S_transv_frontopol"},13106:{color:[26,60,0],opacity:1,label:"wm_lh_G_and_S_cingul-Ant"},13107:{color:[26,60,75],opacity:1,label:"wm_lh_G_and_S_cingul-Mid-Ant"},13108:{color:[26,60,150],opacity:1,label:"wm_lh_G_and_S_cingul-Mid-Post"},13109:{color:[25,60,250],opacity:1,label:"wm_lh_G_cingul-Post-dorsal"},13110:{color:[60,25,25],opacity:1,label:"wm_lh_G_cingul-Post-ventral"},13111:{color:[180,20,20],opacity:1,label:"wm_lh_G_cuneus"},13112:{color:[220,20,100],opacity:1,label:"wm_lh_G_front_inf-Opercular"},13113:{color:[140,60,60],opacity:1,label:"wm_lh_G_front_inf-Orbital"},13114:{color:[180,220,140],opacity:1,label:"wm_lh_G_front_inf-Triangul"},13115:{color:[140,100,180],opacity:1,label:"wm_lh_G_front_middle"},13116:{color:[180,20,140],opacity:1,label:"wm_lh_G_front_sup"},13117:{color:[23,10,10],opacity:1,label:"wm_lh_G_Ins_lg_and_S_cent_ins"},13118:{color:[225,140,140],opacity:1,label:"wm_lh_G_insular_short"},13119:{color:[180,60,180],opacity:1,label:"wm_lh_G_occipital_middle"},13120:{color:[20,220,60],opacity:1,label:"wm_lh_G_occipital_sup"},13121:{color:[60,20,140],opacity:1,label:"wm_lh_G_oc-temp_lat-fusifor"},13122:{color:[220,180,140],opacity:1,label:"wm_lh_G_oc-temp_med-Lingual"},13123:{color:[65,100,20],opacity:1,label:"wm_lh_G_oc-temp_med-Parahip"},13124:{color:[220,60,20],opacity:1,label:"wm_lh_G_orbital"},13125:{color:[20,60,220],opacity:1,label:"wm_lh_G_pariet_inf-Angular"},13126:{color:[100,100,60],opacity:1,label:"wm_lh_G_pariet_inf-Supramar"},13127:{color:[220,180,220],opacity:1,label:"wm_lh_G_parietal_sup"},13128:{color:[20,180,140],opacity:1,label:"wm_lh_G_postcentral"},13129:{color:[60,140,180],opacity:1,label:"wm_lh_G_precentral"},13130:{color:[25,20,140],opacity:1,label:"wm_lh_G_precuneus"},13131:{color:[20,60,100],opacity:1,label:"wm_lh_G_rectus"},13132:{color:[60,220,20],opacity:1,label:"wm_lh_G_subcallosal"},13133:{color:[60,60,220],opacity:1,label:"wm_lh_G_temp_sup-G_T_transv"},13134:{color:[220,60,220],opacity:1,label:"wm_lh_G_temp_sup-Lateral"},13135:{color:[65,220,60],opacity:1,label:"wm_lh_G_temp_sup-Plan_polar"},13136:{color:[25,140,20],opacity:1,label:"wm_lh_G_temp_sup-Plan_tempo"},13137:{color:[220,220,100],opacity:1,label:"wm_lh_G_temporal_inf"},13138:{color:[180,60,60],opacity:1,label:"wm_lh_G_temporal_middle"},13139:{color:[61,20,220],opacity:1,label:"wm_lh_Lat_Fis-ant-Horizont"},13140:{color:[61,20,60],opacity:1,label:"wm_lh_Lat_Fis-ant-Vertical"},13141:{color:[61,60,100],opacity:1,label:"wm_lh_Lat_Fis-post"},13142:{color:[25,25,25],opacity:1,label:"wm_lh_Medial_wall"},13143:{color:[140,20,60],opacity:1,label:"wm_lh_Pole_occipital"},13144:{color:[220,180,20],opacity:1,label:"wm_lh_Pole_temporal"},13145:{color:[63,180,180],opacity:1,label:"wm_lh_S_calcarine"},13146:{color:[221,20,10],opacity:1,label:"wm_lh_S_central"},13147:{color:[221,20,100],opacity:1,label:"wm_lh_S_cingul-Marginalis"},13148:{color:[221,60,140],opacity:1,label:"wm_lh_S_circular_insula_ant"},13149:{color:[221,20,220],opacity:1,label:"wm_lh_S_circular_insula_inf"},13150:{color:[61,220,220],opacity:1,label:"wm_lh_S_circular_insula_sup"},13151:{color:[100,200,200],opacity:1,label:"wm_lh_S_collat_transv_ant"},13152:{color:[10,200,200],opacity:1,label:"wm_lh_S_collat_transv_post"},13153:{color:[221,220,20],opacity:1,label:"wm_lh_S_front_inf"},13154:{color:[141,20,100],opacity:1,label:"wm_lh_S_front_middle"},13155:{color:[61,220,100],opacity:1,label:"wm_lh_S_front_sup"},13156:{color:[141,60,20],opacity:1,label:"wm_lh_S_interm_prim-Jensen"},13157:{color:[143,20,220],opacity:1,label:"wm_lh_S_intrapariet_and_P_trans"},13158:{color:[101,60,220],opacity:1,label:"wm_lh_S_oc_middle_and_Lunatus"},13159:{color:[21,20,140],opacity:1,label:"wm_lh_S_oc_sup_and_transversal"},13160:{color:[61,20,180],opacity:1,label:"wm_lh_S_occipital_ant"},13161:{color:[221,140,20],opacity:1,label:"wm_lh_S_oc-temp_lat"},13162:{color:[141,100,220],opacity:1,label:"wm_lh_S_oc-temp_med_and_Lingual"},13163:{color:[221,100,20],opacity:1,label:"wm_lh_S_orbital_lateral"},13164:{color:[181,200,20],opacity:1,label:"wm_lh_S_orbital_med-olfact"},13165:{color:[101,20,20],opacity:1,label:"wm_lh_S_orbital-H_Shaped"},13166:{color:[101,100,180],opacity:1,label:"wm_lh_S_parieto_occipital"},13167:{color:[181,220,20],opacity:1,label:"wm_lh_S_pericallosal"},13168:{color:[21,140,200],opacity:1,label:"wm_lh_S_postcentral"},13169:{color:[21,20,240],opacity:1,label:"wm_lh_S_precentral-inf-part"},13170:{color:[21,20,200],opacity:1,label:"wm_lh_S_precentral-sup-part"},13171:{color:[21,20,60],opacity:1,label:"wm_lh_S_suborbital"},13172:{color:[101,60,60],opacity:1,label:"wm_lh_S_subparietal"},13173:{color:[21,180,180],opacity:1,label:"wm_lh_S_temporal_inf"},13174:{color:[223,220,60],opacity:1,label:"wm_lh_S_temporal_sup"},13175:{color:[221,60,60],opacity:1,label:"wm_lh_S_temporal_transverse"},14100:{color:[0,0,0],opacity:1,label:"wm_rh_Unknown"},14101:{color:[23,220,60],opacity:1,label:"wm_rh_G_and_S_frontomargin"},14102:{color:[23,60,180],opacity:1,label:"wm_rh_G_and_S_occipital_inf"},14103:{color:[63,100,60],opacity:1,label:"wm_rh_G_and_S_paracentral"},14104:{color:[63,20,220],opacity:1,label:"wm_rh_G_and_S_subcentral"},14105:{color:[13,0,250],opacity:1,label:"wm_rh_G_and_S_transv_frontopol"},14106:{color:[26,60,0],opacity:1,label:"wm_rh_G_and_S_cingul-Ant"},14107:{color:[26,60,75],opacity:1,label:"wm_rh_G_and_S_cingul-Mid-Ant"},14108:{color:[26,60,150],opacity:1,label:"wm_rh_G_and_S_cingul-Mid-Post"},14109:{color:[25,60,250],opacity:1,label:"wm_rh_G_cingul-Post-dorsal"},14110:{color:[60,25,25],opacity:1,label:"wm_rh_G_cingul-Post-ventral"},14111:{color:[180,20,20],opacity:1,label:"wm_rh_G_cuneus"},14112:{color:[220,20,100],opacity:1,label:"wm_rh_G_front_inf-Opercular"},14113:{color:[140,60,60],opacity:1,label:"wm_rh_G_front_inf-Orbital"},14114:{color:[180,220,140],opacity:1,label:"wm_rh_G_front_inf-Triangul"},14115:{color:[140,100,180],opacity:1,label:"wm_rh_G_front_middle"},14116:{color:[180,20,140],opacity:1,label:"wm_rh_G_front_sup"},14117:{color:[23,10,10],opacity:1,label:"wm_rh_G_Ins_lg_and_S_cent_ins"},14118:{color:[225,140,140],opacity:1,label:"wm_rh_G_insular_short"},14119:{color:[180,60,180],opacity:1,label:"wm_rh_G_occipital_middle"},14120:{color:[20,220,60],opacity:1,label:"wm_rh_G_occipital_sup"},14121:{color:[60,20,140],opacity:1,label:"wm_rh_G_oc-temp_lat-fusifor"},14122:{color:[220,180,140],opacity:1,label:"wm_rh_G_oc-temp_med-Lingual"},14123:{color:[65,100,20],opacity:1,label:"wm_rh_G_oc-temp_med-Parahip"},14124:{color:[220,60,20],opacity:1,label:"wm_rh_G_orbital"},14125:{color:[20,60,220],opacity:1,label:"wm_rh_G_pariet_inf-Angular"},14126:{color:[100,100,60],opacity:1,label:"wm_rh_G_pariet_inf-Supramar"},14127:{color:[220,180,220],opacity:1,label:"wm_rh_G_parietal_sup"},14128:{color:[20,180,140],opacity:1,label:"wm_rh_G_postcentral"},14129:{color:[60,140,180],opacity:1,label:"wm_rh_G_precentral"},14130:{color:[25,20,140],opacity:1,label:"wm_rh_G_precuneus"},14131:{color:[20,60,100],opacity:1,label:"wm_rh_G_rectus"},14132:{color:[60,220,20],opacity:1,label:"wm_rh_G_subcallosal"},14133:{color:[60,60,220],opacity:1,label:"wm_rh_G_temp_sup-G_T_transv"},14134:{color:[220,60,220],opacity:1,label:"wm_rh_G_temp_sup-Lateral"},14135:{color:[65,220,60],opacity:1,label:"wm_rh_G_temp_sup-Plan_polar"},14136:{color:[25,140,20],opacity:1,label:"wm_rh_G_temp_sup-Plan_tempo"},14137:{color:[220,220,100],opacity:1,label:"wm_rh_G_temporal_inf"},14138:{color:[180,60,60],opacity:1,label:"wm_rh_G_temporal_middle"},14139:{color:[61,20,220],opacity:1,label:"wm_rh_Lat_Fis-ant-Horizont"},14140:{color:[61,20,60],opacity:1,label:"wm_rh_Lat_Fis-ant-Vertical"},14141:{color:[61,60,100],opacity:1,label:"wm_rh_Lat_Fis-post"},14142:{color:[25,25,25],opacity:1,label:"wm_rh_Medial_wall"},14143:{color:[140,20,60],opacity:1,label:"wm_rh_Pole_occipital"},14144:{color:[220,180,20],opacity:1,label:"wm_rh_Pole_temporal"},14145:{color:[63,180,180],opacity:1,label:"wm_rh_S_calcarine"},14146:{color:[221,20,10],opacity:1,label:"wm_rh_S_central"},14147:{color:[221,20,100],opacity:1,label:"wm_rh_S_cingul-Marginalis"},14148:{color:[221,60,140],opacity:1,label:"wm_rh_S_circular_insula_ant"},14149:{color:[221,20,220],opacity:1,label:"wm_rh_S_circular_insula_inf"},14150:{color:[61,220,220],opacity:1,label:"wm_rh_S_circular_insula_sup"},14151:{color:[100,200,200],opacity:1,label:"wm_rh_S_collat_transv_ant"},14152:{color:[10,200,200],opacity:1,label:"wm_rh_S_collat_transv_post"},14153:{color:[221,220,20],opacity:1,label:"wm_rh_S_front_inf"},14154:{color:[141,20,100],opacity:1,label:"wm_rh_S_front_middle"},14155:{color:[61,220,100],opacity:1,label:"wm_rh_S_front_sup"},14156:{color:[141,60,20],opacity:1,label:"wm_rh_S_interm_prim-Jensen"},14157:{color:[143,20,220],opacity:1,label:"wm_rh_S_intrapariet_and_P_trans"},14158:{color:[101,60,220],opacity:1,label:"wm_rh_S_oc_middle_and_Lunatus"},14159:{color:[21,20,140],opacity:1,label:"wm_rh_S_oc_sup_and_transversal"},14160:{color:[61,20,180],opacity:1,label:"wm_rh_S_occipital_ant"},14161:{color:[221,140,20],opacity:1,label:"wm_rh_S_oc-temp_lat"},14162:{color:[141,100,220],opacity:1,label:"wm_rh_S_oc-temp_med_and_Lingual"},14163:{color:[221,100,20],opacity:1,label:"wm_rh_S_orbital_lateral"},14164:{color:[181,200,20],opacity:1,label:"wm_rh_S_orbital_med-olfact"},14165:{color:[101,20,20],opacity:1,label:"wm_rh_S_orbital-H_Shaped"},14166:{color:[101,100,180],opacity:1,label:"wm_rh_S_parieto_occipital"},14167:{color:[181,220,20],opacity:1,label:"wm_rh_S_pericallosal"},14168:{color:[21,140,200],opacity:1,label:"wm_rh_S_postcentral"},14169:{color:[21,20,240],opacity:1,label:"wm_rh_S_precentral-inf-part"},14170:{color:[21,20,200],opacity:1,label:"wm_rh_S_precentral-sup-part"},14171:{color:[21,20,60],opacity:1,label:"wm_rh_S_suborbital"},14172:{color:[101,60,60],opacity:1,label:"wm_rh_S_subparietal"},14173:{color:[21,180,180],opacity:1,label:"wm_rh_S_temporal_inf"},14174:{color:[223,220,60],opacity:1,label:"wm_rh_S_temporal_sup"},14175:{color:[221,60,60],opacity:1,label:"wm_rh_S_temporal_transverse"}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});class n{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*i-a*n+t.x,this.y=r*n+a*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}},function(t,e,i){t.exports=i(119)},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(120)),n(i(121)),n(i(122)),n(i(123)),n(i(124)),n(i(125)),n(i(161)),n(i(162)),n(i(163)),n(i(164)),n(i(165));var r=i(166).version,a=i(167).version;window.console.log("ami "+r+" (three "+a+")")},function(t,e,i){"use strict";i.r(e);var n=i(46);i.d(e,"OrthographicCamera",function(){return n.b}),i.d(e,"orthographicCameraFactory",function(){return n.a})},function(t,e,i){"use strict";i.r(e);var n=i(47);i.d(e,"TrackballControl",function(){return n.a}),i.d(e,"trackballControlFactory",function(){return n.b});var r=i(48);i.d(e,"TrackballOrthoControl",function(){return r.a}),i.d(e,"trackballOrthoControlFactory",function(){return r.b});var a=i(49);i.d(e,"OrbitControl",function(){return a.a}),i.d(e,"orbitControlFactory",function(){return a.b})},function(t,e,i){"use strict";i.r(e);var n=i(15),r=i.n(n);i.d(e,"ColorsCore",function(){return r.a});var a=i(8);i.d(e,"IntersectionsCore",function(){return a.a});var s=i(5);i.d(e,"ValidatorsCore",function(){return s.a});var o=i(1);i.d(e,"UtilsCore",function(){return o.default})},function(t,e,i){"use strict";i.r(e);var n=i(16);i.d(e,"SliceGeometry",function(){return n.a}),i.d(e,"sliceGeometryFactory",function(){return n.b});var r=i(50);i.d(e,"VoxelGeometry",function(){return r.a}),i.d(e,"voxelGeometryFactory",function(){return r.b})},function(t,e,i){"use strict";i.r(e);var n=i(17);i.d(e,"BorderHelper",function(){return n.a}),i.d(e,"borderHelperFactory",function(){return n.b});var r=i(18);i.d(e,"BoundingBoxHelper",function(){return r.a}),i.d(e,"boundingBoxHelperFactory",function(){return r.b});var a=i(51);i.d(e,"ContourHelper",function(){return a.a}),i.d(e,"contourHelperFactory",function(){return a.b});var s=i(52);i.d(e,"LocalizerHelper",function(){return s.a}),i.d(e,"localizerHelperFactory",function(){return s.b});var o=i(53);i.d(e,"LutHelper",function(){return o.a}),i.d(e,"lutHelperFactory",function(){return o.b});var l=i(79);i.d(e,"SegmentationLutHelper",function(){return l.a});var c=i(29);i.d(e,"ProgressBarHelper",function(){return c.a});var h=i(80);i.d(e,"ProgressBarEventBasedHelper",function(){return h.a});var u=i(19);i.d(e,"SliceHelper",function(){return u.a}),i.d(e,"sliceHelperFactory",function(){return u.b});var d=i(54);i.d(e,"StackHelper",function(){return d.a}),i.d(e,"stackHelperFactory",function(){return d.b});var f=i(55);i.d(e,"VolumeRenderingHelper",function(){return f.a}),i.d(e,"VolumeRenderingHelperFactory",function(){return f.b})},function(t,e,i){"use strict";i.r(e);var n=i(81);i.d(e,"VolumeLoader",function(){return n.a})},function(t,e,i){"use strict";var n=i(127),r=i(11),a=i(84),s=i(57),o=i(85),l=Object.prototype.toString,c=0,h=-1,u=0,d=8;function f(t){if(!(this instanceof f))return new f(t);this.options=r.assign({level:h,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:u,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(i!==c)throw new Error(s[i]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?a.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(i=n.deflateSetDictionary(this.strm,p))!==c)throw new Error(s[i]);this._dict_set=!0}}function p(t,e){var i=new f(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}f.prototype.push=function(t,e){var i,s,o=this.strm,h=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=a.string2buf(t):"[object ArrayBuffer]"===l.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new r.Buf8(h),o.next_out=0,o.avail_out=h),1!==(i=n.deflate(o,s))&&i!==c)return this.onEnd(i),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(a.buf2binstring(r.shrinkBuf(o.output,o.next_out))):this.onData(r.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==i);return 4===s?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===c):2!==s||(this.onEnd(c),o.avail_out=0,!0)},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=f,e.deflate=p,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,p(t,e)}},function(t,e,i){"use strict";var n,r=i(11),a=i(128),s=i(82),o=i(83),l=i(57),c=0,h=1,u=3,d=4,f=5,p=0,m=1,g=-2,_=-3,y=-5,b=-1,v=1,w=2,x=3,A=4,M=0,S=2,E=8,T=9,I=15,C=8,k=286,P=30,B=19,L=2*k+1,R=15,D=3,O=258,G=O+D+1,F=32,N=42,z=69,H=73,U=91,V=103,W=113,j=666,Z=1,Y=2,X=3,J=4,q=3;function Q(t,e){return t.msg=l[e],e}function K(t){return(t<<1)-(t>4?9:0)}function $(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(r.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function et(t,e){a._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function it(t,e){t.pending_buf[t.pending++]=e}function nt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function rt(t,e,i,n){var a=t.avail_in;return a>n&&(a=n),0===a?0:(t.avail_in-=a,r.arraySet(e,t.input,t.next_in,a,i),1===t.state.wrap?t.adler=s(t.adler,e,a,i):2===t.state.wrap&&(t.adler=o(t.adler,e,a,i)),t.next_in+=a,t.total_in+=a,a)}function at(t,e){var i,n,r=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-G?t.strstart-(t.w_size-G):0,c=t.window,h=t.w_mask,u=t.prev,d=t.strstart+O,f=c[a+s-1],p=c[a+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(c[(i=e)+s]===p&&c[i+s-1]===f&&c[i]===c[a]&&c[++i]===c[a+1]){a+=2,i++;do{}while(c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&a<d);if(n=O-(d-a),a=d-O,n>s){if(t.match_start=e,s=n,n>=o)break;f=c[a+s-1],p=c[a+s]}}}while((e=u[e&h])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function st(t){var e,i,n,a,s,o=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=o+(o-G)){r.arraySet(t.window,t.window,o,o,0),t.match_start-=o,t.strstart-=o,t.block_start-=o,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=o?n-o:0}while(--i);e=i=o;do{n=t.prev[--e],t.prev[e]=n>=o?n-o:0}while(--i);a+=o}if(0===t.strm.avail_in)break;if(i=rt(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=i,t.lookahead+t.insert>=D)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+D-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<D)););}while(t.lookahead<G&&0!==t.strm.avail_in)}function ot(t,e){for(var i,n;;){if(t.lookahead<G){if(st(t),t.lookahead<G&&e===c)return Z;if(0===t.lookahead)break}if(i=0,t.lookahead>=D&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-G&&(t.match_length=at(t,i)),t.match_length>=D)if(n=a._tr_tally(t,t.strstart-t.match_start,t.match_length-D),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=D){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(et(t,!1),0===t.strm.avail_out))return Z}return t.insert=t.strstart<D-1?t.strstart:D-1,e===d?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?Z:Y}function lt(t,e){for(var i,n,r;;){if(t.lookahead<G){if(st(t),t.lookahead<G&&e===c)return Z;if(0===t.lookahead)break}if(i=0,t.lookahead>=D&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=D-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-G&&(t.match_length=at(t,i),t.match_length<=5&&(t.strategy===v||t.match_length===D&&t.strstart-t.match_start>4096)&&(t.match_length=D-1)),t.prev_length>=D&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-D,n=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-D),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+D-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=D-1,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return Z}else if(t.match_available){if((n=a._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return Z}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<D-1?t.strstart:D-1,e===d?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?Z:Y}function ct(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function ht(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=S,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?N:W,t.adler=2===e.wrap?0:1,e.last_flush=c,a._tr_init(e),p):Q(t,g)}function ut(t){var e=ht(t);return e===p&&function(t){t.window_size=2*t.w_size,$(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=D-1,t.match_available=0,t.ins_h=0}(t.state),e}function dt(t,e,i,n,a,s){if(!t)return g;var o=1;if(e===b&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),a<1||a>T||i!==E||n<8||n>15||e<0||e>9||s<0||s>A)return Q(t,g);8===n&&(n=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*L),this.dyn_dtree=new r.Buf16(2*(2*P+1)),this.bl_tree=new r.Buf16(2*(2*B+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(R+1),this.heap=new r.Buf16(2*k+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*k+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+D-1)/D),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=i,ut(t)}n=[new ct(0,0,0,0,function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(st(t),0===t.lookahead&&e===c)return Z;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,et(t,!1),0===t.strm.avail_out))return Z;if(t.strstart-t.block_start>=t.w_size-G&&(et(t,!1),0===t.strm.avail_out))return Z}return t.insert=0,e===d?(et(t,!0),0===t.strm.avail_out?X:J):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),Z)}),new ct(4,4,8,4,ot),new ct(4,5,16,8,ot),new ct(4,6,32,32,ot),new ct(4,4,16,16,lt),new ct(8,16,32,32,lt),new ct(8,16,128,128,lt),new ct(8,32,128,256,lt),new ct(32,128,258,1024,lt),new ct(32,258,258,4096,lt)],e.deflateInit=function(t,e){return dt(t,e,E,I,C,M)},e.deflateInit2=dt,e.deflateReset=ut,e.deflateResetKeep=ht,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,p):g},e.deflate=function(t,e){var i,r,s,l;if(!t||!t.state||e>f||e<0)return t?Q(t,g):g;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===j&&e!==d)return Q(t,0===t.avail_out?y:g);if(r.strm=t,i=r.last_flush,r.last_flush=e,r.status===N)if(2===r.wrap)t.adler=0,it(r,31),it(r,139),it(r,8),r.gzhead?(it(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),it(r,255&r.gzhead.time),it(r,r.gzhead.time>>8&255),it(r,r.gzhead.time>>16&255),it(r,r.gzhead.time>>24&255),it(r,9===r.level?2:r.strategy>=w||r.level<2?4:0),it(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(it(r,255&r.gzhead.extra.length),it(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=o(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=z):(it(r,0),it(r,0),it(r,0),it(r,0),it(r,0),it(r,9===r.level?2:r.strategy>=w||r.level<2?4:0),it(r,q),r.status=W);else{var _=E+(r.w_bits-8<<4)<<8;_|=(r.strategy>=w||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(_|=F),_+=31-_%31,r.status=W,nt(r,_),0!==r.strstart&&(nt(r,t.adler>>>16),nt(r,65535&t.adler)),t.adler=1}if(r.status===z)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),tt(t),s=r.pending,r.pending!==r.pending_buf_size));)it(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=H)}else r.status=H;if(r.status===H)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),tt(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,it(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.gzindex=0,r.status=U)}else r.status=U;if(r.status===U)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),tt(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,it(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.status=V)}else r.status=V;if(r.status===V&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&tt(t),r.pending+2<=r.pending_buf_size&&(it(r,255&t.adler),it(r,t.adler>>8&255),t.adler=0,r.status=W)):r.status=W),0!==r.pending){if(tt(t),0===t.avail_out)return r.last_flush=-1,p}else if(0===t.avail_in&&K(e)<=K(i)&&e!==d)return Q(t,y);if(r.status===j&&0!==t.avail_in)return Q(t,y);if(0!==t.avail_in||0!==r.lookahead||e!==c&&r.status!==j){var b=r.strategy===w?function(t,e){for(var i;;){if(0===t.lookahead&&(st(t),0===t.lookahead)){if(e===c)return Z;break}if(t.match_length=0,i=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(et(t,!1),0===t.strm.avail_out))return Z}return t.insert=0,e===d?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?Z:Y}(r,e):r.strategy===x?function(t,e){for(var i,n,r,s,o=t.window;;){if(t.lookahead<=O){if(st(t),t.lookahead<=O&&e===c)return Z;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=D&&t.strstart>0&&(n=o[r=t.strstart-1])===o[++r]&&n===o[++r]&&n===o[++r]){s=t.strstart+O;do{}while(n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&r<s);t.match_length=O-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=D?(i=a._tr_tally(t,1,t.match_length-D),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(et(t,!1),0===t.strm.avail_out))return Z}return t.insert=0,e===d?(et(t,!0),0===t.strm.avail_out?X:J):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?Z:Y}(r,e):n[r.level].func(r,e);if(b!==X&&b!==J||(r.status=j),b===Z||b===X)return 0===t.avail_out&&(r.last_flush=-1),p;if(b===Y&&(e===h?a._tr_align(r):e!==f&&(a._tr_stored_block(r,0,0,!1),e===u&&($(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),tt(t),0===t.avail_out))return r.last_flush=-1,p}return e!==d?p:r.wrap<=0?m:(2===r.wrap?(it(r,255&t.adler),it(r,t.adler>>8&255),it(r,t.adler>>16&255),it(r,t.adler>>24&255),it(r,255&t.total_in),it(r,t.total_in>>8&255),it(r,t.total_in>>16&255),it(r,t.total_in>>24&255)):(nt(r,t.adler>>>16),nt(r,65535&t.adler)),tt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?p:m)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==N&&e!==z&&e!==H&&e!==U&&e!==V&&e!==W&&e!==j?Q(t,g):(t.state=null,e===W?Q(t,_):p):g},e.deflateSetDictionary=function(t,e){var i,n,a,o,l,c,h,u,d=e.length;if(!t||!t.state)return g;if(2===(o=(i=t.state).wrap)||1===o&&i.status!==N||i.lookahead)return g;for(1===o&&(t.adler=s(t.adler,e,d,0)),i.wrap=0,d>=i.w_size&&(0===o&&($(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new r.Buf8(i.w_size),r.arraySet(u,e,d-i.w_size,i.w_size,0),e=u,d=i.w_size),l=t.avail_in,c=t.next_in,h=t.input,t.avail_in=d,t.next_in=0,t.input=e,st(i);i.lookahead>=D;){n=i.strstart,a=i.lookahead-(D-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+D-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--a);i.strstart=n,i.lookahead=D-1,st(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=D-1,i.match_available=0,t.next_in=c,t.input=h,t.avail_in=l,i.wrap=o,p},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,i){"use strict";var n=i(11),r=4,a=0,s=1,o=2;function l(t){for(var e=t.length;--e>=0;)t[e]=0}var c=0,h=1,u=2,d=29,f=256,p=f+1+d,m=30,g=19,_=2*p+1,y=15,b=16,v=7,w=256,x=16,A=17,M=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(p+2));l(C);var k=new Array(2*m);l(k);var P=new Array(512);l(P);var B=new Array(256);l(B);var L=new Array(d);l(L);var R,D,O,G=new Array(m);function F(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function N(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function z(t){return t<256?P[t]:P[256+(t>>>7)]}function H(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function U(t,e,i){t.bi_valid>b-i?(t.bi_buf|=e<<t.bi_valid&65535,H(t,t.bi_buf),t.bi_buf=e>>b-t.bi_valid,t.bi_valid+=i-b):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function V(t,e,i){U(t,i[2*e],i[2*e+1])}function W(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function j(t,e,i){var n,r,a=new Array(y+1),s=0;for(n=1;n<=y;n++)a[n]=s=s+i[n-1]<<1;for(r=0;r<=e;r++){var o=t[2*r+1];0!==o&&(t[2*r]=W(a[o]++,o))}}function Z(t){var e;for(e=0;e<p;e++)t.dyn_ltree[2*e]=0;for(e=0;e<m;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Y(t){t.bi_valid>8?H(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function X(t,e,i,n){var r=2*e,a=2*i;return t[r]<t[a]||t[r]===t[a]&&n[e]<=n[i]}function J(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&X(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!X(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function q(t,e,i){var n,r,a,s,o=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],r=t.pending_buf[t.l_buf+o],o++,0===n?V(t,r,e):(V(t,(a=B[r])+f+1,e),0!==(s=S[a])&&U(t,r-=L[a],s),V(t,a=z(--n),i),0!==(s=E[a])&&U(t,n-=G[a],s))}while(o<t.last_lit);V(t,w,e)}function Q(t,e){var i,n,r,a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=_,i=0;i<l;i++)0!==a[2*i]?(t.heap[++t.heap_len]=c=i,t.depth[i]=0):a[2*i+1]=0;for(;t.heap_len<2;)a[2*(r=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[r]=0,t.opt_len--,o&&(t.static_len-=s[2*r+1]);for(e.max_code=c,i=t.heap_len>>1;i>=1;i--)J(t,a,i);r=l;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],J(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,a[2*r]=a[2*i]+a[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,a[2*i+1]=a[2*n+1]=r,t.heap[1]=r++,J(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,a,s,o,l=e.dyn_tree,c=e.max_code,h=e.stat_desc.static_tree,u=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(a=0;a<=y;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<_;i++)(a=l[2*l[2*(n=t.heap[i])+1]+1]+1)>p&&(a=p,m++),l[2*n+1]=a,n>c||(t.bl_count[a]++,s=0,n>=f&&(s=d[n-f]),o=l[2*n],t.opt_len+=o*(a+s),u&&(t.static_len+=o*(h[2*n+1]+s)));if(0!==m){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--)for(n=t.bl_count[a];0!==n;)(r=t.heap[--i])>c||(l[2*r+1]!==a&&(t.opt_len+=(a-l[2*r+1])*l[2*r],l[2*r+1]=a),n--)}}(t,e),j(a,c,t.bl_count)}function K(t,e,i){var n,r,a=-1,s=e[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=e[2*(n+1)+1],++o<l&&r===s||(o<c?t.bl_tree[2*r]+=o:0!==r?(r!==a&&t.bl_tree[2*r]++,t.bl_tree[2*x]++):o<=10?t.bl_tree[2*A]++:t.bl_tree[2*M]++,o=0,a=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4))}function $(t,e,i){var n,r,a=-1,s=e[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=i;n++)if(r=s,s=e[2*(n+1)+1],!(++o<l&&r===s)){if(o<c)do{V(t,r,t.bl_tree)}while(0!=--o);else 0!==r?(r!==a&&(V(t,r,t.bl_tree),o--),V(t,x,t.bl_tree),U(t,o-3,2)):o<=10?(V(t,A,t.bl_tree),U(t,o-3,3)):(V(t,M,t.bl_tree),U(t,o-11,7));o=0,a=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4)}}l(G);var tt=!1;function et(t,e,i,r){U(t,(c<<1)+(r?1:0),3),function(t,e,i,r){Y(t),r&&(H(t,i),H(t,~i)),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i,!0)}e._tr_init=function(t){tt||(function(){var t,e,i,n,r,a=new Array(y+1);for(i=0,n=0;n<d-1;n++)for(L[n]=i,t=0;t<1<<S[n];t++)B[i++]=n;for(B[i-1]=n,r=0,n=0;n<16;n++)for(G[n]=r,t=0;t<1<<E[n];t++)P[r++]=n;for(r>>=7;n<m;n++)for(G[n]=r<<7,t=0;t<1<<E[n]-7;t++)P[256+r++]=n;for(e=0;e<=y;e++)a[e]=0;for(t=0;t<=143;)C[2*t+1]=8,t++,a[8]++;for(;t<=255;)C[2*t+1]=9,t++,a[9]++;for(;t<=279;)C[2*t+1]=7,t++,a[7]++;for(;t<=287;)C[2*t+1]=8,t++,a[8]++;for(j(C,p+1,a),t=0;t<m;t++)k[2*t+1]=5,k[2*t]=W(t,5);R=new F(C,S,f+1,p,y),D=new F(k,E,0,m,y),O=new F(new Array(0),T,0,g,v)}(),tt=!0),t.l_desc=new N(t.dyn_ltree,R),t.d_desc=new N(t.dyn_dtree,D),t.bl_desc=new N(t.bl_tree,O),t.bi_buf=0,t.bi_valid=0,Z(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,i,n){var l,c,d=0;t.level>0?(t.strm.data_type===o&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return a;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return s;for(e=32;e<f;e++)if(0!==t.dyn_ltree[2*e])return s;return a}(t)),Q(t,t.l_desc),Q(t,t.d_desc),d=function(t){var e;for(K(t,t.dyn_ltree,t.l_desc.max_code),K(t,t.dyn_dtree,t.d_desc.max_code),Q(t,t.bl_desc),e=g-1;e>=3&&0===t.bl_tree[2*I[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),l=t.opt_len+3+7>>>3,(c=t.static_len+3+7>>>3)<=l&&(l=c)):l=c=i+5,i+4<=l&&-1!==e?et(t,e,i,n):t.strategy===r||c===l?(U(t,(h<<1)+(n?1:0),3),q(t,C,k)):(U(t,(u<<1)+(n?1:0),3),function(t,e,i,n){var r;for(U(t,e-257,5),U(t,i-1,5),U(t,n-4,4),r=0;r<n;r++)U(t,t.bl_tree[2*I[r]+1],3);$(t,t.dyn_ltree,e-1),$(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,d+1),q(t,t.dyn_ltree,t.dyn_dtree)),Z(t),n&&Y(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(B[i]+f+1)]++,t.dyn_dtree[2*z(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){U(t,h<<1,3),V(t,w,C),function(t){16===t.bi_valid?(H(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,i){"use strict";var n=i(130),r=i(11),a=i(84),s=i(86),o=i(57),l=i(85),c=i(133),h=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,e.windowBits);if(i!==s.Z_OK)throw new Error(o[i]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function d(t,e){var i=new u(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}u.prototype.push=function(t,e){var i,o,l,c,u,d,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?f.input=a.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new r.Buf8(p),f.next_out=0,f.avail_out=p),(i=n.inflate(f,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&m&&(d="string"==typeof m?a.string2buf(m):"[object ArrayBuffer]"===h.call(m)?new Uint8Array(m):m,i=n.inflateSetDictionary(this.strm,d)),i===s.Z_BUF_ERROR&&!0===g&&(i=s.Z_OK,g=!1),i!==s.Z_STREAM_END&&i!==s.Z_OK)return this.onEnd(i),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&i!==s.Z_STREAM_END&&(0!==f.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=a.utf8border(f.output,f.next_out),c=f.next_out-l,u=a.buf2string(f.output,l),f.next_out=c,f.avail_out=p-c,c&&r.arraySet(f.output,f.output,l,c,0),this.onData(u)):this.onData(r.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((f.avail_in>0||0===f.avail_out)&&i!==s.Z_STREAM_END);return i===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),f.avail_out=0,!0)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=u,e.inflate=d,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},e.ungzip=d},function(t,e,i){"use strict";var n=i(11),r=i(82),a=i(83),s=i(131),o=i(132),l=0,c=1,h=2,u=4,d=5,f=6,p=0,m=1,g=2,_=-2,y=-3,b=-4,v=-5,w=8,x=1,A=2,M=3,S=4,E=5,T=6,I=7,C=8,k=9,P=10,B=11,L=12,R=13,D=14,O=15,G=16,F=17,N=18,z=19,H=20,U=21,V=22,W=23,j=24,Z=25,Y=26,X=27,J=28,q=29,Q=30,K=31,$=32,tt=852,et=592,it=15;function nt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function rt(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=x,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(tt),e.distcode=e.distdyn=new n.Buf32(et),e.sane=1,e.back=-1,p):_}function at(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,rt(t)):_}function st(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,at(t))):_}function ot(t,e){var i,r;return t?(r=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=r,r.window=null,(i=st(t,e))!==p&&(t.state=null),i):_}var lt,ct,ht=!0;function ut(t){if(ht){var e;for(lt=new n.Buf32(512),ct=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(c,t.lens,0,288,lt,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(h,t.lens,0,32,ct,0,t.work,{bits:5}),ht=!1}t.lencode=lt,t.lenbits=9,t.distcode=ct,t.distbits=5}function dt(t,e,i,r){var a,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),r>=s.wsize?(n.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((a=s.wsize-s.wnext)>r&&(a=r),n.arraySet(s.window,e,i-r,a,s.wnext),(r-=a)?(n.arraySet(s.window,e,i-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}e.inflateReset=at,e.inflateReset2=st,e.inflateResetKeep=rt,e.inflateInit=function(t){return ot(t,it)},e.inflateInit2=ot,e.inflate=function(t,e){var i,tt,et,it,rt,at,st,ot,lt,ct,ht,ft,pt,mt,gt,_t,yt,bt,vt,wt,xt,At,Mt,St,Et=0,Tt=new n.Buf8(4),It=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return _;(i=t.state).mode===L&&(i.mode=R),rt=t.next_out,et=t.output,st=t.avail_out,it=t.next_in,tt=t.input,at=t.avail_in,ot=i.hold,lt=i.bits,ct=at,ht=st,At=p;t:for(;;)switch(i.mode){case x:if(0===i.wrap){i.mode=R;break}for(;lt<16;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(2&i.wrap&&35615===ot){i.check=0,Tt[0]=255&ot,Tt[1]=ot>>>8&255,i.check=a(i.check,Tt,2,0),ot=0,lt=0,i.mode=A;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&ot)<<8)+(ot>>8))%31){t.msg="incorrect header check",i.mode=Q;break}if((15&ot)!==w){t.msg="unknown compression method",i.mode=Q;break}if(lt-=4,xt=8+(15&(ot>>>=4)),0===i.wbits)i.wbits=xt;else if(xt>i.wbits){t.msg="invalid window size",i.mode=Q;break}i.dmax=1<<xt,t.adler=i.check=1,i.mode=512&ot?P:L,ot=0,lt=0;break;case A:for(;lt<16;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(i.flags=ot,(255&i.flags)!==w){t.msg="unknown compression method",i.mode=Q;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=Q;break}i.head&&(i.head.text=ot>>8&1),512&i.flags&&(Tt[0]=255&ot,Tt[1]=ot>>>8&255,i.check=a(i.check,Tt,2,0)),ot=0,lt=0,i.mode=M;case M:for(;lt<32;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.head&&(i.head.time=ot),512&i.flags&&(Tt[0]=255&ot,Tt[1]=ot>>>8&255,Tt[2]=ot>>>16&255,Tt[3]=ot>>>24&255,i.check=a(i.check,Tt,4,0)),ot=0,lt=0,i.mode=S;case S:for(;lt<16;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.head&&(i.head.xflags=255&ot,i.head.os=ot>>8),512&i.flags&&(Tt[0]=255&ot,Tt[1]=ot>>>8&255,i.check=a(i.check,Tt,2,0)),ot=0,lt=0,i.mode=E;case E:if(1024&i.flags){for(;lt<16;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.length=ot,i.head&&(i.head.extra_len=ot),512&i.flags&&(Tt[0]=255&ot,Tt[1]=ot>>>8&255,i.check=a(i.check,Tt,2,0)),ot=0,lt=0}else i.head&&(i.head.extra=null);i.mode=T;case T:if(1024&i.flags&&((ft=i.length)>at&&(ft=at),ft&&(i.head&&(xt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,tt,it,ft,xt)),512&i.flags&&(i.check=a(i.check,tt,ft,it)),at-=ft,it+=ft,i.length-=ft),i.length))break t;i.length=0,i.mode=I;case I:if(2048&i.flags){if(0===at)break t;ft=0;do{xt=tt[it+ft++],i.head&&xt&&i.length<65536&&(i.head.name+=String.fromCharCode(xt))}while(xt&&ft<at);if(512&i.flags&&(i.check=a(i.check,tt,ft,it)),at-=ft,it+=ft,xt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=C;case C:if(4096&i.flags){if(0===at)break t;ft=0;do{xt=tt[it+ft++],i.head&&xt&&i.length<65536&&(i.head.comment+=String.fromCharCode(xt))}while(xt&&ft<at);if(512&i.flags&&(i.check=a(i.check,tt,ft,it)),at-=ft,it+=ft,xt)break t}else i.head&&(i.head.comment=null);i.mode=k;case k:if(512&i.flags){for(;lt<16;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(ot!==(65535&i.check)){t.msg="header crc mismatch",i.mode=Q;break}ot=0,lt=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=L;break;case P:for(;lt<32;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}t.adler=i.check=nt(ot),ot=0,lt=0,i.mode=B;case B:if(0===i.havedict)return t.next_out=rt,t.avail_out=st,t.next_in=it,t.avail_in=at,i.hold=ot,i.bits=lt,g;t.adler=i.check=1,i.mode=L;case L:if(e===d||e===f)break t;case R:if(i.last){ot>>>=7&lt,lt-=7&lt,i.mode=X;break}for(;lt<3;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}switch(i.last=1&ot,lt-=1,3&(ot>>>=1)){case 0:i.mode=D;break;case 1:if(ut(i),i.mode=H,e===f){ot>>>=2,lt-=2;break t}break;case 2:i.mode=F;break;case 3:t.msg="invalid block type",i.mode=Q}ot>>>=2,lt-=2;break;case D:for(ot>>>=7&lt,lt-=7&lt;lt<32;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if((65535&ot)!=(ot>>>16^65535)){t.msg="invalid stored block lengths",i.mode=Q;break}if(i.length=65535&ot,ot=0,lt=0,i.mode=O,e===f)break t;case O:i.mode=G;case G:if(ft=i.length){if(ft>at&&(ft=at),ft>st&&(ft=st),0===ft)break t;n.arraySet(et,tt,it,ft,rt),at-=ft,it+=ft,st-=ft,rt+=ft,i.length-=ft;break}i.mode=L;break;case F:for(;lt<14;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(i.nlen=257+(31&ot),ot>>>=5,lt-=5,i.ndist=1+(31&ot),ot>>>=5,lt-=5,i.ncode=4+(15&ot),ot>>>=4,lt-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=Q;break}i.have=0,i.mode=N;case N:for(;i.have<i.ncode;){for(;lt<3;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.lens[It[i.have++]]=7&ot,ot>>>=3,lt-=3}for(;i.have<19;)i.lens[It[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Mt={bits:i.lenbits},At=o(l,i.lens,0,19,i.lencode,0,i.work,Mt),i.lenbits=Mt.bits,At){t.msg="invalid code lengths set",i.mode=Q;break}i.have=0,i.mode=z;case z:for(;i.have<i.nlen+i.ndist;){for(;_t=(Et=i.lencode[ot&(1<<i.lenbits)-1])>>>16&255,yt=65535&Et,!((gt=Et>>>24)<=lt);){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(yt<16)ot>>>=gt,lt-=gt,i.lens[i.have++]=yt;else{if(16===yt){for(St=gt+2;lt<St;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(ot>>>=gt,lt-=gt,0===i.have){t.msg="invalid bit length repeat",i.mode=Q;break}xt=i.lens[i.have-1],ft=3+(3&ot),ot>>>=2,lt-=2}else if(17===yt){for(St=gt+3;lt<St;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}lt-=gt,xt=0,ft=3+(7&(ot>>>=gt)),ot>>>=3,lt-=3}else{for(St=gt+7;lt<St;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}lt-=gt,xt=0,ft=11+(127&(ot>>>=gt)),ot>>>=7,lt-=7}if(i.have+ft>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=Q;break}for(;ft--;)i.lens[i.have++]=xt}}if(i.mode===Q)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=Q;break}if(i.lenbits=9,Mt={bits:i.lenbits},At=o(c,i.lens,0,i.nlen,i.lencode,0,i.work,Mt),i.lenbits=Mt.bits,At){t.msg="invalid literal/lengths set",i.mode=Q;break}if(i.distbits=6,i.distcode=i.distdyn,Mt={bits:i.distbits},At=o(h,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Mt),i.distbits=Mt.bits,At){t.msg="invalid distances set",i.mode=Q;break}if(i.mode=H,e===f)break t;case H:i.mode=U;case U:if(at>=6&&st>=258){t.next_out=rt,t.avail_out=st,t.next_in=it,t.avail_in=at,i.hold=ot,i.bits=lt,s(t,ht),rt=t.next_out,et=t.output,st=t.avail_out,it=t.next_in,tt=t.input,at=t.avail_in,ot=i.hold,lt=i.bits,i.mode===L&&(i.back=-1);break}for(i.back=0;_t=(Et=i.lencode[ot&(1<<i.lenbits)-1])>>>16&255,yt=65535&Et,!((gt=Et>>>24)<=lt);){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(_t&&0==(240&_t)){for(bt=gt,vt=_t,wt=yt;_t=(Et=i.lencode[wt+((ot&(1<<bt+vt)-1)>>bt)])>>>16&255,yt=65535&Et,!(bt+(gt=Et>>>24)<=lt);){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}ot>>>=bt,lt-=bt,i.back+=bt}if(ot>>>=gt,lt-=gt,i.back+=gt,i.length=yt,0===_t){i.mode=Y;break}if(32&_t){i.back=-1,i.mode=L;break}if(64&_t){t.msg="invalid literal/length code",i.mode=Q;break}i.extra=15&_t,i.mode=V;case V:if(i.extra){for(St=i.extra;lt<St;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.length+=ot&(1<<i.extra)-1,ot>>>=i.extra,lt-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=W;case W:for(;_t=(Et=i.distcode[ot&(1<<i.distbits)-1])>>>16&255,yt=65535&Et,!((gt=Et>>>24)<=lt);){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(0==(240&_t)){for(bt=gt,vt=_t,wt=yt;_t=(Et=i.distcode[wt+((ot&(1<<bt+vt)-1)>>bt)])>>>16&255,yt=65535&Et,!(bt+(gt=Et>>>24)<=lt);){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}ot>>>=bt,lt-=bt,i.back+=bt}if(ot>>>=gt,lt-=gt,i.back+=gt,64&_t){t.msg="invalid distance code",i.mode=Q;break}i.offset=yt,i.extra=15&_t,i.mode=j;case j:if(i.extra){for(St=i.extra;lt<St;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}i.offset+=ot&(1<<i.extra)-1,ot>>>=i.extra,lt-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=Q;break}i.mode=Z;case Z:if(0===st)break t;if(ft=ht-st,i.offset>ft){if((ft=i.offset-ft)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=Q;break}ft>i.wnext?(ft-=i.wnext,pt=i.wsize-ft):pt=i.wnext-ft,ft>i.length&&(ft=i.length),mt=i.window}else mt=et,pt=rt-i.offset,ft=i.length;ft>st&&(ft=st),st-=ft,i.length-=ft;do{et[rt++]=mt[pt++]}while(--ft);0===i.length&&(i.mode=U);break;case Y:if(0===st)break t;et[rt++]=i.length,st--,i.mode=U;break;case X:if(i.wrap){for(;lt<32;){if(0===at)break t;at--,ot|=tt[it++]<<lt,lt+=8}if(ht-=st,t.total_out+=ht,i.total+=ht,ht&&(t.adler=i.check=i.flags?a(i.check,et,ht,rt-ht):r(i.check,et,ht,rt-ht)),ht=st,(i.flags?ot:nt(ot))!==i.check){t.msg="incorrect data check",i.mode=Q;break}ot=0,lt=0}i.mode=J;case J:if(i.wrap&&i.flags){for(;lt<32;){if(0===at)break t;at--,ot+=tt[it++]<<lt,lt+=8}if(ot!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=Q;break}ot=0,lt=0}i.mode=q;case q:At=m;break t;case Q:At=y;break t;case K:return b;case $:default:return _}return t.next_out=rt,t.avail_out=st,t.next_in=it,t.avail_in=at,i.hold=ot,i.bits=lt,(i.wsize||ht!==t.avail_out&&i.mode<Q&&(i.mode<X||e!==u))&&dt(t,t.output,t.next_out,ht-t.avail_out)?(i.mode=K,b):(ct-=t.avail_in,ht-=t.avail_out,t.total_in+=ct,t.total_out+=ht,i.total+=ht,i.wrap&&ht&&(t.adler=i.check=i.flags?a(i.check,et,ht,t.next_out-ht):r(i.check,et,ht,t.next_out-ht)),t.data_type=i.bits+(i.last?64:0)+(i.mode===L?128:0)+(i.mode===H||i.mode===O?256:0),(0===ct&&0===ht||e===u)&&At===p&&(At=v),At)},e.inflateEnd=function(t){if(!t||!t.state)return _;var e=t.state;return e.window&&(e.window=null),t.state=null,p},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?_:(i.head=e,e.done=!1,p):_},e.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&i.mode!==B?_:i.mode===B&&r(1,e,n,0)!==i.check?y:dt(t,e,n,n)?(i.mode=K,b):(i.havedict=1,p):_},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports=function(t,e){var i,n,r,a,s,o,l,c,h,u,d,f,p,m,g,_,y,b,v,w,x,A,M,S,E;i=t.state,n=t.next_in,S=t.input,r=n+(t.avail_in-5),a=t.next_out,E=t.output,s=a-(e-t.avail_out),o=a+(t.avail_out-257),l=i.dmax,c=i.wsize,h=i.whave,u=i.wnext,d=i.window,f=i.hold,p=i.bits,m=i.lencode,g=i.distcode,_=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),b=m[f&_];e:for(;;){if(f>>>=v=b>>>24,p-=v,0===(v=b>>>16&255))E[a++]=65535&b;else{if(!(16&v)){if(0==(64&v)){b=m[(65535&b)+(f&(1<<v)-1)];continue e}if(32&v){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}w=65535&b,(v&=15)&&(p<v&&(f+=S[n++]<<p,p+=8),w+=f&(1<<v)-1,f>>>=v,p-=v),p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),b=g[f&y];i:for(;;){if(f>>>=v=b>>>24,p-=v,!(16&(v=b>>>16&255))){if(0==(64&v)){b=g[(65535&b)+(f&(1<<v)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&b,p<(v&=15)&&(f+=S[n++]<<p,(p+=8)<v&&(f+=S[n++]<<p,p+=8)),(x+=f&(1<<v)-1)>l){t.msg="invalid distance too far back",i.mode=30;break t}if(f>>>=v,p-=v,x>(v=a-s)){if((v=x-v)>h&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(A=0,M=d,0===u){if(A+=c-v,v<w){w-=v;do{E[a++]=d[A++]}while(--v);A=a-x,M=E}}else if(u<v){if(A+=c+u-v,(v-=u)<w){w-=v;do{E[a++]=d[A++]}while(--v);if(A=0,u<w){w-=v=u;do{E[a++]=d[A++]}while(--v);A=a-x,M=E}}}else if(A+=u-v,v<w){w-=v;do{E[a++]=d[A++]}while(--v);A=a-x,M=E}for(;w>2;)E[a++]=M[A++],E[a++]=M[A++],E[a++]=M[A++],w-=3;w&&(E[a++]=M[A++],w>1&&(E[a++]=M[A++]))}else{A=a-x;do{E[a++]=E[A++],E[a++]=E[A++],E[a++]=E[A++],w-=3}while(w>2);w&&(E[a++]=E[A++],w>1&&(E[a++]=E[A++]))}break}}break}}while(n<r&&a<o);n-=w=p>>3,f&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=a,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=a<o?o-a+257:257-(a-o),i.hold=f,i.bits=p}},function(t,e,i){"use strict";var n=i(11),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,l,c,h,u,d){var f,p,m,g,_,y,b,v,w,x=d.bits,A=0,M=0,S=0,E=0,T=0,I=0,C=0,k=0,P=0,B=0,L=null,R=0,D=new n.Buf16(16),O=new n.Buf16(16),G=null,F=0;for(A=0;A<=15;A++)D[A]=0;for(M=0;M<l;M++)D[e[i+M]]++;for(T=x,E=15;E>=1&&0===D[E];E--);if(T>E&&(T=E),0===E)return c[h++]=20971520,c[h++]=20971520,d.bits=1,0;for(S=1;S<E&&0===D[S];S++);for(T<S&&(T=S),k=1,A=1;A<=15;A++)if(k<<=1,(k-=D[A])<0)return-1;if(k>0&&(0===t||1!==E))return-1;for(O[1]=0,A=1;A<15;A++)O[A+1]=O[A]+D[A];for(M=0;M<l;M++)0!==e[i+M]&&(u[O[e[i+M]]++]=M);if(0===t?(L=G=u,y=19):1===t?(L=r,R-=257,G=a,F-=257,y=256):(L=s,G=o,y=-1),B=0,M=0,A=S,_=h,I=T,C=0,m=-1,g=(P=1<<T)-1,1===t&&P>852||2===t&&P>592)return 1;for(;;){0,b=A-C,u[M]<y?(v=0,w=u[M]):u[M]>y?(v=G[F+u[M]],w=L[R+u[M]]):(v=96,w=0),f=1<<A-C,S=p=1<<I;do{c[_+(B>>C)+(p-=f)]=b<<24|v<<16|w|0}while(0!==p);for(f=1<<A-1;B&f;)f>>=1;if(0!==f?(B&=f-1,B+=f):B=0,M++,0==--D[A]){if(A===E)break;A=e[i+u[M]]}if(A>T&&(B&g)!==m){for(0===C&&(C=T),_+=S,k=1<<(I=A-C);I+C<E&&!((k-=D[I+C])<=0);)I++,k<<=1;if(P+=1<<I,1===t&&P>852||2===t&&P>592)return 1;c[m=B&g]=T<<24|I<<16|_-h|0}}return 0!==B&&(c[_+B]=A-C<<24|64<<16|0),d.bits=T,0}},function(t,e,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,i){"use strict";var n=i(135),r=i(136),a=i(137),s=i(87),o=i(138),l=i(141),c=i(60),h=i(142),u=i(143),d=127;t.exports=function(t){var e,i,f,p,m,g,_;if(i=t<0||1/t===r?"1":"0",t===n||t===r)return i+(p=c("1",8))+(f=c("0",23));if(t!=t)return i+(p=c("1",8))+(f="1"+c("0",22));if(0===t)return i+(p=c("0",8))+(f=c("0",23));if(g=(t=a(t))-(m=s(t)),m=h(m),g=u(g),m)p=m.length-1;else{for(_=0;_<g.length;_++)if("1"===g[_]){e=_+1;break}p=-e}return f=m+g,p<0?(p<=-d&&(e=d-1),f=f.substring(e)):f=f.substring(1),p=h(p+d),i+(p=l(p,8,"0"))+(f=o(f,23,"0").substring(0,23))}},function(t,e,i){"use strict";var n=new Float32Array(1);new Uint32Array(n.buffer)[0]=2139095040,t.exports=n[0]},function(t,e,i){"use strict";var n=new Float32Array(1);new Uint32Array(n.buffer)[0]=4286578688,t.exports=n[0]},function(t,e,i){"use strict";t.exports=function(t){return t<0?-t:0===t?0:t}},function(t,e,i){"use strict";var n=i(58),r=i(59),a=i(88),s=i(60),o=9007199254740991;t.exports=function(t,e,i){var l,c;if(!n(t))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+t+"`.");if(!r(e))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+e+"`.");if(arguments.length>2){if(!n(c=i))throw new TypeError("invalid input argument. Third argument must be a string. Value: `"+c+"`.");if(0===c.length)throw new RangeError("invalid input argument. Pad string must not be an empty string.")}else c=" ";if(e>o)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");return(l=(e-t.length)/c.length)<=0?t:(l=a(l),t+s(c,l))}},function(t,e,i){"use strict";var n=i(140);t.exports=function(t){return n(t)&&t%1==0}},function(t,e,i){"use strict";t.exports=function(t){return("number"==typeof t||"[object Number]"===Object.prototype.toString.call(t))&&t.valueOf()==t.valueOf()}},function(t,e,i){"use strict";var n=i(58),r=i(59),a=i(88),s=i(60),o=9007199254740991;t.exports=function(t,e,i){var l,c;if(!n(t))throw new TypeError("invalid input argument. First argument must be a string. Value: `"+t+"`.");if(!r(e))throw new TypeError("invalid input argument. Second argument must be a nonnegative integer. Value: `"+e+"`.");if(arguments.length>2){if(!n(c=i))throw new TypeError("invalid input argument. Third argument must be a string. Value: `"+c+"`.");if(0===c.length)throw new RangeError("invalid input argument. Pad string must not be an empty string.")}else c=" ";if(e>o)throw new RangeError("invalid input argument. Output string length exceeds maximum allowed string length.");return(l=(e-t.length)/c.length)<=0?t:(l=a(l),s(c,l)+t)}},function(t,e,i){"use strict";var n=i(87);t.exports=function(t){for(var e,i="";t>0;)i=(e=t/2)===(t=n(e))?"0"+i:"1"+i;return i}},function(t,e,i){"use strict";var n=149,r=24;t.exports=function(t){var e,i,a,s;if(e="",0===t)return e;for(s=n,a=0;a<n&&((i=2*t)>=1?(t=i-1,e+="1",s===n&&(s=a)):(t=i,e+="0"),!(1===i||a-s>r));a++);return e}},function(t,e,i){"use strict";var n=n||{};n.Utils=n.Utils||i(61),n.NIFTI1=n.NIFTI1||i(89),n.NIFTI2=n.NIFTI2||function(){this.littleEndian=!1,this.dim_info=0,this.dims=[],this.intent_p1=0,this.intent_p2=0,this.intent_p3=0,this.intent_code=0,this.datatypeCode=0,this.numBitsPerVoxel=0,this.slice_start=0,this.slice_end=0,this.slice_code=0,this.pixDims=[],this.vox_offset=0,this.scl_slope=1,this.scl_inter=0,this.xyzt_units=0,this.cal_max=0,this.cal_min=0,this.slice_duration=0,this.toffset=0,this.description="",this.aux_file="",this.intent_name="",this.qform_code=0,this.sform_code=0,this.quatern_b=0,this.quatern_c=0,this.quatern_d=0,this.qoffset_x=0,this.qoffset_y=0,this.qoffset_z=0,this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],this.magic=0,this.extensionFlag=[0,0,0,0]},n.NIFTI2.MAGIC_COOKIE=540,n.NIFTI2.MAGIC_NUMBER_LOCATION=4,n.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10],n.NIFTI2.prototype.readHeader=function(t){var e,i,r,a,s=new DataView(t),o=n.Utils.getIntAt(s,0,this.littleEndian);if(o!==n.NIFTI2.MAGIC_COOKIE&&(this.littleEndian=!0,o=n.Utils.getIntAt(s,0,this.littleEndian)),o!==n.NIFTI2.MAGIC_COOKIE)throw new Error("This does not appear to be a NIFTI file!");for(this.datatypeCode=n.Utils.getShortAt(s,12,this.littleEndian),this.numBitsPerVoxel=n.Utils.getShortAt(s,14,this.littleEndian),e=0;e<8;e+=1)a=16+8*e,this.dims[e]=n.Utils.getLongAt(s,a,this.littleEndian);for(this.intent_p1=n.Utils.getDoubleAt(s,80,this.littleEndian),this.intent_p2=n.Utils.getDoubleAt(s,88,this.littleEndian),this.intent_p3=n.Utils.getDoubleAt(s,96,this.littleEndian),e=0;e<8;e+=1)a=104+8*e,this.pixDims[e]=n.Utils.getDoubleAt(s,a,this.littleEndian);for(this.vox_offset=n.Utils.getLongAt(s,168,this.littleEndian),this.scl_slope=n.Utils.getDoubleAt(s,176,this.littleEndian),this.scl_inter=n.Utils.getDoubleAt(s,184,this.littleEndian),this.cal_max=n.Utils.getDoubleAt(s,192,this.littleEndian),this.cal_min=n.Utils.getDoubleAt(s,200,this.littleEndian),this.slice_duration=n.Utils.getDoubleAt(s,208,this.littleEndian),this.toffset=n.Utils.getDoubleAt(s,216,this.littleEndian),this.slice_start=n.Utils.getLongAt(s,224,this.littleEndian),this.slice_end=n.Utils.getLongAt(s,232,this.littleEndian),this.description=n.Utils.getStringAt(s,240,320),this.aux_file=n.Utils.getStringAt(s,320,344),this.qform_code=n.Utils.getIntAt(s,344,this.littleEndian),this.sform_code=n.Utils.getIntAt(s,348,this.littleEndian),this.quatern_b=n.Utils.getDoubleAt(s,352,this.littleEndian),this.quatern_c=n.Utils.getDoubleAt(s,360,this.littleEndian),this.quatern_d=n.Utils.getDoubleAt(s,368,this.littleEndian),this.qoffset_x=n.Utils.getDoubleAt(s,376,this.littleEndian),this.qoffset_y=n.Utils.getDoubleAt(s,384,this.littleEndian),this.qoffset_z=n.Utils.getDoubleAt(s,392,this.littleEndian),i=0;i<3;i+=1)for(r=0;r<4;r+=1)a=400+8*(4*i+r),this.affine[i][r]=n.Utils.getDoubleAt(s,a,this.littleEndian);this.affine[3][0]=0,this.affine[3][1]=0,this.affine[3][2]=0,this.affine[3][3]=1,this.slice_code=n.Utils.getIntAt(s,496,this.littleEndian),this.xyzt_units=n.Utils.getIntAt(s,500,this.littleEndian),this.intent_code=n.Utils.getIntAt(s,504,this.littleEndian),this.intent_name=n.Utils.getStringAt(s,508,524),this.dim_info=n.Utils.getByteAt(s,524),s.byteLength>n.NIFTI2.MAGIC_COOKIE&&(this.extensionFlag[0]=n.Utils.getByteAt(s,540),this.extensionFlag[1]=n.Utils.getByteAt(s,541),this.extensionFlag[2]=n.Utils.getByteAt(s,542),this.extensionFlag[3]=n.Utils.getByteAt(s,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(s),this.extensionCode=this.getExtensionCode(s)))},n.NIFTI2.prototype.toFormattedString=function(){var t=n.Utils.formatNumber,e="";return e+="Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n",e+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n",e+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n",e+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n",e+="Voxel Dimensions (1-8): "+t(this.pixDims[0])+", "+t(this.pixDims[1])+", "+t(this.pixDims[2])+", "+t(this.pixDims[3])+", "+t(this.pixDims[4])+", "+t(this.pixDims[5])+", "+t(this.pixDims[6])+", "+t(this.pixDims[7])+"\n",e+="Image Offset = "+this.vox_offset+"\n",e+="Data Scale:  Slope = "+t(this.scl_slope)+"  Intercept = "+t(this.scl_inter)+"\n",e+="Display Range:  Max = "+t(this.cal_max)+"  Min = "+t(this.cal_min)+"\n",e+="Slice Duration = "+this.slice_duration+"\n",e+="Time Axis Shift = "+this.toffset+"\n",e+="Slice Start = "+this.slice_start+"\n",e+="Slice End = "+this.slice_end+"\n",e+='Description: "'+this.description+'"\n',e+='Auxiliary File: "'+this.aux_file+'"\n',e+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n",e+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n",e+="Quaternion Parameters:  b = "+t(this.quatern_b)+"  c = "+t(this.quatern_c)+"  d = "+t(this.quatern_d)+"\n",e+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n",e+="S-Form Parameters X: "+t(this.affine[0][0])+", "+t(this.affine[0][1])+", "+t(this.affine[0][2])+", "+t(this.affine[0][3])+"\n",e+="S-Form Parameters Y: "+t(this.affine[1][0])+", "+t(this.affine[1][1])+", "+t(this.affine[1][2])+", "+t(this.affine[1][3])+"\n",e+="S-Form Parameters Z: "+t(this.affine[2][0])+", "+t(this.affine[2][1])+", "+t(this.affine[2][2])+", "+t(this.affine[2][3])+"\n",e+="Slice Code = "+this.slice_code+"\n",e+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(n.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(n.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n",e+="Intent Code = "+this.intent_code+"\n",e+='Intent Name: "'+this.intent_name+'"\n',e+="Dim Info = "+this.dim_info+"\n"},n.NIFTI2.prototype.getExtensionLocation=function(){return n.NIFTI2.MAGIC_COOKIE+4},n.NIFTI2.prototype.getExtensionSize=n.NIFTI1.prototype.getExtensionSize,n.NIFTI2.prototype.getExtensionCode=n.NIFTI1.prototype.getExtensionCode,n.NIFTI2.prototype.getDatatypeCodeString=n.NIFTI1.prototype.getDatatypeCodeString,n.NIFTI2.prototype.getTransformCodeString=n.NIFTI1.prototype.getTransformCodeString,n.NIFTI2.prototype.getUnitsCodeString=n.NIFTI1.prototype.getUnitsCodeString,n.NIFTI2.prototype.getQformMat=n.NIFTI1.prototype.getQformMat,n.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=n.NIFTI1.prototype.convertNiftiQFormToNiftiSForm,n.NIFTI2.prototype.convertNiftiSFormToNEMA=n.NIFTI1.prototype.convertNiftiSFormToNEMA,n.NIFTI2.prototype.nifti_mat33_mul=n.NIFTI1.prototype.nifti_mat33_mul,n.NIFTI2.prototype.nifti_mat33_determ=n.NIFTI1.prototype.nifti_mat33_determ,"undefined"!==typeof t&&t.exports&&(t.exports=n.NIFTI2)},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=i(146),r=i(147),a=i(148);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return c(this,t,e,i)}function c(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,i),r=(t=o(t,n)).write(e,i);r!==n&&(t=t.slice(0,r));return t}(t,e,i):function(t,e){if(l.isBuffer(e)){var i=0|f(e.length);return 0===(t=o(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?o(t,0):d(t,e);if("Buffer"===e.type&&a(e.data))return d(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(h(e),t=o(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function d(t,e){var i=e.length<0?0:0|f(e.length);t=o(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return H(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function g(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:_(t,e,i,n,r);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):_(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function _(t,e,i,n,r){var a,s=1,o=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,o/=2,l/=2,i/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var h=-1;for(a=i;a<o;a++)if(c(t,a)===c(e,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===l)return h*s}else-1!==h&&(a-=a-h),h=-1}else for(i+l>o&&(i=o-l),a=i;a>=0;a--){for(var u=!0,d=0;d<l;d++)if(c(t,a+d)!==c(e,d)){u=!1;break}if(u)return a}return-1}function y(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var s=0;s<n;++s){var o=parseInt(e.substr(2*s,2),16);if(isNaN(o))return s;t[i+s]=o}return s}function b(t,e,i,n){return U(z(e,t.length-i),t,i,n)}function v(t,e,i,n){return U(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function w(t,e,i,n){return v(t,e,i,n)}function x(t,e,i,n){return U(H(e),t,i,n)}function A(t,e,i,n){return U(function(t,e){for(var i,n,r,a=[],s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),n=i>>8,r=i%256,a.push(r),a.push(n);return a}(e,t.length-i),t,i,n)}function M(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function S(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var a,s,o,l,c=t[r],h=null,u=c>239?4:c>223?3:c>191?2:1;if(r+u<=i)switch(u){case 1:c<128&&(h=c);break;case 2:128==(192&(a=t[r+1]))&&(l=(31&c)<<6|63&a)>127&&(h=l);break;case 3:a=t[r+1],s=t[r+2],128==(192&a)&&128==(192&s)&&(l=(15&c)<<12|(63&a)<<6|63&s)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:a=t[r+1],s=t[r+2],o=t[r+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(l=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&l<1114112&&(h=l)}null===h?(h=65533,u=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),r+=u}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=E));return i}(n)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,i){return c(null,t,e,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,i){return function(t,e,i,n){return h(e),e<=0?o(t,e):void 0!==i?"string"==typeof n?o(t,e).fill(i,n):o(t,e).fill(i):o(t,e)}(null,t,e,i)},l.allocUnsafe=function(t){return u(null,t)},l.allocUnsafeSlow=function(t){return u(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,a=Math.min(i,n);r<a;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=l.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var s=t[i];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):function(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,i);case"utf8":case"utf-8":return S(this,e,i);case"ascii":return T(this,e,i);case"latin1":case"binary":return I(this,e,i);case"base64":return M(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,i,n,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,n>>>=0,r>>>=0,this===t)return 0;for(var a=r-n,s=i-e,o=Math.min(a,s),c=this.slice(n,r),h=t.slice(e,i),u=0;u<o;++u)if(c[u]!==h[u]){a=c[u],s=h[u];break}return a<s?-1:s<a?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return g(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return g(this,t,e,i,!1)},l.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return y(this,t,e,i);case"utf8":case"utf-8":return b(this,t,e,i);case"ascii":return v(this,t,e,i);case"latin1":case"binary":return w(this,t,e,i);case"base64":return x(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function T(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function I(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function C(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",a=e;a<i;++a)r+=N(t[a]);return r}function k(t,e,i){for(var n=t.slice(e,i),r="",a=0;a<n.length;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1]);return r}function P(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,i,n,r,a){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<a)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function L(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,a=Math.min(t.length-i,2);r<a;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function R(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,a=Math.min(t.length-i,4);r<a;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function D(t,e,i,n,r,a){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function O(t,e,i,n,a){return a||D(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function G(t,e,i,n,a){return a||D(t,0,i,8),r.write(t,e,i,n,52,8),i+8}l.prototype.slice=function(t,e){var i,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;i=new l(r,void 0);for(var a=0;a<r;++a)i[a]=this[a+t]}return i},l.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=this[t],r=1,a=0;++a<e&&(r*=256);)n+=this[t+a]*r;return n},l.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},l.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=this[t],r=1,a=0;++a<e&&(r*=256);)n+=this[t+a]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=e,r=1,a=this[t+--n];n>0&&(r*=256);)a+=this[t+--n]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*e)),a},l.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||B(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,a=0;for(this[e]=255&t;++a<i&&(r*=256);)this[e+a]=t/r&255;return e+i},l.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||B(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,a=1;for(this[e+r]=255&t;--r>=0&&(a*=256);)this[e+r]=t/a&255;return e+i},l.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);B(this,t,e,i,r-1,-r)}var a=0,s=1,o=0;for(this[e]=255&t;++a<i&&(s*=256);)t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+i},l.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);B(this,t,e,i,r-1,-r)}var a=i-1,s=1,o=0;for(this[e+a]=255&t;--a>=0&&(s*=256);)t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,i){return O(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return O(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return G(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return G(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,a=n-i;if(this===t&&i<e&&e<n)for(r=a-1;r>=0;--r)t[r+e]=this[r+i];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+a),e);return a},l.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var a;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(a=e;a<i;++a)this[a]=t;else{var s=l.isBuffer(t)?t:z(new l(t,n).toString()),o=s.length;for(a=0;a<i-e;++a)this[a+e]=s[a%o]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var i;e=e||1/0;for(var n=t.length,r=null,a=[],s=0;s<n;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&a.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&a.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&a.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;a.push(i)}else if(i<2048){if((e-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function H(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(this,i(63))},function(t,e,i){"use strict";e.byteLength=function(t){var e=c(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){for(var e,i=c(t),n=i[0],s=i[1],o=new a(function(t,e,i){return 3*(e+i)/4-i}(0,n,s)),l=0,h=s>0?n-4:n,u=0;u<h;u+=4)e=r[t.charCodeAt(u)]<<18|r[t.charCodeAt(u+1)]<<12|r[t.charCodeAt(u+2)]<<6|r[t.charCodeAt(u+3)],o[l++]=e>>16&255,o[l++]=e>>8&255,o[l++]=255&e;2===s&&(e=r[t.charCodeAt(u)]<<2|r[t.charCodeAt(u+1)]>>4,o[l++]=255&e);1===s&&(e=r[t.charCodeAt(u)]<<10|r[t.charCodeAt(u+1)]<<4|r[t.charCodeAt(u+2)]>>2,o[l++]=e>>8&255,o[l++]=255&e);return o},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,a=[],s=0,o=i-r;s<o;s+=16383)a.push(u(t,s,s+16383>o?o:s+16383));1===r?(e=t[i-1],a.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],a.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return a.join("")};for(var n=[],r=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)n[o]=s[o],r[s.charCodeAt(o)]=o;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function h(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function u(t,e,i){for(var n,r=[],a=e;a<i;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),r.push(h(n));return r.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,i,n,r){var a,s,o=8*r-n-1,l=(1<<o)-1,c=l>>1,h=-7,u=i?r-1:0,d=i?-1:1,f=t[e+u];for(u+=d,a=f&(1<<-h)-1,f>>=-h,h+=o;h>0;a=256*a+t[e+u],u+=d,h-=8);for(s=a&(1<<-h)-1,a>>=-h,h+=n;h>0;s=256*s+t[e+u],u+=d,h-=8);if(0===a)a=1-c;else{if(a===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),a-=c}return(f?-1:1)*s*Math.pow(2,a-n)},e.write=function(t,e,i,n,r,a){var s,o,l,c=8*a-r-1,h=(1<<c)-1,u=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=h?(o=0,s=h):s+u>=1?(o=(e*l-1)*Math.pow(2,r),s+=u):(o=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[i+f]=255&o,f+=p,o/=256,r-=8);for(s=s<<r|o,c+=r;c>0;t[i+f]=255&s,f+=p,s/=256,c-=8);t[i+f-p]|=128*m}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e){},function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(t){return n.exec(t).slice(1)};function a(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}e.resolve=function(){for(var e="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var s=r>=0?arguments[r]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,n="/"===s.charAt(0))}return e=i(a(e.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+e||"."},e.normalize=function(t){var n=e.isAbsolute(t),r="/"===s(t,-1);return(t=i(a(t.split("/"),function(t){return!!t}),!n).join("/"))||n||(t="."),t&&r&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(a(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),a=n(i.split("/")),s=Math.min(r.length,a.length),o=s,l=0;l<s;l++)if(r[l]!==a[l]){o=l;break}var c=[];for(l=o;l<r.length;l++)c.push("..");return(c=c.concat(a.slice(o))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=r(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.basename=function(t,e){var i=r(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return r(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i(62))},function(t,e,i){
/*! dicom-parser - 1.8.1 - 2018-05-16 | (c) 2017 Chris Hafey | https://github.com/cornerstonejs/dicomParser */
t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=79)}([function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=i(73),r=i(72),a=i(38);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return c(this,t,e,i)}function c(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e),t}(t,e,i,n):"string"==typeof e?function(t,e,i){if("string"==typeof i&&""!==i||(i="utf8"),!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,i),r=(t=o(t,n)).write(e,i);return r!==n&&(t=t.slice(0,r)),t}(t,e,i):function(t,e){if(l.isBuffer(e)){var i=0|f(e.length);return 0===(t=o(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?o(t,0):d(t,e);if("Buffer"===e.type&&a(e.data))return d(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e){if(h(e),t=o(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function d(t,e){var i=e.length<0?0:0|f(e.length);t=o(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return H(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function g(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:_(t,e,i,n,r);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):_(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function _(t,e,i,n,r){var a,s=1,o=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,o/=2,l/=2,i/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var h=-1;for(a=i;a<o;a++)if(c(t,a)===c(e,-1===h?0:a-h)){if(-1===h&&(h=a),a-h+1===l)return h*s}else-1!==h&&(a-=a-h),h=-1}else for(i+l>o&&(i=o-l),a=i;a>=0;a--){for(var u=!0,d=0;d<l;d++)if(c(t,a+d)!==c(e,d)){u=!1;break}if(u)return a}return-1}function y(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var s=0;s<n;++s){var o=parseInt(e.substr(2*s,2),16);if(isNaN(o))return s;t[i+s]=o}return s}function b(t,e,i,n){return U(z(e,t.length-i),t,i,n)}function v(t,e,i,n){return U(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function w(t,e,i,n){return v(t,e,i,n)}function x(t,e,i,n){return U(H(e),t,i,n)}function A(t,e,i,n){return U(function(t,e){for(var i,n,r,a=[],s=0;s<t.length&&!((e-=2)<0);++s)i=t.charCodeAt(s),n=i>>8,r=i%256,a.push(r),a.push(n);return a}(e,t.length-i),t,i,n)}function M(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function S(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var a,s,o,l,c=t[r],h=null,u=c>239?4:c>223?3:c>191?2:1;if(r+u<=i)switch(u){case 1:c<128&&(h=c);break;case 2:128==(192&(a=t[r+1]))&&(l=(31&c)<<6|63&a)>127&&(h=l);break;case 3:a=t[r+1],s=t[r+2],128==(192&a)&&128==(192&s)&&(l=(15&c)<<12|(63&a)<<6|63&s)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:a=t[r+1],s=t[r+2],o=t[r+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(l=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&l<1114112&&(h=l)}null===h?(h=65533,u=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),r+=u}return function(t){var e=t.length;if(e<=E)return String.fromCharCode.apply(String,t);for(var i="",n=0;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=E));return i}(n)}e.Buffer=l,e.SlowBuffer=function(t){return+t!=t&&(t=0),l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,i){return c(null,t,e,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,i){return function(t,e,i,n){return h(e),e<=0?o(t,e):void 0!==i?"string"==typeof n?o(t,e).fill(i,n):o(t,e).fill(i):o(t,e)}(null,t,e,i)},l.allocUnsafe=function(t){return u(null,t)},l.allocUnsafeSlow=function(t){return u(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,a=Math.min(i,n);r<a;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=l.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var s=t[i];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):function(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,i);case"utf8":case"utf-8":return S(this,e,i);case"ascii":return T(this,e,i);case"latin1":case"binary":return I(this,e,i);case"base64":return M(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,i,n,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,n>>>=0,r>>>=0,this===t)return 0;for(var a=r-n,s=i-e,o=Math.min(a,s),c=this.slice(n,r),h=t.slice(e,i),u=0;u<o;++u)if(c[u]!==h[u]){a=c[u],s=h[u];break}return a<s?-1:s<a?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return g(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return g(this,t,e,i,!1)},l.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return y(this,t,e,i);case"utf8":case"utf-8":return b(this,t,e,i);case"ascii":return v(this,t,e,i);case"latin1":case"binary":return w(this,t,e,i);case"base64":return x(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function T(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function I(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function C(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",a=e;a<i;++a)r+=N(t[a]);return r}function k(t,e,i){for(var n=t.slice(e,i),r="",a=0;a<n.length;a+=2)r+=String.fromCharCode(n[a]+256*n[a+1]);return r}function P(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,i,n,r,a){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<a)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function L(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,a=Math.min(t.length-i,2);r<a;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function R(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,a=Math.min(t.length-i,4);r<a;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function D(t,e,i,n,r,a){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function O(t,e,i,n,a){return a||D(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function G(t,e,i,n,a){return a||D(t,0,i,8),r.write(t,e,i,n,52,8),i+8}l.prototype.slice=function(t,e){var i,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;i=new l(r,void 0);for(var a=0;a<r;++a)i[a]=this[a+t]}return i},l.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=this[t],r=1,a=0;++a<e&&(r*=256);)n+=this[t+a]*r;return n},l.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},l.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=this[t],r=1,a=0;++a<e&&(r*=256);)n+=this[t+a]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||P(t,e,this.length);for(var n=e,r=1,a=this[t+--n];n>0&&(r*=256);)a+=this[t+--n]*r;return a>=(r*=128)&&(a-=Math.pow(2,8*e)),a},l.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,i,n){t=+t,e|=0,i|=0,n||B(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,a=0;for(this[e]=255&t;++a<i&&(r*=256);)this[e+a]=t/r&255;return e+i},l.prototype.writeUIntBE=function(t,e,i,n){t=+t,e|=0,i|=0,n||B(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,a=1;for(this[e+r]=255&t;--r>=0&&(a*=256);)this[e+r]=t/a&255;return e+i},l.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);B(this,t,e,i,r-1,-r)}var a=0,s=1,o=0;for(this[e]=255&t;++a<i&&(s*=256);)t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+i},l.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);B(this,t,e,i,r-1,-r)}var a=i-1,s=1,o=0;for(this[e+a]=255&t;--a>=0&&(s*=256);)t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,i){return O(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return O(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return G(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return G(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,a=n-i;if(this===t&&i<e&&e<n)for(r=a-1;r>=0;--r)t[r+e]=this[r+i];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+a),e);return a},l.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var a;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(a=e;a<i;++a)this[a]=t;else{var s=l.isBuffer(t)?t:z(new l(t,n).toString()),o=s.length;for(a=0;a<i-e;++a)this[a+e]=s[a%o]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var i;e=e||1/0;for(var n=t.length,r=null,a=[],s=0;s<n;++s){if((i=t.charCodeAt(s))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&a.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&a.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&a.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;a.push(i)}else if(i<2048){if((e-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function H(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}}).call(this,i(0))},function(t,e,i){"use strict";var n=i(10),r=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=u;var a=i(6);a.inherits=i(5);var s=i(35),o=i(18);a.inherits(u,s);for(var l=r(o.prototype),c=0;c<l.length;c++){var h=l[c];u.prototype[h]||(u.prototype[h]=o.prototype[h])}function u(t){if(!(this instanceof u))return new u(t);s.call(this,t),o.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),u.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e){var i,n,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(t){i=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,c=[],h=!1,u=-1;function d(){h&&l&&(h=!1,l.length?c=l.concat(c):u=-1,c.length&&f())}function f(){if(!h){var t=o(d);h=!0;for(var e=c.length;e;){for(l=c,c=[];++u<e;)l&&l[u].run();u=-1,e=c.length}l=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new p(t,e)),1!==c.length||h||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(void 0===t)throw"dicomParser.readTag: missing required parameter 'byteStream'";var e=256*t.readUint16()*256,i=t.readUint16();return"x"+("00000000"+(e+i).toString(16)).substr(-8)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){(function(t){function i(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===i(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===i(t)},e.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,i(1).Buffer)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(14);function a(t,e){return void 0!==t.parser?t.parser:e}var s=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.byteArrayParser=e,this.byteArray=i,this.elements=n}return n(t,[{key:"uint16",value:function(t,e){var i=this.elements[t];if(e=void 0!==e?e:0,i&&0!==i.length)return a(i,this.byteArrayParser).readUint16(this.byteArray,i.dataOffset+2*e)}},{key:"int16",value:function(t,e){var i=this.elements[t];if(e=void 0!==e?e:0,i&&0!==i.length)return a(i,this.byteArrayParser).readInt16(this.byteArray,i.dataOffset+2*e)}},{key:"uint32",value:function(t,e){var i=this.elements[t];if(e=void 0!==e?e:0,i&&0!==i.length)return a(i,this.byteArrayParser).readUint32(this.byteArray,i.dataOffset+4*e)}},{key:"int32",value:function(t,e){var i=this.elements[t];if(e=void 0!==e?e:0,i&&0!==i.length)return a(i,this.byteArrayParser).readInt32(this.byteArray,i.dataOffset+4*e)}},{key:"float",value:function(t,e){var i=this.elements[t];if(e=void 0!==e?e:0,i&&0!==i.length)return a(i,this.byteArrayParser).readFloat(this.byteArray,i.dataOffset+4*e)}},{key:"double",value:function(t,e){var i=this.elements[t];if(e=void 0!==e?e:0,i&&0!==i.length)return a(i,this.byteArrayParser).readDouble(this.byteArray,i.dataOffset+8*e)}},{key:"numStringValues",value:function(t){var e=this.elements[t];if(e&&e.length>0){var i=(0,r.readFixedString)(this.byteArray,e.dataOffset,e.length).match(/\\/g);return null===i?1:i.length+1}}},{key:"string",value:function(t,e){var i=this.elements[t];if(i&&i.length>0){var n=(0,r.readFixedString)(this.byteArray,i.dataOffset,i.length);return e>=0?n.split("\\")[e].trim():n.trim()}}},{key:"text",value:function(t,e){var i=this.elements[t];if(i&&i.length>0){var n=(0,r.readFixedString)(this.byteArray,i.dataOffset,i.length);return e>=0?n.split("\\")[e].replace(/ +$/,""):n.replace(/ +$/,"")}}},{key:"floatString",value:function(t,e){var i=this.elements[t];if(i&&i.length>0){e=void 0!==e?e:0;var n=this.string(t,e);if(void 0!==n)return parseFloat(n)}}},{key:"intString",value:function(t,e){var i=this.elements[t];if(i&&i.length>0){e=void 0!==e?e:0;var n=this.string(t,e);if(void 0!==n)return parseInt(n)}}},{key:"attributeTag",value:function(t){var e=this.elements[t];if(e&&4===e.length){var i=a(e,this.byteArrayParser).readUint16,n=this.byteArray,r=e.dataOffset;return"x"+("00000000"+(256*i(n,r)*256+i(n,r+2)).toString(16)).substr(-8)}}}]),t}();e.default=s},function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)r(i,n)&&(t[n]=i[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var a={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var a=0;a<n;a++)t[r+a]=e[i+a]},flattenChunks:function(t){var e,i,n,r,a,s;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(s=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)a=t[e],s.set(a,r),r+=a.length;return s}},s={arraySet:function(t,e,i,n,r){for(var a=0;a<n;a++)t[r+a]=e[i+a]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,a)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},function(t,e,i){var n=i(1),r=n.Buffer;function a(t,e){for(var i in t)e[i]=t[i]}function s(t,e,i){return r(t,e,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(a(n,e),e.Buffer=s),a(r,s),s.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,i)},s.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=r(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,i){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,s,o=arguments.length;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,i)});case 3:return e.nextTick(function(){t.call(null,i,n)});case 4:return e.nextTick(function(){t.call(null,i,n,r)});default:for(a=new Array(o-1),s=0;s<a.length;)a[s++]=arguments[s];return e.nextTick(function(){t.apply(null,a)})}}}:t.exports=e}).call(this,i(3))},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,i,n){if(void 0!==t&&e instanceof t)return e.slice(i,i+n);if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset+i,n);throw"dicomParser.from: unknown type for byteArray"}}).call(this,i(1).Buffer)},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(11),s=(n=a)&&n.__esModule?n:{default:n},o=i(14),l=function(){function e(i,n,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===i)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===n)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(n instanceof Uint8Array==0&&n instanceof t==0)throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(r<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(r>=n.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=i,this.byteArray=n,this.position=r||0,this.warnings=[]}return r(e,[{key:"seek",value:function(t){if(this.position+t<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=t}},{key:"readByteStream",value:function(t){if(this.position+t>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var i=(0,s.default)(this.byteArray,this.position,t);return this.position+=t,new e(this.byteArrayParser,i)}},{key:"readUint16",value:function(){var t=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,t}},{key:"readUint32",value:function(){var t=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,t}},{key:"readFixedString",value:function(t){var e=(0,o.readFixedString)(this.byteArray,this.position,t);return this.position+=t,e}}]),e}();e.default=l}).call(this,i(1).Buffer)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(void 0===t)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var e={tag:(0,a.default)(t),length:t.readUint32(),dataOffset:t.position};if("xfffee000"!==e.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset "+t.position;return e};var n,r=i(4),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readFixedString=function(t,e,i){if(i<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(e+i>t.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var n,r="",a=0;a<i;a++){if(0===(n=t[e+a]))return e+=i,r;r+=String.fromCharCode(n)}return r}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0===t)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var l={tag:(0,s.default)(t),vr:t.readFixedString(2)};return 2===c(l.vr)?(l.length=t.readUint16(),l.dataOffset=t.position):(t.seek(2),l.length=t.readUint32(),l.dataOffset=t.position),4294967295===l.length&&(l.hadUndefinedLength=!0),l.tag===i?l:"SQ"===l.vr?((0,o.default)(t,l,e),l):4294967295===l.length?"x7fe00010"===l.tag?((0,n.default)(t,l,e),l):"UN"===l.vr?((0,r.default)(t,l),l):((0,a.default)(t,l),l):(t.seek(l.length),l)};var n=l(i(42)),r=l(i(41)),a=l(i(24)),s=l(i(4)),o=l(i(40));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){return"OB"===t||"OW"===t||"SQ"===t||"OF"===t||"UT"===t||"UN"===t?4:2}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseDicomDataSetExplicit=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(i=void 0===i?e.byteArray.length:i,void 0===e)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(i<e.position||i>e.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var a=t.elements;e.position<i;){var s=(0,n.default)(e,t.warnings,r.untilTag);if(a[s.tag]=s,s.tag===r.untilTag)return}if(e.position>i)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"},e.parseDicomDataSetImplicit=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(i=void 0===i?t.byteArray.length:i,void 0===e)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(i<e.position||i>e.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var a=t.elements;e.position<i;){var s=(0,r.default)(e,n.untilTag,n.vrCallback);if(a[s.tag]=s,s.tag===n.untilTag)return}};var n=a(i(15)),r=a(i(23));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,o,c){if(o=o||1,c=c||e.fragments,void 0===t)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===e)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===i)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===o)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==e.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(!0!==e.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==e.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(e.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(i<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(i>=e.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(o<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(i+o>e.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var h=new r.default(t.byteArrayParser,t.byteArray,e.dataOffset),u=(0,a.default)(h);if("xfffee000"!==u.tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";h.seek(u.length);var d=h.position;if(1===o)return(0,s.default)(h.byteArray,d+c[i].offset+8,c[i].length);for(var f=l(c,i,o),p=(0,n.default)(h.byteArray,f),m=0,g=i;g<i+o;g++)for(var _=d+c[g].offset+8,y=0;y<c[g].length;y++)p[m++]=h.byteArray[_++];return p};var n=o(i(22)),r=o(i(12)),a=o(i(13)),s=o(i(11));function o(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e,i){for(var n=0,r=e;r<e+i;r++)n+=t[r].length;return n}},function(t,e,i){"use strict";(function(e,n,r){var a=i(10);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var n=t.entry;for(t.entry=null;n;){var r=n.callback;e.pendingcb--,r(void 0),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var o,l=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:a.nextTick;y.WritableState=_;var c=i(6);c.inherits=i(5);var h,u={deprecate:i(61)},d=i(34),f=i(9).Buffer,p=r.Uint8Array||function(){},m=i(33);function g(){}function _(t,e){o=o||i(2),t=t||{};var n=e instanceof o;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,c=t.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(c||0===c)?c:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===t.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,n=i.sync,r=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,n,r){--e.pendingcb,i?(a.nextTick(r,n),a.nextTick(M,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(r(n),t._writableState.errorEmitted=!0,t.emit("error",n),M(t,e))}(t,i,n,e,r);else{var s=x(i);s||i.corked||i.bufferProcessing||!i.bufferedRequest||w(t,i),n?l(v,t,i,s,r):v(t,i,s,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function y(t){if(o=o||i(2),!(h.call(y,this)||this instanceof o))return new y(t);this._writableState=new _(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function b(t,e,i,n,r,a,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,i?t._writev(r,e.onwrite):t._write(r,a,e.onwrite),e.sync=!1}function v(t,e,i,n){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),M(t,e)}function w(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,r=new Array(n),a=e.corkedRequestsFree;a.entry=i;for(var o=0,l=!0;i;)r[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;r.allBuffers=l,b(t,e,!0,e.length,r,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,h=i.encoding,u=i.callback;if(b(t,e,!1,e.objectMode?1:c.length,c,h,u),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function A(t,e){t._final(function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),M(t,e)})}function M(t,e){var i=x(e);return i&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,a.nextTick(A,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}c.inherits(y,d),_.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(_.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!h.call(this,t)||this===y&&t&&t._writableState instanceof _}})):h=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,i){var n,r=this._writableState,s=!1,o=!r.objectMode&&(n=t,f.isBuffer(n)||n instanceof p);return o&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(i=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof i&&(i=g),r.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),a.nextTick(e,i)}(this,i):(o||function(t,e,i,n){var r=!0,s=!1;return null===i?s=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),a.nextTick(n,s),r=!1),r}(this,r,t,i))&&(r.pendingcb++,s=function(t,e,i,n,r,a){if(!i){var s=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,i)),e}(e,n,r);n!==s&&(i=!0,r="buffer",n=s)}var o=e.objectMode?1:n.length;e.length+=o;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:r,isBuf:i,callback:a,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,o,n,r,a);return l}(this,r,o,t,e,i)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||w(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},y.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,i){var n=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,i){e.ending=!0,M(t,e),i&&(e.finished?a.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}(this,n,i)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,i(3),i(63).setImmediate,i(0))},function(t,e,i){(e=t.exports=i(35)).Stream=e,e.Readable=e,e.Writable=i(18),e.Duplex=i(2),e.Transform=i(31),e.PassThrough=i(60)},function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,s,o,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(a(i=this._events[t]))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(r(i))for(o=Array.prototype.slice.call(arguments,1),s=(c=i.slice()).length,l=0;l<s;l++)c[l].apply(this,o);return!0},i.prototype.addListener=function(t,e){var s;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(s=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){if(!n(e))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},i.prototype.removeListener=function(t,e){var i,a,s,o;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(i=this._events[t]).length,a=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(i)){for(o=s;o-- >0;)if(i[o]===e||i[o].listener&&i[o].listener===e){a=o;break}if(a<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n(i=this._events[t]))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={readUint16:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(e+2>t.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return t[e]+256*t[e+1]},readInt16:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(e+2>t.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";var i=t[e]+(t[e+1]<<8);return 32768&i&&(i=i-65535-1),i},readUint32:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(e+4>t.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return t[e]+256*t[e+1]+256*t[e+2]*256+256*t[e+3]*256*256},readInt32:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(e+4>t.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)},readFloat:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(e+4>t.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var i=new Uint8Array(4);return i[0]=t[e],i[1]=t[e+1],i[2]=t[e+2],i[3]=t[e+3],new Float32Array(i.buffer)[0]},readDouble:function(t,e){if(e<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(e+8>t.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var i=new Uint8Array(8);return i[0]=t[e],i[1]=t[e+1],i[2]=t[e+2],i[3]=t[e+3],i[4]=t[e+4],i[5]=t[e+5],i[6]=t[e+6],i[7]=t[e+7],new Float64Array(i.buffer)[0]}}},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,i){if(void 0!==t&&e instanceof t)return t.alloc(i);if(e instanceof Uint8Array)return new Uint8Array(i);throw"dicomParser.alloc: unknown type for byteArray"}}).call(this,i(1).Buffer)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0===t)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var s={tag:(0,a.default)(t),length:t.readUint32(),dataOffset:t.position};return 4294967295===s.length&&(s.hadUndefinedLength=!0),s.tag===e?s:o(s,t,i)?((0,r.default)(t,s),s):s.hadUndefinedLength?((0,n.default)(t,s),s):(t.seek(s.length),s)};var n=s(i(24)),r=s(i(39)),a=s(i(4));function s(t){return t&&t.__esModule?t:{default:t}}var o=function(t,e,i){if(void 0!==i)return"SQ"===i(t.tag);if(e.position+4<=e.byteArray.length){var n=(0,a.default)(e);return e.seek(-4),"xfffee000"===n||"xfffee0dd"===n}return e.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(void 0===t)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var i=t.byteArray.length-8;t.position<=i;){var n=t.readUint16();if(65534===n){var r=t.readUint16();if(57357===r){var a=t.readUint32();return 0!==a&&t.warnings("encountered non zero length following item delimiter at position "+(t.position-4)+" while reading element of undefined length with tag "+e.tag),void(e.length=t.position-e.dataOffset)}}}e.length=t.byteArray.length-e.dataOffset,t.seek(t.byteArray.length-t.position)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0};e.isStringVr=function(t){return n[t]},e.isPrivateTag=function(t){return parseInt(t[4],10)%2==1},e.parsePN=function(t){if(void 0!==t){var e=t.split("^");return{familyName:e[0],givenName:e[1],middleName:e[2],prefix:e[3],suffix:e[4]}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i,n,r){if(n=n||e.basicOffsetTable,r=r||e.fragments,void 0===t)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===e)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===i)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===n)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==e.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==e.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==e.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===e.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===n.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(i<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(i>=n.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var l=n[i],c=s(r,l);if(void 0===c)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";var h=o(i,n,r,c);return(0,a.default)(t,e,c,h,r)};var n,r=i(17),a=(n=r)&&n.__esModule?n:{default:n},s=function(t,e){for(var i=0;i<t.length;i++)if(t[i].offset===e)return i},o=function(t,e,i,n){if(t===e.length-1)return i.length-n;for(var r=e[t+1],a=n+1;a<i.length;a++)if(i[a].offset===r)return a-n;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"}},function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();t.exports=function(t,e,i,r){var a=n,s=r+i;t^=-1;for(var o=r;o<s;o++)t=t>>>8^a[255&(t^e[o])];return-1^t}},function(t,e,i){"use strict";t.exports=function(t,e,i,n){for(var r=65535&t|0,a=t>>>16&65535|0,s=0;0!==i;){i-=s=i>2e3?2e3:i;do{a=a+(r=r+e[n++]|0)|0}while(--s);r%=65521,a%=65521}return r|a<<16|0}},function(t,e,i){(function(t,n){var r=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(o(arguments[i]));return e.join(" ")}i=1;for(var n=arguments,a=n.length,s=String(t).replace(r,function(t){if("%%"===t)return"%";if(i>=a)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}}),l=n[i];i<a;l=n[++i])m(l)||!v(l)?s+=" "+l:s+=" "+o(l);return s},e.deprecate=function(i,r){if(y(t.process))return function(){return e.deprecate(i,r).apply(this,arguments)};if(!0===n.noDeprecation)return i;var a=!1;return function(){if(!a){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),a=!0}return i.apply(this,arguments)}};var a,s={};function o(t,i){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(i)?n.showHidden=i:i&&e._extend(n,i),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),h(n,t,n.depth)}function l(t,e){var i=o.styles[e];return i?"["+o.colors[i][0]+"m"+t+"["+o.colors[i][1]+"m":t}function c(t,e){return t}function h(t,i,n){if(t.customInspect&&i&&A(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,t);return _(r)||(r=h(t,r,n)),r}var a=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(_(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return g(e)?t.stylize(""+e,"number"):p(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}(t,i);if(a)return a;var s=Object.keys(i),o=function(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(i)),x(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(i);if(0===s.length){if(A(i)){var l=i.name?": "+i.name:"";return t.stylize("[Function"+l+"]","special")}if(b(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(w(i))return t.stylize(Date.prototype.toString.call(i),"date");if(x(i))return u(i)}var c,v="",M=!1,S=["{","}"];return f(i)&&(M=!0,S=["[","]"]),A(i)&&(v=" [Function"+(i.name?": "+i.name:"")+"]"),b(i)&&(v=" "+RegExp.prototype.toString.call(i)),w(i)&&(v=" "+Date.prototype.toUTCString.call(i)),x(i)&&(v=" "+u(i)),0!==s.length||M&&0!=i.length?n<0?b(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),c=M?function(t,e,i,n,r){for(var a=[],s=0,o=e.length;s<o;++s)T(e,String(s))?a.push(d(t,e,i,n,String(s),!0)):a.push("");return r.forEach(function(r){r.match(/^\d+$/)||a.push(d(t,e,i,n,r,!0))}),a}(t,i,n,o,s):s.map(function(e){return d(t,i,n,o,e,M)}),t.seen.pop(),function(t,e,i){return t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(c,v,S)):S[0]+v+S[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,i,n,r,a){var s,o,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?o=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(o=t.stylize("[Setter]","special")),T(n,r)||(s="["+r+"]"),o||(t.seen.indexOf(l.value)<0?(o=m(i)?h(t,l.value,null):h(t,l.value,i-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+o.split("\n").map(function(t){return"   "+t}).join("\n")):o=t.stylize("[Circular]","special")),y(s)){if(a&&r.match(/^\d+$/))return o;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+o}function f(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function m(t){return null===t}function g(t){return"number"==typeof t}function _(t){return"string"==typeof t}function y(t){return void 0===t}function b(t){return v(t)&&"[object RegExp]"===M(t)}function v(t){return"object"==typeof t&&null!==t}function w(t){return v(t)&&"[object Date]"===M(t)}function x(t){return v(t)&&("[object Error]"===M(t)||t instanceof Error)}function A(t){return"function"==typeof t}function M(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(y(a)&&(a=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(a)){var i=n.pid;s[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else s[t]=function(){};return s[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=p,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=_,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=b,e.isObject=v,e.isDate=w,e.isError=x,e.isFunction=A,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(54);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,i;console.log("%s - %s",(t=new Date,i=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":"),[t.getDate(),E[t.getMonth()],i].join(" ")),e.format.apply(e,arguments))},e.inherits=i(53),e._extend=function(t,e){if(!e||!v(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}).call(this,i(0),i(3))},function(t,e,i){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function n(t,e){if(t===e)return 0;for(var i=t.length,n=e.length,r=0,a=Math.min(i,n);r<a;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0}function r(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=i(29),s=Object.prototype.hasOwnProperty,o=Array.prototype.slice,l="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function h(t){return!r(t)&&"function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var u=t.exports=_,d=/\s*function\s+([^\(\s]*)\s*/;function f(t){if(a.isFunction(t)){if(l)return t.name;var e=t.toString().match(d);return e&&e[1]}}function p(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(l||!a.isFunction(t))return a.inspect(t);var e=f(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,i,n,r){throw new u.AssertionError({message:i,actual:t,expected:e,operator:n,stackStartFunction:r})}function _(t,e){t||g(t,!0,e,"==",u.ok)}function y(t,e,i,s){if(t===e)return!0;if(r(t)&&r(e))return 0===n(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(h(t)&&h(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===n(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(r(t)!==r(e))return!1;var l=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==l&&l===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),function(t,e,i,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(i&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=b(t),s=b(e);if(r&&!s||!r&&s)return!1;if(r)return t=o.call(t),e=o.call(e),y(t,e,i);var l,c,h=x(t),u=x(e);if(h.length!==u.length)return!1;for(h.sort(),u.sort(),c=h.length-1;c>=0;c--)if(h[c]!==u[c])return!1;for(c=h.length-1;c>=0;c--)if(l=h[c],!y(t[l],e[l],i,n))return!1;return!0}(t,e,i,s))}return i?t===e:t==e}function b(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function w(t,e,i,n){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(n=i,i=null),r=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(i&&i.name?" ("+i.name+").":".")+(n?" "+n:"."),t&&!r&&g(r,i,"Missing expected exception"+n);var s="string"==typeof n,o=!t&&a.isError(r),l=!t&&r&&!i;if((o&&s&&v(r,i)||l)&&g(r,i,"Got unwanted exception"+n),t&&r&&i&&!v(r,i)||!t&&r)throw r}u.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=p(m((e=this).actual),128)+" "+e.operator+" "+p(m(e.expected),128),this.generatedMessage=!0);var i=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,i);else{var n=new Error;if(n.stack){var r=n.stack,a=f(i),s=r.indexOf("\n"+a);if(s>=0){var o=r.indexOf("\n",s+1);r=r.substring(o+1)}this.stack=r}}},a.inherits(u.AssertionError,Error),u.fail=g,u.ok=_,u.equal=function(t,e,i){t!=e&&g(t,e,i,"==",u.equal)},u.notEqual=function(t,e,i){t==e&&g(t,e,i,"!=",u.notEqual)},u.deepEqual=function(t,e,i){y(t,e,!1)||g(t,e,i,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(t,e,i){y(t,e,!0)||g(t,e,i,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(t,e,i){y(t,e,!1)&&g(t,e,i,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function t(e,i,n){y(e,i,!0)&&g(e,i,n,"notDeepStrictEqual",t)},u.strictEqual=function(t,e,i){t!==e&&g(t,e,i,"===",u.strictEqual)},u.notStrictEqual=function(t,e,i){t===e&&g(t,e,i,"!==",u.notStrictEqual)},u.throws=function(t,e,i){w(!0,t,e,i)},u.doesNotThrow=function(t,e,i){w(!1,t,e,i)},u.ifError=function(t){if(t)throw t};var x=Object.keys||function(t){var e=[];for(var i in t)s.call(t,i)&&e.push(i);return e}}).call(this,i(0))},function(t,e,i){"use strict";t.exports=a;var n=i(2),r=i(6);function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState={afterTransform:function(t,e){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush(function(e,i){o(t,e,i)}):o(this,null,null)}function o(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}r.inherits=i(5),r.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var i=this;n.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},function(t,e,i){"use strict";var n=i(9).Buffer,r=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=c,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=h,this.end=u,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function o(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"�".repeat(i);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�".repeat(i+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�".repeat(i+2)}}(this,t,e);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function h(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function u(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�".repeat(this.lastTotal-this.lastNeed):e},a.prototype.text=function(t,e){var i=function(t,e,i){var n=e.length-1;if(n<i)return 0;var r=s(e[n]);return r>=0?(r>0&&(t.lastNeed=r-1),r):--n<i?0:(r=s(e[n]))>=0?(r>0&&(t.lastNeed=r-2),r):--n<i?0:(r=s(e[n]))>=0?(r>0&&(2===r?r=0:t.lastNeed=r-3),r):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var n=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,i){"use strict";var n=i(10);function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(r,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(n.nextTick(r,i,t),i._writableState&&(i._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,i){t.exports=i(20).EventEmitter},function(t,e,i){"use strict";(function(e,n){var r=i(10);t.exports=b;var a,s=i(38);b.ReadableState=y,i(20).EventEmitter;var o=function(t,e){return t.listeners(e).length},l=i(34),c=i(9).Buffer,h=e.Uint8Array||function(){},u=i(6);u.inherits=i(5);var d=i(66),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,m=i(65),g=i(33);u.inherits(b,l);var _=["error","close","destroy","pause","resume"];function y(t,e){a=a||i(2),t=t||{};var n=e instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,s=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=i(32).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(a=a||i(2),!(this instanceof b))return new b(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function v(t,e,i,n,r){var a,s=t._readableState;return null===e?(s.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,M(t)}}(t,s)):(r||(a=function(t,e){var i,n;return n=e,c.isBuffer(n)||n instanceof h||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}(s,e)),a?t.emit("error",a):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!i?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):E(t,s)):w(t,s,e,!1))):n||(s.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,i,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,n?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&M(t)),E(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=c.from(t,e),e=""),i=!0),v(this,t,e,!1,i)},b.prototype.unshift=function(t){return v(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=i(32).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var x=8388608;function A(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=x?t=x:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function M(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r.nextTick(S,t):S(t))}function S(t){f("emit readable"),t.emit("readable"),k(t)}function E(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(T,t,e))}function T(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function I(t){f("readable nexttick read 0"),t.read(0)}function C(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),k(t),e.flowing&&!e.reading&&t.read(0)}function k(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function P(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,n=1,r=i.data;for(t-=r.length;i=i.next;){var a=i.data,s=t>a.length?a.length:t;if(s===a.length?r+=a:r+=a.slice(0,t),0==(t-=s)){s===a.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=a.slice(s));break}++n}return e.length-=n,r}(t,e):function(t,e){var i=c.allocUnsafe(t),n=e.head,r=1;for(n.data.copy(i),t-=n.data.length;n=n.next;){var a=n.data,s=t>a.length?a.length:t;if(a.copy(i,i.length-t,0,s),0==(t-=s)){s===a.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=a.slice(s));break}++r}return e.length-=r,i}(t,e),n}(t,e.buffer,e.decoder),i);var i}function B(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r.nextTick(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function R(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}b.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?B(this):M(this),null;if(0===(t=A(t,e))&&e.ended)return 0===e.length&&B(this),null;var n,r=e.needReadable;return f("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",r=!0),e.ended||e.reading?f("reading or ended",r=!1):r&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=A(i,e))),null===(n=t>0?P(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&B(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var i=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,f("pipe count=%d opts=%j",a.pipesCount,e);var l=e&&!1===e.end||t===n.stdout||t===n.stderr?y:c;function c(){f("onend"),t.end()}a.endEmitted?r.nextTick(l):i.once("end",l),t.on("unpipe",function e(n,r){f("onunpipe"),n===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),t.removeListener("close",g),t.removeListener("finish",_),t.removeListener("drain",h),t.removeListener("error",m),t.removeListener("unpipe",e),i.removeListener("end",c),i.removeListener("end",y),i.removeListener("data",p),u=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||h())});var h=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,k(t))}}(i);t.on("drain",h);var u=!1,d=!1;function p(e){f("ondata"),d=!1,!1!==t.write(e)||d||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==R(a.pipes,t))&&!u&&(f("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,d=!0),i.pause())}function m(e){f("onerror",e),y(),t.removeListener("error",m),0===o(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",_),y()}function _(){f("onfinish"),t.removeListener("close",g),y()}function y(){f("unpipe"),i.unpipe(t)}return i.on("data",p),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",m),t.once("close",g),t.once("finish",_),t.emit("pipe",i),a.flowing||(f("pipe resume"),i.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<r;a++)n[a].emit("unpipe",this,i);return this}var s=R(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)},b.prototype.on=function(t,e){var i=l.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&M(this):r.nextTick(I,this))}return i},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(C,t,e))}(this,t)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,i=this._readableState,n=!1;for(var r in t.on("end",function(){if(f("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(r){f("wrapped data"),i.decoder&&(r=i.decoder.write(r)),(!i.objectMode||null!==r&&void 0!==r)&&(i.objectMode||r&&r.length)&&(e.push(r)||(n=!0,t.pause()))}),t)void 0===this[r]&&"function"==typeof t[r]&&(this[r]=function(e){return function(){return t[e].apply(t,arguments)}}(r));for(var a=0;a<_.length;a++)t.on(_[a],this.emit.bind(this,_[a]));return this._read=function(e){f("wrapped _read",e),n&&(n=!1,t.resume())},this},b._fromList=P}).call(this,i(0),i(3))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(void 0===t)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var i=new n.default(a.default,t);return function(){!function(){if(i.seek(128),"DICM"!==i.readFixedString(4))throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file."}();for(var t=[],e={};i.position<i.byteArray.length;){var n=i.position,o=(0,s.default)(i,t);if(o.tag>"x0002ffff"){i.position=n;break}o.parser=a.default,e[o.tag]=o}var l=new r.default(i.byteArrayParser,i.byteArray,e);return l.warnings=i.warnings,l.position=i.position,l}()};var n=o(i(12)),r=o(i(7)),a=o(i(21)),s=o(i(15));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={readUint16:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(e+2>t.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(t[e]<<8)+t[e+1]},readInt16:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(e+2>t.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";var i=(t[e]<<8)+t[e+1];return 32768&i&&(i=i-65535-1),i},readUint32:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(e+4>t.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*t[e]+t[e+1])+t[e+2])+t[e+3]},readInt32:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(e+4>t.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(t[e]<<24)+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3]},readFloat:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(e+4>t.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var i=new Uint8Array(4);return i[3]=t[e],i[2]=t[e+1],i[1]=t[e+2],i[0]=t[e+3],new Float32Array(i.buffer)[0]},readDouble:function(t,e){if(e<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(e+8>t.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var i=new Uint8Array(8);return i[7]=t[e],i[6]=t[e+1],i[5]=t[e+2],i[4]=t[e+3],i[3]=t[e+4],i[2]=t[e+5],i[1]=t[e+6],i[0]=t[e+7],new Float64Array(i.buffer)[0]}}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===e)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";e.items=[],4294967295===e.length?function(t,e,i){for(;t.position+4<=t.byteArray.length;){var n=(0,s.default)(t);if(t.seek(-4),"xfffee0dd"===n)return e.length=t.position-e.dataOffset,t.seek(8),e;var r=c(t,i);e.items.push(r)}t.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),e.length=t.byteArray.length-e.dataOffset}(t,e,i):function(t,e,i){for(var n=e.dataOffset+e.length;t.position<n;){var r=c(t,i);e.items.push(r)}}(t,e,i)};var n=l(i(7)),r=l(i(23)),a=l(i(13)),s=l(i(4)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(16));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var i=(0,a.default)(t);return 4294967295===i.length?(i.hadUndefinedLength=!0,i.dataSet=function(t,e){for(var i={};t.position<t.byteArray.length;){var a=(0,r.default)(t,void 0,e);if(i[a.tag]=a,"xfffee00d"===a.tag)return new n.default(t.byteArrayParser,t.byteArray,i)}return t.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new n.default(t.byteArrayParser,t.byteArray,i)}(t,e),i.length=t.position-i.dataOffset):(i.dataSet=new n.default(t.byteArrayParser,t.byteArray,{}),o.parseDicomDataSetImplicit(i.dataSet,t,t.position+i.length,{vrCallback:e})),i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===e)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";e.items=[],4294967295===e.length?function(t,e,i){for(;t.position+4<=t.byteArray.length;){var n=(0,s.default)(t);if(t.seek(-4),"xfffee0dd"===n)return e.length=t.position-e.dataOffset,t.seek(8),e;var r=c(t,i);e.items.push(r)}i.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),e.length=t.position-e.dataOffset}(t,e,i):function(t,e,i){for(var n=e.dataOffset+e.length;t.position<n;){var r=c(t,i);e.items.push(r)}}(t,e,i)};var n=l(i(7)),r=l(i(15)),a=l(i(13)),s=l(i(4)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(16));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var i=(0,a.default)(t);return 4294967295===i.length?(i.hadUndefinedLength=!0,i.dataSet=function(t,e){for(var i={};t.position<t.byteArray.length;){var a=(0,r.default)(t,e);if(i[a.tag]=a,"xfffee00d"===a.tag)return new n.default(t.byteArrayParser,t.byteArray,i)}return e.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new n.default(t.byteArrayParser,t.byteArray,i)}(t,e),i.length=t.position-i.dataOffset):(i.dataSet=new n.default(t.byteArrayParser,t.byteArray,{}),o.parseDicomDataSetExplicit(i.dataSet,t,t.position+i.length)),i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(void 0===t)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var i=t.byteArray.length-8;t.position<=i;){var n=t.readUint16();if(65534===n){var r=t.readUint16();if(57565===r){var a=t.readUint32();return 0!==a&&t.warnings("encountered non zero length following item delimiter at position "+(t.position-4)+" while reading element of undefined length with tag "+e.tag),void(e.length=t.position-e.dataOffset)}}}e.length=t.byteArray.length-e.dataOffset,t.seek(t.byteArray.length-t.position)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0===t)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===e)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(e.encapsulatedPixelData=!0,e.basicOffsetTable=[],e.fragments=[],"xfffee000"!==(0,a.default)(t))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var n=t.readUint32()/4,r=0;r<n;r++){var s=t.readUint32();e.basicOffsetTable.push(s)}for(var o=t.position;t.position<t.byteArray.length;){var l=(0,a.default)(t),c=t.readUint32();if("xfffee0dd"===l)return t.seek(c),void(e.length=t.position-e.dataOffset);if("xfffee000"!==l)return i&&i.push("unexpected tag "+l+" while searching for end of pixel data element with undefined length"),c>t.byteArray.length-t.position&&(c=t.byteArray.length-t.position),e.fragments.push({offset:t.position-o-8,position:t.position,length:c}),t.seek(c),void(e.length=t.position-e.dataOffset);e.fragments.push({offset:t.position-o-8,position:t.position,length:c}),t.seek(c)}i&&i.push("pixel data element "+e.tag+" missing sequence delimiter tag xfffee0dd")};var n,r=i(4),a=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(void 0===t||void 0===e)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===e.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var i,r=e.vr,a=e.tag;function s(e,i){for(var n="",r=0;r<e;r++)0!==r&&(n+="/"),n+=i.call(t,a,r).toString();return n}if(!0===n.isStringVr(r))i=t.string(a);else{if("AT"===r){var o=t.uint32(a);if(void 0===o)return;return o<0&&(o=4294967295+o+1),"x"+o.toString(16).toUpperCase()}"US"===r?i=s(e.length/2,t.uint16):"SS"===r?i=s(e.length/2,t.int16):"UL"===r?i=s(e.length/4,t.uint32):"SL"===r?i=s(e.length/4,t.int32):"FD"===r?i=s(e.length/8,t.double):"FL"===r&&(i=s(e.length/4,t.float))}return i};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(25))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(s||(s=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),void 0===t)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===e)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===i)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==e.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==e.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==e.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(i<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==e.basicOffsetTable.length?(0,n.default)(t,e,i):(0,r.default)(t,e,0,e.fragments.length)};var n=a(i(26)),r=a(i(17));function a(t){return t&&t.__esModule?t:{default:t}}var s=!1},function(t,e,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,i){"use strict";var n=i(8),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,i,l,c,h,u,d){var f,p,m,g,_,y,b,v,w,x=d.bits,A=0,M=0,S=0,E=0,T=0,I=0,C=0,k=0,P=0,B=0,L=null,R=0,D=new n.Buf16(16),O=new n.Buf16(16),G=null,F=0;for(A=0;A<=15;A++)D[A]=0;for(M=0;M<l;M++)D[e[i+M]]++;for(T=x,E=15;E>=1&&0===D[E];E--);if(T>E&&(T=E),0===E)return c[h++]=20971520,c[h++]=20971520,d.bits=1,0;for(S=1;S<E&&0===D[S];S++);for(T<S&&(T=S),k=1,A=1;A<=15;A++)if(k<<=1,(k-=D[A])<0)return-1;if(k>0&&(0===t||1!==E))return-1;for(O[1]=0,A=1;A<15;A++)O[A+1]=O[A]+D[A];for(M=0;M<l;M++)0!==e[i+M]&&(u[O[e[i+M]]++]=M);if(0===t?(L=G=u,y=19):1===t?(L=r,R-=257,G=a,F-=257,y=256):(L=s,G=o,y=-1),B=0,M=0,A=S,_=h,I=T,C=0,m=-1,g=(P=1<<T)-1,1===t&&P>852||2===t&&P>592)return 1;for(;;){b=A-C,u[M]<y?(v=0,w=u[M]):u[M]>y?(v=G[F+u[M]],w=L[R+u[M]]):(v=96,w=0),f=1<<A-C,S=p=1<<I;do{c[_+(B>>C)+(p-=f)]=b<<24|v<<16|w|0}while(0!==p);for(f=1<<A-1;B&f;)f>>=1;if(0!==f?(B&=f-1,B+=f):B=0,M++,0==--D[A]){if(A===E)break;A=e[i+u[M]]}if(A>T&&(B&g)!==m){for(0===C&&(C=T),_+=S,k=1<<(I=A-C);I+C<E&&!((k-=D[I+C])<=0);)I++,k<<=1;if(P+=1<<I,1===t&&P>852||2===t&&P>592)return 1;c[m=B&g]=T<<24|I<<16|_-h|0}}return 0!==B&&(c[_+B]=A-C<<24|64<<16|0),d.bits=T,0}},function(t,e,i){"use strict";t.exports=function(t,e){var i,n,r,a,s,o,l,c,h,u,d,f,p,m,g,_,y,b,v,w,x,A,M,S,E;i=t.state,n=t.next_in,S=t.input,r=n+(t.avail_in-5),a=t.next_out,E=t.output,s=a-(e-t.avail_out),o=a+(t.avail_out-257),l=i.dmax,c=i.wsize,h=i.whave,u=i.wnext,d=i.window,f=i.hold,p=i.bits,m=i.lencode,g=i.distcode,_=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),b=m[f&_];e:for(;;){if(f>>>=v=b>>>24,p-=v,0==(v=b>>>16&255))E[a++]=65535&b;else{if(!(16&v)){if(0==(64&v)){b=m[(65535&b)+(f&(1<<v)-1)];continue e}if(32&v){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}w=65535&b,(v&=15)&&(p<v&&(f+=S[n++]<<p,p+=8),w+=f&(1<<v)-1,f>>>=v,p-=v),p<15&&(f+=S[n++]<<p,p+=8,f+=S[n++]<<p,p+=8),b=g[f&y];i:for(;;){if(f>>>=v=b>>>24,p-=v,!(16&(v=b>>>16&255))){if(0==(64&v)){b=g[(65535&b)+(f&(1<<v)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&b,p<(v&=15)&&(f+=S[n++]<<p,(p+=8)<v&&(f+=S[n++]<<p,p+=8)),(x+=f&(1<<v)-1)>l){t.msg="invalid distance too far back",i.mode=30;break t}if(f>>>=v,p-=v,x>(v=a-s)){if((v=x-v)>h&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(A=0,M=d,0===u){if(A+=c-v,v<w){w-=v;do{E[a++]=d[A++]}while(--v);A=a-x,M=E}}else if(u<v){if(A+=c+u-v,(v-=u)<w){w-=v;do{E[a++]=d[A++]}while(--v);if(A=0,u<w){w-=v=u;do{E[a++]=d[A++]}while(--v);A=a-x,M=E}}}else if(A+=u-v,v<w){w-=v;do{E[a++]=d[A++]}while(--v);A=a-x,M=E}for(;w>2;)E[a++]=M[A++],E[a++]=M[A++],E[a++]=M[A++],w-=3;w&&(E[a++]=M[A++],w>1&&(E[a++]=M[A++]))}else{A=a-x;do{E[a++]=E[A++],E[a++]=E[A++],E[a++]=E[A++],w-=3}while(w>2);w&&(E[a++]=E[A++],w>1&&(E[a++]=E[A++]))}break}}break}}while(n<r&&a<o);n-=w=p>>3,f&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=a,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=a<o?o-a+257:257-(a-o),i.hold=f,i.bits=p}},function(t,e,i){"use strict";var n=i(8),r=i(28),a=i(27),s=i(47),o=i(46),l=1,c=2,h=0,u=-2,d=1,f=12,p=30,m=852,g=592;function _(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function y(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=d,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(m),e.distcode=e.distdyn=new n.Buf32(g),e.sane=1,e.back=-1,h):u}function b(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,y(t)):u}function v(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?u:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,b(t))):u}function w(t,e){var i,r;return t?(r=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=r,r.window=null,(i=v(t,e))!==h&&(t.state=null),i):u}var x,A,M=!0;function S(t){if(M){var e;for(x=new n.Buf32(512),A=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(l,t.lens,0,288,x,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(c,t.lens,0,32,A,0,t.work,{bits:5}),M=!1}t.lencode=x,t.lenbits=9,t.distcode=A,t.distbits=5}function E(t,e,i,r){var a,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),r>=s.wsize?(n.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((a=s.wsize-s.wnext)>r&&(a=r),n.arraySet(s.window,e,i-r,a,s.wnext),(r-=a)?(n.arraySet(s.window,e,i-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}e.inflateReset=b,e.inflateReset2=v,e.inflateResetKeep=y,e.inflateInit=function(t){return w(t,15)},e.inflateInit2=w,e.inflate=function(t,e){var i,m,g,y,b,v,w,x,A,M,T,I,C,k,P,B,L,R,D,O,G,F,N,z,H=0,U=new n.Buf8(4),V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return u;(i=t.state).mode===f&&(i.mode=13),b=t.next_out,g=t.output,w=t.avail_out,y=t.next_in,m=t.input,v=t.avail_in,x=i.hold,A=i.bits,M=v,T=w,F=h;t:for(;;)switch(i.mode){case d:if(0===i.wrap){i.mode=13;break}for(;A<16;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}if(2&i.wrap&&35615===x){i.check=0,U[0]=255&x,U[1]=x>>>8&255,i.check=a(i.check,U,2,0),x=0,A=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&x)<<8)+(x>>8))%31){t.msg="incorrect header check",i.mode=p;break}if(8!=(15&x)){t.msg="unknown compression method",i.mode=p;break}if(A-=4,G=8+(15&(x>>>=4)),0===i.wbits)i.wbits=G;else if(G>i.wbits){t.msg="invalid window size",i.mode=p;break}i.dmax=1<<G,t.adler=i.check=1,i.mode=512&x?10:f,x=0,A=0;break;case 2:for(;A<16;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}if(i.flags=x,8!=(255&i.flags)){t.msg="unknown compression method",i.mode=p;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=p;break}i.head&&(i.head.text=x>>8&1),512&i.flags&&(U[0]=255&x,U[1]=x>>>8&255,i.check=a(i.check,U,2,0)),x=0,A=0,i.mode=3;case 3:for(;A<32;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}i.head&&(i.head.time=x),512&i.flags&&(U[0]=255&x,U[1]=x>>>8&255,U[2]=x>>>16&255,U[3]=x>>>24&255,i.check=a(i.check,U,4,0)),x=0,A=0,i.mode=4;case 4:for(;A<16;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}i.head&&(i.head.xflags=255&x,i.head.os=x>>8),512&i.flags&&(U[0]=255&x,U[1]=x>>>8&255,i.check=a(i.check,U,2,0)),x=0,A=0,i.mode=5;case 5:if(1024&i.flags){for(;A<16;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}i.length=x,i.head&&(i.head.extra_len=x),512&i.flags&&(U[0]=255&x,U[1]=x>>>8&255,i.check=a(i.check,U,2,0)),x=0,A=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((I=i.length)>v&&(I=v),I&&(i.head&&(G=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,m,y,I,G)),512&i.flags&&(i.check=a(i.check,m,I,y)),v-=I,y+=I,i.length-=I),i.length))break t;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===v)break t;I=0;do{G=m[y+I++],i.head&&G&&i.length<65536&&(i.head.name+=String.fromCharCode(G))}while(G&&I<v);if(512&i.flags&&(i.check=a(i.check,m,I,y)),v-=I,y+=I,G)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===v)break t;I=0;do{G=m[y+I++],i.head&&G&&i.length<65536&&(i.head.comment+=String.fromCharCode(G))}while(G&&I<v);if(512&i.flags&&(i.check=a(i.check,m,I,y)),v-=I,y+=I,G)break t}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;A<16;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}if(x!==(65535&i.check)){t.msg="header crc mismatch",i.mode=p;break}x=0,A=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=f;break;case 10:for(;A<32;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}t.adler=i.check=_(x),x=0,A=0,i.mode=11;case 11:if(0===i.havedict)return t.next_out=b,t.avail_out=w,t.next_in=y,t.avail_in=v,i.hold=x,i.bits=A,2;t.adler=i.check=1,i.mode=f;case f:if(5===e||6===e)break t;case 13:if(i.last){x>>>=7&A,A-=7&A,i.mode=27;break}for(;A<3;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}switch(i.last=1&x,A-=1,3&(x>>>=1)){case 0:i.mode=14;break;case 1:if(S(i),i.mode=20,6===e){x>>>=2,A-=2;break t}break;case 2:i.mode=17;break;case 3:t.msg="invalid block type",i.mode=p}x>>>=2,A-=2;break;case 14:for(x>>>=7&A,A-=7&A;A<32;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}if((65535&x)!=(x>>>16^65535)){t.msg="invalid stored block lengths",i.mode=p;break}if(i.length=65535&x,x=0,A=0,i.mode=15,6===e)break t;case 15:i.mode=16;case 16:if(I=i.length){if(I>v&&(I=v),I>w&&(I=w),0===I)break t;n.arraySet(g,m,y,I,b),v-=I,y+=I,w-=I,b+=I,i.length-=I;break}i.mode=f;break;case 17:for(;A<14;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}if(i.nlen=257+(31&x),x>>>=5,A-=5,i.ndist=1+(31&x),x>>>=5,A-=5,i.ncode=4+(15&x),x>>>=4,A-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=p;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;A<3;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}i.lens[V[i.have++]]=7&x,x>>>=3,A-=3}for(;i.have<19;)i.lens[V[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,N={bits:i.lenbits},F=o(0,i.lens,0,19,i.lencode,0,i.work,N),i.lenbits=N.bits,F){t.msg="invalid code lengths set",i.mode=p;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;B=(H=i.lencode[x&(1<<i.lenbits)-1])>>>16&255,L=65535&H,!((P=H>>>24)<=A);){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}if(L<16)x>>>=P,A-=P,i.lens[i.have++]=L;else{if(16===L){for(z=P+2;A<z;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}if(x>>>=P,A-=P,0===i.have){t.msg="invalid bit length repeat",i.mode=p;break}G=i.lens[i.have-1],I=3+(3&x),x>>>=2,A-=2}else if(17===L){for(z=P+3;A<z;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}A-=P,G=0,I=3+(7&(x>>>=P)),x>>>=3,A-=3}else{for(z=P+7;A<z;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}A-=P,G=0,I=11+(127&(x>>>=P)),x>>>=7,A-=7}if(i.have+I>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=p;break}for(;I--;)i.lens[i.have++]=G}}if(i.mode===p)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=p;break}if(i.lenbits=9,N={bits:i.lenbits},F=o(l,i.lens,0,i.nlen,i.lencode,0,i.work,N),i.lenbits=N.bits,F){t.msg="invalid literal/lengths set",i.mode=p;break}if(i.distbits=6,i.distcode=i.distdyn,N={bits:i.distbits},F=o(c,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,N),i.distbits=N.bits,F){t.msg="invalid distances set",i.mode=p;break}if(i.mode=20,6===e)break t;case 20:i.mode=21;case 21:if(v>=6&&w>=258){t.next_out=b,t.avail_out=w,t.next_in=y,t.avail_in=v,i.hold=x,i.bits=A,s(t,T),b=t.next_out,g=t.output,w=t.avail_out,y=t.next_in,m=t.input,v=t.avail_in,x=i.hold,A=i.bits,i.mode===f&&(i.back=-1);break}for(i.back=0;B=(H=i.lencode[x&(1<<i.lenbits)-1])>>>16&255,L=65535&H,!((P=H>>>24)<=A);){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}if(B&&0==(240&B)){for(R=P,D=B,O=L;B=(H=i.lencode[O+((x&(1<<R+D)-1)>>R)])>>>16&255,L=65535&H,!(R+(P=H>>>24)<=A);){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}x>>>=R,A-=R,i.back+=R}if(x>>>=P,A-=P,i.back+=P,i.length=L,0===B){i.mode=26;break}if(32&B){i.back=-1,i.mode=f;break}if(64&B){t.msg="invalid literal/length code",i.mode=p;break}i.extra=15&B,i.mode=22;case 22:if(i.extra){for(z=i.extra;A<z;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}i.length+=x&(1<<i.extra)-1,x>>>=i.extra,A-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;B=(H=i.distcode[x&(1<<i.distbits)-1])>>>16&255,L=65535&H,!((P=H>>>24)<=A);){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}if(0==(240&B)){for(R=P,D=B,O=L;B=(H=i.distcode[O+((x&(1<<R+D)-1)>>R)])>>>16&255,L=65535&H,!(R+(P=H>>>24)<=A);){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}x>>>=R,A-=R,i.back+=R}if(x>>>=P,A-=P,i.back+=P,64&B){t.msg="invalid distance code",i.mode=p;break}i.offset=L,i.extra=15&B,i.mode=24;case 24:if(i.extra){for(z=i.extra;A<z;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}i.offset+=x&(1<<i.extra)-1,x>>>=i.extra,A-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=p;break}i.mode=25;case 25:if(0===w)break t;if(I=T-w,i.offset>I){if((I=i.offset-I)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=p;break}I>i.wnext?(I-=i.wnext,C=i.wsize-I):C=i.wnext-I,I>i.length&&(I=i.length),k=i.window}else k=g,C=b-i.offset,I=i.length;I>w&&(I=w),w-=I,i.length-=I;do{g[b++]=k[C++]}while(--I);0===i.length&&(i.mode=21);break;case 26:if(0===w)break t;g[b++]=i.length,w--,i.mode=21;break;case 27:if(i.wrap){for(;A<32;){if(0===v)break t;v--,x|=m[y++]<<A,A+=8}if(T-=w,t.total_out+=T,i.total+=T,T&&(t.adler=i.check=i.flags?a(i.check,g,T,b-T):r(i.check,g,T,b-T)),T=w,(i.flags?x:_(x))!==i.check){t.msg="incorrect data check",i.mode=p;break}x=0,A=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;A<32;){if(0===v)break t;v--,x+=m[y++]<<A,A+=8}if(x!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=p;break}x=0,A=0}i.mode=29;case 29:F=1;break t;case p:F=-3;break t;case 31:return-4;case 32:default:return u}return t.next_out=b,t.avail_out=w,t.next_in=y,t.avail_in=v,i.hold=x,i.bits=A,(i.wsize||T!==t.avail_out&&i.mode<p&&(i.mode<27||4!==e))&&E(t,t.output,t.next_out,T-t.avail_out)?(i.mode=31,-4):(M-=t.avail_in,T-=t.avail_out,t.total_in+=M,t.total_out+=T,i.total+=T,i.wrap&&T&&(t.adler=i.check=i.flags?a(i.check,g,T,t.next_out-T):r(i.check,g,T,t.next_out-T)),t.data_type=i.bits+(i.last?64:0)+(i.mode===f?128:0)+(20===i.mode||15===i.mode?256:0),(0===M&&0===T||4===e)&&F===h&&(F=-5),F)},e.inflateEnd=function(t){if(!t||!t.state)return u;var e=t.state;return e.window&&(e.window=null),t.state=null,h},e.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?u:(i.head=e,e.done=!1,h):u},e.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&11!==i.mode?u:11===i.mode&&r(1,e,n,0)!==i.check?-3:E(t,e,n,n)?(i.mode=31,-4):(i.havedict=1,h):u},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,i){"use strict";var n=i(8);function r(t){for(var e=t.length;--e>=0;)t[e]=0}var a=0,s=256,o=s+1+29,l=30,c=19,h=2*o+1,u=15,d=16,f=256,p=16,m=17,g=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],w=new Array(2*(o+2));r(w);var x=new Array(2*l);r(x);var A=new Array(512);r(A);var M=new Array(256);r(M);var S=new Array(29);r(S);var E,T,I,C=new Array(l);function k(t,e,i,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function P(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function B(t){return t<256?A[t]:A[256+(t>>>7)]}function L(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function R(t,e,i){t.bi_valid>d-i?(t.bi_buf|=e<<t.bi_valid&65535,L(t,t.bi_buf),t.bi_buf=e>>d-t.bi_valid,t.bi_valid+=i-d):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)}function D(t,e,i){R(t,i[2*e],i[2*e+1])}function O(t,e){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1}function G(t,e,i){var n,r,a=new Array(u+1),s=0;for(n=1;n<=u;n++)a[n]=s=s+i[n-1]<<1;for(r=0;r<=e;r++){var o=t[2*r+1];0!==o&&(t[2*r]=O(a[o]++,o))}}function F(t){var e;for(e=0;e<o;e++)t.dyn_ltree[2*e]=0;for(e=0;e<l;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*f]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function N(t){t.bi_valid>8?L(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function z(t,e,i,n){var r=2*e,a=2*i;return t[r]<t[a]||t[r]===t[a]&&n[e]<=n[i]}function H(t,e,i){for(var n=t.heap[i],r=i<<1;r<=t.heap_len&&(r<t.heap_len&&z(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!z(e,n,t.heap[r],t.depth));)t.heap[i]=t.heap[r],i=r,r<<=1;t.heap[i]=n}function U(t,e,i){var n,r,a,o,l=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],r=t.pending_buf[t.l_buf+l],l++,0===n?D(t,r,e):(D(t,(a=M[r])+s+1,e),0!==(o=_[a])&&R(t,r-=S[a],o),D(t,a=B(--n),i),0!==(o=y[a])&&R(t,n-=C[a],o))}while(l<t.last_lit);D(t,f,e)}function V(t,e){var i,n,r,a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=h,i=0;i<l;i++)0!==a[2*i]?(t.heap[++t.heap_len]=c=i,t.depth[i]=0):a[2*i+1]=0;for(;t.heap_len<2;)a[2*(r=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[r]=0,t.opt_len--,o&&(t.static_len-=s[2*r+1]);for(e.max_code=c,i=t.heap_len>>1;i>=1;i--)H(t,a,i);r=l;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=n,a[2*r]=a[2*i]+a[2*n],t.depth[r]=(t.depth[i]>=t.depth[n]?t.depth[i]:t.depth[n])+1,a[2*i+1]=a[2*n+1]=r,t.heap[1]=r++,H(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var i,n,r,a,s,o,l=e.dyn_tree,c=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,m=e.stat_desc.extra_base,g=e.stat_desc.max_length,_=0;for(a=0;a<=u;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<h;i++)(a=l[2*l[2*(n=t.heap[i])+1]+1]+1)>g&&(a=g,_++),l[2*n+1]=a,n>c||(t.bl_count[a]++,s=0,n>=m&&(s=p[n-m]),o=l[2*n],t.opt_len+=o*(a+s),f&&(t.static_len+=o*(d[2*n+1]+s)));if(0!==_){do{for(a=g-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[g]--,_-=2}while(_>0);for(a=g;0!==a;a--)for(n=t.bl_count[a];0!==n;)(r=t.heap[--i])>c||(l[2*r+1]!==a&&(t.opt_len+=(a-l[2*r+1])*l[2*r],l[2*r+1]=a),n--)}}(t,e),G(a,c,t.bl_count)}function W(t,e,i){var n,r,a=-1,s=e[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)r=s,s=e[2*(n+1)+1],++o<l&&r===s||(o<c?t.bl_tree[2*r]+=o:0!==r?(r!==a&&t.bl_tree[2*r]++,t.bl_tree[2*p]++):o<=10?t.bl_tree[2*m]++:t.bl_tree[2*g]++,o=0,a=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4))}function j(t,e,i){var n,r,a=-1,s=e[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=i;n++)if(r=s,s=e[2*(n+1)+1],!(++o<l&&r===s)){if(o<c)do{D(t,r,t.bl_tree)}while(0!=--o);else 0!==r?(r!==a&&(D(t,r,t.bl_tree),o--),D(t,p,t.bl_tree),R(t,o-3,2)):o<=10?(D(t,m,t.bl_tree),R(t,o-3,3)):(D(t,g,t.bl_tree),R(t,o-11,7));o=0,a=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4)}}r(C);var Z=!1;function Y(t,e,i,r){R(t,(a<<1)+(r?1:0),3),function(t,e,i,r){N(t),L(t,i),L(t,~i),n.arraySet(t.pending_buf,t.window,e,i,t.pending),t.pending+=i}(t,e,i)}e._tr_init=function(t){Z||(function(){var t,e,i,n,r,a=new Array(u+1);for(i=0,n=0;n<28;n++)for(S[n]=i,t=0;t<1<<_[n];t++)M[i++]=n;for(M[i-1]=n,r=0,n=0;n<16;n++)for(C[n]=r,t=0;t<1<<y[n];t++)A[r++]=n;for(r>>=7;n<l;n++)for(C[n]=r<<7,t=0;t<1<<y[n]-7;t++)A[256+r++]=n;for(e=0;e<=u;e++)a[e]=0;for(t=0;t<=143;)w[2*t+1]=8,t++,a[8]++;for(;t<=255;)w[2*t+1]=9,t++,a[9]++;for(;t<=279;)w[2*t+1]=7,t++,a[7]++;for(;t<=287;)w[2*t+1]=8,t++,a[8]++;for(G(w,o+1,a),t=0;t<l;t++)x[2*t+1]=5,x[2*t]=O(t,5);E=new k(w,_,s+1,o,u),T=new k(x,y,0,l,u),I=new k(new Array(0),b,0,c,7)}(),Z=!0),t.l_desc=new P(t.dyn_ltree,E),t.d_desc=new P(t.dyn_dtree,T),t.bl_desc=new P(t.bl_tree,I),t.bi_buf=0,t.bi_valid=0,F(t)},e._tr_stored_block=Y,e._tr_flush_block=function(t,e,i,n){var r,a,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<s;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),V(t,t.l_desc),V(t,t.d_desc),o=function(t){var e;for(W(t,t.dyn_ltree,t.l_desc.max_code),W(t,t.dyn_dtree,t.d_desc.max_code),V(t,t.bl_desc),e=c-1;e>=3&&0===t.bl_tree[2*v[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=r&&(r=a)):r=a=i+5,i+4<=r&&-1!==e?Y(t,e,i,n):4===t.strategy||a===r?(R(t,2+(n?1:0),3),U(t,w,x)):(R(t,4+(n?1:0),3),function(t,e,i,n){var r;for(R(t,e-257,5),R(t,i-1,5),R(t,n-4,4),r=0;r<n;r++)R(t,t.bl_tree[2*v[r]+1],3);j(t,t.dyn_ltree,e-1),j(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),U(t,t.dyn_ltree,t.dyn_dtree)),F(t),n&&N(t)},e._tr_tally=function(t,e,i){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&i,t.last_lit++,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(M[i]+s+1)]++,t.dyn_dtree[2*B(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){R(t,2,3),D(t,f,w),function(t){16===t.bi_valid?(L(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,i){"use strict";var n,r=i(8),a=i(50),s=i(28),o=i(27),l=i(49),c=0,h=4,u=0,d=-2,f=-1,p=1,m=4,g=2,_=8,y=9,b=286,v=30,w=19,x=2*b+1,A=15,M=3,S=258,E=S+M+1,T=42,I=103,C=113,k=666,P=1,B=2,L=3,R=4;function D(t,e){return t.msg=l[e],e}function O(t){return(t<<1)-(t>4?9:0)}function G(t){for(var e=t.length;--e>=0;)t[e]=0}function F(t){var e=t.state,i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(r.arraySet(t.output,e.pending_buf,e.pending_out,i,t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))}function N(t,e){a._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,F(t.strm)}function z(t,e){t.pending_buf[t.pending++]=e}function H(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function U(t,e){var i,n,r=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-E?t.strstart-(t.w_size-E):0,c=t.window,h=t.w_mask,u=t.prev,d=t.strstart+S,f=c[a+s-1],p=c[a+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(c[(i=e)+s]===p&&c[i+s-1]===f&&c[i]===c[a]&&c[++i]===c[a+1]){a+=2,i++;do{}while(c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&c[++a]===c[++i]&&a<d);if(n=S-(d-a),a=d-S,n>s){if(t.match_start=e,s=n,n>=o)break;f=c[a+s-1],p=c[a+s]}}}while((e=u[e&h])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function V(t){var e,i,n,a,l,c,h,u,d,f,p=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-E)){r.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=i=t.hash_size;do{n=t.head[--e],t.head[e]=n>=p?n-p:0}while(--i);e=i=p;do{n=t.prev[--e],t.prev[e]=n>=p?n-p:0}while(--i);a+=p}if(0===t.strm.avail_in)break;if(c=t.strm,h=t.window,u=t.strstart+t.lookahead,d=a,f=void 0,(f=c.avail_in)>d&&(f=d),i=0===f?0:(c.avail_in-=f,r.arraySet(h,c.input,c.next_in,f,u),1===c.state.wrap?c.adler=s(c.adler,h,f,u):2===c.state.wrap&&(c.adler=o(c.adler,h,f,u)),c.next_in+=f,c.total_in+=f,f),t.lookahead+=i,t.lookahead+t.insert>=M)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+M-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<M)););}while(t.lookahead<E&&0!==t.strm.avail_in)}function W(t,e){for(var i,n;;){if(t.lookahead<E){if(V(t),t.lookahead<E&&e===c)return P;if(0===t.lookahead)break}if(i=0,t.lookahead>=M&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+M-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-E&&(t.match_length=U(t,i)),t.match_length>=M)if(n=a._tr_tally(t,t.strstart-t.match_start,t.match_length-M),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=M){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+M-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(N(t,!1),0===t.strm.avail_out))return P}return t.insert=t.strstart<M-1?t.strstart:M-1,e===h?(N(t,!0),0===t.strm.avail_out?L:R):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?P:B}function j(t,e){for(var i,n,r;;){if(t.lookahead<E){if(V(t),t.lookahead<E&&e===c)return P;if(0===t.lookahead)break}if(i=0,t.lookahead>=M&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+M-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=M-1,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-E&&(t.match_length=U(t,i),t.match_length<=5&&(t.strategy===p||t.match_length===M&&t.strstart-t.match_start>4096)&&(t.match_length=M-1)),t.prev_length>=M&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-M,n=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-M),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+M-1])&t.hash_mask,i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=M-1,t.strstart++,n&&(N(t,!1),0===t.strm.avail_out))return P}else if(t.match_available){if((n=a._tr_tally(t,0,t.window[t.strstart-1]))&&N(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return P}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<M-1?t.strstart:M-1,e===h?(N(t,!0),0===t.strm.avail_out?L:R):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?P:B}function Z(t,e,i,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=r}function Y(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=g,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?T:C,t.adler=2===e.wrap?0:1,e.last_flush=c,a._tr_init(e),u):D(t,d)}function X(t){var e,i=Y(t);return i===u&&((e=t.state).window_size=2*e.w_size,G(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=M-1,e.match_available=0,e.ins_h=0),i}function J(t,e,i,n,a,s){if(!t)return d;var o=1;if(e===f&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),a<1||a>y||i!==_||n<8||n>15||e<0||e>9||s<0||s>m)return D(t,d);8===n&&(n=9);var l=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*x),this.dyn_dtree=new r.Buf16(2*(2*v+1)),this.bl_tree=new r.Buf16(2*(2*w+1)),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(A+1),this.heap=new r.Buf16(2*b+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*b+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+M-1)/M),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=i,X(t)}n=[new Z(0,0,0,0,function(t,e){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(V(t),0===t.lookahead&&e===c)return P;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+i;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,N(t,!1),0===t.strm.avail_out))return P;if(t.strstart-t.block_start>=t.w_size-E&&(N(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===h?(N(t,!0),0===t.strm.avail_out?L:R):(t.strstart>t.block_start&&(N(t,!1),t.strm.avail_out),P)}),new Z(4,4,8,4,W),new Z(4,5,16,8,W),new Z(4,6,32,32,W),new Z(4,4,16,16,j),new Z(8,16,32,32,j),new Z(8,16,128,128,j),new Z(8,32,128,256,j),new Z(32,128,258,1024,j),new Z(32,258,258,4096,j)],e.deflateInit=function(t,e){return J(t,e,_,15,8,0)},e.deflateInit2=J,e.deflateReset=X,e.deflateResetKeep=Y,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?d:(t.state.gzhead=e,u):d},e.deflate=function(t,e){var i,r,s,l;if(!t||!t.state||e>5||e<0)return t?D(t,d):d;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===k&&e!==h)return D(t,0===t.avail_out?-5:d);if(r.strm=t,i=r.last_flush,r.last_flush=e,r.status===T)if(2===r.wrap)t.adler=0,z(r,31),z(r,139),z(r,8),r.gzhead?(z(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),z(r,255&r.gzhead.time),z(r,r.gzhead.time>>8&255),z(r,r.gzhead.time>>16&255),z(r,r.gzhead.time>>24&255),z(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),z(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(z(r,255&r.gzhead.extra.length),z(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=o(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(z(r,0),z(r,0),z(r,0),z(r,0),z(r,0),z(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),z(r,3),r.status=C);else{var f=_+(r.w_bits-8<<4)<<8;f|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(f|=32),f+=31-f%31,r.status=C,H(r,f),0!==r.strstart&&(H(r,t.adler>>>16),H(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),F(t),s=r.pending,r.pending!==r.pending_buf_size));)z(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),F(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,z(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),F(t),s=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,z(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>s&&(t.adler=o(t.adler,r.pending_buf,r.pending-s,s)),0===l&&(r.status=I)}else r.status=I;if(r.status===I&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&F(t),r.pending+2<=r.pending_buf_size&&(z(r,255&t.adler),z(r,t.adler>>8&255),t.adler=0,r.status=C)):r.status=C),0!==r.pending){if(F(t),0===t.avail_out)return r.last_flush=-1,u}else if(0===t.avail_in&&O(e)<=O(i)&&e!==h)return D(t,-5);if(r.status===k&&0!==t.avail_in)return D(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==c&&r.status!==k){var p=2===r.strategy?function(t,e){for(var i;;){if(0===t.lookahead&&(V(t),0===t.lookahead)){if(e===c)return P;break}if(t.match_length=0,i=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(N(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===h?(N(t,!0),0===t.strm.avail_out?L:R):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?P:B}(r,e):3===r.strategy?function(t,e){for(var i,n,r,s,o=t.window;;){if(t.lookahead<=S){if(V(t),t.lookahead<=S&&e===c)return P;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=M&&t.strstart>0&&(n=o[r=t.strstart-1])===o[++r]&&n===o[++r]&&n===o[++r]){s=t.strstart+S;do{}while(n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&n===o[++r]&&r<s);t.match_length=S-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=M?(i=a._tr_tally(t,1,t.match_length-M),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(N(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===h?(N(t,!0),0===t.strm.avail_out?L:R):t.last_lit&&(N(t,!1),0===t.strm.avail_out)?P:B}(r,e):n[r.level].func(r,e);if(p!==L&&p!==R||(r.status=k),p===P||p===L)return 0===t.avail_out&&(r.last_flush=-1),u;if(p===B&&(1===e?a._tr_align(r):5!==e&&(a._tr_stored_block(r,0,0,!1),3===e&&(G(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),F(t),0===t.avail_out))return r.last_flush=-1,u}return e!==h?u:r.wrap<=0?1:(2===r.wrap?(z(r,255&t.adler),z(r,t.adler>>8&255),z(r,t.adler>>16&255),z(r,t.adler>>24&255),z(r,255&t.total_in),z(r,t.total_in>>8&255),z(r,t.total_in>>16&255),z(r,t.total_in>>24&255)):(H(r,t.adler>>>16),H(r,65535&t.adler)),F(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?u:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==T&&69!==e&&73!==e&&91!==e&&e!==I&&e!==C&&e!==k?D(t,d):(t.state=null,e===C?D(t,-3):u):d},e.deflateSetDictionary=function(t,e){var i,n,a,o,l,c,h,f,p=e.length;if(!t||!t.state)return d;if(2===(o=(i=t.state).wrap)||1===o&&i.status!==T||i.lookahead)return d;for(1===o&&(t.adler=s(t.adler,e,p,0)),i.wrap=0,p>=i.w_size&&(0===o&&(G(i.head),i.strstart=0,i.block_start=0,i.insert=0),f=new r.Buf8(i.w_size),r.arraySet(f,e,p-i.w_size,i.w_size,0),e=f,p=i.w_size),l=t.avail_in,c=t.next_in,h=t.input,t.avail_in=p,t.next_in=0,t.input=e,V(i);i.lookahead>=M;){n=i.strstart,a=i.lookahead-(M-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+M-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++}while(--a);i.strstart=n,i.lookahead=M-1,V(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=M-1,i.match_available=0,t.next_in=c,t.input=h,t.avail_in=l,i.wrap=o,u},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,i){"use strict";(function(t,n){var r=i(30),a=i(52),s=i(51),o=i(48),l=i(45);for(var c in l)e[c]=l[c];function h(t){if("number"!=typeof t||t<e.DEFLATE||t>e.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}e.NONE=0,e.DEFLATE=1,e.INFLATE=2,e.GZIP=3,e.GUNZIP=4,e.DEFLATERAW=5,e.INFLATERAW=6,e.UNZIP=7,h.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,r(this.init_done,"close before init"),r(this.mode<=e.UNZIP),this.mode===e.DEFLATE||this.mode===e.GZIP||this.mode===e.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==e.INFLATE&&this.mode!==e.GUNZIP&&this.mode!==e.INFLATERAW&&this.mode!==e.UNZIP||o.inflateEnd(this.strm),this.mode=e.NONE,this.dictionary=null)},h.prototype.write=function(t,e,i,n,r,a,s){return this._write(!0,t,e,i,n,r,a,s)},h.prototype.writeSync=function(t,e,i,n,r,a,s){return this._write(!1,t,e,i,n,r,a,s)},h.prototype._write=function(i,a,s,o,l,c,h,u){if(r.equal(arguments.length,8),r(this.init_done,"write before init"),r(this.mode!==e.NONE,"already finalized"),r.equal(!1,this.write_in_progress,"write already in progress"),r.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,r.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==e.Z_NO_FLUSH&&a!==e.Z_PARTIAL_FLUSH&&a!==e.Z_SYNC_FLUSH&&a!==e.Z_FULL_FLUSH&&a!==e.Z_FINISH&&a!==e.Z_BLOCK)throw new Error("Invalid flush value");if(null==s&&(s=t.alloc(0),l=0,o=0),this.strm.avail_in=l,this.strm.input=s,this.strm.next_in=o,this.strm.avail_out=u,this.strm.output=c,this.strm.next_out=h,this.flush=a,!i)return this._process(),this._checkError()?this._afterSync():void 0;var d=this;return n.nextTick(function(){d._process(),d._after()}),this},h.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},h.prototype._process=function(){var t=null;switch(this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case e.UNZIP:switch(this.strm.avail_in>0&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=e.INFLATE;break}if(this.gzip_id_bytes_read=1,t++,1===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=e.GUNZIP):this.mode=e.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:for(this.err=o.inflate(this.strm,this.flush),this.err===e.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===e.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===e.Z_DATA_ERROR&&(this.err=e.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===e.GUNZIP&&this.err===e.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},h.prototype._checkError=function(){switch(this.err){case e.Z_OK:case e.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===e.Z_FINISH)return this._error("unexpected end of file"),!1;break;case e.Z_STREAM_END:break;case e.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},h.prototype._after=function(){if(this._checkError()){var t=this.strm.avail_out,e=this.strm.avail_in;this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close()}},h.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},h.prototype.init=function(t,i,n,a,s){r(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),r(t>=8&&t<=15,"invalid windowBits"),r(i>=-1&&i<=9,"invalid compression level"),r(n>=1&&n<=9,"invalid memlevel"),r(a===e.Z_FILTERED||a===e.Z_HUFFMAN_ONLY||a===e.Z_RLE||a===e.Z_FIXED||a===e.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(i,t,n,a,s),this._setDictionary()},h.prototype.params=function(){throw new Error("deflateParams Not supported")},h.prototype.reset=function(){this._reset(),this._setDictionary()},h.prototype._init=function(t,i,n,r,l){switch(this.level=t,this.windowBits=i,this.memLevel=n,this.strategy=r,this.flush=e.Z_NO_FLUSH,this.err=e.Z_OK,this.mode!==e.GZIP&&this.mode!==e.GUNZIP||(this.windowBits+=16),this.mode===e.UNZIP&&(this.windowBits+=32),this.mode!==e.DEFLATERAW&&this.mode!==e.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case e.DEFLATE:case e.GZIP:case e.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,e.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case e.INFLATE:case e.GUNZIP:case e.INFLATERAW:case e.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==e.Z_OK&&this._error("Init error"),this.dictionary=l,this.write_in_progress=!1,this.init_done=!0},h.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==e.Z_OK&&this._error("Failed to set dictionary")}},h.prototype._reset=function(){switch(this.err=e.Z_OK,this.mode){case e.DEFLATE:case e.DEFLATERAW:case e.GZIP:this.err=s.deflateReset(this.strm);break;case e.INFLATE:case e.INFLATERAW:case e.GUNZIP:this.err=o.inflateReset(this.strm)}this.err!==e.Z_OK&&this._error("Failed to reset stream")},e.Zlib=h}).call(this,i(1).Buffer,i(3))},function(t,e,i){t.exports=i(19).PassThrough},function(t,e,i){t.exports=i(19).Transform},function(t,e,i){t.exports=i(2)},function(t,e,i){t.exports=i(18)},function(t,e,i){"use strict";t.exports=a;var n=i(31),r=i(6);function a(t){if(!(this instanceof a))return new a(t);n.call(this,t)}r.inherits=i(5),r.inherits(a,n),a.prototype._transform=function(t,e,i){i(null,t)}},function(t,e,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(t){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(t,e){if(i("noDeprecation"))return t;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(e);i("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,i(0))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,r,a,s,o,l=1,c={},h=!1,u=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){p(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?(s="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),n=function(e){t.postMessage(s+e,"*")}):t.MessageChannel?((a=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){a.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,n=function(t){var e=u.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):n=function(t){setTimeout(p,0,t)},d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var r={callback:t,args:e};return c[l]=r,n(l),l++},d.clearImmediate=f}function f(t){delete c[t]}function p(t){if(h)setTimeout(p,0,t);else{var e=c[t];if(e){h=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{f(t),h=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(0),i(3))},function(t,e,i){(function(t){var n=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(n.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(n.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(62),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(0))},function(t,e){},function(t,e,i){"use strict";var n=i(9).Buffer,r=i(64);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,i,r,a=n.allocUnsafe(t>>>0),s=this.head,o=0;s;)e=s.data,i=a,r=o,e.copy(i,r),o+=s.data.length,s=s.next;return a},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,i){t.exports=r;var n=i(20).EventEmitter;function r(){n.call(this)}i(5)(r,n),r.Readable=i(19),r.Writable=i(59),r.Duplex=i(58),r.Transform=i(57),r.PassThrough=i(56),r.Stream=r,r.prototype.pipe=function(t,e){var i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function a(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",a),t._isStdio||e&&!1===e.end||(i.on("end",o),i.on("close",l));var s=!1;function o(){s||(s=!0,t.end())}function l(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(h(),0===n.listenerCount(this,"error"))throw t}function h(){i.removeListener("data",r),t.removeListener("drain",a),i.removeListener("end",o),i.removeListener("close",l),i.removeListener("error",c),t.removeListener("error",c),i.removeListener("end",h),i.removeListener("close",h),t.removeListener("close",h)}return i.on("error",c),t.on("error",c),i.on("end",h),i.on("close",h),t.on("close",h),t.emit("pipe",i),t}},function(t,e,i){"use strict";(function(t){var n=i(1).Buffer,r=i(67).Transform,a=i(55),s=i(29),o=i(30).ok,l=i(1).kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var h=Object.keys(a),u=0;u<h.length;u++){var d=h[u];d.match(/^Z/)&&Object.defineProperty(e,d,{enumerable:!0,value:a[d],writable:!1})}for(var f={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},p=Object.keys(f),m=0;m<p.length;m++){var g=p[m];f[f[g]]=g}function _(t,e,i){var r=[],a=0;function s(){for(var e;null!==(e=t.read());)r.push(e),a+=e.length;t.once("readable",s)}function o(){var e,s=null;a>=l?s=new RangeError(c):e=n.concat(r,a),r=[],t.close(),i(s,e)}t.on("error",function(e){t.removeListener("end",o),t.removeListener("readable",s),i(e)}),t.on("end",o),t.end(e),s()}function y(t,e){if("string"==typeof e&&(e=n.from(e)),!n.isBuffer(e))throw new TypeError("Not a string or buffer");var i=t._finishFlushFlag;return t._processChunk(e,i)}function b(t){if(!(this instanceof b))return new b(t);T.call(this,t,a.DEFLATE)}function v(t){if(!(this instanceof v))return new v(t);T.call(this,t,a.INFLATE)}function w(t){if(!(this instanceof w))return new w(t);T.call(this,t,a.GZIP)}function x(t){if(!(this instanceof x))return new x(t);T.call(this,t,a.GUNZIP)}function A(t){if(!(this instanceof A))return new A(t);T.call(this,t,a.DEFLATERAW)}function M(t){if(!(this instanceof M))return new M(t);T.call(this,t,a.INFLATERAW)}function S(t){if(!(this instanceof S))return new S(t);T.call(this,t,a.UNZIP)}function E(t){return t===a.Z_NO_FLUSH||t===a.Z_PARTIAL_FLUSH||t===a.Z_SYNC_FLUSH||t===a.Z_FULL_FLUSH||t===a.Z_FINISH||t===a.Z_BLOCK}function T(t,i){var s=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||e.Z_DEFAULT_CHUNK,r.call(this,t),t.flush&&!E(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!E(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||a.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:a.Z_FINISH,t.chunkSize&&(t.chunkSize<e.Z_MIN_CHUNK||t.chunkSize>e.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<e.Z_MIN_WINDOWBITS||t.windowBits>e.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<e.Z_MIN_LEVEL||t.level>e.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<e.Z_MIN_MEMLEVEL||t.memLevel>e.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=e.Z_FILTERED&&t.strategy!=e.Z_HUFFMAN_ONLY&&t.strategy!=e.Z_RLE&&t.strategy!=e.Z_FIXED&&t.strategy!=e.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!n.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(i);var o=this;this._hadError=!1,this._handle.onerror=function(t,i){I(o),o._hadError=!0;var n=new Error(t);n.errno=i,n.code=e.codes[i],o.emit("error",n)};var l=e.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(l=t.level);var c=e.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(c=t.strategy),this._handle.init(t.windowBits||e.Z_DEFAULT_WINDOWBITS,l,t.memLevel||e.Z_DEFAULT_MEMLEVEL,c,t.dictionary),this._buffer=n.allocUnsafe(this._chunkSize),this._offset=0,this._level=l,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!s._handle},configurable:!0,enumerable:!0})}function I(e,i){i&&t.nextTick(i),e._handle&&(e._handle.close(),e._handle=null)}function C(t){t.emit("close")}Object.defineProperty(e,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),e.Deflate=b,e.Inflate=v,e.Gzip=w,e.Gunzip=x,e.DeflateRaw=A,e.InflateRaw=M,e.Unzip=S,e.createDeflate=function(t){return new b(t)},e.createInflate=function(t){return new v(t)},e.createDeflateRaw=function(t){return new A(t)},e.createInflateRaw=function(t){return new M(t)},e.createGzip=function(t){return new w(t)},e.createGunzip=function(t){return new x(t)},e.createUnzip=function(t){return new S(t)},e.deflate=function(t,e,i){return"function"==typeof e&&(i=e,e={}),_(new b(e),t,i)},e.deflateSync=function(t,e){return y(new b(e),t)},e.gzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),_(new w(e),t,i)},e.gzipSync=function(t,e){return y(new w(e),t)},e.deflateRaw=function(t,e,i){return"function"==typeof e&&(i=e,e={}),_(new A(e),t,i)},e.deflateRawSync=function(t,e){return y(new A(e),t)},e.unzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),_(new S(e),t,i)},e.unzipSync=function(t,e){return y(new S(e),t)},e.inflate=function(t,e,i){return"function"==typeof e&&(i=e,e={}),_(new v(e),t,i)},e.inflateSync=function(t,e){return y(new v(e),t)},e.gunzip=function(t,e,i){return"function"==typeof e&&(i=e,e={}),_(new x(e),t,i)},e.gunzipSync=function(t,e){return y(new x(e),t)},e.inflateRaw=function(t,e,i){return"function"==typeof e&&(i=e,e={}),_(new M(e),t,i)},e.inflateRawSync=function(t,e){return y(new M(e),t)},s.inherits(T,r),T.prototype.params=function(i,n,r){if(i<e.Z_MIN_LEVEL||i>e.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+i);if(n!=e.Z_FILTERED&&n!=e.Z_HUFFMAN_ONLY&&n!=e.Z_RLE&&n!=e.Z_FIXED&&n!=e.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==i||this._strategy!==n){var s=this;this.flush(a.Z_SYNC_FLUSH,function(){o(s._handle,"zlib binding closed"),s._handle.params(i,n),s._hadError||(s._level=i,s._strategy=n,r&&r())})}else t.nextTick(r)},T.prototype.reset=function(){return o(this._handle,"zlib binding closed"),this._handle.reset()},T.prototype._flush=function(t){this._transform(n.alloc(0),"",t)},T.prototype.flush=function(e,i){var r=this,s=this._writableState;("function"==typeof e||void 0===e&&!i)&&(i=e,e=a.Z_FULL_FLUSH),s.ended?i&&t.nextTick(i):s.ending?i&&this.once("end",i):s.needDrain?i&&this.once("drain",function(){return r.flush(e,i)}):(this._flushFlag=e,this.write(n.alloc(0),"",i))},T.prototype.close=function(e){I(this,e),t.nextTick(C,this)},T.prototype._transform=function(t,e,i){var r,s=this._writableState,o=(s.ending||s.ended)&&(!t||s.length===t.length);return null===t||n.isBuffer(t)?this._handle?(o?r=this._finishFlushFlag:(r=this._flushFlag,t.length>=s.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(t,r,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},T.prototype._processChunk=function(t,e,i){var r=t&&t.length,a=this._chunkSize-this._offset,s=0,h=this,u="function"==typeof i;if(!u){var d,f=[],p=0;this.on("error",function(t){d=t}),o(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(e,t,s,r,this._buffer,this._offset,a)}while(!this._hadError&&y(m[0],m[1]));if(this._hadError)throw d;if(p>=l)throw I(this),new RangeError(c);var g=n.concat(f,p);return I(this),g}o(this._handle,"zlib binding closed");var _=this._handle.write(e,t,s,r,this._buffer,this._offset,a);function y(l,c){if(this&&(this.buffer=null,this.callback=null),!h._hadError){var d=a-c;if(o(d>=0,"have should not go down"),d>0){var m=h._buffer.slice(h._offset,h._offset+d);h._offset+=d,u?h.push(m):(f.push(m),p+=m.length)}if((0===c||h._offset>=h._chunkSize)&&(a=h._chunkSize,h._offset=0,h._buffer=n.allocUnsafe(h._chunkSize)),0===c){if(s+=r-l,r=l,!u)return!0;var g=h._handle.write(e,t,s,r,h._buffer,h._offset,h._chunkSize);return g.callback=y,void(g.buffer=t)}if(!u)return!1;i()}}_.buffer=t,_.callback=y},s.inherits(b,T),s.inherits(v,T),s.inherits(w,T),s.inherits(x,T),s.inherits(A,T),s.inherits(M,T),s.inherits(S,T)}).call(this,i(3))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,d){if(void 0===e)throw"dicomParser.parseDicom: missing required parameter 'byteArray'";return f=(0,l.default)(e,d),p=function(l){var f=function(t){if(void 0===t.elements.x00020010)throw"dicomParser.parseDicom: missing required meta header attribute 0002,0010";var i=t.elements.x00020010;return h.readFixedString(e,i.dataOffset,i.length)}(l),p=function(t){return"1.2.840.10008.1.2"!==t}(f),m=function(s,l){if("1.2.840.10008.1.2.1.99"===s){if(d&&d.inflater){var h=d.inflater(e,l);return new a.default(o.default,h,0)}if(void 0!==t&&this.module!==t){var u=i(68),f=(0,c.default)(e,l,e.length-l),p=u.inflateRawSync(f),m=(0,n.default)(e,p.length+l);return e.copy(m,0,0,l),p.copy(m,l),new a.default(o.default,m,0)}if("undefined"!=typeof pako){var g=e.slice(l),_=pako.inflateRaw(g),y=(0,n.default)(e,_.length+l);return y.set(e.slice(0,l),0),y.set(_,l),new a.default(o.default,y,0)}throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax"}return"1.2.840.10008.1.2.2"===s?new a.default(r.default,e,l):new a.default(o.default,e,l)}(f,l.position),g=new s.default(m.byteArrayParser,m.byteArray,{});g.warnings=m.warnings;try{p?u.parseDicomDataSetExplicit(g,m,m.byteArray.length,d):u.parseDicomDataSetImplicit(g,m,m.byteArray.length,d)}catch(t){var _={exception:t,dataSet:g};throw _}return g}(f),function(t,e){for(var i in t.elements)t.elements.hasOwnProperty(i)&&(e.elements[i]=t.elements[i]);return void 0!==t.warnings&&(e.warnings=t.warnings.concat(e.warnings)),e}(f,p);var f,p};var n=f(i(22)),r=f(i(37)),a=f(i(12)),s=f(i(7)),o=f(i(21)),l=f(i(36)),c=f(i(11)),h=d(i(14)),u=d(i(16));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}}).call(this,i(69)(t))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="1.8.1"},function(t,e){e.read=function(t,e,i,n,r){var a,s,o=8*r-n-1,l=(1<<o)-1,c=l>>1,h=-7,u=i?r-1:0,d=i?-1:1,f=t[e+u];for(u+=d,a=f&(1<<-h)-1,f>>=-h,h+=o;h>0;a=256*a+t[e+u],u+=d,h-=8);for(s=a&(1<<-h)-1,a>>=-h,h+=n;h>0;s=256*s+t[e+u],u+=d,h-=8);if(0===a)a=1-c;else{if(a===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),a-=c}return(f?-1:1)*s*Math.pow(2,a-n)},e.write=function(t,e,i,n,r,a){var s,o,l,c=8*a-r-1,h=(1<<c)-1,u=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:a-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=h?(o=0,s=h):s+u>=1?(o=(e*l-1)*Math.pow(2,r),s+=u):(o=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[i+f]=255&o,f+=p,o/=256,r-=8);for(s=s<<r|o,c+=r;c>0;t[i+f]=255&s,f+=p,s/=256,c-=8);t[i+f-p]|=128*m}},function(t,e,i){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,i,n,s,o,l=t.length;s=c(t),o=new a(3*l/4-s),i=s>0?l-4:l;var h=0;for(e=0;e<i;e+=4)n=r[t.charCodeAt(e)]<<18|r[t.charCodeAt(e+1)]<<12|r[t.charCodeAt(e+2)]<<6|r[t.charCodeAt(e+3)],o[h++]=n>>16&255,o[h++]=n>>8&255,o[h++]=255&n;return 2===s?(n=r[t.charCodeAt(e)]<<2|r[t.charCodeAt(e+1)]>>4,o[h++]=255&n):1===s&&(n=r[t.charCodeAt(e)]<<10|r[t.charCodeAt(e+1)]<<4|r[t.charCodeAt(e+2)]>>2,o[h++]=n>>8&255,o[h++]=255&n),o},e.fromByteArray=function(t){for(var e,i=t.length,r=i%3,a="",s=[],o=0,l=i-r;o<l;o+=16383)s.push(h(t,o,o+16383>l?l:o+16383));return 1===r?(e=t[i-1],a+=n[e>>2],a+=n[e<<4&63],a+="=="):2===r&&(e=(t[i-2]<<8)+t[i-1],a+=n[e>>10],a+=n[e>>4&63],a+=n[e<<2&63],a+="="),s.push(a),s.join("")};for(var n=[],r=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)n[o]=s[o],r[s.charCodeAt(o)]=o;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function h(t,e,i){for(var r,a,s=[],o=e;o<i;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),s.push(n[(a=r)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e,i){"use strict";function n(t,e){return 255===t.byteArray[e]&&217===t.byteArray[e+1]}function r(t,e,i){var r=e.fragments[i];return!(!n(t,r.position+r.length-2)&&!n(t,r.position+r.length-3))}function a(t,e,i){for(var n=i;n<e.fragments.length;n++)if(r(t,e,n))return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===e)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==e.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==e.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==e.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===e.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(e.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(i&&i.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";i=i||e.fragments;for(var n=[],r=0;;){n.push(e.fragments[r].offset);var s=a(t,e,r);if(void 0===s||s===e.fragments.length-1)return n;r=s+1}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,i){if(void 0===e)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";i=i||{omitPrivateAttibutes:!0,maxElementLength:128};var n={};for(var r in e.elements){var o=e.elements[r];if(!0!==i.omitPrivateAttibutes||!s.isPrivateTag(r))if(o.items){for(var l=[],c=0;c<o.items.length;c++)l.push(t(o.items[c].dataSet,i));n[r]=l}else{var h;h=void 0,o.length<i.maxElementLength&&(h=(0,a.default)(e,o)),n[r]=void 0!==h?h:{dataOffset:o.dataOffset,length:o.length}}}return n};var n,r=i(43),a=(n=r)&&n.__esModule?n:{default:n},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(25))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(t&&8===t.length){var i=parseInt(t.substring(0,4),10),n=parseInt(t.substring(4,6),10),r=parseInt(t.substring(6,8),10);if(e&&!0!==function(t,e,i){return!isNaN(i)&&e>0&&e<=12&&t>0&&t<=function(t,e){switch(t){case 2:return e%4==0&&e%100||e%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}(e,i)}(r,n,i))throw"invalid DA '"+t+"'";return{year:i,month:n,day:r}}if(e)throw"invalid DA '"+t+"'"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(t.length>=2){var i=parseInt(t.substring(0,2),10),n=t.length>=4?parseInt(t.substring(2,4),10):void 0,r=t.length>=6?parseInt(t.substring(4,6),10):void 0,a=t.length>=8?parseInt(t.substring(7,13),10):void 0;if(e&&(isNaN(i)||void 0!==n&&isNaN(n)||void 0!==r&&isNaN(r)||void 0!==a&&isNaN(a)||i<0||i>23||n&&(n<0||n>59)||r&&(r<0||r>59)||a&&(a<0||a>999999)))throw"invalid TM '"+t+"'";return{hours:i,minutes:n,seconds:r,fractionalSeconds:a}}if(e)throw"invalid TM '"+t+"'"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(25);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var r=i(77);Object.defineProperty(e,"parseTM",{enumerable:!0,get:function(){return c(r).default}});var a=i(76);Object.defineProperty(e,"parseDA",{enumerable:!0,get:function(){return c(a).default}});var s=i(43);Object.defineProperty(e,"explicitElementToString",{enumerable:!0,get:function(){return c(s).default}});var o=i(75);Object.defineProperty(e,"explicitDataSetToJS",{enumerable:!0,get:function(){return c(o).default}});var l=i(74);function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"createJPEGBasicOffsetTable",{enumerable:!0,get:function(){return c(l).default}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(78);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var r=i(16);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var a=i(14);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var s=i(22);Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return T(s).default}});var o=i(71);Object.defineProperty(e,"version",{enumerable:!0,get:function(){return T(o).default}});var l=i(37);Object.defineProperty(e,"bigEndianByteArrayParser",{enumerable:!0,get:function(){return T(l).default}});var c=i(12);Object.defineProperty(e,"ByteStream",{enumerable:!0,get:function(){return T(c).default}});var h=i(11);Object.defineProperty(e,"sharedCopy",{enumerable:!0,get:function(){return T(h).default}});var u=i(7);Object.defineProperty(e,"DataSet",{enumerable:!0,get:function(){return T(u).default}});var d=i(41);Object.defineProperty(e,"findAndSetUNElementLength",{enumerable:!0,get:function(){return T(d).default}});var f=i(42);Object.defineProperty(e,"findEndOfEncapsulatedElement",{enumerable:!0,get:function(){return T(f).default}});var p=i(24);Object.defineProperty(e,"findItemDelimitationItemAndSetElementLength",{enumerable:!0,get:function(){return T(p).default}});var m=i(21);Object.defineProperty(e,"littleEndianByteArrayParser",{enumerable:!0,get:function(){return T(m).default}});var g=i(70);Object.defineProperty(e,"parseDicom",{enumerable:!0,get:function(){return T(g).default}});var _=i(15);Object.defineProperty(e,"readDicomElementExplicit",{enumerable:!0,get:function(){return T(_).default}});var y=i(23);Object.defineProperty(e,"readDicomElementImplicit",{enumerable:!0,get:function(){return T(y).default}});var b=i(26);Object.defineProperty(e,"readEncapsulatedImageFrame",{enumerable:!0,get:function(){return T(b).default}});var v=i(44);Object.defineProperty(e,"readEncapsulatedPixelData",{enumerable:!0,get:function(){return T(v).default}});var w=i(17);Object.defineProperty(e,"readEncapsulatedPixelDataFromFragments",{enumerable:!0,get:function(){return T(w).default}});var x=i(36);Object.defineProperty(e,"readPart10Header",{enumerable:!0,get:function(){return T(x).default}});var A=i(40);Object.defineProperty(e,"readSequenceItemsExplicit",{enumerable:!0,get:function(){return T(A).default}});var M=i(39);Object.defineProperty(e,"readSequenceItemsImplicit",{enumerable:!0,get:function(){return T(M).default}});var S=i(13);Object.defineProperty(e,"readSequenceItem",{enumerable:!0,get:function(){return T(S).default}});var E=i(4);function T(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"readTag",{enumerable:!0,get:function(){return T(E).default}})}])},function(t,e,i){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.ComponentSpec=n.lossless.ComponentSpec||i(90),n.lossless.DataStream=n.lossless.DataStream||i(12),n.lossless.Decoder=n.lossless.Decoder||i(153),n.lossless.FrameHeader=n.lossless.FrameHeader||i(95),n.lossless.HuffmanTable=n.lossless.HuffmanTable||i(91),n.lossless.QuantizationTable=n.lossless.QuantizationTable||i(92),n.lossless.ScanComponent=n.lossless.ScanComponent||i(94),n.lossless.ScanHeader=n.lossless.ScanHeader||i(93),n.lossless.Utils=n.lossless.Utils||i(26),"undefined"!==typeof t&&t.exports&&(t.exports=n)},function(t,e,i){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.DataStream=n.lossless.DataStream||i(12),n.lossless.HuffmanTable=n.lossless.HuffmanTable||i(91),n.lossless.QuantizationTable=n.lossless.QuantizationTable||i(92),n.lossless.ScanHeader=n.lossless.ScanHeader||i(93),n.lossless.FrameHeader=n.lossless.FrameHeader||i(95),n.lossless.Utils=n.lossless.Utils||i(26),n.lossless.Decoder=n.lossless.Decoder||function(t,e){this.buffer=t,this.frame=new n.lossless.FrameHeader,this.huffTable=new n.lossless.HuffmanTable,this.quantTable=new n.lossless.QuantizationTable,this.scan=new n.lossless.ScanHeader,this.DU=n.lossless.Utils.createArray(10,4,64),this.HuffTab=n.lossless.Utils.createArray(4,2,12800),this.IDCT_Source=[],this.nBlock=[],this.acTab=n.lossless.Utils.createArray(10,1),this.dcTab=n.lossless.Utils.createArray(10,1),this.qTab=n.lossless.Utils.createArray(10,1),this.marker=0,this.markerIndex=0,this.numComp=0,this.restartInterval=0,this.selection=0,this.xDim=0,this.yDim=0,this.xLoc=0,this.yLoc=0,this.numBytes=0,this.outputData=null,this.restarting=!1,this.mask=0,void 0!==e&&(this.numBytes=e)},n.lossless.Decoder.IDCT_P=[0,5,40,16,45,2,7,42,21,56,8,61,18,47,1,4,41,23,58,13,32,24,37,10,63,17,44,3,6,43,20,57,15,34,29,48,53,26,39,9,60,19,46,22,59,12,33,31,50,55,25,36,11,62,14,35,28,49,52,27,38,30,51,54],n.lossless.Decoder.TABLE=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],n.lossless.Decoder.MAX_HUFFMAN_SUBTREE=50,n.lossless.Decoder.MSB=2147483648,n.lossless.Decoder.RESTART_MARKER_BEGIN=65488,n.lossless.Decoder.RESTART_MARKER_END=65495,n.lossless.Decoder.prototype.decompress=function(t,e,i){return this.decode(t,e,i).buffer},n.lossless.Decoder.prototype.decode=function(t,e,i,r){var a,s,o,l,c=0,h=[],u=[],d=[];if(void 0!==t&&(this.buffer=t),void 0!==r&&(this.numBytes=r),this.stream=new n.lossless.DataStream(this.buffer,e,i),this.buffer=null,this.xLoc=0,this.yLoc=0,65496!==(a=this.stream.get16()))throw new Error("Not a JPEG file");for(a=this.stream.get16();a>>4!=4092||65476===a;){switch(a){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,n.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(a>>8!=255)throw new Error("ERROR: format throw new IOException! (decode)")}a=this.stream.get16()}if(a<65472||a>65479)throw new Error("ERROR: could not handle arithmetic code!");this.frame.read(this.stream),a=this.stream.get16();do{for(;65498!==a;){switch(a){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,n.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(a>>8!=255)throw new Error("ERROR: format throw new IOException! (Parser.decode)")}a=this.stream.get16()}switch(this.precision=this.frame.precision,this.components=this.frame.components,this.numBytes||(this.numBytes=parseInt(Math.ceil(this.precision/8))),1==this.numBytes?this.mask=255:this.mask=65535,this.scan.read(this.stream),this.numComp=this.scan.numComp,this.selection=this.scan.selection,1===this.numBytes?3===this.numComp?(this.getter=this.getValueRGB,this.setter=this.setValueRGB,this.output=this.outputRGB):(this.getter=this.getValue8,this.setter=this.setValue8,this.output=this.outputSingle):(this.getter=this.getValue16,this.setter=this.setValue16,this.output=this.outputSingle),this.selection){case 2:this.selector=this.select2;break;case 3:this.selector=this.select3;break;case 4:this.selector=this.select4;break;case 5:this.selector=this.select5;break;case 6:this.selector=this.select6;break;case 7:this.selector=this.select7;break;default:this.selector=this.select1}for(this.scanComps=this.scan.components,this.quantTables=this.quantTable.quantTables,s=0;s<this.numComp;s+=1)o=this.scanComps[s].scanCompSel,this.qTab[s]=this.quantTables[this.components[o].quantTableSel],this.nBlock[s]=this.components[o].vSamp*this.components[o].hSamp,this.dcTab[s]=this.HuffTab[this.scanComps[s].dcTabSel][0],this.acTab[s]=this.HuffTab[this.scanComps[s].acTabSel][1];for(this.xDim=this.frame.dimX,this.yDim=this.frame.dimY,this.outputData=new DataView(new ArrayBuffer(this.xDim*this.yDim*this.numBytes*this.numComp)),c+=1;;){for(u[0]=0,d[0]=0,s=0;s<10;s+=1)h[s]=1<<this.precision-1;if(0===this.restartInterval){for(a=this.decodeUnit(h,u,d);0===a&&this.xLoc<this.xDim&&this.yLoc<this.yDim;)this.output(h),a=this.decodeUnit(h,u,d);break}for(l=0;l<this.restartInterval&&(this.restarting=0==l,a=this.decodeUnit(h,u,d),this.output(h),0===a);l+=1);if(0===a&&(0!==this.markerIndex?(a=65280|this.marker,this.markerIndex=0):a=this.stream.get16()),!(a>=n.lossless.Decoder.RESTART_MARKER_BEGIN&&a<=n.lossless.Decoder.RESTART_MARKER_END))break}65500===a&&1===c&&(this.readNumber(),a=this.stream.get16())}while(65497!==a&&this.xLoc<this.xDim&&this.yLoc<this.yDim&&0===c);return this.outputData},n.lossless.Decoder.prototype.decodeUnit=function(t,e,i){return 1==this.numComp?this.decodeSingle(t,e,i):3==this.numComp?this.decodeRGB(t,e,i):-1},n.lossless.Decoder.prototype.select1=function(t){return this.getPreviousX(t)},n.lossless.Decoder.prototype.select2=function(t){return this.getPreviousY(t)},n.lossless.Decoder.prototype.select3=function(t){return this.getPreviousXY(t)},n.lossless.Decoder.prototype.select4=function(t){return this.getPreviousX(t)+this.getPreviousY(t)-this.getPreviousXY(t)},n.lossless.Decoder.prototype.select5=function(t){return this.getPreviousX(t)+(this.getPreviousY(t)-this.getPreviousXY(t)>>1)},n.lossless.Decoder.prototype.select6=function(t){return this.getPreviousY(t)+(this.getPreviousX(t)-this.getPreviousXY(t)>>1)},n.lossless.Decoder.prototype.select7=function(t){return(this.getPreviousX(t)+this.getPreviousY(t))/2},n.lossless.Decoder.prototype.decodeRGB=function(t,e,i){var r,a,s,o,l,c,h,u;for(t[0]=this.selector(0),t[1]=this.selector(1),t[2]=this.selector(2),l=0;l<this.numComp;l+=1)for(o=this.qTab[l],a=this.acTab[l],s=this.dcTab[l],c=0;c<this.nBlock[l];c+=1){for(h=0;h<this.IDCT_Source.length;h+=1)this.IDCT_Source[h]=0;if((r=this.getHuffmanValue(s,e,i))>=65280)return r;for(t[l]=this.IDCT_Source[0]=t[l]+this.getn(i,r,e,i),this.IDCT_Source[0]*=o[0],u=1;u<64;u+=1){if((r=this.getHuffmanValue(a,e,i))>=65280)return r;if(u+=r>>4,0==(15&r)){if(r>>4==0)break}else this.IDCT_Source[n.lossless.Decoder.IDCT_P[u]]=this.getn(i,15&r,e,i)*o[u]}}return 0},n.lossless.Decoder.prototype.decodeSingle=function(t,e,i){var r,a,s,o;for(this.restarting?(this.restarting=!1,t[0]=1<<this.frame.precision-1):t[0]=this.selector(),a=0;a<this.nBlock[0];a+=1){if((r=this.getHuffmanValue(this.dcTab[0],e,i))>=65280)return r;if((o=(s=this.getn(t,r,e,i))>>8)>=n.lossless.Decoder.RESTART_MARKER_BEGIN&&o<=n.lossless.Decoder.RESTART_MARKER_END)return o;t[0]+=s}return 0},n.lossless.Decoder.prototype.getHuffmanValue=function(t,e,i){var r,a;if(65535,i[0]<8?(e[0]<<=8,255===(a=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),e[0]|=a):i[0]-=8,0!=((r=t[e[0]>>i[0]])&n.lossless.Decoder.MSB)){if(0!==this.markerIndex)return this.markerIndex=0,65280|this.marker;e[0]&=65535>>16-i[0],e[0]<<=8,255===(a=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),e[0]|=a,r=t[256*(255&r)+(e[0]>>i[0])],i[0]+=8}if(i[0]+=8-(r>>8),i[0]<0)throw new Error("index="+i[0]+" temp="+e[0]+" code="+r+" in HuffmanValue()");return i[0]<this.markerIndex?(this.markerIndex=0,65280|this.marker):(e[0]&=65535>>16-i[0],255&r)},n.lossless.Decoder.prototype.getn=function(t,e,i,n){var r,a;if(1,-1,65535,0===e)return 0;if(16===e)return t[0]>=0?-32768:32768;if(n[0]-=e,n[0]>=0){if(n[0]<this.markerIndex&&!this.isLastPixel())return this.markerIndex=0,(65280|this.marker)<<8;r=i[0]>>n[0],i[0]&=65535>>16-n[0]}else{if(i[0]<<=8,255===(a=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),i[0]|=a,n[0]+=8,n[0]<0){if(0!==this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;i[0]<<=8,255===(a=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),i[0]|=a,n[0]+=8}if(n[0]<0)throw new Error("index="+n[0]+" in getn()");if(n[0]<this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;r=i[0]>>n[0],i[0]&=65535>>16-n[0]}return r<1<<e-1&&(r+=1+(-1<<e)),r},n.lossless.Decoder.prototype.getPreviousX=function(t){return this.xLoc>0?this.getter(this.yLoc*this.xDim+this.xLoc-1,t):this.yLoc>0?this.getPreviousY(t):1<<this.frame.precision-1},n.lossless.Decoder.prototype.getPreviousXY=function(t){return this.xLoc>0&&this.yLoc>0?this.getter((this.yLoc-1)*this.xDim+this.xLoc-1,t):this.getPreviousY(t)},n.lossless.Decoder.prototype.getPreviousY=function(t){return this.yLoc>0?this.getter((this.yLoc-1)*this.xDim+this.xLoc,t):this.getPreviousX(t)},n.lossless.Decoder.prototype.isLastPixel=function(){return this.xLoc===this.xDim-1&&this.yLoc===this.yDim-1},n.lossless.Decoder.prototype.outputSingle=function(t){this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(this.yLoc*this.xDim+this.xLoc,this.mask&t[0]),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},n.lossless.Decoder.prototype.outputRGB=function(t){var e=this.yLoc*this.xDim+this.xLoc;this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(e,t[0],0),this.setter(e,t[1],1),this.setter(e,t[2],2),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},n.lossless.Decoder.prototype.setValue16=function(t,e){this.outputData.setInt16(2*t,e,!0)},n.lossless.Decoder.prototype.getValue16=function(t){return this.outputData.getInt16(2*t,!0)},n.lossless.Decoder.prototype.setValue8=function(t,e){this.outputData.setInt8(t,e)},n.lossless.Decoder.prototype.getValue8=function(t){return this.outputData.getInt8(t)},n.lossless.Decoder.prototype.setValueRGB=function(t,e,i){this.outputData.setUint8(3*t+i,e)},n.lossless.Decoder.prototype.getValueRGB=function(t,e){return this.outputData.getUint8(3*t+e)},n.lossless.Decoder.prototype.readApp=function(){var t=0,e=this.stream.get16();for(t+=2;t<e;)this.stream.get8(),t+=1;return e},n.lossless.Decoder.prototype.readComment=function(){var t,e="",i=0;for(t=this.stream.get16(),i+=2;i<t;)e+=this.stream.get8(),i+=1;return e},n.lossless.Decoder.prototype.readNumber=function(){if(4!==this.stream.get16())throw new Error("ERROR: Define number format throw new IOException [Ld!=4]");return this.stream.get16()},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.Decoder)},function(t,e){var i={Unkown:0,Grayscale:1,AdobeRGB:2,RGB:3,CYMK:4},n=function(){"use strict";var t=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),e=4017,n=799,r=3406,a=2276,s=1567,o=3784,l=5793,c=2896;function h(){}function u(t,e){for(var i,n,r=0,a=[],s=16;s>0&&!t[s-1];)s--;a.push({children:[],index:0});var o,l=a[0];for(i=0;i<s;i++){for(n=0;n<t[i];n++){for((l=a.pop()).children[l.index]=e[r];l.index>0;)l=a.pop();for(l.index++,a.push(l);a.length<=i;)a.push(o={children:[],index:0}),l.children[l.index]=o.children,l=o;r++}i+1<s&&(a.push(o={children:[],index:0}),l.children[l.index]=o.children,l=o)}return a[0].children}function d(t,e,i){return 64*((t.blocksPerLine+1)*e+i)}function f(e,i,n,r,a,s,o,l,c){n.precision,n.samplesPerLine,n.scanLines;var h=n.mcusPerLine,u=n.progressive,f=(n.maxH,n.maxV,i),p=0,m=0;function g(){if(m>0)return p>>--m&1;if(255==(p=e[i++])){var t=e[i++];if(t)throw"unexpected marker: "+(p<<8|t).toString(16)}return m=7,p>>>7}function _(t){for(var e,i=t;null!==(e=g());){if("number"==typeof(i=i[e]))return i;if("object"!=typeof i)throw"invalid huffman sequence"}return null}function y(t){for(var e=0;t>0;){var i=g();if(null===i)return;e=e<<1|i,t--}return e}function b(t){var e=y(t);return e>=1<<t-1?e:e+(-1<<t)+1}var v=0;var w,x=0;function A(t,e,i,n,r){var a=i%h;e(t,d(t,(i/h|0)*t.v+n,a*t.h+r))}function M(t,e,i){e(t,d(t,i/t.blocksPerLine|0,i%t.blocksPerLine))}var S,E,T,I,C,k,P=r.length;k=u?0===s?0===l?function(t,e){var i=_(t.huffmanTableDC),n=0===i?0:b(i)<<c;t.blockData[e]=t.pred+=n}:function(t,e){t.blockData[e]|=g()<<c}:0===l?function(e,i){if(v>0)v--;else for(var n=s,r=o;n<=r;){var a=_(e.huffmanTableAC),l=15&a,h=a>>4;if(0!==l){var u=t[n+=h];e.blockData[i+u]=b(l)*(1<<c),n++}else{if(h<15){v=y(h)+(1<<h)-1;break}n+=16}}}:function(e,i){for(var n=s,r=o,a=0;n<=r;){var l=t[n];switch(x){case 0:var h=_(e.huffmanTableAC),u=15&h;if(a=h>>4,0===u)a<15?(v=y(a)+(1<<a),x=4):(a=16,x=1);else{if(1!==u)throw"invalid ACn encoding";w=b(u),x=a?2:3}continue;case 1:case 2:e.blockData[i+l]?e.blockData[i+l]+=g()<<c:0==--a&&(x=2==x?3:0);break;case 3:e.blockData[i+l]?e.blockData[i+l]+=g()<<c:(e.blockData[i+l]=w<<c,x=0);break;case 4:e.blockData[i+l]&&(e.blockData[i+l]+=g()<<c)}n++}4===x&&0==--v&&(x=0)}:function(e,i){var n=_(e.huffmanTableDC),r=0===n?0:b(n);e.blockData[i]=e.pred+=r;for(var a=1;a<64;){var s=_(e.huffmanTableAC),o=15&s,l=s>>4;if(0!==o){var c=t[a+=l];e.blockData[i+c]=b(o),a++}else{if(l<15)break;a+=16}}};var B,L,R,D,O=0;for(L=1==P?r[0].blocksPerLine*r[0].blocksPerColumn:h*n.mcusPerColumn,a||(a=L);O<L;){for(E=0;E<P;E++)r[E].pred=0;if(v=0,1==P)for(S=r[0],C=0;C<a;C++)M(S,k,O),O++;else for(C=0;C<a;C++){for(E=0;E<P;E++)for(R=(S=r[E]).h,D=S.v,T=0;T<D;T++)for(I=0;I<R;I++)A(S,k,O,T,I);O++}if(m=0,(B=e[i]<<8|e[i+1])<=65280)throw"marker was not found";if(!(B>=65488&&B<=65495))break;i+=2}return i-f}function p(t,i,h){var u,d,f,p,m,g,_,y,b,v,w=t.quantizationTable;for(v=0;v<64;v++)h[v]=t.blockData[i+v]*w[v];for(v=0;v<8;++v){var x=8*v;0!==h[1+x]||0!==h[2+x]||0!==h[3+x]||0!==h[4+x]||0!==h[5+x]||0!==h[6+x]||0!==h[7+x]?(u=l*h[0+x]+128>>8,d=l*h[4+x]+128>>8,f=h[2+x],p=h[6+x],m=c*(h[1+x]-h[7+x])+128>>8,y=c*(h[1+x]+h[7+x])+128>>8,g=h[3+x]<<4,_=h[5+x]<<4,b=u-d+1>>1,u=u+d+1>>1,d=b,b=f*o+p*s+128>>8,f=f*s-p*o+128>>8,p=b,b=m-_+1>>1,m=m+_+1>>1,_=b,b=y+g+1>>1,g=y-g+1>>1,y=b,b=u-p+1>>1,u=u+p+1>>1,p=b,b=d-f+1>>1,d=d+f+1>>1,f=b,b=m*a+y*r+2048>>12,m=m*r-y*a+2048>>12,y=b,b=g*n+_*e+2048>>12,g=g*e-_*n+2048>>12,_=b,h[0+x]=u+y,h[7+x]=u-y,h[1+x]=d+_,h[6+x]=d-_,h[2+x]=f+g,h[5+x]=f-g,h[3+x]=p+m,h[4+x]=p-m):(b=l*h[0+x]+512>>10,h[0+x]=b,h[1+x]=b,h[2+x]=b,h[3+x]=b,h[4+x]=b,h[5+x]=b,h[6+x]=b,h[7+x]=b)}for(v=0;v<8;++v){var A=v;0!==h[8+A]||0!==h[16+A]||0!==h[24+A]||0!==h[32+A]||0!==h[40+A]||0!==h[48+A]||0!==h[56+A]?(u=l*h[0+A]+2048>>12,d=l*h[32+A]+2048>>12,f=h[16+A],p=h[48+A],m=c*(h[8+A]-h[56+A])+2048>>12,y=c*(h[8+A]+h[56+A])+2048>>12,g=h[24+A],_=h[40+A],b=u-d+1>>1,u=u+d+1>>1,d=b,b=f*o+p*s+2048>>12,f=f*s-p*o+2048>>12,p=b,b=m-_+1>>1,m=m+_+1>>1,_=b,b=y+g+1>>1,g=y-g+1>>1,y=b,b=u-p+1>>1,u=u+p+1>>1,p=b,b=d-f+1>>1,d=d+f+1>>1,f=b,b=m*a+y*r+2048>>12,m=m*r-y*a+2048>>12,y=b,b=g*n+_*e+2048>>12,g=g*e-_*n+2048>>12,_=b,h[0+A]=u+y,h[56+A]=u-y,h[8+A]=d+_,h[48+A]=d-_,h[16+A]=f+g,h[40+A]=f-g,h[24+A]=p+m,h[32+A]=p-m):(b=l*h[v+0]+8192>>14,h[0+A]=b,h[8+A]=b,h[16+A]=b,h[24+A]=b,h[32+A]=b,h[40+A]=b,h[48+A]=b,h[56+A]=b)}for(v=0;v<64;++v){var M=i+v,S=h[v];S=S<=-2056/t.bitConversion?0:S>=2024/t.bitConversion?255/t.bitConversion:S+2056/t.bitConversion>>4,t.blockData[M]=S}}function m(t,e){for(var i=e.blocksPerLine,n=e.blocksPerColumn,r=new Int32Array(64),a=0;a<n;a++)for(var s=0;s<i;s++){p(e,d(e,a,s),r)}return e.blockData}function g(t){return t<=0?0:t>=255?255:0|t}return h.prototype={load:function(t){var e=function(t){this.parse(t),this.onload&&this.onload()}.bind(this);if(t.indexOf("data:")>-1){for(var i=t.indexOf("base64,")+7,n=atob(t.substring(i)),r=new Uint8Array(n.length),a=n.length-1;a>=0;a--)r[a]=n.charCodeAt(a);e(n)}else{var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=function(){var t=new Uint8Array(s.response);e(t)}.bind(this),s.send(null)}},parse:function(e){function n(){var t=e[l]<<8|e[l+1];return l+=2,t}function r(){var t=n(),i=e.subarray(l,l+t-2);return l+=i.length,i}function a(t){for(var e=Math.ceil(t.samplesPerLine/8/t.maxH),i=Math.ceil(t.scanLines/8/t.maxV),n=0;n<t.components.length;n++){j=t.components[n];var r=Math.ceil(Math.ceil(t.samplesPerLine/8)*j.h/t.maxH),a=Math.ceil(Math.ceil(t.scanLines/8)*j.v/t.maxV),s=e*j.h,o=64*(i*j.v)*(s+1);j.blockData=new Int16Array(o),j.blocksPerLine=r,j.blocksPerColumn=a}t.mcusPerLine=e,t.mcusPerColumn=i}var s,o,l=0,c=(e.length,null),h=null,d=[],p=[],g=[],_=n();if(65496!=_)throw"SOI not found";for(_=n();65497!=_;){var y,b;switch(_){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var v=r();65504===_&&74===v[0]&&70===v[1]&&73===v[2]&&70===v[3]&&0===v[4]&&(c={version:{major:v[5],minor:v[6]},densityUnits:v[7],xDensity:v[8]<<8|v[9],yDensity:v[10]<<8|v[11],thumbWidth:v[12],thumbHeight:v[13],thumbData:v.subarray(14,14+3*v[12]*v[13])}),65518===_&&65===v[0]&&100===v[1]&&111===v[2]&&98===v[3]&&101===v[4]&&0===v[5]&&(h={version:v[6],flags0:v[7]<<8|v[8],flags1:v[9]<<8|v[10],transformCode:v[11]});break;case 65499:for(var w=n()+l-2;l<w;){var x=e[l++],A=new Int32Array(64);if(x>>4==0)for(y=0;y<64;y++){A[t[y]]=e[l++]}else{if(x>>4!=1)throw"DQT: invalid table spec";for(y=0;y<64;y++){A[t[y]]=n()}}d[15&x]=A}break;case 65472:case 65473:case 65474:if(s)throw"Only single frame JPEGs supported";n(),(s={}).extended=65473===_,s.progressive=65474===_,s.precision=e[l++],s.scanLines=n(),s.samplesPerLine=n(),s.components=[],s.componentIds={};var M,S=e[l++],E=0,T=0;for(W=0;W<S;W++){M=e[l];var I=e[l+1]>>4,C=15&e[l+1];E<I&&(E=I),T<C&&(T=C);var k=e[l+2];b=s.components.push({h:I,v:C,quantizationTable:d[k],quantizationTableId:k,bitConversion:255/((1<<s.precision)-1)}),s.componentIds[M]=b-1,l+=3}s.maxH=E,s.maxV=T,a(s);break;case 65476:var P=n();for(W=2;W<P;){var B=e[l++],L=new Uint8Array(16),R=0;for(y=0;y<16;y++,l++)R+=L[y]=e[l];var D=new Uint8Array(R);for(y=0;y<R;y++,l++)D[y]=e[l];W+=17+R,(B>>4==0?g:p)[15&B]=u(L,D)}break;case 65501:n(),o=n();break;case 65498:n();var O=e[l++],G=[];for(W=0;W<O;W++){var F=s.componentIds[e[l++]];j=s.components[F];var N=e[l++];j.huffmanTableDC=g[N>>4],j.huffmanTableAC=p[15&N],G.push(j)}var z=e[l++],H=e[l++],U=e[l++],V=f(e,l,s,G,o,z,H,U>>4,15&U);l+=V;break;default:if(255==e[l-3]&&e[l-2]>=192&&e[l-2]<=254){l-=3;break}throw"unknown JPEG marker "+_.toString(16)}_=n()}switch(this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=c,this.adobe=h,this.components=[],s.components.length){case 1:this.colorspace=i.Grayscale;break;case 3:this.adobe?this.colorspace=i.AdobeRGB:this.colorspace=i.RGB;break;case 4:this.colorspace=i.CYMK;break;default:this.colorspace=i.Unknown}for(var W=0;W<s.components.length;W++){var j;(j=s.components[W]).quantizationTable||null===j.quantizationTableId||(j.quantizationTable=d[j.quantizationTableId]),this.components.push({output:m(0,j),scaleX:j.h/s.maxH,scaleY:j.v/s.maxV,blocksPerLine:j.blocksPerLine,blocksPerColumn:j.blocksPerColumn,bitConversion:j.bitConversion})}},getData16:function(t,e){if(1!==this.components.length)throw"Unsupported color mode";var i,n,r,a,s,o,l=this.width/t,c=this.height/e,h=0,u=this.components.length,f=new Uint16Array(t*e*u),p=new Uint16Array((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn*8);for(o=0;o<u;o++){for(var m,g,_,y=(i=this.components[o]).blocksPerLine,b=i.blocksPerColumn,v=y<<3,w=0,x=0;x<b;x++)for(var A=x<<3,M=0;M<y;M++){var S=d(i,x,M),E=(h=0,M<<3);for(m=0;m<8;m++){w=(A+m)*v;for(g=0;g<8;g++)p[w+E+g]=i.output[S+h++]}}for(n=i.scaleX*l,r=i.scaleY*c,h=o,s=0;s<e;s++)for(a=0;a<t;a++)_=(0|s*r)*v+(0|a*n),f[h]=p[_],h+=u}return f},getData:function(t,e){var i,n,r,a,s,o,l,c,h,u,f,p,m,_,y,b=this.width/t,v=this.height/e,w=0,x=this.components.length,A=t*e*x,M=new Uint8Array(A),S=new Uint8Array((this.components[0].blocksPerLine<<3)*this.components[0].blocksPerColumn*8);for(o=0;o<x;o++){for(var E,T,I,C=(i=this.components[o]).blocksPerLine,k=i.blocksPerColumn,P=C<<3,B=0,L=0;L<k;L++)for(var R=L<<3,D=0;D<C;D++){var O=d(i,L,D),G=(w=0,D<<3);for(E=0;E<8;E++){B=(R+E)*P;for(T=0;T<8;T++)S[B+G+T]=i.output[O+w++]*i.bitConversion}}for(n=i.scaleX*b,r=i.scaleY*v,w=o,s=0;s<e;s++)for(a=0;a<t;a++)I=(0|s*r)*P+(0|a*n),M[w]=S[I],w+=x}switch(x){case 1:case 2:break;case 3:if(y=!0,this.adobe&&this.adobe.transformCode?y=!0:void 0!==this.colorTransform&&(y=!!this.colorTransform),y)for(o=0;o<A;o+=x)l=M[o],c=M[o+1],p=g(l-179.456+1.402*(h=M[o+2])),m=g(l+135.459-.344*c-.714*h),_=g(l-226.816+1.772*c),M[o]=p,M[o+1]=m,M[o+2]=_;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";if(y=!1,this.adobe&&this.adobe.transformCode?y=!0:void 0!==this.colorTransform&&(y=!!this.colorTransform),y)for(o=0;o<A;o+=x)l=M[o],c=M[o+1],u=g(434.456-l-1.402*(h=M[o+2])),f=g(119.541-l+.344*c+.714*h),l=g(481.816-l-1.772*c),M[o]=u,M[o+1]=f,M[o+2]=l;break;default:throw"Unsupported color mode"}return M}},h}();"undefined"!==typeof t&&t.exports&&(t.exports=n)},function(t,e,i){"use strict";
/*! image-JPEG2000 - v0.3.1 - 2015-08-26 | https://github.com/OHIF/image-JPEG2000 */var n=function(){var t={LL:0,LH:1,HL:1,HH:2};function e(){this.failOnCorruptedImage=!1}function i(t,e){t.x0=Math.ceil(e.XOsiz/t.XRsiz),t.x1=Math.ceil(e.Xsiz/t.XRsiz),t.y0=Math.ceil(e.YOsiz/t.YRsiz),t.y1=Math.ceil(e.Ysiz/t.YRsiz),t.width=t.x1-t.x0,t.height=t.y1-t.y0}function n(t,e){for(var i,n=t.SIZ,r=[],a=Math.ceil((n.Xsiz-n.XTOsiz)/n.XTsiz),s=Math.ceil((n.Ysiz-n.YTOsiz)/n.YTsiz),o=0;o<s;o++)for(var l=0;l<a;l++)(i={}).tx0=Math.max(n.XTOsiz+l*n.XTsiz,n.XOsiz),i.ty0=Math.max(n.YTOsiz+o*n.YTsiz,n.YOsiz),i.tx1=Math.min(n.XTOsiz+(l+1)*n.XTsiz,n.Xsiz),i.ty1=Math.min(n.YTOsiz+(o+1)*n.YTsiz,n.Ysiz),i.width=i.tx1-i.tx0,i.height=i.ty1-i.ty0,i.components=[],r.push(i);t.tiles=r;for(var c=0,h=n.Csiz;c<h;c++)for(var u=e[c],d=0,f=r.length;d<f;d++){var p={};i=r[d],p.tcx0=Math.ceil(i.tx0/u.XRsiz),p.tcy0=Math.ceil(i.ty0/u.YRsiz),p.tcx1=Math.ceil(i.tx1/u.XRsiz),p.tcy1=Math.ceil(i.ty1/u.YRsiz),p.width=p.tcx1-p.tcx0,p.height=p.tcy1-p.tcy0,i.components[c]=p}}function a(t,e,i){var n=e.codingStyleParameters,r={};return n.entropyCoderWithCustomPrecincts?(r.PPx=n.precinctsSizes[i].PPx,r.PPy=n.precinctsSizes[i].PPy):(r.PPx=15,r.PPy=15),r.xcb_=i>0?Math.min(n.xcb,r.PPx-1):Math.min(n.xcb,r.PPx),r.ycb_=i>0?Math.min(n.ycb,r.PPy-1):Math.min(n.ycb,r.PPy),r}function l(t,e,i){var n=1<<i.PPx,r=1<<i.PPy,a=0===e.resLevel,s=1<<i.PPx+(a?0:-1),o=1<<i.PPy+(a?0:-1),l=e.trx1>e.trx0?Math.ceil(e.trx1/n)-Math.floor(e.trx0/n):0,c=e.try1>e.try0?Math.ceil(e.try1/r)-Math.floor(e.try0/r):0,h=l*c;e.precinctParameters={precinctWidth:n,precinctHeight:r,numprecinctswide:l,numprecinctshigh:c,numprecincts:h,precinctWidthInSubband:s,precinctHeightInSubband:o}}function c(t,e,i){var n,r,a,s,o=i.xcb_,l=i.ycb_,c=1<<o,h=1<<l,u=e.tbx0>>o,d=e.tby0>>l,f=e.tbx1+c-1>>o,p=e.tby1+h-1>>l,m=e.resolution.precinctParameters,g=[],_=[];for(r=d;r<p;r++)for(n=u;n<f;n++){if((a={cbx:n,cby:r,tbx0:c*n,tby0:h*r,tbx1:c*(n+1),tby1:h*(r+1)}).tbx0_=Math.max(e.tbx0,a.tbx0),a.tby0_=Math.max(e.tby0,a.tby0),a.tbx1_=Math.min(e.tbx1,a.tbx1),a.tby1_=Math.min(e.tby1,a.tby1),s=Math.floor((a.tbx0_-e.tbx0)/m.precinctWidthInSubband)+Math.floor((a.tby0_-e.tby0)/m.precinctHeightInSubband)*m.numprecinctswide,a.precinctNumber=s,a.subbandType=e.type,a.Lblock=3,!(a.tbx1_<=a.tbx0_||a.tby1_<=a.tby0_)){g.push(a);var y=_[s];void 0!==y?(n<y.cbxMin?y.cbxMin=n:n>y.cbxMax&&(y.cbxMax=n),r<y.cbyMin?y.cbxMin=r:r>y.cbyMax&&(y.cbyMax=r)):_[s]=y={cbxMin:n,cbyMin:r,cbxMax:n,cbyMax:r},a.precinct=y}}e.codeblockParameters={codeblockWidth:o,codeblockHeight:l,numcodeblockwide:f-u+1,numcodeblockhigh:p-d+1},e.codeblocks=g,e.precincts=_}function h(t,e,i){for(var n=[],r=t.subbands,a=0,s=r.length;a<s;a++)for(var o=r[a].codeblocks,l=0,c=o.length;l<c;l++){var h=o[l];h.precinctNumber===e&&n.push(h)}return{layerNumber:i,codeblocks:n}}function u(t,e,i,n,r){var a=t*n.minWidth,s=e*n.minHeight;if(a%i.width!=0||s%i.height!=0)return null;var o=s/i.width*r.precinctParameters.numprecinctswide;return a/i.height+o}function d(t){for(var e=t.components.length,i=Number.MAX_VALUE,n=Number.MAX_VALUE,r=0,a=0,s=new Array(e),o=0;o<e;o++){for(var l=t.components[o],c=l.codingStyleParameters.decompositionLevelsCount,h=new Array(c+1),u=Number.MAX_VALUE,d=Number.MAX_VALUE,f=0,p=0,m=1,g=c;g>=0;--g){var _=l.resolutions[g],y=m*_.precinctParameters.precinctWidth,b=m*_.precinctParameters.precinctHeight;u=Math.min(u,y),d=Math.min(d,b),f=Math.max(f,_.precinctParameters.numprecinctswide),p=Math.max(p,_.precinctParameters.numprecinctshigh),h[g]={width:y,height:b},m<<=1}i=Math.min(i,u),n=Math.min(n,d),r=Math.max(r,f),a=Math.max(a,p),s[o]={resolutions:h,minWidth:u,minHeight:d,maxNumWide:f,maxNumHigh:p}}return{components:s,minWidth:i,minHeight:n,maxNumWide:r,maxNumHigh:a}}function f(t){for(var e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=e.Csiz,s=0;s<r;s++){for(var o=n.components[s],f=o.codingStyleParameters.decompositionLevelsCount,p=[],m=[],g=0;g<=f;g++){var _,y=a(0,o,g),b={},v=1<<f-g;if(b.trx0=Math.ceil(o.tcx0/v),b.try0=Math.ceil(o.tcy0/v),b.trx1=Math.ceil(o.tcx1/v),b.try1=Math.ceil(o.tcy1/v),b.resLevel=g,l(0,b,y),p.push(b),0===g)(_={}).type="LL",_.tbx0=Math.ceil(o.tcx0/v),_.tby0=Math.ceil(o.tcy0/v),_.tbx1=Math.ceil(o.tcx1/v),_.tby1=Math.ceil(o.tcy1/v),_.resolution=b,c(0,_,y),m.push(_),b.subbands=[_];else{var w=1<<f-g+1,x=[];(_={}).type="HL",_.tbx0=Math.ceil(o.tcx0/w-.5),_.tby0=Math.ceil(o.tcy0/w),_.tbx1=Math.ceil(o.tcx1/w-.5),_.tby1=Math.ceil(o.tcy1/w),_.resolution=b,c(0,_,y),m.push(_),x.push(_),(_={}).type="LH",_.tbx0=Math.ceil(o.tcx0/w),_.tby0=Math.ceil(o.tcy0/w-.5),_.tbx1=Math.ceil(o.tcx1/w),_.tby1=Math.ceil(o.tcy1/w-.5),_.resolution=b,c(0,_,y),m.push(_),x.push(_),(_={}).type="HH",_.tbx0=Math.ceil(o.tcx0/w-.5),_.tby0=Math.ceil(o.tcy0/w-.5),_.tbx1=Math.ceil(o.tcx1/w-.5),_.tby1=Math.ceil(o.tcy1/w-.5),_.resolution=b,c(0,_,y),m.push(_),x.push(_),b.subbands=x}}o.resolutions=p,o.subbands=m}var A=n.codingStyleDefaultParameters.progressionOrder;switch(A){case 0:n.packetsIterator=new function(t){for(var e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=n.codingStyleDefaultParameters.layersCount,a=e.Csiz,s=0,o=0;o<a;o++)s=Math.max(s,n.components[o].codingStyleParameters.decompositionLevelsCount);var l=0,c=0,u=0,d=0;this.nextPacket=function(){for(;l<r;l++){for(;c<=s;c++){for(;u<a;u++){var t=n.components[u];if(!(c>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[c],i=e.precinctParameters.numprecincts;d<i;){var o=h(e,d,l);return d++,o}d=0}}u=0}c=0}}}(t);break;case 1:n.packetsIterator=new function(t){for(var e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=n.codingStyleDefaultParameters.layersCount,a=e.Csiz,s=0,o=0;o<a;o++)s=Math.max(s,n.components[o].codingStyleParameters.decompositionLevelsCount);var l=0,c=0,u=0,d=0;this.nextPacket=function(){for(;l<=s;l++){for(;c<r;c++){for(;u<a;u++){var t=n.components[u];if(!(l>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[l],i=e.precinctParameters.numprecincts;d<i;){var o=h(e,d,c);return d++,o}d=0}}u=0}c=0}}}(t);break;case 2:n.packetsIterator=new function(t){var e,i,n,r,a=t.SIZ,s=t.currentTile.index,o=t.tiles[s],l=o.codingStyleDefaultParameters.layersCount,c=a.Csiz,u=0;for(n=0;n<c;n++){var d=o.components[n];u=Math.max(u,d.codingStyleParameters.decompositionLevelsCount)}var f=new Int32Array(u+1);for(i=0;i<=u;++i){var p=0;for(n=0;n<c;++n){var m=o.components[n].resolutions;i<m.length&&(p=Math.max(p,m[i].precinctParameters.numprecincts))}f[i]=p}e=0,i=0,n=0,r=0,this.nextPacket=function(){for(;i<=u;i++){for(;r<f[i];r++){for(;n<c;n++){var t=o.components[n];if(!(i>t.codingStyleParameters.decompositionLevelsCount)){var a=t.resolutions[i],s=a.precinctParameters.numprecincts;if(!(r>=s)){for(;e<l;){var d=h(a,r,e);return e++,d}e=0}}}n=0}r=0}}}(t);break;case 3:n.packetsIterator=new function(t){var e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=n.codingStyleDefaultParameters.layersCount,a=e.Csiz,s=d(n),o=s,l=0,c=0,f=0,p=0,m=0;this.nextPacket=function(){for(;m<o.maxNumHigh;m++){for(;p<o.maxNumWide;p++){for(;f<a;f++){for(var t=n.components[f],e=t.codingStyleParameters.decompositionLevelsCount;c<=e;c++){var i=t.resolutions[c],d=s.components[f].resolutions[c],g=u(p,m,d,o,i);if(null!==g){for(;l<r;){var _=h(i,g,l);return l++,_}l=0}}c=0}f=0}p=0}}}(t);break;case 4:n.packetsIterator=new function(t){var e=t.SIZ,i=t.currentTile.index,n=t.tiles[i],r=n.codingStyleDefaultParameters.layersCount,a=e.Csiz,s=d(n),o=0,l=0,c=0,f=0,p=0;this.nextPacket=function(){for(;c<a;++c){for(var t=n.components[c],e=s.components[c],i=t.codingStyleParameters.decompositionLevelsCount;p<e.maxNumHigh;p++){for(;f<e.maxNumWide;f++){for(;l<=i;l++){var d=t.resolutions[l],m=e.resolutions[l],g=u(f,p,m,e,d);if(null!==g){for(;o<r;){var _=h(d,g,o);return o++,_}o=0}}l=0}f=0}p=0}}}(t);break;default:throw new Error("JPX Error: Unsupported progression order "+A)}}function _(t,e,i,n){var r,a=0,s=0,o=!1;function l(t){for(;s<t;){if(i+a>=e.length)throw new Error("Unexpected EOF");var n=e[i+a];a++,o?(r=r<<7|n,s+=7,o=!1):(r=r<<8|n,s+=8),255===n&&(o=!0)}return r>>>(s-=t)&(1<<t)-1}function c(t){return 255===e[i+a-1]&&e[i+a]===t?(h(1),!0):255===e[i+a]&&e[i+a+1]===t&&(h(2),!0)}function h(t){a+=t}function u(){s=0,o&&(a++,o=!1)}function d(){if(0===l(1))return 1;if(0===l(1))return 2;var t=l(2);return t<3?t+3:(t=l(5))<31?t+6:(t=l(7))+37}for(var f=t.currentTile.index,m=t.tiles[f],g=t.COD.sopMarkerUsed,_=t.COD.ephMarkerUsed,y=m.packetsIterator;a<n;)try{u(),g&&c(145)&&h(4);var b=y.nextPacket();if(void 0===b)return;if(!l(1))continue;for(var v,A=b.layerNumber,M=[],S=0,E=b.codeblocks.length;S<E;S++){var T=(v=b.codeblocks[S]).precinct,I=v.cbx-T.cbxMin,C=v.cby-T.cbyMin,k=!1,P=!1;if(void 0!==v.included)k=!!l(1);else{var B,L;if(void 0!==(T=v.precinct).inclusionTree)B=T.inclusionTree;else{var R=T.cbxMax-T.cbxMin+1,D=T.cbyMax-T.cbyMin+1;B=new x(R,D),L=new w(R,D),T.inclusionTree=B,T.zeroBitPlanesTree=L}for(B.reset(I,C,A);;){if(a>=e.length)return;if(B.isAboveThreshold())break;if(B.isKnown())B.nextLevel();else if(l(1)){if(B.setKnown(),B.isLeaf()){v.included=!0,k=P=!0;break}B.nextLevel()}else B.incrementValue()}}if(k){if(P){for((L=T.zeroBitPlanesTree).reset(I,C);;){if(a>=e.length)return;if(l(1)){if(!L.nextLevel())break}else L.incrementValue()}v.zeroBitPlanes=L.value}for(var O=d();l(1);)v.Lblock++;var G=p(O),F=l((O<1<<G?G-1:G)+v.Lblock);M.push({codeblock:v,codingpasses:O,dataLength:F})}}for(u(),_&&c(146);M.length>0;){var N=M.shift();void 0===(v=N.codeblock).data&&(v.data=[]),v.data.push({data:e,start:i+a,end:i+a+N.dataLength,codingpasses:N.codingpasses}),a+=N.dataLength}}catch(t){return}return a}function y(t,e,i,n,a,s,o,l){for(var c=n.tbx0,h=n.tby0,u=n.tbx1-n.tbx0,d=n.codeblocks,f="H"===n.type.charAt(0)?1:0,p="H"===n.type.charAt(1)?e:0,m=0,g=d.length;m<g;++m){var _=d[m],y=_.tbx1_-_.tbx0_,b=_.tby1_-_.tby0_;if(0!==y&&0!==b&&void 0!==_.data){var v,w;v=new A(y,b,_.subbandType,_.zeroBitPlanes,s),w=2;var x,M,S,E=_.data,T=0,I=0;for(x=0,M=E.length;x<M;x++)T+=(S=E[x]).end-S.start,I+=S.codingpasses;var C=new Int16Array(T),k=0;for(x=0,M=E.length;x<M;x++){var P=(S=E[x]).data.subarray(S.start,S.end);C.set(P,k),k+=P.length}var B=new r(C,0,T);for(v.setDecoder(B),x=0;x<I;x++){switch(w){case 0:v.runSignificancePropogationPass();break;case 1:v.runMagnitudeRefinementPass();break;case 2:v.runCleanupPass(),l&&v.checkSegmentationSymbol()}w=(w+1)%3}var L,R,D,O=_.tbx0_-c+(_.tby0_-h)*u,G=v.coefficentsSign,F=v.coefficentsMagnitude,N=v.bitsDecoded,z=o?0:.5;k=0;var H="LL"!==n.type;for(x=0;x<b;x++){var U=2*(O/u|0)*(e-u)+f+p;for(L=0;L<y;L++){if(0!==(R=F[k])){R=(R+z)*a,0!==G[k]&&(R=-R),D=N[k];var V=H?U+(O<<1):O;t[V]=o&&D>=s?R:R*(1<<s-D)}O++,k++}O+=u-y}}}}function b(e,i,n){for(var r=i.components[n],a=r.codingStyleParameters,s=r.quantizationParameters,o=a.decompositionLevelsCount,l=s.SPqcds,c=s.scalarExpounded,h=s.guardBits,u=a.segmentationSymbolUsed,d=e.components[n].precision,f=a.reversibleTransformation,p=f?new E:new S,m=[],g=0,_=0;_<=o;_++){for(var b=r.resolutions[_],v=b.trx1-b.trx0,w=b.try1-b.try0,x=new Float32Array(v*w),A=0,M=b.subbands.length;A<M;A++){var T,I;c?(T=l[g].mu,I=l[g].epsilon,g++):(T=l[0].mu,I=l[0].epsilon+(_>0?1-_:0));var C=b.subbands[A],k=t[C.type];y(x,v,0,C,f?1:Math.pow(2,d+k-I)*(1+T/2048),h+I-1,f,u)}m.push({width:v,height:w,items:x})}var P=p.calculate(m,r.tcx0,r.tcy0);return{left:r.tcx0,top:r.tcy0,width:P.width,height:P.height,items:P.items}}function v(t,e){for(var i=t.SIZ.Csiz,n=t.tiles[e],r=0;r<i;r++){var a=n.components[r],s=void 0!==t.currentTile.QCC[r]?t.currentTile.QCC[r]:t.currentTile.QCD;a.quantizationParameters=s;var o=void 0!==t.currentTile.COC[r]?t.currentTile.COC[r]:t.currentTile.COD;a.codingStyleParameters=o}n.codingStyleDefaultParameters=t.currentTile.COD}e.prototype={parse:function(t){if(65359!==m(t,0))for(var e=0,i=t.length;e<i;){var n=8,r=g(t,e),a=g(t,e+4);if(e+=n,1===r&&(r=4294967296*g(t,e)+g(t,e+4),e+=8,n+=8),0===r&&(r=i-e+n),r<n)throw new Error("JPX Error: Invalid box field size");var l=r-n,c=!0;switch(a){case 1785737832:c=!1;break;case 1668246642:var h=t[e];t[e+1],t[e+2];if(1===h){var u=g(t,e+3);switch(u){case 16:case 17:case 18:break;default:o("Unknown colorspace "+u)}}else 2===h&&s("ICC profile not supported");break;case 1785737827:this.parseCodestream(t,e,e+l);break;case 1783636e3:218793738!==g(t,e)&&o("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:o("Unsupported header type "+a+" ("+String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a)+")")}c&&(e+=l)}else this.parseCodestream(t,0,t.length)},parseImageProperties:function(t){for(var e=t.getByte();e>=0;){if(65361===(e<<8|(e=t.getByte()))){t.skip(4);var i=t.getInt32()>>>0,n=t.getInt32()>>>0,r=t.getInt32()>>>0,a=t.getInt32()>>>0;t.skip(16);var s=t.getUint16();return this.width=i-r,this.height=n-a,this.componentsCount=s,void(this.bitsPerComponent=8)}}throw new Error("JPX Error: No size marker found in JPX stream")},parseCodestream:function(t,e,r){var a={};try{for(var s=!1,l=e;l+1<r;){var c=m(t,l);l+=2;var h,u,d,p,y,w,x=0;switch(c){case 65359:a.mainHeader=!0;break;case 65497:break;case 65361:x=m(t,l);var A={};A.Xsiz=g(t,l+4),A.Ysiz=g(t,l+8),A.XOsiz=g(t,l+12),A.YOsiz=g(t,l+16),A.XTsiz=g(t,l+20),A.YTsiz=g(t,l+24),A.XTOsiz=g(t,l+28),A.YTOsiz=g(t,l+32);var M=m(t,l+36);A.Csiz=M;var S=[];h=l+38;for(var E=0;E<M;E++){var T={precision:1+(127&t[h]),isSigned:!!(128&t[h]),XRsiz:t[h+1],YRsiz:t[h+1]};i(T,A),S.push(T)}a.SIZ=A,a.components=S,n(a,S),a.QCC=[],a.COC=[];break;case 65372:x=m(t,l);var I={};switch(h=l+2,31&(u=t[h++])){case 0:p=8,y=!0;break;case 1:p=16,y=!1;break;case 2:p=16,y=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+u)}for(I.noQuantization=8===p,I.scalarExpounded=y,I.guardBits=u>>5,d=[];h<x+l;){var C={};8===p?(C.epsilon=t[h++]>>3,C.mu=0):(C.epsilon=t[h]>>3,C.mu=(7&t[h])<<8|t[h+1],h+=2),d.push(C)}I.SPqcds=d,a.mainHeader?a.QCD=I:(a.currentTile.QCD=I,a.currentTile.QCC=[]);break;case 65373:x=m(t,l);var k,P={};switch(h=l+2,a.SIZ.Csiz<257?k=t[h++]:(k=m(t,h),h+=2),31&(u=t[h++])){case 0:p=8,y=!0;break;case 1:p=16,y=!1;break;case 2:p=16,y=!0;break;default:throw new Error("JPX Error: Invalid SQcd value "+u)}for(P.noQuantization=8===p,P.scalarExpounded=y,P.guardBits=u>>5,d=[];h<x+l;)C={},8===p?(C.epsilon=t[h++]>>3,C.mu=0):(C.epsilon=t[h]>>3,C.mu=(7&t[h])<<8|t[h+1],h+=2),d.push(C);P.SPqcds=d,a.mainHeader?a.QCC[k]=P:a.currentTile.QCC[k]=P;break;case 65362:x=m(t,l);var B={};h=l+2;var L=t[h++];B.entropyCoderWithCustomPrecincts=!!(1&L),B.sopMarkerUsed=!!(2&L),B.ephMarkerUsed=!!(4&L),B.progressionOrder=t[h++],B.layersCount=m(t,h),h+=2,B.multipleComponentTransform=t[h++],B.decompositionLevelsCount=t[h++],B.xcb=2+(15&t[h++]),B.ycb=2+(15&t[h++]);var R=t[h++];if(B.selectiveArithmeticCodingBypass=!!(1&R),B.resetContextProbabilities=!!(2&R),B.terminationOnEachCodingPass=!!(4&R),B.verticalyStripe=!!(8&R),B.predictableTermination=!!(16&R),B.segmentationSymbolUsed=!!(32&R),B.reversibleTransformation=t[h++],B.entropyCoderWithCustomPrecincts){for(var D=[];h<x+l;){var O=t[h++];D.push({PPx:15&O,PPy:O>>4})}B.precinctsSizes=D}var G=[];if(B.selectiveArithmeticCodingBypass&&G.push("selectiveArithmeticCodingBypass"),B.resetContextProbabilities&&G.push("resetContextProbabilities"),B.terminationOnEachCodingPass&&G.push("terminationOnEachCodingPass"),B.verticalyStripe&&G.push("verticalyStripe"),B.predictableTermination&&G.push("predictableTermination"),G.length>0)throw s=!0,new Error("JPX Error: Unsupported COD options ("+G.join(", ")+")");a.mainHeader?a.COD=B:(a.currentTile.COD=B,a.currentTile.COC=[]);break;case 65424:x=m(t,l),(w={}).index=m(t,l+2),w.length=g(t,l+4),w.dataEnd=w.length+l-2,w.partIndex=t[l+8],w.partsCount=t[l+9],a.mainHeader=!1,0===w.partIndex&&(w.COD=a.COD,w.COC=a.COC.slice(0),w.QCD=a.QCD,w.QCC=a.QCC.slice(0)),a.currentTile=w;break;case 65427:0===(w=a.currentTile).partIndex&&(v(a,w.index),f(a)),_(a,t,l,x=w.dataEnd-l);break;case 65365:case 65367:case 65368:case 65380:x=m(t,l);break;case 65363:throw new Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("JPX Error: Unknown codestream code: "+c.toString(16))}l+=x}}catch(t){if(s||this.failOnCorruptedImage)throw t;o("Trying to recover from "+t.message)}this.tiles=function(t){for(var e=t.SIZ,i=t.components,n=e.Csiz,r=[],a=0,s=t.tiles.length;a<s;a++){var o,l=t.tiles[a],c=[];for(o=0;o<n;o++)c[o]=b(t,l,o);var h=c[0],u=i[0].isSigned;if(u)var d=new Int16Array(h.items.length*n);else var d=new Uint16Array(h.items.length*n);var f,p,m,g,_,y,v,w,x,A,M,S,E,T,I,C={left:h.left,top:h.top,width:h.width,height:h.height,items:d},k=0;if(l.codingStyleDefaultParameters.multipleComponentTransform){var P=4===n,B=c[0].items,L=c[1].items,R=c[2].items,D=P?c[3].items:null;f=i[0].precision-8,p=.5+(128<<f),g=-(_=.5*(m=255*(1<<f)));var O=l.components[0],G=n-3;if(v=B.length,O.codingStyleParameters.reversibleTransformation)for(y=0;y<v;y++,k+=G)w=B[y]+p,x=L[y],A=R[y],M=(S=w-(A+x>>2))+A,E=S+x,d[k++]=M<=0?0:M>=m?255:M>>f,d[k++]=S<=0?0:S>=m?255:S>>f,d[k++]=E<=0?0:E>=m?255:E>>f;else for(y=0;y<v;y++,k+=G)w=B[y]+p,x=L[y],A=R[y],M=w+1.402*A,S=w-.34413*x-.71414*A,E=w+1.772*x,d[k++]=M<=0?0:M>=m?255:M>>f,d[k++]=S<=0?0:S>=m?255:S>>f,d[k++]=E<=0?0:E>=m?255:E>>f;if(P)for(y=0,k=3;y<v;y++,k+=4)T=D[y],d[k]=T<=g?0:T>=_?255:T+p>>f}else for(o=0;o<n;o++)if(8===i[o].precision){var F=c[o].items;for(f=i[o].precision-8,p=.5+(128<<f),g=-(m=127.5*(1<<f)),k=o,y=0,v=F.length;y<v;y++)I=F[y],d[k]=I<=g?0:I>=m?255:I+p>>f,k+=n}else{var u=i[o].isSigned,F=c[o].items;if(u)for(k=o,y=0,v=F.length;y<v;y++)d[k]=F[y],k+=n;else{f=i[o].precision-8,p=.5+(128<<f);var N=Math.pow(2,i[o].precision)-1;for(k=o,y=0,v=F.length;y<v;y++)I=F[y],d[k]=Math.max(Math.min(I+p,N),0),k+=n}}r.push(C)}return r}(a),this.width=a.SIZ.Xsiz-a.SIZ.XOsiz,this.height=a.SIZ.Ysiz-a.SIZ.YOsiz,this.componentsCount=a.SIZ.Csiz}};var w=function(){function t(t,e){var i=p(Math.max(t,e))+1;this.levels=[];for(var n=0;n<i;n++){var r={width:t,height:e,items:[]};this.levels.push(r),t=Math.ceil(t/2),e=Math.ceil(e/2)}}return t.prototype={reset:function(t,e){for(var i,n=0,r=0;n<this.levels.length;){var a=t+e*(i=this.levels[n]).width;if(void 0!==i.items[a]){r=i.items[a];break}i.index=a,t>>=1,e>>=1,n++}n--,(i=this.levels[n]).items[i.index]=r,this.currentLevel=n,delete this.value},incrementValue:function(){var t=this.levels[this.currentLevel];t.items[t.index]++},nextLevel:function(){var t=this.currentLevel,e=this.levels[t],i=e.items[e.index];return--t<0?(this.value=i,!1):(this.currentLevel=t,(e=this.levels[t]).items[e.index]=i,!0)}},t}(),x=function(){function t(t,e){var i=p(Math.max(t,e))+1;this.levels=[];for(var n=0;n<i;n++){for(var r=new Uint8Array(t*e),a=new Uint8Array(t*e),s=0,o=r.length;s<o;s++)r[s]=0,a[s]=0;var l={width:t,height:e,items:r,status:a};this.levels.push(l),t=Math.ceil(t/2),e=Math.ceil(e/2)}}return t.prototype={reset:function(t,e,i){this.currentStopValue=i;for(var n=0;n<this.levels.length;){var r=this.levels[n],a=t+e*r.width;r.index=a,t>>=1,e>>=1,n++}this.currentLevel=this.levels.length-1,this.minValue=this.levels[this.currentLevel].items[0]},incrementValue:function(){var t=this.levels[this.currentLevel];t.items[t.index]=t.items[t.index]+1,t.items[t.index]>this.minValue&&(this.minValue=t.items[t.index])},nextLevel:function(){var t=this.currentLevel;if(--t<0)return!1;this.currentLevel=t;var e=this.levels[t];return e.items[e.index]<this.minValue?e.items[e.index]=this.minValue:e.items[e.index]>this.minValue&&(this.minValue=e.items[e.index]),!0},isLeaf:function(){return 0===this.currentLevel},isAboveThreshold:function(){var t=this.currentLevel,e=this.levels[t];return e.items[e.index]>this.currentStopValue},isKnown:function(){var t=this.currentLevel,e=this.levels[t];return e.status[e.index]>0},setKnown:function(){var t=this.currentLevel,e=this.levels[t];e.status[e.index]=1}},t}(),A=function(){var t=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),e=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),i=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);function n(n,r,a,s,o){this.width=n,this.height=r,this.contextLabelTable="HH"===a?i:"HL"===a?e:t;var l=n*r;this.neighborsSignificance=new Uint8Array(l),this.coefficentsSign=new Uint8Array(l),this.coefficentsMagnitude=o>14?new Uint32Array(l):o>6?new Uint16Array(l):new Uint8Array(l),this.processingFlags=new Uint8Array(l);var c=new Uint8Array(l);if(0!==s)for(var h=0;h<l;h++)c[h]=s;this.bitsDecoded=c,this.reset()}return n.prototype={setDecoder:function(t){this.decoder=t},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(t,e,i){var n,r=this.neighborsSignificance,a=this.width,s=this.height,o=e>0,l=e+1<a;t>0&&(n=i-a,o&&(r[n-1]+=16),l&&(r[n+1]+=16),r[n]+=4),t+1<s&&(n=i+a,o&&(r[n-1]+=16),l&&(r[n+1]+=16),r[n]+=4),o&&(r[i-1]+=1),l&&(r[i+1]+=1),r[i]|=128},runSignificancePropogationPass:function(){for(var t=this.decoder,e=this.width,i=this.height,n=this.coefficentsMagnitude,r=this.coefficentsSign,a=this.neighborsSignificance,s=this.processingFlags,o=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded,h=0;h<i;h+=4)for(var u=0;u<e;u++)for(var d=h*e+u,f=0;f<4;f++,d+=e){var p=h+f;if(p>=i)break;if(s[d]&=-2,!n[d]&&a[d]){var m=l[a[d]];if(t.readBit(o,m)){var g=this.decodeSignBit(p,u,d);r[d]=g,n[d]=1,this.setNeighborsSignificance(p,u,d),s[d]|=2}c[d]++,s[d]|=1}}},decodeSignBit:function(t,e,i){var n,r,a,s,o,l,c=this.width,h=this.height,u=this.coefficentsMagnitude,d=this.coefficentsSign;s=e>0&&0!==u[i-1],e+1<c&&0!==u[i+1]?(a=d[i+1],n=s?1-a-(r=d[i-1]):1-a-a):n=s?1-(r=d[i-1])-r:0;var f=3*n;return s=t>0&&0!==u[i-c],t+1<h&&0!==u[i+c]?(a=d[i+c],n=s?1-a-(r=d[i-c])+f:1-a-a+f):n=s?1-(r=d[i-c])-r+f:f,n>=0?(o=9+n,l=this.decoder.readBit(this.contexts,o)):(o=9-n,l=1^this.decoder.readBit(this.contexts,o)),l},runMagnitudeRefinementPass:function(){for(var t,e=this.decoder,i=this.width,n=this.height,r=this.coefficentsMagnitude,a=this.neighborsSignificance,s=this.contexts,o=this.bitsDecoded,l=this.processingFlags,c=i*n,h=4*i,u=0;u<c;u=t){t=Math.min(c,u+h);for(var d=0;d<i;d++)for(var f=u+d;f<t;f+=i)if(r[f]&&0==(1&l[f])){var p=16;if(0!=(2&l[f]))l[f]^=2,p=0===(127&a[f])?15:14;var m=e.readBit(s,p);r[f]=r[f]<<1|m,o[f]++,l[f]|=1}}},runCleanupPass:function(){for(var t,e=this.decoder,i=this.width,n=this.height,r=this.neighborsSignificance,a=this.coefficentsMagnitude,s=this.coefficentsSign,o=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded,h=this.processingFlags,u=i,d=2*i,f=3*i,p=0;p<n;p=t){t=Math.min(p+4,n);for(var m=p*i,g=p+3<n,_=0;_<i;_++){var y,b=m+_,v=0,w=b,x=p;if(g&&0===h[b]&&0===h[b+u]&&0===h[b+d]&&0===h[b+f]&&0===r[b]&&0===r[b+u]&&0===r[b+d]&&0===r[b+f]){if(!e.readBit(o,18)){c[b]++,c[b+u]++,c[b+d]++,c[b+f]++;continue}0!==(v=e.readBit(o,17)<<1|e.readBit(o,17))&&(x=p+v,w+=v*i),y=this.decodeSignBit(x,_,w),s[w]=y,a[w]=1,this.setNeighborsSignificance(x,_,w),h[w]|=2,w=b;for(var A=p;A<=x;A++,w+=i)c[w]++;v++}for(x=p+v;x<t;x++,w+=i)if(!a[w]&&0==(1&h[w])){var M=l[r[w]];1===e.readBit(o,M)&&(y=this.decodeSignBit(x,_,w),s[w]=y,a[w]=1,this.setNeighborsSignificance(x,_,w),h[w]|=2),c[w]++}}}},checkSegmentationSymbol:function(){var t=this.decoder,e=this.contexts;if(10!==(t.readBit(e,17)<<3|t.readBit(e,17)<<2|t.readBit(e,17)<<1|t.readBit(e,17)))throw new Error("JPX Error: Invalid segmentation symbol")}},n}(),M=function(){function t(){}return t.prototype.calculate=function(t,e,i){for(var n=t[0],r=1,a=t.length;r<a;r++)n=this.iterate(n,t[r],e,i);return n},t.prototype.extend=function(t,e,i){var n=e-1,r=e+1,a=e+i-2,s=e+i;t[n--]=t[r++],t[s++]=t[a--],t[n--]=t[r++],t[s++]=t[a--],t[n--]=t[r++],t[s++]=t[a--],t[n]=t[r],t[s]=t[a]},t.prototype.iterate=function(t,e,i,n){var r,a,s,o,l,c,h=t.width,u=t.height,d=t.items,f=e.width,p=e.height,m=e.items;for(s=0,r=0;r<u;r++)for(o=2*r*f,a=0;a<h;a++,s++,o+=2)m[o]=d[s];d=t.items=null;var g=new Float32Array(f+8);if(1===f){if(0!=(1&i))for(c=0,s=0;c<p;c++,s+=f)m[s]*=.5}else for(c=0,s=0;c<p;c++,s+=f)g.set(m.subarray(s,s+f),4),this.extend(g,4,f),this.filter(g,4,f),m.set(g.subarray(4,4+f),s);var _=16,y=[];for(r=0;r<_;r++)y.push(new Float32Array(p+8));var b,v=0;if(t=4+p,1===p){if(0!=(1&n))for(l=0;l<f;l++)m[l]*=.5}else for(l=0;l<f;l++){if(0===v){for(_=Math.min(f-l,_),s=l,o=4;o<t;s+=f,o++)for(b=0;b<_;b++)y[b][o]=m[s+b];v=_}var w=y[--v];if(this.extend(w,4,p),this.filter(w,4,p),0===v)for(s=l-_+1,o=4;o<t;s+=f,o++)for(b=0;b<_;b++)m[s+b]=y[b][o]}return{width:f,height:p,items:m}},t}(),S=function(){function t(){M.call(this)}return t.prototype=Object.create(M.prototype),t.prototype.filter=function(t,e,i){var n,r,a,s,o=i>>1,l=-1.586134342059924,c=-.052980118572961,h=.882911075530934,u=.443506852043971,d=1.230174104914001;for(n=(e|=0)-3,r=o+4;r--;n+=2)t[n]*=.8128930661159609;for(a=u*t[(n=e-2)-1],r=o+3;r--&&(s=u*t[n+1],t[n]=d*t[n]-a-s,r--);n+=2)a=u*t[(n+=2)+1],t[n]=d*t[n]-a-s;for(a=h*t[(n=e-1)-1],r=o+2;r--&&(s=h*t[n+1],t[n]-=a+s,r--);n+=2)a=h*t[(n+=2)+1],t[n]-=a+s;for(a=c*t[(n=e)-1],r=o+1;r--&&(s=c*t[n+1],t[n]-=a+s,r--);n+=2)a=c*t[(n+=2)+1],t[n]-=a+s;if(0!==o)for(a=l*t[(n=e+1)-1],r=o;r--&&(s=l*t[n+1],t[n]-=a+s,r--);n+=2)a=l*t[(n+=2)+1],t[n]-=a+s},t}(),E=function(){function t(){M.call(this)}return t.prototype=Object.create(M.prototype),t.prototype.filter=function(t,e,i){var n,r,a=i>>1;for(n=e|=0,r=a+1;r--;n+=2)t[n]-=t[n-1]+t[n+1]+2>>2;for(n=e+1,r=a;r--;n+=2)t[n]+=t[n-1]+t[n+1]>>1},t}();return e}(),r=function(){var t=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];function e(t,e,i){this.data=t,this.bp=e,this.dataEnd=i,this.chigh=t[e],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}return e.prototype={byteIn:function(){var t=this.data,e=this.bp;255===t[e]?t[e+1]>143?(this.clow+=65280,this.ct=8):(e++,this.clow+=t[e]<<9,this.ct=7,this.bp=e):(e++,this.clow+=e<this.dataEnd?t[e]<<8:65280,this.ct=8,this.bp=e);this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(e,i){var n,r=e[i]>>1,a=1&e[i],s=t[r],o=s.qe,l=this.a-o;if(this.chigh<o)l<o?(l=o,n=a,r=s.nmps):(l=o,n=1^a,1===s.switchFlag&&(a=n),r=s.nlps);else{if(this.chigh-=o,0!=(32768&l))return this.a=l,a;l<o?(n=1^a,1===s.switchFlag&&(a=n),r=s.nlps):(n=a,r=s.nmps)}do{0===this.ct&&this.byteIn(),l<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&l));return this.a=l,e[i]=r<<1|a,n}},e}(),a="undefined"==typeof window?this:window;a.PDFJS||(a.PDFJS={}),a.PDFJS.pdfBug=!1,PDFJS.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};PDFJS.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};function s(t){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.infos&&console.log("Info: "+t)}function o(t){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.warnings&&console.log("Warning: "+t)}PDFJS.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},PDFJS.UnsupportedManager=function(){var t=[];return{listen:function(e){t.push(e)},notify:function(e){o('Unsupported feature "'+e+'"');for(var i=0,n=t.length;i<n;i++)t[i](e)}}}();function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!1}),i}PDFJS.isValidUrl=function(t,e){if(!t)return!1;var i=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(t);if(!i)return e;switch(i=i[0].toLowerCase()){case"http":case"https":case"ftp":case"mailto":case"tel":return!0;default:return!1}},PDFJS.shadow=l;PDFJS.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var c=function(){function t(t,e){this.name="PasswordException",this.message=t,this.code=e}return t.prototype=new Error,t.constructor=t,t}();PDFJS.PasswordException=c;var h=function(){function t(t,e){this.name="UnknownErrorException",this.message=t,this.details=e}return t.prototype=new Error,t.constructor=t,t}();PDFJS.UnknownErrorException=h;var u=function(){function t(t){this.name="InvalidPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();PDFJS.InvalidPDFException=u;var d=function(){function t(t){this.name="MissingPDFException",this.message=t}return t.prototype=new Error,t.constructor=t,t}();PDFJS.MissingPDFException=d;var f=function(){function t(t,e){this.name="UnexpectedResponseException",this.message=t,this.status=e}return t.prototype=new Error,t.constructor=t,t}();PDFJS.UnexpectedResponseException=f;(function(){function t(t){this.message=t}t.prototype=new Error,t.prototype.name="NotImplementedException",t.constructor=t})(),function(){function t(t,e){this.begin=t,this.end=e,this.message="Missing data ["+t+", "+e+")"}t.prototype=new Error,t.prototype.name="MissingDataException",t.constructor=t}(),function(){function t(t){this.message=t}t.prototype=new Error,t.prototype.name="XRefParseException",t.constructor=t}();function p(t){for(var e=1,i=0;t>e;)e<<=1,i++;return i}function m(t,e){return t[e]<<8|t[e+1]}function g(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}Object.defineProperty(PDFJS,"isLittleEndian",{configurable:!0,get:function(){return l(PDFJS,"isLittleEndian",function(){var t=new Uint8Array(2);return t[0]=1,1===new Uint16Array(t.buffer)[0]}())}}),Object.defineProperty(PDFJS,"hasCanvasTypedArrays",{configurable:!0,get:function(){return l(PDFJS,"hasCanvasTypedArrays",function(){var t=document.createElement("canvas");return t.width=t.height=1,void 0!==t.getContext("2d").createImageData(1,1).data.buffer}())}});!function(){function t(n,r){this.buffer=n,this.byteLength=n.length,this.length=void 0===r?this.byteLength>>2:r,function(n){for(;e<n;)Object.defineProperty(t.prototype,e,i(e)),e++}(this.length)}t.prototype=Object.create(null);var e=0;function i(t){return{get:function(){var e=this.buffer,i=t<<2;return(e[i]|e[i+1]<<8|e[i+2]<<16|e[i+3]<<24)>>>0},set:function(e){var i=this.buffer,n=t<<2;i[n]=255&e,i[n+1]=e>>8&255,i[n+2]=e>>16&255,i[n+3]=e>>>24&255}}}}();var _=PDFJS.Util=function(){function t(){}var e=["rgb(",0,",",0,",",0,")"];return t.makeCssRgb=function(t,i,n){return e[1]=t,e[3]=i,e[5]=n,e.join("")},t.transform=function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},t.applyTransform=function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]},t.applyInverseTransform=function(t,e){var i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]},t.getAxialAlignedBoundingBox=function(e,i){var n=t.applyTransform(e,i),r=t.applyTransform(e.slice(2,4),i),a=t.applyTransform([e[0],e[3]],i),s=t.applyTransform([e[2],e[1]],i);return[Math.min(n[0],r[0],a[0],s[0]),Math.min(n[1],r[1],a[1],s[1]),Math.max(n[0],r[0],a[0],s[0]),Math.max(n[1],r[1],a[1],s[1])]},t.inverseTransform=function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]},t.apply3dTransform=function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]},t.singularValueDecompose2dScale=function(t){var e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],s=(i+a)/2,o=Math.sqrt((i+a)*(i+a)-4*(i*a-r*n))/2,l=s+o||1,c=s-o||1;return[Math.sqrt(l),Math.sqrt(c)]},t.normalizeRect=function(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e},t.intersect=function(e,i){function n(t,e){return t-e}var r=[e[0],e[2],i[0],i[2]].sort(n),a=[e[1],e[3],i[1],i[3]].sort(n),s=[];return e=t.normalizeRect(e),i=t.normalizeRect(i),(r[0]===e[0]&&r[1]===i[0]||r[0]===i[0]&&r[1]===e[0])&&(s[0]=r[1],s[2]=r[2],(a[0]===e[1]&&a[1]===i[1]||a[0]===i[1]&&a[1]===e[1])&&(s[1]=a[1],s[3]=a[2],s))},t.sign=function(t){return t<0?-1:1},t.appendToArray=function(t,e){Array.prototype.push.apply(t,e)},t.prependToArray=function(t,e){Array.prototype.unshift.apply(t,e)},t.extendObj=function(t,e){for(var i in e)t[i]=e[i]},t.getInheritableProperty=function(t,e){for(;t&&!t.has(e);)t=t.get("Parent");return t?t.get(e):null},t.inherit=function(t,e,i){for(var n in t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i)t.prototype[n]=i[n]},t.loadScript=function(t,e){var i=document.createElement("script"),n=!1;i.setAttribute("src",t),e&&(i.onload=function(){n||e(),n=!0}),document.getElementsByTagName("head")[0].appendChild(i)},t}();PDFJS.PageViewport=function(){function t(t,e,i,n,r,a){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=n,this.offsetY=r;var s,o,l,c,h,u,d,f,p=(t[2]+t[0])/2,m=(t[3]+t[1])/2;switch(i=(i%=360)<0?i+360:i){case 180:s=-1,o=0,l=0,c=1;break;case 90:s=0,o=1,l=1,c=0;break;case 270:s=0,o=-1,l=-1,c=0;break;default:s=1,o=0,l=0,c=-1}a&&(l=-l,c=-c),0===s?(h=Math.abs(m-t[1])*e+n,u=Math.abs(p-t[0])*e+r,d=Math.abs(t[3]-t[1])*e,f=Math.abs(t[2]-t[0])*e):(h=Math.abs(p-t[0])*e+n,u=Math.abs(m-t[1])*e+r,d=Math.abs(t[2]-t[0])*e,f=Math.abs(t[3]-t[1])*e),this.transform=[s*e,o*e,l*e,c*e,h-s*e*p-l*e*m,u-o*e*p-c*e*m],this.width=d,this.height=f,this.fontScale=e}return t.prototype={clone:function(e){var i="scale"in(e=e||{})?e.scale:this.scale,n="rotation"in e?e.rotation:this.rotation;return new t(this.viewBox.slice(),i,n,this.offsetX,this.offsetY,e.dontFlip)},convertToViewportPoint:function(t,e){return _.applyTransform([t,e],this.transform)},convertToViewportRectangle:function(t){var e=_.applyTransform([t[0],t[1]],this.transform),i=_.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]},convertToPdfPoint:function(t,e){return _.applyInverseTransform([t,e],this.transform)}},t}();function y(){var t={};return t.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),t}PDFJS.createPromiseCapability=y,function(){if(a.Promise)return"function"!=typeof a.Promise.all&&(a.Promise.all=function(t){var e,i,n=0,r=[],s=new a.Promise(function(t,n){e=t,i=n});return t.forEach(function(t,a){n++,t.then(function(t){r[a]=t,0===--n&&e(r)},i)}),0===n&&e(r),s}),"function"!=typeof a.Promise.resolve&&(a.Promise.resolve=function(t){return new a.Promise(function(e){e(t)})}),"function"!=typeof a.Promise.reject&&(a.Promise.reject=function(t){return new a.Promise(function(e,i){i(t)})}),void("function"!=typeof a.Promise.prototype.catch&&(a.Promise.prototype.catch=function(t){return a.Promise.prototype.then(void 0,t)}));var t=0,e=2,i={handlers:[],running:!1,unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(e){e._status!==t&&(this.handlers=this.handlers.concat(e._handlers),e._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var t=Date.now()+1;this.handlers.length>0;){var i=this.handlers.shift(),n=i.thisPromise._status,r=i.thisPromise._value;try{1===n?"function"==typeof i.onResolve&&(r=i.onResolve(r)):"function"==typeof i.onReject&&(r=i.onReject(r),n=1,i.thisPromise._unhandledRejection&&this.removeUnhandeledRejection(i.thisPromise))}catch(t){n=e,r=t}if(i.nextPromise._updateStatus(n,r),Date.now()>=t)break}this.handlers.length>0?setTimeout(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(t){this.unhandledRejections.push({promise:t,time:Date.now()}),this.scheduleRejectionCheck()},removeUnhandeledRejection:function(t){t._unhandledRejection=!1;for(var e=0;e<this.unhandledRejections.length;e++)this.unhandledRejections[e].promise===t&&(this.unhandledRejections.splice(e),e--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var t=Date.now(),e=0;e<this.unhandledRejections.length;e++)if(t-this.unhandledRejections[e].time>500){var i=this.unhandledRejections[e].promise._value,n="Unhandled rejection: "+i;i.stack&&(n+="\n"+i.stack),o(n),this.unhandledRejections.splice(e),e--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};function n(e){this._status=t,this._handlers=[];try{e.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(t){this._reject(t)}}n.all=function(t){var i,r,a=new n(function(t,e){i=t,r=e}),s=t.length,o=[];if(0===s)return i(o),a;function l(t){a._status!==e&&(o=[],r(t))}for(var c=0,h=t.length;c<h;++c){var u=t[c],d=function(t){return function(n){a._status!==e&&(o[t]=n,0===--s&&i(o))}}(c);n.isPromise(u)?u.then(d,l):d(u)}return a},n.isPromise=function(t){return t&&"function"==typeof t.then},n.resolve=function(t){return new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,i){i(t)})},n.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function(t,r){1!==this._status&&this._status!==e&&(1===t&&n.isPromise(r)?r.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,e)):(this._status=t,this._value=r,t===e&&0===this._handlers.length&&(this._unhandledRejection=!0,i.addUnhandledRejection(this)),i.scheduleHandlers(this)))},_resolve:function(t){this._updateStatus(1,t)},_reject:function(t){this._updateStatus(e,t)},then:function(t,e){var r=new n(function(t,e){this.resolve=t,this.reject=e});return this._handlers.push({thisPromise:this,onResolve:t,onReject:e,nextPromise:r}),i.scheduleHandlers(this),r},catch:function(t){return this.then(void 0,t)}},a.Promise=n}();!function(){function t(t,e,i){for(;t.length<i;)t+=e;return t}function e(){this.started={},this.times=[],this.enabled=!0}e.prototype={time:function(t){this.enabled&&(t in this.started&&o("Timer is already running for "+t),this.started[t]=Date.now())},timeEnd:function(t){this.enabled&&(t in this.started||o("Timer has not been started for "+t),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t])},toString:function(){var e,i,n=this.times,r="",a=0;for(e=0,i=n.length;e<i;++e){var s=n[e].name;s.length>a&&(a=s.length)}for(e=0,i=n.length;e<i;++e){var o=n[e],l=o.end-o.start;r+=t(o.name," ",a)+" "+l+"ms\n"}return r}}}();PDFJS.createBlob=function(t,e){if("undefined"!=typeof Blob)return new Blob([t],{type:e});var i=new MozBlobBuilder;return i.append(t),i.getBlob(e)},PDFJS.createObjectURL=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(e,i){if(!PDFJS.disableCreateObjectURL&&"undefined"!=typeof URL&&URL.createObjectURL){var n=PDFJS.createBlob(e,i);return URL.createObjectURL(n)}for(var r="data:"+i+";base64,",a=0,s=e.length;a<s;a+=3){var o=255&e[a],l=255&e[a+1],c=255&e[a+2];r+=t[o>>2]+t[(3&o)<<4|l>>4]+t[a+1<s?(15&l)<<2|c>>6:64]+t[a+2<s?63&c:64]}return r}}(),"undefined"!==typeof t&&t.exports&&(t.exports=n)},function(t,e,i){"use strict";var n=i(157),r=/[ \f\t\v]*\r?\n/,a=/^NRRD\d{4}$/,s=/^([^:]*)(:[ =])(.*)$/,o=/^LIST(?: (\d+))?$/;function l(t){return t.replace("\\","\\\\").replace("\n","\\n")}function c(t){return t.split("\\\\").map(function(t){return t.replace("\\n","\n")}).join("\\")}function h(t,e,i,r){var a,s=function(t){return t in f?f[t]:t}(t);switch(t){case"data":case"buffer":case"keys":case"version":break;case"content":case"number":case"sampleUnits":case"space":a=s+": "+e;break;case"blockSize":case"lineSkip":case"byteSkip":case"dimension":case"spaceDimension":n("number"==typeof e||e instanceof Number,"Field "+t+" should at least contain a number!"),a=s+": "+e;break;case"min":case"max":case"oldMin":case"oldMax":n("number"==typeof e||e instanceof Number,"Field "+t+" should contain a number!"),a=s+": "+e;break;case"spaceOrigin":n(e.length===r,"Field "+t+" should be a list with length equal to the space dimension!"),e.forEach(function(e){n("number"==typeof e||e instanceof Number,"Field "+t+" should be a list of numbers!")}),a=s+": ("+e.join(",")+")";break;case"labels":case"units":case"spaceUnits":n(void 0!==e.length&&e.length==i,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){n("string"==typeof e||e instanceof String,"Field "+t+" should be a list of numbers!")}),a=s+": "+e.map(b).join(" ");break;case"sizes":n(void 0!==e.length&&e.length==i,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){n("number"==typeof e||e instanceof Number,"Field "+t+" should be a list of numbers!")}),a=s+": "+e.join(" ");break;case"spacings":case"thicknesses":case"axisMins":case"axisMaxs":n(void 0!==e.length&&e.length==i,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){n("number"==typeof e||e instanceof Number,"Field "+t+" should be a list of numbers!")}),a=s+": "+e.join(" ");break;case"spaceDirections":n(void 0!==e.length&&e.length===i,"Field "+t+" should be a list with length equal to the dimension!"),e.forEach(function(e){n(null===e||void 0!==e.length&&e.length===r,"The elements of field "+t+" should be lists with length equal to the space dimension!"),null!==e&&e.forEach(function(e){n("number"==typeof e||e instanceof Number,"The elements of field "+t+" should be lists of numbers!")})}),a=s+": "+e.map(function(t){return null===t?"none":"("+t.join(",")+")"}).join(" ");break;case"measurementFrame":n(void 0!==e.length&&e.length===r,"Field "+t+" should be a list with length equal to the space dimension!"),e.forEach(function(e){n(null===e||void 0!==e.length&&e.length===r,"The elements of field "+t+" should be lists with length equal to the space dimension!"),null!==e&&e.forEach(function(e){n("number"==typeof e||e instanceof Number,"The elements of field "+t+" should be lists of numbers!")})}),a=s+": "+e.map(function(t){return null===t?"none":"("+t.join(",")+")"}).join(" ");break;case"type":case"encoding":case"endian":n("string"==typeof e||e instanceof String,"Field "+t+" should contain a string!"),a=s+": "+e;break;case"dataFile":e.length||e.files&&"subdim"in e||(a=s+": "+function(t){if("string"==typeof t||t instanceof String)return t;if("format"in t&&"min"in t&&"max"in t&&"step"in t)return"subdim"in t?t.format+" "+t.min+" "+t.max+" "+t.step+" "+t.subdim:t.format+" "+t.min+" "+t.max+" "+t.step;throw new Error("Unrecognized data file format!")}(e));break;case"centers":case"kinds":n(void 0!==e.length&&e.length==i,"Field "+t+" should be a list with length equal to the dimension!"),a=s+": "+e.map(C).join(" ");break;default:console.warn("Unrecognized NRRD field: "+t+", skipping.")}return a}function u(t,e){switch(t){case"content":case"number":case"sampleUnits":break;case"dimension":case"blockSize":case"lineSkip":case"byteSkip":case"spaceDimension":e=m(e);break;case"min":case"max":case"oldMin":case"oldMax":e=g(e);break;case"spaceOrigin":e=_(e);break;case"labels":case"units":case"spaceUnits":e=w(e,y);break;case"sizes":e=w(e,m);break;case"spacings":case"thicknesses":case"axisMins":case"axisMaxs":e=w(e,g);break;case"spaceDirections":case"measurementFrame":e=w(e,_);break;case"type":e=x(e);break;case"encoding":e=A(e);break;case"endian":e=M(e);break;case"dataFile":e=function(t){var e=S.exec(t);return e?5==e.length&&e[4]?{format:t.substring(0,e.index),min:m(e[1]),max:m(e[2]),step:m(e[3]),subdim:m(e[4])}:{format:t.substring(0,e.index),min:m(e[1]),max:m(e[2]),step:m(e[3])}:t}(e);break;case"centers":e=w(e,E);break;case"kinds":e=w(e,I);break;case"space":e=function(t){switch(t.toLowerCase()){case"right-anterior-superior":case"ras":return"right-anterior-superior";case"left-anterior-superior":case"las":return"left-anterior-superior";case"left-posterior-superior":case"lps":return"left-posterior-superior";case"right-anterior-superior-time":case"rast":return"right-anterior-superior-time";case"left-anterior-superior-time":case"last":return"left-anterior-superior-time";case"left-posterior-superior-time":case"lpst":return"left-posterior-superior-time";case"scanner-xyz":return"scanner-xyz";case"scanner-xyz-time":return"scanner-xyz-time";case"3d-right-handed":return"3D-right-handed";case"3d-left-handed":return"3D-left-handed";case"3d-right-handed-time":return"3D-right-handed-time";case"3d-left-handed-time":return"3D-left-handed-time";default:return console.warn("Unrecognized space: "+t),t}}(e);break;default:console.warn("Unrecognized NRRD field: "+t)}return e}t.exports.serialize=function(t){var e,i,n,r,a,s,o,c,u,d,f=1,p={},m=[];for(r in t)p[r]=t[r];if(void 0===p.sizes)throw new Error("Sizes missing from NRRD file!");if(void 0===p.dimension&&(p.dimension=p.sizes.length),p.data instanceof Int8Array?a="int8":p.data instanceof Uint8Array?a="uint8":p.data instanceof Int16Array?a="int16":p.data instanceof Uint16Array?a="uint16":p.data instanceof Int32Array?a="int32":p.data instanceof Uint32Array?a="uint32":p.data instanceof Float32Array?a="float":p.data instanceof Float64Array&&(a="double"),void 0===p.type&&void 0!==a)p.type=a;else{if(void 0===p.type)throw new Error("Type of data is not given and cannot be inferred!");("string"==typeof p.type||p.type instanceof String)&&(p.type=x(p.type))}void 0===p.encoding?p.encoding="raw":("string"==typeof p.encoding||p.encoding instanceof String)&&(p.encoding=A(p.encoding)),p.data&&"block"!=p.type&&"int8"!=p.type&&"uint8"!=p.type&&"ascii"!=p.encoding?p.endian=k:"block"==p.type||"int8"==p.type||"uint8"==p.type||"ascii"==p.encoding?p.endian=void 0:("string"==typeof p.endian||p.endian instanceof String)&&(p.endian=M(p.endian));var g=void 0;if(void 0!==p.spaceDimension)g=p.spaceDimension;else if(void 0!==p.space)switch(p.space){case"right-anterior-superior":case"RAS":g=3;break;case"left-anterior-superior":case"LAS":g=3;break;case"left-posterior-superior":case"LPS":g=3;break;case"right-anterior-superior-time":case"RAST":g=4;break;case"left-anterior-superior-time":case"LAST":g=4;break;case"left-posterior-superior-time":case"LPST":g=4;break;case"scanner-xyz":g=3;break;case"scanner-xyz-time":g=4;break;case"3D-right-handed":case"3D-left-handed":g=3;break;case"3D-right-handed-time":case"3D-left-handed-time":g=4;break;default:console.warn("Unrecognized space: "+p.space)}for(L(p),e=0;e<p.sizes.length;e++){if(p.sizes[e]<=0)throw new Error("Sizes should be a list of positive (>0) integers!");f*=p.sizes[e]}if(p.data){if(p.data.length<f)throw new Error("Missing data to serialize!")}else if(p.buffer){if("raw"==p.encoding&&(s="block"==p.type&&void 0!==p.blockSize?p.blockSize:B(p.type),p.buffer.byteLength<f*s))throw new Error("Missing data to serialize!")}else if(!p.dataFile)throw new Error("Will not serialize an empty NRRD file!");if(p.data)switch(p.encoding){case"raw":o=p.type==a&&p.endian==k?p.data.buffer.slice(p.data.byteOffset,p.data.byteOffset+p.data.byteLength):p.endian==k?(o=R(p.data,p.type)).buffer.slice(o.byteOffset,o.byteOffset+o.byteLength):function(t,e,i){var n,r,a,s=B(e),o=new ArrayBuffer(t.length*s);switch(i){case"big":r=!1;break;case"little":r=!0;break;default:return void console.warn("Unsupported endianness in NRRD file: "+i)}switch(a=new DataView(o),e){case"int8":for(n=0;n<t.length;n++)a.setInt8(n,t[n],r);return o;case"uint8":for(n=0;n<t.length;n++)a.setUint8(n,t[n],r);return o;case"int16":for(n=0;n<t.length;n++)a.setInt16(2*n,t[n],r);return o;case"uint16":for(n=0;n<t.length;n++)a.setUint16(2*n,t[n],r);return o;case"int32":for(n=0;n<t.length;n++)a.setInt32(4*n,t[n],r);return o;case"uint32":for(n=0;n<t.length;n++)a.setUint32(4*n,t[n],r);return o;case"float":for(n=0;n<t.length;n++)a.setFloat32(4*n,t[n],r);return o;case"double":for(n=0;n<t.length;n++)a.setFloat64(8*n,t[n],r);return o;default:return void console.warn("Cannot serialize NRRD type: "+e+".")}}(p.data,p.type,p.endian);break;case"ascii":o=p.type==a?D(p.data):D(R(p.data,p.type));break;default:throw new Error("Unsupported NRRD encoding: "+p.encoding)}else p.buffer&&(o=p.buffer);m.push("NRRD0005"),m.push("# Generated by nrrd-js");var _=["dimension","spaceDimension","space"];for(e=0;e<_.length;e++)void 0!==p[r=_[e]]&&void 0!==(u=h(r,p[r],p.dimension,g))&&m.push(u);for(r in p)void 0!==p[r]&&(_.indexOf(r)>=0||void 0!==(u=h(r,p[r],p.dimension,g))&&m.push(u));if(p.keys)for(r in p.keys){if(r.indexOf(":=")>=0)throw new Error("The combination ':=' is not allowed in an NRRD key!");m.push(r+":="+l(p[r]))}if(p.dataFile&&p.dataFile.length?(m.push("data file: LIST"),Array.prototype.push.apply(m,p.dataFile)):p.dataFile&&p.dataFile.files&&"subdim"in p.dataFile&&(m.push("data file: LIST "+p.dataFile.subdim),Array.prototype.push.apply(m,p.dataFile.files)),!o||"dataFile"in p)for(m.push(""),d=m.join("\n"),i=new ArrayBuffer(d.length),n=new Uint8Array(i),e=0;e<d.length;e++)n[e]=d.charCodeAt(e);else{for(m.push(""),m.push(""),d=m.join("\n"),i=new ArrayBuffer(d.length+o.byteLength),n=new Uint8Array(i),e=0;e<d.length;e++)n[e]=d.charCodeAt(e);c=new Uint8Array(o),n.set(c,d.length)}return i},t.exports.parse=function(t){var e,i,n,l,h,d,f={data:void 0,buffer:void 0,keys:{},version:void 0},_=new Uint8Array(t);for(_.buffer!==t&&(t=_.buffer),e=2;e<_.length;)if(10==_[e]){if(10==_[e-1]||13==_[e-1]&&10==_[e-2]){n=e+1;break}e++}else 13==_[e]?e++:e+=2;if(void 0===n?i=String.fromCharCode.apply(null,_):(i=String.fromCharCode.apply(null,_.subarray(0,n)),f.buffer=t.slice(n)),l=(l=i.split(r)).filter(function(t){return t.length>0&&"#"!=t[0]}),!a.test(l[0]))throw new Error("File is not an NRRD file!");for(f.version=parseInt(l[0].substring(4,8),10),f.version>5&&console.warn("Reading an unsupported version of the NRRD format; things may go haywire."),e=1;e<l.length;e++)if(h=s.exec(l[e]))if(": "==h[2])h[1]=p(h[1]),"dataFile"==h[1]&&(d=o.exec(h[3]))?(2==d.length&&d[1]?f[h[1]]={files:l.slice(e+1),subdim:m(d[1])}:f[h[1]]=l.slice(e+1),l.length=e):f[h[1]]=u(h[1],h[3]);else{if(":="!=h[2])throw new Error("Logic error in NRRD parser.");f.keys[h[1]]=c(h[3])}else console.warn("Unrecognized line in NRRD header: "+l[e]);if(L(f),"dataFile"in f)console.warn("No support for external data yet!");else switch(f.encoding){case"raw":f.data=function(t,e,i,n){var r,a,s,o=1;for(r=0;r<i.length;r++){if(i[r]<=0)throw new Error("Sizes should be a list of positive (>0) integers!");o*=i[r]}if("block"==e)return t.slice(0,o*n.blockSize);if("int8"==e||"uint8"==e||n.endian==k)switch(e){case"int8":return l(1),new Int8Array(t.slice(0,o));case"uint8":return l(1),new Uint8Array(t.slice(0,o));case"int16":return l(2),new Int16Array(t.slice(0,2*o));case"uint16":return l(2),new Uint16Array(t.slice(0,2*o));case"int32":return l(4),new Int32Array(t.slice(0,4*o));case"uint32":return l(4),new Uint32Array(t.slice(0,4*o));case"float":return l(4),new Float32Array(t.slice(0,4*o));case"double":return l(8),new Float64Array(t.slice(0,8*o));default:return void console.warn("Unsupported NRRD type: "+e+", returning raw buffer.")}else{switch(n.endian){case"big":!1;break;case"little":!0;break;default:return void console.warn("Unsupported endianness in NRRD file: "+n.endian)}switch(s=new DataView(t),e){case"int8":for(a=new Int8Array(o),r=0;r<o;r++)a[r]=s.getInt8(r);return a;case"uint8":for(a=new Uint8Array(o),r=0;r<o;r++)a[r]=s.getUint8(r);return a;case"int16":for(a=new Int16Array(o),r=0;r<o;r++)a[r]=s.getInt16(2*r);return a;case"uint16":for(a=new Uint16Array(o),r=0;r<o;r++)a[r]=s.getUint16(2*r);return a;case"int32":for(a=new Int32Array(o),r=0;r<o;r++)a[r]=s.getInt32(4*r);return a;case"uint32":for(a=new Uint32Array(o),r=0;r<o;r++)a[r]=s.getUint32(4*r);return a;case"float":for(a=new Float32Array(o),r=0;r<o;r++)a[r]=s.getFloat32(4*r);return a;case"double":for(a=new Float64Array(o),r=0;r<o;r++)a[r]=s.getFloat64(8*r);return a;default:return void console.warn("Unsupported NRRD type: "+e+", returning raw buffer.")}}function l(e){if(t.byteLength<o*e)throw new Error("NRRD file does not contain enough data!")}}(f.buffer,f.type,f.sizes,{endian:f.endian,blockSize:f.blockSize});break;case"ascii":f.data=function(t,e,i){var n,r,a,s,o=1;for(n=0;n<i.length;n++){if(i[n]<=0)throw new Error("Sizes should be a list of positive (>0) integers!");o*=i[n]}if(r=new Uint8Array(t),a=String.fromCharCode.apply(null,r),(s=a.split(P)).length<o)throw new Error("Not enough data in NRRD file!");s.length>o&&(""===s[0]&&(s=s.slice(1)),s=s.slice(0,o));switch(e){case"int8":return new Int8Array(s.map(m));case"uint8":return new Uint8Array(s.map(m));case"int16":return new Int16Array(s.map(m));case"uint16":return new Uint16Array(s.map(m));case"int32":return new Int32Array(s.map(m));case"uint32":return new Uint32Array(s.map(m));case"float":return new Float32Array(s.map(g));case"double":return new Float64Array(s.map(g));default:return void console.warn("Unsupported NRRD type: "+e+".")}}(f.buffer,f.type,f.sizes);break;default:console.warn("Unsupported NRRD encoding: "+f.encoding)}return f};var d={"block size":"blockSize",blocksize:"blockSize","old min":"oldMin",oldmin:"oldMin","old max":"oldMax",oldmax:"oldMax","data file":"dataFile",datafile:"dataFile","line skip":"lineSkip",lineskip:"lineSkip","byte skip":"byteSkip",byteskip:"byteSkip","sample units":"sampleUnits",sampleunits:"sampleUnits","axis mins":"axisMins","axis maxs":"axisMaxs",centers:"centers",centerings:"centers","space dimension":"spaceDimension","space units":"spaceUnits","space origin":"spaceOrigin","space directions":"spaceDirections","measurement frame":"measurementFrame"},f=function(){var t,e={};for(t in d)e[d[t]]=t;return e}();function p(t){return(t=t.toLowerCase())in d?d[t]:t}function m(t){var e=parseInt(t,10);if(Number.isNaN(e))throw new Error("Malformed NRRD integer: "+t);return e}function g(t){if((t=t.toLowerCase()).indexOf("nan")>=0)return NaN;if(t.indexOf("-inf")>=0)return-1/0;if(t.indexOf("inf")>=0)return 1/0;var e=parseFloat(t);if(Number.isNaN(e))throw new Error("Malformed NRRD float: "+t);return e}function _(t){if("none"==t)return null;if(t.length<2||"("!==t[0]||")"!==t[t.length-1])throw new Error("Malformed NRRD vector: "+t);return t.slice(1,-1).split(",").map(g)}function y(t){if(length<2||'"'!=t[0]||'"'!=t[t.length-1])throw new Error("Invalid NRRD quoted string: "+t);return t.slice(1,-1).replace('\\"','"')}function b(t){return'"'+t.replace('"','\\"')+'"'}var v=/[ \t]+/;function w(t,e){return t.split(v).map(e)}function x(t){switch(t.toLowerCase()){case"signed char":case"int8":case"int8_t":return"int8";case"uchar":case"unsigned char":case"uint8":case"uint8_t":return"uint8";case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":return"int16";case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":return"uint16";case"int":case"signed int":case"int32":case"int32_t":return"int32";case"uint":case"unsigned int":case"uint32":case"uint32_t":return"uint32";case"longlong":case"long long":case"long long int":case"signed long long":case"signed long long int":case"int64":case"int64_t":return"int64";case"ulonglong":case"unsigned long long":case"unsigned long long int":case"uint64":case"uint64_t":return"uint64";case"float":return"float";case"double":return"double";case"block":return"block";default:return console.warn("Unrecognized NRRD type: "+t),t}}function A(t){switch(t.toLowerCase()){case"raw":return"raw";case"txt":case"text":case"ascii":return"ascii";case"hex":return"hex";case"gz":case"gzip":return"gzip";case"bz2":case"bzip2":return"bzip2";default:return console.warn("Unrecognized NRRD encoding: "+t),t}}function M(t){switch(t.toLowerCase()){case"little":return"little";case"big":return"big";default:return console.warn("Unrecognized NRRD endianness: "+t),t}}var S=/ (-?\d+) (-?\d+) (-?\d+)(?: (\d+))?$/;function E(t){switch(t.toLowerCase()){case"cell":return"cell";case"node":return"node";case"???":case"none":return null;default:return console.warn("Unrecognized NRRD center: "+t),t}}var T={domain:"domain",space:"space",time:"time",list:"list",point:"point",vector:"vector","covariant-vector":"covariant-vector",normal:"normal",stub:"stub",scalar:"scalar",complex:"complex","2-vector":"2-vector","3-color":"3-color","rgb-color":"RGB-color","hsv-color":"HSV-color","xyz-color":"XYZ-color","4-color":"4-color","rgba-color":"RGBA-color","3-vector":"3-vector","3-gradient":"3-gradient","3-normal":"3-normal","4-vector":"4-vector",quaternion:"quaternion","2d-symmetric-matrix":"2D-symmetric-matrix","2d-masked-symmetric-matrix":"2D-masked-symmetric-matrix","2d-matrix":"2D-matrix","2d-masked-matrix":"2D-masked-matrix","3d-symmetric-matrix":"3D-symmetric-matrix","3d-masked-symmetric-matrix":"3D-masked-symmetric-matrix","3d-matrix":"3D-matrix","3d-masked-matrix":"3D-masked-matrix","???":null,none:null};function I(t){var e=t.toLowerCase();return e in T?T[e]:(console.warn("Unrecognized NRRD kind: "+t),t)}function C(t){return null===t?"???":t}var k=function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),i=new Uint8Array(t);return e[0]=16909060,1==i[0]&&2==i[1]&&3==i[2]&&4==i[3]?"big":4==i[0]&&3==i[1]&&2==i[2]&&1==i[3]?"little":void console.warn("Unrecognized system endianness!")}();var P=/[ \t\n\r\v\f]+/;function B(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":return 4;case"int64":case"uint64":return 8;case"float":return 4;case"double":return 8;default:throw new Error("Do not know the size of NRRD type: "+t)}}function L(t){if(void 0===t.dimension)throw new Error("Dimension missing from NRRD file!");if(void 0===t.type)throw new Error("Type missing from NRRD file!");if(void 0===t.encoding)throw new Error("Encoding missing from NRRD file!");if(void 0===t.sizes)throw new Error("Sizes missing from NRRD file!");if("block"!=t.type&&"int8"!=t.type&&"uint8"!=t.type&&"ascii"!=t.encoding&&void 0===t.endian)throw new Error("Endianness missing from NRRD file!");if("block"==t.type&&void 0===t.blockSize)throw new Error("Missing block size in NRRD file!");if(0===t.dimension)throw new Error("Zero-dimensional NRRD file?");if(t.dimension!=t.sizes.length)throw new Error("Length of 'sizes' is different from 'dimension' in an NRRD file!");if(t.spacings&&t.dimension!=t.spacings.length)throw new Error("Length of 'spacings' is different from 'dimension' in an NRRD file!");if(t.thicknesses&&t.dimension!=t.thicknesses.length)throw new Error("Length of 'thicknesses' is different from 'dimension' in an NRRD file!");if(t.axisMins&&t.dimension!=t.axisMins.length)throw new Error("Length of 'axis mins' is different from 'dimension' in an NRRD file!");if(t.axisMaxs&&t.dimension!=t.axisMaxs.length)throw new Error("Length of 'axis maxs' is different from 'dimension' in an NRRD file!");if(t.centers&&t.dimension!=t.centers.length)throw new Error("Length of 'centers' is different from 'dimension' in an NRRD file!");if(t.labels&&t.dimension!=t.labels.length)throw new Error("Length of 'labels' is different from 'dimension' in an NRRD file!");if(t.units&&t.dimension!=t.units.length)throw new Error("Length of 'units' is different from 'dimension' in an NRRD file!");if(t.kinds&&t.dimension!=t.kinds.length)throw new Error("Length of 'kinds' is different from 'dimension' in an NRRD file!");if(!(void 0!==t.data&&0!==t.data.length||void 0!==t.buffer&&0!==t.buffer.byteLength||void 0!==t.dataFile))throw new Error("NRRD file has neither inline or external data!")}function R(t,e){switch(e){case"int8":return new Int8Array(t);case"uint8":return new Uint8Array(t);case"int16":return new Int16Array(t);case"uint16":return new Uint16Array(t);case"int32":return new Int32Array(t);case"uint32":return new Uint32Array(t);case"float":return new Float32Array(t);case"double":return new Float64Array(t);default:throw new Error("Cannot cast to NRRD type: "+e)}}function D(t){var e,i,n,r,a=new Array(t.length);for(e=0;e<t.length;e++)a[e]=""+t[e];for(i=a.join(" "),n=new ArrayBuffer(i.length),r=new Uint8Array(n),e=0;e<r.length;e++)r[e]=i.charCodeAt(e);return n}},function(t,e,i){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
function n(t,e){if(t===e)return 0;for(var i=t.length,n=e.length,r=0,a=Math.min(i,n);r<a;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0}function r(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=i(158),s=Object.prototype.hasOwnProperty,o=Array.prototype.slice,l="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function h(t){return!r(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var u=t.exports=_,d=/\s*function\s+([^\(\s]*)\s*/;function f(t){if(a.isFunction(t)){if(l)return t.name;var e=t.toString().match(d);return e&&e[1]}}function p(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(l||!a.isFunction(t))return a.inspect(t);var e=f(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,i,n,r){throw new u.AssertionError({message:i,actual:t,expected:e,operator:n,stackStartFunction:r})}function _(t,e){t||g(t,!0,e,"==",u.ok)}function y(t,e,i,s){if(t===e)return!0;if(r(t)&&r(e))return 0===n(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(h(t)&&h(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===n(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(r(t)!==r(e))return!1;var l=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==l&&l===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),function(t,e,i,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(i&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=b(t),s=b(e);if(r&&!s||!r&&s)return!1;if(r)return t=o.call(t),e=o.call(e),y(t,e,i);var l,c,h=x(t),u=x(e);if(h.length!==u.length)return!1;for(h.sort(),u.sort(),c=h.length-1;c>=0;c--)if(h[c]!==u[c])return!1;for(c=h.length-1;c>=0;c--)if(l=h[c],!y(t[l],e[l],i,n))return!1;return!0}(t,e,i,s))}return i?t===e:t==e}function b(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function w(t,e,i,n){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(n=i,i=null),r=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(i&&i.name?" ("+i.name+").":".")+(n?" "+n:"."),t&&!r&&g(r,i,"Missing expected exception"+n);var s="string"==typeof n,o=!t&&a.isError(r),l=!t&&r&&!i;if((o&&s&&v(r,i)||l)&&g(r,i,"Got unwanted exception"+n),t&&r&&i&&!v(r,i)||!t&&r)throw r}u.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return p(m(t.actual),128)+" "+t.operator+" "+p(m(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var i=new Error;if(i.stack){var n=i.stack,r=f(e),a=n.indexOf("\n"+r);if(a>=0){var s=n.indexOf("\n",a+1);n=n.substring(s+1)}this.stack=n}}},a.inherits(u.AssertionError,Error),u.fail=g,u.ok=_,u.equal=function(t,e,i){t!=e&&g(t,e,i,"==",u.equal)},u.notEqual=function(t,e,i){t==e&&g(t,e,i,"!=",u.notEqual)},u.deepEqual=function(t,e,i){y(t,e,!1)||g(t,e,i,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(t,e,i){y(t,e,!0)||g(t,e,i,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(t,e,i){y(t,e,!1)&&g(t,e,i,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function t(e,i,n){y(e,i,!0)&&g(e,i,n,"notDeepStrictEqual",t)},u.strictEqual=function(t,e,i){t!==e&&g(t,e,i,"===",u.strictEqual)},u.notStrictEqual=function(t,e,i){t===e&&g(t,e,i,"!==",u.notStrictEqual)},u.throws=function(t,e,i){w(!0,t,e,i)},u.doesNotThrow=function(t,e,i){w(!1,t,e,i)},u.ifError=function(t){if(t)throw t};var x=Object.keys||function(t){var e=[];for(var i in t)s.call(t,i)&&e.push(i);return e}}).call(this,i(63))},function(t,e,i){(function(t,n){var r=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(o(arguments[i]));return e.join(" ")}i=1;for(var n=arguments,a=n.length,s=String(t).replace(r,function(t){if("%%"===t)return"%";if(i>=a)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}}),l=n[i];i<a;l=n[++i])m(l)||!v(l)?s+=" "+l:s+=" "+o(l);return s},e.deprecate=function(i,r){if(y(t.process))return function(){return e.deprecate(i,r).apply(this,arguments)};if(!0===n.noDeprecation)return i;var a=!1;return function(){if(!a){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),a=!0}return i.apply(this,arguments)}};var a,s={};function o(t,i){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(i)?n.showHidden=i:i&&e._extend(n,i),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),h(n,t,n.depth)}function l(t,e){var i=o.styles[e];return i?"["+o.colors[i][0]+"m"+t+"["+o.colors[i][1]+"m":t}function c(t,e){return t}function h(t,i,n){if(t.customInspect&&i&&A(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,t);return _(r)||(r=h(t,r,n)),r}var a=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(_(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(g(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,i);if(a)return a;var s=Object.keys(i),o=function(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(i)),x(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(i);if(0===s.length){if(A(i)){var l=i.name?": "+i.name:"";return t.stylize("[Function"+l+"]","special")}if(b(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(w(i))return t.stylize(Date.prototype.toString.call(i),"date");if(x(i))return u(i)}var c,v="",M=!1,S=["{","}"];(f(i)&&(M=!0,S=["[","]"]),A(i))&&(v=" [Function"+(i.name?": "+i.name:"")+"]");return b(i)&&(v=" "+RegExp.prototype.toString.call(i)),w(i)&&(v=" "+Date.prototype.toUTCString.call(i)),x(i)&&(v=" "+u(i)),0!==s.length||M&&0!=i.length?n<0?b(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),c=M?function(t,e,i,n,r){for(var a=[],s=0,o=e.length;s<o;++s)T(e,String(s))?a.push(d(t,e,i,n,String(s),!0)):a.push("");return r.forEach(function(r){r.match(/^\d+$/)||a.push(d(t,e,i,n,r,!0))}),a}(t,i,n,o,s):s.map(function(e){return d(t,i,n,o,e,M)}),t.seen.pop(),function(t,e,i){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(c,v,S)):S[0]+v+S[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,i,n,r,a){var s,o,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?o=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(o=t.stylize("[Setter]","special")),T(n,r)||(s="["+r+"]"),o||(t.seen.indexOf(l.value)<0?(o=m(i)?h(t,l.value,null):h(t,l.value,i-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+o.split("\n").map(function(t){return"   "+t}).join("\n")):o=t.stylize("[Circular]","special")),y(s)){if(a&&r.match(/^\d+$/))return o;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+o}function f(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function m(t){return null===t}function g(t){return"number"==typeof t}function _(t){return"string"==typeof t}function y(t){return void 0===t}function b(t){return v(t)&&"[object RegExp]"===M(t)}function v(t){return"object"==typeof t&&null!==t}function w(t){return v(t)&&"[object Date]"===M(t)}function x(t){return v(t)&&("[object Error]"===M(t)||t instanceof Error)}function A(t){return"function"==typeof t}function M(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(y(a)&&(a=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(a)){var i=n.pid;s[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else s[t]=function(){};return s[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=p,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=_,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=b,e.isObject=v,e.isDate=w,e.isError=x,e.isFunction=A,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(159);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),E[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=i(160),e._extend=function(t,e){if(!e||!v(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}).call(this,i(63),i(62))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";i.r(e);var n=i(37);i.d(e,"FrameModel",function(){return n.a});var r=i(36);i.d(e,"StackModel",function(){return r.a});var a=i(35);i.d(e,"SeriesModel",function(){return a.a});var s=i(42);i.d(e,"VoxelModel",function(){return s.a})},function(t,e,i){"use strict";i.r(e);var n=i(39);i.d(e,"DicomParser",function(){return n.a});var r=i(41);i.d(e,"MghParser",function(){return r.a});var a=i(38);i.d(e,"NiftiParser",function(){return a.a});var s=i(40);i.d(e,"NrrdParser",function(){return s.a})},function(t,e,i){"use strict";i.r(e);var n=i(96);i.d(e,"SegmentationPreset",function(){return n.a})},function(t,e,i){"use strict";i.r(e);var n=i(27);i.d(e,"ContourUniformShader",function(){return n.a});var r=i(20);i.d(e,"ContourFragmentShader",function(){return r.a});var a=i(21);i.d(e,"ContourVertexShader",function(){return a.a});var s=i(32);i.d(e,"DataUniformShader",function(){return s.a});var o=i(30);i.d(e,"DataFragmentShader",function(){return o.a});var l=i(31);i.d(e,"DataVertexShader",function(){return l.a});var c=i(24);i.d(e,"VRUniformShader",function(){return c.a});var h=i(33);i.d(e,"VRFragmentShader",function(){return h.a});var u=i(34);i.d(e,"VRVertexShader",function(){return u.a});var d=i(97);i.d(e,"LayerUniformShader",function(){return d.a});var f=i(98);i.d(e,"LayerFragmentShader",function(){return f.a});var p=i(99);i.d(e,"LayerVertexShader",function(){return p.a});var m=i(28);i.d(e,"LocalizerUniformShader",function(){return m.a});var g=i(22);i.d(e,"LocalizerFragmentShader",function(){return g.a});var _=i(23);i.d(e,"LocalizerVertexShader",function(){return _.a})},function(t,e,i){"use strict";i.r(e);var n=i(64);i.d(e,"WidgetsCss",function(){return n.default});var r=i(65);i.d(e,"AngleWidget",function(){return r.a}),i.d(e,"angleWidgetFactory",function(){return r.b});var a=i(66);i.d(e,"AnnotationWidget",function(){return a.a}),i.d(e,"annotationWidgetFactory",function(){return a.b});var s=i(67);i.d(e,"BiRulerWidget",function(){return s.a}),i.d(e,"birulerWidgetFactory",function(){return s.b});var o=i(68);i.d(e,"CrossRulerWidget",function(){return o.a}),i.d(e,"crossrulerWidgetFactory",function(){return o.b});var l=i(69);i.d(e,"EllipseWidget",function(){return l.a}),i.d(e,"ellipseWidgetFactory",function(){return l.b});var c=i(70);i.d(e,"FreehandWidget",function(){return c.a}),i.d(e,"freehandWidgetFactory",function(){return c.b});var h=i(3);i.d(e,"HandleWidget",function(){return h.a}),i.d(e,"handleWidgetFactory",function(){return h.b});var u=i(71);i.d(e,"PeakVelocityWidget",function(){return u.a}),i.d(e,"peakVelocityWidgetFactory",function(){return u.b});var d=i(72);i.d(e,"PressureHalfTimeWidget",function(){return d.a}),i.d(e,"pressureHalfTimeWidgetFactory",function(){return d.b});var f=i(73);i.d(e,"PolygonWidget",function(){return f.a}),i.d(e,"polygonWidgetFactory",function(){return f.b});var p=i(74);i.d(e,"RectangleWidget",function(){return p.a}),i.d(e,"rectangleWidgetFactory",function(){return p.b});var m=i(75);i.d(e,"RulerWidget",function(){return m.a}),i.d(e,"rulerWidgetFactory",function(){return m.b});var g=i(76);i.d(e,"VelocityTimeIntegralWidget",function(){return g.a}),i.d(e,"velocityTimeIntegralWidgetFactory",function(){return g.b});var _=i(77);i.d(e,"VoxelProbeWidget",function(){return _.a}),i.d(e,"voxelprobeWidgetFactory",function(){return _.b})},function(t){t.exports={name:"ami.js",version:"0.32.1",main:"build/ami.js",keywords:["ami","ami.js","three.js","webgl","dicom","nifti","awesome","medical","imaging","xtk","nrrd","vtk","stl","trk"],author:{name:"Nicolas Rannou",email:"nicolas@eunate.ch",url:"https://eunate.ch"},license:"Apache-2.0",repository:{type:"git",url:"https://fnndsc.github.io/ami"},config:{gaKey:"UA-39303022-3",babel:"--module-bind js=babel-loader --colors --display-error-details"},"lint-staged":{"{{src/**,examples/**, lessons/**}/,}.{js,jsx,json,css,ts,tsx}":["prettier --write","git add"]},prettier:{printWidth:100,singleQuote:!0,trailingComma:"es5",overrides:[{files:"*.css",options:{useTabs:!1,tabWidth:2}}]},sideEffects:!1,dependencies:{"OpenJPEG.js":"joedrago/openjpeg#master","dicom-parser":"1.8.1","image-JPEG2000":"ReflexionMed/image-JPEG2000#master","jpeg-lossless-decoder-js":"1.2.3","math-float32-to-binary-string":"^1.0.0","nifti-reader-js":"v0.5.3","nrrd-js":"^0.2.1",pako:"1.0.1",three:"^0.122.0"},scripts:{precommit:"lint-staged","tslint-check":"tslint-config-prettier-check ./tslint.json","check-codestyle":"prettier-check 'src/**/*.{js,jsx,json,css,ts,tsx}'","fix-all-code-style":"prettier --write '{{src/**,examples/**, lessons/**}/,}*.{js,jsx,json,css,ts,tsx}'","build:ami":"webpack --config webpack.config.build.js --display-error-details",build:"yarn build:ami && yarn build:ami:prod","build:ami:prod":"cross-env NODE_ENV=production yarn build:ami","build:clean":"rimraf -rf build/*","build:clean:hot":"rimraf -rf build/*.hot-update.*","dev:ami":"webpack --config webpack.config.build.js --hot --watch --colors","dist:ami":"yarn build:clean && yarn build:ami && yarn build:ami:prod && yarn doc","dist:examples":"node ./scripts/buildDist.js && node ./scripts/router.js examples deploy","dist:clean":"rimraf -rf dist/*","analyze:ami":"cross-env NODE_WEBPACK_ANALYZE=true yarn build:ami","analyze:ami:prod":"cross-env NODE_WEBPACK_ANALYZE=true yarn build:ami:prod",clean:"yarn build:clean && yarn dist:clean",example:"node ./scripts/router.js examples","gen:index:examples":"node ./scripts/genIndexFiles.js examples","gen:index:examples:ga":"cross-env NODE_GA=true node ./scripts/genIndexFiles.js examples",test:"karma start",testExamples:"yarn dist:clean && yarn dist:examples",doc:"jsdoc -p -r -R README.md -c jsdoc.json -d dist/doc src",ami:"yarn dist:ami && yarn test",deploy:"yarn dist:clean && yarn build:clean && yarn dist:ami && yarn dist:examples && gh-pages -d dist"},devDependencies:{"@babel/cli":"^7.0.0","@babel/core":"^7.0.0","@babel/preset-env":"^7.12.11","@babel/runtime-corejs2":"^7.0.0","@types/jasmine":"^3.3.2","@types/node":"^10.11.3","@types/three":"^0.93.13","babel-loader":"^8.0.0","compression-webpack-plugin":"^1.0.1","cross-env":"^3.2.3","gh-pages":"^1.2.0",husky:"^1.1.3","jasmine-core":"^2.99.1",jsdoc:"^3.6.6",karma:"^2.0.5","karma-chrome-launcher":"^2.2.0","karma-jasmine":"^1.1.2","karma-sinon":"^1.0.5","karma-spec-reporter":"^0.0.32","karma-webpack":"3.0.0","lint-staged":"^8.0.4","live-server":"^1.1.0","node-pre-gyp":"^0.10.0",prettier:"^1.15.1","prettier-check":"^2.0.0",puppeteer:"^1.6.1",rimraf:"^2.6.1","rollup-plugin-node-builtins":"^2.1.2",shelljs:"^0.8.2",sinon:"^2.0.0","ts-loader":"^5.2.1",tslint:"^5.11.0","tslint-config-prettier":"^1.15.0","tslint-loader":"^3.6.0",typescript:"^3.1.1","uglifyjs-webpack-plugin":"^1.2.7",webpack:"^4.16.3","webpack-bundle-analyzer":"^2.9.0","webpack-cli":"^3.1.0","webpack-dev-server":"^3.1.5","webpack-watch-livereload-plugin":"^0.0.1"},peerDependencies:{three:">=0.122.0"},engines:{node:">=6.9.0"}}},function(t){t.exports={name:"three",version:"0.122.0",description:"JavaScript 3D library",main:"build/three.js",module:"build/three.module.js",types:"src/Three.d.ts",repository:{type:"git",url:"https://github.com/mrdoob/three.js"},files:["build/three.js","build/three.min.js","build/three.module.js","examples/js","examples/jsm","examples/fonts","LICENSE","package.json","README.md","src"],directories:{doc:"docs",example:"examples",test:"test"},eslintConfig:{parser:"@typescript-eslint/parser",extends:"mdcs",plugins:["html","@typescript-eslint"],rules:{"@typescript-eslint/no-unused-vars":["error"],"@typescript-eslint/indent":["error","tab",{SwitchCase:1}],"prefer-const":["error",{destructuring:"any",ignoreReadBeforeAssign:!1}]}},scripts:{start:"npm run dev",test:"npm run test-lint && npm run test-unit",build:"rollup -c utils/build/rollup.config.js",dev:'concurrently --names "ROLLUP,HTTP" -c "bgBlue.bold,bgGreen.bold" "rollup -c utils/build/rollup.config.js -w -m inline" "http-server -c-1 -p 8080"',"dev-test":'concurrently --names "ROLLUP,ROLLUPTEST,HTTP" -c "bgBlue.bold,bgRed.bold,bgGreen.bold" "rollup -c utils/build/rollup.config.js -w -m inline" "npm run dev --prefix test" "http-server -p 8080"',"lint-fix":"eslint src --ext js --ext ts --fix && eslint examples/js/ --ext js --ext ts --ignore-pattern libs --fix","lint-docs":"eslint docs --ext html","lint-examples":"eslint examples/jsm --ext js --ext ts --ignore-pattern libs && tsc -p utils/build/tsconfig-examples.lint.json","test-lint":"eslint src --ext js --ext ts && tsc -p utils/build/tsconfig.lint.json","test-unit":"npm run unit --prefix test","test-e2e":"node test/e2e/puppeteer.js","test-e2e-cov":"node test/e2e/check-coverage.js","make-screenshot":"node test/e2e/puppeteer.js --make"},keywords:["three","three.js","javascript","3d","virtual-reality","augmented-reality","webgl","webgl2","webaudio","webxr","canvas","svg","html5"],author:"mrdoob",license:"MIT",bugs:{url:"https://github.com/mrdoob/three.js/issues"},homepage:"https://threejs.org/",devDependencies:{"@babel/core":"^7.11.6","@babel/plugin-proposal-class-properties":"^7.10.4","@babel/preset-env":"^7.11.5","@rollup/plugin-babel":"^5.2.1","@typescript-eslint/eslint-plugin":"^4.0.0","@typescript-eslint/parser":"^4.0.0",concurrently:"^5.3.0",eslint:"^7.6.0","eslint-config-mdcs":"^5.0.0","eslint-plugin-html":"^6.0.3","http-server":"^0.12.3",rollup:"^2.28.1","rollup-plugin-terser":"^7.0.2",typescript:"^4.0.2"},jspm:{files:["package.json","LICENSE","README.md","build/three.js","build/three.min.js","build/three.module.js"],directories:{}}}}])});